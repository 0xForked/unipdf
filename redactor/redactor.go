//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package redactor ;import (_g "errors";_c "fmt";_e "github.com/unidoc/unipdf/v3/common";_af "github.com/unidoc/unipdf/v3/contentstream";_ge "github.com/unidoc/unipdf/v3/core";_gb "github.com/unidoc/unipdf/v3/creator";_a "github.com/unidoc/unipdf/v3/extractor";
_cd "github.com/unidoc/unipdf/v3/model";_bg "io";_f "regexp";_d "sort";_fg "strings";);

// Write writes the content of `re.creator` to writer of type io.Writer interface.
func (_acbd *Redactor )Write (writer _bg .Writer )error {return _acbd ._gda .Write (writer )};

// WriteToFile writes the redacted document to file specified by `outputPath`.
func (_gfa *Redactor )WriteToFile (outputPath string )error {if _bfa :=_gfa ._gda .WriteToFile (outputPath );_bfa !=nil {return _c .Errorf ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0074o\u0020\u0077\u0072\u0069\u0074\u0065\u0020t\u0068\u0065\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0066\u0069\u006c\u0065");
};return nil ;};type matchedIndex struct{_cbff int ;_aedc int ;_aebba string ;};func _bfb (_bfbb string ,_bbf []localSpanMarks )([]placeHolders ,error ){_aed :="";_bge :=[]placeHolders {};for _bgg ,_bab :=range _bbf {_fba :=_bab ._edg ;_aca :=_bab ._gfc ;
_dec :=_caeb (_fba );_efe ,_ce :=_ecbb (_fba );if _ce !=nil {return nil ,_ce ;};if _dec !=_aed {var _bgeg []int ;if _bgg ==0&&_aca !=_dec {_aeb :=_fg .Index (_bfbb ,_dec );_bgeg =[]int {_aeb };}else if _bgg ==len (_bbf )-1{_deb :=_fg .LastIndex (_bfbb ,_dec );
_bgeg =[]int {_deb };}else {_bgeg =_agd (_bfbb ,_dec );};_faf :=placeHolders {_ae :_bgeg ,_gg :_dec ,_bb :_efe };_bge =append (_bge ,_faf );};_aed =_dec ;};return _bge ,nil ;};func _edb (_ea *_af .ContentStreamOperations ,_bbd string ,_eff int )error {_fb :=_af .ContentStreamOperations {};
var _eb _af .ContentStreamOperation ;for _cde ,_gcc :=range *_ea {if _cde ==_eff {if _bbd =="\u0027"{_eba :=_af .ContentStreamOperation {Operand :"\u0054\u002a"};_fb =append (_fb ,&_eba );_eb .Params =_gcc .Params ;_eb .Operand ="\u0054\u006a";_fb =append (_fb ,&_eb );
}else if _bbd =="\u0022"{_dcf :=_gcc .Params [:2];Tc ,Tw :=_dcf [0],_dcf [1];_da :=_af .ContentStreamOperation {Params :[]_ge .PdfObject {Tc },Operand :"\u0054\u0063"};_fb =append (_fb ,&_da );_da =_af .ContentStreamOperation {Params :[]_ge .PdfObject {Tw },Operand :"\u0054\u0077"};
_fb =append (_fb ,&_da );_eb .Params =[]_ge .PdfObject {_gcc .Params [2]};_eb .Operand ="\u0054\u006a";_fb =append (_fb ,&_eb );};};_fb =append (_fb ,_gcc );};*_ea =_fb ;return nil ;};func _egd (_cca localSpanMarks ,_gf *_a .TextMarkArray ,_gcaf *_cd .PdfFont ,_cdg ,_bdf string )([]_ge .PdfObject ,error ){_fdb :=_caeb (_gf );
Tj ,_fcc :=_ecbb (_gf );if _fcc !=nil {return nil ,_fcc ;};_fgf :=len (_cdg );_bfg :=len (_fdb );_bgb :=-1;_ace :=_ge .MakeFloat (Tj );if _fdb !=_bdf {_daf :=_cca ._dcc ;if _daf ==0{_bgb =_fg .LastIndex (_cdg ,_fdb );}else {_bgb =_fg .Index (_cdg ,_fdb );
};}else {_bgb =_fg .Index (_cdg ,_fdb );};_agcf :=_bgb +_bfg ;_fbee :=[]_ge .PdfObject {};if _bgb ==0&&_agcf ==_fgf {_fbee =append (_fbee ,_ace );}else if _bgb ==0&&_agcf < _fgf {_ddd :=_cgef (_cdg [_agcf :],_gcaf );_ggbb :=_ge .MakeStringFromBytes (_ddd );
_fbee =append (_fbee ,_ace ,_ggbb );}else if _bgb > 0&&_agcf >=_fgf {_beg :=_cgef (_cdg [:_bgb ],_gcaf );_cdb :=_ge .MakeStringFromBytes (_beg );_fbee =append (_fbee ,_cdb ,_ace );}else if _bgb > 0&&_agcf < _fgf {_cgf :=_cgef (_cdg [:_bgb ],_gcaf );_fab :=_cgef (_cdg [_agcf :],_gcaf );
_eaf :=_ge .MakeStringFromBytes (_cgf );_cac :=_ge .MakeString (string (_fab ));_fbee =append (_fbee ,_eaf ,_ace ,_cac );};return _fbee ,nil ;};func _afg (_begd RedactionTerm )(*regexMatcher ,error ){return &regexMatcher {_fgaf :_begd },nil };func _ggf (_ggb *_a .TextMarkArray )(_ge .PdfObject ,int ){var _ggd _ge .PdfObject ;
_gbc :=-1;for _gbb ,_cg :=range _ggb .Elements (){_ggd =_cg .DirectObject ;_gbc =_gbb ;if _ggd !=nil {break ;};};return _ggd ,_gbc ;};type localSpanMarks struct{_edg *_a .TextMarkArray ;_dcc int ;_gfc string ;};func _fabf (_gcd ,_gccb ,_dfb float64 )float64 {_dfb =_dfb /100;
_aee :=(-1000*_gcd )/(_gccb *_dfb );return _aee ;};func _aba (_dgc string ,_bdde []replacement ,_acb *_cd .PdfFont )[]_ge .PdfObject {_aebb :=[]_ge .PdfObject {};_gbcc :=0;_gaa :=_dgc ;for _fff ,_ccb :=range _bdde {_gbe :=_ccb ._gc ;_dgb :=_ccb ._ff ;_cff :=_ccb ._ed ;
_bee :=_ge .MakeFloat (_dgb );_ada :=_dgc [_gbcc :_gbe ];_cbf :=_cgef (_ada ,_acb );_fde :=_ge .MakeStringFromBytes (_cbf );_aebb =append (_aebb ,_fde );_aebb =append (_aebb ,_bee );_bbdd :=_gbe +len (_cff );_gaa =_dgc [_bbdd :];_gbcc =_bbdd ;if _fff ==len (_bdde )-1{_cbf =_cgef (_gaa ,_acb );
_fde =_ge .MakeStringFromBytes (_cbf );_aebb =append (_aebb ,_fde );};};return _aebb ;};type matchedBBox struct{_gegg _cd .PdfRectangle ;_abeb string ;};func _dad (_ccg *_af .ContentStreamOperations ,PdfObj _ge .PdfObject )(*_af .ContentStreamOperation ,int ,bool ){for _ebb ,_edf :=range *_ccg {_cddf :=_edf .Operand ;
if _cddf =="\u0054\u006a"{_ffba :=_ge .TraceToDirectObject (_edf .Params [0]);if _ffba ==PdfObj {return _edf ,_ebb ,true ;};}else if _cddf =="\u0054\u004a"{_bdb ,_bdbb :=_ge .GetArray (_edf .Params [0]);if !_bdbb {return nil ,_ebb ,_bdbb ;};for _ ,_abe :=range _bdb .Elements (){if _abe ==PdfObj {return _edf ,_ebb ,true ;
};};}else if _cddf =="\u0022"{_ccbe :=_ge .TraceToDirectObject (_edf .Params [2]);if _ccbe ==PdfObj {return _edf ,_ebb ,true ;};}else if _cddf =="\u0027"{_bgd :=_ge .TraceToDirectObject (_edf .Params [0]);if _bgd ==PdfObj {return _edf ,_ebb ,true ;};};
};return nil ,-1,false ;};func _adag (_cded *_a .TextMarkArray ,_ced int ,_aebg int )int {_add :=_cded .Elements ();_afa :=_ced -1;_bcg :=_ced +1;_cbeg :=-1;if _afa >=0{_daca :=_add [_afa ];_cbd :=_daca .ObjString ;_efcf :=len (_cbd );_cbac :=_daca .Index ;
if _cbac +1< _efcf {_cbeg =_afa ;return _cbeg ;};};if _bcg < len (_add ){_cddd :=_add [_bcg ];_cgeg :=_cddd .ObjString ;if _cgeg [0]!=_cddd .Text {_cbeg =_bcg ;return _cbeg ;};};return _cbeg ;};

// Redact executes the redact operation on a pdf file and updates the content streams of all pages of the file.
func (_aff *Redactor )Redact ()error {_eged ,_fbd :=_aff ._dbb .GetNumPages ();if _fbd !=nil {return _c .Errorf ("\u0066\u0061\u0069\u006c\u0065\u0064 \u0074\u006f\u0020\u0067\u0065\u0074\u0020\u0074\u0068\u0065\u0020\u006e\u0075m\u0062\u0065\u0072\u0020\u006f\u0066\u0020P\u0061\u0067\u0065\u0073");
};_dag :=_aff ._cffd .FillColor ;_acg :=_aff ._cffd .BorderWidth ;_cab :=_aff ._cffd .FillOpacity ;for _cace :=1;_cace <=_eged ;_cace ++{_geaa ,_bcb :=_aff ._dbb .GetPage (_cace );if _bcb !=nil {return _bcb ;};_cfc ,_bcb :=_a .New (_geaa );if _bcb !=nil {return _bcb ;
};_caff ,_ ,_ ,_bcb :=_cfc .ExtractPageText ();if _bcb !=nil {return _bcb ;};_bbef :=_caff .GetContentStreamOps ();_cbe ,_eee ,_bcb :=_aff .redactPage (_bbef ,_geaa .Resources );if _eee ==nil {_e .Log .Info ("N\u006f\u0020\u006d\u0061\u0074\u0063\u0068\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0066\u006f\u0072\u0020t\u0068\u0065\u0020\u0070\u0072\u006f\u0076\u0069\u0064\u0065d \u0070\u0061\u0074t\u0061r\u006e\u002e");
_eee =_bbef ;};_geaa .SetContentStreams ([]string {_eee .String ()},_ge .NewFlateEncoder ());if _bcb !=nil {return _bcb ;};_eafb ,_bcb :=_geaa .GetMediaBox ();if _bcb !=nil {return _bcb ;};if _geaa .MediaBox ==nil {_geaa .MediaBox =_eafb ;};if _cba :=_aff ._gda .AddPage (_geaa );
_cba !=nil {return _cba ;};_baa :=_eafb .Ury ;for _ ,_fcac :=range _cbe {_bfbf :=_fcac ._gegg ;_fafa :=_aff ._gda .NewRectangle (_bfbf .Llx ,_baa -_bfbf .Lly ,_bfbf .Urx -_bfbf .Llx ,-(_bfbf .Ury -_bfbf .Lly ));_fafa .SetFillColor (_dag );_fafa .SetBorderWidth (_acg );
_fafa .SetFillOpacity (_cab );if _daa :=_aff ._gda .Draw (_fafa );_daa !=nil {return nil ;};};};_aff ._gda .SetOutlineTree (_aff ._dbb .GetOutlineTree ());return nil ;};func _ef (_fa *_af .ContentStreamOperations ,_df map[_ge .PdfObject ][]localSpanMarks )error {for _be ,_cc :=range _df {if _be ==nil {continue ;
};_dd ,_dc ,_ga :=_dad (_fa ,_be );if !_ga {_e .Log .Debug ("Pd\u0066\u004fb\u006a\u0065\u0063\u0074\u0020\u0025\u0073\u006e\u006ft\u0020\u0066\u006f\u0075\u006e\u0064\u0020\u0069\u006e\u0020\u0073\u0069\u0064\u0065\u0020\u0074\u0068\u0065\u0020\u0063\u006f\u006e\u0074\u0065\u006e\u0074\u0073\u0074r\u0065a\u006d\u0020\u006f\u0070\u0065\u0072\u0061\u0074i\u006fn\u0020\u0025s",_be ,_fa );
return nil ;};if _dd .Operand =="\u0054\u006a"{_ag :=_adb (_dd ,_be ,_cc );if _ag !=nil {return _ag ;};}else if _dd .Operand =="\u0054\u004a"{_ggc :=_eac (_dd ,_be ,_cc );if _ggc !=nil {return _ggc ;};}else if _dd .Operand =="\u0027"||_dd .Operand =="\u0022"{_ddg :=_edb (_fa ,_dd .Operand ,_dc );
if _ddg !=nil {return _ddg ;};_ddg =_adb (_dd ,_be ,_cc );if _ddg !=nil {return _ddg ;};};};return nil ;};func _eac (_agf *_af .ContentStreamOperation ,_eab _ge .PdfObject ,_ab []localSpanMarks )error {_eg ,_db :=_ge .GetArray (_agf .Params [0]);_ba :=[]_ge .PdfObject {};
if !_db {_e .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_agf );return _c .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_agf );
};_bd ,_ede :=_dbcg (_ab );if len (_ede )==1{_cdeg :=_ede [0];_aa :=_bd [_cdeg ];if len (_aa )==1{_ccd :=_aa [0];_eag :=_ccd ._edg ;_bbb :=_gag (_eag );_gd ,_dea :=_ffa (_eab ,_bbb );if _dea !=nil {return _dea ;};_gac ,_dea :=_egd (_ccd ,_eag ,_bbb ,_gd ,_cdeg );
if _dea !=nil {return _dea ;};for _ ,_ffb :=range _eg .Elements (){if _ffb ==_eab {_ba =append (_ba ,_gac ...);}else {_ba =append (_ba ,_ffb );};};}else {_fd :=_aa [0]._edg ;_cge :=_gag (_fd );_dcd ,_dbc :=_ffa (_eab ,_cge );if _dbc !=nil {return _dbc ;
};_bae ,_dbc :=_bfb (_dcd ,_aa );if _dbc !=nil {return _dbc ;};_dcb :=_ceb (_bae );_edbc :=_aba (_dcd ,_dcb ,_cge );for _ ,_fdf :=range _eg .Elements (){if _fdf ==_eab {_ba =append (_ba ,_edbc ...);}else {_ba =append (_ba ,_fdf );};};};_agf .Params [0]=_ge .MakeArray (_ba ...);
}else if len (_ede )> 1{_geg :=_ab [0];_bgf :=_geg ._edg ;_ ,_fc :=_ggf (_bgf );_bf :=_bgf .Elements ()[_fc ];_aea :=_bf .Font ;_agc ,_cgg :=_ffa (_eab ,_aea );if _cgg !=nil {return _cgg ;};_fae ,_cgg :=_bfb (_agc ,_ab );if _cgg !=nil {return _cgg ;};_cdd :=_ceb (_fae );
_fcb :=_aba (_agc ,_cdd ,_aea );for _ ,_ee :=range _eg .Elements (){if _ee ==_eab {_ba =append (_ba ,_fcb ...);}else {_ba =append (_ba ,_ee );};};_agf .Params [0]=_ge .MakeArray (_ba ...);};return nil ;};

// New instantiates a Redactor object with given PdfReader and `regex` pattern.
func New (reader *_cd .PdfReader ,opts *RedactionOptions ,rectProps *RectangleProps )*Redactor {if rectProps ==nil {rectProps =RedactRectanglePropsNew ();};return &Redactor {_dbb :reader ,_aaa :opts ,_gda :_gb .New (),_cffd :rectProps };};func _edcg (_fdbd []int ,_bde *_a .TextMarkArray ,_gbed string )(*_a .TextMarkArray ,matchedBBox ,error ){_fcbgg :=matchedBBox {};
_dca :=_fdbd [0];_edfb :=_fdbd [1];_gaae :=len (_gbed )-len (_fg .TrimLeft (_gbed ,"\u0020"));_bfd :=len (_gbed )-len (_fg .TrimRight (_gbed ,"\u0020\u000a"));_dca =_dca +_gaae ;_edfb =_edfb -_bfd ;_gbed =_fg .Trim (_gbed ,"\u0020\u000a");_ecff ,_fga :=_bde .RangeOffset (_dca ,_edfb );
if _fga !=nil {return nil ,_fcbgg ,_fga ;};_ccad ,_ccadb :=_ecff .BBox ();if !_ccadb {return nil ,_fcbgg ,_c .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_ecff );
};_fcbgg =matchedBBox {_abeb :_gbed ,_gegg :_ccad };return _ecff ,_fcbgg ,nil ;};func _faff (_gcdb []*matchedIndex )map[string ][][]int {_eadc :=make (map[string ][][]int );for _ ,_bffb :=range _gcdb {_cdf :=_bffb ._aebba ;_bgfdc :=[]int {_bffb ._cbff ,_bffb ._aedc };
if _gfg ,_cbage :=_eadc [_cdf ];_cbage {_eadc [_cdf ]=append (_gfg ,_bgfdc );}else {_eadc [_cdf ]=[][]int {_bgfdc };};};return _eadc ;};func _agd (_gedc ,_fgff string )[]int {if len (_fgff )==0{return nil ;};var _acdg []int ;for _acde :=0;_acde < len (_gedc );
{_ebdd :=_fg .Index (_gedc [_acde :],_fgff );if _ebdd < 0{return _acdg ;};_acdg =append (_acdg ,_acde +_ebdd );_acde +=_ebdd +len (_fgff );};return _acdg ;};type regexMatcher struct{_fgaf RedactionTerm };func _dbcg (_cgc []localSpanMarks )(map[string ][]localSpanMarks ,[]string ){_age :=make (map[string ][]localSpanMarks );
_abd :=[]string {};for _ ,_adc :=range _cgc {_gga :=_adc ._gfc ;if _dff ,_fce :=_age [_gga ];_fce {_age [_gga ]=append (_dff ,_adc );}else {_age [_gga ]=[]localSpanMarks {_adc };_abd =append (_abd ,_gga );};};return _age ,_abd ;};func _cgef (_bbdf string ,_aaf *_cd .PdfFont )[]byte {_fe ,_ec :=_aaf .StringToCharcodeBytes (_bbdf );
if _ec !=0{_e .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0073\u006fm\u0065\u0020\u0072un\u0065\u0073\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u0065\u006e\u0063\u006f\u0064\u0065d\u002e\u000a\u0009\u0025\u0073\u0020\u002d\u003e \u0025\u0076",_bbdf ,_fe );
};return _fe ;};func (_gdab *Redactor )redactPage (_dcff *_af .ContentStreamOperations ,_cfa *_cd .PdfPageResources )([]matchedBBox ,*_af .ContentStreamOperations ,error ){_gbg ,_ebaf :=_a .NewFromContents (_dcff .String (),_cfa );if _ebaf !=nil {return nil ,nil ,_ebaf ;
};_afb ,_ ,_ ,_ebaf :=_gbg .ExtractPageText ();_dcff =_afb .GetContentStreamOps ();if _ebaf !=nil {return nil ,nil ,_ebaf ;};_cee :=_afb .Marks ();_dbdc :=_afb .Text ();_adca :=[]matchedBBox {};_ffg :=make (map[_ge .PdfObject ][]localSpanMarks );for _ ,_abef :=range _gdab ._aaa .Terms {_defgg ,_ggce :=_afg (_abef );
if _ggce !=nil {return nil ,nil ,_ggce ;};_cdde ,_ggce :=_defgg .match (_dbdc );if _ggce !=nil {return nil ,nil ,_ggce ;};_eae :=_faff (_cdde );for _gcaff ,_dac :=range _eae {_efa :=[]matchedBBox {};for _ ,_defc :=range _dac {_decg ,_bfc ,_feg :=_edcg (_defc ,_cee ,_gcaff );
if _feg !=nil {return nil ,nil ,_feg ;};_ebad :=_cbab (_decg );for _gfb ,_aeda :=range _ebad {_cga :=localSpanMarks {_edg :_aeda ,_dcc :_gfb ,_gfc :_gcaff };_cgb ,_ :=_ggf (_aeda );if _bcbf ,_agfa :=_ffg [_cgb ];_agfa {_ffg [_cgb ]=append (_bcbf ,_cga );
}else {_ffg [_cgb ]=[]localSpanMarks {_cga };};};_efa =append (_efa ,_bfc );};_adca =append (_adca ,_efa ...);};};_ebaf =_ef (_dcff ,_ffg );if _ebaf !=nil {return nil ,nil ,_ebaf ;};return _adca ,_dcff ,nil ;};

// RectangleProps defines properties of the redaction rectangle to be drawn.
type RectangleProps struct{FillColor _gb .Color ;BorderWidth float64 ;FillOpacity float64 ;};func _caeb (_bbba *_a .TextMarkArray )string {_fca :="";for _ ,_gegb :=range _bbba .Elements (){_fca +=_gegb .Text ;};return _fca ;};

// Redactor represtents a Redactor object.
type Redactor struct{_dbb *_cd .PdfReader ;_aaa *RedactionOptions ;_gda *_gb .Creator ;_cffd *RectangleProps ;};func _gag (_feb *_a .TextMarkArray )*_cd .PdfFont {_ ,_gca :=_ggf (_feb );_aae :=_feb .Elements ()[_gca ];_abc :=_aae .Font ;return _abc ;};
func _ceb (_edd []placeHolders )[]replacement {_defg :=[]replacement {};for _ ,_bgc :=range _edd {_caa :=_bgc ._ae ;_fac :=_bgc ._gg ;_ffbd :=_bgc ._bb ;for _ ,_edec :=range _caa {_dgf :=replacement {_ed :_fac ,_ff :_ffbd ,_gc :_edec };_defg =append (_defg ,_dgf );
};};_d .Slice (_defg ,func (_ecb ,_eec int )bool {return _defg [_ecb ]._gc < _defg [_eec ]._gc });return _defg ;};

// RedactionOptions is a collection of RedactionTerm objects.
type RedactionOptions struct{Terms []RedactionTerm ;};func _adb (_gea *_af .ContentStreamOperation ,_ac _ge .PdfObject ,_edc []localSpanMarks )error {var _eef *_ge .PdfObjectArray ;_ddf ,_bdd :=_dbcg (_edc );if len (_bdd )==1{_acf :=_bdd [0];_cb :=_ddf [_acf ];
if len (_cb )==1{_dcdf :=_cb [0];_cce :=_dcdf ._edg ;_dbd :=_gag (_cce );_eca ,_cae :=_ffa (_ac ,_dbd );if _cae !=nil {return _cae ;};_ffbb ,_cae :=_egd (_dcdf ,_cce ,_dbd ,_eca ,_acf );if _cae !=nil {return _cae ;};_eef =_ge .MakeArray (_ffbb ...);}else {_dab :=_cb [0]._edg ;
_dce :=_gag (_dab );_bff ,_ecd :=_ffa (_ac ,_dce );if _ecd !=nil {return _ecd ;};_bc ,_ecd :=_bfb (_bff ,_cb );if _ecd !=nil {return _ecd ;};_efd :=_ceb (_bc );_acd :=_aba (_bff ,_efd ,_dce );_eef =_ge .MakeArray (_acd ...);};}else if len (_bdd )> 1{_dabf :=_edc [0];
_ecg :=_dabf ._edg ;_ ,_bbe :=_ggf (_ecg );_gde :=_ecg .Elements ()[_bbe ];_geb :=_gde .Font ;_ege ,_ead :=_ffa (_ac ,_geb );if _ead !=nil {return _ead ;};_dae ,_ead :=_bfb (_ege ,_edc );if _ead !=nil {return _ead ;};_ebd :=_ceb (_dae );_bddc :=_aba (_ege ,_ebd ,_geb );
_eef =_ge .MakeArray (_bddc ...);};_gea .Params [0]=_eef ;_gea .Operand ="\u0054\u004a";return nil ;};func _ffa (_fge _ge .PdfObject ,_eda *_cd .PdfFont )(string ,error ){_cfb ,_fdff :=_ge .GetStringBytes (_fge );if !_fdff {return "",_ge .ErrTypeError ;
};_aebf :=_eda .BytesToCharcodes (_cfb );_ged ,_efc ,_eeg :=_eda .CharcodesToStrings (_aebf );if _eeg > 0{_e .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_efc ,_eeg );
};_caea :=_fg .Join (_ged ,"");return _caea ,nil ;};type placeHolders struct{_ae []int ;_gg string ;_bb float64 ;};func _def (_ebf *_cd .PdfFont ,_fbg _a .TextMark )float64 {_fcbg :=0.001;_fdd :=_fbg .Th /100;if _ebf .Subtype ()=="\u0054\u0079\u0070e\u0033"{_fcbg =1;
};_bfe ,_cf :=_ebf .GetRuneMetrics (' ');if !_cf {_bfe ,_cf =_ebf .GetCharMetrics (32);};if !_cf {_bfe ,_ =_cd .DefaultFont ().GetRuneMetrics (' ');};_dg :=_fcbg *((_bfe .Wx *_fbg .FontSize +_fbg .Tc +_fbg .Tw )/_fdd );return _dg ;};func _ecbb (_dbca *_a .TextMarkArray )(float64 ,error ){_bgfd ,_gfe :=_dbca .BBox ();
if !_gfe {return 0.0,_c .Errorf ("\u0073\u0070\u0061\u006e\u004d\u0061\u0072\u006bs\u002e\u0042\u0042ox\u0020\u0068\u0061\u0073\u0020\u006eo\u0020\u0062\u006f\u0075\u006e\u0064\u0069\u006e\u0067\u0020\u0062\u006f\u0078\u002e\u0020s\u0070\u0061\u006e\u004d\u0061\u0072\u006b\u0073=\u0025\u0073",_dbca );
};_cfff :=_fbe (_dbca );_ecf :=0.0;_ ,_fgb :=_ggf (_dbca );_deg :=_dbca .Elements ()[_fgb ];_ded :=_deg .Font ;if _cfff > 0{_ecf =_def (_ded ,_deg );};_fffb :=(_bgfd .Urx -_bgfd .Llx );_fffb =_fffb +_ecf *float64 (_cfff );Tj :=_fabf (_fffb ,_deg .FontSize ,_deg .Th );
return Tj ,nil ;};func (_dfac *regexMatcher )match (_cbg string )([]*matchedIndex ,error ){_cddb :=_dfac ._fgaf .Pattern ;if _cddb ==nil {return nil ,_g .New ("\u006e\u006f\u0020\u0070at\u0074\u0065\u0072\u006e\u0020\u0063\u006f\u006d\u0070\u0069\u006c\u0065\u0064");
};var (_fdfc =_cddb .FindAllStringIndex (_cbg ,-1);_cgfg []*matchedIndex ;);for _ ,_ddcd :=range _fdfc {_cgfg =append (_cgfg ,&matchedIndex {_cbff :_ddcd [0],_aedc :_ddcd [1],_aebba :_cbg [_ddcd [0]:_ddcd [1]]});};return _cgfg ,nil ;};type replacement struct{_ed string ;
_ff float64 ;_gc int ;};

// RedactionTerm holds the regexp pattern and the replacement string for the redaction process.
type RedactionTerm struct{Pattern *_f .Regexp ;};

// RedactRectanglePropsNew return a new pointer to a default RectangleProps object.
func RedactRectanglePropsNew ()*RectangleProps {return &RectangleProps {FillColor :_gb .ColorBlack ,BorderWidth :0.0,FillOpacity :1.0};};func _cbab (_acef *_a .TextMarkArray )[]*_a .TextMarkArray {_bcfa :=_acef .Elements ();_dbbb :=len (_bcfa );var _eaca _ge .PdfObject ;
_cacb :=[]*_a .TextMarkArray {};_faa :=&_a .TextMarkArray {};_dbce :=-1;for _ddc ,_gab :=range _bcfa {_cda :=_gab .DirectObject ;_dbce =_gab .Index ;if _cda ==nil {_egc :=_adag (_acef ,_ddc ,_dbce );if _eaca !=nil {if _egc ==-1||_egc > _ddc {_cacb =append (_cacb ,_faa );
_faa =&_a .TextMarkArray {};};};}else if _cda !=nil &&_eaca ==nil {if _dbce ==0&&_ddc > 0{_cacb =append (_cacb ,_faa );_faa =&_a .TextMarkArray {};};}else if _cda !=nil &&_eaca !=nil {if _cda !=_eaca {_cacb =append (_cacb ,_faa );_faa =&_a .TextMarkArray {};
};};_eaca =_cda ;_faa .Append (_gab );if _ddc ==(_dbbb -1){_cacb =append (_cacb ,_faa );};};return _cacb ;};func _fbe (_ccc *_a .TextMarkArray )int {_de :=0;_dfa :=_ccc .Elements ();if _dfa [0].Text =="\u0020"{_de ++;};if _dfa [_ccc .Len ()-1].Text =="\u0020"{_de ++;
};return _de ;};