//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package transform ;import (_d "fmt";_b "github.com/unidoc/unipdf/v3/common";_g "math";);func RotationMatrix (angle float64 )Matrix {_a :=_g .Cos (angle );_bf :=_g .Sin (angle );return NewMatrix (_a ,_bf ,-_bf ,_a ,0,0);};func IdentityMatrix ()Matrix {return NewMatrix (1,0,0,1,0,0)};func (_ba Matrix )Translate (tx ,ty float64 )Matrix {return _ba .Mult (TranslationMatrix (tx ,ty ))};func (_be Point )Rotate (theta float64 )Point {_bge :=_g .Hypot (_be .X ,_be .Y );_dbe :=_g .Atan2 (_be .Y ,_be .X );_fg ,_ed :=_g .Sincos (_dbe +theta /180.0*_g .Pi );return Point {_bge *_ed ,_bge *_fg };};func NewMatrix (a ,b ,c ,d ,tx ,ty float64 )Matrix {_aa :=Matrix {a ,b ,0,c ,d ,0,tx ,ty ,1};_aa .clampRange ();return _aa ;};func (_aea Point )Displace (delta Point )Point {return Point {_aea .X +delta .X ,_aea .Y +delta .Y }};func (_cf Point )Interpolate (b Point ,t float64 )Point {return Point {X :(1-t )*_cf .X +t *b .X ,Y :(1-t )*_cf .Y +t *b .Y };};func (_gd *Matrix )clampRange (){for _gc ,_bag :=range _gd {if _bag > _dgd {_b .Log .Debug ("\u0043L\u0041M\u0050\u003a\u0020\u0025\u0067\u0020\u002d\u003e\u0020\u0025\u0067",_bag ,_dgd );_gd [_gc ]=_dgd ;}else if _bag < -_dgd {_b .Log .Debug ("\u0043L\u0041M\u0050\u003a\u0020\u0025\u0067\u0020\u002d\u003e\u0020\u0025\u0067",_bag ,-_dgd );_gd [_gc ]=-_dgd ;};};};func (_ac Matrix )ScalingFactorX ()float64 {return _g .Hypot (_ac [0],_ac [1])};func (_dgc Matrix )Transform (x ,y float64 )(float64 ,float64 ){_af :=x *_dgc [0]+y *_dgc [3]+_dgc [6];_eg :=x *_dgc [1]+y *_dgc [4]+_dgc [7];return _af ,_eg ;};func (_ggc *Point )transformByMatrix (_bbe Matrix ){_ggc .X ,_ggc .Y =_bbe .Transform (_ggc .X ,_ggc .Y )};func NewPoint (x ,y float64 )Point {return Point {X :x ,Y :y }};func (_cg *Matrix )Concat (b Matrix ){*_cg =Matrix {b [0]*_cg [0]+b [1]*_cg [3],b [0]*_cg [1]+b [1]*_cg [4],0,b [3]*_cg [0]+b [4]*_cg [3],b [3]*_cg [1]+b [4]*_cg [4],0,b [6]*_cg [0]+b [7]*_cg [3]+_cg [6],b [6]*_cg [1]+b [7]*_cg [4]+_cg [7],1};_cg .clampRange ();};func (_bd *Point )Set (x ,y float64 ){_bd .X ,_bd .Y =x ,y };func ShearMatrix (x ,y float64 )Matrix {return NewMatrix (1,y ,x ,1,0,0)};func (_afc Matrix )Angle ()float64 {_gfe :=_g .Atan2 (-_afc [1],_afc [0]);if _gfe < 0.0{_gfe +=2*_g .Pi ;};return _gfe /_g .Pi *180.0;};func (_ff Matrix )Translation ()(float64 ,float64 ){return _ff [6],_ff [7]};func (_aga Matrix )Singular ()bool {return _g .Abs (_aga [0]*_aga [4]-_aga [1]*_aga [3])< _da };func (_db Matrix )Unrealistic ()bool {_dab ,_ae ,_ea ,_fba :=_g .Abs (_db [0]),_g .Abs (_db [1]),_g .Abs (_db [3]),_g .Abs (_db [4]);_ec :=_dab > _ge &&_fba > _ge ;_ebb :=_ae > _ge &&_ea > _ge ;return !(_ec ||_ebb );};func (_ee *Matrix )Set (a ,b ,c ,d ,tx ,ty float64 ){_ee [0],_ee [1]=a ,b ;_ee [3],_ee [4]=c ,d ;_ee [6],_ee [7]=tx ,ty ;_ee .clampRange ();};const _ge =1e-6;func NewMatrixFromTransforms (xScale ,yScale ,theta ,tx ,ty float64 )Matrix {return IdentityMatrix ().Scale (xScale ,yScale ).Rotate (theta ).Translate (tx ,ty );};func (_bab Point )Distance (b Point )float64 {return _g .Hypot (_bab .X -b .X ,_bab .Y -b .Y )};type Point struct{X float64 ;Y float64 ;};func (_bfb *Matrix )Shear (x ,y float64 ){_bfb .Concat (ShearMatrix (x ,y ))};func (_gb Matrix )Inverse ()(Matrix ,bool ){_fb ,_dd :=_gb [0],_gb [1];_aad ,_acd :=_gb [3],_gb [4];_fa ,_efe :=_gb [6],_gb [7];_cgc :=_fb *_acd -_dd *_aad ;if _g .Abs (_cgc )< _dgf {return Matrix {},false ;};_afa ,_bb :=_acd /_cgc ,-_dd /_cgc ;_afe ,_gg :=-_aad /_cgc ,_fb /_cgc ;_ad :=-(_afa *_fa +_afe *_efe );_ddd :=-(_bb *_fa +_gg *_efe );return NewMatrix (_afa ,_bb ,_afe ,_gg ,_ad ,_ddd ),true ;};const _dgf =1.0e-6;func (_ga Point )String ()string {return _d .Sprintf ("(\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0029",_ga .X ,_ga .Y );};func (_age *Point )Transform (a ,b ,c ,d ,tx ,ty float64 ){_afd :=NewMatrix (a ,b ,c ,d ,tx ,ty );_age .transformByMatrix (_afd );};func ScaleMatrix (x ,y float64 )Matrix {return NewMatrix (x ,0,0,y ,0,0)};func (_ab Matrix )Scale (xScale ,yScale float64 )Matrix {return _ab .Mult (ScaleMatrix (xScale ,yScale ))};const _dgd =1e9;func (_dg Matrix )Round (precision float64 )Matrix {for _bg :=range _dg {_dg [_bg ]=_g .Round (_dg [_bg ]/precision )*precision ;};return _dg ;};func (_ef Matrix )Mult (b Matrix )Matrix {_ef .Concat (b );return _ef };type Matrix [9]float64 ;const _da =1e-10;func (_ffa *Matrix )Clone ()Matrix {return NewMatrix (_ffa [0],_ffa [1],_ffa [3],_ffa [4],_ffa [6],_ffa [7]);};func (_f Matrix )String ()string {_c ,_bcb ,_gf ,_fe ,_eb ,_cb :=_f [0],_f [1],_f [3],_f [4],_f [6],_f [7];return _d .Sprintf ("\u005b\u00257\u002e\u0034\u0066\u002c%\u0037\u002e4\u0066\u002c\u0025\u0037\u002e\u0034\u0066\u002c%\u0037\u002e\u0034\u0066\u003a\u0025\u0037\u002e\u0034\u0066\u002c\u00257\u002e\u0034\u0066\u005d",_c ,_bcb ,_gf ,_fe ,_eb ,_cb );};func TranslationMatrix (tx ,ty float64 )Matrix {return NewMatrix (1,0,0,1,tx ,ty )};func (_ag Matrix )Rotate (theta float64 )Matrix {return _ag .Mult (RotationMatrix (theta ))};func (_bc Matrix )Identity ()bool {return _bc [0]==1&&_bc [1]==0&&_bc [2]==0&&_bc [3]==0&&_bc [4]==1&&_bc [5]==0&&_bc [6]==0&&_bc [7]==0&&_bc [8]==1;};func (_cc Matrix )ScalingFactorY ()float64 {return _g .Hypot (_cc [3],_cc [4])};