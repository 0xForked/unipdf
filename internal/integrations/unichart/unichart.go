//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package unichart ;import (_c "bytes";_e "fmt";_g "github.com/unidoc/unichart/render";_dc "github.com/unidoc/unipdf/v3/common";_f "github.com/unidoc/unipdf/v3/contentstream";_gd "github.com/unidoc/unipdf/v3/contentstream/draw";_cf "github.com/unidoc/unipdf/v3/core";
_ec "github.com/unidoc/unipdf/v3/model";_ad "image/color";_d "io";_ef "math";);func (_dfba *Renderer )wrapText (_bbfc string )[]string {var (_bgf []string ;_cee []rune ;);for _ ,_ead :=range _bbfc {if _ead =='\n'{_bgf =append (_bgf ,string (_cee ));_cee =[]rune {};
continue ;};_cee =append (_cee ,_ead );};if len (_cee )> 0{_bgf =append (_bgf ,string (_cee ));};return _bgf ;};func (_dee *Renderer )ArcTo (cx ,cy int ,rx ,ry ,startAngle ,deltaAngle float64 ){startAngle =_fcdce (2.0*_ef .Pi -startAngle );deltaAngle =_fcdce (-deltaAngle );
_bb ,_ee :=deltaAngle ,1;if _ef .Abs (deltaAngle )> 90.0{_ee =int (_ef .Ceil (_ef .Abs (deltaAngle )/90.0));_bb =deltaAngle /float64 (_ee );};var (_ege =_bee (_bb /2);_fda =_ef .Abs (4.0/3.0*(1.0-_ef .Cos (_ege ))/_ef .Sin (_ege ));_fc =float64 (cx );_gebf =float64 (cy );
);for _bc :=0;_bc < _ee ;_bc ++{_ff :=_bee (startAngle +float64 (_bc )*_bb );_fe :=_bee (startAngle +float64 (_bc +1)*_bb );_gb :=_ef .Cos (_ff );_eb :=_ef .Cos (_fe );_fed :=_ef .Sin (_ff );_acf :=_ef .Sin (_fe );var _dca []float64 ;if _bb > 0{_dca =[]float64 {_fc +rx *_gb ,_gebf -ry *_fed ,_fc +rx *(_gb -_fda *_fed ),_gebf -ry *(_fed +_fda *_gb ),_fc +rx *(_eb +_fda *_acf ),_gebf -ry *(_acf -_fda *_eb ),_fc +rx *_eb ,_gebf -ry *_acf };
}else {_dca =[]float64 {_fc +rx *_gb ,_gebf -ry *_fed ,_fc +rx *(_gb +_fda *_fed ),_gebf -ry *(_fed -_fda *_gb ),_fc +rx *(_eb -_fda *_acf ),_gebf -ry *(_acf +_fda *_eb ),_fc +rx *_eb ,_gebf -ry *_acf };};if _bc ==0{_dee ._b .Add_l (_dca [0],_dca [1]);
};_dee ._b .Add_c (_dca [2],_dca [3],_dca [4],_dca [5],_dca [6],_dca [7]);};};func _fge (_gcf string ,_fcdc int ,_ceag func (_cf .PdfObjectName )bool )_cf .PdfObjectName {_cbe :=_cf .PdfObjectName (_e .Sprintf ("\u0025\u0073\u0025\u0064",_gcf ,_fcdc ));
for _afdd :=_fcdc ;_ceag (_cbe );{_afdd ++;_cbe =_cf .PdfObjectName (_e .Sprintf ("\u0025\u0073\u0025\u0064",_gcf ,_afdd ));};return _cbe ;};func (_ba *Renderer )SetDPI (dpi float64 ){_ba ._fb =dpi };func (_cc *Renderer )LineTo (x ,y int ){_cc ._b .Add_l (float64 (x ),float64 (y ))};
type Renderer struct{_db int ;_ga int ;_fb float64 ;_b *_f .ContentCreator ;_cd *_ec .PdfPageResources ;_ce _ad .Color ;_ab _ad .Color ;_fd float64 ;_gae *_ec .PdfFont ;_ea float64 ;_af _ad .Color ;_aa float64 ;_fbe map[*_ec .PdfFont ]_cf .PdfObjectName ;
};func (_fg *Renderer )Circle (radius float64 ,x ,y int ){_bbf :=radius ;if _cea :=_fg ._fd ;_cea !=0{_bbf -=_cea /2;};_fbd :=_bbf *0.551784;_dge :=_gd .CubicBezierPath {Curves :[]_gd .CubicBezierCurve {_gd .NewCubicBezierCurve (-_bbf ,0,-_bbf ,_fbd ,-_fbd ,_bbf ,0,_bbf ),_gd .NewCubicBezierCurve (0,_bbf ,_fbd ,_bbf ,_bbf ,_fbd ,_bbf ,0),_gd .NewCubicBezierCurve (_bbf ,0,_bbf ,-_fbd ,_fbd ,-_bbf ,0,-_bbf ),_gd .NewCubicBezierCurve (0,-_bbf ,-_fbd ,-_bbf ,-_bbf ,-_fbd ,-_bbf ,0)}};
if _fdg :=_fg ._fd ;_fdg !=0{_dge =_dge .Offset (_fdg /2,_fdg /2);};_dge =_dge .Offset (float64 (x ),float64 (y ));_gd .DrawBezierPathWithCreator (_dge ,_fg ._b );};func (_fgb *Renderer )Text (text string ,x ,y int ){_fgb ._b .Add_q ();_fgb .SetFont (_fgb ._gae );
_abd ,_ed ,_gg ,_ :=_gaa (_fgb ._af );_fgb ._b .Add_rg (_abd ,_ed ,_gg );_fgb ._b .Translate (float64 (x ),float64 (y )).Scale (1,-1);if _aaf :=_fgb ._aa ;_aaf !=0{_fgb ._b .RotateDeg (_aaf );};_fgb ._b .Add_BT ().Add_TL (_fgb ._ea );var (_fa =_fgb ._gae .Encoder ();
_fcd =_fgb .wrapText (text );_ebe =len (_fcd ););for _ggde ,_aaga :=range _fcd {_fgb ._b .Add_TJ (_cf .MakeStringFromBytes (_fa .Encode (_aaga )));if _ggde !=_ebe -1{_fgb ._b .Add_Tstar ();};};_fgb ._b .Add_ET ();_fgb ._b .Add_Q ();};func (_cb *Renderer )ClearTextRotation (){_cb ._aa =0};
func (_gf *Renderer )Close (){_gf ._b .Add_h ()};func (_dfe *Renderer )getTextWidth (_da string )float64 {var _fef float64 ;for _ ,_cca :=range _da {_efa ,_gca :=_dfe ._gae .GetRuneMetrics (_cca );if !_gca {_dc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0075\u006e\u0073\u0075\u0070\u0070\u006fr\u0074e\u0064 \u0072u\u006e\u0065\u0020\u0025\u0076\u0020\u0069\u006e\u0020\u0066\u006f\u006e\u0074",_cca );
};_fef +=_efa .Wx ;};return _dfe ._ea *_fef /1000.0;};func (_gcd *Renderer )SetStrokeWidth (width float64 ){_gcd ._fd =width ;_gcd ._b .Add_w (width )};func (_gcdc *Renderer )SetTextRotation (radians float64 ){_gcdc ._aa =_fcdce (-radians )};func NewRenderer (cc *_f .ContentCreator ,res *_ec .PdfPageResources )func (int ,int )(_g .Renderer ,error ){return func (_ge ,_cfg int )(_g .Renderer ,error ){_bd :=&Renderer {_db :_ge ,_ga :_cfg ,_fb :72,_b :cc ,_cd :res ,_fbe :map[*_ec .PdfFont ]_cf .PdfObjectName {}};
_bd .ResetStyle ();return _bd ,nil ;};};func (_ac *Renderer )SetFillColor (color _ad .Color ){_ac ._ce =color ;_dd ,_bda ,_geb ,_ :=_gaa (color );_ac ._b .Add_rg (_dd ,_bda ,_geb );};func _bee (_gcb float64 )float64 {return _gcb *_ef .Pi /180.0};func (_eec *Renderer )SetFontColor (color _ad .Color ){_eec ._af =color };
func _gaa (_ccc _ad .Color )(float64 ,float64 ,float64 ,float64 ){_cff ,_bbd ,_bbfa ,_eed :=_bgc (_ccc );return float64 (_cff )/255,float64 (_bbd )/255,float64 (_bbfa )/255,float64 (_eed )/255;};func (_ada *Renderer )SetClassName (name string ){};func (_df *Renderer )ResetStyle (){_df .SetFillColor (_ad .Black );
_df .SetStrokeColor (_ad .Transparent );_df .SetStrokeWidth (0);_df .SetFont (_ec .DefaultFont ());_df .SetFontColor (_ad .Black );_df .SetFontSize (12);_df .SetTextRotation (0);};func (_fdf *Renderer )Save (w _d .Writer )error {if w ==nil {return nil ;
};_ ,_fbef :=_d .Copy (w ,_c .NewBuffer (_fdf ._b .Bytes ()));return _fbef ;};func (_beg *Renderer )MoveTo (x ,y int ){_beg ._b .Add_m (float64 (x ),float64 (y ))};func (_dfb *Renderer )SetStrokeDashArray (dashArray []float64 ){_egd :=make ([]int64 ,len (dashArray ));
for _aag ,_dda :=range dashArray {_egd [_aag ]=int64 (_dda );};_dfb ._b .Add_d (_egd ,0);};func (_acfe *Renderer )SetFont (font _g .Font ){_eee ,_gfc :=font .(*_ec .PdfFont );if !_gfc {_dc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061\u006c\u0069d\u0020\u0066\u006f\u006e\u0074\u0020\u0074\u0079\u0070\u0065");
return ;};_afe ,_gfc :=_acfe ._fbe [_eee ];if !_gfc {_afe =_fge ("\u0046\u006f\u006e\u0074",1,_acfe ._cd .HasFontByName );if _bea :=_acfe ._cd .SetFontByName (_afe ,_eee .ToPdfObject ());_bea !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052:\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0061\u0064d\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0076\u0020\u0074\u006f\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u0073",_eee );
};_acfe ._fbe [_eee ]=_afe ;};_acfe ._b .Add_Tf (_afe ,_acfe ._ea );_acfe ._gae =_eee ;};func (_dg *Renderer )FillStroke (){_dg ._b .Add_B ()};func (_ddb *Renderer )Stroke (){_ddb ._b .Add_S ()};func (_de *Renderer )QuadCurveTo (cx ,cy ,x ,y int ){_de ._b .Add_v (float64 (x ),float64 (y ),float64 (cx ),float64 (cy ));
};func (_ade *Renderer )SetStrokeColor (color _ad .Color ){_ade ._ab =color ;_add ,_cec ,_gc ,_ :=_gaa (color );_ade ._b .Add_RG (_add ,_cec ,_gc );};func _bgc (_edf _ad .Color )(uint8 ,uint8 ,uint8 ,uint8 ){_gbe ,_bgb ,_adaa ,_fdfg :=_edf .RGBA ();return uint8 (_gbe >>8),uint8 (_bgb >>8),uint8 (_adaa >>8),uint8 (_fdfg >>8);
};func _fcdce (_ae float64 )float64 {return _ae *180/_ef .Pi };func (_cdc *Renderer )MeasureText (text string )_g .Box {_bf :=_cdc ._ea ;_eae ,_ggg :=_cdc ._gae .GetFontDescriptor ();if _ggg !=nil {_dc .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0055n\u0061\u0062\u006c\u0065\u0020\u0074o\u0020\u0067\u0065\u0074\u0020\u0066\u006fn\u0074\u0020\u0064\u0065\u0073\u0063\u0072\u0069\u0070\u0074o\u0072");
}else {_gebd ,_dec :=_eae .GetCapHeight ();if _dec !=nil {_dc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0055\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0067\u0065\u0074\u0020f\u006f\u006e\u0074\u0020\u0063\u0061\u0070\u0020\u0068\u0065\u0069\u0067\u0068t\u003a\u0020\u0025\u0076",_dec );
}else {_bf =_gebd /1000.0*_cdc ._ea ;};};var (_gce =0.0;_bca =_cdc .wrapText (text ););for _ ,_ggc :=range _bca {if _fcc :=_cdc .getTextWidth (_ggc );_fcc > _gce {_gce =_fcc ;};};_dde :=_g .NewBox (0,0,int (_gce ),int (_bf ));if _bg :=_cdc ._aa ;_bg !=0{_dde =_dde .Corners ().Rotate (_bg ).Box ();
};return _dde ;};func (_beb *Renderer )Fill (){_beb ._b .Add_f ()};func (_eg *Renderer )GetDPI ()float64 {return _eg ._fb };func (_egg *Renderer )SetFontSize (size float64 ){_egg ._ea =size };