//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package svg ;import (_be "encoding/xml";_bg "fmt";_g "github.com/unidoc/unipdf/v3/common";_ea "github.com/unidoc/unipdf/v3/contentstream";_c "github.com/unidoc/unipdf/v3/contentstream/draw";_ge "github.com/unidoc/unipdf/v3/internal/graphic2d";_ac "golang.org/x/net/html/charset";
_db "io";_ag "math";_e "os";_a "strconv";_b "strings";_bf "unicode";);func _cbf (_dbea _be .StartElement )*GraphicSVG {_cag :=&GraphicSVG {};_dfce :=make (map[string ]string );for _ ,_bgf :=range _dbea .Attr {_dfce [_bgf .Name .Local ]=_bgf .Value ;};_cag .Name =_dbea .Name .Local ;
_cag .Attributes =_dfce ;_cag ._bbe =1;if _cag .Name =="\u0073\u0076\u0067"{_bce ,_fda :=_edeb (_dfce ["\u0076i\u0065\u0077\u0042\u006f\u0078"]);if _fda !=nil {_g .Log .Debug ("\u0055\u006ea\u0062\u006c\u0065\u0020t\u006f\u0020p\u0061\u0072\u0073\u0065\u0020\u0076\u0069\u0065w\u0042\u006f\u0078\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074e\u003a\u0020\u0025\u0076",_fda );
return nil ;};_cag .ViewBox .X =_bce [0];_cag .ViewBox .Y =_bce [1];_cag .ViewBox .W =_bce [2];_cag .ViewBox .H =_bce [3];_cag .Width =_cag .ViewBox .W ;_cag .Height =_cag .ViewBox .H ;if _ceg ,_ccdc :=_dfce ["\u0077\u0069\u0064t\u0068"];_ccdc {_gge ,_aee :=_fag (_ceg ,64);
if _aee !=nil {_g .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0077\u0069\u0064\u0074\u0068\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_aee );return nil ;};_cag .Width =_gge ;
};if _gfc ,_gbg :=_dfce ["\u0068\u0065\u0069\u0067\u0068\u0074"];_gbg {_acae ,_adec :=_fag (_gfc ,64);if _adec !=nil {_g .Log .Debug ("\u0055\u006eab\u006c\u0065\u0020t\u006f\u0020\u0070\u0061rse\u0020he\u0069\u0067\u0068\u0074\u0020\u0061\u0074tr\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_adec );
return nil ;};_cag .Height =_acae ;};if _cag .Width > 0&&_cag .Height > 0{_cag ._bbe =_cag .Width /_cag .ViewBox .W ;};};return _cag ;};func _edeb (_eab string )([]float64 ,error ){_bbfd :=-1;var _ecgf []float64 ;_bada :=' ';for _cbg ,_agec :=range _eab {if !_bf .IsNumber (_agec )&&_agec !='.'&&!(_agec =='-'&&_bada =='e')&&_agec !='e'{if _bbfd !=-1{_acca ,_ebge :=_beed (_eab [_bbfd :_cbg ]);
if _ebge !=nil {return _ecgf ,_ebge ;};_ecgf =append (_ecgf ,_acca ...);};if _agec =='-'{_bbfd =_cbg ;}else {_bbfd =-1;};}else if _bbfd ==-1{_bbfd =_cbg ;};_bada =_agec ;};if _bbfd !=-1&&_bbfd !=len (_eab ){_adgg ,_afa :=_beed (_eab [_bbfd :]);if _afa !=nil {return _ecgf ,_afa ;
};_ecgf =append (_ecgf ,_adgg ...);};return _ecgf ,nil ;};type pathParserError struct{_accg string };type commands struct{_bbee []string ;_cab map[string ]int ;_gagc string ;_cddf string ;};func _cba (_adb []token )([]*Command ,error ){var (_cef []*Command ;
_dce []float64 ;);for _cec :=len (_adb )-1;_cec >=0;_cec --{_ebb :=_adb [_cec ];if _ebb ._bbed {_cade :=_eee ._cab [_b .ToLower (_ebb ._dda )];_cabg :=len (_dce );if _cade ==0&&_cabg ==0{_faf :=&Command {Symbol :_ebb ._dda };_cef =append ([]*Command {_faf },_cef ...);
}else if _cade !=0&&_cabg %_cade ==0{_dcfc :=_cabg /_cade ;for _dfa :=0;_dfa < _dcfc ;_dfa ++{_bagd :=_ebb ._dda ;if _bagd =="\u006d"&&_dfa < _dcfc -1{_bagd ="\u006c";};if _bagd =="\u004d"&&_dfa < _dcfc -1{_bagd ="\u004c";};_fcaa :=&Command {_bagd ,_gaf (_dce [:_cade ])};
_cef =append ([]*Command {_fcaa },_cef ...);_dce =_dce [_cade :];};}else {_bbcb :=pathParserError {"I\u006e\u0063\u006f\u0072\u0072\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072\u0020\u006f\u0066\u0020\u0070\u0061r\u0061\u006d\u0065\u0074\u0065\u0072\u0073\u0020\u0066\u006fr\u0020"+_ebb ._dda };
return nil ,_bbcb ;};}else {_def ,_gfac :=_fag (_ebb ._dda ,64);if _gfac !=nil {return nil ,_gfac ;};_dce =append (_dce ,_def );};};return _cef ,nil ;};func (_dbg *GraphicSVG )ToContentCreator (cc *_ea .ContentCreator )*_ea .ContentCreator {if _dbg .Name =="\u0073\u0076\u0067"{cc .Add_cm (1,0,0,1,0,0);
_dbg .setDefaultScaling (_dbg ._bbe );for _ ,_badc :=range _dbg .Children {_badc .ViewBox =_dbg .ViewBox ;_badc .toContentStream (cc );};return cc ;};return nil ;};func (_agff *Path )compare (_bfgd *Path )bool {if len (_agff .Subpaths )!=len (_bfgd .Subpaths ){return false ;
};for _eda ,_aaaf :=range _agff .Subpaths {if !_aaaf .compare (_bfgd .Subpaths [_eda ]){return false ;};};return true ;};func (_agea *GraphicSVG )Decode (decoder *_be .Decoder )error {for {_dcf ,_aaec :=decoder .Token ();if _dcf ==nil &&_aaec ==_db .EOF {break ;
};if _aaec !=nil {return _aaec ;};switch _dga :=_dcf .(type ){case _be .StartElement :_cff :=_cbf (_dga );_cafa :=_cff .Decode (decoder );if _cafa !=nil {return _cafa ;};_agea .Children =append (_agea .Children ,_cff );case _be .CharData :_bag :=_b .TrimSpace (string (_dga ));
if _bag !=""{_agea .Content =string (_dga );};case _be .EndElement :if _dga .Name .Local ==_agea .Name {return nil ;};};};return nil ;};type Subpath struct{Commands []*Command ;};func _bgba (_cfc *_be .Decoder )(*GraphicSVG ,error ){for {_abg ,_gag :=_cfc .Token ();
if _abg ==nil &&_gag ==_db .EOF {break ;};if _gag !=nil {return nil ,_gag ;};switch _ddf :=_abg .(type ){case _be .StartElement :return _cbf (_ddf ),nil ;};};return &GraphicSVG {},nil ;};func _fff (_bea *GraphicSVG ,_gcf *_ea .ContentCreator ){_gcf .Add_q ();
_bea .Style .toContentStream (_gcf );_cac ,_fgg :=_fag (_bea .Attributes ["\u0078"],64);if _fgg !=nil {_g .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0078\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_fgg .Error ());
};_bcf ,_fgg :=_fag (_bea .Attributes ["\u0079"],64);if _fgg !=nil {_g .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0079\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_fgg .Error ());
};_fbg ,_fgg :=_fag (_bea .Attributes ["\u0077\u0069\u0064t\u0068"],64);if _fgg !=nil {_g .Log .Debug ("\u0045\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0077\u0069\u0064\u0074\u0068\u0020v\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_fgg .Error ());
};_cgc ,_fgg :=_fag (_bea .Attributes ["\u0068\u0065\u0069\u0067\u0068\u0074"],64);if _fgg !=nil {_g .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077h\u0069\u006c\u0065 \u0070\u0061\u0072\u0073i\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0068\u0065\u0069\u0067\u0068\u0074\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_fgg .Error ());
};_gcf .Add_re (_cac *_bea ._bbe ,_bcf *_bea ._bbe ,_fbg *_bea ._bbe ,_cgc *_bea ._bbe );if _bea .Style .FillColor !=""&&_bea .Style .StrokeColor !=""{_gcf .Add_B ();}else if _bea .Style .FillColor !=""{_gcf .Add_f ();}else if _bea .Style .StrokeColor !=""{_gcf .Add_S ();
};_gcf .Add_Q ();};func _af (_gcd *GraphicSVG ,_agg *_ea .ContentCreator ){_agg .Add_q ();_gcd .Style .toContentStream (_agg );_dbd ,_aff :=_cgfc (_gcd .Attributes ["\u0064"]);if _aff !=nil {_g .Log .Error ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025s",_aff .Error ());
};var (_gcda ,_aa =0.0,0.0;_bfb ,_ca =0.0,0.0;_f *Command ;);for _ ,_ad :=range _dbd .Subpaths {for _ ,_aac :=range _ad .Commands {switch _b .ToLower (_aac .Symbol ){case "\u006d":_bfb ,_ca =_aac .Params [0]*_gcd ._bbe ,_aac .Params [1]*_gcd ._bbe ;if !_aac .isAbsolute (){_bfb ,_ca =_gcda +_bfb -_gcd .ViewBox .X ,_aa +_ca -_gcd .ViewBox .Y ;
};_agg .Add_m (_cgg (_bfb ,3),_cgg (_ca ,3));_gcda ,_aa =_bfb ,_ca ;case "\u0063":_fba ,_df ,_aae ,_dg ,_da ,_ec :=_aac .Params [0]*_gcd ._bbe ,_aac .Params [1]*_gcd ._bbe ,_aac .Params [2]*_gcd ._bbe ,_aac .Params [3]*_gcd ._bbe ,_aac .Params [4]*_gcd ._bbe ,_aac .Params [5]*_gcd ._bbe ;
if !_aac .isAbsolute (){_fba ,_df ,_aae ,_dg ,_da ,_ec =_gcda +_fba ,_aa +_df ,_gcda +_aae ,_aa +_dg ,_gcda +_da ,_aa +_ec ;};_agg .Add_c (_cgg (_fba ,3),_cgg (_df ,3),_cgg (_aae ,3),_cgg (_dg ,3),_cgg (_da ,3),_cgg (_ec ,3));_gcda ,_aa =_da ,_ec ;case "\u0073":_gb ,_cg ,_bb ,_eg :=_aac .Params [0]*_gcd ._bbe ,_aac .Params [1]*_gcd ._bbe ,_aac .Params [2]*_gcd ._bbe ,_aac .Params [3]*_gcd ._bbe ;
if !_aac .isAbsolute (){_gb ,_cg ,_bb ,_eg =_gcda +_gb ,_aa +_cg ,_gcda +_bb ,_aa +_eg ;};_agg .Add_c (_cgg (_gcda ,3),_cgg (_aa ,3),_cgg (_gb ,3),_cgg (_cg ,3),_cgg (_bb ,3),_cgg (_eg ,3));_gcda ,_aa =_bb ,_eg ;case "\u006c":_caf ,_cde :=_aac .Params [0]*_gcd ._bbe ,_aac .Params [1]*_gcd ._bbe ;
if !_aac .isAbsolute (){_caf ,_cde =_gcda +_caf ,_aa +_cde ;};_agg .Add_l (_cgg (_caf ,3),_cgg (_cde ,3));_gcda ,_aa =_caf ,_cde ;case "\u0068":_ef :=_aac .Params [0]*_gcd ._bbe ;if !_aac .isAbsolute (){_ef =_gcda +_ef ;};_agg .Add_l (_cgg (_ef ,3),_cgg (_aa ,3));
_gcda =_ef ;case "\u0076":_bge :=_aac .Params [0]*_gcd ._bbe ;if !_aac .isAbsolute (){_bge =_aa +_bge ;};_agg .Add_l (_cgg (_gcda ,3),_cgg (_bge ,3));_aa =_bge ;case "\u0071":_bbc ,_fc ,_ga ,_ee :=_aac .Params [0]*_gcd ._bbe ,_aac .Params [1]*_gcd ._bbe ,_aac .Params [2]*_gcd ._bbe ,_aac .Params [3]*_gcd ._bbe ;
if !_aac .isAbsolute (){_bbc ,_fc ,_ga ,_ee =_gcda +_bbc ,_aa +_fc ,_gcda +_ga ,_aa +_ee ;};_acc ,_eb :=_ge .QuadraticToCubicBezier (_gcda ,_aa ,_bbc ,_fc ,_ga ,_ee );_agg .Add_c (_cgg (_acc .X ,3),_cgg (_acc .Y ,3),_cgg (_eb .X ,3),_cgg (_eb .Y ,3),_cgg (_ga ,3),_cgg (_ee ,3));
_gcda ,_aa =_ga ,_ee ;case "\u0074":var _bcb ,_gbc _ge .Point ;_bfa ,_dba :=_aac .Params [0]*_gcd ._bbe ,_aac .Params [1]*_gcd ._bbe ;if !_aac .isAbsolute (){_bfa ,_dba =_gcda +_bfa ,_aa +_dba ;};if _f !=nil &&_b .ToLower (_f .Symbol )=="\u0071"{_fa :=_ge .Point {X :_f .Params [0]*_gcd ._bbe ,Y :_f .Params [1]*_gcd ._bbe };
_bggd :=_ge .Point {X :_f .Params [2]*_gcd ._bbe ,Y :_f .Params [3]*_gcd ._bbe };_fe :=_bggd .Mul (2.0).Sub (_fa );_bcb ,_gbc =_ge .QuadraticToCubicBezier (_gcda ,_aa ,_fe .X ,_fe .Y ,_bfa ,_dba );};_agg .Add_c (_cgg (_bcb .X ,3),_cgg (_bcb .Y ,3),_cgg (_gbc .X ,3),_cgg (_gbc .Y ,3),_cgg (_bfa ,3),_cgg (_dba ,3));
_gcda ,_aa =_bfa ,_dba ;case "\u0061":_dad ,_ce :=_aac .Params [0]*_gcd ._bbe ,_aac .Params [1]*_gcd ._bbe ;_dgg :=_aac .Params [2];_cf :=_aac .Params [3]> 0;_agc :=_aac .Params [4]> 0;_ade ,_fd :=_aac .Params [5]*_gcd ._bbe ,_aac .Params [6]*_gcd ._bbe ;
if !_aac .isAbsolute (){_ade ,_fd =_gcda +_ade ,_aa +_fd ;};_ff :=_ge .EllipseToCubicBeziers (_gcda ,_aa ,_dad ,_ce ,_dgg ,_cf ,_agc ,_ade ,_fd );for _ ,_bba :=range _ff {_agg .Add_c (_cgg (_bba [1].X ,3),_cgg ((_bba [1].Y ),3),_cgg ((_bba [2].X ),3),_cgg ((_bba [2].Y ),3),_cgg ((_bba [3].X ),3),_cgg ((_bba [3].Y ),3));
};_gcda ,_aa =_ade ,_fd ;case "\u007a":_agg .Add_h ();};_f =_aac ;};};if _gcd .Style .FillColor !=""&&_gcd .Style .StrokeColor !=""{_agg .Add_B ();}else if _gcd .Style .FillColor !=""{_agg .Add_f ();}else if _gcd .Style .StrokeColor !=""{_agg .Add_S ();
};_agg .Add_h ();_agg .Add_Q ();};func _gaf (_dcg []float64 )[]float64 {for _cegd ,_ecd :=0,len (_dcg )-1;_cegd < _ecd ;_cegd ,_ecd =_cegd +1,_ecd -1{_dcg [_cegd ],_dcg [_ecd ]=_dcg [_ecd ],_dcg [_cegd ];};return _dcg ;};func (_dbc *Command )compare (_efc *Command )bool {if _dbc .Symbol !=_efc .Symbol {return false ;
};for _aegc ,_cgeg :=range _dbc .Params {if _cgeg !=_efc .Params [_aegc ]{return false ;};};return true ;};func _cgd (_cca []token ,_bbfa string )([]token ,string ){if _bbfa !=""{_cca =append (_cca ,token {_bbfa ,false });_bbfa ="";};return _cca ,_bbfa ;
};type Command struct{Symbol string ;Params []float64 ;};func _aaac (_dgd []*Command )*Path {_bbeg :=&Path {};var _bda []*Command ;for _ecf ,_dfb :=range _dgd {switch _b .ToLower (_dfb .Symbol ){case _eee ._gagc :if len (_bda )> 0{_bbeg .Subpaths =append (_bbeg .Subpaths ,&Subpath {_bda });
};_bda =[]*Command {_dfb };case _eee ._cddf :_bda =append (_bda ,_dfb );_bbeg .Subpaths =append (_bbeg .Subpaths ,&Subpath {_bda });_bda =[]*Command {};default:_bda =append (_bda ,_dfb );if len (_dgd )==_ecf +1{_bbeg .Subpaths =append (_bbeg .Subpaths ,&Subpath {_bda });
};};};return _bbeg ;};func _gdd (_efga string )(_ggbg ,_dcgf string ){if _efga ==""||(_efga [len (_efga )-1]>='0'&&_efga [len (_efga )-1]<='9'){return _efga ,"";};_ggbg =_efga ;for _ ,_cea :=range _bgg {if _b .Contains (_ggbg ,_cea ){_dcgf =_cea ;};_ggbg =_b .TrimSuffix (_ggbg ,_cea );
};return ;};func (_ggb *GraphicSVG )toContentStream (_ege *_ea .ContentCreator ){_ccd ,_efe :=_efgc (_ggb .Attributes ,_ggb ._bbe );if _efe !=nil {_g .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0073\u0074\u0079\u006c\u0065\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_efe );
};_ggb .Style =_ccd ;switch _ggb .Name {case "\u0070\u0061\u0074\u0068":_af (_ggb ,_ege );for _ ,_edg :=range _ggb .Children {_edg .toContentStream (_ege );};case "\u0072\u0065\u0063\u0074":_fff (_ggb ,_ege );for _ ,_ccc :=range _ggb .Children {_ccc .toContentStream (_ege );
};case "\u0063\u0069\u0072\u0063\u006c\u0065":_fgf (_ggb ,_ege );for _ ,_fde :=range _ggb .Children {_fde .toContentStream (_ege );};case "\u0065l\u006c\u0069\u0070\u0073\u0065":_fdc (_ggb ,_ege );for _ ,_bd :=range _ggb .Children {_bd .toContentStream (_ege );
};case "\u0070\u006f\u006c\u0079\u006c\u0069\u006e\u0065":_cdc (_ggb ,_ege );for _ ,_eeg :=range _ggb .Children {_eeg .toContentStream (_ege );};case "\u0070o\u006c\u0079\u0067\u006f\u006e":_cfe (_ggb ,_ege );for _ ,_gbe :=range _ggb .Children {_gbe .toContentStream (_ege );
};case "\u006c\u0069\u006e\u0065":_bfg (_ggb ,_ege );for _ ,_aeg :=range _ggb .Children {_aeg .toContentStream (_ege );};case "\u0067":_eag ,_gda :=_ggb .Attributes ["\u0066\u0069\u006c\u006c"];_cb ,_dae :=_ggb .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];
_edge ,_ecg :=_ggb .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];for _ ,_fed :=range _ggb .Children {if _ ,_gdc :=_fed .Attributes ["\u0066\u0069\u006c\u006c"];!_gdc &&_gda {_fed .Attributes ["\u0066\u0069\u006c\u006c"]=_eag ;
};if _ ,_ggf :=_fed .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];!_ggf &&_dae {_fed .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"]=_cb ;};if _ ,_adg :=_fed .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
!_adg &&_ecg {_fed .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"]=_edge ;};_fed .toContentStream (_ege );};};};func (_efb *commands )isCommand (_fgga string )bool {for _ ,_fdaf :=range _efb ._bbee {if _b .ToLower (_fgga )==_fdaf {return true ;
};};return false ;};func ParseFromFile (path string )(*GraphicSVG ,error ){_aaa ,_gdcd :=_e .Open (path );if _gdcd !=nil {return nil ,_gdcd ;};defer _aaa .Close ();return ParseFromStream (_aaa );};var (_bgg =[]string {"\u0063\u006d","\u006d\u006d","\u0070\u0078","\u0070\u0074"};
_age =map[string ]float64 {"\u0063\u006d":_gc ,"\u006d\u006d":_ab ,"\u0070\u0078":_bc ,"\u0070\u0074":1};);func _efgc (_cdda map[string ]string ,_ada float64 )(*GraphicSVGStyle ,error ){_cce :=_fedf ();_cbd ,_aeb :=_cdda ["\u0066\u0069\u006c\u006c"];if _aeb {_cce .FillColor =_cbd ;
if _cbd =="\u006e\u006f\u006e\u0065"{_cce .FillColor ="";};};_gef ,_fbcg :=_cdda ["\u0073\u0074\u0072\u006f\u006b\u0065"];if _fbcg {_cce .StrokeColor =_gef ;if _gef =="\u006e\u006f\u006e\u0065"{_cce .StrokeColor ="";};};_ace ,_cge :=_cdda ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
if _cge {_fffa ,_cbfg :=_fag (_ace ,64);if _cbfg !=nil {return nil ,_cbfg ;};_cce .StrokeWidth =_fffa *_ada ;};return _cce ,nil ;};type token struct{_dda string ;_bbed bool ;};type GraphicSVG struct{ViewBox struct{X ,Y ,W ,H float64 ;};Name string ;Attributes map[string ]string ;
Children []*GraphicSVG ;Content string ;Style *GraphicSVGStyle ;Width float64 ;Height float64 ;_bbe float64 ;};func ParseFromString (svgStr string )(*GraphicSVG ,error ){return ParseFromStream (_b .NewReader (svgStr ));};func ParseFromStream (source _db .Reader )(*GraphicSVG ,error ){_fdg :=_be .NewDecoder (source );
_fdg .CharsetReader =_ac .NewReaderLabel ;_eega ,_adedf :=_bgba (_fdg );if _adedf !=nil {return nil ,_adedf ;};if _fea :=_eega .Decode (_fdg );_fea !=nil &&_fea !=_db .EOF {return nil ,_fea ;};return _eega ,nil ;};func _acea (_cgf string )[]token {var (_agge []token ;
_fege string ;);for _ ,_fcd :=range _cgf {_fcae :=string (_fcd );switch {case _eee .isCommand (_fcae ):_agge ,_fege =_cgd (_agge ,_fege );_agge =append (_agge ,token {_fcae ,true });case _fcae =="\u002e":if _fege ==""{_fege ="\u0030";};if _b .Contains (_fege ,_fcae ){_agge =append (_agge ,token {_fege ,false });
_fege ="\u0030";};fallthrough;case _fcae >="\u0030"&&_fcae <="\u0039"||_fcae =="\u0065":_fege +=_fcae ;case _fcae =="\u002d":if _b .HasSuffix (_fege ,"\u0065"){_fege +=_fcae ;}else {_agge ,_ =_cgd (_agge ,_fege );_fege =_fcae ;};default:_agge ,_fege =_cgd (_agge ,_fege );
};};_agge ,_ =_cgd (_agge ,_fege );return _agge ;};func _fdc (_cdd *GraphicSVG ,_cc *_ea .ContentCreator ){_cc .Add_q ();_cdd .Style .toContentStream (_cc );_ced ,_bbae :=_fag (_cdd .Attributes ["\u0063\u0078"],64);if _bbae !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bbae .Error ());
};_ddc ,_bbae :=_fag (_cdd .Attributes ["\u0063\u0079"],64);if _bbae !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bbae .Error ());
};_ddcd ,_bbae :=_fag (_cdd .Attributes ["\u0072\u0078"],64);if _bbae !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bbae .Error ());
};_ba ,_bbae :=_fag (_cdd .Attributes ["\u0072\u0079"],64);if _bbae !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bbae .Error ());
};_bcfg :=_ddcd *_cdd ._bbe ;_bee :=_ba *_cdd ._bbe ;_agd :=_ced *_cdd ._bbe ;_gd :=_ddc *_cdd ._bbe ;_dcd :=_bcfg *_cd ;_add :=_bee *_cd ;_abc :=_c .NewCubicBezierPath ();_abc =_abc .AppendCurve (_c .NewCubicBezierCurve (-_bcfg ,0,-_bcfg ,_add ,-_dcd ,_bee ,0,_bee ));
_abc =_abc .AppendCurve (_c .NewCubicBezierCurve (0,_bee ,_dcd ,_bee ,_bcfg ,_add ,_bcfg ,0));_abc =_abc .AppendCurve (_c .NewCubicBezierCurve (_bcfg ,0,_bcfg ,-_add ,_dcd ,-_bee ,0,-_bee ));_abc =_abc .AppendCurve (_c .NewCubicBezierCurve (0,-_bee ,-_dcd ,-_bee ,-_bcfg ,-_add ,-_bcfg ,0));
_abc =_abc .Offset (_agd ,_gd );if _cdd .Style .StrokeWidth > 0{_abc =_abc .Offset (_cdd .Style .StrokeWidth /2,_cdd .Style .StrokeWidth /2);};_c .DrawBezierPathWithCreator (_abc ,_cc );if _cdd .Style .FillColor !=""&&_cdd .Style .StrokeColor !=""{_cc .Add_B ();
}else if _cdd .Style .FillColor !=""{_cc .Add_f ();}else if _cdd .Style .StrokeColor !=""{_cc .Add_S ();};_cc .Add_h ();_cc .Add_Q ();};type GraphicSVGStyle struct{FillColor string ;StrokeColor string ;StrokeWidth float64 ;};func (_eca *Command )isAbsolute ()bool {return _eca .Symbol ==_b .ToUpper (_eca .Symbol )};
func (_gdff *GraphicSVGStyle )toContentStream (_aded *_ea .ContentCreator ){if _gdff ==nil {return ;};if _gdff .FillColor !=""{var _acf ,_aed ,_ageag float64 ;if _egc ,_fca :=_ge .ColorMap [_gdff .FillColor ];_fca {_cbc ,_ddg ,_edbf ,_ :=_egc .RGBA ();
_acf ,_aed ,_ageag =float64 (_cbc ),float64 (_ddg ),float64 (_edbf );}else {_acf ,_aed ,_ageag =_dgb (_gdff .FillColor );};_aded .Add_rg (_acf ,_aed ,_ageag );};if _gdff .StrokeColor !=""{var _bbb ,_fedg ,_ede float64 ;if _fcc ,_cbcd :=_ge .ColorMap [_gdff .StrokeColor ];
_cbcd {_ebg ,_daef ,_bed ,_ :=_fcc .RGBA ();_bbb ,_fedg ,_ede =float64 (_ebg )/255.0,float64 (_daef )/255.0,float64 (_bed )/255.0;}else {_bbb ,_fedg ,_ede =_dgb (_gdff .StrokeColor );};_aded .Add_RG (_bbb ,_fedg ,_ede );};if _gdff .StrokeWidth > 0{_aded .Add_w (_gdff .StrokeWidth );
};};func _dgb (_ead string )(_efca ,_ddgg ,_fccg float64 ){if (len (_ead )!=4&&len (_ead )!=7)||_ead [0]!='#'{_g .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_ead );return _efca ,_ddgg ,_fccg ;
};var _abcc ,_cbda ,_acee int ;if len (_ead )==4{var _cfd ,_feac ,_dag int ;_fbe ,_cfde :=_bg .Sscanf (_ead ,"\u0023\u0025\u0031\u0078\u0025\u0031\u0078\u0025\u0031\u0078",&_cfd ,&_feac ,&_dag );if _cfde !=nil {_g .Log .Debug ("\u0049\u006e\u0076a\u006c\u0069\u0064\u0020h\u0065\u0078\u0020\u0063\u006f\u0064\u0065:\u0020\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_ead ,_cfde );
return _efca ,_ddgg ,_fccg ;};if _fbe !=3{_g .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_ead );return _efca ,_ddgg ,_fccg ;};_abcc =_cfd *16+_cfd ;_cbda =_feac *16+_feac ;_acee =_dag *16+_dag ;
}else {_gega ,_cae :=_bg .Sscanf (_ead ,"\u0023\u0025\u0032\u0078\u0025\u0032\u0078\u0025\u0032\u0078",&_abcc ,&_cbda ,&_acee );if _cae !=nil {_g .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_ead );
return _efca ,_ddgg ,_fccg ;};if _gega !=3{_g .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069d\u0020\u0068\u0065\u0078\u0020\u0063\u006f\u0064\u0065\u003a\u0020\u0025\u0073,\u0020\u006e\u0020\u0021\u003d\u0020\u0033 \u0028\u0025\u0064\u0029",_ead ,_gega );
return _efca ,_ddgg ,_fccg ;};};_edf :=float64 (_abcc )/255.0;_gaeg :=float64 (_cbda )/255.0;_efec :=float64 (_acee )/255.0;return _edf ,_gaeg ,_efec ;};func _fgf (_gg *GraphicSVG ,_dfd *_ea .ContentCreator ){_dfd .Add_q ();_gg .Style .toContentStream (_dfd );
_ae ,_dd :=_fag (_gg .Attributes ["\u0063\u0078"],64);if _dd !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_dd .Error ());
};_de ,_dd :=_fag (_gg .Attributes ["\u0063\u0079"],64);if _dd !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_dd .Error ());
};_gcb ,_dd :=_fag (_gg .Attributes ["\u0072"],64);if _dd !=nil {_g .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0072\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_dd .Error ());
};_bcbg :=_gcb *_gg ._bbe ;_ffe :=_gcb *_gg ._bbe ;_gca :=_bcbg *_cd ;_dc :=_ffe *_cd ;_bec :=_c .NewCubicBezierPath ();_bec =_bec .AppendCurve (_c .NewCubicBezierCurve (-_bcbg ,0,-_bcbg ,_dc ,-_gca ,_ffe ,0,_ffe ));_bec =_bec .AppendCurve (_c .NewCubicBezierCurve (0,_ffe ,_gca ,_ffe ,_bcbg ,_dc ,_bcbg ,0));
_bec =_bec .AppendCurve (_c .NewCubicBezierCurve (_bcbg ,0,_bcbg ,-_dc ,_gca ,-_ffe ,0,-_ffe ));_bec =_bec .AppendCurve (_c .NewCubicBezierCurve (0,-_ffe ,-_gca ,-_ffe ,-_bcbg ,-_dc ,-_bcbg ,0));_bec =_bec .Offset (_ae *_gg ._bbe ,_de *_gg ._bbe );if _gg .Style .StrokeWidth > 0{_bec =_bec .Offset (_gg .Style .StrokeWidth /2,_gg .Style .StrokeWidth /2);
};_c .DrawBezierPathWithCreator (_bec ,_dfd );if _gg .Style .FillColor !=""&&_gg .Style .StrokeColor !=""{_dfd .Add_B ();}else if _gg .Style .FillColor !=""{_dfd .Add_f ();}else if _gg .Style .StrokeColor !=""{_dfd .Add_S ();};_dfd .Add_h ();_dfd .Add_Q ();
};func _bfg (_ffd *GraphicSVG ,_feg *_ea .ContentCreator ){_feg .Add_q ();_ffd .Style .toContentStream (_feg );_dbae ,_ddb :=_fag (_ffd .Attributes ["\u0078\u0031"],64);if _ddb !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ddb .Error ());
};_efg ,_ddb :=_fag (_ffd .Attributes ["\u0079\u0031"],64);if _ddb !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ddb .Error ());
};_dea ,_ddb :=_fag (_ffd .Attributes ["\u0078\u0032"],64);if _ddb !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ddb .Error ());
};_cad ,_ddb :=_fag (_ffd .Attributes ["\u0079\u0032"],64);if _ddb !=nil {_g .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ddb .Error ());
};_feg .Add_m (_dbae *_ffd ._bbe ,_efg *_ffd ._bbe );_feg .Add_l (_dea *_ffd ._bbe ,_cad *_ffd ._bbe );if _ffd .Style .FillColor !=""&&_ffd .Style .StrokeColor !=""{_feg .Add_B ();}else if _ffd .Style .FillColor !=""{_feg .Add_f ();}else if _ffd .Style .StrokeColor !=""{_feg .Add_S ();
};_feg .Add_h ();_feg .Add_Q ();};type Path struct{Subpaths []*Subpath ;};func (_dbe *GraphicSVG )SetScaling (xFactor ,yFactor float64 ){_agf :=_dbe .Width /_dbe .ViewBox .W ;_gcag :=_dbe .Height /_dbe .ViewBox .H ;_dbe .setDefaultScaling (_ag .Max (_agf ,_gcag ));
for _ ,_ggd :=range _dbe .Children {_ggd .SetScaling (xFactor ,yFactor );};};func (_gbd pathParserError )Error ()string {return _gbd ._accg };func _eded ()commands {var _gea =map[string ]int {"\u006d":2,"\u007a":0,"\u006c":2,"\u0068":1,"\u0076":1,"\u0063":6,"\u0073":4,"\u0071":4,"\u0074":2,"\u0061":7};
var _aaab []string ;for _bagg :=range _gea {_aaab =append (_aaab ,_bagg );};return commands {_aaab ,_gea ,"\u006d","\u007a"};};func _beed (_aage string )(_fdca []float64 ,_fdcad error ){var _fade float64 ;_ged :=0;_edae :=true ;for _edec ,_ega :=range _aage {if _ega =='.'{if _edae {_edae =false ;
continue ;};_fade ,_fdcad =_fag (_aage [_ged :_edec ],64);if _fdcad !=nil {return ;};_fdca =append (_fdca ,_fade );_ged =_edec ;};};_fade ,_fdcad =_fag (_aage [_ged :],64);if _fdcad !=nil {return ;};_fdca =append (_fdca ,_fade );return ;};func _cgg (_cgcf float64 ,_ccef int )float64 {_cfeb :=_ag .Pow (10,float64 (_ccef ));
return float64 (_gae (_cgcf *_cfeb ))/_cfeb ;};func _cfe (_bcg *GraphicSVG ,_edb *_ea .ContentCreator ){_edb .Add_q ();_bcg .Style .toContentStream (_edb );_bad ,_bggf :=_edeb (_bcg .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);if _bggf !=nil {_g .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_bggf );
return ;};if len (_bad )%2> 0{_g .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _beg :=0;_beg < len (_bad );{if _beg ==0{_edb .Add_m (_bad [_beg ]*_bcg ._bbe ,_bad [_beg +1]*_bcg ._bbe );}else {_edb .Add_l (_bad [_beg ]*_bcg ._bbe ,_bad [_beg +1]*_bcg ._bbe );};_beg +=2;};_edb .Add_l (_bad [0]*_bcg ._bbe ,_bad [1]*_bcg ._bbe );
if _bcg .Style .FillColor !=""&&_bcg .Style .StrokeColor !=""{_edb .Add_B ();}else if _bcg .Style .FillColor !=""{_edb .Add_f ();}else if _bcg .Style .StrokeColor !=""{_edb .Add_S ();};_edb .Add_h ();_edb .Add_Q ();};func _cgfc (_gfe string )(*Path ,error ){_eee =_eded ();
_cagd ,_dgf :=_cba (_acea (_gfe ));if _dgf !=nil {return nil ,_dgf ;};return _aaac (_cagd ),nil ;};func (_aaf *Subpath )compare (_fded *Subpath )bool {if len (_aaf .Commands )!=len (_fded .Commands ){return false ;};for _aafg ,_eagg :=range _aaf .Commands {if !_eagg .compare (_fded .Commands [_aafg ]){return false ;
};};return true ;};func _fedf ()*GraphicSVGStyle {return &GraphicSVGStyle {FillColor :"\u00230\u0030\u0030\u0030\u0030\u0030",StrokeColor :"",StrokeWidth :0};};var _eee commands ;const (_bc =0.72;_gc =28.3464;_ab =_gc /10;_cd =0.551784;);func _cdc (_cdcf *GraphicSVG ,_ed *_ea .ContentCreator ){_ed .Add_q ();
_cdcf .Style .toContentStream (_ed );_aea ,_eec :=_edeb (_cdcf .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);if _eec !=nil {_g .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_eec );
return ;};if len (_aea )%2> 0{_g .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _fbf :=0;_fbf < len (_aea );{if _fbf ==0{_ed .Add_m (_aea [_fbf ]*_cdcf ._bbe ,_aea [_fbf +1]*_cdcf ._bbe );}else {_ed .Add_l (_aea [_fbf ]*_cdcf ._bbe ,_aea [_fbf +1]*_cdcf ._bbe );};_fbf +=2;};if _cdcf .Style .FillColor !=""&&_cdcf .Style .StrokeColor !=""{_ed .Add_B ();
}else if _cdcf .Style .FillColor !=""{_ed .Add_f ();}else if _cdcf .Style .StrokeColor !=""{_ed .Add_S ();};_ed .Add_h ();_ed .Add_Q ();};func (_bgb *GraphicSVG )setDefaultScaling (_cga float64 ){_bgb ._bbe =_cga ;if _bgb .Style !=nil &&_bgb .Style .StrokeWidth > 0{_bgb .Style .StrokeWidth =_bgb .Style .StrokeWidth *_bgb ._bbe ;
};for _ ,_ggdg :=range _bgb .Children {_ggdg .setDefaultScaling (_cga );};};func _fag (_becf string ,_aagg int )(float64 ,error ){_ggbd ,_cgab :=_gdd (_becf );_cccc ,_cgad :=_a .ParseFloat (_ggbd ,_aagg );if _cgad !=nil {return 0,_cgad ;};if _cfb ,_gfeb :=_age [_cgab ];
_gfeb {_cccc =_cccc *_cfb ;}else {_cccc =_cccc *_bc ;};return _cccc ,nil ;};func _gae (_dfg float64 )int {return int (_dfg +_ag .Copysign (0.5,_dfg ))};