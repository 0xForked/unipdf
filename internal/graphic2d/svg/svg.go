//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package svg ;import (_eea "encoding/xml";_eg "fmt";_d "github.com/unidoc/unipdf/v3/common";_fb "github.com/unidoc/unipdf/v3/contentstream";_ef "github.com/unidoc/unipdf/v3/contentstream/draw";_bc "github.com/unidoc/unipdf/v3/internal/graphic2d";_ec "golang.org/x/net/html/charset";
_ee "io";_c "math";_fd "os";_b "strconv";_a "strings";_f "unicode";);func _eec (_ge *GraphicSVG ,_dca *_fb .ContentCreator ){_dca .Add_q ();_ge .Style .toContentStream (_dca );_db ,_eab :=_bgba (_ge .Attributes ["\u0063\u0078"],64);if _eab !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_eab .Error ());
};_bbe ,_eab :=_bgba (_ge .Attributes ["\u0063\u0079"],64);if _eab !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_eab .Error ());
};_fa ,_eab :=_bgba (_ge .Attributes ["\u0072"],64);if _eab !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0072\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_eab .Error ());
};_dff :=_fa *_ge ._ad ;_afe :=_fa *_ge ._ad ;_dab :=_dff *_eee ;_dba :=_afe *_eee ;_cdg :=_ef .NewCubicBezierPath ();_cdg =_cdg .AppendCurve (_ef .NewCubicBezierCurve (-_dff ,0,-_dff ,_dba ,-_dab ,_afe ,0,_afe ));_cdg =_cdg .AppendCurve (_ef .NewCubicBezierCurve (0,_afe ,_dab ,_afe ,_dff ,_dba ,_dff ,0));
_cdg =_cdg .AppendCurve (_ef .NewCubicBezierCurve (_dff ,0,_dff ,-_dba ,_dab ,-_afe ,0,-_afe ));_cdg =_cdg .AppendCurve (_ef .NewCubicBezierCurve (0,-_afe ,-_dab ,-_afe ,-_dff ,-_dba ,-_dff ,0));_cdg =_cdg .Offset (_db *_ge ._ad ,_bbe *_ge ._ad );if _ge .Style .StrokeWidth > 0{_cdg =_cdg .Offset (_ge .Style .StrokeWidth /2,_ge .Style .StrokeWidth /2);
};_ef .DrawBezierPathWithCreator (_cdg ,_dca );if _ge .Style .FillColor !=""&&_ge .Style .StrokeColor !=""{_dca .Add_B ();}else if _ge .Style .FillColor !=""{_dca .Add_f ();}else if _ge .Style .StrokeColor !=""{_dca .Add_S ();};_dca .Add_h ();_dca .Add_Q ();
};func (_eca *GraphicSVG )ToContentCreator (cc *_fb .ContentCreator ,scaleX ,scaleY ,translateX ,translateY float64 )*_fb .ContentCreator {if _eca .Name =="\u0073\u0076\u0067"{_eca .SetScaling (scaleX ,scaleY );cc .Add_cm (1,0,0,1,translateX ,translateY );
_eca .setDefaultScaling (_eca ._ad );cc .Add_q ();_gggd :=_c .Max (scaleX ,scaleY );cc .Add_re (_eca .ViewBox .X *_gggd ,_eca .ViewBox .Y *_gggd ,_eca .ViewBox .W *_gggd ,_eca .ViewBox .H *_gggd );cc .Add_W ();cc .Add_n ();for _ ,_baae :=range _eca .Children {_baae .ViewBox =_eca .ViewBox ;
_baae .toContentStream (cc );};cc .Add_Q ();return cc ;};return nil ;};type Path struct{Subpaths []*Subpath ;};var _aea commands ;func _afg (_daf map[string ]string ,_fee float64 )(*GraphicSVGStyle ,error ){_bcg :=_ccd ();_ccbc ,_cgb :=_daf ["\u0066\u0069\u006c\u006c"];
if _cgb {_bcg .FillColor =_ccbc ;if _ccbc =="\u006e\u006f\u006e\u0065"{_bcg .FillColor ="";};};_gba ,_acc :=_daf ["\u0073\u0074\u0072\u006f\u006b\u0065"];if _acc {_bcg .StrokeColor =_gba ;if _gba =="\u006e\u006f\u006e\u0065"{_bcg .StrokeColor ="";};};_caf ,_gac :=_daf ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
if _gac {_agge ,_bdc :=_bgba (_caf ,64);if _bdc !=nil {return nil ,_bdc ;};_bcg .StrokeWidth =_agge *_fee ;};return _bcg ,nil ;};func _aced (_affg string )[]token {var (_ggcb []token ;_gbd string ;);for _ ,_baee :=range _affg {_ecdd :=string (_baee );switch {case _aea .isCommand (_ecdd ):_ggcb ,_gbd =_dce (_ggcb ,_gbd );
_ggcb =append (_ggcb ,token {_ecdd ,true });case _ecdd =="\u002e":if _gbd ==""{_gbd ="\u0030";};if _a .Contains (_gbd ,_ecdd ){_ggcb =append (_ggcb ,token {_gbd ,false });_gbd ="\u0030";};fallthrough;case _ecdd >="\u0030"&&_ecdd <="\u0039"||_ecdd =="\u0065":_gbd +=_ecdd ;
case _ecdd =="\u002d":if _a .HasSuffix (_gbd ,"\u0065"){_gbd +=_ecdd ;}else {_ggcb ,_ =_dce (_ggcb ,_gbd );_gbd =_ecdd ;};default:_ggcb ,_gbd =_dce (_ggcb ,_gbd );};};_ggcb ,_ =_dce (_ggcb ,_gbd );return _ggcb ;};func _gcc (_acgg string )(_ecca []float64 ,_cdad error ){var _bdcd float64 ;
_aab :=0;_dec :=true ;for _faae ,_cdgd :=range _acgg {if _cdgd =='.'{if _dec {_dec =false ;continue ;};_bdcd ,_cdad =_bgba (_acgg [_aab :_faae ],64);if _cdad !=nil {return ;};_ecca =append (_ecca ,_bdcd );_aab =_faae ;};};_bdcd ,_cdad =_bgba (_acgg [_aab :],64);
if _cdad !=nil {return ;};_ecca =append (_ecca ,_bdcd );return ;};func ParseFromStream (source _ee .Reader )(*GraphicSVG ,error ){_gga :=_eea .NewDecoder (source );_gga .CharsetReader =_ec .NewReaderLabel ;_eecd ,_fcd :=_gge (_gga );if _fcd !=nil {return nil ,_fcd ;
};if _eef :=_eecd .Decode (_gga );_eef !=nil &&_eef !=_ee .EOF {return nil ,_eef ;};return _eecd ,nil ;};func _ccd ()*GraphicSVGStyle {return &GraphicSVGStyle {FillColor :"\u00230\u0030\u0030\u0030\u0030\u0030",StrokeColor :"",StrokeWidth :0};};var (_ae =[]string {"\u0063\u006d","\u006d\u006d","\u0070\u0078","\u0070\u0074"};
_ba =map[string ]float64 {"\u0063\u006d":_ce ,"\u006d\u006d":_de ,"\u0070\u0078":_cd ,"\u0070\u0074":1};);func _ggf (_ebe *GraphicSVG ,_fad *_fb .ContentCreator ){_fad .Add_q ();_ebe .Style .toContentStream (_fad );_cea ,_ceb :=_bgba (_ebe .Attributes ["\u0078\u0031"],64);
if _ceb !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ceb .Error ());};_gbf ,_ceb :=_bgba (_ebe .Attributes ["\u0079\u0031"],64);
if _ceb !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ceb .Error ());};_bgb ,_ceb :=_bgba (_ebe .Attributes ["\u0078\u0032"],64);
if _ceb !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ceb .Error ());};_baab ,_ceb :=_bgba (_ebe .Attributes ["\u0079\u0032"],64);
if _ceb !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_ceb .Error ());};_fad .Add_m (_cea *_ebe ._ad ,_gbf *_ebe ._ad );
_fad .Add_l (_bgb *_ebe ._ad ,_baab *_ebe ._ad );if _ebe .Style .FillColor !=""&&_ebe .Style .StrokeColor !=""{_fad .Add_B ();}else if _ebe .Style .FillColor !=""{_fad .Add_f ();}else if _ebe .Style .StrokeColor !=""{_fad .Add_S ();};_fad .Add_h ();_fad .Add_Q ();
};const (_cd =0.72;_ce =28.3464;_de =_ce /10;_eee =0.551784;);type Subpath struct{Commands []*Command ;};func (_dde *GraphicSVG )setDefaultScaling (_fgg float64 ){_dde ._ad =_fgg ;if _dde .Style !=nil &&_dde .Style .StrokeWidth > 0{_dde .Style .StrokeWidth =_dde .Style .StrokeWidth *_dde ._ad ;
};for _ ,_gaegf :=range _dde .Children {_gaegf .setDefaultScaling (_fgg );};};type commands struct{_cedc []string ;_gab map[string ]int ;_bf string ;_ggcf string ;};type pathParserError struct{_fea string };func _bgba (_bgbe string ,_bgea int )(float64 ,error ){_eed ,_bdca :=_bec (_bgbe );
_gfgb ,_cad :=_b .ParseFloat (_eed ,_bgea );if _cad !=nil {return 0,_cad ;};if _dacc ,_adb :=_ba [_bdca ];_adb {_gfgb =_gfgb *_dacc ;}else {_gfgb =_gfgb *_cd ;};return _gfgb ,nil ;};func (_acf *Command )compare (_aae *Command )bool {if _acf .Symbol !=_aae .Symbol {return false ;
};for _ggee ,_ceaa :=range _acf .Params {if _ceaa !=_aae .Params [_ggee ]{return false ;};};return true ;};type token struct{_acac string ;_aeb bool ;};func _bef (_ebc _eea .StartElement )*GraphicSVG {_aaa :=&GraphicSVG {};_fgd :=make (map[string ]string );
for _ ,_dfcg :=range _ebc .Attr {_fgd [_dfcg .Name .Local ]=_dfcg .Value ;};_aaa .Name =_ebc .Name .Local ;_aaa .Attributes =_fgd ;_aaa ._ad =1;if _aaa .Name =="\u0073\u0076\u0067"{_dgf ,_cgf :=_agb (_fgd ["\u0076i\u0065\u0077\u0042\u006f\u0078"]);if _cgf !=nil {_d .Log .Debug ("\u0055\u006ea\u0062\u006c\u0065\u0020t\u006f\u0020p\u0061\u0072\u0073\u0065\u0020\u0076\u0069\u0065w\u0042\u006f\u0078\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074e\u003a\u0020\u0025\u0076",_cgf );
return nil ;};_aaa .ViewBox .X =_dgf [0];_aaa .ViewBox .Y =_dgf [1];_aaa .ViewBox .W =_dgf [2];_aaa .ViewBox .H =_dgf [3];_aaa .Width =_aaa .ViewBox .W ;_aaa .Height =_aaa .ViewBox .H ;if _bbc ,_cbfb :=_fgd ["\u0077\u0069\u0064t\u0068"];_cbfb {_egaa ,_bgg :=_bgba (_bbc ,64);
if _bgg !=nil {_d .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0077\u0069\u0064\u0074\u0068\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_bgg );return nil ;};_aaa .Width =_egaa ;
};if _dbg ,_dbag :=_fgd ["\u0068\u0065\u0069\u0067\u0068\u0074"];_dbag {_faa ,_degd :=_bgba (_dbg ,64);if _degd !=nil {_d .Log .Debug ("\u0055\u006eab\u006c\u0065\u0020t\u006f\u0020\u0070\u0061rse\u0020he\u0069\u0067\u0068\u0074\u0020\u0061\u0074tr\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_degd );
return nil ;};_aaa .Height =_faa ;};if _aaa .Width > 0&&_aaa .Height > 0{_aaa ._ad =_aaa .Width /_aaa .ViewBox .W ;};};return _aaa ;};func (_dgb *Subpath )compare (_fef *Subpath )bool {if len (_dgb .Commands )!=len (_fef .Commands ){return false ;};for _ggad ,_ada :=range _dgb .Commands {if !_ada .compare (_fef .Commands [_ggad ]){return false ;
};};return true ;};func _cbc (_cg *GraphicSVG ,_ff *_fb .ContentCreator ){_ff .Add_q ();_cg .Style .toContentStream (_ff );_cbcd ,_bge :=_bgba (_cg .Attributes ["\u0063\u0078"],64);if _bge !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bge .Error ());
};_gcg ,_bge :=_bgba (_cg .Attributes ["\u0063\u0079"],64);if _bge !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0063\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bge .Error ());
};_aed ,_bge :=_bgba (_cg .Attributes ["\u0072\u0078"],64);if _bge !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0078\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bge .Error ());
};_eff ,_bge :=_bgba (_cg .Attributes ["\u0072\u0079"],64);if _bge !=nil {_d .Log .Debug ("\u0045\u0072\u0072or\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061r\u0073i\u006eg\u0020`\u0072\u0079\u0060\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_bge .Error ());
};_afb :=_aed *_cg ._ad ;_dfe :=_eff *_cg ._ad ;_bac :=_cbcd *_cg ._ad ;_abg :=_gcg *_cg ._ad ;_ecb :=_afb *_eee ;_ggc :=_dfe *_eee ;_dda :=_ef .NewCubicBezierPath ();_dda =_dda .AppendCurve (_ef .NewCubicBezierCurve (-_afb ,0,-_afb ,_ggc ,-_ecb ,_dfe ,0,_dfe ));
_dda =_dda .AppendCurve (_ef .NewCubicBezierCurve (0,_dfe ,_ecb ,_dfe ,_afb ,_ggc ,_afb ,0));_dda =_dda .AppendCurve (_ef .NewCubicBezierCurve (_afb ,0,_afb ,-_ggc ,_ecb ,-_dfe ,0,-_dfe ));_dda =_dda .AppendCurve (_ef .NewCubicBezierCurve (0,-_dfe ,-_ecb ,-_dfe ,-_afb ,-_ggc ,-_afb ,0));
_dda =_dda .Offset (_bac ,_abg );if _cg .Style .StrokeWidth > 0{_dda =_dda .Offset (_cg .Style .StrokeWidth /2,_cg .Style .StrokeWidth /2);};_ef .DrawBezierPathWithCreator (_dda ,_ff );if _cg .Style .FillColor !=""&&_cg .Style .StrokeColor !=""{_ff .Add_B ();
}else if _cg .Style .FillColor !=""{_ff .Add_f ();}else if _cg .Style .StrokeColor !=""{_ff .Add_S ();};_ff .Add_h ();_ff .Add_Q ();};func _feab (_dedg []float64 )[]float64 {for _bda ,_fgc :=0,len (_dedg )-1;_bda < _fgc ;_bda ,_fgc =_bda +1,_fgc -1{_dedg [_bda ],_dedg [_fgc ]=_dedg [_fgc ],_dedg [_bda ];
};return _dedg ;};type Command struct{Symbol string ;Params []float64 ;};func _cbg (_cae float64 ,_ageb int )float64 {_dcdc :=_c .Pow (10,float64 (_ageb ));return float64 (_gefc (_cae *_dcdc ))/_dcdc ;};func _fcag (_gadf []token )([]*Command ,error ){var (_ecbd []*Command ;
_fcaf []float64 ;);for _gbaf :=len (_gadf )-1;_gbaf >=0;_gbaf --{_ged :=_gadf [_gbaf ];if _ged ._aeb {_ggea :=_aea ._gab [_a .ToLower (_ged ._acac )];_bggd :=len (_fcaf );if _ggea ==0&&_bggd ==0{_gff :=&Command {Symbol :_ged ._acac };_ecbd =append ([]*Command {_gff },_ecbd ...);
}else if _ggea !=0&&_bggd %_ggea ==0{_fce :=_bggd /_ggea ;for _aag :=0;_aag < _fce ;_aag ++{_cda :=_ged ._acac ;if _cda =="\u006d"&&_aag < _fce -1{_cda ="\u006c";};if _cda =="\u004d"&&_aag < _fce -1{_cda ="\u004c";};_gadg :=&Command {_cda ,_feab (_fcaf [:_ggea ])};
_ecbd =append ([]*Command {_gadg },_ecbd ...);_fcaf =_fcaf [_ggea :];};}else {_acbb :=pathParserError {"I\u006e\u0063\u006f\u0072\u0072\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072\u0020\u006f\u0066\u0020\u0070\u0061r\u0061\u006d\u0065\u0074\u0065\u0072\u0073\u0020\u0066\u006fr\u0020"+_ged ._acac };
return nil ,_acbb ;};}else {_bff ,_cbbd :=_bgba (_ged ._acac ,64);if _cbbd !=nil {return nil ,_cbbd ;};_fcaf =append (_fcaf ,_bff );};};return _ecbd ,nil ;};type GraphicSVG struct{ViewBox struct{X ,Y ,W ,H float64 ;};Name string ;Attributes map[string ]string ;
Children []*GraphicSVG ;Content string ;Style *GraphicSVGStyle ;Width float64 ;Height float64 ;_ad float64 ;};func _gefc (_fbda float64 )int {return int (_fbda +_c .Copysign (0.5,_fbda ))};func (_cee *Path )compare (_acbf *Path )bool {if len (_cee .Subpaths )!=len (_acbf .Subpaths ){return false ;
};for _beg ,_eadd :=range _cee .Subpaths {if !_eadd .compare (_acbf .Subpaths [_beg ]){return false ;};};return true ;};func _ga (_ffe *GraphicSVG ,_bcb *_fb .ContentCreator ){_bcb .Add_q ();_ffe .Style .toContentStream (_bcb );_efc ,_ffb :=_agb (_ffe .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);
if _ffb !=nil {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_ffb );
return ;};if len (_efc )%2> 0{_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _dfc :=0;_dfc < len (_efc );{if _dfc ==0{_bcb .Add_m (_efc [_dfc ]*_ffe ._ad ,_efc [_dfc +1]*_ffe ._ad );}else {_bcb .Add_l (_efc [_dfc ]*_ffe ._ad ,_efc [_dfc +1]*_ffe ._ad );};_dfc +=2;};if _ffe .Style .FillColor !=""&&_ffe .Style .StrokeColor !=""{_bcb .Add_B ();
}else if _ffe .Style .FillColor !=""{_bcb .Add_f ();}else if _ffe .Style .StrokeColor !=""{_bcb .Add_S ();};_bcb .Add_h ();_bcb .Add_Q ();};func _bdaf (_adc []*Command )*Path {_gdd :=&Path {};var _feed []*Command ;for _ccc ,_gaeb :=range _adc {switch _a .ToLower (_gaeb .Symbol ){case _aea ._bf :if len (_feed )> 0{_gdd .Subpaths =append (_gdd .Subpaths ,&Subpath {_feed });
};_feed =[]*Command {_gaeb };case _aea ._ggcf :_feed =append (_feed ,_gaeb );_gdd .Subpaths =append (_gdd .Subpaths ,&Subpath {_feed });_feed =[]*Command {};default:_feed =append (_feed ,_gaeb );if len (_adc )==_ccc +1{_gdd .Subpaths =append (_gdd .Subpaths ,&Subpath {_feed });
};};};return _gdd ;};func ParseFromFile (path string )(*GraphicSVG ,error ){_acg ,_gfc :=_fd .Open (path );if _gfc !=nil {return nil ,_gfc ;};defer _acg .Close ();return ParseFromStream (_acg );};func _gbaa ()commands {var _ggac =map[string ]int {"\u006d":2,"\u007a":0,"\u006c":2,"\u0068":1,"\u0076":1,"\u0063":6,"\u0073":4,"\u0071":4,"\u0074":2,"\u0061":7};
var _eaf []string ;for _cce :=range _ggac {_eaf =append (_eaf ,_cce );};return commands {_eaf ,_ggac ,"\u006d","\u007a"};};func _dce (_dffg []token ,_adeb string )([]token ,string ){if _adeb !=""{_dffg =append (_dffg ,token {_adeb ,false });_adeb ="";};
return _dffg ,_adeb ;};func _bae (_dfec *GraphicSVG ,_cbb *_fb .ContentCreator ){_cbb .Add_q ();_dfec .Style .toContentStream (_cbb );_bbd ,_edd :=_agb (_dfec .Attributes ["\u0070\u006f\u0069\u006e\u0074\u0073"]);if _edd !=nil {_d .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0075\u006e\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0070\u006f\u0069\u006e\u0074\u0073\u0020\u0061\u0074\u0074\u0072i\u0062\u0075\u0074\u0065\u003a\u0020\u0025\u0076",_edd );
return ;};if len (_bbd )%2> 0{_d .Log .Debug ("\u0045\u0052R\u004f\u0052\u0020\u0069n\u0076\u0061l\u0069\u0064\u0020\u0070\u006f\u0069\u006e\u0074s\u0020\u0061\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u0020\u006ce\u006e\u0067\u0074\u0068");return ;
};for _fe :=0;_fe < len (_bbd );{if _fe ==0{_cbb .Add_m (_bbd [_fe ]*_dfec ._ad ,_bbd [_fe +1]*_dfec ._ad );}else {_cbb .Add_l (_bbd [_fe ]*_dfec ._ad ,_bbd [_fe +1]*_dfec ._ad );};_fe +=2;};_cbb .Add_l (_bbd [0]*_dfec ._ad ,_bbd [1]*_dfec ._ad );if _dfec .Style .FillColor !=""&&_dfec .Style .StrokeColor !=""{_cbb .Add_B ();
}else if _dfec .Style .FillColor !=""{_cbb .Add_f ();}else if _dfec .Style .StrokeColor !=""{_cbb .Add_S ();};_cbb .Add_h ();_cbb .Add_Q ();};func (_abc *GraphicSVG )Decode (decoder *_eea .Decoder )error {for {_fdcd ,_cgd :=decoder .Token ();if _fdcd ==nil &&_cgd ==_ee .EOF {break ;
};if _cgd !=nil {return _cgd ;};switch _dcd :=_fdcd .(type ){case _eea .StartElement :_cga :=_bef (_dcd );_fade :=_cga .Decode (decoder );if _fade !=nil {return _fade ;};_abc .Children =append (_abc .Children ,_cga );case _eea .CharData :_ffa :=_a .TrimSpace (string (_dcd ));
if _ffa !=""{_abc .Content =string (_dcd );};case _eea .EndElement :if _dcd .Name .Local ==_abc .Name {return nil ;};};};return nil ;};func (_ace pathParserError )Error ()string {return _ace ._fea };func (_egd *commands )isCommand (_fca string )bool {for _ ,_gaae :=range _egd ._cedc {if _a .ToLower (_fca )==_gaae {return true ;
};};return false ;};func (_edda *GraphicSVG )SetScaling (xFactor ,yFactor float64 ){_gfd :=_edda .Width /_edda .ViewBox .W ;_gca :=_edda .Height /_edda .ViewBox .H ;_edda .setDefaultScaling (_c .Max (_gfd ,_gca ));for _ ,_add :=range _edda .Children {_add .SetScaling (xFactor ,yFactor );
};};func (_fcf *GraphicSVGStyle )toContentStream (_bee *_fb .ContentCreator ){if _fcf ==nil {return ;};if _fcf .FillColor !=""{var _eega ,_bgge ,_bd float64 ;if _cdf ,_cfe :=_bc .ColorMap [_fcf .FillColor ];_cfe {_fadc ,_dcf ,_afc ,_ :=_cdf .RGBA ();_eega ,_bgge ,_bd =float64 (_fadc ),float64 (_dcf ),float64 (_afc );
}else {_eega ,_bgge ,_bd =_cef (_fcf .FillColor );};_bee .Add_rg (_eega ,_bgge ,_bd );};if _fcf .StrokeColor !=""{var _feg ,_ead ,_ecd float64 ;if _fdb ,_gfg :=_bc .ColorMap [_fcf .StrokeColor ];_gfg {_efff ,_cagc ,_bea ,_ :=_fdb .RGBA ();_feg ,_ead ,_ecd =float64 (_efff )/255.0,float64 (_cagc )/255.0,float64 (_bea )/255.0;
}else {_feg ,_ead ,_ecd =_cef (_fcf .StrokeColor );};_bee .Add_RG (_feg ,_ead ,_ecd );};if _fcf .StrokeWidth > 0{_bee .Add_w (_fcf .StrokeWidth );};};type GraphicSVGStyle struct{FillColor string ;StrokeColor string ;StrokeWidth float64 ;};func (_aegd *GraphicSVG )toContentStream (_aff *_fb .ContentCreator ){_gae ,_gad :=_afg (_aegd .Attributes ,_aegd ._ad );
if _gad !=nil {_d .Log .Debug ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073e\u0020\u0073\u0074\u0079\u006c\u0065\u0020a\u0074\u0074\u0072\u0069\u0062\u0075\u0074\u0065\u003a\u0020%\u0076",_gad );};_aegd .Style =_gae ;switch _aegd .Name {case "\u0070\u0061\u0074\u0068":_fdg (_aegd ,_aff );
for _ ,_ade :=range _aegd .Children {_ade .toContentStream (_aff );};case "\u0072\u0065\u0063\u0074":_ddc (_aegd ,_aff );for _ ,_geb :=range _aegd .Children {_geb .toContentStream (_aff );};case "\u0063\u0069\u0072\u0063\u006c\u0065":_eec (_aegd ,_aff );
for _ ,_cebg :=range _aegd .Children {_cebg .toContentStream (_aff );};case "\u0065l\u006c\u0069\u0070\u0073\u0065":_cbc (_aegd ,_aff );for _ ,_cbf :=range _aegd .Children {_cbf .toContentStream (_aff );};case "\u0070\u006f\u006c\u0079\u006c\u0069\u006e\u0065":_ga (_aegd ,_aff );
for _ ,_ccb :=range _aegd .Children {_ccb .toContentStream (_aff );};case "\u0070o\u006c\u0079\u0067\u006f\u006e":_bae (_aegd ,_aff );for _ ,_ebf :=range _aegd .Children {_ebf .toContentStream (_aff );};case "\u006c\u0069\u006e\u0065":_ggf (_aegd ,_aff );
for _ ,_gaa :=range _aegd .Children {_gaa .toContentStream (_aff );};case "\u0067":_ega ,_agf :=_aegd .Attributes ["\u0066\u0069\u006c\u006c"];_gaeg ,_fdec :=_aegd .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];_eaa ,_beb :=_aegd .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];
for _ ,_abca :=range _aegd .Children {if _ ,_cf :=_abca .Attributes ["\u0066\u0069\u006c\u006c"];!_cf &&_agf {_abca .Attributes ["\u0066\u0069\u006c\u006c"]=_ega ;};if _ ,_cagec :=_abca .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"];!_cagec &&_fdec {_abca .Attributes ["\u0073\u0074\u0072\u006f\u006b\u0065"]=_gaeg ;
};if _ ,_efdb :=_abca .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"];!_efdb &&_beb {_abca .Attributes ["\u0073\u0074\u0072o\u006b\u0065\u002d\u0077\u0069\u0064\u0074\u0068"]=_eaa ;};_abca .toContentStream (_aff );};
};};func _cgg (_aefg string )(*Path ,error ){_aea =_gbaa ();_gef ,_dfge :=_fcag (_aced (_aefg ));if _dfge !=nil {return nil ,_dfge ;};return _bdaf (_gef ),nil ;};func _cef (_cefe string )(_ddf ,_gfcb ,_fdcc float64 ){if (len (_cefe )!=4&&len (_cefe )!=7)||_cefe [0]!='#'{_d .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_cefe );
return _ddf ,_gfcb ,_fdcc ;};var _ceab ,_fcg ,_beag int ;if len (_cefe )==4{var _cecf ,_agec ,_cgfb int ;_efb ,_bffa :=_eg .Sscanf (_cefe ,"\u0023\u0025\u0031\u0078\u0025\u0031\u0078\u0025\u0031\u0078",&_cecf ,&_agec ,&_cgfb );if _bffa !=nil {_d .Log .Debug ("\u0049\u006e\u0076a\u006c\u0069\u0064\u0020h\u0065\u0078\u0020\u0063\u006f\u0064\u0065:\u0020\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_cefe ,_bffa );
return _ddf ,_gfcb ,_fdcc ;};if _efb !=3{_d .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_cefe );return _ddf ,_gfcb ,_fdcc ;};_ceab =_cecf *16+_cecf ;_fcg =_agec *16+_agec ;_beag =_cgfb *16+_cgfb ;
}else {_aabb ,_efg :=_eg .Sscanf (_cefe ,"\u0023\u0025\u0032\u0078\u0025\u0032\u0078\u0025\u0032\u0078",&_ceab ,&_fcg ,&_beag );if _efg !=nil {_d .Log .Debug ("I\u006ev\u0061\u006c\u0069\u0064\u0020\u0068\u0065\u0078 \u0063\u006f\u0064\u0065: \u0025\u0073",_cefe );
return _ddf ,_gfcb ,_fdcc ;};if _aabb !=3{_d .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069d\u0020\u0068\u0065\u0078\u0020\u0063\u006f\u0064\u0065\u003a\u0020\u0025\u0073,\u0020\u006e\u0020\u0021\u003d\u0020\u0033 \u0028\u0025\u0064\u0029",_cefe ,_aabb );
return _ddf ,_gfcb ,_fdcc ;};};_fcgb :=float64 (_ceab )/255.0;_gbg :=float64 (_fcg )/255.0;_gcaa :=float64 (_beag )/255.0;return _fcgb ,_gbg ,_gcaa ;};func (_cbfc *Command )isAbsolute ()bool {return _cbfc .Symbol ==_a .ToUpper (_cbfc .Symbol )};func _fdg (_aeg *GraphicSVG ,_ed *_fb .ContentCreator ){_ed .Add_q ();
_aeg .Style .toContentStream (_ed );_fbf ,_dd :=_cgg (_aeg .Attributes ["\u0064"]);if _dd !=nil {_d .Log .Error ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025s",_dd .Error ());};var (_ac ,_cec =0.0,0.0;_ddb ,_cdc =0.0,0.0;_ca *Command ;);for _ ,_fde :=range _fbf .Subpaths {for _ ,_ab :=range _fde .Commands {switch _a .ToLower (_ab .Symbol ){case "\u006d":_ddb ,_cdc =_ab .Params [0]*_aeg ._ad ,_ab .Params [1]*_aeg ._ad ;
if !_ab .isAbsolute (){_ddb ,_cdc =_ac +_ddb -_aeg .ViewBox .X ,_cec +_cdc -_aeg .ViewBox .Y ;};_ed .Add_m (_cbg (_ddb ,3),_cbg (_cdc ,3));_ac ,_cec =_ddb ,_cdc ;case "\u0063":_cac ,_fg ,_ced ,_be ,_eeg ,_bcd :=_ab .Params [0]*_aeg ._ad ,_ab .Params [1]*_aeg ._ad ,_ab .Params [2]*_aeg ._ad ,_ab .Params [3]*_aeg ._ad ,_ab .Params [4]*_aeg ._ad ,_ab .Params [5]*_aeg ._ad ;
if !_ab .isAbsolute (){_cac ,_fg ,_ced ,_be ,_eeg ,_bcd =_ac +_cac ,_cec +_fg ,_ac +_ced ,_cec +_be ,_ac +_eeg ,_cec +_bcd ;};_ed .Add_c (_cbg (_cac ,3),_cbg (_fg ,3),_cbg (_ced ,3),_cbg (_be ,3),_cbg (_eeg ,3),_cbg (_bcd ,3));_ac ,_cec =_eeg ,_bcd ;case "\u0073":_agg ,_aef ,_cab ,_cc :=_ab .Params [0]*_aeg ._ad ,_ab .Params [1]*_aeg ._ad ,_ab .Params [2]*_aeg ._ad ,_ab .Params [3]*_aeg ._ad ;
if !_ab .isAbsolute (){_agg ,_aef ,_cab ,_cc =_ac +_agg ,_cec +_aef ,_ac +_cab ,_cec +_cc ;};_ed .Add_c (_cbg (_ac ,3),_cbg (_cec ,3),_cbg (_agg ,3),_cbg (_aef ,3),_cbg (_cab ,3),_cbg (_cc ,3));_ac ,_cec =_cab ,_cc ;case "\u006c":_dg ,_bb :=_ab .Params [0]*_aeg ._ad ,_ab .Params [1]*_aeg ._ad ;
if !_ab .isAbsolute (){_dg ,_bb =_ac +_dg ,_cec +_bb ;};_ed .Add_l (_cbg (_dg ,3),_cbg (_bb ,3));_ac ,_cec =_dg ,_bb ;case "\u0068":_df :=_ab .Params [0]*_aeg ._ad ;if !_ab .isAbsolute (){_df =_ac +_df ;};_ed .Add_l (_cbg (_df ,3),_cbg (_cec ,3));_ac =_df ;
case "\u0076":_g :=_ab .Params [0]*_aeg ._ad ;if !_ab .isAbsolute (){_g =_cec +_g ;};_ed .Add_l (_cbg (_ac ,3),_cbg (_g ,3));_cec =_g ;case "\u0071":_aca ,_efd ,_dc ,_da :=_ab .Params [0]*_aeg ._ad ,_ab .Params [1]*_aeg ._ad ,_ab .Params [2]*_aeg ._ad ,_ab .Params [3]*_aeg ._ad ;
if !_ab .isAbsolute (){_aca ,_efd ,_dc ,_da =_ac +_aca ,_cec +_efd ,_ac +_dc ,_cec +_da ;};_cacc ,_gc :=_bc .QuadraticToCubicBezier (_ac ,_cec ,_aca ,_efd ,_dc ,_da );_ed .Add_c (_cbg (_cacc .X ,3),_cbg (_cacc .Y ,3),_cbg (_gc .X ,3),_cbg (_gc .Y ,3),_cbg (_dc ,3),_cbg (_da ,3));
_ac ,_cec =_dc ,_da ;case "\u0074":var _fc ,_dgc _bc .Point ;_ea ,_efdg :=_ab .Params [0]*_aeg ._ad ,_ab .Params [1]*_aeg ._ad ;if !_ab .isAbsolute (){_ea ,_efdg =_ac +_ea ,_cec +_efdg ;};if _ca !=nil &&_a .ToLower (_ca .Symbol )=="\u0071"{_gb :=_bc .Point {X :_ca .Params [0]*_aeg ._ad ,Y :_ca .Params [1]*_aeg ._ad };
_eda :=_bc .Point {X :_ca .Params [2]*_aeg ._ad ,Y :_ca .Params [3]*_aeg ._ad };_aega :=_eda .Mul (2.0).Sub (_gb );_fc ,_dgc =_bc .QuadraticToCubicBezier (_ac ,_cec ,_aega .X ,_aega .Y ,_ea ,_efdg );};_ed .Add_c (_cbg (_fc .X ,3),_cbg (_fc .Y ,3),_cbg (_dgc .X ,3),_cbg (_dgc .Y ,3),_cbg (_ea ,3),_cbg (_efdg ,3));
_ac ,_cec =_ea ,_efdg ;case "\u0061":_af ,_dac :=_ab .Params [0]*_aeg ._ad ,_ab .Params [1]*_aeg ._ad ;_deg :=_ab .Params [2];_ded :=_ab .Params [3]> 0;_fdc :=_ab .Params [4]> 0;_cb ,_gcb :=_ab .Params [5]*_aeg ._ad ,_ab .Params [6]*_aeg ._ad ;if !_ab .isAbsolute (){_cb ,_gcb =_ac +_cb ,_cec +_gcb ;
};_cag :=_bc .EllipseToCubicBeziers (_ac ,_cec ,_af ,_dac ,_deg ,_ded ,_fdc ,_cb ,_gcb );for _ ,_bg :=range _cag {_ed .Add_c (_cbg (_bg [1].X ,3),_cbg ((_bg [1].Y ),3),_cbg ((_bg [2].X ),3),_cbg ((_bg [2].Y ),3),_cbg ((_bg [3].X ),3),_cbg ((_bg [3].Y ),3));
};_ac ,_cec =_cb ,_gcb ;case "\u007a":_ed .Add_h ();};_ca =_ab ;};};if _aeg .Style .FillColor !=""&&_aeg .Style .StrokeColor !=""{_ed .Add_B ();}else if _aeg .Style .FillColor !=""{_ed .Add_f ();}else if _aeg .Style .StrokeColor !=""{_ed .Add_S ();};_ed .Add_h ();
_ed .Add_Q ();};func ParseFromString (svgStr string )(*GraphicSVG ,error ){return ParseFromStream (_a .NewReader (svgStr ));};func _gge (_egb *_eea .Decoder )(*GraphicSVG ,error ){for {_egc ,_gdb :=_egb .Token ();if _egc ==nil &&_gdb ==_ee .EOF {break ;
};if _gdb !=nil {return nil ,_gdb ;};switch _ecc :=_egc .(type ){case _eea .StartElement :return _bef (_ecc ),nil ;};};return &GraphicSVG {},nil ;};func _bec (_abge string )(_ffd ,_bbdd string ){if _abge ==""||(_abge [len (_abge )-1]>='0'&&_abge [len (_abge )-1]<='9'){return _abge ,"";
};_ffd =_abge ;for _ ,_gcd :=range _ae {if _a .Contains (_ffd ,_gcd ){_bbdd =_gcd ;};_ffd =_a .TrimSuffix (_ffd ,_gcd );};return ;};func _agb (_edf string )([]float64 ,error ){_fdd :=-1;var _efdgg []float64 ;_eccf :=' ';for _agfa ,_bfa :=range _edf {if !_f .IsNumber (_bfa )&&_bfa !='.'&&!(_bfa =='-'&&_eccf =='e')&&_bfa !='e'{if _fdd !=-1{_adee ,_bde :=_gcc (_edf [_fdd :_agfa ]);
if _bde !=nil {return _efdgg ,_bde ;};_efdgg =append (_efdgg ,_adee ...);};if _bfa =='-'{_fdd =_agfa ;}else {_fdd =-1;};}else if _fdd ==-1{_fdd =_agfa ;};_eccf =_bfa ;};if _fdd !=-1&&_fdd !=len (_edf ){_eccfc ,_cca :=_gcc (_edf [_fdd :]);if _cca !=nil {return _efdgg ,_cca ;
};_efdgg =append (_efdgg ,_eccfc ...);};return _efdgg ,nil ;};func _ddc (_eb *GraphicSVG ,_acb *_fb .ContentCreator ){_acb .Add_q ();_eb .Style .toContentStream (_acb );_bga ,_fbc :=_bgba (_eb .Attributes ["\u0078"],64);if _fbc !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0078\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_fbc .Error ());
};_baa ,_fbc :=_bgba (_eb .Attributes ["\u0079"],64);if _fbc !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020w\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020`\u0079\u0060\u0020\u0076\u0061\u006c\u0075e\u003a\u0020\u0025\u0076",_fbc .Error ());
};_ggg ,_fbc :=_bgba (_eb .Attributes ["\u0077\u0069\u0064t\u0068"],64);if _fbc !=nil {_d .Log .Debug ("\u0045\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0077\u0069\u0064\u0074\u0068\u0020v\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_fbc .Error ());
};_gf ,_fbc :=_bgba (_eb .Attributes ["\u0068\u0065\u0069\u0067\u0068\u0074"],64);if _fbc !=nil {_d .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077h\u0069\u006c\u0065 \u0070\u0061\u0072\u0073i\u006e\u0067\u0020\u0073\u0074\u0072\u006f\u006b\u0065\u0020\u0068\u0065\u0069\u0067\u0068\u0074\u0020\u0076\u0061\u006c\u0075\u0065\u003a\u0020\u0025\u0076",_fbc .Error ());
};_acb .Add_re (_bga *_eb ._ad ,_baa *_eb ._ad ,_ggg *_eb ._ad ,_gf *_eb ._ad );if _eb .Style .FillColor !=""&&_eb .Style .StrokeColor !=""{_acb .Add_B ();}else if _eb .Style .FillColor !=""{_acb .Add_f ();}else if _eb .Style .StrokeColor !=""{_acb .Add_S ();
};_acb .Add_Q ();};