//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_ec "bufio";_d "bytes";_fc "encoding/hex";_g "errors";_c "fmt";_eb "github.com/unidoc/unipdf/v3/common";_fdb "github.com/unidoc/unipdf/v3/core";_fde "io";_fca "os";_f "regexp";_fd "sort";_e "strconv";_bg "strings";);func (_ebfd *fdfParser )parseFdfVersion ()(int ,int ,error ){_ebfd ._bc .Seek (0,_fde .SeekStart );
_baf :=20;_bea :=make ([]byte ,_baf );_ebfd ._bc .Read (_bea );_bcb :=_ead .FindStringSubmatch (string (_bea ));if len (_bcb )< 3{_dbfd ,_fab ,_gcg :=_ebfd .seekFdfVersionTopDown ();if _gcg !=nil {_eb .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_gcg ;};return _dbfd ,_fab ,nil ;};_cb ,_aeb :=_e .Atoi (_bcb [1]);if _aeb !=nil {return 0,0,_aeb ;};_dgb ,_aeb :=_e .Atoi (_bcb [2]);if _aeb !=nil {return 0,0,_aeb ;};_eb .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_cb ,_dgb );
return _cb ,_dgb ,nil ;};func (_gad *fdfParser )skipComments ()error {if _ ,_dcb :=_gad .skipSpaces ();_dcb !=nil {return _dcb ;};_agb :=true ;for {_cgd ,_age :=_gad ._afg .Peek (1);if _age !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_age .Error ());
return _age ;};if _agb &&_cgd [0]!='%'{return nil ;};_agb =false ;if (_cgd [0]!='\r')&&(_cgd [0]!='\n'){_gad ._afg .ReadByte ();}else {break ;};};return _gad .skipComments ();};var _bddg =_f .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_gc *fdfParser )parseString ()(*_fdb .PdfObjectString ,error ){_gc ._afg .ReadByte ();var _dcg _d .Buffer ;_edf :=1;for {_agg ,_fea :=_gc ._afg .Peek (1);if _fea !=nil {return _fdb .MakeString (_dcg .String ()),_fea ;};if _agg [0]=='\\'{_gc ._afg .ReadByte ();
_dbd ,_cag :=_gc ._afg .ReadByte ();if _cag !=nil {return _fdb .MakeString (_dcg .String ()),_cag ;};if _fdb .IsOctalDigit (_dbd ){_fbe ,_ggb :=_gc ._afg .Peek (2);if _ggb !=nil {return _fdb .MakeString (_dcg .String ()),_ggb ;};var _gfg []byte ;_gfg =append (_gfg ,_dbd );
for _ ,_gfa :=range _fbe {if _fdb .IsOctalDigit (_gfa ){_gfg =append (_gfg ,_gfa );}else {break ;};};_gc ._afg .Discard (len (_gfg )-1);_eb .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_gfg );
_ccc ,_ggb :=_e .ParseUint (string (_gfg ),8,32);if _ggb !=nil {return _fdb .MakeString (_dcg .String ()),_ggb ;};_dcg .WriteByte (byte (_ccc ));continue ;};switch _dbd {case 'n':_dcg .WriteRune ('\n');case 'r':_dcg .WriteRune ('\r');case 't':_dcg .WriteRune ('\t');
case 'b':_dcg .WriteRune ('\b');case 'f':_dcg .WriteRune ('\f');case '(':_dcg .WriteRune ('(');case ')':_dcg .WriteRune (')');case '\\':_dcg .WriteRune ('\\');};continue ;}else if _agg [0]=='('{_edf ++;}else if _agg [0]==')'{_edf --;if _edf ==0{_gc ._afg .ReadByte ();
break ;};};_aaf ,_ :=_gc ._afg .ReadByte ();_dcg .WriteByte (_aaf );};return _fdb .MakeString (_dcg .String ()),nil ;};

// Root returns the Root of the FDF document.
func (_egbd *fdfParser )Root ()(*_fdb .PdfObjectDictionary ,error ){if _egbd ._efcg !=nil {if _dfd ,_efa :=_egbd .trace (_egbd ._efcg .Get ("\u0052\u006f\u006f\u0074")).(*_fdb .PdfObjectDictionary );_efa {if _bad ,_cbe :=_egbd .trace (_dfd .Get ("\u0046\u0044\u0046")).(*_fdb .PdfObjectDictionary );
_cbe {return _bad ,nil ;};};};var _fedd []int64 ;for _aga :=range _egbd ._gf {_fedd =append (_fedd ,_aga );};_fd .Slice (_fedd ,func (_aca ,_fcd int )bool {return _fedd [_aca ]< _fedd [_fcd ]});for _ ,_cbd :=range _fedd {_gcd :=_egbd ._gf [_cbd ];if _cdd ,_ecbb :=_egbd .trace (_gcd ).(*_fdb .PdfObjectDictionary );
_ecbb {if _fga ,_gcgd :=_egbd .trace (_cdd .Get ("\u0046\u0044\u0046")).(*_fdb .PdfObjectDictionary );_gcgd {return _fga ,nil ;};};};return nil ,_g .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_fbd *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_fbd ._bc .Seek (0,_fde .SeekStart );
_fbd ._afg =_ec .NewReader (_fbd ._bc );_gfaa :=20;_bdde :=make ([]byte ,_gfaa );for {_ced ,_ecbg :=_fbd ._afg .ReadByte ();if _ecbg !=nil {if _ecbg ==_fde .EOF {break ;}else {return 0,0,_ecbg ;};};if _fdb .IsDecimalDigit (_ced )&&_bdde [_gfaa -1]=='.'&&_fdb .IsDecimalDigit (_bdde [_gfaa -2])&&_bdde [_gfaa -3]=='-'&&_bdde [_gfaa -4]=='F'&&_bdde [_gfaa -5]=='D'&&_bdde [_gfaa -6]=='P'{_bade :=int (_bdde [_gfaa -2]-'0');
_faga :=int (_ced -'0');return _bade ,_faga ,nil ;};_bdde =append (_bdde [1:_gfaa ],_ced );};return 0,0,_g .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_afa *fdfParser )parseBool ()(_fdb .PdfObjectBool ,error ){_ffd ,_fbc :=_afa ._afg .Peek (4);
if _fbc !=nil {return _fdb .PdfObjectBool (false ),_fbc ;};if (len (_ffd )>=4)&&(string (_ffd [:4])=="\u0074\u0072\u0075\u0065"){_afa ._afg .Discard (4);return _fdb .PdfObjectBool (true ),nil ;};_ffd ,_fbc =_afa ._afg .Peek (5);if _fbc !=nil {return _fdb .PdfObjectBool (false ),_fbc ;
};if (len (_ffd )>=5)&&(string (_ffd [:5])=="\u0066\u0061\u006cs\u0065"){_afa ._afg .Discard (5);return _fdb .PdfObjectBool (false ),nil ;};return _fdb .PdfObjectBool (false ),_g .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};func (_gg *fdfParser )readComment ()(string ,error ){var _ebf _d .Buffer ;_ ,_ed :=_gg .skipSpaces ();if _ed !=nil {return _ebf .String (),_ed ;};_df :=true ;for {_gaf ,_fe :=_gg ._afg .Peek (1);if _fe !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fe .Error ());
return _ebf .String (),_fe ;};if _df &&_gaf [0]!='%'{return _ebf .String (),_g .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_df =false ;if (_gaf [0]!='\r')&&(_gaf [0]!='\n'){_eee ,_ :=_gg ._afg .ReadByte ();
_ebf .WriteByte (_eee );}else {break ;};};return _ebf .String (),nil ;};func (_fag *fdfParser )parseHexString ()(*_fdb .PdfObjectString ,error ){_fag ._afg .ReadByte ();var _bb _d .Buffer ;for {_cef ,_gbc :=_fag ._afg .Peek (1);if _gbc !=nil {return _fdb .MakeHexString (""),_gbc ;
};if _cef [0]=='>'{_fag ._afg .ReadByte ();break ;};_dbf ,_ :=_fag ._afg .ReadByte ();if !_fdb .IsWhiteSpace (_dbf ){_bb .WriteByte (_dbf );};};if _bb .Len ()%2==1{_bb .WriteRune ('0');};_fbb ,_fgb :=_fc .DecodeString (_bb .String ());if _fgb !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_bb .String ());
return _fdb .MakeHexString (""),nil ;};return _fdb .MakeHexString (string (_fbb )),nil ;};func (_cgf *fdfParser )readAtLeast (_bdd []byte ,_be int )(int ,error ){_aa :=_be ;_ee :=0;_baa :=0;for _aa > 0{_fdg ,_eeb :=_cgf ._afg .Read (_bdd [_ee :]);if _eeb !=nil {_eb .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_fdg ,_baa ,_eeb .Error ());
return _ee ,_g .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_baa ++;_ee +=_fdg ;_aa -=_fdg ;};return _ee ,nil ;};func (_dcbd *fdfParser )seekToEOFMarker (_beee int64 )error {_efgd :=int64 (0);_dgab :=int64 (1000);
for _efgd < _beee {if _beee <=(_dgab +_efgd ){_dgab =_beee -_efgd ;};_ ,_bdc :=_dcbd ._bc .Seek (-_efgd -_dgab ,_fde .SeekEnd );if _bdc !=nil {return _bdc ;};_egbb :=make ([]byte ,_dgab );_dcbd ._bc .Read (_egbb );_eb .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_egbb ));
_cgg :=_ag .FindAllStringIndex (string (_egbb ),-1);if _cgg !=nil {_cbb :=_cgg [len (_cgg )-1];_eb .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_cgg );_dcbd ._bc .Seek (-_efgd -_dgab +int64 (_cbb [0]),_fde .SeekEnd );return nil ;};_eb .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_efgd +=_dgab ;};_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _g .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_gbd *fdfParser )trace (_cbf _fdb .PdfObject )_fdb .PdfObject {switch _cgdd :=_cbf .(type ){case *_fdb .PdfObjectReference :_cad ,_cbde :=_gbd ._gf [_cgdd .ObjectNumber ].(*_fdb .PdfIndirectObject );if _cbde {return _cad .PdfObject ;};_eb .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_fdb .PdfIndirectObject :return _cgdd .PdfObject ;};return _cbf ;};

// Data represents forms data format (FDF) file data.
type Data struct{_dg *_fdb .PdfObjectDictionary ;_eg *_fdb .PdfObjectArray ;};func (_eab *fdfParser )parse ()error {_eab ._bc .Seek (0,_fde .SeekStart );_eab ._afg =_ec .NewReader (_eab ._bc );for {_eab .skipComments ();_dda ,_beea :=_eab ._afg .Peek (20);
if _beea !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _beea ;};if _bg .HasPrefix (string (_dda ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_eab ._afg .Discard (7);
_eab .skipSpaces ();_eab .skipComments ();_ebce ,_ :=_eab .parseDict ();_eab ._efcg =_ebce ;break ;};_agea :=_gdb .FindStringSubmatchIndex (string (_dda ));if len (_agea )< 6{_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dda ));
return _g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_geg ,_beea :=_eab .parseIndirectObject ();if _beea !=nil {return _beea ;};switch _fcc :=_geg .(type ){case *_fdb .PdfIndirectObject :_eab ._gf [_fcc .ObjectNumber ]=_fcc ;case *_fdb .PdfObjectStream :_eab ._gf [_fcc .ObjectNumber ]=_fcc ;default:return _g .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_gge *fdfParser )parseObject ()(_fdb .PdfObject ,error ){_eb .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_gge .skipSpaces ();for {_add ,_dfb :=_gge ._afg .Peek (2);if _dfb !=nil {return nil ,_dfb ;
};_eb .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_add ));if _add [0]=='/'{_dee ,_cgfe :=_gge .parseName ();_eb .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_dee );
return &_dee ,_cgfe ;}else if _add [0]=='('{_eb .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gge .parseString ();}else if _add [0]=='['{_eb .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _gge .parseArray ();
}else if (_add [0]=='<')&&(_add [1]=='<'){_eb .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gge .parseDict ();}else if _add [0]=='<'{_eb .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _gge .parseHexString ();
}else if _add [0]=='%'{_gge .readComment ();_gge .skipSpaces ();}else {_eb .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_add ,_ =_gge ._afg .Peek (15);_dgd :=string (_add );_eb .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_dgd );
if (len (_dgd )> 3)&&(_dgd [:4]=="\u006e\u0075\u006c\u006c"){_agc ,_fgce :=_gge .parseNull ();return &_agc ,_fgce ;}else if (len (_dgd )> 4)&&(_dgd [:5]=="\u0066\u0061\u006cs\u0065"){_aab ,_geb :=_gge .parseBool ();return &_aab ,_geb ;}else if (len (_dgd )> 3)&&(_dgd [:4]=="\u0074\u0072\u0075\u0065"){_ccg ,_cce :=_gge .parseBool ();
return &_ccg ,_cce ;};_eeg :=_eed .FindStringSubmatch (_dgd );if len (_eeg )> 1{_add ,_ =_gge ._afg .ReadBytes ('R');_eb .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_add [:]));_bgb ,_eebf :=_cdg (string (_add ));
return &_bgb ,_eebf ;};_fbg :=_efc .FindStringSubmatch (_dgd );if len (_fbg )> 1{_eb .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gge .parseNumber ();};_fbg =_bddg .FindStringSubmatch (_dgd );if len (_fbg )> 1{_eb .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_eb .Log .Trace ("\u0025\u0020\u0073",_fbg );return _gge .parseNumber ();};_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_dgd );return nil ,_g .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_ecd *fdfParser )getFileOffset ()int64 {_ff ,_ :=_ecd ._bc .Seek (0,_fde .SeekCurrent );_ff -=int64 (_ecd ._afg .Buffered ());return _ff ;};func (_adc *fdfParser )parseIndirectObject ()(_fdb .PdfObject ,error ){_dgbe :=_fdb .PdfIndirectObject {};
_eb .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_ggbd ,_gce :=_adc ._afg .Peek (20);if _gce !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_dgbe ,_gce ;};_eb .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_ggbd ));_efea :=_gdb .FindStringSubmatchIndex (string (_ggbd ));if len (_efea )< 6{_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ggbd ));
return &_dgbe ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_adc ._afg .Discard (_efea [0]);_eb .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_efea );_bba :=_efea [1]-_efea [0];_gea :=make ([]byte ,_bba );_ ,_gce =_adc .readAtLeast (_gea ,_bba );if _gce !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_gce );
return nil ,_gce ;};_eb .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_gea );_efgdd :=_gdb .FindStringSubmatch (string (_gea ));if len (_efgdd )< 3{_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gea ));
return &_dgbe ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_gdg ,_ :=_e .Atoi (_efgdd [1]);_gbg ,_ :=_e .Atoi (_efgdd [2]);_dgbe .ObjectNumber =int64 (_gdg );_dgbe .GenerationNumber =int64 (_gbg );for {_bgbd ,_ddc :=_adc ._afg .Peek (2);if _ddc !=nil {return &_dgbe ,_ddc ;};_eb .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bgbd ),string (_bgbd ));
if _fdb .IsWhiteSpace (_bgbd [0]){_adc .skipSpaces ();}else if _bgbd [0]=='%'{_adc .skipComments ();}else if (_bgbd [0]=='<')&&(_bgbd [1]=='<'){_eb .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_dgbe .PdfObject ,_ddc =_adc .parseDict ();
_eb .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_ddc );if _ddc !=nil {return &_dgbe ,_ddc ;};_eb .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_bgbd [0]=='/')||(_bgbd [0]=='(')||(_bgbd [0]=='[')||(_bgbd [0]=='<'){_dgbe .PdfObject ,_ddc =_adc .parseObject ();if _ddc !=nil {return &_dgbe ,_ddc ;};_eb .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _bgbd [0]=='e'{_ffc ,_efgddg :=_adc .readTextLine ();if _efgddg !=nil {return nil ,_efgddg ;};if len (_ffc )>=6&&_ffc [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bgbd [0]=='s'{_bgbd ,_ =_adc ._afg .Peek (10);if string (_bgbd [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_bef :=6;
if len (_bgbd )> 6{if _fdb .IsWhiteSpace (_bgbd [_bef ])&&_bgbd [_bef ]!='\r'&&_bgbd [_bef ]!='\n'{_eb .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_bef ++;};if _bgbd [_bef ]=='\r'{_bef ++;if _bgbd [_bef ]=='\n'{_bef ++;};}else if _bgbd [_bef ]=='\n'{_bef ++;};};_adc ._afg .Discard (_bef );_edad ,_cgga :=_dgbe .PdfObject .(*_fdb .PdfObjectDictionary );if !_cgga {return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_eb .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_edad );_agcd ,_fded :=_edad .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_fdb .PdfObjectInteger );if !_fded {return nil ,_g .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_fdf :=*_agcd ;if _fdf < 0{return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_fdf )> _adc ._gef {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_g .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_ffca :=make ([]byte ,_fdf );
_ ,_ddc =_adc .readAtLeast (_ffca ,int (_fdf ));if _ddc !=nil {_eb .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_ffca ),_ffca );_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ddc );
return nil ,_ddc ;};_dcc :=_fdb .PdfObjectStream {};_dcc .Stream =_ffca ;_dcc .PdfObjectDictionary =_dgbe .PdfObject .(*_fdb .PdfObjectDictionary );_dcc .ObjectNumber =_dgbe .ObjectNumber ;_dcc .GenerationNumber =_dgbe .GenerationNumber ;_adc .skipSpaces ();
_adc ._afg .Discard (9);_adc .skipSpaces ();return &_dcc ,nil ;};};_dgbe .PdfObject ,_ddc =_adc .parseObject ();return &_dgbe ,_ddc ;};};_eb .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_dgbe ,nil ;};func (_gff *fdfParser )readTextLine ()(string ,error ){var _eaa _d .Buffer ;for {_cecg ,_eca :=_gff ._afg .Peek (1);if _eca !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_eca .Error ());return _eaa .String (),_eca ;
};if (_cecg [0]!='\r')&&(_cecg [0]!='\n'){_eea ,_ :=_gff ._afg .ReadByte ();_eaa .WriteByte (_eea );}else {break ;};};return _eaa .String (),nil ;};func (_cda *fdfParser )parseNumber ()(_fdb .PdfObject ,error ){return _fdb .ParseNumber (_cda ._afg )};

// Load loads FDF form data from `r`.
func Load (r _fde .ReadSeeker )(*Data ,error ){_ga ,_fb :=_cged (r );if _fb !=nil {return nil ,_fb ;};_ce ,_fb :=_ga .Root ();if _fb !=nil {return nil ,_fb ;};_gd ,_db :=_fdb .GetArray (_ce .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_db {return nil ,_g .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_eg :_gd ,_dg :_ce },nil ;};func _ffa (_bffa string )(*fdfParser ,error ){_bddb :=fdfParser {};_aed :=[]byte (_bffa );_eac :=_d .NewReader (_aed );_bddb ._bc =_eac ;_bddb ._gf =map[int64 ]_fdb .PdfObject {};_acd :=_ec .NewReader (_eac );
_bddb ._afg =_acd ;_bddb ._gef =int64 (len (_bffa ));return &_bddb ,_bddb .parse ();};func (_bbd *fdfParser )parseNull ()(_fdb .PdfObjectNull ,error ){_ ,_ggf :=_bbd ._afg .Discard (4);return _fdb .PdfObjectNull {},_ggf ;};func (_fcad *fdfParser )parseArray ()(*_fdb .PdfObjectArray ,error ){_ecb :=_fdb .MakeArray ();
_fcad ._afg .ReadByte ();for {_fcad .skipSpaces ();_bbf ,_dd :=_fcad ._afg .Peek (1);if _dd !=nil {return _ecb ,_dd ;};if _bbf [0]==']'{_fcad ._afg .ReadByte ();break ;};_ae ,_dd :=_fcad .parseObject ();if _dd !=nil {return _ecb ,_dd ;};_ecb .Append (_ae );
};return _ecb ,nil ;};type fdfParser struct{_cdc int ;_beg int ;_gf map[int64 ]_fdb .PdfObject ;_bc _fde .ReadSeeker ;_afg *_ec .Reader ;_gef int64 ;_efcg *_fdb .PdfObjectDictionary ;};var _ag =_f .MustCompile ("\u0025\u0025\u0045O\u0046");func (_cdf *fdfParser )parseName ()(_fdb .PdfObjectName ,error ){var _dgg _d .Buffer ;
_fed :=false ;for {_abd ,_bff :=_cdf ._afg .Peek (1);if _bff ==_fde .EOF {break ;};if _bff !=nil {return _fdb .PdfObjectName (_dgg .String ()),_bff ;};if !_fed {if _abd [0]=='/'{_fed =true ;_cdf ._afg .ReadByte ();}else if _abd [0]=='%'{_cdf .readComment ();
_cdf .skipSpaces ();}else {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_abd ,_abd );return _fdb .PdfObjectName (_dgg .String ()),_c .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_abd [0]);
};}else {if _fdb .IsWhiteSpace (_abd [0]){break ;}else if (_abd [0]=='/')||(_abd [0]=='[')||(_abd [0]=='(')||(_abd [0]==']')||(_abd [0]=='<')||(_abd [0]=='>'){break ;}else if _abd [0]=='#'{_efg ,_bee :=_cdf ._afg .Peek (3);if _bee !=nil {return _fdb .PdfObjectName (_dgg .String ()),_bee ;
};_cdf ._afg .Discard (3);_eda ,_bee :=_fc .DecodeString (string (_efg [1:3]));if _bee !=nil {return _fdb .PdfObjectName (_dgg .String ()),_bee ;};_dgg .Write (_eda );}else {_ad ,_ :=_cdf ._afg .ReadByte ();_dgg .WriteByte (_ad );};};};return _fdb .PdfObjectName (_dgg .String ()),nil ;
};func (_fg *fdfParser )setFileOffset (_afd int64 ){_fg ._bc .Seek (_afd ,_fde .SeekStart );_fg ._afg =_ec .NewReader (_fg ._bc );};func (_bddf *fdfParser )skipSpaces ()(int ,error ){_ca :=0;for {_ceb ,_dc :=_bddf ._afg .ReadByte ();if _dc !=nil {return 0,_dc ;
};if _fdb .IsWhiteSpace (_ceb ){_ca ++;}else {_bddf ._afg .UnreadByte ();break ;};};return _ca ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_fdb .PdfObject ,error ){_egd ,_egb :=fdf .FieldDictionaries ();if _egb !=nil {return nil ,_egb ;};var _cge []string ;for _cec :=range _egd {_cge =append (_cge ,_cec );};_fd .Strings (_cge );_bd :=map[string ]_fdb .PdfObject {};
for _ ,_ba :=range _cge {_cf :=_egd [_ba ];_ge :=_fdb .TraceToDirectObject (_cf .Get ("\u0056"));_bd [_ba ]=_ge ;};return _bd ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_de ,_ef :=_fca .Open (fdfPath );if _ef !=nil {return nil ,_ef ;};defer _de .Close ();return Load (_de );};func _cdg (_dga string )(_fdb .PdfObjectReference ,error ){_bbff :=_fdb .PdfObjectReference {};
_fgc :=_eed .FindStringSubmatch (_dga );if len (_fgc )< 3{_eb .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _bbff ,_g .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_bgd ,_bda :=_e .Atoi (_fgc [1]);if _bda !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fgc [1]);
return _bbff ,nil ;};_bbff .ObjectNumber =int64 (_bgd );_dde ,_bda :=_e .Atoi (_fgc [2]);if _bda !=nil {_eb .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fgc [2]);
return _bbff ,nil ;};_bbff .GenerationNumber =int64 (_dde );return _bbff ,nil ;};func (_gaa *fdfParser )parseDict ()(*_fdb .PdfObjectDictionary ,error ){_eb .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_aaa :=_fdb .MakeDict ();_eaf ,_ :=_gaa ._afg .ReadByte ();if _eaf !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_eaf ,_ =_gaa ._afg .ReadByte ();if _eaf !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_gaa .skipSpaces ();_gaa .skipComments ();_bcd ,_eae :=_gaa ._afg .Peek (2);if _eae !=nil {return nil ,_eae ;};_eb .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bcd ),string (_bcd ));
if (_bcd [0]=='>')&&(_bcd [1]=='>'){_eb .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_gaa ._afg .ReadByte ();_gaa ._afg .ReadByte ();break ;};_eb .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_da ,_eae :=_gaa .parseName ();_eb .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_da );if _eae !=nil {_eb .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_eae );
return nil ,_eae ;};if len (_da )> 4&&_da [len (_da )-4:]=="\u006e\u0075\u006c\u006c"{_cae :=_da [0:len (_da )-4];_eb .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_da );
_eb .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_cae );_gaa .skipSpaces ();_efcd ,_ :=_gaa ._afg .Peek (1);if _efcd [0]=='/'{_aaa .Set (_cae ,_fdb .MakeNull ());continue ;};};_gaa .skipSpaces ();
_abb ,_eae :=_gaa .parseObject ();if _eae !=nil {return nil ,_eae ;};_aaa .Set (_da ,_abb );_eb .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_da ,_abb .String ());};_eb .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _aaa ,nil ;};var _efc =_f .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");var _eed =_f .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");
func _cged (_bfa _fde .ReadSeeker )(*fdfParser ,error ){_bce :=&fdfParser {};_bce ._bc =_bfa ;_bce ._gf =map[int64 ]_fdb .PdfObject {};_ecf ,_fdd ,_cbg :=_bce .parseFdfVersion ();if _cbg !=nil {_eb .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_cbg );
return nil ,_cbg ;};_bce ._cdc =_ecf ;_bce ._beg =_fdd ;_cbg =_bce .parse ();return _bce ,_cbg ;};var _gdb =_f .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");var _ead =_f .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");


// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_fdb .PdfObjectDictionary ,error ){_gb :=map[string ]*_fdb .PdfObjectDictionary {};for _a :=0;_a < fdf ._eg .Len ();_a ++{_ac ,_cd :=_fdb .GetDict (fdf ._eg .Get (_a ));if _cd {_ea ,_ :=_fdb .GetString (_ac .Get ("\u0054"));
if _ea !=nil {_gb [_ea .Str ()]=_ac ;};};};return _gb ,nil ;};