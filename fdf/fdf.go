//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_be "bufio";_db "bytes";_bb "encoding/hex";_g "errors";_e "fmt";_ddc "github.com/unidoc/unipdf/v3/common";_a "github.com/unidoc/unipdf/v3/core";_eb "io";_dd "os";_d "regexp";_da "sort";_fa "strconv";_b "strings";);func (_gea *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_gea ._ada .Seek (0,_eb .SeekStart );
_gea ._bee =_be .NewReader (_gea ._ada );_dge :=20;_faa :=make ([]byte ,_dge );for {_gee ,_dbb :=_gea ._bee .ReadByte ();if _dbb !=nil {if _dbb ==_eb .EOF {break ;}else {return 0,0,_dbb ;};};if _a .IsDecimalDigit (_gee )&&_faa [_dge -1]=='.'&&_a .IsDecimalDigit (_faa [_dge -2])&&_faa [_dge -3]=='-'&&_faa [_dge -4]=='F'&&_faa [_dge -5]=='D'&&_faa [_dge -6]=='P'{_adfe :=int (_faa [_dge -2]-'0');
_gaa :=int (_gee -'0');return _adfe ,_gaa ,nil ;};_faa =append (_faa [1:_dge ],_gee );};return 0,0,_g .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_cge *fdfParser )parseObject ()(_a .PdfObject ,error ){_ddc .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_cge .skipSpaces ();for {_ecff ,_ddb :=_cge ._bee .Peek (2);if _ddb !=nil {return nil ,_ddb ;};_ddc .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_ecff ));if _ecff [0]=='/'{_bdd ,_dcf :=_cge .parseName ();
_ddc .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_bdd );return &_bdd ,_dcf ;}else if _ecff [0]=='('{_ddc .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _cge .parseString ();}else if _ecff [0]=='['{_ddc .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _cge .parseArray ();}else if (_ecff [0]=='<')&&(_ecff [1]=='<'){_ddc .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _cge .parseDict ();}else if _ecff [0]=='<'{_ddc .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _cge .parseHexString ();}else if _ecff [0]=='%'{_cge .readComment ();_cge .skipSpaces ();}else {_ddc .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_ecff ,_ =_cge ._bee .Peek (15);_gff :=string (_ecff );
_ddc .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_gff );if (len (_gff )> 3)&&(_gff [:4]=="\u006e\u0075\u006c\u006c"){_cde ,_ccd :=_cge .parseNull ();return &_cde ,_ccd ;}else if (len (_gff )> 4)&&(_gff [:5]=="\u0066\u0061\u006cs\u0065"){_ffe ,_cgc :=_cge .parseBool ();
return &_ffe ,_cgc ;}else if (len (_gff )> 3)&&(_gff [:4]=="\u0074\u0072\u0075\u0065"){_dbc ,_fag :=_cge .parseBool ();return &_dbc ,_fag ;};_bege :=_gg .FindStringSubmatch (_gff );if len (_bege )> 1{_ecff ,_ =_cge ._bee .ReadBytes ('R');_ddc .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_ecff [:]));
_fgf ,_gbb :=_eebg (string (_ecff ));return &_fgf ,_gbb ;};_faf :=_ddd .FindStringSubmatch (_gff );if len (_faf )> 1{_ddc .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _cge .parseNumber ();};_faf =_dfc .FindStringSubmatch (_gff );
if len (_faf )> 1{_ddc .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_ddc .Log .Trace ("\u0025\u0020\u0073",_faf );return _cge .parseNumber ();};_ddc .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_gff );
return nil ,_g .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func _bcc (_abd _eb .ReadSeeker )(*fdfParser ,error ){_fdfdc :=&fdfParser {};_fdfdc ._ada =_abd ;_fdfdc ._fcd =map[int64 ]_a .PdfObject {};_bbd ,_gffg ,_eee :=_fdfdc .parseFdfVersion ();if _eee !=nil {_ddc .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_eee );
return nil ,_eee ;};_fdfdc ._ggf =_bbd ;_fdfdc ._abb =_gffg ;_eee =_fdfdc .parse ();return _fdfdc ,_eee ;};func (_bga *fdfParser )readComment ()(string ,error ){var _gcg _db .Buffer ;_ ,_cdc :=_bga .skipSpaces ();if _cdc !=nil {return _gcg .String (),_cdc ;
};_cgb :=true ;for {_bfa ,_dddc :=_bga ._bee .Peek (1);if _dddc !=nil {_ddc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dddc .Error ());return _gcg .String (),_dddc ;};if _cgb &&_bfa [0]!='%'{return _gcg .String (),_g .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_cgb =false ;if (_bfa [0]!='\r')&&(_bfa [0]!='\n'){_agf ,_ :=_bga ._bee .ReadByte ();_gcg .WriteByte (_agf );}else {break ;};};return _gcg .String (),nil ;};func (_adg *fdfParser )parse ()error {_adg ._ada .Seek (0,_eb .SeekStart );_adg ._bee =_be .NewReader (_adg ._ada );
for {_adg .skipComments ();_ggg ,_ged :=_adg ._bee .Peek (20);if _ged !=nil {_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _ged ;};if _b .HasPrefix (string (_ggg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_adg ._bee .Discard (7);_adg .skipSpaces ();_adg .skipComments ();_abg ,_ :=_adg .parseDict ();_adg ._gc =_abg ;break ;};_bfb :=_ec .FindStringSubmatchIndex (string (_ggg ));
if len (_bfb )< 6{_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ggg ));
return _g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bgab ,_ged :=_adg .parseIndirectObject ();if _ged !=nil {return _ged ;};switch _fafa :=_bgab .(type ){case *_a .PdfIndirectObject :_adg ._fcd [_fafa .ObjectNumber ]=_fafa ;case *_a .PdfObjectStream :_adg ._fcd [_fafa .ObjectNumber ]=_fafa ;default:return _g .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ab ,_ea :=_dd .Open (fdfPath );if _ea !=nil {return nil ,_ea ;};defer _ab .Close ();return Load (_ab );};func (_dafg *fdfParser )parseDict ()(*_a .PdfObjectDictionary ,error ){_ddc .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_dbg :=_a .MakeDict ();_dfd ,_ :=_dafg ._bee .ReadByte ();if _dfd !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_dfd ,_ =_dafg ._bee .ReadByte ();if _dfd !='<'{return nil ,_g .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_dafg .skipSpaces ();_dafg .skipComments ();_aab ,_bac :=_dafg ._bee .Peek (2);if _bac !=nil {return nil ,_bac ;};_ddc .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_aab ),string (_aab ));
if (_aab [0]=='>')&&(_aab [1]=='>'){_ddc .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_dafg ._bee .ReadByte ();_dafg ._bee .ReadByte ();break ;};_ddc .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_baa ,_bac :=_dafg .parseName ();_ddc .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_baa );if _bac !=nil {_ddc .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_bac );
return nil ,_bac ;};if len (_baa )> 4&&_baa [len (_baa )-4:]=="\u006e\u0075\u006c\u006c"{_eac :=_baa [0:len (_baa )-4];_ddc .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_baa );
_ddc .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_eac );_dafg .skipSpaces ();_dgd ,_ :=_dafg ._bee .Peek (1);if _dgd [0]=='/'{_dbg .Set (_eac ,_a .MakeNull ());continue ;};};_dafg .skipSpaces ();
_cffg ,_bac :=_dafg .parseObject ();if _bac !=nil {return nil ,_bac ;};_dbg .Set (_baa ,_cffg );_ddc .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_baa ,_cffg .String ());};_ddc .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _dbg ,nil ;};

// Root returns the Root of the FDF document.
func (_dab *fdfParser )Root ()(*_a .PdfObjectDictionary ,error ){if _dab ._gc !=nil {if _fde ,_fdfd :=_dab .trace (_dab ._gc .Get ("\u0052\u006f\u006f\u0074")).(*_a .PdfObjectDictionary );_fdfd {if _dad ,_gce :=_dab .trace (_fde .Get ("\u0046\u0044\u0046")).(*_a .PdfObjectDictionary );
_gce {return _dad ,nil ;};};};var _dbac []int64 ;for _eg :=range _dab ._fcd {_dbac =append (_dbac ,_eg );};_da .Slice (_dbac ,func (_feg ,_eff int )bool {return _dbac [_feg ]< _dbac [_eff ]});for _ ,_bffc :=range _dbac {_egc :=_dab ._fcd [_bffc ];if _cbc ,_ffbe :=_dab .trace (_egc ).(*_a .PdfObjectDictionary );
_ffbe {if _bgg ,_cfg :=_dab .trace (_cbc .Get ("\u0046\u0044\u0046")).(*_a .PdfObjectDictionary );_cfg {return _bgg ,nil ;};};};return nil ,_g .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};var _ec =_d .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
var _gg =_d .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_dbff *fdfParser )trace (_gbab _a .PdfObject )_a .PdfObject {switch _dbd :=_gbab .(type ){case *_a .PdfObjectReference :_cbb ,_gdfe :=_dbff ._fcd [_dbd .ObjectNumber ].(*_a .PdfIndirectObject );
if _gdfe {return _cbb .PdfObject ;};_ddc .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_a .PdfIndirectObject :return _dbd .PdfObject ;};return _gbab ;};func (_fcb *fdfParser )parseHexString ()(*_a .PdfObjectString ,error ){_fcb ._bee .ReadByte ();
var _daf _db .Buffer ;for {_dcgd ,_agde :=_fcb ._bee .Peek (1);if _agde !=nil {return _a .MakeHexString (""),_agde ;};if _dcgd [0]=='>'{_fcb ._bee .ReadByte ();break ;};_fda ,_ :=_fcb ._bee .ReadByte ();if !_a .IsWhiteSpace (_fda ){_daf .WriteByte (_fda );
};};if _daf .Len ()%2==1{_daf .WriteRune ('0');};_dce ,_aeb :=_bb .DecodeString (_daf .String ());if _aeb !=nil {_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_daf .String ());
return _a .MakeHexString (""),nil ;};return _a .MakeHexString (string (_dce )),nil ;};func (_ece *fdfParser )parseName ()(_a .PdfObjectName ,error ){var _eceg _db .Buffer ;_adf :=false ;for {_eeb ,_eaa :=_ece ._bee .Peek (1);if _eaa ==_eb .EOF {break ;
};if _eaa !=nil {return _a .PdfObjectName (_eceg .String ()),_eaa ;};if !_adf {if _eeb [0]=='/'{_adf =true ;_ece ._bee .ReadByte ();}else if _eeb [0]=='%'{_ece .readComment ();_ece .skipSpaces ();}else {_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_eeb ,_eeb );
return _a .PdfObjectName (_eceg .String ()),_e .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_eeb [0]);};}else {if _a .IsWhiteSpace (_eeb [0]){break ;}else if (_eeb [0]=='/')||(_eeb [0]=='[')||(_eeb [0]=='(')||(_eeb [0]==']')||(_eeb [0]=='<')||(_eeb [0]=='>'){break ;
}else if _eeb [0]=='#'{_ae ,_ga :=_ece ._bee .Peek (3);if _ga !=nil {return _a .PdfObjectName (_eceg .String ()),_ga ;};_ece ._bee .Discard (3);_acg ,_ga :=_bb .DecodeString (string (_ae [1:3]));if _ga !=nil {return _a .PdfObjectName (_eceg .String ()),_ga ;
};_eceg .Write (_acg );}else {_gdg ,_ :=_ece ._bee .ReadByte ();_eceg .WriteByte (_gdg );};};};return _a .PdfObjectName (_eceg .String ()),nil ;};var _ddd =_d .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func _aeg (_ebbf string )(*fdfParser ,error ){_gcf :=fdfParser {};_fdc :=[]byte (_ebbf );_gbdf :=_db .NewReader (_fdc );_gcf ._ada =_gbdf ;_gcf ._fcd =map[int64 ]_a .PdfObject {};_gfb :=_be .NewReader (_gbdf );_gcf ._bee =_gfb ;_gcf ._beg =int64 (len (_ebbf ));
return &_gcf ,_gcf .parse ();};

// Load loads FDF form data from `r`.
func Load (r _eb .ReadSeeker )(*Data ,error ){_bg ,_ba :=_bcc (r );if _ba !=nil {return nil ,_ba ;};_ee ,_ba :=_bg .Root ();if _ba !=nil {return nil ,_ba ;};_gf ,_c :=_a .GetArray (_ee .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_c {return nil ,_g .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_fd :_gf ,_gb :_ee },nil ;};func (_dcd *fdfParser )skipSpaces ()(int ,error ){_bf :=0;for {_gdc ,_ef :=_dcd ._bee .ReadByte ();if _ef !=nil {return 0,_ef ;};if _a .IsWhiteSpace (_gdc ){_bf ++;}else {_dcd ._bee .UnreadByte ();break ;};};
return _bf ,nil ;};func (_agd *fdfParser )parseNumber ()(_a .PdfObject ,error ){return _a .ParseNumber (_agd ._bee )};type fdfParser struct{_ggf int ;_abb int ;_fcd map[int64 ]_a .PdfObject ;_ada _eb .ReadSeeker ;_bee *_be .Reader ;_beg int64 ;_gc *_a .PdfObjectDictionary ;
};func (_bbg *fdfParser )getFileOffset ()int64 {_dc ,_ :=_bbg ._ada .Seek (0,_eb .SeekCurrent );_dc -=int64 (_bbg ._bee .Buffered ());return _dc ;};func (_bae *fdfParser )parseBool ()(_a .PdfObjectBool ,error ){_aeba ,_ebcf :=_bae ._bee .Peek (4);if _ebcf !=nil {return _a .PdfObjectBool (false ),_ebcf ;
};if (len (_aeba )>=4)&&(string (_aeba [:4])=="\u0074\u0072\u0075\u0065"){_bae ._bee .Discard (4);return _a .PdfObjectBool (true ),nil ;};_aeba ,_ebcf =_bae ._bee .Peek (5);if _ebcf !=nil {return _a .PdfObjectBool (false ),_ebcf ;};if (len (_aeba )>=5)&&(string (_aeba [:5])=="\u0066\u0061\u006cs\u0065"){_bae ._bee .Discard (5);
return _a .PdfObjectBool (false ),nil ;};return _a .PdfObjectBool (false ),_g .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_daaf *fdfParser )seekToEOFMarker (_dfcg int64 )error {_bab :=int64 (0);
_ade :=int64 (1000);for _bab < _dfcg {if _dfcg <=(_ade +_bab ){_ade =_dfcg -_bab ;};_ ,_ecee :=_daaf ._ada .Seek (-_bab -_ade ,_eb .SeekEnd );if _ecee !=nil {return _ecee ;};_ceb :=make ([]byte ,_ade );_daaf ._ada .Read (_ceb );_ddc .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_ceb ));
_aadb :=_aa .FindAllStringIndex (string (_ceb ),-1);if _aadb !=nil {_gbaf :=_aadb [len (_aadb )-1];_ddc .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_aadb );_daaf ._ada .Seek (-_bab -_ade +int64 (_gbaf [0]),_eb .SeekEnd );return nil ;
};_ddc .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_bab +=_ade ;};_ddc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _g .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_agae *fdfParser )parseIndirectObject ()(_a .PdfObject ,error ){_cgba :=_a .PdfIndirectObject {};_ddc .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_ebd ,_gbd :=_agae ._bee .Peek (20);if _gbd !=nil {_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_cgba ,_gbd ;};_ddc .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_ebd ));_fdd :=_ec .FindStringSubmatchIndex (string (_ebd ));if len (_fdd )< 6{_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ebd ));
return &_cgba ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_agae ._bee .Discard (_fdd [0]);_ddc .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fdd );_bce :=_fdd [1]-_fdd [0];_bca :=make ([]byte ,_bce );_ ,_gbd =_agae .readAtLeast (_bca ,_bce );if _gbd !=nil {_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_gbd );
return nil ,_gbd ;};_ddc .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_bca );_bda :=_ec .FindStringSubmatch (string (_bca ));if len (_bda )< 3{_ddc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bca ));
return &_cgba ,_g .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_eea ,_ :=_fa .Atoi (_bda [1]);_dcfe ,_ :=_fa .Atoi (_bda [2]);_cgba .ObjectNumber =int64 (_eea );_cgba .GenerationNumber =int64 (_dcfe );for {_gcgc ,_aef :=_agae ._bee .Peek (2);if _aef !=nil {return &_cgba ,_aef ;};_ddc .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_gcgc ),string (_gcgc ));
if _a .IsWhiteSpace (_gcgc [0]){_agae .skipSpaces ();}else if _gcgc [0]=='%'{_agae .skipComments ();}else if (_gcgc [0]=='<')&&(_gcgc [1]=='<'){_ddc .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cgba .PdfObject ,_aef =_agae .parseDict ();
_ddc .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_aef );if _aef !=nil {return &_cgba ,_aef ;};_ddc .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_gcgc [0]=='/')||(_gcgc [0]=='(')||(_gcgc [0]=='[')||(_gcgc [0]=='<'){_cgba .PdfObject ,_aef =_agae .parseObject ();if _aef !=nil {return &_cgba ,_aef ;};_ddc .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _gcgc [0]=='e'{_fge ,_fdac :=_agae .readTextLine ();if _fdac !=nil {return nil ,_fdac ;};if len (_fge )>=6&&_fge [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _gcgc [0]=='s'{_gcgc ,_ =_agae ._bee .Peek (10);if string (_gcgc [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_bgb :=6;
if len (_gcgc )> 6{if _a .IsWhiteSpace (_gcgc [_bgb ])&&_gcgc [_bgb ]!='\r'&&_gcgc [_bgb ]!='\n'{_ddc .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_bgb ++;};if _gcgc [_bgb ]=='\r'{_bgb ++;if _gcgc [_bgb ]=='\n'{_bgb ++;};}else if _gcgc [_bgb ]=='\n'{_bgb ++;};};_agae ._bee .Discard (_bgb );_dcea ,_efg :=_cgba .PdfObject .(*_a .PdfObjectDictionary );if !_efg {return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_ddc .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_dcea );_beb ,_fce :=_dcea .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_a .PdfObjectInteger );if !_fce {return nil ,_g .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_adfd :=*_beb ;if _adfd < 0{return nil ,_g .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_adfd )> _agae ._beg {_ddc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_g .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_bgf :=make ([]byte ,_adfd );
_ ,_aef =_agae .readAtLeast (_bgf ,int (_adfd ));if _aef !=nil {_ddc .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_bgf ),_bgf );_ddc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_aef );
return nil ,_aef ;};_dfda :=_a .PdfObjectStream {};_dfda .Stream =_bgf ;_dfda .PdfObjectDictionary =_cgba .PdfObject .(*_a .PdfObjectDictionary );_dfda .ObjectNumber =_cgba .ObjectNumber ;_dfda .GenerationNumber =_cgba .GenerationNumber ;_agae .skipSpaces ();
_agae ._bee .Discard (9);_agae .skipSpaces ();return &_dfda ,nil ;};};_cgba .PdfObject ,_aef =_agae .parseObject ();return &_cgba ,_aef ;};};_ddc .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_cgba ,nil ;};func (_gdgg *fdfParser )parseArray ()(*_a .PdfObjectArray ,error ){_bffe :=_a .MakeArray ();_gdgg ._bee .ReadByte ();for {_gdgg .skipSpaces ();_edb ,_bcb :=_gdgg ._bee .Peek (1);if _bcb !=nil {return _bffe ,_bcb ;};if _edb [0]==']'{_gdgg ._bee .ReadByte ();
break ;};_agc ,_bcb :=_gdgg .parseObject ();if _bcb !=nil {return _bffe ,_bcb ;};_bffe .Append (_agc );};return _bffe ,nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_a .PdfObjectDictionary ,error ){_fc :=map[string ]*_a .PdfObjectDictionary {};for _ebe :=0;_ebe < fdf ._fd .Len ();_ebe ++{_cd ,_af :=_a .GetDict (fdf ._fd .Get (_ebe ));if _af {_ff ,_ :=_a .GetString (_cd .Get ("\u0054"));
if _ff !=nil {_fc [_ff .Str ()]=_cd ;};};};return _fc ,nil ;};var _dfc =_d .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
var _aa =_d .MustCompile ("\u0025\u0025\u0045O\u0046");var _gbe =_d .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_aad *fdfParser )skipComments ()error {if _ ,_caa :=_aad .skipSpaces ();_caa !=nil {return _caa ;
};_ggc :=true ;for {_fg ,_bba :=_aad ._bee .Peek (1);if _bba !=nil {_ddc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bba .Error ());return _bba ;};if _ggc &&_fg [0]!='%'{return nil ;};_ggc =false ;if (_fg [0]!='\r')&&(_fg [0]!='\n'){_aad ._bee .ReadByte ();
}else {break ;};};return _aad .skipComments ();};func (_df *fdfParser )setFileOffset (_bc int64 ){_df ._ada .Seek (_bc ,_eb .SeekStart );_df ._bee =_be .NewReader (_df ._ada );};func (_cdb *fdfParser )parseString ()(*_a .PdfObjectString ,error ){_cdb ._bee .ReadByte ();
var _dcge _db .Buffer ;_cce :=1;for {_fdb ,_bbc :=_cdb ._bee .Peek (1);if _bbc !=nil {return _a .MakeString (_dcge .String ()),_bbc ;};if _fdb [0]=='\\'{_cdb ._bee .ReadByte ();_ffb ,_aae :=_cdb ._bee .ReadByte ();if _aae !=nil {return _a .MakeString (_dcge .String ()),_aae ;
};if _a .IsOctalDigit (_ffb ){_bbb ,_dba :=_cdb ._bee .Peek (2);if _dba !=nil {return _a .MakeString (_dcge .String ()),_dba ;};var _bff []byte ;_bff =append (_bff ,_ffb );for _ ,_beae :=range _bbb {if _a .IsOctalDigit (_beae ){_bff =append (_bff ,_beae );
}else {break ;};};_cdb ._bee .Discard (len (_bff )-1);_ddc .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_bff );_cff ,_dba :=_fa .ParseUint (string (_bff ),8,32);if _dba !=nil {return _a .MakeString (_dcge .String ()),_dba ;
};_dcge .WriteByte (byte (_cff ));continue ;};switch _ffb {case 'n':_dcge .WriteRune ('\n');case 'r':_dcge .WriteRune ('\r');case 't':_dcge .WriteRune ('\t');case 'b':_dcge .WriteRune ('\b');case 'f':_dcge .WriteRune ('\f');case '(':_dcge .WriteRune ('(');
case ')':_dcge .WriteRune (')');case '\\':_dcge .WriteRune ('\\');};continue ;}else if _fdb [0]=='('{_cce ++;}else if _fdb [0]==')'{_cce --;if _cce ==0{_cdb ._bee .ReadByte ();break ;};};_ecf ,_ :=_cdb ._bee .ReadByte ();_dcge .WriteByte (_ecf );};return _a .MakeString (_dcge .String ()),nil ;
};

// Data represents forms data format (FDF) file data.
type Data struct{_gb *_a .PdfObjectDictionary ;_fd *_a .PdfObjectArray ;};func (_ecec *fdfParser )parseFdfVersion ()(int ,int ,error ){_ecec ._ada .Seek (0,_eb .SeekStart );_cea :=20;_aebf :=make ([]byte ,_cea );_ecec ._ada .Read (_aebf );_fdba :=_gbe .FindStringSubmatch (string (_aebf ));
if len (_fdba )< 3{_faga ,_eaf ,_gcgb :=_ecec .seekFdfVersionTopDown ();if _gcgb !=nil {_ddc .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_gcgb ;};return _faga ,_eaf ,nil ;};_bgc ,_aga :=_fa .Atoi (_fdba [1]);if _aga !=nil {return 0,0,_aga ;};_ded ,_aga :=_fa .Atoi (_fdba [2]);if _aga !=nil {return 0,0,_aga ;};_ddc .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_bgc ,_ded );
return _bgc ,_ded ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_a .PdfObject ,error ){_cg ,_gd :=fdf .FieldDictionaries ();if _gd !=nil {return nil ,_gd ;};var _ag []string ;for _bd :=range _cg {_ag =append (_ag ,_bd );};_da .Strings (_ag );_gbg :=map[string ]_a .PdfObject {};
for _ ,_gdf :=range _ag {_ad :=_cg [_gdf ];_gbgb :=_a .TraceToDirectObject (_ad .Get ("\u0056"));_gbg [_gdf ]=_gbgb ;};return _gbg ,nil ;};func _eebg (_ce string )(_a .PdfObjectReference ,error ){_ge :=_a .PdfObjectReference {};_fffd :=_gg .FindStringSubmatch (_ce );
if len (_fffd )< 3{_ddc .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _ge ,_g .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_cffb ,_ebb :=_fa .Atoi (_fffd [1]);if _ebb !=nil {_ddc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fffd [1]);
return _ge ,nil ;};_ge .ObjectNumber =int64 (_cffb );_cgg ,_ebb :=_fa .Atoi (_fffd [2]);if _ebb !=nil {_ddc .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fffd [2]);
return _ge ,nil ;};_ge .GenerationNumber =int64 (_cgg );return _ge ,nil ;};func (_dfa *fdfParser )readTextLine ()(string ,error ){var _bde _db .Buffer ;for {_cf ,_ffa :=_dfa ._bee .Peek (1);if _ffa !=nil {_ddc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ffa .Error ());
return _bde .String (),_ffa ;};if (_cf [0]!='\r')&&(_cf [0]!='\n'){_gde ,_ :=_dfa ._bee .ReadByte ();_bde .WriteByte (_gde );}else {break ;};};return _bde .String (),nil ;};func (_gba *fdfParser )parseNull ()(_a .PdfObjectNull ,error ){_ ,_dcgg :=_gba ._bee .Discard (4);
return _a .PdfObjectNull {},_dcgg ;};func (_ca *fdfParser )readAtLeast (_de []byte ,_gfd int )(int ,error ){_fe :=_gfd ;_cda :=0;_cae :=0;for _fe > 0{_daa ,_ed :=_ca ._bee .Read (_de [_cda :]);if _ed !=nil {_ddc .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_daa ,_cae ,_ed .Error ());
return _cda ,_g .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_cae ++;_cda +=_daa ;_fe -=_daa ;};return _cda ,nil ;};