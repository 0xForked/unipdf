//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_b "bufio";_cd "bytes";_f "encoding/hex";_a "errors";_gg "fmt";_ad "github.com/unidoc/unipdf/v3/common";_d "github.com/unidoc/unipdf/v3/core";_ga "io";_ac "os";_e "regexp";_cg "sort";_g "strconv";_ca "strings";);

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_d .PdfObject ,error ){_fc ,_adg :=fdf .FieldDictionaries ();if _adg !=nil {return nil ,_adg ;};var _gd []string ;for _gb :=range _fc {_gd =append (_gd ,_gb );};_cg .Strings (_gd );_gcc :=map[string ]_d .PdfObject {};
for _ ,_ea :=range _gd {_ace :=_fc [_ea ];_cc :=_d .TraceToDirectObject (_ace .Get ("\u0056"));_gcc [_ea ]=_cc ;};return _gcc ,nil ;};func (_gcf *fdfParser )readTextLine ()(string ,error ){var _caec _cd .Buffer ;for {_ceec ,_abd :=_gcf ._cae .Peek (1);
if _abd !=nil {_ad .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_abd .Error ());return _caec .String (),_abd ;};if (_ceec [0]!='\r')&&(_ceec [0]!='\n'){_bg ,_ :=_gcf ._cae .ReadByte ();_caec .WriteByte (_bg );}else {break ;};};return _caec .String (),nil ;
};func (_dbb *fdfParser )skipComments ()error {if _ ,_fgg :=_dbb .skipSpaces ();_fgg !=nil {return _fgg ;};_gf :=true ;for {_gce ,_caea :=_dbb ._cae .Peek (1);if _caea !=nil {_ad .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_caea .Error ());
return _caea ;};if _gf &&_gce [0]!='%'{return nil ;};_gf =false ;if (_gce [0]!='\r')&&(_gce [0]!='\n'){_dbb ._cae .ReadByte ();}else {break ;};};return _dbb .skipComments ();};var _ba =_e .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_gfb *fdfParser )readComment ()(string ,error ){var _bae _cd .Buffer ;_ ,_eeeg :=_gfb .skipSpaces ();if _eeeg !=nil {return _bae .String (),_eeeg ;};_fcf :=true ;for {_dea ,_acf :=_gfb ._cae .Peek (1);if _acf !=nil {_ad .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_acf .Error ());
return _bae .String (),_acf ;};if _fcf &&_dea [0]!='%'{return _bae .String (),_a .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_fcf =false ;if (_dea [0]!='\r')&&(_dea [0]!='\n'){_fcfc ,_ :=_gfb ._cae .ReadByte ();
_bae .WriteByte (_fcfc );}else {break ;};};return _bae .String (),nil ;};func (_adgg *fdfParser )parseNull ()(_d .PdfObjectNull ,error ){_ ,_dfe :=_adgg ._cae .Discard (4);return _d .PdfObjectNull {},_dfe ;};

// Load loads FDF form data from `r`.
func Load (r _ga .ReadSeeker )(*Data ,error ){_ce ,_da :=_deb (r );if _da !=nil {return nil ,_da ;};_fg ,_da :=_ce .Root ();if _da !=nil {return nil ,_da ;};_db ,_cde :=_d .GetArray (_fg .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_cde {return nil ,_a .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_bb :_db ,_cdf :_fg },nil ;};func (_dbc *fdfParser )parseIndirectObject ()(_d .PdfObject ,error ){_abbd :=_d .PdfIndirectObject {};_ad .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_dcb ,_ceb :=_dbc ._cae .Peek (20);if _ceb !=nil {_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_abbd ,_ceb ;};_ad .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_dcb ));_gdgg :=_ba .FindStringSubmatchIndex (string (_dcb ));if len (_gdgg )< 6{_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dcb ));
return &_abbd ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dbc ._cae .Discard (_gdgg [0]);_ad .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_gdgg );_fag :=_gdgg [1]-_gdgg [0];_faee :=make ([]byte ,_fag );_ ,_ceb =_dbc .readAtLeast (_faee ,_fag );if _ceb !=nil {_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_ceb );
return nil ,_ceb ;};_ad .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_faee );_eff :=_ba .FindStringSubmatch (string (_faee ));if len (_eff )< 3{_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_faee ));
return &_abbd ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fbb ,_ :=_g .Atoi (_eff [1]);_fafc ,_ :=_g .Atoi (_eff [2]);_abbd .ObjectNumber =int64 (_fbb );_abbd .GenerationNumber =int64 (_fafc );for {_cff ,_gdf :=_dbc ._cae .Peek (2);if _gdf !=nil {return &_abbd ,_gdf ;};_ad .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cff ),string (_cff ));
if _d .IsWhiteSpace (_cff [0]){_dbc .skipSpaces ();}else if _cff [0]=='%'{_dbc .skipComments ();}else if (_cff [0]=='<')&&(_cff [1]=='<'){_ad .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_abbd .PdfObject ,_gdf =_dbc .parseDict ();
_ad .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_gdf );if _gdf !=nil {return &_abbd ,_gdf ;};_ad .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_cff [0]=='/')||(_cff [0]=='(')||(_cff [0]=='[')||(_cff [0]=='<'){_abbd .PdfObject ,_gdf =_dbc .parseObject ();if _gdf !=nil {return &_abbd ,_gdf ;};_ad .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _cff [0]=='e'{_ccc ,_bdca :=_dbc .readTextLine ();if _bdca !=nil {return nil ,_bdca ;};if len (_ccc )>=6&&_ccc [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _cff [0]=='s'{_cff ,_ =_dbc ._cae .Peek (10);if string (_cff [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_add :=6;
if len (_cff )> 6{if _d .IsWhiteSpace (_cff [_add ])&&_cff [_add ]!='\r'&&_cff [_add ]!='\n'{_ad .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_add ++;};if _cff [_add ]=='\r'{_add ++;if _cff [_add ]=='\n'{_add ++;};}else if _cff [_add ]=='\n'{_add ++;};};_dbc ._cae .Discard (_add );_edbb ,_gbb :=_abbd .PdfObject .(*_d .PdfObjectDictionary );if !_gbb {return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_ad .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_edbb );_efg ,_ggae :=_edbb .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_d .PdfObjectInteger );if !_ggae {return nil ,_a .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_daaa :=*_efg ;if _daaa < 0{return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_daaa )> _dbc ._gef {_ad .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_a .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_ebb :=make ([]byte ,_daaa );
_ ,_gdf =_dbc .readAtLeast (_ebb ,int (_daaa ));if _gdf !=nil {_ad .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_ebb ),_ebb );_ad .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gdf );
return nil ,_gdf ;};_bge :=_d .PdfObjectStream {};_bge .Stream =_ebb ;_bge .PdfObjectDictionary =_abbd .PdfObject .(*_d .PdfObjectDictionary );_bge .ObjectNumber =_abbd .ObjectNumber ;_bge .GenerationNumber =_abbd .GenerationNumber ;_dbc .skipSpaces ();
_dbc ._cae .Discard (9);_dbc .skipSpaces ();return &_bge ,nil ;};};_abbd .PdfObject ,_gdf =_dbc .parseObject ();return &_abbd ,_gdf ;};};_ad .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_abbd ,nil ;};func (_fff *fdfParser )seekToEOFMarker (_beg int64 )error {_gdg :=int64 (0);_ae :=int64 (1000);for _gdg < _beg {if _beg <=(_ae +_gdg ){_ae =_beg -_gdg ;};_ ,_fbg :=_fff ._de .Seek (-_gdg -_ae ,_ga .SeekEnd );if _fbg !=nil {return _fbg ;
};_fceg :=make ([]byte ,_ae );_fff ._de .Read (_fceg );_ad .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_fceg ));_daac :=_ff .FindAllStringIndex (string (_fceg ),-1);
if _daac !=nil {_fbc :=_daac [len (_daac )-1];_ad .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_daac );_fff ._de .Seek (-_gdg -_ae +int64 (_fbc [0]),_ga .SeekEnd );return nil ;};_ad .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_gdg +=_ae ;};_ad .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _a .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func _aag (_eca string )(_d .PdfObjectReference ,error ){_bbc :=_d .PdfObjectReference {};_aga :=_faf .FindStringSubmatch (_eca );if len (_aga )< 3{_ad .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _bbc ,_a .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_geb ,_cddf :=_g .Atoi (_aga [1]);if _cddf !=nil {_ad .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_aga [1]);
return _bbc ,nil ;};_bbc .ObjectNumber =int64 (_geb );_cca ,_cddf :=_g .Atoi (_aga [2]);if _cddf !=nil {_ad .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_aga [2]);
return _bbc ,nil ;};_bbc .GenerationNumber =int64 (_cca );return _bbc ,nil ;};func (_gadc *fdfParser )getFileOffset ()int64 {_ee ,_ :=_gadc ._de .Seek (0,_ga .SeekCurrent );_ee -=int64 (_gadc ._cae .Buffered ());return _ee ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ef ,_gc :=_ac .Open (fdfPath );if _gc !=nil {return nil ,_gc ;};defer _ef .Close ();return Load (_ef );};func (_fdf *fdfParser )parseHexString ()(*_d .PdfObjectString ,error ){_fdf ._cae .ReadByte ();
var _dgge _cd .Buffer ;for {_eea ,_bcc :=_fdf ._cae .Peek (1);if _bcc !=nil {return _d .MakeHexString (""),_bcc ;};if _eea [0]=='>'{_fdf ._cae .ReadByte ();break ;};_ede ,_ :=_fdf ._cae .ReadByte ();if !_d .IsWhiteSpace (_ede ){_dgge .WriteByte (_ede );
};};if _dgge .Len ()%2==1{_dgge .WriteRune ('0');};_fce ,_fae :=_f .DecodeString (_dgge .String ());if _fae !=nil {_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_dgge .String ());
return _d .MakeHexString (""),nil ;};return _d .MakeHexString (string (_fce )),nil ;};func (_dgg *fdfParser )skipSpaces ()(int ,error ){_cee :=0;for {_eb ,_dcd :=_dgg ._cae .ReadByte ();if _dcd !=nil {return 0,_dcd ;};if _d .IsWhiteSpace (_eb ){_cee ++;
}else {_dgg ._cae .UnreadByte ();break ;};};return _cee ,nil ;};func (_dbe *fdfParser )parseBool ()(_d .PdfObjectBool ,error ){_caa ,_eeg :=_dbe ._cae .Peek (4);if _eeg !=nil {return _d .PdfObjectBool (false ),_eeg ;};if (len (_caa )>=4)&&(string (_caa [:4])=="\u0074\u0072\u0075\u0065"){_dbe ._cae .Discard (4);
return _d .PdfObjectBool (true ),nil ;};_caa ,_eeg =_dbe ._cae .Peek (5);if _eeg !=nil {return _d .PdfObjectBool (false ),_eeg ;};if (len (_caa )>=5)&&(string (_caa [:5])=="\u0066\u0061\u006cs\u0065"){_dbe ._cae .Discard (5);return _d .PdfObjectBool (false ),nil ;
};return _d .PdfObjectBool (false ),_a .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_dfac *fdfParser )parseString ()(*_d .PdfObjectString ,error ){_dfac ._cae .ReadByte ();
var _abb _cd .Buffer ;_eg :=1;for {_ag ,_abf :=_dfac ._cae .Peek (1);if _abf !=nil {return _d .MakeString (_abb .String ()),_abf ;};if _ag [0]=='\\'{_dfac ._cae .ReadByte ();_fba ,_ceea :=_dfac ._cae .ReadByte ();if _ceea !=nil {return _d .MakeString (_abb .String ()),_ceea ;
};if _d .IsOctalDigit (_fba ){_dggb ,_dcc :=_dfac ._cae .Peek (2);if _dcc !=nil {return _d .MakeString (_abb .String ()),_dcc ;};var _efb []byte ;_efb =append (_efb ,_fba );for _ ,_aa :=range _dggb {if _d .IsOctalDigit (_aa ){_efb =append (_efb ,_aa );
}else {break ;};};_dfac ._cae .Discard (len (_efb )-1);_ad .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_efb );_dfd ,_dcc :=_g .ParseUint (string (_efb ),8,32);if _dcc !=nil {return _d .MakeString (_abb .String ()),_dcc ;
};_abb .WriteByte (byte (_dfd ));continue ;};switch _fba {case 'n':_abb .WriteRune ('\n');case 'r':_abb .WriteRune ('\r');case 't':_abb .WriteRune ('\t');case 'b':_abb .WriteRune ('\b');case 'f':_abb .WriteRune ('\f');case '(':_abb .WriteRune ('(');case ')':_abb .WriteRune (')');
case '\\':_abb .WriteRune ('\\');};continue ;}else if _ag [0]=='('{_eg ++;}else if _ag [0]==')'{_eg --;if _eg ==0{_dfac ._cae .ReadByte ();break ;};};_bcd ,_ :=_dfac ._cae .ReadByte ();_abb .WriteByte (_bcd );};return _d .MakeString (_abb .String ()),nil ;
};var _ab =_e .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");

// Root returns the Root of the FDF document.
func (_ccec *fdfParser )Root ()(*_d .PdfObjectDictionary ,error ){if _ccec ._adf !=nil {if _cbe ,_ebc :=_ccec .trace (_ccec ._adf .Get ("\u0052\u006f\u006f\u0074")).(*_d .PdfObjectDictionary );_ebc {if _gbd ,_dgb :=_ccec .trace (_cbe .Get ("\u0046\u0044\u0046")).(*_d .PdfObjectDictionary );
_dgb {return _gbd ,nil ;};};};var _fdfa []int64 ;for _daf :=range _ccec ._cf {_fdfa =append (_fdfa ,_daf );};_cg .Slice (_fdfa ,func (_bcde ,_acfc int )bool {return _fdfa [_bcde ]< _fdfa [_acfc ]});for _ ,_gdff :=range _fdfa {_dae :=_ccec ._cf [_gdff ];
if _bbbb ,_bef :=_ccec .trace (_dae ).(*_d .PdfObjectDictionary );_bef {if _egcg ,_edfb :=_ccec .trace (_bbbb .Get ("\u0046\u0044\u0046")).(*_d .PdfObjectDictionary );_edfb {return _egcg ,nil ;};};};return nil ,_a .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func _deb (_facc _ga .ReadSeeker )(*fdfParser ,error ){_efee :=&fdfParser {};_efee ._de =_facc ;_efee ._cf =map[int64 ]_d .PdfObject {};_ggd ,_acde ,_dfec :=_efee .parseFdfVersion ();if _dfec !=nil {_ad .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_dfec );
return nil ,_dfec ;};_efee ._dg =_ggd ;_efee ._efc =_acde ;_dfec =_efee .parse ();return _efee ,_dfec ;};type fdfParser struct{_dg int ;_efc int ;_cf map[int64 ]_d .PdfObject ;_de _ga .ReadSeeker ;_cae *_b .Reader ;_gef int64 ;_adf *_d .PdfObjectDictionary ;
};var _efd =_e .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_bdbg *fdfParser )trace (_aae _d .PdfObject )_d .PdfObject {switch _dgde :=_aae .(type ){case *_d .PdfObjectReference :_afe ,_fcc :=_bdbg ._cf [_dgde .ObjectNumber ].(*_d .PdfIndirectObject );
if _fcc {return _afe .PdfObject ;};_ad .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_d .PdfIndirectObject :return _dgde .PdfObject ;};return _aae ;};func (_cdd *fdfParser )parseArray ()(*_d .PdfObjectArray ,error ){_adgd :=_d .MakeArray ();
_cdd ._cae .ReadByte ();for {_cdd .skipSpaces ();_cce ,_edf :=_cdd ._cae .Peek (1);if _edf !=nil {return _adgd ,_edf ;};if _cce [0]==']'{_cdd ._cae .ReadByte ();break ;};_cef ,_edf :=_cdd .parseObject ();if _edf !=nil {return _adgd ,_edf ;};_adgd .Append (_cef );
};return _adgd ,nil ;};var _ff =_e .MustCompile ("\u0025\u0025\u0045O\u0046");

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_d .PdfObjectDictionary ,error ){_gae :=map[string ]*_d .PdfObjectDictionary {};for _dd :=0;_dd < fdf ._bb .Len ();_dd ++{_cdc ,_gga :=_d .GetDict (fdf ._bb .Get (_dd ));if _gga {_be ,_ :=_d .GetString (_cdc .Get ("\u0054"));
if _be !=nil {_gae [_be .Str ()]=_cdc ;};};};return _gae ,nil ;};func (_gfd *fdfParser )parse ()error {_gfd ._de .Seek (0,_ga .SeekStart );_gfd ._cae =_b .NewReader (_gfd ._de );for {_gfd .skipComments ();_bfg ,_bgg :=_gfd ._cae .Peek (20);if _bgg !=nil {_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _bgg ;};if _ca .HasPrefix (string (_bfg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_gfd ._cae .Discard (7);_gfd .skipSpaces ();_gfd .skipComments ();_eae ,_ :=_gfd .parseDict ();_gfd ._adf =_eae ;break ;};_caee :=_ba .FindStringSubmatchIndex (string (_bfg ));
if len (_caee )< 6{_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bfg ));
return _a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_gea ,_bgg :=_gfd .parseIndirectObject ();if _bgg !=nil {return _bgg ;};switch _gadd :=_gea .(type ){case *_d .PdfIndirectObject :_gfd ._cf [_gadd .ObjectNumber ]=_gadd ;case *_d .PdfObjectStream :_gfd ._cf [_gadd .ObjectNumber ]=_gadd ;default:return _a .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_cdf *_d .PdfObjectDictionary ;_bb *_d .PdfObjectArray ;};func (_fd *fdfParser )parseName ()(_d .PdfObjectName ,error ){var _bdf _cd .Buffer ;_bbbd :=false ;for {_caf ,_beb :=_fd ._cae .Peek (1);if _beb ==_ga .EOF {break ;};if _beb !=nil {return _d .PdfObjectName (_bdf .String ()),_beb ;
};if !_bbbd {if _caf [0]=='/'{_bbbd =true ;_fd ._cae .ReadByte ();}else if _caf [0]=='%'{_fd .readComment ();_fd .skipSpaces ();}else {_ad .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_caf ,_caf );
return _d .PdfObjectName (_bdf .String ()),_gg .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_caf [0]);};}else {if _d .IsWhiteSpace (_caf [0]){break ;}else if (_caf [0]=='/')||(_caf [0]=='[')||(_caf [0]=='(')||(_caf [0]==']')||(_caf [0]=='<')||(_caf [0]=='>'){break ;
}else if _caf [0]=='#'{_edb ,_bde :=_fd ._cae .Peek (3);if _bde !=nil {return _d .PdfObjectName (_bdf .String ()),_bde ;};_fd ._cae .Discard (3);_dcdc ,_bde :=_f .DecodeString (string (_edb [1:3]));if _bde !=nil {return _d .PdfObjectName (_bdf .String ()),_bde ;
};_bdf .Write (_dcdc );}else {_bbga ,_ :=_fd ._cae .ReadByte ();_bdf .WriteByte (_bbga );};};};return _d .PdfObjectName (_bdf .String ()),nil ;};func (_cec *fdfParser )parseObject ()(_d .PdfObject ,error ){_ad .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_cec .skipSpaces ();for {_egc ,_fga :=_cec ._cae .Peek (2);if _fga !=nil {return nil ,_fga ;};_ad .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_egc ));if _egc [0]=='/'{_fe ,_ffe :=_cec .parseName ();
_ad .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_fe );return &_fe ,_ffe ;}else if _egc [0]=='('{_ad .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _cec .parseString ();}else if _egc [0]=='['{_ad .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _cec .parseArray ();}else if (_egc [0]=='<')&&(_egc [1]=='<'){_ad .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _cec .parseDict ();}else if _egc [0]=='<'{_ad .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _cec .parseHexString ();}else if _egc [0]=='%'{_cec .readComment ();_cec .skipSpaces ();}else {_ad .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_egc ,_ =_cec ._cae .Peek (15);_cbd :=string (_egc );
_ad .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_cbd );if (len (_cbd )> 3)&&(_cbd [:4]=="\u006e\u0075\u006c\u006c"){_ggb ,_bee :=_cec .parseNull ();return &_ggb ,_bee ;}else if (len (_cbd )> 4)&&(_cbd [:5]=="\u0066\u0061\u006cs\u0065"){_bdb ,_dgd :=_cec .parseBool ();
return &_bdb ,_dgd ;}else if (len (_cbd )> 3)&&(_cbd [:4]=="\u0074\u0072\u0075\u0065"){_dcf ,_fgc :=_cec .parseBool ();return &_dcf ,_fgc ;};_af :=_faf .FindStringSubmatch (_cbd );if len (_af )> 1{_egc ,_ =_cec ._cae .ReadBytes ('R');_ad .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_egc [:]));
_ega ,_fgf :=_aag (string (_egc ));return &_ega ,_fgf ;};_fca :=_ab .FindStringSubmatch (_cbd );if len (_fca )> 1{_ad .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _cec .parseNumber ();};_fca =_cb .FindStringSubmatch (_cbd );
if len (_fca )> 1{_ad .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_ad .Log .Trace ("\u0025\u0020\u0073",_fca );return _cec .parseNumber ();};_ad .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_cbd );
return nil ,_a .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};var _faf =_e .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_acb *fdfParser )setFileOffset (_bf int64 ){_acb ._de .Seek (_bf ,_ga .SeekStart );_acb ._cae =_b .NewReader (_acb ._de );
};func _afg (_bff string )(*fdfParser ,error ){_eeb :=fdfParser {};_cdea :=[]byte (_bff );_feb :=_cd .NewReader (_cdea );_eeb ._de =_feb ;_eeb ._cf =map[int64 ]_d .PdfObject {};_dac :=_b .NewReader (_feb );_eeb ._cae =_dac ;_eeb ._gef =int64 (len (_bff ));
return &_eeb ,_eeb .parse ();};var _cb =_e .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");func (_bec *fdfParser )parseDict ()(*_d .PdfObjectDictionary ,error ){_ad .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_caab :=_d .MakeDict ();_fdfg ,_ :=_bec ._cae .ReadByte ();if _fdfg !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_fdfg ,_ =_bec ._cae .ReadByte ();if _fdfg !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_bec .skipSpaces ();_bec .skipComments ();_edbd ,_cfg :=_bec ._cae .Peek (2);if _cfg !=nil {return nil ,_cfg ;};_ad .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_edbd ),string (_edbd ));
if (_edbd [0]=='>')&&(_edbd [1]=='>'){_ad .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_bec ._cae .ReadByte ();_bec ._cae .ReadByte ();break ;};_ad .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_gfg ,_cfg :=_bec .parseName ();_ad .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_gfg );if _cfg !=nil {_ad .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_cfg );
return nil ,_cfg ;};if len (_gfg )> 4&&_gfg [len (_gfg )-4:]=="\u006e\u0075\u006c\u006c"{_adbb :=_gfg [0:len (_gfg )-4];_ad .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_gfg );
_ad .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_adbb );_bec .skipSpaces ();_bbbde ,_ :=_bec ._cae .Peek (1);if _bbbde [0]=='/'{_caab .Set (_adbb ,_d .MakeNull ());continue ;};
};_bec .skipSpaces ();_fac ,_cfg :=_bec .parseObject ();if _cfg !=nil {return nil ,_cfg ;};_caab .Set (_gfg ,_fac );_ad .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_gfg ,_fac .String ());};_ad .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _caab ,nil ;};func (_cdg *fdfParser )parseNumber ()(_d .PdfObject ,error ){return _d .ParseNumber (_cdg ._cae )};func (_cgd *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_cgd ._de .Seek (0,_ga .SeekStart );_cgd ._cae =_b .NewReader (_cgd ._de );
_eba :=20;_afc :=make ([]byte ,_eba );for {_daeg ,_cdb :=_cgd ._cae .ReadByte ();if _cdb !=nil {if _cdb ==_ga .EOF {break ;}else {return 0,0,_cdb ;};};if _d .IsDecimalDigit (_daeg )&&_afc [_eba -1]=='.'&&_d .IsDecimalDigit (_afc [_eba -2])&&_afc [_eba -3]=='-'&&_afc [_eba -4]=='F'&&_afc [_eba -5]=='D'&&_afc [_eba -6]=='P'{_fec :=int (_afc [_eba -2]-'0');
_cefb :=int (_daeg -'0');return _fec ,_cefb ,nil ;};_afc =append (_afc [1:_eba ],_daeg );};return 0,0,_a .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_acd *fdfParser )readAtLeast (_ed []byte ,_dc int )(int ,error ){_bbg :=_dc ;
_adb :=0;_df :=0;for _bbg > 0{_gad ,_dfa :=_acd ._cae .Read (_ed [_adb :]);if _dfa !=nil {_ad .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_gad ,_df ,_dfa .Error ());
return _adb ,_a .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_df ++;_adb +=_gad ;_bbg -=_gad ;};return _adb ,nil ;};func (_bfa *fdfParser )parseFdfVersion ()(int ,int ,error ){_bfa ._de .Seek (0,_ga .SeekStart );
_gee :=20;_bdc :=make ([]byte ,_gee );_bfa ._de .Read (_bdc );_egg :=_efd .FindStringSubmatch (string (_bdc ));if len (_egg )< 3{_dee ,_egf ,_bded :=_bfa .seekFdfVersionTopDown ();if _bded !=nil {_ad .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_bded ;};return _dee ,_egf ,nil ;};_dab ,_cgc :=_g .Atoi (_egg [1]);if _cgc !=nil {return 0,0,_cgc ;};_ced ,_cgc :=_g .Atoi (_egg [2]);if _cgc !=nil {return 0,0,_cgc ;};_ad .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_dab ,_ced );
return _dab ,_ced ,nil ;};