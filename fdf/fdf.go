//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_c "bufio";_gg "bytes";_b "encoding/hex";_d "errors";_fa "fmt";_af "github.com/unidoc/unipdf/v3/common";_a "github.com/unidoc/unipdf/v3/core";_ec "io";_ea "os";_e "regexp";_dd "sort";_ga "strconv";_f "strings";);

// Load loads FDF form data from `r`.
func Load (r _ec .ReadSeeker )(*Data ,error ){_de ,_ddg :=_acd (r );if _ddg !=nil {return nil ,_ddg ;};_da ,_ddg :=_de .Root ();if _ddg !=nil {return nil ,_ddg ;};_cc ,_ff :=_a .GetArray (_da .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ff {return nil ,_d .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_ed :_cc ,_be :_da },nil ;};func (_cga *fdfParser )readTextLine ()(string ,error ){var _feg _gg .Buffer ;for {_fcb ,_fad :=_cga ._bf .Peek (1);if _fad !=nil {_af .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fad .Error ());
return _feg .String (),_fad ;};if (_fcb [0]!='\r')&&(_fcb [0]!='\n'){_ffg ,_ :=_cga ._bf .ReadByte ();_feg .WriteByte (_ffg );}else {break ;};};return _feg .String (),nil ;};func _gcc (_ecc string )(_a .PdfObjectReference ,error ){_gfab :=_a .PdfObjectReference {};
_cfc :=_fe .FindStringSubmatch (_ecc );if len (_cfc )< 3{_af .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _gfab ,_d .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_ffb ,_bc :=_ga .Atoi (_cfc [1]);if _bc !=nil {_af .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_cfc [1]);
return _gfab ,nil ;};_gfab .ObjectNumber =int64 (_ffb );_edgb ,_bc :=_ga .Atoi (_cfc [2]);if _bc !=nil {_af .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_cfc [2]);
return _gfab ,nil ;};_gfab .GenerationNumber =int64 (_edgb );return _gfab ,nil ;};func (_ba *fdfParser )skipComments ()error {if _ ,_ggd :=_ba .skipSpaces ();_ggd !=nil {return _ggd ;};_dc :=true ;for {_bg ,_dg :=_ba ._bf .Peek (1);if _dg !=nil {_af .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dg .Error ());
return _dg ;};if _dc &&_bg [0]!='%'{return nil ;};_dc =false ;if (_bg [0]!='\r')&&(_bg [0]!='\n'){_ba ._bf .ReadByte ();}else {break ;};};return _ba .skipComments ();};func (_bd *fdfParser )readAtLeast (_fb []byte ,_fbd int )(int ,error ){_df :=_fbd ;_fbe :=0;
_fag :=0;for _df > 0{_aae ,_faa :=_bd ._bf .Read (_fb [_fbe :]);if _faa !=nil {_af .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_aae ,_fag ,_faa .Error ());
return _fbe ,_d .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_fag ++;_fbe +=_aae ;_df -=_aae ;};return _fbe ,nil ;};var _fd =_e .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");
func (_fbc *fdfParser )getFileOffset ()int64 {_gab ,_ :=_fbc ._ae .Seek (0,_ec .SeekCurrent );_gab -=int64 (_fbc ._bf .Buffered ());return _gab ;};var _fdg =_e .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
type fdfParser struct{_afe int ;_daf int ;_cgb map[int64 ]_a .PdfObject ;_ae _ec .ReadSeeker ;_bf *_c .Reader ;_ffa int64 ;_ffd *_a .PdfObjectDictionary ;};func (_cdf *fdfParser )seekToEOFMarker (_acb int64 )error {_cgae :=int64 (0);_gbg :=int64 (1000);
for _cgae < _acb {if _acb <=(_gbg +_cgae ){_gbg =_acb -_cgae ;};_ ,_egad :=_cdf ._ae .Seek (-_cgae -_gbg ,_ec .SeekEnd );if _egad !=nil {return _egad ;};_dfee :=make ([]byte ,_gbg );_cdf ._ae .Read (_dfee );_af .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_dfee ));
_gdda :=_cf .FindAllStringIndex (string (_dfee ),-1);if _gdda !=nil {_afa :=_gdda [len (_gdda )-1];_af .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gdda );_cdf ._ae .Seek (-_cgae -_gbg +int64 (_afa [0]),_ec .SeekEnd );return nil ;};
_af .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_cgae +=_gbg ;};_af .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _d .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_gbc *fdfParser )parseFdfVersion ()(int ,int ,error ){_gbc ._ae .Seek (0,_ec .SeekStart );_fbf :=20;_cde :=make ([]byte ,_fbf );_gbc ._ae .Read (_cde );_cee :=_fd .FindStringSubmatch (string (_cde ));if len (_cee )< 3{_deg ,_egg ,_gddd :=_gbc .seekFdfVersionTopDown ();
if _gddd !=nil {_af .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_gddd ;
};return _deg ,_egg ,nil ;};_bbg ,_fda :=_ga .Atoi (_cee [1]);if _fda !=nil {return 0,0,_fda ;};_eeg ,_fda :=_ga .Atoi (_cee [2]);if _fda !=nil {return 0,0,_fda ;};_af .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_bbg ,_eeg );
return _bbg ,_eeg ,nil ;};func (_age *fdfParser )parseNull ()(_a .PdfObjectNull ,error ){_ ,_fffe :=_age ._bf .Discard (4);return _a .PdfObjectNull {},_fffe ;};func (_ca *fdfParser )setFileOffset (_cd int64 ){_ca ._ae .Seek (_cd ,_ec .SeekStart );_ca ._bf =_c .NewReader (_ca ._ae );
};func (_ccaf *fdfParser )parseHexString ()(*_a .PdfObjectString ,error ){_ccaf ._bf .ReadByte ();var _ffab _gg .Buffer ;for {_dce ,_bfa :=_ccaf ._bf .Peek (1);if _bfa !=nil {return _a .MakeHexString (""),_bfa ;};if _dce [0]=='>'{_ccaf ._bf .ReadByte ();
break ;};_dcb ,_ :=_ccaf ._bf .ReadByte ();if !_a .IsWhiteSpace (_dcb ){_ffab .WriteByte (_dcb );};};if _ffab .Len ()%2==1{_ffab .WriteRune ('0');};_adc ,_bfb :=_b .DecodeString (_ffab .String ());if _bfb !=nil {_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_ffab .String ());
return _a .MakeHexString (""),nil ;};return _a .MakeHexString (string (_adc )),nil ;};func (_cbg *fdfParser )parseArray ()(*_a .PdfObjectArray ,error ){_fffd :=_a .MakeArray ();_cbg ._bf .ReadByte ();for {_cbg .skipSpaces ();_gdge ,_bgb :=_cbg ._bf .Peek (1);
if _bgb !=nil {return _fffd ,_bgb ;};if _gdge [0]==']'{_cbg ._bf .ReadByte ();break ;};_bad ,_bgb :=_cbg .parseObject ();if _bgb !=nil {return _fffd ,_bgb ;};_fffd .Append (_bad );};return _fffd ,nil ;};var _cf =_e .MustCompile ("\u0025\u0025\u0045O\u0046");


// Data represents forms data format (FDF) file data.
type Data struct{_be *_a .PdfObjectDictionary ;_ed *_a .PdfObjectArray ;};func (_cab *fdfParser )parseName ()(_a .PdfObjectName ,error ){var _eef _gg .Buffer ;_eeb :=false ;for {_ade ,_fde :=_cab ._bf .Peek (1);if _fde ==_ec .EOF {break ;};if _fde !=nil {return _a .PdfObjectName (_eef .String ()),_fde ;
};if !_eeb {if _ade [0]=='/'{_eeb =true ;_cab ._bf .ReadByte ();}else if _ade [0]=='%'{_cab .readComment ();_cab .skipSpaces ();}else {_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_ade ,_ade );
return _a .PdfObjectName (_eef .String ()),_fa .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_ade [0]);};}else {if _a .IsWhiteSpace (_ade [0]){break ;}else if (_ade [0]=='/')||(_ade [0]=='[')||(_ade [0]=='(')||(_ade [0]==']')||(_ade [0]=='<')||(_ade [0]=='>'){break ;
}else if _ade [0]=='#'{_eb ,_add :=_cab ._bf .Peek (3);if _add !=nil {return _a .PdfObjectName (_eef .String ()),_add ;};_cab ._bf .Discard (3);_fdge ,_add :=_b .DecodeString (string (_eb [1:3]));if _add !=nil {return _a .PdfObjectName (_eef .String ()),_add ;
};_eef .Write (_fdge );}else {_ab ,_ :=_cab ._bf .ReadByte ();_eef .WriteByte (_ab );};};};return _a .PdfObjectName (_eef .String ()),nil ;};func (_fggd *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_fggd ._ae .Seek (0,_ec .SeekStart );_fggd ._bf =_c .NewReader (_fggd ._ae );
_dace :=20;_edgc :=make ([]byte ,_dace );for {_afd ,_edd :=_fggd ._bf .ReadByte ();if _edd !=nil {if _edd ==_ec .EOF {break ;}else {return 0,0,_edd ;};};if _a .IsDecimalDigit (_afd )&&_edgc [_dace -1]=='.'&&_a .IsDecimalDigit (_edgc [_dace -2])&&_edgc [_dace -3]=='-'&&_edgc [_dace -4]=='F'&&_edgc [_dace -5]=='D'&&_edgc [_dace -6]=='P'{_dgbb :=int (_edgc [_dace -2]-'0');
_dfbcf :=int (_afd -'0');return _dgbb ,_dfbcf ,nil ;};_edgc =append (_edgc [1:_dace ],_afd );};return 0,0,_d .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_gdg *fdfParser )parseString ()(*_a .PdfObjectString ,error ){_gdg ._bf .ReadByte ();
var _abf _gg .Buffer ;_gcg :=1;for {_ccb ,_bae :=_gdg ._bf .Peek (1);if _bae !=nil {return _a .MakeString (_abf .String ()),_bae ;};if _ccb [0]=='\\'{_gdg ._bf .ReadByte ();_efg ,_ccd :=_gdg ._bf .ReadByte ();if _ccd !=nil {return _a .MakeString (_abf .String ()),_ccd ;
};if _a .IsOctalDigit (_efg ){_gfa ,_dgb :=_gdg ._bf .Peek (2);if _dgb !=nil {return _a .MakeString (_abf .String ()),_dgb ;};var _ega []byte ;_ega =append (_ega ,_efg );for _ ,_fgf :=range _gfa {if _a .IsOctalDigit (_fgf ){_ega =append (_ega ,_fgf );}else {break ;
};};_gdg ._bf .Discard (len (_ega )-1);_af .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_ega );_ddb ,_dgb :=_ga .ParseUint (string (_ega ),8,32);if _dgb !=nil {return _a .MakeString (_abf .String ()),_dgb ;
};_abf .WriteByte (byte (_ddb ));continue ;};switch _efg {case 'n':_abf .WriteRune ('\n');case 'r':_abf .WriteRune ('\r');case 't':_abf .WriteRune ('\t');case 'b':_abf .WriteRune ('\b');case 'f':_abf .WriteRune ('\f');case '(':_abf .WriteRune ('(');case ')':_abf .WriteRune (')');
case '\\':_abf .WriteRune ('\\');};continue ;}else if _ccb [0]=='('{_gcg ++;}else if _ccb [0]==')'{_gcg --;if _gcg ==0{_gdg ._bf .ReadByte ();break ;};};_baea ,_ :=_gdg ._bf .ReadByte ();_abf .WriteByte (_baea );};return _a .MakeString (_abf .String ()),nil ;
};func (_cec *fdfParser )parseDict ()(*_a .PdfObjectDictionary ,error ){_af .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_ge :=_a .MakeDict ();_eba ,_ :=_cec ._bf .ReadByte ();if _eba !='<'{return nil ,_d .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};_eba ,_ =_cec ._bf .ReadByte ();if _eba !='<'{return nil ,_d .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_cec .skipSpaces ();_cec .skipComments ();_bac ,_adeg :=_cec ._bf .Peek (2);if _adeg !=nil {return nil ,_adeg ;
};_af .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bac ),string (_bac ));if (_bac [0]=='>')&&(_bac [1]=='>'){_af .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");
_cec ._bf .ReadByte ();_cec ._bf .ReadByte ();break ;};_af .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_eec ,_adeg :=_cec .parseName ();_af .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_eec );
if _adeg !=nil {_af .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_adeg );return nil ,_adeg ;};if len (_eec )> 4&&_eec [len (_eec )-4:]=="\u006e\u0075\u006c\u006c"{_fcfe :=_eec [0:len (_eec )-4];
_af .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_eec );_af .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_fcfe );
_cec .skipSpaces ();_bbfb ,_ :=_cec ._bf .Peek (1);if _bbfb [0]=='/'{_ge .Set (_fcfe ,_a .MakeNull ());continue ;};};_cec .skipSpaces ();_cae ,_adeg :=_cec .parseObject ();if _adeg !=nil {return nil ,_adeg ;};_ge .Set (_eec ,_cae );_af .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_eec ,_cae .String ());
};_af .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _ge ,nil ;};var _dee =_e .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func (_fagg *fdfParser )skipSpaces ()(int ,error ){_fcf :=0;for {_bb ,_ac :=_fagg ._bf .ReadByte ();if _ac !=nil {return 0,_ac ;};if _a .IsWhiteSpace (_bb ){_fcf ++;}else {_fagg ._bf .UnreadByte ();break ;};};return _fcf ,nil ;};func (_cce *fdfParser )parseIndirectObject ()(_a .PdfObject ,error ){_fdga :=_a .PdfIndirectObject {};
_af .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_bdf ,_bgd :=_cce ._bf .Peek (20);if _bgd !=nil {_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_fdga ,_bgd ;};_af .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_bdf ));_gge :=_agb .FindStringSubmatchIndex (string (_bdf ));if len (_gge )< 6{_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bdf ));
return &_fdga ,_d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cce ._bf .Discard (_gge [0]);_af .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_gge );_cag :=_gge [1]-_gge [0];_bbb :=make ([]byte ,_cag );_ ,_bgd =_cce .readAtLeast (_bbb ,_cag );if _bgd !=nil {_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_bgd );
return nil ,_bgd ;};_af .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_bbb );_cbf :=_agb .FindStringSubmatch (string (_bbb ));if len (_cbf )< 3{_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bbb ));
return &_fdga ,_d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ggec ,_ :=_ga .Atoi (_cbf [1]);_caec ,_ :=_ga .Atoi (_cbf [2]);_fdga .ObjectNumber =int64 (_ggec );_fdga .GenerationNumber =int64 (_caec );for {_daa ,_aed :=_cce ._bf .Peek (2);if _aed !=nil {return &_fdga ,_aed ;};_af .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_daa ),string (_daa ));
if _a .IsWhiteSpace (_daa [0]){_cce .skipSpaces ();}else if _daa [0]=='%'{_cce .skipComments ();}else if (_daa [0]=='<')&&(_daa [1]=='<'){_af .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_fdga .PdfObject ,_aed =_cce .parseDict ();
_af .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_aed );if _aed !=nil {return &_fdga ,_aed ;};_af .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_daa [0]=='/')||(_daa [0]=='(')||(_daa [0]=='[')||(_daa [0]=='<'){_fdga .PdfObject ,_aed =_cce .parseObject ();if _aed !=nil {return &_fdga ,_aed ;};_af .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _daa [0]=='e'{_bfe ,_gaa :=_cce .readTextLine ();if _gaa !=nil {return nil ,_gaa ;};if len (_bfe )>=6&&_bfe [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _daa [0]=='s'{_daa ,_ =_cce ._bf .Peek (10);if string (_daa [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_fbdf :=6;
if len (_daa )> 6{if _a .IsWhiteSpace (_daa [_fbdf ])&&_daa [_fbdf ]!='\r'&&_daa [_fbdf ]!='\n'{_af .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_fbdf ++;};if _daa [_fbdf ]=='\r'{_fbdf ++;if _daa [_fbdf ]=='\n'{_fbdf ++;};}else if _daa [_fbdf ]=='\n'{_fbdf ++;};};_cce ._bf .Discard (_fbdf );_cafc ,_fgg :=_fdga .PdfObject .(*_a .PdfObjectDictionary );if !_fgg {return nil ,_d .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_af .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_cafc );_bfd ,_gdf :=_cafc .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_a .PdfObjectInteger );if !_gdf {return nil ,_d .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_bdg :=*_bfd ;if _bdg < 0{return nil ,_d .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_bdg )> _cce ._ffa {_af .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_d .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_eega :=make ([]byte ,_bdg );
_ ,_aed =_cce .readAtLeast (_eega ,int (_bdg ));if _aed !=nil {_af .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_eega ),_eega );_af .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_aed );
return nil ,_aed ;};_edcg :=_a .PdfObjectStream {};_edcg .Stream =_eega ;_edcg .PdfObjectDictionary =_fdga .PdfObject .(*_a .PdfObjectDictionary );_edcg .ObjectNumber =_fdga .ObjectNumber ;_edcg .GenerationNumber =_fdga .GenerationNumber ;_cce .skipSpaces ();
_cce ._bf .Discard (9);_cce .skipSpaces ();return &_edcg ,nil ;};};_fdga .PdfObject ,_aed =_cce .parseObject ();return &_fdga ,_aed ;};};_af .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_fdga ,nil ;};func _acd (_ecbe _ec .ReadSeeker )(*fdfParser ,error ){_cagg :=&fdfParser {};_cagg ._ae =_ecbe ;_cagg ._cgb =map[int64 ]_a .PdfObject {};_ggf ,_gae ,_gad :=_cagg .parseFdfVersion ();if _gad !=nil {_af .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_gad );
return nil ,_gad ;};_cagg ._afe =_ggf ;_cagg ._daf =_gae ;_gad =_cagg .parse ();return _cagg ,_gad ;};func (_aca *fdfParser )parseBool ()(_a .PdfObjectBool ,error ){_ace ,_fdf :=_aca ._bf .Peek (4);if _fdf !=nil {return _a .PdfObjectBool (false ),_fdf ;
};if (len (_ace )>=4)&&(string (_ace [:4])=="\u0074\u0072\u0075\u0065"){_aca ._bf .Discard (4);return _a .PdfObjectBool (true ),nil ;};_ace ,_fdf =_aca ._bf .Peek (5);if _fdf !=nil {return _a .PdfObjectBool (false ),_fdf ;};if (len (_ace )>=5)&&(string (_ace [:5])=="\u0066\u0061\u006cs\u0065"){_aca ._bf .Discard (5);
return _a .PdfObjectBool (false ),nil ;};return _a .PdfObjectBool (false ),_d .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ef ,_gc :=_ea .Open (fdfPath );if _gc !=nil {return nil ,_gc ;};defer _ef .Close ();return Load (_ef );};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_a .PdfObjectDictionary ,error ){_eg :=map[string ]*_a .PdfObjectDictionary {};for _fc :=0;_fc < fdf ._ed .Len ();_fc ++{_gd ,_cca :=_a .GetDict (fdf ._ed .Get (_fc ));if _cca {_fff ,_ :=_a .GetString (_gd .Get ("\u0054"));
if _fff !=nil {_eg [_fff .Str ()]=_gd ;};};};return _eg ,nil ;};

// Root returns the Root of the FDF document.
func (_gdb *fdfParser )Root ()(*_a .PdfObjectDictionary ,error ){if _gdb ._ffd !=nil {if _fbaa ,_cbd :=_gdb .trace (_gdb ._ffd .Get ("\u0052\u006f\u006f\u0074")).(*_a .PdfObjectDictionary );_cbd {if _faf ,_ece :=_gdb .trace (_fbaa .Get ("\u0046\u0044\u0046")).(*_a .PdfObjectDictionary );
_ece {return _faf ,nil ;};};};var _dfbc []int64 ;for _bfbb :=range _gdb ._cgb {_dfbc =append (_dfbc ,_bfbb );};_dd .Slice (_dfbc ,func (_cdd ,_dafb int )bool {return _dfbc [_cdd ]< _dfbc [_dafb ]});for _ ,_ebd :=range _dfbc {_dea :=_gdb ._cgb [_ebd ];if _cceb ,_dcd :=_gdb .trace (_dea ).(*_a .PdfObjectDictionary );
_dcd {if _cdbb ,_gbb :=_gdb .trace (_cceb .Get ("\u0046\u0044\u0046")).(*_a .PdfObjectDictionary );_gbb {return _cdbb ,nil ;};};};return nil ,_d .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_a .PdfObject ,error ){_db ,_ce :=fdf .FieldDictionaries ();if _ce !=nil {return nil ,_ce ;};var _ecb []string ;for _ag :=range _db {_ecb =append (_ecb ,_ag );};_dd .Strings (_ecb );_cg :=map[string ]_a .PdfObject {};
for _ ,_adf :=range _ecb {_ggb :=_db [_adf ];_aad :=_a .TraceToDirectObject (_ggb .Get ("\u0056"));_cg [_adf ]=_aad ;};return _cg ,nil ;};var _fe =_e .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");
var _agb =_e .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func _gcd (_fdea string )(*fdfParser ,error ){_fed :=fdfParser {};_fdgd :=[]byte (_fdea );_fbb :=_gg .NewReader (_fdgd );
_fed ._ae =_fbb ;_fed ._cgb =map[int64 ]_a .PdfObject {};_bbgg :=_c .NewReader (_fbb );_fed ._bf =_bbgg ;_fed ._ffa =int64 (len (_fdea ));return &_fed ,_fed .parse ();};func (_dbd *fdfParser )parseObject ()(_a .PdfObject ,error ){_af .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_dbd .skipSpaces ();for {_dddb ,_fgd :=_dbd ._bf .Peek (2);if _fgd !=nil {return nil ,_fgd ;};_af .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_dddb ));if _dddb [0]=='/'{_dgc ,_ccg :=_dbd .parseName ();
_af .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_dgc );return &_dgc ,_ccg ;}else if _dddb [0]=='('{_af .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _dbd .parseString ();}else if _dddb [0]=='['{_af .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _dbd .parseArray ();}else if (_dddb [0]=='<')&&(_dddb [1]=='<'){_af .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _dbd .parseDict ();}else if _dddb [0]=='<'{_af .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _dbd .parseHexString ();}else if _dddb [0]=='%'{_dbd .readComment ();_dbd .skipSpaces ();}else {_af .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_dddb ,_ =_dbd ._bf .Peek (15);_ddgb :=string (_dddb );
_af .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_ddgb );if (len (_ddgb )> 3)&&(_ddgb [:4]=="\u006e\u0075\u006c\u006c"){_edc ,_bgc :=_dbd .parseNull ();return &_edc ,_bgc ;}else if (len (_ddgb )> 4)&&(_ddgb [:5]=="\u0066\u0061\u006cs\u0065"){_bgbd ,_gdd :=_dbd .parseBool ();
return &_bgbd ,_gdd ;}else if (len (_ddgb )> 3)&&(_ddgb [:4]=="\u0074\u0072\u0075\u0065"){_eab ,_dceb :=_dbd .parseBool ();return &_eab ,_dceb ;};_ddgg :=_fe .FindStringSubmatch (_ddgb );if len (_ddgg )> 1{_dddb ,_ =_dbd ._bf .ReadBytes ('R');_af .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_dddb [:]));
_bca ,_gccf :=_gcc (string (_dddb ));return &_bca ,_gccf ;};_fdfg :=_dee .FindStringSubmatch (_ddgb );if len (_fdfg )> 1{_af .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _dbd .parseNumber ();};_fdfg =_fdg .FindStringSubmatch (_ddgb );
if len (_fdfg )> 1{_af .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_af .Log .Trace ("\u0025\u0020\u0073",_fdfg );return _dbd .parseNumber ();};_af .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_ddgb );
return nil ,_d .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_cb *fdfParser )parseNumber ()(_a .PdfObject ,error ){return _a .ParseNumber (_cb ._bf )};func (_bfg *fdfParser )parse ()error {_bfg ._ae .Seek (0,_ec .SeekStart );_bfg ._bf =_c .NewReader (_bfg ._ae );for {_bfg .skipComments ();_ebc ,_baf :=_bfg ._bf .Peek (20);
if _baf !=nil {_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _baf ;};if _f .HasPrefix (string (_ebc ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_bfg ._bf .Discard (7);
_bfg .skipSpaces ();_bfg .skipComments ();_bgdg ,_ :=_bfg .parseDict ();_bfg ._ffd =_bgdg ;break ;};_eca :=_agb .FindStringSubmatchIndex (string (_ebc ));if len (_eca )< 6{_af .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ebc ));
return _d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fgga ,_baf :=_bfg .parseIndirectObject ();if _baf !=nil {return _baf ;};switch _beb :=_fgga .(type ){case *_a .PdfIndirectObject :_bfg ._cgb [_beb .ObjectNumber ]=_beb ;case *_a .PdfObjectStream :_bfg ._cgb [_beb .ObjectNumber ]=_beb ;default:return _d .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_fgdb *fdfParser )trace (_dbb _a .PdfObject )_a .PdfObject {switch _cfe :=_dbb .(type ){case *_a .PdfObjectReference :_gff ,_agba :=_fgdb ._cgb [_cfe .ObjectNumber ].(*_a .PdfIndirectObject );if _agba {return _gff .PdfObject ;};
_af .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_a .PdfIndirectObject :return _cfe .PdfObject ;};return _dbb ;};func (_efa *fdfParser )readComment ()(string ,error ){var _ddd _gg .Buffer ;_ ,_bbd :=_efa .skipSpaces ();
if _bbd !=nil {return _ddd .String (),_bbd ;};_fg :=true ;for {_gf ,_dgf :=_efa ._bf .Peek (1);if _dgf !=nil {_af .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dgf .Error ());return _ddd .String (),_dgf ;};if _fg &&_gf [0]!='%'{return _ddd .String (),_d .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_fg =false ;if (_gf [0]!='\r')&&(_gf [0]!='\n'){_bbf ,_ :=_efa ._bf .ReadByte ();_ddd .WriteByte (_bbf );}else {break ;};};return _ddd .String (),nil ;};