//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_bgf "bufio";_a "bytes";_f "encoding/hex";_b "errors";_df "fmt";_eb "github.com/unidoc/unipdf/v3/common";_bc "github.com/unidoc/unipdf/v3/core";_e "io";_bge "os";_g "regexp";_gd "sort";_db "strconv";_bg "strings";);func (_ec *fdfParser )readComment ()(string ,error ){var _abcf _a .Buffer ;
_ ,_gg :=_ec .skipSpaces ();if _gg !=nil {return _abcf .String (),_gg ;};_fcf :=true ;for {_bca ,_ddc :=_ec ._gbe .Peek (1);if _ddc !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ddc .Error ());return _abcf .String (),_ddc ;
};if _fcf &&_bca [0]!='%'{return _abcf .String (),_b .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_fcf =false ;if (_bca [0]!='\r')&&(_bca [0]!='\n'){_gbaa ,_ :=_ec ._gbe .ReadByte ();
_abcf .WriteByte (_gbaa );}else {break ;};};return _abcf .String (),nil ;};func (_adg *fdfParser )parseName ()(_bc .PdfObjectName ,error ){var _gaaf _a .Buffer ;_egf :=false ;for {_dda ,_dfa :=_adg ._gbe .Peek (1);if _dfa ==_e .EOF {break ;};if _dfa !=nil {return _bc .PdfObjectName (_gaaf .String ()),_dfa ;
};if !_egf {if _dda [0]=='/'{_egf =true ;_adg ._gbe .ReadByte ();}else if _dda [0]=='%'{_adg .readComment ();_adg .skipSpaces ();}else {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_dda ,_dda );
return _bc .PdfObjectName (_gaaf .String ()),_df .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_dda [0]);};}else {if _bc .IsWhiteSpace (_dda [0]){break ;}else if (_dda [0]=='/')||(_dda [0]=='[')||(_dda [0]=='(')||(_dda [0]==']')||(_dda [0]=='<')||(_dda [0]=='>'){break ;
}else if _dda [0]=='#'{_dbb ,_eff :=_adg ._gbe .Peek (3);if _eff !=nil {return _bc .PdfObjectName (_gaaf .String ()),_eff ;};_adg ._gbe .Discard (3);_afa ,_eff :=_f .DecodeString (string (_dbb [1:3]));if _eff !=nil {return _bc .PdfObjectName (_gaaf .String ()),_eff ;
};_gaaf .Write (_afa );}else {_feg ,_ :=_adg ._gbe .ReadByte ();_gaaf .WriteByte (_feg );};};};return _bc .PdfObjectName (_gaaf .String ()),nil ;};var _cc =_g .MustCompile ("\u0025\u0025\u0045O\u0046");var _gda =_g .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_bgd *fdfParser )skipSpaces ()(int ,error ){_dc :=0;for {_ba ,_eea :=_bgd ._gbe .ReadByte ();if _eea !=nil {return 0,_eea ;};if _bc .IsWhiteSpace (_ba ){_dc ++;}else {_bgd ._gbe .UnreadByte ();break ;};};return _dc ,nil ;};func (_cfg *fdfParser )parseNull ()(_bc .PdfObjectNull ,error ){_ ,_ecc :=_cfg ._gbe .Discard (4);
return _bc .PdfObjectNull {},_ecc ;};var _de =_g .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_abb *fdfParser )parseString ()(*_bc .PdfObjectString ,error ){_abb ._gbe .ReadByte ();
var _bfe _a .Buffer ;_dga :=1;for {_cf ,_bfb :=_abb ._gbe .Peek (1);if _bfb !=nil {return _bc .MakeString (_bfe .String ()),_bfb ;};if _cf [0]=='\\'{_abb ._gbe .ReadByte ();_efe ,_bd :=_abb ._gbe .ReadByte ();if _bd !=nil {return _bc .MakeString (_bfe .String ()),_bd ;
};if _bc .IsOctalDigit (_efe ){_fed ,_ege :=_abb ._gbe .Peek (2);if _ege !=nil {return _bc .MakeString (_bfe .String ()),_ege ;};var _cd []byte ;_cd =append (_cd ,_efe );for _ ,_bec :=range _fed {if _bc .IsOctalDigit (_bec ){_cd =append (_cd ,_bec );}else {break ;
};};_abb ._gbe .Discard (len (_cd )-1);_eb .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_cd );_feeb ,_ege :=_db .ParseUint (string (_cd ),8,32);if _ege !=nil {return _bc .MakeString (_bfe .String ()),_ege ;
};_bfe .WriteByte (byte (_feeb ));continue ;};switch _efe {case 'n':_bfe .WriteRune ('\n');case 'r':_bfe .WriteRune ('\r');case 't':_bfe .WriteRune ('\t');case 'b':_bfe .WriteRune ('\b');case 'f':_bfe .WriteRune ('\f');case '(':_bfe .WriteRune ('(');case ')':_bfe .WriteRune (')');
case '\\':_bfe .WriteRune ('\\');};continue ;}else if _cf [0]=='('{_dga ++;}else if _cf [0]==')'{_dga --;if _dga ==0{_abb ._gbe .ReadByte ();break ;};};_cdf ,_ :=_abb ._gbe .ReadByte ();_bfe .WriteByte (_cdf );};return _bc .MakeString (_bfe .String ()),nil ;
};func (_aef *fdfParser )trace (_fcd _bc .PdfObject )_bc .PdfObject {switch _gbb :=_fcd .(type ){case *_bc .PdfObjectReference :_fbcf ,_ggb :=_aef ._ddf [_gbb .ObjectNumber ].(*_bc .PdfIndirectObject );if _ggb {return _fbcf .PdfObject ;};_eb .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_bc .PdfIndirectObject :return _gbb .PdfObject ;};return _fcd ;};func (_cgcf *fdfParser )parse ()error {_cgcf ._ad .Seek (0,_e .SeekStart );_cgcf ._gbe =_bgf .NewReader (_cgcf ._ad );for {_cgcf .skipComments ();_cdb ,_aadg :=_cgcf ._gbe .Peek (20);
if _aadg !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _aadg ;};if _bg .HasPrefix (string (_cdb ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_cgcf ._gbe .Discard (7);
_cgcf .skipSpaces ();_cgcf .skipComments ();_dcee ,_ :=_cgcf .parseDict ();_cgcf ._dbd =_dcee ;break ;};_dbba :=_de .FindStringSubmatchIndex (string (_cdb ));if len (_dbba )< 6{_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cdb ));
return _b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_adce ,_aadg :=_cgcf .parseIndirectObject ();if _aadg !=nil {return _aadg ;};switch _bdf :=_adce .(type ){case *_bc .PdfIndirectObject :_cgcf ._ddf [_bdf .ObjectNumber ]=_bdf ;case *_bc .PdfObjectStream :_cgcf ._ddf [_bdf .ObjectNumber ]=_bdf ;default:return _b .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_gea *fdfParser )parseNumber ()(_bc .PdfObject ,error ){return _bc .ParseNumber (_gea ._gbe )};func _gfd (_efgf _e .ReadSeeker )(*fdfParser ,error ){_cacb :=&fdfParser {};_cacb ._ad =_efgf ;_cacb ._ddf =map[int64 ]_bc .PdfObject {};
_abcb ,_fgf ,_ceg :=_cacb .parseFdfVersion ();if _ceg !=nil {_eb .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_ceg );return nil ,_ceg ;};_cacb ._eee =_abcb ;
_cacb ._aa =_fgf ;_ceg =_cacb .parse ();return _cacb ,_ceg ;};func _aeg (_fcc string )(_bc .PdfObjectReference ,error ){_beb :=_bc .PdfObjectReference {};_ddac :=_fce .FindStringSubmatch (_fcc );if len (_ddac )< 3{_eb .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _beb ,_b .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_aed ,_fdg :=_db .Atoi (_ddac [1]);if _fdg !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_ddac [1]);
return _beb ,nil ;};_beb .ObjectNumber =int64 (_aed );_fb ,_fdg :=_db .Atoi (_ddac [2]);if _fdg !=nil {_eb .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_ddac [2]);
return _beb ,nil ;};_beb .GenerationNumber =int64 (_fb );return _beb ,nil ;};var _fce =_g .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_fdc *fdfParser )parseFdfVersion ()(int ,int ,error ){_fdc ._ad .Seek (0,_e .SeekStart );
_dece :=20;_dcb :=make ([]byte ,_dece );_fdc ._ad .Read (_dcb );_gae :=_ee .FindStringSubmatch (string (_dcb ));if len (_gae )< 3{_ada ,_ggca ,_fbf :=_fdc .seekFdfVersionTopDown ();if _fbf !=nil {_eb .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_fbf ;};return _ada ,_ggca ,nil ;};_bedf ,_cdfe :=_db .Atoi (_gae [1]);if _cdfe !=nil {return 0,0,_cdfe ;};_fega ,_cdfe :=_db .Atoi (_gae [2]);if _cdfe !=nil {return 0,0,_cdfe ;};_eb .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_bedf ,_fega );
return _bedf ,_fega ,nil ;};func (_fda *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_fda ._ad .Seek (0,_e .SeekStart );_fda ._gbe =_bgf .NewReader (_fda ._ad );_ebb :=20;_gdg :=make ([]byte ,_ebb );for {_eda ,_cgg :=_fda ._gbe .ReadByte ();if _cgg !=nil {if _cgg ==_e .EOF {break ;
}else {return 0,0,_cgg ;};};if _bc .IsDecimalDigit (_eda )&&_gdg [_ebb -1]=='.'&&_bc .IsDecimalDigit (_gdg [_ebb -2])&&_gdg [_ebb -3]=='-'&&_gdg [_ebb -4]=='F'&&_gdg [_ebb -5]=='D'&&_gdg [_ebb -6]=='P'{_eeaf :=int (_gdg [_ebb -2]-'0');_bcf :=int (_eda -'0');
return _eeaf ,_bcf ,nil ;};_gdg =append (_gdg [1:_ebb ],_eda );};return 0,0,_b .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func _gdae (_dfg string )(*fdfParser ,error ){_acac :=fdfParser {};
_dfd :=[]byte (_dfg );_aag :=_a .NewReader (_dfd );_acac ._ad =_aag ;_acac ._ddf =map[int64 ]_bc .PdfObject {};_gdaa :=_bgf .NewReader (_aag );_acac ._gbe =_gdaa ;_acac ._ge =int64 (len (_dfg ));return &_acac ,_acac .parse ();};func (_adf *fdfParser )seekToEOFMarker (_aedg int64 )error {_beg :=int64 (0);
_dae :=int64 (1000);for _beg < _aedg {if _aedg <=(_dae +_beg ){_dae =_aedg -_beg ;};_ ,_aabe :=_adf ._ad .Seek (-_beg -_dae ,_e .SeekEnd );if _aabe !=nil {return _aabe ;};_adfa :=make ([]byte ,_dae );_adf ._ad .Read (_adfa );_eb .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_adfa ));
_bgdd :=_cc .FindAllStringIndex (string (_adfa ),-1);if _bgdd !=nil {_bebf :=_bgdd [len (_bgdd )-1];_eb .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_bgdd );_adf ._ad .Seek (-_beg -_dae +int64 (_bebf [0]),_e .SeekEnd );return nil ;};
_eb .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_beg +=_dae ;};_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _b .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_ecd *fdfParser )parseHexString ()(*_bc .PdfObjectString ,error ){_ecd ._gbe .ReadByte ();var _aab _a .Buffer ;for {_gde ,_agf :=_ecd ._gbe .Peek (1);if _agf !=nil {return _bc .MakeHexString (""),_agf ;};if _gde [0]=='>'{_ecd ._gbe .ReadByte ();
break ;};_beae ,_ :=_ecd ._gbe .ReadByte ();if !_bc .IsWhiteSpace (_beae ){_aab .WriteByte (_beae );};};if _aab .Len ()%2==1{_aab .WriteRune ('0');};_efc ,_fff :=_f .DecodeString (_aab .String ());if _fff !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_aab .String ());
return _bc .MakeHexString (""),nil ;};return _bc .MakeHexString (string (_efc )),nil ;};type fdfParser struct{_eee int ;_aa int ;_ddf map[int64 ]_bc .PdfObject ;_ad _e .ReadSeeker ;_gbe *_bgf .Reader ;_ge int64 ;_dbd *_bc .PdfObjectDictionary ;};func (_bdb *fdfParser )parseObject ()(_bc .PdfObject ,error ){_eb .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_bdb .skipSpaces ();for {_aad ,_fcb :=_bdb ._gbe .Peek (2);if _fcb !=nil {return nil ,_fcb ;};_eb .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_aad ));if _aad [0]=='/'{_abag ,_caa :=_bdb .parseName ();
_eb .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_abag );return &_abag ,_caa ;}else if _aad [0]=='('{_eb .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _bdb .parseString ();}else if _aad [0]=='['{_eb .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _bdb .parseArray ();}else if (_aad [0]=='<')&&(_aad [1]=='<'){_eb .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _bdb .parseDict ();}else if _aad [0]=='<'{_eb .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _bdb .parseHexString ();}else if _aad [0]=='%'{_bdb .readComment ();_bdb .skipSpaces ();}else {_eb .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_aad ,_ =_bdb ._gbe .Peek (15);_fdgc :=string (_aad );
_eb .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_fdgc );if (len (_fdgc )> 3)&&(_fdgc [:4]=="\u006e\u0075\u006c\u006c"){_abdb ,_cdg :=_bdb .parseNull ();return &_abdb ,_cdg ;}else if (len (_fdgc )> 4)&&(_fdgc [:5]=="\u0066\u0061\u006cs\u0065"){_aegb ,_aecf :=_bdb .parseBool ();
return &_aegb ,_aecf ;}else if (len (_fdgc )> 3)&&(_fdgc [:4]=="\u0074\u0072\u0075\u0065"){_bed ,_afad :=_bdb .parseBool ();return &_bed ,_afad ;};_efb :=_fce .FindStringSubmatch (_fdgc );if len (_efb )> 1{_aad ,_ =_bdb ._gbe .ReadBytes ('R');_eb .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_aad [:]));
_dff ,_dbc :=_aeg (string (_aad ));return &_dff ,_dbc ;};_ddbb :=_ddb .FindStringSubmatch (_fdgc );if len (_ddbb )> 1{_eb .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _bdb .parseNumber ();};_ddbb =_gda .FindStringSubmatch (_fdgc );
if len (_ddbb )> 1{_eb .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_eb .Log .Trace ("\u0025\u0020\u0073",_ddbb );return _bdb .parseNumber ();};_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_fdgc );
return nil ,_b .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_bf *fdfParser )getFileOffset ()int64 {_gaa ,_ :=_bf ._ad .Seek (0,_e .SeekCurrent );_gaa -=int64 (_bf ._gbe .Buffered ());return _gaa ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_fcg ,_gb :=_bge .Open (fdfPath );if _gb !=nil {return nil ,_gb ;};defer _fcg .Close ();return Load (_fcg );};func (_bga *fdfParser )parseBool ()(_bc .PdfObjectBool ,error ){_bfa ,_aac :=_bga ._gbe .Peek (4);
if _aac !=nil {return _bc .PdfObjectBool (false ),_aac ;};if (len (_bfa )>=4)&&(string (_bfa [:4])=="\u0074\u0072\u0075\u0065"){_bga ._gbe .Discard (4);return _bc .PdfObjectBool (true ),nil ;};_bfa ,_aac =_bga ._gbe .Peek (5);if _aac !=nil {return _bc .PdfObjectBool (false ),_aac ;
};if (len (_bfa )>=5)&&(string (_bfa [:5])=="\u0066\u0061\u006cs\u0065"){_bga ._gbe .Discard (5);return _bc .PdfObjectBool (false ),nil ;};return _bc .PdfObjectBool (false ),_b .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};

// Root returns the Root of the FDF document.
func (_ecdb *fdfParser )Root ()(*_bc .PdfObjectDictionary ,error ){if _ecdb ._dbd !=nil {if _bcg ,_ggd :=_ecdb .trace (_ecdb ._dbd .Get ("\u0052\u006f\u006f\u0074")).(*_bc .PdfObjectDictionary );_ggd {if _cac ,_bcgc :=_ecdb .trace (_bcg .Get ("\u0046\u0044\u0046")).(*_bc .PdfObjectDictionary );
_bcgc {return _cac ,nil ;};};};var _fegg []int64 ;for _fdf :=range _ecdb ._ddf {_fegg =append (_fegg ,_fdf );};_gd .Slice (_fegg ,func (_daed ,_ecb int )bool {return _fegg [_daed ]< _fegg [_ecb ]});for _ ,_fffd :=range _fegg {_acc :=_ecdb ._ddf [_fffd ];
if _daa ,_gfe :=_ecdb .trace (_acc ).(*_bc .PdfObjectDictionary );_gfe {if _adba ,_bebd :=_ecdb .trace (_daa .Get ("\u0046\u0044\u0046")).(*_bc .PdfObjectDictionary );_bebd {return _adba ,nil ;};};};return nil ,_b .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_efcb *fdfParser )parseDict ()(*_bc .PdfObjectDictionary ,error ){_eb .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_dce :=_bc .MakeDict ();_afd ,_ :=_efcb ._gbe .ReadByte ();if _afd !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};_afd ,_ =_efcb ._gbe .ReadByte ();if _afd !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_efcb .skipSpaces ();_efcb .skipComments ();_ddff ,_efec :=_efcb ._gbe .Peek (2);if _efec !=nil {return nil ,_efec ;
};_eb .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_ddff ),string (_ddff ));if (_ddff [0]=='>')&&(_ddff [1]=='>'){_eb .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");
_efcb ._gbe .ReadByte ();_efcb ._gbe .ReadByte ();break ;};_eb .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_efd ,_efec :=_efcb .parseName ();_eb .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_efd );
if _efec !=nil {_eb .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_efec );return nil ,_efec ;};if len (_efd )> 4&&_efd [len (_efd )-4:]=="\u006e\u0075\u006c\u006c"{_dge :=_efd [0:len (_efd )-4];
_eb .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_efd );_eb .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_dge );
_efcb .skipSpaces ();_ggc ,_ :=_efcb ._gbe .Peek (1);if _ggc [0]=='/'{_dce .Set (_dge ,_bc .MakeNull ());continue ;};};_efcb .skipSpaces ();_fbc ,_efec :=_efcb .parseObject ();if _efec !=nil {return nil ,_efec ;};_dce .Set (_efd ,_fbc );_eb .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_efd ,_fbc .String ());
};_eb .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _dce ,nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_bgff *_bc .PdfObjectDictionary ;_c *_bc .PdfObjectArray ;};func (_aga *fdfParser )readTextLine ()(string ,error ){var _fad _a .Buffer ;for {_ca ,_adc :=_aga ._gbe .Peek (1);if _adc !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_adc .Error ());
return _fad .String (),_adc ;};if (_ca [0]!='\r')&&(_ca [0]!='\n'){_dac ,_ :=_aga ._gbe .ReadByte ();_fad .WriteByte (_dac );}else {break ;};};return _fad .String (),nil ;};

// Load loads FDF form data from `r`.
func Load (r _e .ReadSeeker )(*Data ,error ){_fc ,_ce :=_gfd (r );if _ce !=nil {return nil ,_ce ;};_be ,_ce :=_fc .Root ();if _ce !=nil {return nil ,_ce ;};_gf ,_cg :=_bc .GetArray (_be .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_cg {return nil ,_b .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_c :_gf ,_bgff :_be },nil ;};var _ee =_g .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_ccb *fdfParser )skipComments ()error {if _ ,_egb :=_ccb .skipSpaces ();_egb !=nil {return _egb ;
};_cbd :=true ;for {_fde ,_ac :=_ccb ._gbe .Peek (1);if _ac !=nil {_eb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ac .Error ());return _ac ;};if _cbd &&_fde [0]!='%'{return nil ;};_cbd =false ;if (_fde [0]!='\r')&&(_fde [0]!='\n'){_ccb ._gbe .ReadByte ();
}else {break ;};};return _ccb .skipComments ();};func (_aec *fdfParser )parseArray ()(*_bc .PdfObjectArray ,error ){_dec :=_bc .MakeArray ();_aec ._gbe .ReadByte ();for {_aec .skipSpaces ();_ddfe ,_ea :=_aec ._gbe .Peek (1);if _ea !=nil {return _dec ,_ea ;
};if _ddfe [0]==']'{_aec ._gbe .ReadByte ();break ;};_fcgd ,_ea :=_aec .parseObject ();if _ea !=nil {return _dec ,_ea ;};_dec .Append (_fcgd );};return _dec ,nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bc .PdfObjectDictionary ,error ){_dba :=map[string ]*_bc .PdfObjectDictionary {};for _ff :=0;_ff < fdf ._c .Len ();_ff ++{_ag ,_ab :=_bc .GetDict (fdf ._c .Get (_ff ));if _ab {_gba ,_ :=_bc .GetString (_ag .Get ("\u0054"));
if _gba !=nil {_dba [_gba .Str ()]=_ag ;};};};return _dba ,nil ;};func (_fec *fdfParser )readAtLeast (_ddg []byte ,_af int )(int ,error ){_ebd :=_af ;_cgc :=0;_ga :=0;for _ebd > 0{_ef ,_cb :=_fec ._gbe .Read (_ddg [_cgc :]);if _cb !=nil {_eb .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_ef ,_ga ,_cb .Error ());
return _cgc ,_b .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_ga ++;_cgc +=_ef ;_ebd -=_ef ;};return _cgc ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bc .PdfObject ,error ){_agd ,_ed :=fdf .FieldDictionaries ();if _ed !=nil {return nil ,_ed ;};var _bb []string ;for _abf :=range _agd {_bb =append (_bb ,_abf );};_gd .Strings (_bb );_fe :=map[string ]_bc .PdfObject {};
for _ ,_ae :=range _bb {_cge :=_agd [_ae ];_abc :=_bc .TraceToDirectObject (_cge .Get ("\u0056"));_fe [_ae ]=_abc ;};return _fe ,nil ;};func (_dcf *fdfParser )parseIndirectObject ()(_bc .PdfObject ,error ){_agg :=_bc .PdfIndirectObject {};_eb .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_eef ,_fg :=_dcf ._gbe .Peek (20);if _fg !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_agg ,_fg ;
};_eb .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_eef ));_fdd :=_de .FindStringSubmatchIndex (string (_eef ));if len (_fdd )< 6{_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_eef ));
return &_agg ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dcf ._gbe .Discard (_fdd [0]);_eb .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fdd );_deca :=_fdd [1]-_fdd [0];_bdc :=make ([]byte ,_deca );_ ,_fg =_dcf .readAtLeast (_bdc ,_deca );if _fg !=nil {_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_fg );
return nil ,_fg ;};_eb .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_bdc );_bbe :=_de .FindStringSubmatch (string (_bdc ));if len (_bbe )< 3{_eb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bdc ));
return &_agg ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cec ,_ :=_db .Atoi (_bbe [1]);_fcfe ,_ :=_db .Atoi (_bbe [2]);_agg .ObjectNumber =int64 (_cec );_agg .GenerationNumber =int64 (_fcfe );for {_efg ,_fbff :=_dcf ._gbe .Peek (2);if _fbff !=nil {return &_agg ,_fbff ;};_eb .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_efg ),string (_efg ));
if _bc .IsWhiteSpace (_efg [0]){_dcf .skipSpaces ();}else if _efg [0]=='%'{_dcf .skipComments ();}else if (_efg [0]=='<')&&(_efg [1]=='<'){_eb .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_agg .PdfObject ,_fbff =_dcf .parseDict ();
_eb .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_fbff );if _fbff !=nil {return &_agg ,_fbff ;};_eb .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_efg [0]=='/')||(_efg [0]=='(')||(_efg [0]=='[')||(_efg [0]=='<'){_agg .PdfObject ,_fbff =_dcf .parseObject ();if _fbff !=nil {return &_agg ,_fbff ;};_eb .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _efg [0]=='e'{_bgg ,_dgf :=_dcf .readTextLine ();if _dgf !=nil {return nil ,_dgf ;};if len (_bgg )>=6&&_bgg [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _efg [0]=='s'{_efg ,_ =_dcf ._gbe .Peek (10);if string (_efg [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_aca :=6;
if len (_efg )> 6{if _bc .IsWhiteSpace (_efg [_aca ])&&_efg [_aca ]!='\r'&&_efg [_aca ]!='\n'{_eb .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_aca ++;};if _efg [_aca ]=='\r'{_aca ++;if _efg [_aca ]=='\n'{_aca ++;};}else if _efg [_aca ]=='\n'{_aca ++;};};_dcf ._gbe .Discard (_aca );_bef ,_dea :=_agg .PdfObject .(*_bc .PdfObjectDictionary );if !_dea {return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_eb .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_bef );_fdce ,_acad :=_bef .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bc .PdfObjectInteger );if !_acad {return nil ,_b .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_cae :=*_fdce ;if _cae < 0{return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_cae )> _dcf ._ge {_eb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_b .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_cff :=make ([]byte ,_cae );
_ ,_fbff =_dcf .readAtLeast (_cff ,int (_cae ));if _fbff !=nil {_eb .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_cff ),_cff );_eb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_fbff );
return nil ,_fbff ;};_fea :=_bc .PdfObjectStream {};_fea .Stream =_cff ;_fea .PdfObjectDictionary =_agg .PdfObject .(*_bc .PdfObjectDictionary );_fea .ObjectNumber =_agg .ObjectNumber ;_fea .GenerationNumber =_agg .GenerationNumber ;_dcf .skipSpaces ();
_dcf ._gbe .Discard (9);_dcf .skipSpaces ();return &_fea ,nil ;};};_agg .PdfObject ,_fbff =_dcf .parseObject ();return &_agg ,_fbff ;};};_eb .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_agg ,nil ;};func (_dg *fdfParser )setFileOffset (_eg int64 ){_dg ._ad .Seek (_eg ,_e .SeekStart );_dg ._gbe =_bgf .NewReader (_dg ._ad );};var _ddb =_g .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
