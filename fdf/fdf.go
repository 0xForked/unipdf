//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_a "bufio";_fd "bytes";_db "encoding/hex";_b "errors";_ed "fmt";_ca "github.com/unidoc/unipdf/v3/common";_bg "github.com/unidoc/unipdf/v3/core";_de "io";_fg "os";_c "regexp";_be "sort";_e "strconv";_d "strings";);func _eaf (_afe _de .ReadSeeker )(*fdfParser ,error ){_dbf :=&fdfParser {};
_dbf ._ff =_afe ;_dbf ._agd =map[int64 ]_bg .PdfObject {};_bae ,_gaa ,_eacae :=_dbf .parseFdfVersion ();if _eacae !=nil {_ca .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_eacae );
return nil ,_eacae ;};_dbf ._eb =_bae ;_dbf ._cdb =_gaa ;_eacae =_dbf .parse ();return _dbf ,_eacae ;};func (_ccg *fdfParser )parseHexString ()(*_bg .PdfObjectString ,error ){_ccg ._fb .ReadByte ();var _ebba _fd .Buffer ;for {_fa ,_ade :=_ccg ._fb .Peek (1);
if _ade !=nil {return _bg .MakeHexString (""),_ade ;};if _fa [0]=='>'{_ccg ._fb .ReadByte ();break ;};_aec ,_ :=_ccg ._fb .ReadByte ();if !_bg .IsWhiteSpace (_aec ){_ebba .WriteByte (_aec );};};if _ebba .Len ()%2==1{_ebba .WriteRune ('0');};_cde ,_cef :=_db .DecodeString (_ebba .String ());
if _cef !=nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_ebba .String ());
return _bg .MakeHexString (""),nil ;};return _bg .MakeHexString (string (_cde )),nil ;};var _ee =_c .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_cb *fdfParser )readAtLeast (_gb []byte ,_ba int )(int ,error ){_cgf :=_ba ;_caf :=0;_fc :=0;for _cgf > 0{_dfg ,_egd :=_cb ._fb .Read (_gb [_caf :]);if _egd !=nil {_ca .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_dfg ,_fc ,_egd .Error ());
return _caf ,_b .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_fc ++;_caf +=_dfg ;_cgf -=_dfg ;};return _caf ,nil ;};func (_afb *fdfParser )parseNull ()(_bg .PdfObjectNull ,error ){_ ,_ccgg :=_afb ._fb .Discard (4);
return _bg .PdfObjectNull {},_ccgg ;};

// Root returns the Root of the FDF document.
func (_bef *fdfParser )Root ()(*_bg .PdfObjectDictionary ,error ){if _bef ._dbb !=nil {if _bee ,_bgc :=_bef .trace (_bef ._dbb .Get ("\u0052\u006f\u006f\u0074")).(*_bg .PdfObjectDictionary );_bgc {if _bgb ,_agdea :=_bef .trace (_bee .Get ("\u0046\u0044\u0046")).(*_bg .PdfObjectDictionary );
_agdea {return _bgb ,nil ;};};};var _bda []int64 ;for _gcd :=range _bef ._agd {_bda =append (_bda ,_gcd );};_be .Slice (_bda ,func (_aed ,_ged int )bool {return _bda [_aed ]< _bda [_ged ]});for _ ,_fdb :=range _bda {_fcc :=_bef ._agd [_fdb ];if _aag ,_aab :=_bef .trace (_fcc ).(*_bg .PdfObjectDictionary );
_aab {if _dgac ,_cfc :=_bef .trace (_aag .Get ("\u0046\u0044\u0046")).(*_bg .PdfObjectDictionary );_cfc {return _dgac ,nil ;};};};return nil ,_b .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_bca ,_ac :=_fg .Open (fdfPath );if _ac !=nil {return nil ,_ac ;};defer _bca .Close ();return Load (_bca );};func (_gad *fdfParser )parseNumber ()(_bg .PdfObject ,error ){return _bg .ParseNumber (_gad ._fb )};
func (_fcda *fdfParser )parse ()error {_fcda ._ff .Seek (0,_de .SeekStart );_fcda ._fb =_a .NewReader (_fcda ._ff );for {_fcda .skipComments ();_fec ,_cee :=_fcda ._fb .Peek (20);if _cee !=nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _cee ;};if _d .HasPrefix (string (_fec ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_fcda ._fb .Discard (7);_fcda .skipSpaces ();_fcda .skipComments ();_eacd ,_ :=_fcda .parseDict ();_fcda ._dbb =_eacd ;break ;};_bdb :=_eab .FindStringSubmatchIndex (string (_fec ));
if len (_bdb )< 6{_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fec ));
return _b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dab ,_cee :=_fcda .parseIndirectObject ();if _cee !=nil {return _cee ;};switch _eecg :=_dab .(type ){case *_bg .PdfIndirectObject :_fcda ._agd [_eecg .ObjectNumber ]=_eecg ;case *_bg .PdfObjectStream :_fcda ._agd [_eecg .ObjectNumber ]=_eecg ;default:return _b .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_bfe *fdfParser )parseArray ()(*_bg .PdfObjectArray ,error ){_bb :=_bg .MakeArray ();_bfe ._fb .ReadByte ();for {_bfe .skipSpaces ();_fac ,_eba :=_bfe ._fb .Peek (1);if _eba !=nil {return _bb ,_eba ;};if _fac [0]==']'{_bfe ._fb .ReadByte ();
break ;};_cbbb ,_eba :=_bfe .parseObject ();if _eba !=nil {return _bb ,_eba ;};_bb .Append (_cbbb );};return _bb ,nil ;};func (_ab *fdfParser )parseName ()(_bg .PdfObjectName ,error ){var _ffg _fd .Buffer ;_baa :=false ;for {_egc ,_ebf :=_ab ._fb .Peek (1);
if _ebf ==_de .EOF {break ;};if _ebf !=nil {return _bg .PdfObjectName (_ffg .String ()),_ebf ;};if !_baa {if _egc [0]=='/'{_baa =true ;_ab ._fb .ReadByte ();}else if _egc [0]=='%'{_ab .readComment ();_ab .skipSpaces ();}else {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_egc ,_egc );
return _bg .PdfObjectName (_ffg .String ()),_ed .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_egc [0]);};}else {if _bg .IsWhiteSpace (_egc [0]){break ;}else if (_egc [0]=='/')||(_egc [0]=='[')||(_egc [0]=='(')||(_egc [0]==']')||(_egc [0]=='<')||(_egc [0]=='>'){break ;
}else if _egc [0]=='#'{_fed ,_cbb :=_ab ._fb .Peek (3);if _cbb !=nil {return _bg .PdfObjectName (_ffg .String ()),_cbb ;};_ab ._fb .Discard (3);_fce ,_cbb :=_db .DecodeString (string (_fed [1:3]));if _cbb !=nil {return _bg .PdfObjectName (_ffg .String ()),_cbb ;
};_ffg .Write (_fce );}else {_bce ,_ :=_ab ._fb .ReadByte ();_ffg .WriteByte (_bce );};};};return _bg .PdfObjectName (_ffg .String ()),nil ;};func (_bad *fdfParser )readTextLine ()(string ,error ){var _ccb _fd .Buffer ;for {_bdd ,_ga :=_bad ._fb .Peek (1);
if _ga !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ga .Error ());return _ccb .String (),_ga ;};if (_bdd [0]!='\r')&&(_bdd [0]!='\n'){_cafb ,_ :=_bad ._fb .ReadByte ();_ccb .WriteByte (_cafb );}else {break ;};};return _ccb .String (),nil ;
};func (_dbda *fdfParser )parseFdfVersion ()(int ,int ,error ){_dbda ._ff .Seek (0,_de .SeekStart );_geee :=20;_bcee :=make ([]byte ,_geee );_dbda ._ff .Read (_bcee );_cgbg :=_aee .FindStringSubmatch (string (_bcee ));if len (_cgbg )< 3{_adg ,_caed ,_cbg :=_dbda .seekFdfVersionTopDown ();
if _cbg !=nil {_ca .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_cbg ;
};return _adg ,_caed ,nil ;};_fef ,_dga :=_e .Atoi (_cgbg [1]);if _dga !=nil {return 0,0,_dga ;};_adeg ,_dga :=_e .Atoi (_cgbg [2]);if _dga !=nil {return 0,0,_dga ;};_ca .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_fef ,_adeg );
return _fef ,_adeg ,nil ;};func (_fge *fdfParser )skipComments ()error {if _ ,_dd :=_fge .skipSpaces ();_dd !=nil {return _dd ;};_acc :=true ;for {_bec ,_cfg :=_fge ._fb .Peek (1);if _cfg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cfg .Error ());
return _cfg ;};if _acc &&_bec [0]!='%'{return nil ;};_acc =false ;if (_bec [0]!='\r')&&(_bec [0]!='\n'){_fge ._fb .ReadByte ();}else {break ;};};return _fge .skipComments ();};type fdfParser struct{_eb int ;_cdb int ;_agd map[int64 ]_bg .PdfObject ;_ff _de .ReadSeeker ;
_fb *_a .Reader ;_bcf int64 ;_dbb *_bg .PdfObjectDictionary ;};

// Load loads FDF form data from `r`.
func Load (r _de .ReadSeeker )(*Data ,error ){_bd ,_bc :=_eaf (r );if _bc !=nil {return nil ,_bc ;};_ae ,_bc :=_bd .Root ();if _bc !=nil {return nil ,_bc ;};_ea ,_bfg :=_bg .GetArray (_ae .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_bfg {return nil ,_b .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_bf :_ea ,_g :_ae },nil ;};func _ebcd (_cge string )(*fdfParser ,error ){_fbe :=fdfParser {};_agde :=[]byte (_cge );_badb :=_fd .NewReader (_agde );_fbe ._ff =_badb ;_fbe ._agd =map[int64 ]_bg .PdfObject {};_cdcf :=_a .NewReader (_badb );
_fbe ._fb =_cdcf ;_fbe ._bcf =int64 (len (_cge ));return &_fbe ,_fbe .parse ();};func (_cdf *fdfParser )readComment ()(string ,error ){var _bcd _fd .Buffer ;_ ,_beb :=_cdf .skipSpaces ();if _beb !=nil {return _bcd .String (),_beb ;};_def :=true ;for {_eea ,_agg :=_cdf ._fb .Peek (1);
if _agg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_agg .Error ());return _bcd .String (),_agg ;};if _def &&_eea [0]!='%'{return _bcd .String (),_b .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_def =false ;if (_eea [0]!='\r')&&(_eea [0]!='\n'){_fbc ,_ :=_cdf ._fb .ReadByte ();_bcd .WriteByte (_fbc );}else {break ;};};return _bcd .String (),nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bg .PdfObject ,error ){_ce ,_bdc :=fdf .FieldDictionaries ();if _bdc !=nil {return nil ,_bdc ;};var _gc []string ;for _af :=range _ce {_gc =append (_gc ,_af );};_be .Strings (_gc );_aff :=map[string ]_bg .PdfObject {};
for _ ,_eg :=range _gc {_cae :=_ce [_eg ];_bea :=_bg .TraceToDirectObject (_cae .Get ("\u0056"));_aff [_eg ]=_bea ;};return _aff ,nil ;};func (_fgg *fdfParser )parseString ()(*_bg .PdfObjectString ,error ){_fgg ._fb .ReadByte ();var _dg _fd .Buffer ;_fga :=1;
for {_acf ,_ef :=_fgg ._fb .Peek (1);if _ef !=nil {return _bg .MakeString (_dg .String ()),_ef ;};if _acf [0]=='\\'{_fgg ._fb .ReadByte ();_cad ,_aa :=_fgg ._fb .ReadByte ();if _aa !=nil {return _bg .MakeString (_dg .String ()),_aa ;};if _bg .IsOctalDigit (_cad ){_dc ,_dce :=_fgg ._fb .Peek (2);
if _dce !=nil {return _bg .MakeString (_dg .String ()),_dce ;};var _ada []byte ;_ada =append (_ada ,_cad );for _ ,_eef :=range _dc {if _bg .IsOctalDigit (_eef ){_ada =append (_ada ,_eef );}else {break ;};};_fgg ._fb .Discard (len (_ada )-1);_ca .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_ada );
_cca ,_dce :=_e .ParseUint (string (_ada ),8,32);if _dce !=nil {return _bg .MakeString (_dg .String ()),_dce ;};_dg .WriteByte (byte (_cca ));continue ;};switch _cad {case 'n':_dg .WriteRune ('\n');case 'r':_dg .WriteRune ('\r');case 't':_dg .WriteRune ('\t');
case 'b':_dg .WriteRune ('\b');case 'f':_dg .WriteRune ('\f');case '(':_dg .WriteRune ('(');case ')':_dg .WriteRune (')');case '\\':_dg .WriteRune ('\\');};continue ;}else if _acf [0]=='('{_fga ++;}else if _acf [0]==')'{_fga --;if _fga ==0{_fgg ._fb .ReadByte ();
break ;};};_dff ,_ :=_fgg ._fb .ReadByte ();_dg .WriteByte (_dff );};return _bg .MakeString (_dg .String ()),nil ;};var _eab =_c .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_cgd *fdfParser )parseDict ()(*_bg .PdfObjectDictionary ,error ){_ca .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_ecg :=_bg .MakeDict ();_fgd ,_ :=_cgd ._fb .ReadByte ();if _fgd !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};_fgd ,_ =_cgd ._fb .ReadByte ();if _fgd !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_cgd .skipSpaces ();_cgd .skipComments ();_gg ,_fggf :=_cgd ._fb .Peek (2);if _fggf !=nil {return nil ,_fggf ;
};_ca .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_gg ),string (_gg ));if (_gg [0]=='>')&&(_gg [1]=='>'){_ca .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");
_cgd ._fb .ReadByte ();_cgd ._fb .ReadByte ();break ;};_ca .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_bbg ,_fggf :=_cgd .parseName ();_ca .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_bbg );
if _fggf !=nil {_ca .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_fggf );return nil ,_fggf ;};if len (_bbg )> 4&&_bbg [len (_bbg )-4:]=="\u006e\u0075\u006c\u006c"{_gee :=_bbg [0:len (_bbg )-4];
_ca .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_bbg );_ca .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_gee );
_cgd .skipSpaces ();_fded ,_ :=_cgd ._fb .Peek (1);if _fded [0]=='/'{_ecg .Set (_gee ,_bg .MakeNull ());continue ;};};_cgd .skipSpaces ();_ebe ,_fggf :=_cgd .parseObject ();if _fggf !=nil {return nil ,_fggf ;};_ecg .Set (_bbg ,_ebe );_ca .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_bbg ,_ebe .String ());
};_ca .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _ecg ,nil ;};var _fe =_c .MustCompile ("\u0025\u0025\u0045O\u0046");var _aee =_c .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");


// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bg .PdfObjectDictionary ,error ){_dbd :=map[string ]*_bg .PdfObjectDictionary {};for _cg :=0;_cg < fdf ._bf .Len ();_cg ++{_cgb ,_gd :=_bg .GetDict (fdf ._bf .Get (_cg ));if _gd {_df ,_ :=_bg .GetString (_cgb .Get ("\u0054"));
if _df !=nil {_dbd [_df .Str ()]=_cgb ;};};};return _dbd ,nil ;};var _ag =_c .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_cdg *fdfParser )trace (_ebgc _bg .PdfObject )_bg .PdfObject {switch _eaef :=_ebgc .(type ){case *_bg .PdfObjectReference :_fcfe ,_ecde :=_cdg ._agd [_eaef .ObjectNumber ].(*_bg .PdfIndirectObject );
if _ecde {return _fcfe .PdfObject ;};_ca .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_bg .PdfIndirectObject :return _eaef .PdfObject ;};return _ebgc ;};func (_faca *fdfParser )parseObject ()(_bg .PdfObject ,error ){_ca .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_faca .skipSpaces ();for {_gbf ,_eee :=_faca ._fb .Peek (2);if _eee !=nil {return nil ,_eee ;};_ca .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gbf ));if _gbf [0]=='/'{_daf ,_dgc :=_faca .parseName ();
_ca .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_daf );return &_daf ,_dgc ;}else if _gbf [0]=='('{_ca .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _faca .parseString ();}else if _gbf [0]=='['{_ca .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _faca .parseArray ();}else if (_gbf [0]=='<')&&(_gbf [1]=='<'){_ca .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _faca .parseDict ();}else if _gbf [0]=='<'{_ca .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _faca .parseHexString ();}else if _gbf [0]=='%'{_faca .readComment ();_faca .skipSpaces ();}else {_ca .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gbf ,_ =_faca ._fb .Peek (15);_dbc :=string (_gbf );
_ca .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_dbc );if (len (_dbc )> 3)&&(_dbc [:4]=="\u006e\u0075\u006c\u006c"){_ecd ,_gbb :=_faca .parseNull ();return &_ecd ,_gbb ;}else if (len (_dbc )> 4)&&(_dbc [:5]=="\u0066\u0061\u006cs\u0065"){_fcd ,_eec :=_faca .parseBool ();
return &_fcd ,_eec ;}else if (len (_dbc )> 3)&&(_dbc [:4]=="\u0074\u0072\u0075\u0065"){_eac ,_eebb :=_faca .parseBool ();return &_eac ,_eebb ;};_ede :=_bac .FindStringSubmatch (_dbc );if len (_ede )> 1{_gbf ,_ =_faca ._fb .ReadBytes ('R');_ca .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gbf [:]));
_aae ,_cbbe :=_bdfc (string (_gbf ));return &_aae ,_cbbe ;};_bbfa :=_ag .FindStringSubmatch (_dbc );if len (_bbfa )> 1{_ca .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _faca .parseNumber ();};_bbfa =_ee .FindStringSubmatch (_dbc );
if len (_bbfa )> 1{_ca .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_ca .Log .Trace ("\u0025\u0020\u0073",_bbfa );return _faca .parseNumber ();};_ca .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_dbc );
return nil ,_b .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_ccbc *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_ccbc ._ff .Seek (0,_de .SeekStart );_ccbc ._fb =_a .NewReader (_ccbc ._ff );_beg :=20;_bfd :=make ([]byte ,_beg );for {_fag ,_fdeg :=_ccbc ._fb .ReadByte ();if _fdeg !=nil {if _fdeg ==_de .EOF {break ;
}else {return 0,0,_fdeg ;};};if _bg .IsDecimalDigit (_fag )&&_bfd [_beg -1]=='.'&&_bg .IsDecimalDigit (_bfd [_beg -2])&&_bfd [_beg -3]=='-'&&_bfd [_beg -4]=='F'&&_bfd [_beg -5]=='D'&&_bfd [_beg -6]=='P'{_geef :=int (_bfd [_beg -2]-'0');_feb :=int (_fag -'0');
return _geef ,_feb ,nil ;};_bfd =append (_bfd [1:_beg ],_fag );};return 0,0,_b .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func _bdfc (_fcg string )(_bg .PdfObjectReference ,error ){_gdg :=_bg .PdfObjectReference {};
_abb :=_bac .FindStringSubmatch (_fcg );if len (_abb )< 3{_ca .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _gdg ,_b .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_fde ,_eaea :=_e .Atoi (_abb [1]);if _eaea !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_abb [1]);
return _gdg ,nil ;};_gdg .ObjectNumber =int64 (_fde );_ebg ,_eaea :=_e .Atoi (_abb [2]);if _eaea !=nil {_ca .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_abb [2]);
return _gdg ,nil ;};_gdg .GenerationNumber =int64 (_ebg );return _gdg ,nil ;};func (_ccc *fdfParser )seekToEOFMarker (_bcfg int64 )error {_afd :=int64 (0);_caef :=int64 (1000);for _afd < _bcfg {if _bcfg <=(_caef +_afd ){_caef =_bcfg -_afd ;};_ ,_eaca :=_ccc ._ff .Seek (-_afd -_caef ,_de .SeekEnd );
if _eaca !=nil {return _eaca ;};_bbd :=make ([]byte ,_caef );_ccc ._ff .Read (_bbd );_ca .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_bbd ));
_ffa :=_fe .FindAllStringIndex (string (_bbd ),-1);if _ffa !=nil {_fbb :=_ffa [len (_ffa )-1];_ca .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_ffa );_ccc ._ff .Seek (-_afd -_caef +int64 (_fbb [0]),_de .SeekEnd );return nil ;};_ca .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_afd +=_caef ;};_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _b .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};var _bac =_c .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_cfe *fdfParser )skipSpaces ()(int ,error ){_cc :=0;for {_bacb ,_affa :=_cfe ._fb .ReadByte ();if _affa !=nil {return 0,_affa ;
};if _bg .IsWhiteSpace (_bacb ){_cc ++;}else {_cfe ._fb .UnreadByte ();break ;};};return _cc ,nil ;};func (_ad *fdfParser )getFileOffset ()int64 {_edg ,_ :=_ad ._ff .Seek (0,_de .SeekCurrent );_edg -=int64 (_ad ._fb .Buffered ());return _edg ;};func (_edd *fdfParser )parseBool ()(_bg .PdfObjectBool ,error ){_fbf ,_ceb :=_edd ._fb .Peek (4);
if _ceb !=nil {return _bg .PdfObjectBool (false ),_ceb ;};if (len (_fbf )>=4)&&(string (_fbf [:4])=="\u0074\u0072\u0075\u0065"){_edd ._fb .Discard (4);return _bg .PdfObjectBool (true ),nil ;};_fbf ,_ceb =_edd ._fb .Peek (5);if _ceb !=nil {return _bg .PdfObjectBool (false ),_ceb ;
};if (len (_fbf )>=5)&&(string (_fbf [:5])=="\u0066\u0061\u006cs\u0065"){_edd ._fb .Discard (5);return _bg .PdfObjectBool (false ),nil ;};return _bg .PdfObjectBool (false ),_b .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};

// Data represents forms data format (FDF) file data.
type Data struct{_g *_bg .PdfObjectDictionary ;_bf *_bg .PdfObjectArray ;};func (_cd *fdfParser )setFileOffset (_ge int64 ){_cd ._ff .Seek (_ge ,_de .SeekStart );_cd ._fb =_a .NewReader (_cd ._ff );};func (_fdd *fdfParser )parseIndirectObject ()(_bg .PdfObject ,error ){_bddf :=_bg .PdfIndirectObject {};
_ca .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_dag ,_adgf :=_fdd ._fb .Peek (20);if _adgf !=nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_bddf ,_adgf ;};_ca .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_dag ));_dde :=_eab .FindStringSubmatchIndex (string (_dag ));if len (_dde )< 6{_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dag ));
return &_bddf ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fdd ._fb .Discard (_dde [0]);_ca .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_dde );_acg :=_dde [1]-_dde [0];_ffaa :=make ([]byte ,_acg );_ ,_adgf =_fdd .readAtLeast (_ffaa ,_acg );if _adgf !=nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_adgf );
return nil ,_adgf ;};_ca .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_ffaa );_bbdc :=_eab .FindStringSubmatch (string (_ffaa ));if len (_bbdc )< 3{_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ffaa ));
return &_bddf ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bfga ,_ :=_e .Atoi (_bbdc [1]);_bcc ,_ :=_e .Atoi (_bbdc [2]);_bddf .ObjectNumber =int64 (_bfga );_bddf .GenerationNumber =int64 (_bcc );for {_ceg ,_ebbb :=_fdd ._fb .Peek (2);if _ebbb !=nil {return &_bddf ,_ebbb ;};_ca .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_ceg ),string (_ceg ));
if _bg .IsWhiteSpace (_ceg [0]){_fdd .skipSpaces ();}else if _ceg [0]=='%'{_fdd .skipComments ();}else if (_ceg [0]=='<')&&(_ceg [1]=='<'){_ca .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_bddf .PdfObject ,_ebbb =_fdd .parseDict ();
_ca .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_ebbb );if _ebbb !=nil {return &_bddf ,_ebbb ;};_ca .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_ceg [0]=='/')||(_ceg [0]=='(')||(_ceg [0]=='[')||(_ceg [0]=='<'){_bddf .PdfObject ,_ebbb =_fdd .parseObject ();if _ebbb !=nil {return &_bddf ,_ebbb ;};_ca .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _ceg [0]=='e'{_dcf ,_bgg :=_fdd .readTextLine ();if _bgg !=nil {return nil ,_bgg ;};if len (_dcf )>=6&&_dcf [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _ceg [0]=='s'{_ceg ,_ =_fdd ._fb .Peek (10);if string (_ceg [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_bbgf :=6;
if len (_ceg )> 6{if _bg .IsWhiteSpace (_ceg [_bbgf ])&&_ceg [_bbgf ]!='\r'&&_ceg [_bbgf ]!='\n'{_ca .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_bbgf ++;};if _ceg [_bbgf ]=='\r'{_bbgf ++;if _ceg [_bbgf ]=='\n'{_bbgf ++;};}else if _ceg [_bbgf ]=='\n'{_bbgf ++;};};_fdd ._fb .Discard (_bbgf );_cdee ,_bbdd :=_bddf .PdfObject .(*_bg .PdfObjectDictionary );if !_bbdd {return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_ca .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_cdee );_fcf ,_gde :=_cdee .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bg .PdfObjectInteger );if !_gde {return nil ,_b .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_cgfa :=*_fcf ;if _cgfa < 0{return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_cgfa )> _fdd ._bcf {_ca .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_b .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_bag :=make ([]byte ,_cgfa );
_ ,_ebbb =_fdd .readAtLeast (_bag ,int (_cgfa ));if _ebbb !=nil {_ca .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_bag ),_bag );_ca .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ebbb );
return nil ,_ebbb ;};_dafc :=_bg .PdfObjectStream {};_dafc .Stream =_bag ;_dafc .PdfObjectDictionary =_bddf .PdfObject .(*_bg .PdfObjectDictionary );_dafc .ObjectNumber =_bddf .ObjectNumber ;_dafc .GenerationNumber =_bddf .GenerationNumber ;_fdd .skipSpaces ();
_fdd ._fb .Discard (9);_fdd .skipSpaces ();return &_dafc ,nil ;};};_bddf .PdfObject ,_ebbb =_fdd .parseObject ();return &_bddf ,_ebbb ;};};_ca .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_bddf ,nil ;};