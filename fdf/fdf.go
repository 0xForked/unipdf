//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_ec "bufio";_b "bytes";_ca "encoding/hex";_e "errors";_ab "fmt";_fa "github.com/unidoc/unipdf/v3/common";_f "github.com/unidoc/unipdf/v3/core";_cbb "io";_gg "os";_g "regexp";_abe "sort";_cb "strconv";_a "strings";);var _gga =_g .MustCompile ("\u0025\u0025\u0045O\u0046");
func (_agf *fdfParser )skipSpaces ()(int ,error ){_ebb :=0;for {_ggb ,_dee :=_agf ._adb .ReadByte ();if _dee !=nil {return 0,_dee ;};if _f .IsWhiteSpace (_ggb ){_ebb ++;}else {_agf ._adb .UnreadByte ();break ;};};return _ebb ,nil ;};func (_agb *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_agb ._eb .Seek (0,_cbb .SeekStart );
_agb ._adb =_ec .NewReader (_agb ._eb );_cge :=20;_cace :=make ([]byte ,_cge );for {_cda ,_afcc :=_agb ._adb .ReadByte ();if _afcc !=nil {if _afcc ==_cbb .EOF {break ;}else {return 0,0,_afcc ;};};if _f .IsDecimalDigit (_cda )&&_cace [_cge -1]=='.'&&_f .IsDecimalDigit (_cace [_cge -2])&&_cace [_cge -3]=='-'&&_cace [_cge -4]=='F'&&_cace [_cge -5]=='D'&&_cace [_cge -6]=='P'{_dbbc :=int (_cace [_cge -2]-'0');
_ecf :=int (_cda -'0');return _dbbc ,_ecf ,nil ;};_cace =append (_cace [1:_cge ],_cda );};return 0,0,_e .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_dbb *fdfParser )parseBool ()(_f .PdfObjectBool ,error ){_agc ,_dagd :=_dbb ._adb .Peek (4);
if _dagd !=nil {return _f .PdfObjectBool (false ),_dagd ;};if (len (_agc )>=4)&&(string (_agc [:4])=="\u0074\u0072\u0075\u0065"){_dbb ._adb .Discard (4);return _f .PdfObjectBool (true ),nil ;};_agc ,_dagd =_dbb ._adb .Peek (5);if _dagd !=nil {return _f .PdfObjectBool (false ),_dagd ;
};if (len (_agc )>=5)&&(string (_agc [:5])=="\u0066\u0061\u006cs\u0065"){_dbb ._adb .Discard (5);return _f .PdfObjectBool (false ),nil ;};return _f .PdfObjectBool (false ),_e .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};func (_fab *fdfParser )setFileOffset (_ee int64 ){_fab ._eb .Seek (_ee ,_cbb .SeekStart );_fab ._adb =_ec .NewReader (_fab ._eb );};var _abg =_g .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_fc *fdfParser )parseName ()(_f .PdfObjectName ,error ){var _dg _b .Buffer ;_fbd :=false ;for {_gf ,_eed :=_fc ._adb .Peek (1);if _eed ==_cbb .EOF {break ;};if _eed !=nil {return _f .PdfObjectName (_dg .String ()),_eed ;};if !_fbd {if _gf [0]=='/'{_fbd =true ;
_fc ._adb .ReadByte ();}else if _gf [0]=='%'{_fc .readComment ();_fc .skipSpaces ();}else {_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_gf ,_gf );
return _f .PdfObjectName (_dg .String ()),_ab .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_gf [0]);};}else {if _f .IsWhiteSpace (_gf [0]){break ;}else if (_gf [0]=='/')||(_gf [0]=='[')||(_gf [0]=='(')||(_gf [0]==']')||(_gf [0]=='<')||(_gf [0]=='>'){break ;
}else if _gf [0]=='#'{_gac ,_gbf :=_fc ._adb .Peek (3);if _gbf !=nil {return _f .PdfObjectName (_dg .String ()),_gbf ;};_fc ._adb .Discard (3);_bcgc ,_gbf :=_ca .DecodeString (string (_gac [1:3]));if _gbf !=nil {return _f .PdfObjectName (_dg .String ()),_gbf ;
};_dg .Write (_bcgc );}else {_fdf ,_ :=_fc ._adb .ReadByte ();_dg .WriteByte (_fdf );};};};return _f .PdfObjectName (_dg .String ()),nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_gd ,_ga :=_gg .Open (fdfPath );if _ga !=nil {return nil ,_ga ;};defer _gd .Close ();return Load (_gd );};func (_gfbd *fdfParser )parseArray ()(*_f .PdfObjectArray ,error ){_gbd :=_f .MakeArray ();_gfbd ._adb .ReadByte ();
for {_gfbd .skipSpaces ();_fbdg ,_bfe :=_gfbd ._adb .Peek (1);if _bfe !=nil {return _gbd ,_bfe ;};if _fbdg [0]==']'{_gfbd ._adb .ReadByte ();break ;};_gcb ,_bfe :=_gfbd .parseObject ();if _bfe !=nil {return _gbd ,_bfe ;};_gbd .Append (_gcb );};return _gbd ,nil ;
};func (_fdb *fdfParser )parseNumber ()(_f .PdfObject ,error ){return _f .ParseNumber (_fdb ._adb )};func (_bd *fdfParser )readTextLine ()(string ,error ){var _ff _b .Buffer ;for {_df ,_daf :=_bd ._adb .Peek (1);if _daf !=nil {_fa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_daf .Error ());
return _ff .String (),_daf ;};if (_df [0]!='\r')&&(_df [0]!='\n'){_ggf ,_ :=_bd ._adb .ReadByte ();_ff .WriteByte (_ggf );}else {break ;};};return _ff .String (),nil ;};var _ad =_g .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_bed *fdfParser )readAtLeast (_dab []byte ,_bb int )(int ,error ){_dcd :=_bb ;_bc :=0;_cad :=0;for _dcd > 0{_cg ,_aeb :=_bed ._adb .Read (_dab [_bc :]);if _aeb !=nil {_fa .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_cg ,_cad ,_aeb .Error ());
return _bc ,_e .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_cad ++;_bc +=_cg ;_dcd -=_cg ;};return _bc ,nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_f .PdfObjectDictionary ,error ){_fb :=map[string ]*_f .PdfObjectDictionary {};for _ef :=0;_ef < fdf ._cdb .Len ();_ef ++{_bf ,_ea :=_f .GetDict (fdf ._cdb .Get (_ef ));if _ea {_egf ,_ :=_f .GetString (_bf .Get ("\u0054"));
if _egf !=nil {_fb [_egf .Str ()]=_bf ;};};};return _fb ,nil ;};func (_ccb *fdfParser )parseDict ()(*_f .PdfObjectDictionary ,error ){_fa .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_dda :=_f .MakeDict ();_acc ,_ :=_ccb ._adb .ReadByte ();if _acc !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_acc ,_ =_ccb ._adb .ReadByte ();if _acc !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_ccb .skipSpaces ();_ccb .skipComments ();_defb ,_fdc :=_ccb ._adb .Peek (2);if _fdc !=nil {return nil ,_fdc ;};_fa .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_defb ),string (_defb ));
if (_defb [0]=='>')&&(_defb [1]=='>'){_fa .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_ccb ._adb .ReadByte ();_ccb ._adb .ReadByte ();break ;};_fa .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_dafe ,_fdc :=_ccb .parseName ();_fa .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_dafe );if _fdc !=nil {_fa .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_fdc );
return nil ,_fdc ;};if len (_dafe )> 4&&_dafe [len (_dafe )-4:]=="\u006e\u0075\u006c\u006c"{_cgdfb :=_dafe [0:len (_dafe )-4];_fa .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_dafe );
_fa .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_cgdfb );_ccb .skipSpaces ();_aec ,_ :=_ccb ._adb .Peek (1);if _aec [0]=='/'{_dda .Set (_cgdfb ,_f .MakeNull ());continue ;};};_ccb .skipSpaces ();
_ade ,_fdc :=_ccb .parseObject ();if _fdc !=nil {return nil ,_fdc ;};_dda .Set (_dafe ,_ade );_fa .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_dafe ,_ade .String ());};_fa .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _dda ,nil ;};func (_cec *fdfParser )skipComments ()error {if _ ,_aef :=_cec .skipSpaces ();_aef !=nil {return _aef ;};_bg :=true ;for {_dad ,_ggef :=_cec ._adb .Peek (1);if _ggef !=nil {_fa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ggef .Error ());
return _ggef ;};if _bg &&_dad [0]!='%'{return nil ;};_bg =false ;if (_dad [0]!='\r')&&(_dad [0]!='\n'){_cec ._adb .ReadByte ();}else {break ;};};return _cec .skipComments ();};

// Data represents forms data format (FDF) file data.
type Data struct{_cd *_f .PdfObjectDictionary ;_cdb *_f .PdfObjectArray ;};var _cae =_g .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");type fdfParser struct{_gda int ;_egd int ;_de map[int64 ]_f .PdfObject ;
_eb _cbb .ReadSeeker ;_adb *_ec .Reader ;_fae int64 ;_gb *_f .PdfObjectDictionary ;};

// Root returns the Root of the FDF document.
func (_caec *fdfParser )Root ()(*_f .PdfObjectDictionary ,error ){if _caec ._gb !=nil {if _agfg ,_gbdc :=_caec .trace (_caec ._gb .Get ("\u0052\u006f\u006f\u0074")).(*_f .PdfObjectDictionary );_gbdc {if _bbeg ,_edcc :=_caec .trace (_agfg .Get ("\u0046\u0044\u0046")).(*_f .PdfObjectDictionary );
_edcc {return _bbeg ,nil ;};};};var _fdbf []int64 ;for _fba :=range _caec ._de {_fdbf =append (_fdbf ,_fba );};_abe .Slice (_fdbf ,func (_fad ,_add int )bool {return _fdbf [_fad ]< _fdbf [_add ]});for _ ,_dge :=range _fdbf {_afe :=_caec ._de [_dge ];if _cbc ,_baga :=_caec .trace (_afe ).(*_f .PdfObjectDictionary );
_baga {if _gdb ,_ead :=_caec .trace (_cbc .Get ("\u0046\u0044\u0046")).(*_f .PdfObjectDictionary );_ead {return _gdb ,nil ;};};};return nil ,_e .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_eee *fdfParser )parseObject ()(_f .PdfObject ,error ){_fa .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_eee .skipSpaces ();for {_gbg ,_cc :=_eee ._adb .Peek (2);if _cc !=nil {return nil ,_cc ;};_fa .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gbg ));if _gbg [0]=='/'{_aa ,_ccg :=_eee .parseName ();
_fa .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_aa );return &_aa ,_ccg ;}else if _gbg [0]=='('{_fa .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _eee .parseString ();}else if _gbg [0]=='['{_fa .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _eee .parseArray ();}else if (_gbg [0]=='<')&&(_gbg [1]=='<'){_fa .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _eee .parseDict ();}else if _gbg [0]=='<'{_fa .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _eee .parseHexString ();}else if _gbg [0]=='%'{_eee .readComment ();_eee .skipSpaces ();}else {_fa .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gbg ,_ =_eee ._adb .Peek (15);_fdba :=string (_gbg );
_fa .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_fdba );if (len (_fdba )> 3)&&(_fdba [:4]=="\u006e\u0075\u006c\u006c"){_ebf ,_fac :=_eee .parseNull ();return &_ebf ,_fac ;}else if (len (_fdba )> 4)&&(_fdba [:5]=="\u0066\u0061\u006cs\u0065"){_dcf ,_cac :=_eee .parseBool ();
return &_dcf ,_cac ;}else if (len (_fdba )> 3)&&(_fdba [:4]=="\u0074\u0072\u0075\u0065"){_cadb ,_ffa :=_eee .parseBool ();return &_cadb ,_ffa ;};_ddg :=_ce .FindStringSubmatch (_fdba );if len (_ddg )> 1{_gbg ,_ =_eee ._adb .ReadBytes ('R');_fa .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gbg [:]));
_fgb ,_dabd :=_cgd (string (_gbg ));return &_fgb ,_dabd ;};_fdfb :=_cbf .FindStringSubmatch (_fdba );if len (_fdfb )> 1{_fa .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _eee .parseNumber ();};_fdfb =_abg .FindStringSubmatch (_fdba );
if len (_fdfb )> 1{_fa .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_fa .Log .Trace ("\u0025\u0020\u0073",_fdfb );return _eee .parseNumber ();};_fa .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_fdba );
return nil ,_e .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_beg *fdfParser )readComment ()(string ,error ){var _ede _b .Buffer ;_ ,_fgc :=_beg .skipSpaces ();if _fgc !=nil {return _ede .String (),_fgc ;};_gc :=true ;for {_bcg ,_ecb :=_beg ._adb .Peek (1);if _ecb !=nil {_fa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ecb .Error ());
return _ede .String (),_ecb ;};if _gc &&_bcg [0]!='%'{return _ede .String (),_e .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_gc =false ;if (_bcg [0]!='\r')&&(_bcg [0]!='\n'){_db ,_ :=_beg ._adb .ReadByte ();
_ede .WriteByte (_db );}else {break ;};};return _ede .String (),nil ;};var _ce =_g .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_f .PdfObject ,error ){_fg ,_abed :=fdf .FieldDictionaries ();if _abed !=nil {return nil ,_abed ;};var _gge []string ;for _ed :=range _fg {_gge =append (_gge ,_ed );};_abe .Strings (_gge );_be :=map[string ]_f .PdfObject {};
for _ ,_dd :=range _gge {_edc :=_fg [_dd ];_ae :=_f .TraceToDirectObject (_edc .Get ("\u0056"));_be [_dd ]=_ae ;};return _be ,nil ;};func (_gfe *fdfParser )parseHexString ()(*_f .PdfObjectString ,error ){_gfe ._adb .ReadByte ();var _cadf _b .Buffer ;for {_bbb ,_bac :=_gfe ._adb .Peek (1);
if _bac !=nil {return _f .MakeHexString (""),_bac ;};if _bbb [0]=='>'{_gfe ._adb .ReadByte ();break ;};_ege ,_ :=_gfe ._adb .ReadByte ();if !_f .IsWhiteSpace (_ege ){_cadf .WriteByte (_ege );};};if _cadf .Len ()%2==1{_cadf .WriteRune ('0');};_afg ,_gde :=_ca .DecodeString (_cadf .String ());
if _gde !=nil {_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_cadf .String ());
return _f .MakeHexString (""),nil ;};return _f .MakeHexString (string (_afg )),nil ;};func (_adc *fdfParser )parseFdfVersion ()(int ,int ,error ){_adc ._eb .Seek (0,_cbb .SeekStart );_cgdd :=20;_abfe :=make ([]byte ,_cgdd );_adc ._eb .Read (_abfe );_cbdc :=_cae .FindStringSubmatch (string (_abfe ));
if len (_cbdc )< 3{_ecbg ,_ded ,_cgc :=_adc .seekFdfVersionTopDown ();if _cgc !=nil {_fa .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_cgc ;};return _ecbg ,_ded ,nil ;};_ebff ,_bdb :=_cb .Atoi (_cbdc [1]);if _bdb !=nil {return 0,0,_bdb ;};_faa ,_bdb :=_cb .Atoi (_cbdc [2]);if _bdb !=nil {return 0,0,_bdb ;};_fa .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_ebff ,_faa );
return _ebff ,_faa ,nil ;};

// Load loads FDF form data from `r`.
func Load (r _cbb .ReadSeeker )(*Data ,error ){_ac ,_d :=_eeeg (r );if _d !=nil {return nil ,_d ;};_ba ,_d :=_ac .Root ();if _d !=nil {return nil ,_d ;};_dc ,_eg :=_f .GetArray (_ba .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_eg {return nil ,_e .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_cdb :_dc ,_cd :_ba },nil ;};func _eeeg (_cbbg _cbb .ReadSeeker )(*fdfParser ,error ){_dae :=&fdfParser {};_dae ._eb =_cbbg ;_dae ._de =map[int64 ]_f .PdfObject {};_feg ,_dcfc ,_ceef :=_dae .parseFdfVersion ();if _ceef !=nil {_fa .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_ceef );
return nil ,_ceef ;};_dae ._gda =_feg ;_dae ._egd =_dcfc ;_ceef =_dae .parse ();return _dae ,_ceef ;};func (_bfg *fdfParser )parseIndirectObject ()(_f .PdfObject ,error ){_cee :=_f .PdfIndirectObject {};_fa .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_dcdb ,_dgc :=_bfg ._adb .Peek (20);if _dgc !=nil {_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_cee ,_dgc ;};_fa .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_dcdb ));_gdf :=_ad .FindStringSubmatchIndex (string (_dcdb ));if len (_gdf )< 6{_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dcdb ));
return &_cee ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bfg ._adb .Discard (_gdf [0]);_fa .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_gdf );_cef :=_gdf [1]-_gdf [0];_ddf :=make ([]byte ,_cef );_ ,_dgc =_bfg .readAtLeast (_ddf ,_cef );if _dgc !=nil {_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_dgc );
return nil ,_dgc ;};_fa .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_ddf );_bef :=_ad .FindStringSubmatch (string (_ddf ));if len (_bef )< 3{_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ddf ));
return &_cee ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cbe ,_ :=_cb .Atoi (_bef [1]);_gec ,_ :=_cb .Atoi (_bef [2]);_cee .ObjectNumber =int64 (_cbe );_cee .GenerationNumber =int64 (_gec );for {_gae ,_afc :=_bfg ._adb .Peek (2);if _afc !=nil {return &_cee ,_afc ;};_fa .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_gae ),string (_gae ));
if _f .IsWhiteSpace (_gae [0]){_bfg .skipSpaces ();}else if _gae [0]=='%'{_bfg .skipComments ();}else if (_gae [0]=='<')&&(_gae [1]=='<'){_fa .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cee .PdfObject ,_afc =_bfg .parseDict ();
_fa .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_afc );if _afc !=nil {return &_cee ,_afc ;};_fa .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_gae [0]=='/')||(_gae [0]=='(')||(_gae [0]=='[')||(_gae [0]=='<'){_cee .PdfObject ,_afc =_bfg .parseObject ();if _afc !=nil {return &_cee ,_afc ;};_fa .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _gae [0]=='e'{_fbdd ,_bfc :=_bfg .readTextLine ();if _bfc !=nil {return nil ,_bfc ;};if len (_fbdd )>=6&&_fbdd [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _gae [0]=='s'{_gae ,_ =_bfg ._adb .Peek (10);if string (_gae [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_efce :=6;
if len (_gae )> 6{if _f .IsWhiteSpace (_gae [_efce ])&&_gae [_efce ]!='\r'&&_gae [_efce ]!='\n'{_fa .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_efce ++;};if _gae [_efce ]=='\r'{_efce ++;if _gae [_efce ]=='\n'{_efce ++;};}else if _gae [_efce ]=='\n'{_efce ++;};};_bfg ._adb .Discard (_efce );_ega ,_fde :=_cee .PdfObject .(*_f .PdfObjectDictionary );if !_fde {return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_fa .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_ega );_abge ,_egc :=_ega .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_f .PdfObjectInteger );if !_egc {return nil ,_e .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_bfd :=*_abge ;if _bfd < 0{return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_bfd )> _bfg ._fae {_fa .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_e .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_gba :=make ([]byte ,_bfd );
_ ,_afc =_bfg .readAtLeast (_gba ,int (_bfd ));if _afc !=nil {_fa .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_gba ),_gba );_fa .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_afc );
return nil ,_afc ;};_ada :=_f .PdfObjectStream {};_ada .Stream =_gba ;_ada .PdfObjectDictionary =_cee .PdfObject .(*_f .PdfObjectDictionary );_ada .ObjectNumber =_cee .ObjectNumber ;_ada .GenerationNumber =_cee .GenerationNumber ;_bfg .skipSpaces ();_bfg ._adb .Discard (9);
_bfg .skipSpaces ();return &_ada ,nil ;};};_cee .PdfObject ,_afc =_bfg .parseObject ();return &_cee ,_afc ;};};_fa .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_cee ,nil ;
};func (_dgf *fdfParser )parseNull ()(_f .PdfObjectNull ,error ){_ ,_eae :=_dgf ._adb .Discard (4);return _f .PdfObjectNull {},_eae ;};var _cbf =_g .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func _dgg (_gbef string )(*fdfParser ,error ){_gbeb :=fdfParser {};_fga :=[]byte (_gbef );_bded :=_b .NewReader (_fga );_gbeb ._eb =_bded ;_gbeb ._de =map[int64 ]_f .PdfObject {};_bbbd :=_ec .NewReader (_bded );_gbeb ._adb =_bbbd ;_gbeb ._fae =int64 (len (_gbef ));
return &_gbeb ,_gbeb .parse ();};func (_aeef *fdfParser )parse ()error {_aeef ._eb .Seek (0,_cbb .SeekStart );_aeef ._adb =_ec .NewReader (_aeef ._eb );for {_aeef .skipComments ();_afgg ,_cgcb :=_aeef ._adb .Peek (20);if _cgcb !=nil {_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _cgcb ;};if _a .HasPrefix (string (_afgg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_aeef ._adb .Discard (7);_aeef .skipSpaces ();_aeef .skipComments ();_faeb ,_ :=_aeef .parseDict ();_aeef ._gb =_faeb ;break ;};_fgf :=_ad .FindStringSubmatchIndex (string (_afgg ));
if len (_fgf )< 6{_fa .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_afgg ));
return _e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_daad ,_cgcb :=_aeef .parseIndirectObject ();if _cgcb !=nil {return _cgcb ;};switch _abd :=_daad .(type ){case *_f .PdfIndirectObject :_aeef ._de [_abd .ObjectNumber ]=_abd ;case *_f .PdfObjectStream :_aeef ._de [_abd .ObjectNumber ]=_abd ;default:return _e .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_ddb *fdfParser )trace (_ecg _f .PdfObject )_f .PdfObject {switch _bga :=_ecg .(type ){case *_f .PdfObjectReference :_cabd ,_gee :=_ddb ._de [_bga .ObjectNumber ].(*_f .PdfIndirectObject );if _gee {return _cabd .PdfObject ;};_fa .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_f .PdfIndirectObject :return _bga .PdfObject ;};return _ecg ;};func _cgd (_def string )(_f .PdfObjectReference ,error ){_bbc :=_f .PdfObjectReference {};_fe :=_ce .FindStringSubmatch (_def );if len (_fe )< 3{_fa .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _bbc ,_e .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_cdd ,_cgde :=_cb .Atoi (_fe [1]);if _cgde !=nil {_fa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fe [1]);
return _bbc ,nil ;};_bbc .ObjectNumber =int64 (_cdd );_cbd ,_cgde :=_cb .Atoi (_fe [2]);if _cgde !=nil {_fa .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fe [2]);
return _bbc ,nil ;};_bbc .GenerationNumber =int64 (_cbd );return _bbc ,nil ;};func (_ffc *fdfParser )parseString ()(*_f .PdfObjectString ,error ){_ffc ._adb .ReadByte ();var _cab _b .Buffer ;_cbbe :=1;for {_gfg ,_ggab :=_ffc ._adb .Peek (1);if _ggab !=nil {return _f .MakeString (_cab .String ()),_ggab ;
};if _gfg [0]=='\\'{_ffc ._adb .ReadByte ();_edg ,_cdbe :=_ffc ._adb .ReadByte ();if _cdbe !=nil {return _f .MakeString (_cab .String ()),_cdbe ;};if _f .IsOctalDigit (_edg ){_eag ,_aca :=_ffc ._adb .Peek (2);if _aca !=nil {return _f .MakeString (_cab .String ()),_aca ;
};var _bde []byte ;_bde =append (_bde ,_edg );for _ ,_fag :=range _eag {if _f .IsOctalDigit (_fag ){_bde =append (_bde ,_fag );}else {break ;};};_ffc ._adb .Discard (len (_bde )-1);_fa .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_bde );
_abef ,_aca :=_cb .ParseUint (string (_bde ),8,32);if _aca !=nil {return _f .MakeString (_cab .String ()),_aca ;};_cab .WriteByte (byte (_abef ));continue ;};switch _edg {case 'n':_cab .WriteRune ('\n');case 'r':_cab .WriteRune ('\r');case 't':_cab .WriteRune ('\t');
case 'b':_cab .WriteRune ('\b');case 'f':_cab .WriteRune ('\f');case '(':_cab .WriteRune ('(');case ')':_cab .WriteRune (')');case '\\':_cab .WriteRune ('\\');};continue ;}else if _gfg [0]=='('{_cbbe ++;}else if _gfg [0]==')'{_cbbe --;if _cbbe ==0{_ffc ._adb .ReadByte ();
break ;};};_ge ,_ :=_ffc ._adb .ReadByte ();_cab .WriteByte (_ge );};return _f .MakeString (_cab .String ()),nil ;};func (_aee *fdfParser )getFileOffset ()int64 {_daa ,_ :=_aee ._eb .Seek (0,_cbb .SeekCurrent );_daa -=int64 (_aee ._adb .Buffered ());return _daa ;
};func (_gbe *fdfParser )seekToEOFMarker (_dgd int64 )error {_bdf :=int64 (0);_fbe :=int64 (1000);for _bdf < _dgd {if _dgd <=(_fbe +_bdf ){_fbe =_dgd -_bdf ;};_ ,_cfbe :=_gbe ._eb .Seek (-_bdf -_fbe ,_cbb .SeekEnd );if _cfbe !=nil {return _cfbe ;};_bbe :=make ([]byte ,_fbe );
_gbe ._eb .Read (_bbe );_fa .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_bbe ));_cdda :=_gga .FindAllStringIndex (string (_bbe ),-1);
if _cdda !=nil {_gdg :=_cdda [len (_cdda )-1];_fa .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_cdda );_gbe ._eb .Seek (-_bdf -_fbe +int64 (_gdg [0]),_cbb .SeekEnd );return nil ;};_fa .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_bdf +=_fbe ;};_fa .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _e .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};