//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_g "bufio";_ca "bytes";_be "encoding/hex";_f "errors";_bf "fmt";_beb "github.com/unidoc/unipdf/v3/common";_ge "github.com/unidoc/unipdf/v3/core";_e "io";_af "os";_ff "regexp";_a "sort";_c "strconv";_fd "strings";);func _ffdc (_fefd string )(*fdfParser ,error ){_cfgd :=fdfParser {};
_fcg :=[]byte (_fefd );_gfdd :=_ca .NewReader (_fcg );_cfgd ._fb =_gfdd ;_cfgd ._fdg =map[int64 ]_ge .PdfObject {};_afg :=_g .NewReader (_gfdd );_cfgd ._fed =_afg ;_cfgd ._cab =int64 (len (_fefd ));return &_cfgd ,_cfgd .parse ();};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_cc ,_cf :=_af .Open (fdfPath );if _cf !=nil {return nil ,_cf ;};defer _cc .Close ();return Load (_cc );};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_ge .PdfObject ,error ){_bg ,_bfc :=fdf .FieldDictionaries ();if _bfc !=nil {return nil ,_bfc ;};var _fe []string ;for _gf :=range _bg {_fe =append (_fe ,_gf );};_a .Strings (_fe );_ac :=map[string ]_ge .PdfObject {};
for _ ,_ged :=range _fe {_dcd :=_bg [_ged ];_gee :=_ge .TraceToDirectObject (_dcd .Get ("\u0056"));_ac [_ged ]=_gee ;};return _ac ,nil ;};func (_de *fdfParser )parseString ()(*_ge .PdfObjectString ,error ){_de ._fed .ReadByte ();var _bbc _ca .Buffer ;_dee :=1;
for {_fee ,_fbg :=_de ._fed .Peek (1);if _fbg !=nil {return _ge .MakeString (_bbc .String ()),_fbg ;};if _fee [0]=='\\'{_de ._fed .ReadByte ();_gc ,_fbge :=_de ._fed .ReadByte ();if _fbge !=nil {return _ge .MakeString (_bbc .String ()),_fbge ;};if _ge .IsOctalDigit (_gc ){_aae ,_afe :=_de ._fed .Peek (2);
if _afe !=nil {return _ge .MakeString (_bbc .String ()),_afe ;};var _abe []byte ;_abe =append (_abe ,_gc );for _ ,_fecc :=range _aae {if _ge .IsOctalDigit (_fecc ){_abe =append (_abe ,_fecc );}else {break ;};};_de ._fed .Discard (len (_abe )-1);_beb .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_abe );
_eab ,_afe :=_c .ParseUint (string (_abe ),8,32);if _afe !=nil {return _ge .MakeString (_bbc .String ()),_afe ;};_bbc .WriteByte (byte (_eab ));continue ;};switch _gc {case 'n':_bbc .WriteRune ('\n');case 'r':_bbc .WriteRune ('\r');case 't':_bbc .WriteRune ('\t');
case 'b':_bbc .WriteRune ('\b');case 'f':_bbc .WriteRune ('\f');case '(':_bbc .WriteRune ('(');case ')':_bbc .WriteRune (')');case '\\':_bbc .WriteRune ('\\');};continue ;}else if _fee [0]=='('{_dee ++;}else if _fee [0]==')'{_dee --;if _dee ==0{_de ._fed .ReadByte ();
break ;};};_ccg ,_ :=_de ._fed .ReadByte ();_bbc .WriteByte (_ccg );};return _ge .MakeString (_bbc .String ()),nil ;};func (_fec *fdfParser )setFileOffset (_edf int64 ){_fec ._fb .Seek (_edf ,_e .SeekStart );_fec ._fed =_g .NewReader (_fec ._fb );};func (_aa *fdfParser )readComment ()(string ,error ){var _dca _ca .Buffer ;
_ ,_ede :=_aa .skipSpaces ();if _ede !=nil {return _dca .String (),_ede ;};_dde :=true ;for {_cdd ,_fc :=_aa ._fed .Peek (1);if _fc !=nil {_beb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fc .Error ());return _dca .String (),_fc ;};
if _dde &&_cdd [0]!='%'{return _dca .String (),_f .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_dde =false ;if (_cdd [0]!='\r')&&(_cdd [0]!='\n'){_ddf ,_ :=_aa ._fed .ReadByte ();
_dca .WriteByte (_ddf );}else {break ;};};return _dca .String (),nil ;};func (_gd *fdfParser )readAtLeast (_geg []byte ,_aca int )(int ,error ){_eg :=_aca ;_ab :=0;_egd :=0;for _eg > 0{_fef ,_bbd :=_gd ._fed .Read (_geg [_ab :]);if _bbd !=nil {_beb .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_fef ,_egd ,_bbd .Error ());
return _ab ,_f .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_egd ++;_ab +=_fef ;_eg -=_fef ;};return _ab ,nil ;};func (_dcf *fdfParser )parseFdfVersion ()(int ,int ,error ){_dcf ._fb .Seek (0,_e .SeekStart );
_gbf :=20;_dfg :=make ([]byte ,_gbf );_dcf ._fb .Read (_dfg );_bgaa :=_eda .FindStringSubmatch (string (_dfg ));if len (_bgaa )< 3{_gfb ,_fca ,_bacg :=_dcf .seekFdfVersionTopDown ();if _bacg !=nil {_beb .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_bacg ;};return _gfb ,_fca ,nil ;};_cfc ,_bbce :=_c .Atoi (_bgaa [1]);if _bbce !=nil {return 0,0,_bbce ;};_ddee ,_bbce :=_c .Atoi (_bgaa [2]);if _bbce !=nil {return 0,0,_bbce ;};_beb .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_cfc ,_ddee );
return _cfc ,_ddee ,nil ;};func _dge (_dbd string )(_ge .PdfObjectReference ,error ){_ffd :=_ge .PdfObjectReference {};_gfc :=_bdd .FindStringSubmatch (_dbd );if len (_gfc )< 3{_beb .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _ffd ,_f .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_eca ,_gcd :=_c .Atoi (_gfc [1]);if _gcd !=nil {_beb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_gfc [1]);
return _ffd ,nil ;};_ffd .ObjectNumber =int64 (_eca );_dgb ,_gcd :=_c .Atoi (_gfc [2]);if _gcd !=nil {_beb .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_gfc [2]);
return _ffd ,nil ;};_ffd .GenerationNumber =int64 (_dgb );return _ffd ,nil ;};func (_df *fdfParser )parseBool ()(_ge .PdfObjectBool ,error ){_bag ,_deeb :=_df ._fed .Peek (4);if _deeb !=nil {return _ge .PdfObjectBool (false ),_deeb ;};if (len (_bag )>=4)&&(string (_bag [:4])=="\u0074\u0072\u0075\u0065"){_df ._fed .Discard (4);
return _ge .PdfObjectBool (true ),nil ;};_bag ,_deeb =_df ._fed .Peek (5);if _deeb !=nil {return _ge .PdfObjectBool (false ),_deeb ;};if (len (_bag )>=5)&&(string (_bag [:5])=="\u0066\u0061\u006cs\u0065"){_df ._fed .Discard (5);return _ge .PdfObjectBool (false ),nil ;
};return _ge .PdfObjectBool (false ),_f .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_bede *fdfParser )skipSpaces ()(int ,error ){_feb :=0;for {_bba ,_geb :=_bede ._fed .ReadByte ();
if _geb !=nil {return 0,_geb ;};if _ge .IsWhiteSpace (_bba ){_feb ++;}else {_bede ._fed .UnreadByte ();break ;};};return _feb ,nil ;};func (_ec *fdfParser )parseArray ()(*_ge .PdfObjectArray ,error ){_fbe :=_ge .MakeArray ();_ec ._fed .ReadByte ();for {_ec .skipSpaces ();
_cdb ,_fda :=_ec ._fed .Peek (1);if _fda !=nil {return _fbe ,_fda ;};if _cdb [0]==']'{_ec ._fed .ReadByte ();break ;};_gec ,_fda :=_ec .parseObject ();if _fda !=nil {return _fbe ,_fda ;};_fbe .Append (_gec );};return _fbe ,nil ;};func (_bfe *fdfParser )parseDict ()(*_ge .PdfObjectDictionary ,error ){_beb .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_dbdc :=_ge .MakeDict ();_ecd ,_ :=_bfe ._fed .ReadByte ();if _ecd !='<'{return nil ,_f .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_ecd ,_ =_bfe ._fed .ReadByte ();if _ecd !='<'{return nil ,_f .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_bfe .skipSpaces ();_bfe .skipComments ();_bace ,_ebg :=_bfe ._fed .Peek (2);if _ebg !=nil {return nil ,_ebg ;};_beb .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bace ),string (_bace ));
if (_bace [0]=='>')&&(_bace [1]=='>'){_beb .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_bfe ._fed .ReadByte ();_bfe ._fed .ReadByte ();break ;};_beb .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_acg ,_ebg :=_bfe .parseName ();_beb .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_acg );if _ebg !=nil {_beb .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_ebg );
return nil ,_ebg ;};if len (_acg )> 4&&_acg [len (_acg )-4:]=="\u006e\u0075\u006c\u006c"{_agb :=_acg [0:len (_acg )-4];_beb .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_acg );
_beb .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_agb );_bfe .skipSpaces ();_ggb ,_ :=_bfe ._fed .Peek (1);if _ggb [0]=='/'{_dbdc .Set (_agb ,_ge .MakeNull ());continue ;};};_bfe .skipSpaces ();
_fgf ,_ebg :=_bfe .parseObject ();if _ebg !=nil {return nil ,_ebg ;};_dbdc .Set (_acg ,_fgf );_beb .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_acg ,_fgf .String ());};_beb .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _dbdc ,nil ;};func (_cce *fdfParser )getFileOffset ()int64 {_fdb ,_ :=_cce ._fb .Seek (0,_e .SeekCurrent );_fdb -=int64 (_cce ._fed .Buffered ());return _fdb ;};func (_dg *fdfParser )parseHexString ()(*_ge .PdfObjectString ,error ){_dg ._fed .ReadByte ();
var _eaba _ca .Buffer ;for {_dga ,_cea :=_dg ._fed .Peek (1);if _cea !=nil {return _ge .MakeHexString (""),_cea ;};if _dga [0]=='>'{_dg ._fed .ReadByte ();break ;};_bcg ,_ :=_dg ._fed .ReadByte ();if !_ge .IsWhiteSpace (_bcg ){_eaba .WriteByte (_bcg );
};};if _eaba .Len ()%2==1{_eaba .WriteRune ('0');};_cge ,_ga :=_be .DecodeString (_eaba .String ());if _ga !=nil {_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_eaba .String ());
return _ge .MakeHexString (""),nil ;};return _ge .MakeHexString (string (_cge )),nil ;};var _dd =_ff .MustCompile ("\u0025\u0025\u0045O\u0046");var _cff =_ff .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
type fdfParser struct{_db int ;_eba int ;_fdg map[int64 ]_ge .PdfObject ;_fb _e .ReadSeeker ;_fed *_g .Reader ;_cab int64 ;_bebf *_ge .PdfObjectDictionary ;};

// Load loads FDF form data from `r`.
func Load (r _e .ReadSeeker )(*Data ,error ){_d ,_bed :=_deg (r );if _bed !=nil {return nil ,_bed ;};_ef ,_bed :=_d .Root ();if _bed !=nil {return nil ,_bed ;};_bd ,_cd :=_ge .GetArray (_ef .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_cd {return nil ,_f .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_bb :_bd ,_fg :_ef },nil ;};func (_ebd *fdfParser )trace (_dcdd _ge .PdfObject )_ge .PdfObject {switch _cde :=_dcdd .(type ){case *_ge .PdfObjectReference :_bafe ,_dced :=_ebd ._fdg [_cde .ObjectNumber ].(*_ge .PdfIndirectObject );if _dced {return _bafe .PdfObject ;
};_beb .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_ge .PdfIndirectObject :return _cde .PdfObject ;};return _dcdd ;};func (_ba *fdfParser )skipComments ()error {if _ ,_cdf :=_ba .skipSpaces ();_cdf !=nil {return _cdf ;
};_gb :=true ;for {_dae ,_cfa :=_ba ._fed .Peek (1);if _cfa !=nil {_beb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cfa .Error ());return _cfa ;};if _gb &&_dae [0]!='%'{return nil ;};_gb =false ;if (_dae [0]!='\r')&&(_dae [0]!='\n'){_ba ._fed .ReadByte ();
}else {break ;};};return _ba .skipComments ();};

// Data represents forms data format (FDF) file data.
type Data struct{_fg *_ge .PdfObjectDictionary ;_bb *_ge .PdfObjectArray ;};var _ea =_ff .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");var _da =_ff .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_afc *fdfParser )parse ()error {_afc ._fb .Seek (0,_e .SeekStart );_afc ._fed =_g .NewReader (_afc ._fb );for {_afc .skipComments ();_fac ,_bdb :=_afc ._fed .Peek (20);if _bdb !=nil {_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _bdb ;};if _fd .HasPrefix (string (_fac ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_afc ._fed .Discard (7);_afc .skipSpaces ();_afc .skipComments ();_fdc ,_ :=_afc .parseDict ();_afc ._bebf =_fdc ;break ;};_ace :=_cff .FindStringSubmatchIndex (string (_fac ));
if len (_ace )< 6{_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fac ));
return _f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_caf ,_bdb :=_afc .parseIndirectObject ();if _bdb !=nil {return _bdb ;};switch _gba :=_caf .(type ){case *_ge .PdfIndirectObject :_afc ._fdg [_gba .ObjectNumber ]=_gba ;case *_ge .PdfObjectStream :_afc ._fdg [_gba .ObjectNumber ]=_gba ;default:return _f .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_dfe *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_dfe ._fb .Seek (0,_e .SeekStart );_dfe ._fed =_g .NewReader (_dfe ._fb );_edad :=20;_daf :=make ([]byte ,_edad );for {_cdffa ,_acaa :=_dfe ._fed .ReadByte ();if _acaa !=nil {if _acaa ==_e .EOF {break ;
}else {return 0,0,_acaa ;};};if _ge .IsDecimalDigit (_cdffa )&&_daf [_edad -1]=='.'&&_ge .IsDecimalDigit (_daf [_edad -2])&&_daf [_edad -3]=='-'&&_daf [_edad -4]=='F'&&_daf [_edad -5]=='D'&&_daf [_edad -6]=='P'{_daeg :=int (_daf [_edad -2]-'0');_ebga :=int (_cdffa -'0');
return _daeg ,_ebga ,nil ;};_daf =append (_daf [1:_edad ],_cdffa );};return 0,0,_f .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};

// Root returns the Root of the FDF document.
func (_bgf *fdfParser )Root ()(*_ge .PdfObjectDictionary ,error ){if _bgf ._bebf !=nil {if _adg ,_feba :=_bgf .trace (_bgf ._bebf .Get ("\u0052\u006f\u006f\u0074")).(*_ge .PdfObjectDictionary );_feba {if _gefd ,_gebc :=_bgf .trace (_adg .Get ("\u0046\u0044\u0046")).(*_ge .PdfObjectDictionary );
_gebc {return _gefd ,nil ;};};};var _cca []int64 ;for _cbd :=range _bgf ._fdg {_cca =append (_cca ,_cbd );};_a .Slice (_cca ,func (_ffg ,_ffa int )bool {return _cca [_ffg ]< _cca [_ffa ]});for _ ,_beg :=range _cca {_dcdf :=_bgf ._fdg [_beg ];if _ebb ,_acc :=_bgf .trace (_dcdf ).(*_ge .PdfObjectDictionary );
_acc {if _bdf ,_aeb :=_bgf .trace (_ebb .Get ("\u0046\u0044\u0046")).(*_ge .PdfObjectDictionary );_aeb {return _bdf ,nil ;};};};return nil ,_f .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func _deg (_dbdg _e .ReadSeeker )(*fdfParser ,error ){_bbcd :=&fdfParser {};
_bbcd ._fb =_dbdg ;_bbcd ._fdg =map[int64 ]_ge .PdfObject {};_afb ,_bbae ,_cdbf :=_bbcd .parseFdfVersion ();if _cdbf !=nil {_beb .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_cdbf );
return nil ,_cdbf ;};_bbcd ._db =_afb ;_bbcd ._eba =_bbae ;_cdbf =_bbcd .parse ();return _bbcd ,_cdbf ;};func (_caa *fdfParser )readTextLine ()(string ,error ){var _ee _ca .Buffer ;for {_eff ,_gg :=_caa ._fed .Peek (1);if _gg !=nil {_beb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gg .Error ());
return _ee .String (),_gg ;};if (_eff [0]!='\r')&&(_eff [0]!='\n'){_fgg ,_ :=_caa ._fed .ReadByte ();_ee .WriteByte (_fgg );}else {break ;};};return _ee .String (),nil ;};func (_beba *fdfParser )parseNull ()(_ge .PdfObjectNull ,error ){_ ,_dgg :=_beba ._fed .Discard (4);
return _ge .PdfObjectNull {},_dgg ;};func (_cfd *fdfParser )parseIndirectObject ()(_ge .PdfObject ,error ){_fbee :=_ge .PdfIndirectObject {};_beb .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_eed ,_bdaa :=_cfd ._fed .Peek (20);
if _bdaa !=nil {_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_fbee ,_bdaa ;};_beb .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_eed ));
_bdab :=_cff .FindStringSubmatchIndex (string (_eed ));if len (_bdab )< 6{_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_eed ));
return &_fbee ,_f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cfd ._fed .Discard (_bdab [0]);_beb .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_bdab );_cdff :=_bdab [1]-_bdab [0];_affg :=make ([]byte ,_cdff );_ ,_bdaa =_cfd .readAtLeast (_affg ,_cdff );if _bdaa !=nil {_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_bdaa );
return nil ,_bdaa ;};_beb .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_affg );_fbba :=_cff .FindStringSubmatch (string (_affg ));if len (_fbba )< 3{_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_affg ));
return &_fbee ,_f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bcf ,_ :=_c .Atoi (_fbba [1]);_eeb ,_ :=_c .Atoi (_fbba [2]);_fbee .ObjectNumber =int64 (_bcf );_fbee .GenerationNumber =int64 (_eeb );for {_cddf ,_bca :=_cfd ._fed .Peek (2);if _bca !=nil {return &_fbee ,_bca ;};_beb .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cddf ),string (_cddf ));
if _ge .IsWhiteSpace (_cddf [0]){_cfd .skipSpaces ();}else if _cddf [0]=='%'{_cfd .skipComments ();}else if (_cddf [0]=='<')&&(_cddf [1]=='<'){_beb .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_fbee .PdfObject ,_bca =_cfd .parseDict ();
_beb .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_bca );if _bca !=nil {return &_fbee ,_bca ;};_beb .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_cddf [0]=='/')||(_cddf [0]=='(')||(_cddf [0]=='[')||(_cddf [0]=='<'){_fbee .PdfObject ,_bca =_cfd .parseObject ();if _bca !=nil {return &_fbee ,_bca ;};_beb .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _cddf [0]=='e'{_dag ,_dcaa :=_cfd .readTextLine ();if _dcaa !=nil {return nil ,_dcaa ;};if len (_dag )>=6&&_dag [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _cddf [0]=='s'{_cddf ,_ =_cfd ._fed .Peek (10);if string (_cddf [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_gea :=6;
if len (_cddf )> 6{if _ge .IsWhiteSpace (_cddf [_gea ])&&_cddf [_gea ]!='\r'&&_cddf [_gea ]!='\n'{_beb .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_gea ++;};if _cddf [_gea ]=='\r'{_gea ++;if _cddf [_gea ]=='\n'{_gea ++;};}else if _cddf [_gea ]=='\n'{_gea ++;};};_cfd ._fed .Discard (_gea );_fbeec ,_fgc :=_fbee .PdfObject .(*_ge .PdfObjectDictionary );if !_fgc {return nil ,_f .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_beb .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_fbeec );_fgfg ,_baf :=_fbeec .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_ge .PdfObjectInteger );if !_baf {return nil ,_f .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_becb :=*_fgfg ;if _becb < 0{return nil ,_f .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_becb )> _cfd ._cab {_beb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_f .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_egb :=make ([]byte ,_becb );
_ ,_bca =_cfd .readAtLeast (_egb ,int (_becb ));if _bca !=nil {_beb .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_egb ),_egb );_beb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bca );
return nil ,_bca ;};_ecaa :=_ge .PdfObjectStream {};_ecaa .Stream =_egb ;_ecaa .PdfObjectDictionary =_fbee .PdfObject .(*_ge .PdfObjectDictionary );_ecaa .ObjectNumber =_fbee .ObjectNumber ;_ecaa .GenerationNumber =_fbee .GenerationNumber ;_cfd .skipSpaces ();
_cfd ._fed .Discard (9);_cfd .skipSpaces ();return &_ecaa ,nil ;};};_fbee .PdfObject ,_bca =_cfd .parseObject ();return &_fbee ,_bca ;};};_beb .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_fbee ,nil ;};func (_ebad *fdfParser )parseNumber ()(_ge .PdfObject ,error ){return _ge .ParseNumber (_ebad ._fed )};var _eda =_ff .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_gda *fdfParser )parseObject ()(_ge .PdfObject ,error ){_beb .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_gda .skipSpaces ();for {_gef ,_dbdb :=_gda ._fed .Peek (2);if _dbdb !=nil {return nil ,_dbdb ;};_beb .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gef ));if _gef [0]=='/'{_afea ,_bff :=_gda .parseName ();
_beb .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_afea );return &_afea ,_bff ;}else if _gef [0]=='('{_beb .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gda .parseString ();}else if _gef [0]=='['{_beb .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _gda .parseArray ();}else if (_gef [0]=='<')&&(_gef [1]=='<'){_beb .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gda .parseDict ();}else if _gef [0]=='<'{_beb .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _gda .parseHexString ();}else if _gef [0]=='%'{_gda .readComment ();_gda .skipSpaces ();}else {_beb .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gef ,_ =_gda ._fed .Peek (15);_dbg :=string (_gef );
_beb .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_dbg );if (len (_dbg )> 3)&&(_dbg [:4]=="\u006e\u0075\u006c\u006c"){_bfcb ,_bde :=_gda .parseNull ();return &_bfcb ,_bde ;}else if (len (_dbg )> 4)&&(_dbg [:5]=="\u0066\u0061\u006cs\u0065"){_fcc ,_ecad :=_gda .parseBool ();
return &_fcc ,_ecad ;}else if (len (_dbg )> 3)&&(_dbg [:4]=="\u0074\u0072\u0075\u0065"){_ebada ,_gca :=_gda .parseBool ();return &_ebada ,_gca ;};_fbf :=_bdd .FindStringSubmatch (_dbg );if len (_fbf )> 1{_gef ,_ =_gda ._fed .ReadBytes ('R');_beb .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gef [:]));
_cbc ,_acb :=_dge (string (_gef ));return &_cbc ,_acb ;};_ceab :=_ea .FindStringSubmatch (_dbg );if len (_ceab )> 1{_beb .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gda .parseNumber ();};_ceab =_da .FindStringSubmatch (_dbg );
if len (_ceab )> 1{_beb .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_beb .Log .Trace ("\u0025\u0020\u0073",_ceab );return _gda .parseNumber ();};_beb .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_dbg );
return nil ,_f .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};var _bdd =_ff .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_dce *fdfParser )seekToEOFMarker (_gaa int64 )error {_gac :=int64 (0);_efc :=int64 (1000);for _gac < _gaa {if _gaa <=(_efc +_gac ){_efc =_gaa -_gac ;
};_ ,_gbg :=_dce ._fb .Seek (-_gac -_efc ,_e .SeekEnd );if _gbg !=nil {return _gbg ;};_dcdb :=make ([]byte ,_efc );_dce ._fb .Read (_dcdb );_beb .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_dcdb ));
_acf :=_dd .FindAllStringIndex (string (_dcdb ),-1);if _acf !=nil {_cabf :=_acf [len (_acf )-1];_beb .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_acf );_dce ._fb .Seek (-_gac -_efc +int64 (_cabf [0]),_e .SeekEnd );return nil ;};_beb .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_gac +=_efc ;};_beb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _f .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_ge .PdfObjectDictionary ,error ){_eb :=map[string ]*_ge .PdfObjectDictionary {};for _ce :=0;_ce < fdf ._bb .Len ();_ce ++{_edd ,_bda :=_ge .GetDict (fdf ._bb .Get (_ce ));if _bda {_cfb ,_ :=_ge .GetString (_edd .Get ("\u0054"));
if _cfb !=nil {_eb [_cfb .Str ()]=_edd ;};};};return _eb ,nil ;};func (_gfd *fdfParser )parseName ()(_ge .PdfObjectName ,error ){var _fad _ca .Buffer ;_cg :=false ;for {_bc ,_cb :=_gfd ._fed .Peek (1);if _cb ==_e .EOF {break ;};if _cb !=nil {return _ge .PdfObjectName (_fad .String ()),_cb ;
};if !_cg {if _bc [0]=='/'{_cg =true ;_gfd ._fed .ReadByte ();}else if _bc [0]=='%'{_gfd .readComment ();_gfd .skipSpaces ();}else {_beb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_bc ,_bc );
return _ge .PdfObjectName (_fad .String ()),_bf .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_bc [0]);};}else {if _ge .IsWhiteSpace (_bc [0]){break ;}else if (_bc [0]=='/')||(_bc [0]=='[')||(_bc [0]=='(')||(_bc [0]==']')||(_bc [0]=='<')||(_bc [0]=='>'){break ;
}else if _bc [0]=='#'{_bga ,_fbb :=_gfd ._fed .Peek (3);if _fbb !=nil {return _ge .PdfObjectName (_fad .String ()),_fbb ;};_gfd ._fed .Discard (3);_cfg ,_fbb :=_be .DecodeString (string (_bga [1:3]));if _fbb !=nil {return _ge .PdfObjectName (_fad .String ()),_fbb ;
};_fad .Write (_cfg );}else {_cee ,_ :=_gfd ._fed .ReadByte ();_fad .WriteByte (_cee );};};};return _ge .PdfObjectName (_fad .String ()),nil ;};