//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_fc "bufio";_db "bytes";_d "encoding/hex";_e "errors";_ac "fmt";_gd "github.com/unidoc/unipdf/v3/common";_da "github.com/unidoc/unipdf/v3/core";_c "io";_ad "os";_f "regexp";_ef "sort";_a "strconv";_eg "strings";);func (_cb *fdfParser )readTextLine ()(string ,error ){var _ged _db .Buffer ;
for {_gedb ,_ccd :=_cb ._ed .Peek (1);if _ccd !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ccd .Error ());return _ged .String (),_ccd ;};if (_gedb [0]!='\r')&&(_gedb [0]!='\n'){_afa ,_ :=_cb ._ed .ReadByte ();_ged .WriteByte (_afa );
}else {break ;};};return _ged .String (),nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_fcb ,_ea :=_ad .Open (fdfPath );if _ea !=nil {return nil ,_ea ;};defer _fcb .Close ();return Load (_fcb );};func (_bff *fdfParser )readComment ()(string ,error ){var _fcg _db .Buffer ;_ ,_cag :=_bff .skipSpaces ();
if _cag !=nil {return _fcg .String (),_cag ;};_de :=true ;for {_geg ,_gega :=_bff ._ed .Peek (1);if _gega !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gega .Error ());return _fcg .String (),_gega ;};if _de &&_geg [0]!='%'{return _fcg .String (),_e .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_de =false ;if (_geg [0]!='\r')&&(_geg [0]!='\n'){_adb ,_ :=_bff ._ed .ReadByte ();_fcg .WriteByte (_adb );}else {break ;};};return _fcg .String (),nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_da .PdfObjectDictionary ,error ){_dd :=map[string ]*_da .PdfObjectDictionary {};for _ab :=0;_ab < fdf ._dag .Len ();_ab ++{_fdc ,_ca :=_da .GetDict (fdf ._dag .Get (_ab ));if _ca {_fa ,_ :=_da .GetString (_fdc .Get ("\u0054"));
if _fa !=nil {_dd [_fa .Str ()]=_fdc ;};};};return _dd ,nil ;};func (_cce *fdfParser )parseString ()(*_da .PdfObjectString ,error ){_cce ._ed .ReadByte ();var _cde _db .Buffer ;_ccee :=1;for {_eea ,_fcc :=_cce ._ed .Peek (1);if _fcc !=nil {return _da .MakeString (_cde .String ()),_fcc ;
};if _eea [0]=='\\'{_cce ._ed .ReadByte ();_fef ,_ce :=_cce ._ed .ReadByte ();if _ce !=nil {return _da .MakeString (_cde .String ()),_ce ;};if _da .IsOctalDigit (_fef ){_gb ,_dc :=_cce ._ed .Peek (2);if _dc !=nil {return _da .MakeString (_cde .String ()),_dc ;
};var _cfg []byte ;_cfg =append (_cfg ,_fef );for _ ,_dec :=range _gb {if _da .IsOctalDigit (_dec ){_cfg =append (_cfg ,_dec );}else {break ;};};_cce ._ed .Discard (len (_cfg )-1);_gd .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_cfg );
_bcb ,_dc :=_a .ParseUint (string (_cfg ),8,32);if _dc !=nil {return _da .MakeString (_cde .String ()),_dc ;};_cde .WriteByte (byte (_bcb ));continue ;};switch _fef {case 'n':_cde .WriteRune ('\n');case 'r':_cde .WriteRune ('\r');case 't':_cde .WriteRune ('\t');
case 'b':_cde .WriteRune ('\b');case 'f':_cde .WriteRune ('\f');case '(':_cde .WriteRune ('(');case ')':_cde .WriteRune (')');case '\\':_cde .WriteRune ('\\');};continue ;}else if _eea [0]=='('{_ccee ++;}else if _eea [0]==')'{_ccee --;if _ccee ==0{_cce ._ed .ReadByte ();
break ;};};_aeg ,_ :=_cce ._ed .ReadByte ();_cde .WriteByte (_aeg );};return _da .MakeString (_cde .String ()),nil ;};func _daaa (_bfb string )(_da .PdfObjectReference ,error ){_gca :=_da .PdfObjectReference {};_fde :=_ff .FindStringSubmatch (_bfb );if len (_fde )< 3{_gd .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _gca ,_e .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_eagg ,_fefg :=_a .Atoi (_fde [1]);if _fefg !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fde [1]);
return _gca ,nil ;};_gca .ObjectNumber =int64 (_eagg );_gddd ,_fefg :=_a .Atoi (_fde [2]);if _fefg !=nil {_gd .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fde [2]);
return _gca ,nil ;};_gca .GenerationNumber =int64 (_gddd );return _gca ,nil ;};var _aaa =_f .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");var _bf =_f .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func (_gbg *fdfParser )parseArray ()(*_da .PdfObjectArray ,error ){_ade :=_da .MakeArray ();_gbg ._ed .ReadByte ();for {_gbg .skipSpaces ();_gfag ,_ebd :=_gbg ._ed .Peek (1);if _ebd !=nil {return _ade ,_ebd ;};if _gfag [0]==']'{_gbg ._ed .ReadByte ();break ;
};_bcd ,_ebd :=_gbg .parseObject ();if _ebd !=nil {return _ade ,_ebd ;};_ade .Append (_bcd );};return _ade ,nil ;};func _cea (_faeb _c .ReadSeeker )(*fdfParser ,error ){_adc :=&fdfParser {};_adc ._gef =_faeb ;_adc ._fca =map[int64 ]_da .PdfObject {};_ege ,_dgge ,_gge :=_adc .parseFdfVersion ();
if _gge !=nil {_gd .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_gge );return nil ,_gge ;};_adc ._fed =_ege ;_adc ._ecc =_dgge ;_gge =_adc .parse ();
return _adc ,_gge ;};var _fe =_f .MustCompile ("\u0025\u0025\u0045O\u0046");type fdfParser struct{_fed int ;_ecc int ;_fca map[int64 ]_da .PdfObject ;_gef _c .ReadSeeker ;_ed *_fc .Reader ;_fdb int64 ;_dg *_da .PdfObjectDictionary ;};func (_gada *fdfParser )parse ()error {_gada ._gef .Seek (0,_c .SeekStart );
_gada ._ed =_fc .NewReader (_gada ._gef );for {_gada .skipComments ();_fcdd ,_acbc :=_gada ._ed .Peek (20);if _acbc !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _acbc ;};if _eg .HasPrefix (string (_fcdd ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_gada ._ed .Discard (7);_gada .skipSpaces ();_gada .skipComments ();_fff ,_ :=_gada .parseDict ();_gada ._dg =_fff ;break ;};_efbd :=_eae .FindStringSubmatchIndex (string (_fcdd ));
if len (_efbd )< 6{_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fcdd ));
return _e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_eace ,_acbc :=_gada .parseIndirectObject ();if _acbc !=nil {return _acbc ;};switch _ggd :=_eace .(type ){case *_da .PdfIndirectObject :_gada ._fca [_ggd .ObjectNumber ]=_ggd ;case *_da .PdfObjectStream :_gada ._fca [_ggd .ObjectNumber ]=_ggd ;default:return _e .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_fac *fdfParser )getFileOffset ()int64 {_fbb ,_ :=_fac ._gef .Seek (0,_c .SeekCurrent );_fbb -=int64 (_fac ._ed .Buffered ());return _fbb ;};func (_aa *fdfParser )setFileOffset (_be int64 ){_aa ._gef .Seek (_be ,_c .SeekStart );
_aa ._ed =_fc .NewReader (_aa ._gef );};var _ff =_f .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_da .PdfObject ,error ){_gae ,_ee :=fdf .FieldDictionaries ();if _ee !=nil {return nil ,_ee ;};var _eag []string ;for _gda :=range _gae {_eag =append (_eag ,_gda );};_ef .Strings (_eag );_fg :=map[string ]_da .PdfObject {};
for _ ,_acb :=range _eag {_fba :=_gae [_acb ];_ba :=_da .TraceToDirectObject (_fba .Get ("\u0056"));_fg [_acb ]=_ba ;};return _fg ,nil ;};var _eae =_f .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_ddga *fdfParser )parseBool ()(_da .PdfObjectBool ,error ){_dgf ,_dgfd :=_ddga ._ed .Peek (4);if _dgfd !=nil {return _da .PdfObjectBool (false ),_dgfd ;};if (len (_dgf )>=4)&&(string (_dgf [:4])=="\u0074\u0072\u0075\u0065"){_ddga ._ed .Discard (4);
return _da .PdfObjectBool (true ),nil ;};_dgf ,_dgfd =_ddga ._ed .Peek (5);if _dgfd !=nil {return _da .PdfObjectBool (false ),_dgfd ;};if (len (_dgf )>=5)&&(string (_dgf [:5])=="\u0066\u0061\u006cs\u0065"){_ddga ._ed .Discard (5);return _da .PdfObjectBool (false ),nil ;
};return _da .PdfObjectBool (false ),_e .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_cedg *fdfParser )parseFdfVersion ()(int ,int ,error ){_cedg ._gef .Seek (0,_c .SeekStart );
_bg :=20;_fea :=make ([]byte ,_bg );_cedg ._gef .Read (_fea );_bfbg :=_aaa .FindStringSubmatch (string (_fea ));if len (_bfbg )< 3{_ecd ,_gfg ,_dcg :=_cedg .seekFdfVersionTopDown ();if _dcg !=nil {_gd .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_dcg ;};return _ecd ,_gfg ,nil ;};_eac ,_abc :=_a .Atoi (_bfbg [1]);if _abc !=nil {return 0,0,_abc ;};_fcf ,_abc :=_a .Atoi (_bfbg [2]);if _abc !=nil {return 0,0,_abc ;};_gd .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_eac ,_fcf );
return _eac ,_fcf ,nil ;};func (_gfgd *fdfParser )trace (_gdg _da .PdfObject )_da .PdfObject {switch _beff :=_gdg .(type ){case *_da .PdfObjectReference :_bge ,_def :=_gfgd ._fca [_beff .ObjectNumber ].(*_da .PdfIndirectObject );if _def {return _bge .PdfObject ;
};_gd .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_da .PdfIndirectObject :return _beff .PdfObject ;};return _gdg ;};

// Data represents forms data format (FDF) file data.
type Data struct{_fb *_da .PdfObjectDictionary ;_dag *_da .PdfObjectArray ;};func (_gcb *fdfParser )parseDict ()(*_da .PdfObjectDictionary ,error ){_gd .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_cac :=_da .MakeDict ();_ece ,_ :=_gcb ._ed .ReadByte ();if _ece !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_ece ,_ =_gcb ._ed .ReadByte ();if _ece !='<'{return nil ,_e .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_gcb .skipSpaces ();_gcb .skipComments ();_gacb ,_aad :=_gcb ._ed .Peek (2);if _aad !=nil {return nil ,_aad ;};_gd .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_gacb ),string (_gacb ));
if (_gacb [0]=='>')&&(_gacb [1]=='>'){_gd .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_gcb ._ed .ReadByte ();_gcb ._ed .ReadByte ();break ;};_gd .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_gad ,_aad :=_gcb .parseName ();_gd .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_gad );if _aad !=nil {_gd .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_aad );
return nil ,_aad ;};if len (_gad )> 4&&_gad [len (_gad )-4:]=="\u006e\u0075\u006c\u006c"{_bdb :=_gad [0:len (_gad )-4];_gd .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_gad );
_gd .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_bdb );_gcb .skipSpaces ();_gfb ,_ :=_gcb ._ed .Peek (1);if _gfb [0]=='/'{_cac .Set (_bdb ,_da .MakeNull ());continue ;};};_gcb .skipSpaces ();
_aea ,_aad :=_gcb .parseObject ();if _aad !=nil {return nil ,_aad ;};_cac .Set (_gad ,_aea );_gd .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_gad ,_aea .String ());};_gd .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _cac ,nil ;};var _fgb =_f .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");func (_dgg *fdfParser )parseObject ()(_da .PdfObject ,error ){_gd .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_dgg .skipSpaces ();for {_gege ,_dad :=_dgg ._ed .Peek (2);if _dad !=nil {return nil ,_dad ;};_gd .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gege ));if _gege [0]=='/'{_dafc ,_adeb :=_dgg .parseName ();
_gd .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_dafc );return &_dafc ,_adeb ;}else if _gege [0]=='('{_gd .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _dgg .parseString ();}else if _gege [0]=='['{_gd .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _dgg .parseArray ();}else if (_gege [0]=='<')&&(_gege [1]=='<'){_gd .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _dgg .parseDict ();}else if _gege [0]=='<'{_gd .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _dgg .parseHexString ();}else if _gege [0]=='%'{_dgg .readComment ();_dgg .skipSpaces ();}else {_gd .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gege ,_ =_dgg ._ed .Peek (15);_ddf :=string (_gege );
_gd .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_ddf );if (len (_ddf )> 3)&&(_ddf [:4]=="\u006e\u0075\u006c\u006c"){_bbe ,_gbf :=_dgg .parseNull ();return &_bbe ,_gbf ;}else if (len (_ddf )> 4)&&(_ddf [:5]=="\u0066\u0061\u006cs\u0065"){_fabd ,_gcg :=_dgg .parseBool ();
return &_fabd ,_gcg ;}else if (len (_ddf )> 3)&&(_ddf [:4]=="\u0074\u0072\u0075\u0065"){_ced ,_abf :=_dgg .parseBool ();return &_ced ,_abf ;};_dgb :=_ff .FindStringSubmatch (_ddf );if len (_dgb )> 1{_gege ,_ =_dgg ._ed .ReadBytes ('R');_gd .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gege [:]));
_deg ,_aeb :=_daaa (string (_gege ));return &_deg ,_aeb ;};_ded :=_bf .FindStringSubmatch (_ddf );if len (_ded )> 1{_gd .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _dgg .parseNumber ();};_ded =_fgb .FindStringSubmatch (_ddf );
if len (_ded )> 1{_gd .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_gd .Log .Trace ("\u0025\u0020\u0073",_ded );return _dgg .parseNumber ();};_gd .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_ddf );
return nil ,_e .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_fag *fdfParser )parseIndirectObject ()(_da .PdfObject ,error ){_cge :=_da .PdfIndirectObject {};_gd .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_dgba ,_gbc :=_fag ._ed .Peek (20);
if _gbc !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_cge ,_gbc ;};_gd .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_dgba ));
_fdbb :=_eae .FindStringSubmatchIndex (string (_dgba ));if len (_fdbb )< 6{_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dgba ));
return &_cge ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_fag ._ed .Discard (_fdbb [0]);_gd .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fdbb );_bgg :=_fdbb [1]-_fdbb [0];_aff :=make ([]byte ,_bgg );_ ,_gbc =_fag .readAtLeast (_aff ,_bgg );if _gbc !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_gbc );
return nil ,_gbc ;};_gd .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_aff );_fdegg :=_eae .FindStringSubmatch (string (_aff ));if len (_fdegg )< 3{_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_aff ));
return &_cge ,_e .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_gedbe ,_ :=_a .Atoi (_fdegg [1]);_cdg ,_ :=_a .Atoi (_fdegg [2]);_cge .ObjectNumber =int64 (_gedbe );_cge .GenerationNumber =int64 (_cdg );for {_efe ,_ddfc :=_fag ._ed .Peek (2);if _ddfc !=nil {return &_cge ,_ddfc ;};_gd .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_efe ),string (_efe ));
if _da .IsWhiteSpace (_efe [0]){_fag .skipSpaces ();}else if _efe [0]=='%'{_fag .skipComments ();}else if (_efe [0]=='<')&&(_efe [1]=='<'){_gd .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cge .PdfObject ,_ddfc =_fag .parseDict ();
_gd .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_ddfc );if _ddfc !=nil {return &_cge ,_ddfc ;};_gd .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_efe [0]=='/')||(_efe [0]=='(')||(_efe [0]=='[')||(_efe [0]=='<'){_cge .PdfObject ,_ddfc =_fag .parseObject ();if _ddfc !=nil {return &_cge ,_ddfc ;};_gd .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _efe [0]=='e'{_ffdc ,_edc :=_fag .readTextLine ();if _edc !=nil {return nil ,_edc ;};if len (_ffdc )>=6&&_ffdc [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _efe [0]=='s'{_efe ,_ =_fag ._ed .Peek (10);if string (_efe [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_eagaa :=6;
if len (_efe )> 6{if _da .IsWhiteSpace (_efe [_eagaa ])&&_efe [_eagaa ]!='\r'&&_efe [_eagaa ]!='\n'{_gd .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_eagaa ++;};if _efe [_eagaa ]=='\r'{_eagaa ++;if _efe [_eagaa ]=='\n'{_eagaa ++;};}else if _efe [_eagaa ]=='\n'{_eagaa ++;};};_fag ._ed .Discard (_eagaa );_bca ,_fbc :=_cge .PdfObject .(*_da .PdfObjectDictionary );if !_fbc {return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_gd .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_bca );_beb ,_cef :=_bca .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_da .PdfObjectInteger );if !_cef {return nil ,_e .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_ebdb :=*_beb ;if _ebdb < 0{return nil ,_e .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_ebdb )> _fag ._fdb {_gd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_e .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_abe :=make ([]byte ,_ebdb );
_ ,_ddfc =_fag .readAtLeast (_abe ,int (_ebdb ));if _ddfc !=nil {_gd .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_abe ),_abe );_gd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ddfc );
return nil ,_ddfc ;};_eef :=_da .PdfObjectStream {};_eef .Stream =_abe ;_eef .PdfObjectDictionary =_cge .PdfObject .(*_da .PdfObjectDictionary );_eef .ObjectNumber =_cge .ObjectNumber ;_eef .GenerationNumber =_cge .GenerationNumber ;_fag .skipSpaces ();
_fag ._ed .Discard (9);_fag .skipSpaces ();return &_eef ,nil ;};};_cge .PdfObject ,_ddfc =_fag .parseObject ();return &_cge ,_ddfc ;};};_gd .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_cge ,nil ;};func (_ffa *fdfParser )skipComments ()error {if _ ,_fdf :=_ffa .skipSpaces ();_fdf !=nil {return _fdf ;};_eaa :=true ;for {_gf ,_egg :=_ffa ._ed .Peek (1);if _egg !=nil {_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_egg .Error ());
return _egg ;};if _eaa &&_gf [0]!='%'{return nil ;};_eaa =false ;if (_gf [0]!='\r')&&(_gf [0]!='\n'){_ffa ._ed .ReadByte ();}else {break ;};};return _ffa .skipComments ();};func (_gac *fdfParser )parseNumber ()(_da .PdfObject ,error ){return _da .ParseNumber (_gac ._ed )};
func (_cd *fdfParser )readAtLeast (_cg []byte ,_bag int )(int ,error ){_ge :=_bag ;_cgg :=0;_efa :=0;for _ge > 0{_ec ,_caa :=_cd ._ed .Read (_cg [_cgg :]);if _caa !=nil {_gd .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_ec ,_efa ,_caa .Error ());
return _cgg ,_e .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_efa ++;_cgg +=_ec ;_ge -=_ec ;};return _cgg ,nil ;};func (_gfa *fdfParser )parseName ()(_da .PdfObjectName ,error ){var _fad _db .Buffer ;_gfc :=false ;
for {_eb ,_gdac :=_gfa ._ed .Peek (1);if _gdac ==_c .EOF {break ;};if _gdac !=nil {return _da .PdfObjectName (_fad .String ()),_gdac ;};if !_gfc {if _eb [0]=='/'{_gfc =true ;_gfa ._ed .ReadByte ();}else if _eb [0]=='%'{_gfa .readComment ();_gfa .skipSpaces ();
}else {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_eb ,_eb );return _da .PdfObjectName (_fad .String ()),_ac .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_eb [0]);
};}else {if _da .IsWhiteSpace (_eb [0]){break ;}else if (_eb [0]=='/')||(_eb [0]=='[')||(_eb [0]=='(')||(_eb [0]==']')||(_eb [0]=='<')||(_eb [0]=='>'){break ;}else if _eb [0]=='#'{_efd ,_bagc :=_gfa ._ed .Peek (3);if _bagc !=nil {return _da .PdfObjectName (_fad .String ()),_bagc ;
};_gfa ._ed .Discard (3);_gc ,_bagc :=_d .DecodeString (string (_efd [1:3]));if _bagc !=nil {return _da .PdfObjectName (_fad .String ()),_bagc ;};_fad .Write (_gc );}else {_gdd ,_ :=_gfa ._ed .ReadByte ();_fad .WriteByte (_gdd );};};};return _da .PdfObjectName (_fad .String ()),nil ;
};func (_aeba *fdfParser )seekToEOFMarker (_baf int64 )error {_bbea :=int64 (0);_ddb :=int64 (1000);for _bbea < _baf {if _baf <=(_ddb +_bbea ){_ddb =_baf -_bbea ;};_ ,_bcdg :=_aeba ._gef .Seek (-_bbea -_ddb ,_c .SeekEnd );if _bcdg !=nil {return _bcdg ;
};_cfd :=make ([]byte ,_ddb );_aeba ._gef .Read (_cfd );_gd .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_cfd ));_fdeg :=_fe .FindAllStringIndex (string (_cfd ),-1);
if _fdeg !=nil {_eaga :=_fdeg [len (_fdeg )-1];_gd .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_fdeg );_aeba ._gef .Seek (-_bbea -_ddb +int64 (_eaga [0]),_c .SeekEnd );return nil ;};_gd .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_bbea +=_ddb ;};_gd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _e .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};

// Root returns the Root of the FDF document.
func (_fcgg *fdfParser )Root ()(*_da .PdfObjectDictionary ,error ){if _fcgg ._dg !=nil {if _gacc ,_fbbg :=_fcgg .trace (_fcgg ._dg .Get ("\u0052\u006f\u006f\u0074")).(*_da .PdfObjectDictionary );_fbbg {if _gba ,_bfc :=_fcgg .trace (_gacc .Get ("\u0046\u0044\u0046")).(*_da .PdfObjectDictionary );
_bfc {return _gba ,nil ;};};};var _fgd []int64 ;for _eefg :=range _fcgg ._fca {_fgd =append (_fgd ,_eefg );};_ef .Slice (_fgd ,func (_bga ,_bfd int )bool {return _fgd [_bga ]< _fgd [_bfd ]});for _ ,_dcd :=range _fgd {_fdcc :=_fcgg ._fca [_dcd ];if _ebb ,_dea :=_fcgg .trace (_fdcc ).(*_da .PdfObjectDictionary );
_dea {if _fgdb ,_daac :=_fcgg .trace (_ebb .Get ("\u0046\u0044\u0046")).(*_da .PdfObjectDictionary );_daac {return _fgdb ,nil ;};};};return nil ,_e .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};

// Load loads FDF form data from `r`.
func Load (r _c .ReadSeeker )(*Data ,error ){_ga ,_b :=_cea (r );if _b !=nil {return nil ,_b ;};_fd ,_b :=_ga .Root ();if _b !=nil {return nil ,_b ;};_bc ,_daa :=_da .GetArray (_fd .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_daa {return nil ,_e .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_dag :_bc ,_fb :_fd },nil ;};func (_gdf *fdfParser )skipSpaces ()(int ,error ){_gec :=0;for {_ae ,_af :=_gdf ._ed .ReadByte ();if _af !=nil {return 0,_af ;};if _da .IsWhiteSpace (_ae ){_gec ++;}else {_gdf ._ed .UnreadByte ();break ;};};
return _gec ,nil ;};func (_ebf *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_ebf ._gef .Seek (0,_c .SeekStart );_ebf ._ed =_fc .NewReader (_ebf ._gef );_gbe :=20;_efaa :=make ([]byte ,_gbe );for {_gddg ,_abfc :=_ebf ._ed .ReadByte ();if _abfc !=nil {if _abfc ==_c .EOF {break ;
}else {return 0,0,_abfc ;};};if _da .IsDecimalDigit (_gddg )&&_efaa [_gbe -1]=='.'&&_da .IsDecimalDigit (_efaa [_gbe -2])&&_efaa [_gbe -3]=='-'&&_efaa [_gbe -4]=='F'&&_efaa [_gbe -5]=='D'&&_efaa [_gbe -6]=='P'{_ggc :=int (_efaa [_gbe -2]-'0');_ffgb :=int (_gddg -'0');
return _ggc ,_ffgb ,nil ;};_efaa =append (_efaa [1:_gbe ],_gddg );};return 0,0,_e .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func _ffe (_bfa string )(*fdfParser ,error ){_dbc :=fdfParser {};
_gdab :=[]byte (_bfa );_ddbb :=_db .NewReader (_gdab );_dbc ._gef =_ddbb ;_dbc ._fca =map[int64 ]_da .PdfObject {};_faf :=_fc .NewReader (_ddbb );_dbc ._ed =_faf ;_dbc ._fdb =int64 (len (_bfa ));return &_dbc ,_dbc .parse ();};func (_bae *fdfParser )parseNull ()(_da .PdfObjectNull ,error ){_ ,_eba :=_bae ._ed .Discard (4);
return _da .PdfObjectNull {},_eba ;};func (_fab *fdfParser )parseHexString ()(*_da .PdfObjectString ,error ){_fab ._ed .ReadByte ();var _cff _db .Buffer ;for {_aec ,_cdd :=_fab ._ed .Peek (1);if _cdd !=nil {return _da .MakeHexString (""),_cdd ;};if _aec [0]=='>'{_fab ._ed .ReadByte ();
break ;};_ffg ,_ :=_fab ._ed .ReadByte ();if !_da .IsWhiteSpace (_ffg ){_cff .WriteByte (_ffg );};};if _cff .Len ()%2==1{_cff .WriteRune ('0');};_fae ,_ag :=_d .DecodeString (_cff .String ());if _ag !=nil {_gd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_cff .String ());
return _da .MakeHexString (""),nil ;};return _da .MakeHexString (string (_fae )),nil ;};