//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_cdd "bufio";_e "bytes";_bc "encoding/hex";_d "errors";_cd "fmt";_be "github.com/unidoc/unipdf/v3/common";_bca "github.com/unidoc/unipdf/v3/core";_ca "io";_dd "os";_a "regexp";_ed "sort";_b "strconv";_df "strings";);func (_gaa *fdfParser )skipSpaces ()(int ,error ){_cddb :=0;for {_eecf ,_fb :=_gaa ._bff .ReadByte ();if _fb !=nil {return 0,_fb ;};if _bca .IsWhiteSpace (_eecf ){_cddb ++;}else {_gaa ._bff .UnreadByte ();break ;};};return _cddb ,nil ;};func (_cf *fdfParser )readAtLeast (_fe []byte ,_ga int )(int ,error ){_ag :=_ga ;_db :=0;_aba :=0;for _ag > 0{_de ,_dg :=_cf ._bff .Read (_fe [_db :]);if _dg !=nil {_be .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_de ,_aba ,_dg .Error ());return _db ,_d .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_aba ++;_db +=_de ;_ag -=_de ;};return _db ,nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_bca .PdfObjectDictionary ,error ){_ab :=map[string ]*_bca .PdfObjectDictionary {};for _bb :=0;_bb < fdf ._f .Len ();_bb ++{_ba ,_ad :=_bca .GetDict (fdf ._f .Get (_bb ));if _ad {_cga ,_ :=_bca .GetString (_ba .Get ("\u0054"));if _cga !=nil {_ab [_cga .Str ()]=_ba ;};};};return _ab ,nil ;};func _dfd (_cgd string )(_bca .PdfObjectReference ,error ){_acgc :=_bca .PdfObjectReference {};_cgaf :=_bbb .FindStringSubmatch (string (_cgd ));if len (_cgaf )< 3{_be .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _acgc ,_d .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_ggc ,_fg :=_b .Atoi (_cgaf [1]);if _fg !=nil {_be .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_cgaf [1]);return _acgc ,nil ;};_acgc .ObjectNumber =int64 (_ggc );_ded ,_fg :=_b .Atoi (_cgaf [2]);if _fg !=nil {_be .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_cgaf [2]);return _acgc ,nil ;};_acgc .GenerationNumber =int64 (_ded );return _acgc ,nil ;};func (_eaf *fdfParser )parseIndirectObject ()(_bca .PdfObject ,error ){_cbe :=_bca .PdfIndirectObject {};_be .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_ffca ,_eecd :=_eaf ._bff .Peek (20);if _eecd !=nil {_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_cbe ,_eecd ;};_be .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_ffca ));_acad :=_ffa .FindStringSubmatchIndex (string (_ffca ));if len (_acad )< 6{_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ffca ));return &_cbe ,_d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_eaf ._bff .Discard (_acad [0]);_be .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_acad );_dea :=_acad [1]-_acad [0];_aeg :=make ([]byte ,_dea );_ ,_eecd =_eaf .readAtLeast (_aeg ,_dea );if _eecd !=nil {_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_eecd );return nil ,_eecd ;};_be .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_aeg );_gdaff :=_ffa .FindStringSubmatch (string (_aeg ));if len (_gdaff )< 3{_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_aeg ));return &_cbe ,_d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_fed ,_ :=_b .Atoi (_gdaff [1]);_bdg ,_ :=_b .Atoi (_gdaff [2]);_cbe .ObjectNumber =int64 (_fed );_cbe .GenerationNumber =int64 (_bdg );for {_bga ,_dbe :=_eaf ._bff .Peek (2);if _dbe !=nil {return &_cbe ,_dbe ;};_be .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bga ),string (_bga ));if _bca .IsWhiteSpace (_bga [0]){_eaf .skipSpaces ();}else if _bga [0]=='%'{_eaf .skipComments ();}else if (_bga [0]=='<')&&(_bga [1]=='<'){_be .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cbe .PdfObject ,_dbe =_eaf .parseDict ();_be .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_dbe );if _dbe !=nil {return &_cbe ,_dbe ;};_be .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");}else if (_bga [0]=='/')||(_bga [0]=='(')||(_bga [0]=='[')||(_bga [0]=='<'){_cbe .PdfObject ,_dbe =_eaf .parseObject ();if _dbe !=nil {return &_cbe ,_dbe ;};_be .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");}else {if _bga [0]=='e'{_fega ,_aaa :=_eaf .readTextLine ();if _aaa !=nil {return nil ,_aaa ;};if len (_fega )>=6&&_fega [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bga [0]=='s'{_bga ,_ =_eaf ._bff .Peek (10);if string (_bga [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_dda :=6;if len (_bga )> 6{if _bca .IsWhiteSpace (_bga [_dda ])&&_bga [_dda ]!='\r'&&_bga [_dda ]!='\n'{_be .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");_dda ++;};if _bga [_dda ]=='\r'{_dda ++;if _bga [_dda ]=='\n'{_dda ++;};}else if _bga [_dda ]=='\n'{_dda ++;};};_eaf ._bff .Discard (_dda );_baac ,_cbg :=_cbe .PdfObject .(*_bca .PdfObjectDictionary );if !_cbg {return nil ,_d .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");};_be .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_baac );_dee ,_fff :=_baac .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_bca .PdfObjectInteger );if !_fff {return nil ,_d .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");};_bee :=*_dee ;if _bee < 0{return nil ,_d .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_bee )> _eaf ._gdeb {_be .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");return nil ,_d .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_eed :=make ([]byte ,_bee );_ ,_dbe =_eaf .readAtLeast (_eed ,int (_bee ));if _dbe !=nil {_be .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_eed ),_eed );_be .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dbe );return nil ,_dbe ;};_aff :=_bca .PdfObjectStream {};_aff .Stream =_eed ;_aff .PdfObjectDictionary =_cbe .PdfObject .(*_bca .PdfObjectDictionary );_aff .ObjectNumber =_cbe .ObjectNumber ;_aff .GenerationNumber =_cbe .GenerationNumber ;_eaf .skipSpaces ();_eaf ._bff .Discard (9);_eaf .skipSpaces ();return &_aff ,nil ;};};_cbe .PdfObject ,_dbe =_eaf .parseObject ();return &_cbe ,_dbe ;};};_be .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_cbe ,nil ;};func (_gfa *fdfParser )seekToEOFMarker (_fcb int64 )error {_aca :=int64 (0);_cgba :=int64 (1000);for _aca < _fcb {if _fcb <=(_cgba +_aca ){_cgba =_fcb -_aca ;};_ ,_ggcc :=_gfa ._bce .Seek (-_aca -_cgba ,_ca .SeekEnd );if _ggcc !=nil {return _ggcc ;};_dfc :=make ([]byte ,_cgba );_gfa ._bce .Read (_dfc );_be .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_dfc ));_gafa :=_bcc .FindAllStringIndex (string (_dfc ),-1);if _gafa !=nil {_egd :=_gafa [len (_gafa )-1];_be .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gafa );_gfa ._bce .Seek (-_aca -_cgba +int64 (_egd [0]),_ca .SeekEnd );return nil ;};_be .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");_aca +=_cgba ;};_be .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _d .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_gdaf *fdfParser )parseObject ()(_bca .PdfObject ,error ){_be .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_gdaf .skipSpaces ();for {_gbf ,_aec :=_gdaf ._bff .Peek (2);if _aec !=nil {return nil ,_aec ;};_be .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_gbf ));if _gbf [0]=='/'{_gf ,_aeca :=_gdaf .parseName ();_be .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_gf );return &_gf ,_aeca ;}else if _gbf [0]=='('{_be .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gdaf .parseString ();}else if _gbf [0]=='['{_be .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _gdaf .parseArray ();}else if (_gbf [0]=='<')&&(_gbf [1]=='<'){_be .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gdaf .parseDict ();}else if _gbf [0]=='<'{_be .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _gdaf .parseHexString ();}else if _gbf [0]=='%'{_gdaf .readComment ();_gdaf .skipSpaces ();}else {_be .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_gbf ,_ =_gdaf ._bff .Peek (15);_fd :=string (_gbf );_be .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_fd );if (len (_fd )> 3)&&(_fd [:4]=="\u006e\u0075\u006c\u006c"){_cgb ,_acb :=_gdaf .parseNull ();return &_cgb ,_acb ;}else if (len (_fd )> 4)&&(_fd [:5]=="\u0066\u0061\u006cs\u0065"){_gcg ,_ega :=_gdaf .parseBool ();return &_gcg ,_ega ;}else if (len (_fd )> 3)&&(_fd [:4]=="\u0074\u0072\u0075\u0065"){_badc ,_ffcg :=_gdaf .parseBool ();return &_badc ,_ffcg ;};_ecd :=_bbb .FindStringSubmatch (string (_fd ));if len (_ecd )> 1{_gbf ,_ =_gdaf ._bff .ReadBytes ('R');_be .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_gbf [:]));_gaff ,_fa :=_dfd (string (_gbf ));return &_gaff ,_fa ;};_feg :=_aad .FindStringSubmatch (string (_fd ));if len (_feg )> 1{_be .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gdaf .parseNumber ();};_feg =_aaf .FindStringSubmatch (string (_fd ));if len (_feg )> 1{_be .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_be .Log .Trace ("\u0025\u0020\u0073",_feg );return _gdaf .parseNumber ();};_be .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_fd );return nil ,_d .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");};};};var _bcc =_a .MustCompile ("\u0025\u0025\u0045O\u0046");func (_ddf *fdfParser )readComment ()(string ,error ){var _efc _e .Buffer ;_ ,_ac :=_ddf .skipSpaces ();if _ac !=nil {return _efc .String (),_ac ;};_egf :=true ;for {_acg ,_dgd :=_ddf ._bff .Peek (1);if _dgd !=nil {_be .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dgd .Error ());return _efc .String (),_dgd ;};if _egf &&_acg [0]!='%'{return _efc .String (),_d .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_egf =false ;if (_acg [0]!='\r')&&(_acg [0]!='\n'){_cgc ,_ :=_ddf ._bff .ReadByte ();_efc .WriteByte (_cgc );}else {break ;};};return _efc .String (),nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_beb ,_bf :=_dd .Open (fdfPath );if _bf !=nil {return nil ,_bf ;};defer _beb .Close ();return Load (_beb );};func _bgg (_dfb _ca .ReadSeeker )(*fdfParser ,error ){_ddda :=&fdfParser {};_ddda ._bce =_dfb ;_ddda ._gc =map[int64 ]_bca .PdfObject {};_bccb ,_bfe ,_caa :=_ddda .parseFdfVersion ();if _caa !=nil {_be .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_caa );return nil ,_caa ;};_ddda ._abd =_bccb ;_ddda ._aac =_bfe ;_caa =_ddda .parse ();return _ddda ,_caa ;};var _ffa =_a .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_fbg *fdfParser )parseFdfVersion ()(int ,int ,error ){_fbg ._bce .Seek (0,_ca .SeekStart );_def :=20;_ddgd :=make ([]byte ,_def );_fbg ._bce .Read (_ddgd );_ggd :=_egg .FindStringSubmatch (string (_ddgd ));if len (_ggd )< 3{_faf ,_fdb ,_af :=_fbg .seekFdfVersionTopDown ();if _af !=nil {_be .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_af ;};return _faf ,_fdb ,nil ;};_fab ,_cab :=_b .Atoi (_ggd [1]);if _cab !=nil {return 0,0,_cab ;};_fdf ,_cab :=_b .Atoi (_ggd [2]);if _cab !=nil {return 0,0,_cab ;};_be .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_fab ,_fdf );return int (_fab ),int (_fdf ),nil ;};func (_baf *fdfParser )setFileOffset (_ecf int64 ){_baf ._bce .Seek (_ecf ,_ca .SeekStart );_baf ._bff =_cdd .NewReader (_baf ._bce );};var _aad =_a .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");var _bbb =_a .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_dbb *fdfParser )parseDict ()(*_bca .PdfObjectDictionary ,error ){_be .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_fce :=_bca .MakeDict ();_ge ,_ :=_dbb ._bff .ReadByte ();if _ge !='<'{return nil ,_d .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_ge ,_ =_dbb ._bff .ReadByte ();if _ge !='<'{return nil ,_d .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_dbb .skipSpaces ();_dbb .skipComments ();_gdd ,_bafc :=_dbb ._bff .Peek (2);if _bafc !=nil {return nil ,_bafc ;};_be .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_gdd ),string (_gdd ));if (_gdd [0]=='>')&&(_gdd [1]=='>'){_be .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_dbb ._bff .ReadByte ();_dbb ._bff .ReadByte ();break ;};_be .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_ebg ,_bafc :=_dbb .parseName ();_be .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_ebg );if _bafc !=nil {_be .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_bafc );return nil ,_bafc ;};if len (_ebg )> 4&&_ebg [len (_ebg )-4:]=="\u006e\u0075\u006c\u006c"{_cbaf :=_ebg [0:len (_ebg )-4];_be .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_ebg );_be .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_cbaf );_dbb .skipSpaces ();_dfda ,_ :=_dbb ._bff .Peek (1);if _dfda [0]=='/'{_fce .Set (_cbaf ,_bca .MakeNull ());continue ;};};_dbb .skipSpaces ();_bdc ,_bafc :=_dbb .parseObject ();if _bafc !=nil {return nil ,_bafc ;};_fce .Set (_ebg ,_bdc );_be .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_ebg ,_bdc .String ());};_be .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _fce ,nil ;};func (_cgf *fdfParser )parseNumber ()(_bca .PdfObject ,error ){return _bca .ParseNumber (_cgf ._bff )};

// Root returns the Root of the FDF document.
func (_dbec *fdfParser )Root ()(*_bca .PdfObjectDictionary ,error ){if _dbec ._adg !=nil {if _dfdaa ,_dadd :=_dbec .trace (_dbec ._adg .Get ("\u0052\u006f\u006f\u0074")).(*_bca .PdfObjectDictionary );_dadd {if _bcaf ,_aecf :=_dbec .trace (_dfdaa .Get ("\u0046\u0044\u0046")).(*_bca .PdfObjectDictionary );_aecf {return _bcaf ,nil ;};};};var _fgb []int64 ;for _eag :=range _dbec ._gc {_fgb =append (_fgb ,_eag );};_ed .Slice (_fgb ,func (_dgad ,_adf int )bool {return _fgb [_dgad ]< _fgb [_adf ]});for _ ,_bcb :=range _fgb {_egb :=_dbec ._gc [_bcb ];if _aee ,_debc :=_dbec .trace (_egb ).(*_bca .PdfObjectDictionary );_debc {if _cdeb ,_cbed :=_dbec .trace (_aee .Get ("\u0046\u0044\u0046")).(*_bca .PdfObjectDictionary );_cbed {return _cdeb ,nil ;};};};return nil ,_d .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_gda *fdfParser )getFileOffset ()int64 {_bg ,_ :=_gda ._bce .Seek (0,_ca .SeekCurrent );_bg -=int64 (_gda ._bff .Buffered ());return _bg ;};func (_bfbb *fdfParser )trace (_eeg _bca .PdfObject )_bca .PdfObject {switch _cdg :=_eeg .(type ){case *_bca .PdfObjectReference :_gbe ,_fdc :=_bfbb ._gc [_cdg .ObjectNumber ].(*_bca .PdfIndirectObject );if _fdc {return _gbe .PdfObject ;};_be .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_bca .PdfIndirectObject :return _cdg .PdfObject ;};return _eeg ;};func (_cbf *fdfParser )parse ()error {_cbf ._bce .Seek (0,_ca .SeekStart );_cbf ._bff =_cdd .NewReader (_cbf ._bce );for {_cbf .skipComments ();_abb ,_ebe :=_cbf ._bff .Peek (20);if _ebe !=nil {_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _ebe ;};if _df .HasPrefix (string (_abb ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_cbf ._bff .Discard (7);_cbf .skipSpaces ();_cbf .skipComments ();_eagg ,_ :=_cbf .parseDict ();_cbf ._adg =_eagg ;break ;};_eae :=_ffa .FindStringSubmatchIndex (string (_abb ));if len (_eae )< 6{_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_abb ));return _d .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_cdfa ,_ebe :=_cbf .parseIndirectObject ();if _ebe !=nil {return _ebe ;};switch _bbg :=_cdfa .(type ){case *_bca .PdfIndirectObject :_cbf ._gc [_bbg .ObjectNumber ]=_bbg ;case *_bca .PdfObjectStream :_cbf ._gc [_bbg .ObjectNumber ]=_bbg ;default:return _d .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");};};return nil ;};var _aaf =_a .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");type fdfParser struct{_abd int ;_aac int ;_gc map[int64 ]_bca .PdfObject ;_bce _ca .ReadSeeker ;_bff *_cdd .Reader ;_gdeb int64 ;_adg *_bca .PdfObjectDictionary ;};func (_cgfe *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_cgfe ._bce .Seek (0,_ca .SeekStart );_cgfe ._bff =_cdd .NewReader (_cgfe ._bce );_ccd :=20;_dcce :=make ([]byte ,_ccd );for {_cdda ,_gcd :=_cgfe ._bff .ReadByte ();if _gcd !=nil {if _gcd ==_ca .EOF {break ;}else {return 0,0,_gcd ;};};if _bca .IsDecimalDigit (_cdda )&&_dcce [_ccd -1]=='.'&&_bca .IsDecimalDigit (_dcce [_ccd -2])&&_dcce [_ccd -3]=='-'&&_dcce [_ccd -4]=='F'&&_dcce [_ccd -5]=='D'&&_dcce [_ccd -6]=='P'{_ccge :=int (_dcce [_ccd -2]-'0');_cag :=int (_cdda -'0');return _ccge ,_cag ,nil ;};_dcce =append (_dcce [1:_ccd ],_cdda );};return 0,0,_d .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_bbf *fdfParser )readTextLine ()(string ,error ){var _cb _e .Buffer ;for {_ddd ,_eb :=_bbf ._bff .Peek (1);if _eb !=nil {_be .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_eb .Error ());return _cb .String (),_eb ;};if (_ddd [0]!='\r')&&(_ddd [0]!='\n'){_gaf ,_ :=_bbf ._bff .ReadByte ();_cb .WriteByte (_gaf );}else {break ;};};return _cb .String (),nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_ec *_bca .PdfObjectDictionary ;_f *_bca .PdfObjectArray ;};func (_ecg *fdfParser )parseBool ()(_bca .PdfObjectBool ,error ){_dec ,_cceg :=_ecg ._bff .Peek (4);if _cceg !=nil {return _bca .PdfObjectBool (false ),_cceg ;};if (len (_dec )>=4)&&(string (_dec [:4])=="\u0074\u0072\u0075\u0065"){_ecg ._bff .Discard (4);return _bca .PdfObjectBool (true ),nil ;};_dec ,_cceg =_ecg ._bff .Peek (5);if _cceg !=nil {return _bca .PdfObjectBool (false ),_cceg ;};if (len (_dec )>=5)&&(string (_dec [:5])=="\u0066\u0061\u006cs\u0065"){_ecg ._bff .Discard (5);return _bca .PdfObjectBool (false ),nil ;};return _bca .PdfObjectBool (false ),_d .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_cad *fdfParser )parseHexString ()(*_bca .PdfObjectString ,error ){_cad ._bff .ReadByte ();var _ffg _e .Buffer ;for {_fc ,_cfa :=_cad ._bff .Peek (1);if _cfa !=nil {return _bca .MakeHexString (""),_cfa ;};if _fc [0]=='>'{_cad ._bff .ReadByte ();break ;};_bge ,_ :=_cad ._bff .ReadByte ();if !_bca .IsWhiteSpace (_bge ){_ffg .WriteByte (_bge );};};if _ffg .Len ()%2==1{_ffg .WriteRune ('0');};_gbb ,_fbd :=_bc .DecodeString (_ffg .String ());if _fbd !=nil {_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_ffg .String ());return _bca .MakeHexString (""),nil ;};return _bca .MakeHexString (string (_gbb )),nil ;};

// Load loads FDF form data from `r`.
func Load (r _ca .ReadSeeker )(*Data ,error ){_ee ,_ef :=_bgg (r );if _ef !=nil {return nil ,_ef ;};_g ,_ef :=_ee .Root ();if _ef !=nil {return nil ,_ef ;};_eg ,_cg :=_bca .GetArray (_g .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_cg {return nil ,_d .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");};return &Data {_f :_eg ,_ec :_g },nil ;};func (_ffc *fdfParser )skipComments ()error {if _ ,_bfff :=_ffc .skipSpaces ();_bfff !=nil {return _bfff ;};_fea :=true ;for {_ecc ,_dga :=_ffc ._bff .Peek (1);if _dga !=nil {_be .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_dga .Error ());return _dga ;};if _fea &&_ecc [0]!='%'{return nil ;};_fea =false ;if (_ecc [0]!='\r')&&(_ecc [0]!='\n'){_ffc ._bff .ReadByte ();}else {break ;};};return _ffc .skipComments ();};var _egg =_a .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func _fbb (_fag string )(*fdfParser ,error ){_cec :=fdfParser {};_eca :=[]byte (_fag );_dcc :=_e .NewReader (_eca );_cec ._bce =_dcc ;_cec ._gc =map[int64 ]_bca .PdfObject {};_ecbb :=_cdd .NewReader (_dcc );_cec ._bff =_ecbb ;_cec ._gdeb =int64 (len (_fag ));return &_cec ,_cec .parse ();};func (_ccg *fdfParser )parseArray ()(*_bca .PdfObjectArray ,error ){_edd :=_bca .MakeArray ();_ccg ._bff .ReadByte ();for {_ccg .skipSpaces ();_baa ,_gac :=_ccg ._bff .Peek (1);if _gac !=nil {return _edd ,_gac ;};if _baa [0]==']'{_ccg ._bff .ReadByte ();break ;};_gg ,_gac :=_ccg .parseObject ();if _gac !=nil {return _edd ,_gac ;};_edd .Append (_gg );};return _edd ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_bca .PdfObject ,error ){_gb ,_gde :=fdf .FieldDictionaries ();if _gde !=nil {return nil ,_gde ;};var _aa []string ;for _efa :=range _gb {_aa =append (_aa ,_efa );};_ed .Strings (_aa );_ea :=map[string ]_bca .PdfObject {};for _ ,_dc :=range _aa {_da :=_gb [_dc ];_eec :=_bca .TraceToDirectObject (_da .Get ("\u0056"));_ea [_dc ]=_eec ;};return _ea ,nil ;};func (_aef *fdfParser )parseString ()(*_bca .PdfObjectString ,error ){_aef ._bff .ReadByte ();var _cce _e .Buffer ;_bfg :=1;for {_acd ,_ddg :=_aef ._bff .Peek (1);if _ddg !=nil {return _bca .MakeString (_cce .String ()),_ddg ;};if _acd [0]=='\\'{_aef ._bff .ReadByte ();_bea ,_eff :=_aef ._bff .ReadByte ();if _eff !=nil {return _bca .MakeString (_cce .String ()),_eff ;};if _bca .IsOctalDigit (_bea ){_cge ,_bab :=_aef ._bff .Peek (2);if _bab !=nil {return _bca .MakeString (_cce .String ()),_bab ;};var _ce []byte ;_ce =append (_ce ,_bea );for _ ,_eba :=range _cge {if _bca .IsOctalDigit (_eba ){_ce =append (_ce ,_eba );}else {break ;};};_aef ._bff .Discard (len (_ce )-1);_be .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_ce );_cdbd ,_bab :=_b .ParseUint (string (_ce ),8,32);if _bab !=nil {return _bca .MakeString (_cce .String ()),_bab ;};_cce .WriteByte (byte (_cdbd ));continue ;};switch _bea {case 'n':_cce .WriteRune ('\n');case 'r':_cce .WriteRune ('\r');case 't':_cce .WriteRune ('\t');case 'b':_cce .WriteRune ('\b');case 'f':_cce .WriteRune ('\f');case '(':_cce .WriteRune ('(');case ')':_cce .WriteRune (')');case '\\':_cce .WriteRune ('\\');};continue ;}else if _acd [0]=='('{_bfg ++;}else if _acd [0]==')'{_bfg --;if _bfg ==0{_aef ._bff .ReadByte ();break ;};};_cda ,_ :=_aef ._bff .ReadByte ();_cce .WriteByte (_cda );};return _bca .MakeString (_cce .String ()),nil ;};func (_adb *fdfParser )parseNull ()(_bca .PdfObjectNull ,error ){_ ,_gdg :=_adb ._bff .Discard (4);return _bca .PdfObjectNull {},_gdg ;};func (_bd *fdfParser )parseName ()(_bca .PdfObjectName ,error ){var _cba _e .Buffer ;_cdb :=false ;for {_efaf ,_edb :=_bd ._bff .Peek (1);if _edb ==_ca .EOF {break ;};if _edb !=nil {return _bca .PdfObjectName (_cba .String ()),_edb ;};if !_cdb {if _efaf [0]=='/'{_cdb =true ;_bd ._bff .ReadByte ();}else if _efaf [0]=='%'{_bd .readComment ();_bd .skipSpaces ();}else {_be .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_efaf ,_efaf );return _bca .PdfObjectName (_cba .String ()),_cd .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_efaf [0]);};}else {if _bca .IsWhiteSpace (_efaf [0]){break ;}else if (_efaf [0]=='/')||(_efaf [0]=='[')||(_efaf [0]=='(')||(_efaf [0]==']')||(_efaf [0]=='<')||(_efaf [0]=='>'){break ;}else if _efaf [0]=='#'{_cff ,_dbg :=_bd ._bff .Peek (3);if _dbg !=nil {return _bca .PdfObjectName (_cba .String ()),_dbg ;};_bd ._bff .Discard (3);_fba ,_dbg :=_bc .DecodeString (string (_cff [1:3]));if _dbg !=nil {return _bca .PdfObjectName (_cba .String ()),_dbg ;};_cba .Write (_fba );}else {_dgf ,_ :=_bd ._bff .ReadByte ();_cba .WriteByte (_dgf );};};};return _bca .PdfObjectName (_cba .String ()),nil ;};