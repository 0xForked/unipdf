//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_bb "bufio";_ge "bytes";_g "encoding/hex";_df "errors";_a "fmt";_gg "github.com/unidoc/unipdf/v3/common";_ae "github.com/unidoc/unipdf/v3/core";_eb "io";_fb "os";_e "regexp";_f "sort";_dfe "strconv";_b "strings";);func (_dc *fdfParser )readAtLeast (_ca []byte ,_cba int )(int ,error ){_ac :=_cba ;_cdb :=0;_de :=0;for _ac > 0{_aff ,_bg :=_dc ._cde .Read (_ca [_cdb :]);if _bg !=nil {_gg .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_aff ,_de ,_bg .Error ());return _cdb ,_df .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_de ++;_cdb +=_aff ;_ac -=_aff ;};return _cdb ,nil ;};func (_defc *fdfParser )parseName ()(_ae .PdfObjectName ,error ){var _cdf _ge .Buffer ;_bc :=false ;for {_ggc ,_fc :=_defc ._cde .Peek (1);if _fc ==_eb .EOF {break ;};if _fc !=nil {return _ae .PdfObjectName (_cdf .String ()),_fc ;};if !_bc {if _ggc [0]=='/'{_bc =true ;_defc ._cde .ReadByte ();}else if _ggc [0]=='%'{_defc .readComment ();_defc .skipSpaces ();}else {_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_ggc ,_ggc );return _ae .PdfObjectName (_cdf .String ()),_a .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_ggc [0]);};}else {if _ae .IsWhiteSpace (_ggc [0]){break ;}else if (_ggc [0]=='/')||(_ggc [0]=='[')||(_ggc [0]=='(')||(_ggc [0]==']')||(_ggc [0]=='<')||(_ggc [0]=='>'){break ;}else if _ggc [0]=='#'{_efd ,_aed :=_defc ._cde .Peek (3);if _aed !=nil {return _ae .PdfObjectName (_cdf .String ()),_aed ;};_defc ._cde .Discard (3);_ab ,_aed :=_g .DecodeString (string (_efd [1:3]));if _aed !=nil {return _ae .PdfObjectName (_cdf .String ()),_aed ;};_cdf .Write (_ab );}else {_bdb ,_ :=_defc ._cde .ReadByte ();_cdf .WriteByte (_bdb );};};};return _ae .PdfObjectName (_cdf .String ()),nil ;};func (_fea *fdfParser )trace (_ggaa _ae .PdfObject )_ae .PdfObject {switch _fcg :=_ggaa .(type ){case *_ae .PdfObjectReference :_ddcd ,_bgg :=_fea ._ef [_fcg .ObjectNumber ].(*_ae .PdfIndirectObject );if _bgg {return _ddcd .PdfObject ;};_gg .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_ae .PdfIndirectObject :return _fcg .PdfObject ;};return _ggaa ;};func (_ddab *fdfParser )parseIndirectObject ()(_ae .PdfObject ,error ){_aaea :=_ae .PdfIndirectObject {};_gg .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_egd ,_dcf :=_ddab ._cde .Peek (20);if _dcf !=nil {_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_aaea ,_dcf ;};_gg .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_egd ));_aaga :=_fg .FindStringSubmatchIndex (string (_egd ));if len (_aaga )< 6{_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_egd ));return &_aaea ,_df .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_ddab ._cde .Discard (_aaga [0]);_gg .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_aaga );_dcae :=_aaga [1]-_aaga [0];_afac :=make ([]byte ,_dcae );_ ,_dcf =_ddab .readAtLeast (_afac ,_dcae );if _dcf !=nil {_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_dcf );return nil ,_dcf ;};_gg .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_afac );_fcb :=_fg .FindStringSubmatch (string (_afac ));if len (_fcb )< 3{_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_afac ));return &_aaea ,_df .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_adg ,_ :=_dfe .Atoi (_fcb [1]);_bcbf ,_ :=_dfe .Atoi (_fcb [2]);_aaea .ObjectNumber =int64 (_adg );_aaea .GenerationNumber =int64 (_bcbf );for {_ebc ,_dea :=_ddab ._cde .Peek (2);if _dea !=nil {return &_aaea ,_dea ;};_gg .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_ebc ),string (_ebc ));if _ae .IsWhiteSpace (_ebc [0]){_ddab .skipSpaces ();}else if _ebc [0]=='%'{_ddab .skipComments ();}else if (_ebc [0]=='<')&&(_ebc [1]=='<'){_gg .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_aaea .PdfObject ,_dea =_ddab .parseDict ();_gg .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_dea );if _dea !=nil {return &_aaea ,_dea ;};_gg .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");}else if (_ebc [0]=='/')||(_ebc [0]=='(')||(_ebc [0]=='[')||(_ebc [0]=='<'){_aaea .PdfObject ,_dea =_ddab .parseObject ();if _dea !=nil {return &_aaea ,_dea ;};_gg .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");}else {if _ebc [0]=='e'{_faf ,_bag :=_ddab .readTextLine ();if _bag !=nil {return nil ,_bag ;};if len (_faf )>=6&&_faf [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _ebc [0]=='s'{_ebc ,_ =_ddab ._cde .Peek (10);if string (_ebc [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_gfgc :=6;if len (_ebc )> 6{if _ae .IsWhiteSpace (_ebc [_gfgc ])&&_ebc [_gfgc ]!='\r'&&_ebc [_gfgc ]!='\n'{_gg .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");_gfgc ++;};if _ebc [_gfgc ]=='\r'{_gfgc ++;if _ebc [_gfgc ]=='\n'{_gfgc ++;};}else if _ebc [_gfgc ]=='\n'{_gfgc ++;};};_ddab ._cde .Discard (_gfgc );_egf ,_dbbf :=_aaea .PdfObject .(*_ae .PdfObjectDictionary );if !_dbbf {return nil ,_df .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");};_gg .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_egf );_fga ,_dcag :=_egf .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_ae .PdfObjectInteger );if !_dcag {return nil ,_df .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");};_dbfe :=*_fga ;if _dbfe < 0{return nil ,_df .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_dbfe )> _ddab ._cbe {_gg .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");return nil ,_df .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_afbg :=make ([]byte ,_dbfe );_ ,_dea =_ddab .readAtLeast (_afbg ,int (_dbfe ));if _dea !=nil {_gg .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_afbg ),_afbg );_gg .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dea );return nil ,_dea ;};_feed :=_ae .PdfObjectStream {};_feed .Stream =_afbg ;_feed .PdfObjectDictionary =_aaea .PdfObject .(*_ae .PdfObjectDictionary );_feed .ObjectNumber =_aaea .ObjectNumber ;_feed .GenerationNumber =_aaea .GenerationNumber ;_ddab .skipSpaces ();_ddab ._cde .Discard (9);_ddab .skipSpaces ();return &_feed ,nil ;};};_aaea .PdfObject ,_dea =_ddab .parseObject ();return &_aaea ,_dea ;};};_gg .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_aaea ,nil ;};func (_adc *fdfParser )parseBool ()(_ae .PdfObjectBool ,error ){_cee ,_eac :=_adc ._cde .Peek (4);if _eac !=nil {return _ae .PdfObjectBool (false ),_eac ;};if (len (_cee )>=4)&&(string (_cee [:4])=="\u0074\u0072\u0075\u0065"){_adc ._cde .Discard (4);return _ae .PdfObjectBool (true ),nil ;};_cee ,_eac =_adc ._cde .Peek (5);if _eac !=nil {return _ae .PdfObjectBool (false ),_eac ;};if (len (_cee )>=5)&&(string (_cee [:5])=="\u0066\u0061\u006cs\u0065"){_adc ._cde .Discard (5);return _ae .PdfObjectBool (false ),nil ;};return _ae .PdfObjectBool (false ),_df .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func _ecee (_fdc string )(_ae .PdfObjectReference ,error ){_ega :=_ae .PdfObjectReference {};_fcf :=_gdcc .FindStringSubmatch (string (_fdc ));if len (_fcf )< 3{_gg .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _ega ,_df .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_bgc ,_be :=_dfe .Atoi (_fcf [1]);if _be !=nil {_gg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fcf [1]);return _ega ,nil ;};_ega .ObjectNumber =int64 (_bgc );_daf ,_be :=_dfe .Atoi (_fcf [2]);if _be !=nil {_gg .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fcf [2]);return _ega ,nil ;};_ega .GenerationNumber =int64 (_daf );return _ega ,nil ;};func (_cdee *fdfParser )parseNull ()(_ae .PdfObjectNull ,error ){_ ,_dbf :=_cdee ._cde .Discard (4);return _ae .PdfObjectNull {},_dbf ;};func (_aagad *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_aagad ._def .Seek (0,_eb .SeekStart );_aagad ._cde =_bb .NewReader (_aagad ._def );_ebf :=20;_bge :=make ([]byte ,_ebf );for {_dae ,_dgef :=_aagad ._cde .ReadByte ();if _dgef !=nil {if _dgef ==_eb .EOF {break ;}else {return 0,0,_dgef ;};};if _ae .IsDecimalDigit (_dae )&&_bge [_ebf -1]=='.'&&_ae .IsDecimalDigit (_bge [_ebf -2])&&_bge [_ebf -3]=='-'&&_bge [_ebf -4]=='F'&&_bge [_ebf -5]=='D'&&_bge [_ebf -6]=='P'{_caae :=int (_bge [_ebf -2]-'0');_ggg :=int (_dae -'0');return _caae ,_ggg ,nil ;};_bge =append (_bge [1:_ebf ],_dae );};return 0,0,_df .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_gbg *fdfParser )parseObject ()(_ae .PdfObject ,error ){_gg .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_gbg .skipSpaces ();for {_afa ,_aab :=_gbg ._cde .Peek (2);if _aab !=nil {return nil ,_aab ;};_gg .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_afa ));if _afa [0]=='/'{_gdee ,_ddd :=_gbg .parseName ();_gg .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_gdee );return &_gdee ,_ddd ;}else if _afa [0]=='('{_gg .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gbg .parseString ();}else if _afa [0]=='['{_gg .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _gbg .parseArray ();}else if (_afa [0]=='<')&&(_afa [1]=='<'){_gg .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gbg .parseDict ();}else if _afa [0]=='<'{_gg .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _gbg .parseHexString ();}else if _afa [0]=='%'{_gbg .readComment ();_gbg .skipSpaces ();}else {_gg .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_afa ,_ =_gbg ._cde .Peek (15);_aabf :=string (_afa );_gg .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_aabf );if (len (_aabf )> 3)&&(_aabf [:4]=="\u006e\u0075\u006c\u006c"){_ffa ,_cdc :=_gbg .parseNull ();return &_ffa ,_cdc ;}else if (len (_aabf )> 4)&&(_aabf [:5]=="\u0066\u0061\u006cs\u0065"){_bcb ,_eed :=_gbg .parseBool ();return &_bcb ,_eed ;}else if (len (_aabf )> 3)&&(_aabf [:4]=="\u0074\u0072\u0075\u0065"){_feg ,_aaa :=_gbg .parseBool ();return &_feg ,_aaa ;};_aac :=_gdcc .FindStringSubmatch (string (_aabf ));if len (_aac )> 1{_afa ,_ =_gbg ._cde .ReadBytes ('R');_gg .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_afa [:]));_gcb ,_fcfc :=_ecee (string (_afa ));return &_gcb ,_fcfc ;};_aaaa :=_afd .FindStringSubmatch (string (_aabf ));if len (_aaaa )> 1{_gg .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gbg .parseNumber ();};_aaaa =_bbc .FindStringSubmatch (string (_aabf ));if len (_aaaa )> 1{_gg .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_gg .Log .Trace ("\u0025\u0020\u0073",_aaaa );return _gbg .parseNumber ();};_gg .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_aabf );return nil ,_df .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");};};};func (_abeg *fdfParser )parse ()error {_abeg ._def .Seek (0,_eb .SeekStart );_abeg ._cde =_bb .NewReader (_abeg ._def );for {_abeg .skipComments ();_bde ,_dgge :=_abeg ._cde .Peek (20);if _dgge !=nil {_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return _dgge ;};if _b .HasPrefix (string (_bde ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_abeg ._cde .Discard (7);_abeg .skipSpaces ();_abeg .skipComments ();_ceda ,_ :=_abeg .parseDict ();_abeg ._fd =_ceda ;break ;};_bec :=_fg .FindStringSubmatchIndex (string (_bde ));if len (_bec )< 6{_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bde ));return _df .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");};_cdg ,_dgge :=_abeg .parseIndirectObject ();if _dgge !=nil {return _dgge ;};switch _acd :=_cdg .(type ){case *_ae .PdfIndirectObject :_abeg ._ef [_acd .ObjectNumber ]=_acd ;case *_ae .PdfObjectStream :_abeg ._ef [_acd .ObjectNumber ]=_acd ;default:return _df .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");};};return nil ;};func (_aef *fdfParser )parseString ()(*_ae .PdfObjectString ,error ){_aef ._cde .ReadByte ();var _aag _ge .Buffer ;_dbb :=1;for {_gefa ,_gda :=_aef ._cde .Peek (1);if _gda !=nil {return _ae .MakeString (_aag .String ()),_gda ;};if _gefa [0]=='\\'{_aef ._cde .ReadByte ();_ced ,_aefg :=_aef ._cde .ReadByte ();if _aefg !=nil {return _ae .MakeString (_aag .String ()),_aefg ;};if _ae .IsOctalDigit (_ced ){_ece ,_ada :=_aef ._cde .Peek (2);if _ada !=nil {return _ae .MakeString (_aag .String ()),_ada ;};var _bdd []byte ;_bdd =append (_bdd ,_ced );for _ ,_efe :=range _ece {if _ae .IsOctalDigit (_efe ){_bdd =append (_bdd ,_efe );}else {break ;};};_aef ._cde .Discard (len (_bdd )-1);_gg .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_bdd );_abf ,_ada :=_dfe .ParseUint (string (_bdd ),8,32);if _ada !=nil {return _ae .MakeString (_aag .String ()),_ada ;};_aag .WriteByte (byte (_abf ));continue ;};switch _ced {case 'n':_aag .WriteRune ('\n');case 'r':_aag .WriteRune ('\r');case 't':_aag .WriteRune ('\t');case 'b':_aag .WriteRune ('\b');case 'f':_aag .WriteRune ('\f');case '(':_aag .WriteRune ('(');case ')':_aag .WriteRune (')');case '\\':_aag .WriteRune ('\\');};continue ;}else if _gefa [0]=='('{_dbb ++;}else if _gefa [0]==')'{_dbb --;if _dbb ==0{_aef ._cde .ReadByte ();break ;};};_aaee ,_ :=_aef ._cde .ReadByte ();_aag .WriteByte (_aaee );};return _ae .MakeString (_aag .String ()),nil ;};func (_ce *fdfParser )skipComments ()error {if _ ,_cg :=_ce .skipSpaces ();_cg !=nil {return _cg ;};_cfb :=true ;for {_da ,_eee :=_ce ._cde .Peek (1);if _eee !=nil {_gg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_eee .Error ());return _eee ;};if _cfb &&_da [0]!='%'{return nil ;};_cfb =false ;if (_da [0]!='\r')&&(_da [0]!='\n'){_ce ._cde .ReadByte ();}else {break ;};};return _ce .skipComments ();};var _eg =_e .MustCompile ("\u0025\u0025\u0045O\u0046");

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_ae .PdfObjectDictionary ,error ){_ag :=map[string ]*_ae .PdfObjectDictionary {};for _cc :=0;_cc < fdf ._gd .Len ();_cc ++{_af ,_db :=_ae .GetDict (fdf ._gd .Get (_cc ));if _db {_gdc ,_ :=_ae .GetString (_af .Get ("\u0054"));if _gdc !=nil {_ag [_gdc .Str ()]=_af ;};};};return _ag ,nil ;};

// Root returns the Root of the FDF document.
func (_dafeb *fdfParser )Root ()(*_ae .PdfObjectDictionary ,error ){if _dafeb ._fd !=nil {if _deae ,_fcc :=_dafeb .trace (_dafeb ._fd .Get ("\u0052\u006f\u006f\u0074")).(*_ae .PdfObjectDictionary );_fcc {if _cfdd ,_abe :=_dafeb .trace (_deae .Get ("\u0046\u0044\u0046")).(*_ae .PdfObjectDictionary );_abe {return _cfdd ,nil ;};};};var _gbf []int64 ;for _aaf :=range _dafeb ._ef {_gbf =append (_gbf ,_aaf );};_f .Slice (_gbf ,func (_adgf ,_ffe int )bool {return _gbf [_adgf ]< _gbf [_ffe ]});for _ ,_cbab :=range _gbf {_fcfcb :=_dafeb ._ef [_cbab ];if _ddg ,_gdd :=_dafeb .trace (_fcfcb ).(*_ae .PdfObjectDictionary );_gdd {if _dgga ,_dfca :=_dafeb .trace (_ddg .Get ("\u0046\u0044\u0046")).(*_ae .PdfObjectDictionary );_dfca {return _dgga ,nil ;};};};return nil ,_df .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};

// Data represents forms data format (FDF) file data.
type Data struct{_aec *_ae .PdfObjectDictionary ;_gd *_ae .PdfObjectArray ;};func (_ddc *fdfParser )readTextLine ()(string ,error ){var _gf _ge .Buffer ;for {_ebe ,_egee :=_ddc ._cde .Peek (1);if _egee !=nil {_gg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_egee .Error ());return _gf .String (),_egee ;};if (_ebe [0]!='\r')&&(_ebe [0]!='\n'){_ddf ,_ :=_ddc ._cde .ReadByte ();_gf .WriteByte (_ddf );}else {break ;};};return _gf .String (),nil ;};var _fg =_e .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");var _afd =_e .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_cdbf *fdfParser )parseFdfVersion ()(int ,int ,error ){_cdbf ._def .Seek (0,_eb .SeekStart );_gbe :=20;_dfea :=make ([]byte ,_gbe );_cdbf ._def .Read (_dfea );_bcbb :=_gb .FindStringSubmatch (string (_dfea ));if len (_bcbb )< 3{_gcbc ,_abc ,_gfc :=_cdbf .seekFdfVersionTopDown ();if _gfc !=nil {_gg .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_gfc ;};return _gcbc ,_abc ,nil ;};_bcbd ,_edg :=_dfe .Atoi (_bcbb [1]);if _edg !=nil {return 0,0,_edg ;};_bee ,_edg :=_dfe .Atoi (_bcbb [2]);if _edg !=nil {return 0,0,_edg ;};_gg .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_bcbd ,_bee );return int (_bcbd ),int (_bee ),nil ;};func (_aeb *fdfParser )skipSpaces ()(int ,error ){_ccb :=0;for {_bdc ,_eca :=_aeb ._cde .ReadByte ();if _eca !=nil {return 0,_eca ;};if _ae .IsWhiteSpace (_bdc ){_ccb ++;}else {_aeb ._cde .UnreadByte ();break ;};};return _ccb ,nil ;};type fdfParser struct{_ea int ;_ee int ;_ef map[int64 ]_ae .PdfObject ;_def _eb .ReadSeeker ;_cde *_bb .Reader ;_cbe int64 ;_fd *_ae .PdfObjectDictionary ;};func (_dgg *fdfParser )parseArray ()(*_ae .PdfObjectArray ,error ){_cgd :=_ae .MakeArray ();_dgg ._cde .ReadByte ();for {_dgg .skipSpaces ();_gec ,_fee :=_dgg ._cde .Peek (1);if _fee !=nil {return _cgd ,_fee ;};if _gec [0]==']'{_dgg ._cde .ReadByte ();break ;};_fbg ,_fee :=_dgg .parseObject ();if _fee !=nil {return _cgd ,_fee ;};_cgd .Append (_fbg );};return _cgd ,nil ;};var _gb =_e .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_bd *fdfParser )getFileOffset ()int64 {_fac ,_ :=_bd ._def .Seek (0,_eb .SeekCurrent );_fac -=int64 (_bd ._cde .Buffered ());return _fac ;};func (_fdf *fdfParser )readComment ()(string ,error ){var _dcd _ge .Buffer ;_ ,_afda :=_fdf .skipSpaces ();if _afda !=nil {return _dcd .String (),_afda ;};_ggb :=true ;for {_acb ,_ba :=_fdf ._cde .Peek (1);if _ba !=nil {_gg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ba .Error ());return _dcd .String (),_ba ;};if _ggb &&_acb [0]!='%'{return _dcd .String (),_df .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_ggb =false ;if (_acb [0]!='\r')&&(_acb [0]!='\n'){_ege ,_ :=_fdf ._cde .ReadByte ();_dcd .WriteByte (_ege );}else {break ;};};return _dcd .String (),nil ;};func (_gc *fdfParser )parseNumber ()(_ae .PdfObject ,error ){return _ae .ParseNumber (_gc ._cde )};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_ae .PdfObject ,error ){_ed ,_gde :=fdf .FieldDictionaries ();if _gde !=nil {return nil ,_gde ;};var _dfg []string ;for _cf :=range _ed {_dfg =append (_dfg ,_cf );};_f .Strings (_dfg );_bfd :=map[string ]_ae .PdfObject {};for _ ,_ad :=range _dfg {_dd :=_ed [_ad ];_dda :=_ae .TraceToDirectObject (_dd .Get ("\u0056"));_bfd [_ad ]=_dda ;};return _bfd ,nil ;};func (_fde *fdfParser )seekToEOFMarker (_ecg int64 )error {_ade :=int64 (0);_gca :=int64 (1000);for _ade < _ecg {if _ecg <=(_gca +_ade ){_gca =_ecg -_ade ;};_ ,_eaa :=_fde ._def .Seek (-_ade -_gca ,_eb .SeekEnd );if _eaa !=nil {return _eaa ;};_cec :=make ([]byte ,_gca );_fde ._def .Read (_cec );_gg .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_cec ));_gfd :=_eg .FindAllStringIndex (string (_cec ),-1);if _gfd !=nil {_dggd :=_gfd [len (_gfd )-1];_gg .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_gfd );_fde ._def .Seek (-_ade -_gca +int64 (_dggd [0]),_eb .SeekEnd );return nil ;};_gg .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");_ade +=_gca ;};_gg .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _df .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};var _bbc =_e .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");func _bbef (_caa string )(*fdfParser ,error ){_fdd :=fdfParser {};_add :=[]byte (_caa );_aba :=_ge .NewReader (_add );_fdd ._def =_aba ;_fdd ._ef =map[int64 ]_ae .PdfObject {};_bbg :=_bb .NewReader (_aba );_fdd ._cde =_bbg ;_fdd ._cbe =int64 (len (_caa ));return &_fdd ,_fdd .parse ();};func _fbf (_ged _eb .ReadSeeker )(*fdfParser ,error ){_gbfe :=&fdfParser {};_gbfe ._def =_ged ;_gbfe ._ef =map[int64 ]_ae .PdfObject {};_gbc ,_cfbe ,_gbgf :=_gbfe .parseFdfVersion ();if _gbgf !=nil {_gg .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_gbgf );return nil ,_gbgf ;};_gbfe ._ea =_gbc ;_gbfe ._ee =_cfbe ;_gbgf =_gbfe .parse ();return _gbfe ,_gbgf ;};func (_dde *fdfParser )parseHexString ()(*_ae .PdfObjectString ,error ){_dde ._cde .ReadByte ();var _gga _ge .Buffer ;for {_bce ,_dff :=_dde ._cde .Peek (1);if _dff !=nil {return _ae .MakeHexString (""),_dff ;};if _bce [0]=='>'{_dde ._cde .ReadByte ();break ;};_dca ,_ :=_dde ._cde .ReadByte ();if !_ae .IsWhiteSpace (_dca ){_gga .WriteByte (_dca );};};if _gga .Len ()%2==1{_gga .WriteRune ('0');};_cga ,_dcg :=_g .DecodeString (_gga .String ());if _dcg !=nil {_gg .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_gga .String ());return _ae .MakeHexString (""),nil ;};return _ae .MakeHexString (string (_cga )),nil ;};var _gdcc =_e .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_cbgc *fdfParser )parseDict ()(*_ae .PdfObjectDictionary ,error ){_gg .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");_dafe :=_ae .MakeDict ();_fca ,_ :=_cbgc ._cde .ReadByte ();if _fca !='<'{return nil ,_df .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_fca ,_ =_cbgc ._cde .ReadByte ();if _fca !='<'{return nil ,_df .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};for {_cbgc .skipSpaces ();_cbgc .skipComments ();_cbeg ,_bcf :=_cbgc ._cde .Peek (2);if _bcf !=nil {return nil ,_bcf ;};_gg .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cbeg ),string (_cbeg ));if (_cbeg [0]=='>')&&(_cbeg [1]=='>'){_gg .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_cbgc ._cde .ReadByte ();_cbgc ._cde .ReadByte ();break ;};_gg .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");_dba ,_bcf :=_cbgc .parseName ();_gg .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_dba );if _bcf !=nil {_gg .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_bcf );return nil ,_bcf ;};if len (_dba )> 4&&_dba [len (_dba )-4:]=="\u006e\u0075\u006c\u006c"{_daff :=_dba [0:len (_dba )-4];_gg .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_dba );_gg .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_daff );_cbgc .skipSpaces ();_cfe ,_ :=_cbgc ._cde .Peek (1);if _cfe [0]=='/'{_dafe .Set (_daff ,_ae .MakeNull ());continue ;};};_cbgc .skipSpaces ();_aede ,_bcf :=_cbgc .parseObject ();if _bcf !=nil {return nil ,_bcf ;};_dafe .Set (_dba ,_aede );_gg .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_dba ,_aede .String ());};_gg .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");return _dafe ,nil ;};func (_dg *fdfParser )setFileOffset (_dge int64 ){_dg ._def .Seek (_dge ,_eb .SeekStart );_dg ._cde =_bb .NewReader (_dg ._def );};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_bbf ,_gef :=_fb .Open (fdfPath );if _gef !=nil {return nil ,_gef ;};defer _bbf .Close ();return Load (_bbf );};

// Load loads FDF form data from `r`.
func Load (r _eb .ReadSeeker )(*Data ,error ){_fa ,_c :=_fbf (r );if _c !=nil {return nil ,_c ;};_cd ,_c :=_fa .Root ();if _c !=nil {return nil ,_c ;};_cb ,_ec :=_ae .GetArray (_cd .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_ec {return nil ,_df .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");};return &Data {_gd :_cb ,_aec :_cd },nil ;};