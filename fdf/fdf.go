//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_e "bufio";_ge "bytes";_be "encoding/hex";_bc "errors";_bf "fmt";_dd "github.com/unidoc/unipdf/v3/common";_d "github.com/unidoc/unipdf/v3/core";_gf "io";_fe "os";_bb "regexp";_gc "sort";_g "strconv";_f "strings";);func (_edd *fdfParser )trace (_cdg _d .PdfObject )_d .PdfObject {switch _fgc :=_cdg .(type ){case *_d .PdfObjectReference :_eea ,_adg :=_edd ._aaa [_fgc .ObjectNumber ].(*_d .PdfIndirectObject );
if _adg {return _eea .PdfObject ;};_dd .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_d .PdfIndirectObject :return _fgc .PdfObject ;};return _cdg ;};func (_ddf *fdfParser )parseDict ()(*_d .PdfObjectDictionary ,error ){_dd .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_dgg :=_d .MakeDict ();_add ,_ :=_ddf ._ceb .ReadByte ();if _add !='<'{return nil ,_bc .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_add ,_ =_ddf ._ceb .ReadByte ();if _add !='<'{return nil ,_bc .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_ddf .skipSpaces ();_ddf .skipComments ();_egag ,_cae :=_ddf ._ceb .Peek (2);if _cae !=nil {return nil ,_cae ;};_dd .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_egag ),string (_egag ));
if (_egag [0]=='>')&&(_egag [1]=='>'){_dd .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_ddf ._ceb .ReadByte ();_ddf ._ceb .ReadByte ();break ;};_dd .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_fga ,_cae :=_ddf .parseName ();_dd .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_fga );if _cae !=nil {_dd .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_cae );
return nil ,_cae ;};if len (_fga )> 4&&_fga [len (_fga )-4:]=="\u006e\u0075\u006c\u006c"{_gab :=_fga [0:len (_fga )-4];_dd .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_fga );
_dd .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_gab );_ddf .skipSpaces ();_dbf ,_ :=_ddf ._ceb .Peek (1);if _dbf [0]=='/'{_dgg .Set (_gab ,_d .MakeNull ());continue ;};};_ddf .skipSpaces ();
_feec ,_cae :=_ddf .parseObject ();if _cae !=nil {return nil ,_cae ;};_dgg .Set (_fga ,_feec );_dd .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_fga ,_feec .String ());};_dd .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _dgg ,nil ;};

// Root returns the Root of the FDF document.
func (_bgb *fdfParser )Root ()(*_d .PdfObjectDictionary ,error ){if _bgb ._afg !=nil {if _bed ,_ccb :=_bgb .trace (_bgb ._afg .Get ("\u0052\u006f\u006f\u0074")).(*_d .PdfObjectDictionary );_ccb {if _agad ,_eff :=_bgb .trace (_bed .Get ("\u0046\u0044\u0046")).(*_d .PdfObjectDictionary );
_eff {return _agad ,nil ;};};};var _fgd []int64 ;for _ddad :=range _bgb ._aaa {_fgd =append (_fgd ,_ddad );};_gc .Slice (_fgd ,func (_bee ,_fce int )bool {return _fgd [_bee ]< _fgd [_fce ]});for _ ,_eccg :=range _fgd {_dcg :=_bgb ._aaa [_eccg ];if _ggdg ,_cdb :=_bgb .trace (_dcg ).(*_d .PdfObjectDictionary );
_cdb {if _fca ,_dad :=_bgb .trace (_ggdg .Get ("\u0046\u0044\u0046")).(*_d .PdfObjectDictionary );_dad {return _fca ,nil ;};};};return nil ,_bc .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};

// Load loads FDF form data from `r`.
func Load (r _gf .ReadSeeker )(*Data ,error ){_df ,_ac :=_cfa (r );if _ac !=nil {return nil ,_ac ;};_db ,_ac :=_df .Root ();if _ac !=nil {return nil ,_ac ;};_gg ,_c :=_d .GetArray (_db .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_c {return nil ,_bc .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_gfd :_gg ,_a :_db },nil ;};var _fedg =_bb .MustCompile ("\u0025\u0025\u0045O\u0046");var _gb =_bb .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_bg *fdfParser )skipComments ()error {if _ ,_ffb :=_bg .skipSpaces ();_ffb !=nil {return _ffb ;};_ga :=true ;for {_fgb ,_aee :=_bg ._ceb .Peek (1);if _aee !=nil {_dd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_aee .Error ());
return _aee ;};if _ga &&_fgb [0]!='%'{return nil ;};_ga =false ;if (_fgb [0]!='\r')&&(_fgb [0]!='\n'){_bg ._ceb .ReadByte ();}else {break ;};};return _bg .skipComments ();};func (_ed *fdfParser )parseBool ()(_d .PdfObjectBool ,error ){_fedf ,_caa :=_ed ._ceb .Peek (4);
if _caa !=nil {return _d .PdfObjectBool (false ),_caa ;};if (len (_fedf )>=4)&&(string (_fedf [:4])=="\u0074\u0072\u0075\u0065"){_ed ._ceb .Discard (4);return _d .PdfObjectBool (true ),nil ;};_fedf ,_caa =_ed ._ceb .Peek (5);if _caa !=nil {return _d .PdfObjectBool (false ),_caa ;
};if (len (_fedf )>=5)&&(string (_fedf [:5])=="\u0066\u0061\u006cs\u0065"){_ed ._ceb .Discard (5);return _d .PdfObjectBool (false ),nil ;};return _d .PdfObjectBool (false ),_bc .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};

// Data represents forms data format (FDF) file data.
type Data struct{_a *_d .PdfObjectDictionary ;_gfd *_d .PdfObjectArray ;};func (_bcba *fdfParser )readComment ()(string ,error ){var _fa _ge .Buffer ;_ ,_ecc :=_bcba .skipSpaces ();if _ecc !=nil {return _fa .String (),_ecc ;};_ea :=true ;for {_gca ,_feg :=_bcba ._ceb .Peek (1);
if _feg !=nil {_dd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_feg .Error ());return _fa .String (),_feg ;};if _ea &&_gca [0]!='%'{return _fa .String (),_bc .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_ea =false ;if (_gca [0]!='\r')&&(_gca [0]!='\n'){_afe ,_ :=_bcba ._ceb .ReadByte ();_fa .WriteByte (_afe );}else {break ;};};return _fa .String (),nil ;};func (_gbc *fdfParser )parseNull ()(_d .PdfObjectNull ,error ){_ ,_acd :=_gbc ._ceb .Discard (4);
return _d .PdfObjectNull {},_acd ;};func (_ecg *fdfParser )parseName ()(_d .PdfObjectName ,error ){var _afgc _ge .Buffer ;_fbc :=false ;for {_gba ,_bcg :=_ecg ._ceb .Peek (1);if _bcg ==_gf .EOF {break ;};if _bcg !=nil {return _d .PdfObjectName (_afgc .String ()),_bcg ;
};if !_fbc {if _gba [0]=='/'{_fbc =true ;_ecg ._ceb .ReadByte ();}else if _gba [0]=='%'{_ecg .readComment ();_ecg .skipSpaces ();}else {_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_gba ,_gba );
return _d .PdfObjectName (_afgc .String ()),_bf .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_gba [0]);};}else {if _d .IsWhiteSpace (_gba [0]){break ;}else if (_gba [0]=='/')||(_gba [0]=='[')||(_gba [0]=='(')||(_gba [0]==']')||(_gba [0]=='<')||(_gba [0]=='>'){break ;
}else if _gba [0]=='#'{_afc ,_dc :=_ecg ._ceb .Peek (3);if _dc !=nil {return _d .PdfObjectName (_afgc .String ()),_dc ;};_ecg ._ceb .Discard (3);_cga ,_dc :=_be .DecodeString (string (_afc [1:3]));if _dc !=nil {return _d .PdfObjectName (_afgc .String ()),_dc ;
};_afgc .Write (_cga );}else {_gfff ,_ :=_ecg ._ceb .ReadByte ();_afgc .WriteByte (_gfff );};};};return _d .PdfObjectName (_afgc .String ()),nil ;};func (_gef *fdfParser )parseFdfVersion ()(int ,int ,error ){_gef ._aff .Seek (0,_gf .SeekStart );_gaff :=20;
_acf :=make ([]byte ,_gaff );_gef ._aff .Read (_acf );_bbe :=_ggd .FindStringSubmatch (string (_acf ));if len (_bbe )< 3{_gefe ,_ced ,_aad :=_gef .seekFdfVersionTopDown ();if _aad !=nil {_dd .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_aad ;};return _gefe ,_ced ,nil ;};_ebd ,_bbg :=_g .Atoi (_bbe [1]);if _bbg !=nil {return 0,0,_bbg ;};_bcga ,_bbg :=_g .Atoi (_bbe [2]);if _bbg !=nil {return 0,0,_bbg ;};_dd .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_ebd ,_bcga );
return _ebd ,_bcga ,nil ;};func (_eaa *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_eaa ._aff .Seek (0,_gf .SeekStart );_eaa ._ceb =_e .NewReader (_eaa ._aff );_cfb :=20;_aefg :=make ([]byte ,_cfb );for {_dgfca ,_agb :=_eaa ._ceb .ReadByte ();
if _agb !=nil {if _agb ==_gf .EOF {break ;}else {return 0,0,_agb ;};};if _d .IsDecimalDigit (_dgfca )&&_aefg [_cfb -1]=='.'&&_d .IsDecimalDigit (_aefg [_cfb -2])&&_aefg [_cfb -3]=='-'&&_aefg [_cfb -4]=='F'&&_aefg [_cfb -5]=='D'&&_aefg [_cfb -6]=='P'{_beeg :=int (_aefg [_cfb -2]-'0');
_cfg :=int (_dgfca -'0');return _beeg ,_cfg ,nil ;};_aefg =append (_aefg [1:_cfb ],_dgfca );};return 0,0,_bc .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_gfad *fdfParser )parseObject ()(_d .PdfObject ,error ){_dd .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");
_gfad .skipSpaces ();for {_aece ,_aca :=_gfad ._ceb .Peek (2);if _aca !=nil {return nil ,_aca ;};_dd .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_aece ));if _aece [0]=='/'{_gd ,_gag :=_gfad .parseName ();
_dd .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_gd );return &_gd ,_gag ;}else if _aece [0]=='('{_dd .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gfad .parseString ();}else if _aece [0]=='['{_dd .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");
return _gfad .parseArray ();}else if (_aece [0]=='<')&&(_aece [1]=='<'){_dd .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gfad .parseDict ();}else if _aece [0]=='<'{_dd .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");
return _gfad .parseHexString ();}else if _aece [0]=='%'{_gfad .readComment ();_gfad .skipSpaces ();}else {_dd .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_aece ,_ =_gfad ._ceb .Peek (15);_bbb :=string (_aece );
_dd .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_bbb );if (len (_bbb )> 3)&&(_bbb [:4]=="\u006e\u0075\u006c\u006c"){_aae ,_agg :=_gfad .parseNull ();return &_aae ,_agg ;}else if (len (_bbb )> 4)&&(_bbb [:5]=="\u0066\u0061\u006cs\u0065"){_bdbd ,_fea :=_gfad .parseBool ();
return &_bdbd ,_fea ;}else if (len (_bbb )> 3)&&(_bbb [:4]=="\u0074\u0072\u0075\u0065"){_fc ,_eed :=_gfad .parseBool ();return &_fc ,_eed ;};_bge :=_dbe .FindStringSubmatch (_bbb );if len (_bge )> 1{_aece ,_ =_gfad ._ceb .ReadBytes ('R');_dd .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_aece [:]));
_geg ,_ega :=_eab (string (_aece ));return &_geg ,_ega ;};_agf :=_ffe .FindStringSubmatch (_bbb );if len (_agf )> 1{_dd .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gfad .parseNumber ();};_agf =_gb .FindStringSubmatch (_bbb );
if len (_agf )> 1{_dd .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");_dd .Log .Trace ("\u0025\u0020\u0073",_agf );return _gfad .parseNumber ();};_dd .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_bbb );
return nil ,_bc .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_aea *fdfParser )parseString ()(*_d .PdfObjectString ,error ){_aea ._ceb .ReadByte ();var _cef _ge .Buffer ;_aga :=1;for {_gaf ,_aeg :=_aea ._ceb .Peek (1);if _aeg !=nil {return _d .MakeString (_cef .String ()),_aeg ;};if _gaf [0]=='\\'{_aea ._ceb .ReadByte ();
_dda ,_ad :=_aea ._ceb .ReadByte ();if _ad !=nil {return _d .MakeString (_cef .String ()),_ad ;};if _d .IsOctalDigit (_dda ){_ffg ,_dbea :=_aea ._ceb .Peek (2);if _dbea !=nil {return _d .MakeString (_cef .String ()),_dbea ;};var _fef []byte ;_fef =append (_fef ,_dda );
for _ ,_beb :=range _ffg {if _d .IsOctalDigit (_beb ){_fef =append (_fef ,_beb );}else {break ;};};_aea ._ceb .Discard (len (_fef )-1);_dd .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_fef );
_bfg ,_dbea :=_g .ParseUint (string (_fef ),8,32);if _dbea !=nil {return _d .MakeString (_cef .String ()),_dbea ;};_cef .WriteByte (byte (_bfg ));continue ;};switch _dda {case 'n':_cef .WriteRune ('\n');case 'r':_cef .WriteRune ('\r');case 't':_cef .WriteRune ('\t');
case 'b':_cef .WriteRune ('\b');case 'f':_cef .WriteRune ('\f');case '(':_cef .WriteRune ('(');case ')':_cef .WriteRune (')');case '\\':_cef .WriteRune ('\\');};continue ;}else if _gaf [0]=='('{_aga ++;}else if _gaf [0]==')'{_aga --;if _aga ==0{_aea ._ceb .ReadByte ();
break ;};};_adf ,_ :=_aea ._ceb .ReadByte ();_cef .WriteByte (_adf );};return _d .MakeString (_cef .String ()),nil ;};func (_ebf *fdfParser )parseIndirectObject ()(_d .PdfObject ,error ){_fdb :=_d .PdfIndirectObject {};_dd .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");
_dfff ,_fcb :=_ebf ._ceb .Peek (20);if _fcb !=nil {_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_fdb ,_fcb ;};_dd .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_dfff ));_cbf :=_fg .FindStringSubmatchIndex (string (_dfff ));if len (_cbf )< 6{_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_dfff ));
return &_fdb ,_bc .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ebf ._ceb .Discard (_cbf [0]);_dd .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_cbf );_acb :=_cbf [1]-_cbf [0];_cfd :=make ([]byte ,_acb );_ ,_fcb =_ebf .readAtLeast (_cfd ,_acb );if _fcb !=nil {_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_fcb );
return nil ,_fcb ;};_dd .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_cfd );_aace :=_fg .FindStringSubmatch (string (_cfd ));if len (_aace )< 3{_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cfd ));
return &_fdb ,_bc .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ggcd ,_ :=_g .Atoi (_aace [1]);_ffbf ,_ :=_g .Atoi (_aace [2]);_fdb .ObjectNumber =int64 (_ggcd );_fdb .GenerationNumber =int64 (_ffbf );for {_cgc ,_dgfc :=_ebf ._ceb .Peek (2);if _dgfc !=nil {return &_fdb ,_dgfc ;};_dd .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cgc ),string (_cgc ));
if _d .IsWhiteSpace (_cgc [0]){_ebf .skipSpaces ();}else if _cgc [0]=='%'{_ebf .skipComments ();}else if (_cgc [0]=='<')&&(_cgc [1]=='<'){_dd .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_fdb .PdfObject ,_dgfc =_ebf .parseDict ();
_dd .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_dgfc );if _dgfc !=nil {return &_fdb ,_dgfc ;};_dd .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_cgc [0]=='/')||(_cgc [0]=='(')||(_cgc [0]=='[')||(_cgc [0]=='<'){_fdb .PdfObject ,_dgfc =_ebf .parseObject ();if _dgfc !=nil {return &_fdb ,_dgfc ;};_dd .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _cgc [0]=='e'{_aef ,_gfg :=_ebf .readTextLine ();if _gfg !=nil {return nil ,_gfg ;};if len (_aef )>=6&&_aef [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _cgc [0]=='s'{_cgc ,_ =_ebf ._ceb .Peek (10);if string (_cgc [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_ded :=6;
if len (_cgc )> 6{if _d .IsWhiteSpace (_cgc [_ded ])&&_cgc [_ded ]!='\r'&&_cgc [_ded ]!='\n'{_dd .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_ded ++;};if _cgc [_ded ]=='\r'{_ded ++;if _cgc [_ded ]=='\n'{_ded ++;};}else if _cgc [_ded ]=='\n'{_ded ++;};};_ebf ._ceb .Discard (_ded );_gbe ,_acbd :=_fdb .PdfObject .(*_d .PdfObjectDictionary );if !_acbd {return nil ,_bc .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_dd .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_gbe );_dfbg ,_agc :=_gbe .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_d .PdfObjectInteger );if !_agc {return nil ,_bc .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_fddf :=*_dfbg ;if _fddf < 0{return nil ,_bc .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_fddf )> _ebf ._eg {_dd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_bc .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_dac :=make ([]byte ,_fddf );
_ ,_dgfc =_ebf .readAtLeast (_dac ,int (_fddf ));if _dgfc !=nil {_dd .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_dac ),_dac );_dd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dgfc );
return nil ,_dgfc ;};_fac :=_d .PdfObjectStream {};_fac .Stream =_dac ;_fac .PdfObjectDictionary =_fdb .PdfObject .(*_d .PdfObjectDictionary );_fac .ObjectNumber =_fdb .ObjectNumber ;_fac .GenerationNumber =_fdb .GenerationNumber ;_ebf .skipSpaces ();_ebf ._ceb .Discard (9);
_ebf .skipSpaces ();return &_fac ,nil ;};};_fdb .PdfObject ,_dgfc =_ebf .parseObject ();return &_fdb ,_dgfc ;};};_dd .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");return &_fdb ,nil ;
};func (_fegc *fdfParser )parse ()error {_fegc ._aff .Seek (0,_gf .SeekStart );_fegc ._ceb =_e .NewReader (_fegc ._aff );for {_fegc .skipComments ();_ggdgd ,_caf :=_fegc ._ceb .Peek (20);if _caf !=nil {_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _caf ;};if _f .HasPrefix (string (_ggdgd ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_fegc ._ceb .Discard (7);_fegc .skipSpaces ();_fegc .skipComments ();_fbg ,_ :=_fegc .parseDict ();_fegc ._afg =_fbg ;break ;};_fad :=_fg .FindStringSubmatchIndex (string (_ggdgd ));
if len (_fad )< 6{_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ggdgd ));
return _bc .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_ffa ,_caf :=_fegc .parseIndirectObject ();if _caf !=nil {return _caf ;};switch _dfa :=_ffa .(type ){case *_d .PdfIndirectObject :_fegc ._aaa [_dfa .ObjectNumber ]=_dfa ;case *_d .PdfObjectStream :_fegc ._aaa [_dfa .ObjectNumber ]=_dfa ;default:return _bc .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_aac *fdfParser )readAtLeast (_cgd []byte ,_bcb int )(int ,error ){_ff :=_bcb ;_bca :=0;_eef :=0;for _ff > 0{_af ,_bd :=_aac ._ceb .Read (_cgd [_bca :]);if _bd !=nil {_dd .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_af ,_eef ,_bd .Error ());
return _bca ,_bc .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_eef ++;_bca +=_af ;_ff -=_af ;};return _bca ,nil ;};func (_da *fdfParser )setFileOffset (_cbg int64 ){_da ._aff .Seek (_cbg ,_gf .SeekStart );_da ._ceb =_e .NewReader (_da ._aff );
};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_d .PdfObjectDictionary ,error ){_gfa :=map[string ]*_d .PdfObjectDictionary {};for _fee :=0;_fee < fdf ._gfd .Len ();_fee ++{_fb ,_ba :=_d .GetDict (fdf ._gfd .Get (_fee ));if _ba {_dff ,_ :=_d .GetString (_fb .Get ("\u0054"));
if _dff !=nil {_gfa [_dff .Str ()]=_fb ;};};};return _gfa ,nil ;};func _baa (_ade string )(*fdfParser ,error ){_cd :=fdfParser {};_aefb :=[]byte (_ade );_beff :=_ge .NewReader (_aefb );_cd ._aff =_beff ;_cd ._aaa =map[int64 ]_d .PdfObject {};_gfaa :=_e .NewReader (_beff );
_cd ._ceb =_gfaa ;_cd ._eg =int64 (len (_ade ));return &_cd ,_cd .parse ();};func (_cce *fdfParser )seekToEOFMarker (_gea int64 )error {_dgd :=int64 (0);_fegg :=int64 (1000);for _dgd < _gea {if _gea <=(_fegg +_dgd ){_fegg =_gea -_dgd ;};_ ,_bgc :=_cce ._aff .Seek (-_dgd -_fegg ,_gf .SeekEnd );
if _bgc !=nil {return _bgc ;};_cac :=make ([]byte ,_fegg );_cce ._aff .Read (_cac );_dd .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_cac ));
_bfd :=_fedg .FindAllStringIndex (string (_cac ),-1);if _bfd !=nil {_gda :=_bfd [len (_bfd )-1];_dd .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_bfd );_cce ._aff .Seek (-_dgd -_fegg +int64 (_gda [0]),_gf .SeekEnd );return nil ;};_dd .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_dgd +=_fegg ;};_dd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _bc .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_d .PdfObject ,error ){_bae ,_eb :=fdf .FieldDictionaries ();if _eb !=nil {return nil ,_eb ;};var _dg []string ;for _ae :=range _bae {_dg =append (_dg ,_ae );};_gc .Strings (_dg );_ee :=map[string ]_d .PdfObject {};
for _ ,_aa :=range _dg {_ec :=_bae [_aa ];_cg :=_d .TraceToDirectObject (_ec .Get ("\u0056"));_ee [_aa ]=_cg ;};return _ee ,nil ;};func (_affc *fdfParser )skipSpaces ()(int ,error ){_fbb :=0;for {_aec ,_aecf :=_affc ._ceb .ReadByte ();if _aecf !=nil {return 0,_aecf ;
};if _d .IsWhiteSpace (_aec ){_fbb ++;}else {_affc ._ceb .UnreadByte ();break ;};};return _fbb ,nil ;};func (_eeb *fdfParser )getFileOffset ()int64 {_gff ,_ :=_eeb ._aff .Seek (0,_gf .SeekCurrent );_gff -=int64 (_eeb ._ceb .Buffered ());return _gff ;};
func (_abc *fdfParser )parseArray ()(*_d .PdfObjectArray ,error ){_cba :=_d .MakeArray ();_abc ._ceb .ReadByte ();for {_abc .skipSpaces ();_dgb ,_cc :=_abc ._ceb .Peek (1);if _cc !=nil {return _cba ,_cc ;};if _dgb [0]==']'{_abc ._ceb .ReadByte ();break ;
};_bebf ,_cc :=_abc .parseObject ();if _cc !=nil {return _cba ,_cc ;};_cba .Append (_bebf );};return _cba ,nil ;};func (_age *fdfParser )parseHexString ()(*_d .PdfObjectString ,error ){_age ._ceb .ReadByte ();var _dfb _ge .Buffer ;for {_bbf ,_efd :=_age ._ceb .Peek (1);
if _efd !=nil {return _d .MakeHexString (""),_efd ;};if _bbf [0]=='>'{_age ._ceb .ReadByte ();break ;};_ca ,_ :=_age ._ceb .ReadByte ();if !_d .IsWhiteSpace (_ca ){_dfb .WriteByte (_ca );};};if _dfb .Len ()%2==1{_dfb .WriteRune ('0');};_cec ,_efe :=_be .DecodeString (_dfb .String ());
if _efe !=nil {_dd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_dfb .String ());
return _d .MakeHexString (""),nil ;};return _d .MakeHexString (string (_cec )),nil ;};var _dbe =_bb .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");var _fg =_bb .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");
func (_bec *fdfParser )parseNumber ()(_d .PdfObject ,error ){return _d .ParseNumber (_bec ._ceb )};func _eab (_bdb string )(_d .PdfObjectReference ,error ){_bcd :=_d .PdfObjectReference {};_fab :=_dbe .FindStringSubmatch (_bdb );if len (_fab )< 3{_dd .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _bcd ,_bc .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_bde ,_cbd :=_g .Atoi (_fab [1]);if _cbd !=nil {_dd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fab [1]);
return _bcd ,nil ;};_bcd .ObjectNumber =int64 (_bde );_fdd ,_cbd :=_g .Atoi (_fab [2]);if _cbd !=nil {_dd .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fab [2]);
return _bcd ,nil ;};_bcd .GenerationNumber =int64 (_fdd );return _bcd ,nil ;};func (_efa *fdfParser )readTextLine ()(string ,error ){var _ggb _ge .Buffer ;for {_bef ,_gffa :=_efa ._ceb .Peek (1);if _gffa !=nil {_dd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gffa .Error ());
return _ggb .String (),_gffa ;};if (_bef [0]!='\r')&&(_bef [0]!='\n'){_dbd ,_ :=_efa ._ceb .ReadByte ();_ggb .WriteByte (_dbd );}else {break ;};};return _ggb .String (),nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_ab ,_ag :=_fe .Open (fdfPath );if _ag !=nil {return nil ,_ag ;};defer _ab .Close ();return Load (_ab );};var _ggd =_bb .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");
var _ffe =_bb .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func _cfa (_bedd _gf .ReadSeeker )(*fdfParser ,error ){_adc :=&fdfParser {};_adc ._aff =_bedd ;_adc ._aaa =map[int64 ]_d .PdfObject {};
_cdd ,_eda ,_fdf :=_adc .parseFdfVersion ();if _fdf !=nil {_dd .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_fdf );return nil ,_fdf ;};_adc ._de =_cdd ;
_adc ._dec =_eda ;_fdf =_adc .parse ();return _adc ,_fdf ;};type fdfParser struct{_de int ;_dec int ;_aaa map[int64 ]_d .PdfObject ;_aff _gf .ReadSeeker ;_ceb *_e .Reader ;_eg int64 ;_afg *_d .PdfObjectDictionary ;};