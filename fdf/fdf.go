//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_gc "bufio";_bg "bytes";_ea "encoding/hex";_b "errors";_e "fmt";_bc "github.com/unidoc/unipdf/v3/common";_ae "github.com/unidoc/unipdf/v3/core";_bb "io";_ef "os";_a "regexp";_fc "sort";_f "strconv";_bd "strings";);

// Load loads FDF form data from `r`.
func Load (r _bb .ReadSeeker )(*Data ,error ){_c ,_bge :=_gcg (r );if _bge !=nil {return nil ,_bge ;};_cb ,_bge :=_c .Root ();if _bge !=nil {return nil ,_bge ;};_cd ,_d :=_ae .GetArray (_cb .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_d {return nil ,_b .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_fg :_cd ,_gf :_cb },nil ;};func (_bcdd *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_bcdd ._dac .Seek (0,_bb .SeekStart );_bcdd ._bba =_gc .NewReader (_bcdd ._dac );_bddc :=20;_fcb :=make ([]byte ,_bddc );for {_ecg ,_efc :=_bcdd ._bba .ReadByte ();
if _efc !=nil {if _efc ==_bb .EOF {break ;}else {return 0,0,_efc ;};};if _ae .IsDecimalDigit (_ecg )&&_fcb [_bddc -1]=='.'&&_ae .IsDecimalDigit (_fcb [_bddc -2])&&_fcb [_bddc -3]=='-'&&_fcb [_bddc -4]=='F'&&_fcb [_bddc -5]=='D'&&_fcb [_bddc -6]=='P'{_dbgb :=int (_fcb [_bddc -2]-'0');
_ebe :=int (_ecg -'0');return _dbgb ,_ebe ,nil ;};_fcb =append (_fcb [1:_bddc ],_ecg );};return 0,0,_b .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};var _af =_a .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func (_eef *fdfParser )getFileOffset ()int64 {_db ,_ :=_eef ._dac .Seek (0,_bb .SeekCurrent );_db -=int64 (_eef ._bba .Buffered ());return _db ;};func (_bgfa *fdfParser )skipComments ()error {if _ ,_gac :=_bgfa .skipSpaces ();_gac !=nil {return _gac ;};
_cg :=true ;for {_ede ,_ac :=_bgfa ._bba .Peek (1);if _ac !=nil {_bc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ac .Error ());return _ac ;};if _cg &&_ede [0]!='%'{return nil ;};_cg =false ;if (_ede [0]!='\r')&&(_ede [0]!='\n'){_bgfa ._bba .ReadByte ();
}else {break ;};};return _bgfa .skipComments ();};func (_efd *fdfParser )parseObject ()(_ae .PdfObject ,error ){_bc .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_efd .skipSpaces ();for {_fgd ,_acb :=_efd ._bba .Peek (2);
if _acb !=nil {return nil ,_acb ;};_bc .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_fgd ));if _fgd [0]=='/'{_bgfd ,_edb :=_efd .parseName ();_bc .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_bgfd );
return &_bgfd ,_edb ;}else if _fgd [0]=='('{_bc .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _efd .parseString ();}else if _fgd [0]=='['{_bc .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _efd .parseArray ();
}else if (_fgd [0]=='<')&&(_fgd [1]=='<'){_bc .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _efd .parseDict ();}else if _fgd [0]=='<'{_bc .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _efd .parseHexString ();
}else if _fgd [0]=='%'{_efd .readComment ();_efd .skipSpaces ();}else {_bc .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_fgd ,_ =_efd ._bba .Peek (15);_dfa :=string (_fgd );_bc .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_dfa );
if (len (_dfa )> 3)&&(_dfa [:4]=="\u006e\u0075\u006c\u006c"){_ad ,_ced :=_efd .parseNull ();return &_ad ,_ced ;}else if (len (_dfa )> 4)&&(_dfa [:5]=="\u0066\u0061\u006cs\u0065"){_cdf ,_ggdd :=_efd .parseBool ();return &_cdf ,_ggdd ;}else if (len (_dfa )> 3)&&(_dfa [:4]=="\u0074\u0072\u0075\u0065"){_abe ,_aaf :=_efd .parseBool ();
return &_abe ,_aaf ;};_aaa :=_ggc .FindStringSubmatch (_dfa );if len (_aaa )> 1{_fgd ,_ =_efd ._bba .ReadBytes ('R');_bc .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_fgd [:]));_aed ,_bf :=_ba (string (_fgd ));
return &_aed ,_bf ;};_fbe :=_af .FindStringSubmatch (_dfa );if len (_fbe )> 1{_bc .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _efd .parseNumber ();};_fbe =_ggga .FindStringSubmatch (_dfa );if len (_fbe )> 1{_bc .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_bc .Log .Trace ("\u0025\u0020\u0073",_fbe );return _efd .parseNumber ();};_bc .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_dfa );return nil ,_b .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};type fdfParser struct{_de int ;_dff int ;_bdc map[int64 ]_ae .PdfObject ;_dac _bb .ReadSeeker ;_bba *_gc .Reader ;_ggf int64 ;_cfga *_ae .PdfObjectDictionary ;};var _ca =_a .MustCompile ("\u0025\u0025\u0045O\u0046");func (_eg *fdfParser )parseBool ()(_ae .PdfObjectBool ,error ){_daa ,_cgde :=_eg ._bba .Peek (4);
if _cgde !=nil {return _ae .PdfObjectBool (false ),_cgde ;};if (len (_daa )>=4)&&(string (_daa [:4])=="\u0074\u0072\u0075\u0065"){_eg ._bba .Discard (4);return _ae .PdfObjectBool (true ),nil ;};_daa ,_cgde =_eg ._bba .Peek (5);if _cgde !=nil {return _ae .PdfObjectBool (false ),_cgde ;
};if (len (_daa )>=5)&&(string (_daa [:5])=="\u0066\u0061\u006cs\u0065"){_eg ._bba .Discard (5);return _ae .PdfObjectBool (false ),nil ;};return _ae .PdfObjectBool (false ),_b .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};var _gae =_a .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_ae .PdfObjectDictionary ,error ){_fga :=map[string ]*_ae .PdfObjectDictionary {};for _da :=0;_da < fdf ._fg .Len ();_da ++{_df ,_ed :=_ae .GetDict (fdf ._fg .Get (_da ));if _ed {_bgf ,_ :=_ae .GetString (_df .Get ("\u0054"));
if _bgf !=nil {_fga [_bgf .Str ()]=_df ;};};};return _fga ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_ae .PdfObject ,error ){_cfg ,_gg :=fdf .FieldDictionaries ();if _gg !=nil {return nil ,_gg ;};var _ga []string ;for _gb :=range _cfg {_ga =append (_ga ,_gb );};_fc .Strings (_ga );_bga :=map[string ]_ae .PdfObject {};
for _ ,_bca :=range _ga {_bde :=_cfg [_bca ];_ab :=_ae .TraceToDirectObject (_bde .Get ("\u0056"));_bga [_bca ]=_ab ;};return _bga ,nil ;};func (_afg *fdfParser )readComment ()(string ,error ){var _bed _bg .Buffer ;_ ,_gba :=_afg .skipSpaces ();if _gba !=nil {return _bed .String (),_gba ;
};_fd :=true ;for {_gcb ,_gab :=_afg ._bba .Peek (1);if _gab !=nil {_bc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_gab .Error ());return _bed .String (),_gab ;};if _fd &&_gcb [0]!='%'{return _bed .String (),_b .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_fd =false ;if (_gcb [0]!='\r')&&(_gcb [0]!='\n'){_bgc ,_ :=_afg ._bba .ReadByte ();_bed .WriteByte (_bgc );}else {break ;};};return _bed .String (),nil ;};func _ba (_gef string )(_ae .PdfObjectReference ,error ){_ded :=_ae .PdfObjectReference {};_cbe :=_ggc .FindStringSubmatch (_gef );
if len (_cbe )< 3{_bc .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _ded ,_b .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_gbde ,_age :=_f .Atoi (_cbe [1]);if _age !=nil {_bc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_cbe [1]);
return _ded ,nil ;};_ded .ObjectNumber =int64 (_gbde );_ccc ,_age :=_f .Atoi (_cbe [2]);if _age !=nil {_bc .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_cbe [2]);
return _ded ,nil ;};_ded .GenerationNumber =int64 (_ccc );return _ded ,nil ;};func (_bgeb *fdfParser )parseString ()(*_ae .PdfObjectString ,error ){_bgeb ._bba .ReadByte ();var _cdc _bg .Buffer ;_edd :=1;for {_dffc ,_ceg :=_bgeb ._bba .Peek (1);if _ceg !=nil {return _ae .MakeString (_cdc .String ()),_ceg ;
};if _dffc [0]=='\\'{_bgeb ._bba .ReadByte ();_aff ,_eb :=_bgeb ._bba .ReadByte ();if _eb !=nil {return _ae .MakeString (_cdc .String ()),_eb ;};if _ae .IsOctalDigit (_aff ){_bgb ,_cee :=_bgeb ._bba .Peek (2);if _cee !=nil {return _ae .MakeString (_cdc .String ()),_cee ;
};var _fbc []byte ;_fbc =append (_fbc ,_aff );for _ ,_eab :=range _bgb {if _ae .IsOctalDigit (_eab ){_fbc =append (_fbc ,_eab );}else {break ;};};_bgeb ._bba .Discard (len (_fbc )-1);_bc .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_fbc );
_bbb ,_cee :=_f .ParseUint (string (_fbc ),8,32);if _cee !=nil {return _ae .MakeString (_cdc .String ()),_cee ;};_cdc .WriteByte (byte (_bbb ));continue ;};switch _aff {case 'n':_cdc .WriteRune ('\n');case 'r':_cdc .WriteRune ('\r');case 't':_cdc .WriteRune ('\t');
case 'b':_cdc .WriteRune ('\b');case 'f':_cdc .WriteRune ('\f');case '(':_cdc .WriteRune ('(');case ')':_cdc .WriteRune (')');case '\\':_cdc .WriteRune ('\\');};continue ;}else if _dffc [0]=='('{_edd ++;}else if _dffc [0]==')'{_edd --;if _edd ==0{_bgeb ._bba .ReadByte ();
break ;};};_dcb ,_ :=_bgeb ._bba .ReadByte ();_cdc .WriteByte (_dcb );};return _ae .MakeString (_cdc .String ()),nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_gf *_ae .PdfObjectDictionary ;_fg *_ae .PdfObjectArray ;};func (_bdd *fdfParser )parseHexString ()(*_ae .PdfObjectString ,error ){_bdd ._bba .ReadByte ();var _aab _bg .Buffer ;for {_fef ,_cbd :=_bdd ._bba .Peek (1);if _cbd !=nil {return _ae .MakeHexString (""),_cbd ;
};if _fef [0]=='>'{_bdd ._bba .ReadByte ();break ;};_abg ,_ :=_bdd ._bba .ReadByte ();if !_ae .IsWhiteSpace (_abg ){_aab .WriteByte (_abg );};};if _aab .Len ()%2==1{_aab .WriteRune ('0');};_dec ,_abf :=_ea .DecodeString (_aab .String ());if _abf !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_aab .String ());
return _ae .MakeHexString (""),nil ;};return _ae .MakeHexString (string (_dec )),nil ;};func (_fe *fdfParser )readTextLine ()(string ,error ){var _fdf _bg .Buffer ;for {_cea ,_fca :=_fe ._bba .Peek (1);if _fca !=nil {_bc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fca .Error ());
return _fdf .String (),_fca ;};if (_cea [0]!='\r')&&(_cea [0]!='\n'){_cab ,_ :=_fe ._bba .ReadByte ();_fdf .WriteByte (_cab );}else {break ;};};return _fdf .String (),nil ;};func (_aec *fdfParser )parseNumber ()(_ae .PdfObject ,error ){return _ae .ParseNumber (_aec ._bba )};
func (_bgg *fdfParser )parse ()error {_bgg ._dac .Seek (0,_bb .SeekStart );_bgg ._bba =_gc .NewReader (_bgg ._dac );for {_bgg .skipComments ();_bbed ,_acd :=_bgg ._bba .Peek (20);if _acd !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _acd ;};if _bd .HasPrefix (string (_bbed ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_bgg ._bba .Discard (7);_bgg .skipSpaces ();_bgg .skipComments ();_ddgc ,_ :=_bgg .parseDict ();_bgg ._cfga =_ddgc ;break ;};_ceb :=_gae .FindStringSubmatchIndex (string (_bbed ));
if len (_ceb )< 6{_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bbed ));
return _b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_cbdg ,_acd :=_bgg .parseIndirectObject ();if _acd !=nil {return _acd ;};switch _gcf :=_cbdg .(type ){case *_ae .PdfIndirectObject :_bgg ._bdc [_gcf .ObjectNumber ]=_gcf ;case *_ae .PdfObjectStream :_bgg ._bdc [_gcf .ObjectNumber ]=_gcf ;default:return _b .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};

// Root returns the Root of the FDF document.
func (_dca *fdfParser )Root ()(*_ae .PdfObjectDictionary ,error ){if _dca ._cfga !=nil {if _aaac ,_gggb :=_dca .trace (_dca ._cfga .Get ("\u0052\u006f\u006f\u0074")).(*_ae .PdfObjectDictionary );_gggb {if _gge ,_cgea :=_dca .trace (_aaac .Get ("\u0046\u0044\u0046")).(*_ae .PdfObjectDictionary );
_cgea {return _gge ,nil ;};};};var _aafag []int64 ;for _ece :=range _dca ._bdc {_aafag =append (_aafag ,_ece );};_fc .Slice (_aafag ,func (_agb ,_bfe int )bool {return _aafag [_agb ]< _aafag [_bfe ]});for _ ,_gbaa :=range _aafag {_fad :=_dca ._bdc [_gbaa ];
if _gaf ,_efgc :=_dca .trace (_fad ).(*_ae .PdfObjectDictionary );_efgc {if _dcf ,_ddb :=_dca .trace (_gaf .Get ("\u0046\u0044\u0046")).(*_ae .PdfObjectDictionary );_ddb {return _dcf ,nil ;};};};return nil ,_b .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_aa *fdfParser )setFileOffset (_ggd int64 ){_aa ._dac .Seek (_ggd ,_bb .SeekStart );_aa ._bba =_gc .NewReader (_aa ._dac );};func (_gcd *fdfParser )parseDict ()(*_ae .PdfObjectDictionary ,error ){_bc .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_fdfa :=_ae .MakeDict ();_bfc ,_ :=_gcd ._bba .ReadByte ();if _bfc !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_bfc ,_ =_gcd ._bba .ReadByte ();if _bfc !='<'{return nil ,_b .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_gcd .skipSpaces ();_gcd .skipComments ();_dde ,_ddeg :=_gcd ._bba .Peek (2);if _ddeg !=nil {return nil ,_ddeg ;};_bc .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dde ),string (_dde ));
if (_dde [0]=='>')&&(_dde [1]=='>'){_bc .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_gcd ._bba .ReadByte ();_gcd ._bba .ReadByte ();break ;};_bc .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_cegc ,_ddeg :=_gcd .parseName ();_bc .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_cegc );if _ddeg !=nil {_bc .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_ddeg );
return nil ,_ddeg ;};if len (_cegc )> 4&&_cegc [len (_cegc )-4:]=="\u006e\u0075\u006c\u006c"{_cad :=_cegc [0:len (_cegc )-4];_bc .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_cegc );
_bc .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_cad );_gcd .skipSpaces ();_agc ,_ :=_gcd ._bba .Peek (1);if _agc [0]=='/'{_fdfa .Set (_cad ,_ae .MakeNull ());continue ;};};_gcd .skipSpaces ();
_aee ,_ddeg :=_gcd .parseObject ();if _ddeg !=nil {return nil ,_ddeg ;};_fdfa .Set (_cegc ,_aee );_bc .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_cegc ,_aee .String ());};_bc .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _fdfa ,nil ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_cf ,_fge :=_ef .Open (fdfPath );if _fge !=nil {return nil ,_fge ;};defer _cf .Close ();return Load (_cf );};func (_fgaf *fdfParser )parseNull ()(_ae .PdfObjectNull ,error ){_ ,_cgdc :=_fgaf ._bba .Discard (4);
return _ae .PdfObjectNull {},_cgdc ;};func (_ff *fdfParser )readAtLeast (_gbd []byte ,_ag int )(int ,error ){_dd :=_ag ;_ee :=0;_ggg :=0;for _dd > 0{_cdg ,_gbb :=_ff ._bba .Read (_gbd [_ee :]);if _gbb !=nil {_bc .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_cdg ,_ggg ,_gbb .Error ());
return _ee ,_b .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_ggg ++;_ee +=_cdg ;_dd -=_cdg ;};return _ee ,nil ;};func (_baf *fdfParser )parseIndirectObject ()(_ae .PdfObject ,error ){_dg :=_ae .PdfIndirectObject {};
_bc .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_cbaa ,_aga :=_baf ._bba .Peek (20);if _aga !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_dg ,_aga ;};_bc .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_cbaa ));_ggddd :=_gae .FindStringSubmatchIndex (string (_cbaa ));if len (_ggddd )< 6{_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cbaa ));
return &_dg ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_baf ._bba .Discard (_ggddd [0]);_bc .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_ggddd );_bad :=_ggddd [1]-_ggddd [0];_bef :=make ([]byte ,_bad );_ ,_aga =_baf .readAtLeast (_bef ,_bad );if _aga !=nil {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_aga );
return nil ,_aga ;};_bc .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_bef );_bcdg :=_gae .FindStringSubmatch (string (_bef ));if len (_bcdg )< 3{_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bef ));
return &_dg ,_b .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bag ,_ :=_f .Atoi (_bcdg [1]);_fcf ,_ :=_f .Atoi (_bcdg [2]);_dg .ObjectNumber =int64 (_bag );_dg .GenerationNumber =int64 (_fcf );for {_abc ,_eba :=_baf ._bba .Peek (2);if _eba !=nil {return &_dg ,_eba ;};_bc .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_abc ),string (_abc ));
if _ae .IsWhiteSpace (_abc [0]){_baf .skipSpaces ();}else if _abc [0]=='%'{_baf .skipComments ();}else if (_abc [0]=='<')&&(_abc [1]=='<'){_bc .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_dg .PdfObject ,_eba =_baf .parseDict ();
_bc .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_eba );if _eba !=nil {return &_dg ,_eba ;};_bc .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_abc [0]=='/')||(_abc [0]=='(')||(_abc [0]=='[')||(_abc [0]=='<'){_dg .PdfObject ,_eba =_baf .parseObject ();if _eba !=nil {return &_dg ,_eba ;};_bc .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _abc [0]=='e'{_eged ,_eddd :=_baf .readTextLine ();if _eddd !=nil {return nil ,_eddd ;};if len (_eged )>=6&&_eged [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _abc [0]=='s'{_abc ,_ =_baf ._bba .Peek (10);if string (_abc [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_fac :=6;
if len (_abc )> 6{if _ae .IsWhiteSpace (_abc [_fac ])&&_abc [_fac ]!='\r'&&_abc [_fac ]!='\n'{_bc .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_fac ++;};if _abc [_fac ]=='\r'{_fac ++;if _abc [_fac ]=='\n'{_fac ++;};}else if _abc [_fac ]=='\n'{_fac ++;};};_baf ._bba .Discard (_fac );_cegf ,_acc :=_dg .PdfObject .(*_ae .PdfObjectDictionary );if !_acc {return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_bc .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_cegf );_dbb ,_gccb :=_cegf .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_ae .PdfObjectInteger );if !_gccb {return nil ,_b .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_gfe :=*_dbb ;if _gfe < 0{return nil ,_b .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_gfe )> _baf ._ggf {_bc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_b .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_efdg :=make ([]byte ,_gfe );
_ ,_eba =_baf .readAtLeast (_efdg ,int (_gfe ));if _eba !=nil {_bc .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_efdg ),_efdg );_bc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eba );
return nil ,_eba ;};_fcfe :=_ae .PdfObjectStream {};_fcfe .Stream =_efdg ;_fcfe .PdfObjectDictionary =_dg .PdfObject .(*_ae .PdfObjectDictionary );_fcfe .ObjectNumber =_dg .ObjectNumber ;_fcfe .GenerationNumber =_dg .GenerationNumber ;_baf .skipSpaces ();
_baf ._bba .Discard (9);_baf .skipSpaces ();return &_fcfe ,nil ;};};_dg .PdfObject ,_eba =_baf .parseObject ();return &_dg ,_eba ;};};_bc .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_dg ,nil ;};var _be =_a .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");var _ggga =_a .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func (_feg *fdfParser )seekToEOFMarker (_fgg int64 )error {_afcb :=int64 (0);_aafa :=int64 (1000);for _afcb < _fgg {if _fgg <=(_aafa +_afcb ){_aafa =_fgg -_afcb ;};_ ,_ddg :=_feg ._dac .Seek (-_afcb -_aafa ,_bb .SeekEnd );if _ddg !=nil {return _ddg ;};
_cef :=make ([]byte ,_aafa );_feg ._dac .Read (_cef );_bc .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_cef ));_efea :=_ca .FindAllStringIndex (string (_cef ),-1);
if _efea !=nil {_bdf :=_efea [len (_efea )-1];_bc .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_efea );_feg ._dac .Seek (-_afcb -_aafa +int64 (_bdf [0]),_bb .SeekEnd );return nil ;};_bc .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_afcb +=_aafa ;};_bc .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _b .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_afc *fdfParser )parseFdfVersion ()(int ,int ,error ){_afc ._dac .Seek (0,_bb .SeekStart );_fgdd :=20;_bgea :=make ([]byte ,_fgdd );_afc ._dac .Read (_bgea );_gda :=_be .FindStringSubmatch (string (_bgea ));if len (_gda )< 3{_abd ,_ec ,_fa :=_afc .seekFdfVersionTopDown ();
if _fa !=nil {_bc .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");return 0,0,_fa ;
};return _abd ,_ec ,nil ;};_abda ,_ddde :=_f .Atoi (_gda [1]);if _ddde !=nil {return 0,0,_ddde ;};_cgb ,_ddde :=_f .Atoi (_gda [2]);if _ddde !=nil {return 0,0,_ddde ;};_bc .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_abda ,_cgb );
return _abda ,_cgb ,nil ;};func (_cde *fdfParser )parseArray ()(*_ae .PdfObjectArray ,error ){_eee :=_ae .MakeArray ();_cde ._bba .ReadByte ();for {_cde .skipSpaces ();_cge ,_deag :=_cde ._bba .Peek (1);if _deag !=nil {return _eee ,_deag ;};if _cge [0]==']'{_cde ._bba .ReadByte ();
break ;};_dbg ,_deag :=_cde .parseObject ();if _deag !=nil {return _eee ,_deag ;};_eee .Append (_dbg );};return _eee ,nil ;};func (_dbbc *fdfParser )trace (_bea _ae .PdfObject )_ae .PdfObject {switch _cbb :=_bea .(type ){case *_ae .PdfObjectReference :_bdfg ,_fba :=_dbbc ._bdc [_cbb .ObjectNumber ].(*_ae .PdfIndirectObject );
if _fba {return _bdfg .PdfObject ;};_bc .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_ae .PdfIndirectObject :return _cbb .PdfObject ;};return _bea ;};func _gcg (_dgd _bb .ReadSeeker )(*fdfParser ,error ){_aabb :=&fdfParser {};
_aabb ._dac =_dgd ;_aabb ._bdc =map[int64 ]_ae .PdfObject {};_cdb ,_dfce ,_ebfc :=_aabb .parseFdfVersion ();if _ebfc !=nil {_bc .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_ebfc );
return nil ,_ebfc ;};_aabb ._de =_cdb ;_aabb ._dff =_dfce ;_ebfc =_aabb .parse ();return _aabb ,_ebfc ;};func (_ddd *fdfParser )parseName ()(_ae .PdfObjectName ,error ){var _eaa _bg .Buffer ;_edc :=false ;for {_cfd ,_gd :=_ddd ._bba .Peek (1);if _gd ==_bb .EOF {break ;
};if _gd !=nil {return _ae .PdfObjectName (_eaa .String ()),_gd ;};if !_edc {if _cfd [0]=='/'{_edc =true ;_ddd ._bba .ReadByte ();}else if _cfd [0]=='%'{_ddd .readComment ();_ddd .skipSpaces ();}else {_bc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_cfd ,_cfd );
return _ae .PdfObjectName (_eaa .String ()),_e .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_cfd [0]);};}else {if _ae .IsWhiteSpace (_cfd [0]){break ;}else if (_cfd [0]=='/')||(_cfd [0]=='[')||(_cfd [0]=='(')||(_cfd [0]==']')||(_cfd [0]=='<')||(_cfd [0]=='>'){break ;
}else if _cfd [0]=='#'{_cgd ,_efe :=_ddd ._bba .Peek (3);if _efe !=nil {return _ae .PdfObjectName (_eaa .String ()),_efe ;};_ddd ._bba .Discard (3);_bcd ,_efe :=_ea .DecodeString (string (_cgd [1:3]));if _efe !=nil {return _ae .PdfObjectName (_eaa .String ()),_efe ;
};_eaa .Write (_bcd );}else {_cc ,_ :=_ddd ._bba .ReadByte ();_eaa .WriteByte (_cc );};};};return _ae .PdfObjectName (_eaa .String ()),nil ;};var _ggc =_a .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");
func (_gbg *fdfParser )skipSpaces ()(int ,error ){_cba :=0;for {_ge ,_dcg :=_gbg ._bba .ReadByte ();if _dcg !=nil {return 0,_dcg ;};if _ae .IsWhiteSpace (_ge ){_cba ++;}else {_gbg ._bba .UnreadByte ();break ;};};return _cba ,nil ;};func _dge (_dcbd string )(*fdfParser ,error ){_bdfa :=fdfParser {};
_fed :=[]byte (_dcbd );_cfa :=_bg .NewReader (_fed );_bdfa ._dac =_cfa ;_bdfa ._bdc =map[int64 ]_ae .PdfObject {};_dfg :=_gc .NewReader (_cfa );_bdfa ._bba =_dfg ;_bdfa ._ggf =int64 (len (_dcbd ));return &_bdfa ,_bdfa .parse ();};