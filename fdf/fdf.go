//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_fc "bufio";_db "bytes";_f "encoding/hex";_a "errors";_ad "fmt";_bga "github.com/unidoc/unipdf/v3/common";_ab "github.com/unidoc/unipdf/v3/core";_bg "io";_fcd "os";_ge "regexp";_dg "sort";_b "strconv";_g "strings";);func (_cgfe *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_cgfe ._acg .Seek (0,_bg .SeekStart );
_cgfe ._eb =_fc .NewReader (_cgfe ._acg );_defa :=20;_baa :=make ([]byte ,_defa );for {_baba ,_beb :=_cgfe ._eb .ReadByte ();if _beb !=nil {if _beb ==_bg .EOF {break ;}else {return 0,0,_beb ;};};if _ab .IsDecimalDigit (_baba )&&_baa [_defa -1]=='.'&&_ab .IsDecimalDigit (_baa [_defa -2])&&_baa [_defa -3]=='-'&&_baa [_defa -4]=='F'&&_baa [_defa -5]=='D'&&_baa [_defa -6]=='P'{_ggdc :=int (_baa [_defa -2]-'0');
_ebdb :=int (_baba -'0');return _ggdc ,_ebdb ,nil ;};_baa =append (_baa [1:_defa ],_baba );};return 0,0,_a .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_bbaab *fdfParser )parseDict ()(*_ab .PdfObjectDictionary ,error ){_bga .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_ffe :=_ab .MakeDict ();_cdgc ,_ :=_bbaab ._eb .ReadByte ();if _cdgc !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_cdgc ,_ =_bbaab ._eb .ReadByte ();if _cdgc !='<'{return nil ,_a .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_bbaab .skipSpaces ();_bbaab .skipComments ();_dda ,_fcf :=_bbaab ._eb .Peek (2);if _fcf !=nil {return nil ,_fcf ;};_bga .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dda ),string (_dda ));
if (_dda [0]=='>')&&(_dda [1]=='>'){_bga .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_bbaab ._eb .ReadByte ();_bbaab ._eb .ReadByte ();break ;};_bga .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_dbf ,_fcf :=_bbaab .parseName ();_bga .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_dbf );if _fcf !=nil {_bga .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_fcf );
return nil ,_fcf ;};if len (_dbf )> 4&&_dbf [len (_dbf )-4:]=="\u006e\u0075\u006c\u006c"{_bge :=_dbf [0:len (_dbf )-4];_bga .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_dbf );
_bga .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_bge );_bbaab .skipSpaces ();_dae ,_ :=_bbaab ._eb .Peek (1);if _dae [0]=='/'{_ffe .Set (_bge ,_ab .MakeNull ());continue ;};};
_bbaab .skipSpaces ();_fagb ,_fcf :=_bbaab .parseObject ();if _fcf !=nil {return nil ,_fcf ;};_ffe .Set (_dbf ,_fagb );_bga .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_dbf ,_fagb .String ());};_bga .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _ffe ,nil ;};func (_bfg *fdfParser )parseObject ()(_ab .PdfObject ,error ){_bga .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_bfg .skipSpaces ();for {_fag ,_cfd :=_bfg ._eb .Peek (2);if _cfd !=nil {return nil ,_cfd ;
};_bga .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_fag ));if _fag [0]=='/'{_abe ,_ecf :=_bfg .parseName ();_bga .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_abe );
return &_abe ,_ecf ;}else if _fag [0]=='('{_bga .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _bfg .parseString ();}else if _fag [0]=='['{_bga .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _bfg .parseArray ();
}else if (_fag [0]=='<')&&(_fag [1]=='<'){_bga .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _bfg .parseDict ();}else if _fag [0]=='<'{_bga .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _bfg .parseHexString ();
}else if _fag [0]=='%'{_bfg .readComment ();_bfg .skipSpaces ();}else {_bga .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_fag ,_ =_bfg ._eb .Peek (15);_ddd :=string (_fag );_bga .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_ddd );
if (len (_ddd )> 3)&&(_ddd [:4]=="\u006e\u0075\u006c\u006c"){_fcb ,_aff :=_bfg .parseNull ();return &_fcb ,_aff ;}else if (len (_ddd )> 4)&&(_ddd [:5]=="\u0066\u0061\u006cs\u0065"){_gefg ,_fec :=_bfg .parseBool ();return &_gefg ,_fec ;}else if (len (_ddd )> 3)&&(_ddd [:4]=="\u0074\u0072\u0075\u0065"){_cca ,_agb :=_bfg .parseBool ();
return &_cca ,_agb ;};_bfgf :=_ba .FindStringSubmatch (_ddd );if len (_bfgf )> 1{_fag ,_ =_bfg ._eb .ReadBytes ('R');_bga .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_fag [:]));_eea ,_efa :=_bbfa (string (_fag ));
return &_eea ,_efa ;};_aeg :=_dbg .FindStringSubmatch (_ddd );if len (_aeg )> 1{_bga .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _bfg .parseNumber ();};_aeg =_bbc .FindStringSubmatch (_ddd );if len (_aeg )> 1{_bga .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_bga .Log .Trace ("\u0025\u0020\u0073",_aeg );return _bfg .parseNumber ();};_bga .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_ddd );return nil ,_a .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_efe *fdfParser )trace (_gcbc _ab .PdfObject )_ab .PdfObject {switch _cead :=_gcbc .(type ){case *_ab .PdfObjectReference :_eddb ,_dge :=_efe ._cdg [_cead .ObjectNumber ].(*_ab .PdfIndirectObject );if _dge {return _eddb .PdfObject ;};_bga .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
return nil ;case *_ab .PdfIndirectObject :return _cead .PdfObject ;};return _gcbc ;};var _ba =_ge .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func _bbfa (_fb string )(_ab .PdfObjectReference ,error ){_geg :=_ab .PdfObjectReference {};
_dee :=_ba .FindStringSubmatch (_fb );if len (_dee )< 3{_bga .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _geg ,_a .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_afe ,_bbaa :=_b .Atoi (_dee [1]);if _bbaa !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_dee [1]);
return _geg ,nil ;};_geg .ObjectNumber =int64 (_afe );_gga ,_bbaa :=_b .Atoi (_dee [2]);if _bbaa !=nil {_bga .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_dee [2]);
return _geg ,nil ;};_geg .GenerationNumber =int64 (_gga );return _geg ,nil ;};func _bbe (_ggab _bg .ReadSeeker )(*fdfParser ,error ){_fcge :=&fdfParser {};_fcge ._acg =_ggab ;_fcge ._cdg =map[int64 ]_ab .PdfObject {};_ebbc ,_bda ,_agf :=_fcge .parseFdfVersion ();
if _agf !=nil {_bga .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_agf );return nil ,_agf ;};_fcge ._gcb =_ebbc ;_fcge ._ef =_bda ;_agf =_fcge .parse ();
return _fcge ,_agf ;};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_c ,_gg :=_fcd .Open (fdfPath );if _gg !=nil {return nil ,_gg ;};defer _c .Close ();return Load (_c );};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_ab .PdfObjectDictionary ,error ){_gc :=map[string ]*_ab .PdfObjectDictionary {};for _eg :=0;_eg < fdf ._bd .Len ();_eg ++{_cb ,_dd :=_ab .GetDict (fdf ._bd .Get (_eg ));if _dd {_ae ,_ :=_ab .GetString (_cb .Get ("\u0054"));
if _ae !=nil {_gc [_ae .Str ()]=_cb ;};};};return _gc ,nil ;};var _bdg =_ge .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func _gabf (_cde string )(*fdfParser ,error ){_fggb :=fdfParser {};_eaa :=[]byte (_cde );
_ffgd :=_db .NewReader (_eaa );_fggb ._acg =_ffgd ;_fggb ._cdg =map[int64 ]_ab .PdfObject {};_fggc :=_fc .NewReader (_ffgd );_fggb ._eb =_fggc ;_fggb ._eda =int64 (len (_cde ));return &_fggb ,_fggb .parse ();};func (_dfe *fdfParser )parseBool ()(_ab .PdfObjectBool ,error ){_ee ,_aae :=_dfe ._eb .Peek (4);
if _aae !=nil {return _ab .PdfObjectBool (false ),_aae ;};if (len (_ee )>=4)&&(string (_ee [:4])=="\u0074\u0072\u0075\u0065"){_dfe ._eb .Discard (4);return _ab .PdfObjectBool (true ),nil ;};_ee ,_aae =_dfe ._eb .Peek (5);if _aae !=nil {return _ab .PdfObjectBool (false ),_aae ;
};if (len (_ee )>=5)&&(string (_ee [:5])=="\u0066\u0061\u006cs\u0065"){_dfe ._eb .Discard (5);return _ab .PdfObjectBool (false ),nil ;};return _ab .PdfObjectBool (false ),_a .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");
};func (_cf *fdfParser )readTextLine ()(string ,error ){var _abca _db .Buffer ;for {_bca ,_bcaa :=_cf ._eb .Peek (1);if _bcaa !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_bcaa .Error ());return _abca .String (),_bcaa ;};
if (_bca [0]!='\r')&&(_bca [0]!='\n'){_bgb ,_ :=_cf ._eb .ReadByte ();_abca .WriteByte (_bgb );}else {break ;};};return _abca .String (),nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_bc *_ab .PdfObjectDictionary ;_bd *_ab .PdfObjectArray ;};

// Root returns the Root of the FDF document.
func (_dbgc *fdfParser )Root ()(*_ab .PdfObjectDictionary ,error ){if _dbgc ._bgg !=nil {if _gac ,_dfg :=_dbgc .trace (_dbgc ._bgg .Get ("\u0052\u006f\u006f\u0074")).(*_ab .PdfObjectDictionary );_dfg {if _adc ,_eag :=_dbgc .trace (_gac .Get ("\u0046\u0044\u0046")).(*_ab .PdfObjectDictionary );
_eag {return _adc ,nil ;};};};var _aaee []int64 ;for _edab :=range _dbgc ._cdg {_aaee =append (_aaee ,_edab );};_dg .Slice (_aaee ,func (_adda ,_ebd int )bool {return _aaee [_adda ]< _aaee [_ebd ]});for _ ,_dbc :=range _aaee {_eaac :=_dbgc ._cdg [_dbc ];
if _feag ,_bab :=_dbgc .trace (_eaac ).(*_ab .PdfObjectDictionary );_bab {if _gfc ,_fbe :=_dbgc .trace (_feag .Get ("\u0046\u0044\u0046")).(*_ab .PdfObjectDictionary );_fbe {return _gfc ,nil ;};};};return nil ,_a .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_da *fdfParser )parseName ()(_ab .PdfObjectName ,error ){var _bbf _db .Buffer ;_afab :=false ;for {_gcc ,_bba :=_da ._eb .Peek (1);if _bba ==_bg .EOF {break ;};if _bba !=nil {return _ab .PdfObjectName (_bbf .String ()),_bba ;};if !_afab {if _gcc [0]=='/'{_afab =true ;
_da ._eb .ReadByte ();}else if _gcc [0]=='%'{_da .readComment ();_da .skipSpaces ();}else {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_gcc ,_gcc );
return _ab .PdfObjectName (_bbf .String ()),_ad .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_gcc [0]);};}else {if _ab .IsWhiteSpace (_gcc [0]){break ;}else if (_gcc [0]=='/')||(_gcc [0]=='[')||(_gcc [0]=='(')||(_gcc [0]==']')||(_gcc [0]=='<')||(_gcc [0]=='>'){break ;
}else if _gcc [0]=='#'{_ebe ,_ebc :=_da ._eb .Peek (3);if _ebc !=nil {return _ab .PdfObjectName (_bbf .String ()),_ebc ;};_da ._eb .Discard (3);_add ,_ebc :=_f .DecodeString (string (_ebe [1:3]));if _ebc !=nil {return _ab .PdfObjectName (_bbf .String ()),_ebc ;
};_bbf .Write (_add );}else {_dgc ,_ :=_da ._eb .ReadByte ();_bbf .WriteByte (_dgc );};};};return _ab .PdfObjectName (_bbf .String ()),nil ;};func (_ca *fdfParser )parseString ()(*_ab .PdfObjectString ,error ){_ca ._eb .ReadByte ();var _fg _db .Buffer ;
_bcab :=1;for {_bdc ,_ga :=_ca ._eb .Peek (1);if _ga !=nil {return _ab .MakeString (_fg .String ()),_ga ;};if _bdc [0]=='\\'{_ca ._eb .ReadByte ();_abaf ,_cea :=_ca ._eb .ReadByte ();if _cea !=nil {return _ab .MakeString (_fg .String ()),_cea ;};if _ab .IsOctalDigit (_abaf ){_gaa ,_fae :=_ca ._eb .Peek (2);
if _fae !=nil {return _ab .MakeString (_fg .String ()),_fae ;};var _bgbb []byte ;_bgbb =append (_bgbb ,_abaf );for _ ,_afb :=range _gaa {if _ab .IsOctalDigit (_afb ){_bgbb =append (_bgbb ,_afb );}else {break ;};};_ca ._eb .Discard (len (_bgbb )-1);_bga .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_bgbb );
_ebf ,_fae :=_b .ParseUint (string (_bgbb ),8,32);if _fae !=nil {return _ab .MakeString (_fg .String ()),_fae ;};_fg .WriteByte (byte (_ebf ));continue ;};switch _abaf {case 'n':_fg .WriteRune ('\n');case 'r':_fg .WriteRune ('\r');case 't':_fg .WriteRune ('\t');
case 'b':_fg .WriteRune ('\b');case 'f':_fg .WriteRune ('\f');case '(':_fg .WriteRune ('(');case ')':_fg .WriteRune (')');case '\\':_fg .WriteRune ('\\');};continue ;}else if _bdc [0]=='('{_bcab ++;}else if _bdc [0]==')'{_bcab --;if _bcab ==0{_ca ._eb .ReadByte ();
break ;};};_ccc ,_ :=_ca ._eb .ReadByte ();_fg .WriteByte (_ccc );};return _ab .MakeString (_fg .String ()),nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_ab .PdfObject ,error ){_geb ,_dc :=fdf .FieldDictionaries ();if _dc !=nil {return nil ,_dc ;};var _ddc []string ;for _cba :=range _geb {_ddc =append (_ddc ,_cba );};_dg .Strings (_ddc );_bf :=map[string ]_ab .PdfObject {};
for _ ,_ff :=range _ddc {_fa :=_geb [_ff ];_gf :=_ab .TraceToDirectObject (_fa .Get ("\u0056"));_bf [_ff ]=_gf ;};return _bf ,nil ;};func (_ebb *fdfParser )readComment ()(string ,error ){var _de _db .Buffer ;_ ,_edd :=_ebb .skipSpaces ();if _edd !=nil {return _de .String (),_edd ;
};_gb :=true ;for {_fe ,_ce :=_ebb ._eb .Peek (1);if _ce !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_ce .Error ());return _de .String (),_ce ;};if _gb &&_fe [0]!='%'{return _de .String (),_a .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_gb =false ;if (_fe [0]!='\r')&&(_fe [0]!='\n'){_ea ,_ :=_ebb ._eb .ReadByte ();_de .WriteByte (_ea );}else {break ;};};return _de .String (),nil ;};func (_bee *fdfParser )parseIndirectObject ()(_ab .PdfObject ,error ){_ffga :=_ab .PdfIndirectObject {};
_bga .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_fbb ,_cefd :=_bee ._eb .Peek (20);if _cefd !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_ffga ,_cefd ;};_bga .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_fbb ));_fcc :=_af .FindStringSubmatchIndex (string (_fbb ));if len (_fcc )< 6{_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fbb ));
return &_ffga ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bee ._eb .Discard (_fcc [0]);_bga .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_fcc );_acef :=_fcc [1]-_fcc [0];_gab :=make ([]byte ,_acef );_ ,_cefd =_bee .readAtLeast (_gab ,_acef );if _cefd !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_cefd );
return nil ,_cefd ;};_bga .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_gab );_fbg :=_af .FindStringSubmatch (string (_gab ));if len (_fbg )< 3{_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gab ));
return &_ffga ,_a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_gda ,_ :=_b .Atoi (_fbg [1]);_fcg ,_ :=_b .Atoi (_fbg [2]);_ffga .ObjectNumber =int64 (_gda );_ffga .GenerationNumber =int64 (_fcg );for {_fef ,_cbg :=_bee ._eb .Peek (2);if _cbg !=nil {return &_ffga ,_cbg ;};_bga .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_fef ),string (_fef ));
if _ab .IsWhiteSpace (_fef [0]){_bee .skipSpaces ();}else if _fef [0]=='%'{_bee .skipComments ();}else if (_fef [0]=='<')&&(_fef [1]=='<'){_bga .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_ffga .PdfObject ,_cbg =_bee .parseDict ();
_bga .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_cbg );if _cbg !=nil {return &_ffga ,_cbg ;};_bga .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_fef [0]=='/')||(_fef [0]=='(')||(_fef [0]=='[')||(_fef [0]=='<'){_ffga .PdfObject ,_cbg =_bee .parseObject ();if _cbg !=nil {return &_ffga ,_cbg ;};_bga .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _fef [0]=='e'{_eeb ,_fea :=_bee .readTextLine ();if _fea !=nil {return nil ,_fea ;};if len (_eeb )>=6&&_eeb [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _fef [0]=='s'{_fef ,_ =_bee ._eb .Peek (10);if string (_fef [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_dcc :=6;
if len (_fef )> 6{if _ab .IsWhiteSpace (_fef [_dcc ])&&_fef [_dcc ]!='\r'&&_fef [_dcc ]!='\n'{_bga .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_dcc ++;};if _fef [_dcc ]=='\r'{_dcc ++;if _fef [_dcc ]=='\n'{_dcc ++;};}else if _fef [_dcc ]=='\n'{_dcc ++;};};_bee ._eb .Discard (_dcc );_bfb ,_addg :=_ffga .PdfObject .(*_ab .PdfObjectDictionary );if !_addg {return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_bga .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_bfb );_ddad ,_caa :=_bfb .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_ab .PdfObjectInteger );if !_caa {return nil ,_a .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_bbcd :=*_ddad ;if _bbcd < 0{return nil ,_a .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_bbcd )> _bee ._eda {_bga .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_a .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_bfa :=make ([]byte ,_bbcd );
_ ,_cbg =_bee .readAtLeast (_bfa ,int (_bbcd ));if _cbg !=nil {_bga .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_bfa ),_bfa );_bga .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_cbg );
return nil ,_cbg ;};_fbgg :=_ab .PdfObjectStream {};_fbgg .Stream =_bfa ;_fbgg .PdfObjectDictionary =_ffga .PdfObject .(*_ab .PdfObjectDictionary );_fbgg .ObjectNumber =_ffga .ObjectNumber ;_fbgg .GenerationNumber =_ffga .GenerationNumber ;_bee .skipSpaces ();
_bee ._eb .Discard (9);_bee .skipSpaces ();return &_fbgg ,nil ;};};_ffga .PdfObject ,_cbg =_bee .parseObject ();return &_ffga ,_cbg ;};};_bga .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_ffga ,nil ;};type fdfParser struct{_gcb int ;_ef int ;_cdg map[int64 ]_ab .PdfObject ;_acg _bg .ReadSeeker ;_eb *_fc .Reader ;_eda int64 ;_bgg *_ab .PdfObjectDictionary ;};func (_abg *fdfParser )readAtLeast (_ega []byte ,_bdb int )(int ,error ){_aeec :=_bdb ;
_aed :=0;_egg :=0;for _aeec > 0{_adg ,_cd :=_abg ._eb .Read (_ega [_aed :]);if _cd !=nil {_bga .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_adg ,_egg ,_cd .Error ());
return _aed ,_a .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_egg ++;_aed +=_adg ;_aeec -=_adg ;};return _aed ,nil ;};func (_fdg *fdfParser )parseArray ()(*_ab .PdfObjectArray ,error ){_cef :=_ab .MakeArray ();
_fdg ._eb .ReadByte ();for {_fdg .skipSpaces ();_cccc ,_edcd :=_fdg ._eb .Peek (1);if _edcd !=nil {return _cef ,_edcd ;};if _cccc [0]==']'{_fdg ._eb .ReadByte ();break ;};_abab ,_edcd :=_fdg .parseObject ();if _edcd !=nil {return _cef ,_edcd ;};_cef .Append (_abab );
};return _cef ,nil ;};func (_bcb *fdfParser )parseHexString ()(*_ab .PdfObjectString ,error ){_bcb ._eb .ReadByte ();var _ebfb _db .Buffer ;for {_gbb ,_gag :=_bcb ._eb .Peek (1);if _gag !=nil {return _ab .MakeHexString (""),_gag ;};if _gbb [0]=='>'{_bcb ._eb .ReadByte ();
break ;};_edc ,_ :=_bcb ._eb .ReadByte ();if !_ab .IsWhiteSpace (_edc ){_ebfb .WriteByte (_edc );};};if _ebfb .Len ()%2==1{_ebfb .WriteRune ('0');};_cec ,_addc :=_f .DecodeString (_ebfb .String ());if _addc !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_ebfb .String ());
return _ab .MakeHexString (""),nil ;};return _ab .MakeHexString (string (_cec )),nil ;};func (_edg *fdfParser )skipSpaces ()(int ,error ){_cge :=0;for {_df ,_gd :=_edg ._eb .ReadByte ();if _gd !=nil {return 0,_gd ;};if _ab .IsWhiteSpace (_df ){_cge ++;
}else {_edg ._eb .UnreadByte ();break ;};};return _cge ,nil ;};func (_ag *fdfParser )skipComments ()error {if _ ,_afa :=_ag .skipSpaces ();_afa !=nil {return _afa ;};_ace :=true ;for {_gge ,_cbf :=_ag ._eb .Peek (1);if _cbf !=nil {_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cbf .Error ());
return _cbf ;};if _ace &&_gge [0]!='%'{return nil ;};_ace =false ;if (_gge [0]!='\r')&&(_gge [0]!='\n'){_ag ._eb .ReadByte ();}else {break ;};};return _ag .skipComments ();};var _ecg =_ge .MustCompile ("\u0025\u0025\u0045O\u0046");func (_efb *fdfParser )parseNull ()(_ab .PdfObjectNull ,error ){_ ,_ffg :=_efb ._eb .Discard (4);
return _ab .PdfObjectNull {},_ffg ;};var _bbc =_ge .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");func (_ec *fdfParser )setFileOffset (_cgf int64 ){_ec ._acg .Seek (_cgf ,_bg .SeekStart );
_ec ._eb =_fc .NewReader (_ec ._acg );};var _af =_ge .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_ebed *fdfParser )parse ()error {_ebed ._acg .Seek (0,_bg .SeekStart );
_ebed ._eb =_fc .NewReader (_ebed ._acg );for {_ebed .skipComments ();_beeg ,_gfg :=_ebed ._eb .Peek (20);if _gfg !=nil {_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _gfg ;};if _g .HasPrefix (string (_beeg ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_ebed ._eb .Discard (7);_ebed .skipSpaces ();_ebed .skipComments ();_dad ,_ :=_ebed .parseDict ();_ebed ._bgg =_dad ;break ;};_dfab :=_af .FindStringSubmatchIndex (string (_beeg ));
if len (_dfab )< 6{_bga .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_beeg ));
return _a .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_eggb ,_gfg :=_ebed .parseIndirectObject ();if _gfg !=nil {return _gfg ;};switch _fgf :=_eggb .(type ){case *_ab .PdfIndirectObject :_ebed ._cdg [_fgf .ObjectNumber ]=_fgf ;case *_ab .PdfObjectStream :_ebed ._cdg [_fgf .ObjectNumber ]=_fgf ;default:return _a .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_abcad *fdfParser )parseNumber ()(_ab .PdfObject ,error ){return _ab .ParseNumber (_abcad ._eb )};func (_gcbe *fdfParser )parseFdfVersion ()(int ,int ,error ){_gcbe ._acg .Seek (0,_bg .SeekStart );_faf :=20;_ggd :=make ([]byte ,_faf );
_gcbe ._acg .Read (_ggd );_cfc :=_bdg .FindStringSubmatch (string (_ggd ));if len (_cfc )< 3{_bbad ,_gba ,_agg :=_gcbe .seekFdfVersionTopDown ();if _agg !=nil {_bga .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_agg ;};return _bbad ,_gba ,nil ;};_dff ,_eaf :=_b .Atoi (_cfc [1]);if _eaf !=nil {return 0,0,_eaf ;};_adgb ,_eaf :=_b .Atoi (_cfc [2]);if _eaf !=nil {return 0,0,_eaf ;};_bga .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_dff ,_adgb );
return _dff ,_adgb ,nil ;};var _dbg =_ge .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_be *fdfParser )seekToEOFMarker (_fgg int64 )error {_ead :=int64 (0);_abaa :=int64 (1000);
for _ead < _fgg {if _fgg <=(_abaa +_ead ){_abaa =_fgg -_ead ;};_ ,_efad :=_be ._acg .Seek (-_ead -_abaa ,_bg .SeekEnd );if _efad !=nil {return _efad ;};_eff :=make ([]byte ,_abaa );_be ._acg .Read (_eff );_bga .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_eff ));
_ddf :=_ecg .FindAllStringIndex (string (_eff ),-1);if _ddf !=nil {_gae :=_ddf [len (_ddf )-1];_bga .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_ddf );_be ._acg .Seek (-_ead -_abaa +int64 (_gae [0]),_bg .SeekEnd );return nil ;};_bga .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_ead +=_abaa ;};_bga .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _a .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_abc *fdfParser )getFileOffset ()int64 {_cg ,_ :=_abc ._acg .Seek (0,_bg .SeekCurrent );_cg -=int64 (_abc ._eb .Buffered ());return _cg ;};

// Load loads FDF form data from `r`.
func Load (r _bg .ReadSeeker )(*Data ,error ){_e ,_aba :=_bbe (r );if _aba !=nil {return nil ,_aba ;};_gef ,_aba :=_e .Root ();if _aba !=nil {return nil ,_aba ;};_bb ,_adb :=_ab .GetArray (_gef .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_adb {return nil ,_a .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_bd :_bb ,_bc :_gef },nil ;};