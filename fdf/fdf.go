//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_d "bufio";_g "bytes";_fg "encoding/hex";_f "errors";_bc "fmt";_gb "github.com/unidoc/unipdf/v3/common";_fe "github.com/unidoc/unipdf/v3/core";_aa "io";_gg "os";_ab "regexp";_ba "sort";_c "strconv";_b "strings";);func (_cbbf *fdfParser )readTextLine ()(string ,error ){var _cff _g .Buffer ;
for {_afa ,_fge :=_cbbf ._ee .Peek (1);if _fge !=nil {_gb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fge .Error ());return _cff .String (),_fge ;};if (_afa [0]!='\r')&&(_afa [0]!='\n'){_cdg ,_ :=_cbbf ._ee .ReadByte ();_cff .WriteByte (_cdg );
}else {break ;};};return _cff .String (),nil ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_fe .PdfObjectDictionary ,error ){_fb :=map[string ]*_fe .PdfObjectDictionary {};for _bda :=0;_bda < fdf ._ag .Len ();_bda ++{_aac ,_eb :=_fe .GetDict (fdf ._ag .Get (_bda ));if _eb {_gbd ,_ :=_fe .GetString (_aac .Get ("\u0054"));
if _gbd !=nil {_fb [_gbd .Str ()]=_aac ;};};};return _fb ,nil ;};func (_fc *fdfParser )readComment ()(string ,error ){var _afce _g .Buffer ;_ ,_cd :=_fc .skipSpaces ();if _cd !=nil {return _afce .String (),_cd ;};_db :=true ;for {_eda ,_aff :=_fc ._ee .Peek (1);
if _aff !=nil {_gb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_aff .Error ());return _afce .String (),_aff ;};if _db &&_eda [0]!='%'{return _afce .String (),_f .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");
};_db =false ;if (_eda [0]!='\r')&&(_eda [0]!='\n'){_gbg ,_ :=_fc ._ee .ReadByte ();_afce .WriteByte (_gbg );}else {break ;};};return _afce .String (),nil ;};type fdfParser struct{_dc int ;_ef int ;_dgg map[int64 ]_fe .PdfObject ;_aec _aa .ReadSeeker ;
_ee *_d .Reader ;_eg int64 ;_bac *_fe .PdfObjectDictionary ;};func _ge (_edaf string )(_fe .PdfObjectReference ,error ){_aeb :=_fe .PdfObjectReference {};_fag :=_ebd .FindStringSubmatch (_edaf );if len (_fag )< 3{_gb .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
return _aeb ,_f .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");};_efe ,_bdae :=_c .Atoi (_fag [1]);if _bdae !=nil {_gb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_fag [1]);
return _aeb ,nil ;};_aeb .ObjectNumber =int64 (_efe );_ebdd ,_bdae :=_c .Atoi (_fag [2]);if _bdae !=nil {_gb .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_fag [2]);
return _aeb ,nil ;};_aeb .GenerationNumber =int64 (_ebdd );return _aeb ,nil ;};var _eag =_ab .MustCompile ("\u0025\u0025\u0045O\u0046");func (_bdd *fdfParser )parseFdfVersion ()(int ,int ,error ){_bdd ._aec .Seek (0,_aa .SeekStart );_cgc :=20;_eef :=make ([]byte ,_cgc );
_bdd ._aec .Read (_eef );_fcc :=_cg .FindStringSubmatch (string (_eef ));if len (_fcc )< 3{_bce ,_dged ,_cbbd :=_bdd .seekFdfVersionTopDown ();if _cbbd !=nil {_gb .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_cbbd ;};return _bce ,_dged ,nil ;};_edd ,_eaf :=_c .Atoi (_fcc [1]);if _eaf !=nil {return 0,0,_eaf ;};_gde ,_eaf :=_c .Atoi (_fcc [2]);if _eaf !=nil {return 0,0,_eaf ;};_gb .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_edd ,_gde );
return _edd ,_gde ,nil ;};var _bdb =_ab .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");var _eba =_ab .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");
func (_bfbb *fdfParser )parseIndirectObject ()(_fe .PdfObject ,error ){_dbfa :=_fe .PdfIndirectObject {};_gb .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_fcf ,_aee :=_bfbb ._ee .Peek (20);if _aee !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return &_dbfa ,_aee ;};_gb .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_fcf ));_afcg :=_bdb .FindStringSubmatchIndex (string (_fcf ));if len (_afcg )< 6{_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_fcf ));
return &_dbfa ,_f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bfbb ._ee .Discard (_afcg [0]);_gb .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_afcg );_dfa :=_afcg [1]-_afcg [0];_ddfa :=make ([]byte ,_dfa );_ ,_aee =_bfbb .readAtLeast (_ddfa ,_dfa );if _aee !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_aee );
return nil ,_aee ;};_gb .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_ddfa );_dbc :=_bdb .FindStringSubmatch (string (_ddfa ));if len (_dbc )< 3{_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_ddfa ));
return &_dbfa ,_f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dega ,_ :=_c .Atoi (_dbc [1]);_fadg ,_ :=_c .Atoi (_dbc [2]);_dbfa .ObjectNumber =int64 (_dega );_dbfa .GenerationNumber =int64 (_fadg );for {_cae ,_egf :=_bfbb ._ee .Peek (2);if _egf !=nil {return &_dbfa ,_egf ;};_gb .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_cae ),string (_cae ));
if _fe .IsWhiteSpace (_cae [0]){_bfbb .skipSpaces ();}else if _cae [0]=='%'{_bfbb .skipComments ();}else if (_cae [0]=='<')&&(_cae [1]=='<'){_gb .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_dbfa .PdfObject ,_egf =_bfbb .parseDict ();
_gb .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_egf );if _egf !=nil {return &_dbfa ,_egf ;};_gb .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_cae [0]=='/')||(_cae [0]=='(')||(_cae [0]=='[')||(_cae [0]=='<'){_dbfa .PdfObject ,_egf =_bfbb .parseObject ();if _egf !=nil {return &_dbfa ,_egf ;};_gb .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _cae [0]=='e'{_feb ,_cgca :=_bfbb .readTextLine ();if _cgca !=nil {return nil ,_cgca ;};if len (_feb )>=6&&_feb [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _cae [0]=='s'{_cae ,_ =_bfbb ._ee .Peek (10);if string (_cae [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_ffgf :=6;
if len (_cae )> 6{if _fe .IsWhiteSpace (_cae [_ffgf ])&&_cae [_ffgf ]!='\r'&&_cae [_ffgf ]!='\n'{_gb .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_ffgf ++;};if _cae [_ffgf ]=='\r'{_ffgf ++;if _cae [_ffgf ]=='\n'{_ffgf ++;};}else if _cae [_ffgf ]=='\n'{_ffgf ++;};};_bfbb ._ee .Discard (_ffgf );_bfg ,_efc :=_dbfa .PdfObject .(*_fe .PdfObjectDictionary );if !_efc {return nil ,_f .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_gb .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_bfg );_fgc ,_geg :=_bfg .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_fe .PdfObjectInteger );if !_geg {return nil ,_f .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_fed :=*_fgc ;if _fed < 0{return nil ,_f .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_fed )> _bfbb ._eg {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_f .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_gggf :=make ([]byte ,_fed );
_ ,_egf =_bfbb .readAtLeast (_gggf ,int (_fed ));if _egf !=nil {_gb .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_gggf ),_gggf );_gb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_egf );
return nil ,_egf ;};_bea :=_fe .PdfObjectStream {};_bea .Stream =_gggf ;_bea .PdfObjectDictionary =_dbfa .PdfObject .(*_fe .PdfObjectDictionary );_bea .ObjectNumber =_dbfa .ObjectNumber ;_bea .GenerationNumber =_dbfa .GenerationNumber ;_bfbb .skipSpaces ();
_bfbb ._ee .Discard (9);_bfbb .skipSpaces ();return &_bea ,nil ;};};_dbfa .PdfObject ,_egf =_bfbb .parseObject ();return &_dbfa ,_egf ;};};_gb .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_dbfa ,nil ;};func (_cba *fdfParser )parseString ()(*_fe .PdfObjectString ,error ){_cba ._ee .ReadByte ();var _egg _g .Buffer ;_gc :=1;for {_ac ,_fgbf :=_cba ._ee .Peek (1);if _fgbf !=nil {return _fe .MakeString (_egg .String ()),_fgbf ;};if _ac [0]=='\\'{_cba ._ee .ReadByte ();
_afca ,_eeg :=_cba ._ee .ReadByte ();if _eeg !=nil {return _fe .MakeString (_egg .String ()),_eeg ;};if _fe .IsOctalDigit (_afca ){_afb ,_gd :=_cba ._ee .Peek (2);if _gd !=nil {return _fe .MakeString (_egg .String ()),_gd ;};var _ede []byte ;_ede =append (_ede ,_afca );
for _ ,_dcad :=range _afb {if _fe .IsOctalDigit (_dcad ){_ede =append (_ede ,_dcad );}else {break ;};};_cba ._ee .Discard (len (_ede )-1);_gb .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_ede );
_bcb ,_gd :=_c .ParseUint (string (_ede ),8,32);if _gd !=nil {return _fe .MakeString (_egg .String ()),_gd ;};_egg .WriteByte (byte (_bcb ));continue ;};switch _afca {case 'n':_egg .WriteRune ('\n');case 'r':_egg .WriteRune ('\r');case 't':_egg .WriteRune ('\t');
case 'b':_egg .WriteRune ('\b');case 'f':_egg .WriteRune ('\f');case '(':_egg .WriteRune ('(');case ')':_egg .WriteRune (')');case '\\':_egg .WriteRune ('\\');};continue ;}else if _ac [0]=='('{_gc ++;}else if _ac [0]==')'{_gc --;if _gc ==0{_cba ._ee .ReadByte ();
break ;};};_cdgc ,_ :=_cba ._ee .ReadByte ();_egg .WriteByte (_cdgc );};return _fe .MakeString (_egg .String ()),nil ;};

// Root returns the Root of the FDF document.
func (_aca *fdfParser )Root ()(*_fe .PdfObjectDictionary ,error ){if _aca ._bac !=nil {if _cfc ,_cag :=_aca .trace (_aca ._bac .Get ("\u0052\u006f\u006f\u0074")).(*_fe .PdfObjectDictionary );_cag {if _efea ,_ega :=_aca .trace (_cfc .Get ("\u0046\u0044\u0046")).(*_fe .PdfObjectDictionary );
_ega {return _efea ,nil ;};};};var _acb []int64 ;for _da :=range _aca ._dgg {_acb =append (_acb ,_da );};_ba .Slice (_acb ,func (_faa ,_febd int )bool {return _acb [_faa ]< _acb [_febd ]});for _ ,_degc :=range _acb {_gdf :=_aca ._dgg [_degc ];if _cbg ,_ffb :=_aca .trace (_gdf ).(*_fe .PdfObjectDictionary );
_ffb {if _gdg ,_aacf :=_aca .trace (_cbg .Get ("\u0046\u0044\u0046")).(*_fe .PdfObjectDictionary );_aacf {return _gdg ,nil ;};};};return nil ,_f .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");};func (_ggg *fdfParser )parseDict ()(*_fe .PdfObjectDictionary ,error ){_gb .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_dff :=_fe .MakeDict ();_add ,_ :=_ggg ._ee .ReadByte ();if _add !='<'{return nil ,_f .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_add ,_ =_ggg ._ee .ReadByte ();if _add !='<'{return nil ,_f .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_ggg .skipSpaces ();_ggg .skipComments ();_dge ,_gfd :=_ggg ._ee .Peek (2);if _gfd !=nil {return nil ,_gfd ;};_gb .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_dge ),string (_dge ));
if (_dge [0]=='>')&&(_dge [1]=='>'){_gb .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_ggg ._ee .ReadByte ();_ggg ._ee .ReadByte ();break ;};_gb .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_fbgd ,_gfd :=_ggg .parseName ();_gb .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_fbgd );if _gfd !=nil {_gb .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_gfd );
return nil ,_gfd ;};if len (_fbgd )> 4&&_fbgd [len (_fbgd )-4:]=="\u006e\u0075\u006c\u006c"{_ccd :=_fbgd [0:len (_fbgd )-4];_gb .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_fbgd );
_gb .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_ccd );_ggg .skipSpaces ();_ebc ,_ :=_ggg ._ee .Peek (1);if _ebc [0]=='/'{_dff .Set (_ccd ,_fe .MakeNull ());continue ;};};_ggg .skipSpaces ();
_adb ,_gfd :=_ggg .parseObject ();if _gfd !=nil {return nil ,_gfd ;};_dff .Set (_fbgd ,_adb );_gb .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_fbgd ,_adb .String ());};_gb .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _dff ,nil ;};func (_bbd *fdfParser )getFileOffset ()int64 {_df ,_ :=_bbd ._aec .Seek (0,_aa .SeekCurrent );_df -=int64 (_bbd ._ee .Buffered ());return _df ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_fe .PdfObject ,error ){_bf ,_dd :=fdf .FieldDictionaries ();if _dd !=nil {return nil ,_dd ;};var _bb []string ;for _bfb :=range _bf {_bb =append (_bb ,_bfb );};_ba .Strings (_bb );_ad :=map[string ]_fe .PdfObject {};
for _ ,_gfa :=range _bb {_dg :=_bf [_gfa ];_ga :=_fe .TraceToDirectObject (_dg .Get ("\u0056"));_ad [_gfa ]=_ga ;};return _ad ,nil ;};var _ebd =_ab .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");
func (_ead *fdfParser )parseHexString ()(*_fe .PdfObjectString ,error ){_ead ._ee .ReadByte ();var _fca _g .Buffer ;for {_ff ,_aea :=_ead ._ee .Peek (1);if _aea !=nil {return _fe .MakeHexString (""),_aea ;};if _ff [0]=='>'{_ead ._ee .ReadByte ();break ;
};_fga ,_ :=_ead ._ee .ReadByte ();if !_fe .IsWhiteSpace (_fga ){_fca .WriteByte (_fga );};};if _fca .Len ()%2==1{_fca .WriteRune ('0');};_eaa ,_ecd :=_fg .DecodeString (_fca .String ());if _ecd !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_fca .String ());
return _fe .MakeHexString (""),nil ;};return _fe .MakeHexString (string (_eaa )),nil ;};func (_acg *fdfParser )trace (_dcadf _fe .PdfObject )_fe .PdfObject {switch _beae :=_dcadf .(type ){case *_fe .PdfObjectReference :_cbf ,_fgde :=_acg ._dgg [_beae .ObjectNumber ].(*_fe .PdfIndirectObject );
if _fgde {return _cbf .PdfObject ;};_gb .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_fe .PdfIndirectObject :return _beae .PdfObject ;};return _dcadf ;};

// Data represents forms data format (FDF) file data.
type Data struct{_gf *_fe .PdfObjectDictionary ;_ag *_fe .PdfObjectArray ;};func (_efa *fdfParser )parseName ()(_fe .PdfObjectName ,error ){var _bbf _g .Buffer ;_deb :=false ;for {_eagf ,_ca :=_efa ._ee .Peek (1);if _ca ==_aa .EOF {break ;};if _ca !=nil {return _fe .PdfObjectName (_bbf .String ()),_ca ;
};if !_deb {if _eagf [0]=='/'{_deb =true ;_efa ._ee .ReadByte ();}else if _eagf [0]=='%'{_efa .readComment ();_efa .skipSpaces ();}else {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_eagf ,_eagf );
return _fe .PdfObjectName (_bbf .String ()),_bc .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_eagf [0]);};}else {if _fe .IsWhiteSpace (_eagf [0]){break ;}else if (_eagf [0]=='/')||(_eagf [0]=='[')||(_eagf [0]=='(')||(_eagf [0]==']')||(_eagf [0]=='<')||(_eagf [0]=='>'){break ;
}else if _eagf [0]=='#'{_ec ,_gfb :=_efa ._ee .Peek (3);if _gfb !=nil {return _fe .PdfObjectName (_bbf .String ()),_gfb ;};_efa ._ee .Discard (3);_cdc ,_gfb :=_fg .DecodeString (string (_ec [1:3]));if _gfb !=nil {return _fe .PdfObjectName (_bbf .String ()),_gfb ;
};_bbf .Write (_cdc );}else {_afab ,_ :=_efa ._ee .ReadByte ();_bbf .WriteByte (_afab );};};};return _fe .PdfObjectName (_bbf .String ()),nil ;};func (_fgf *fdfParser )parseNumber ()(_fe .PdfObject ,error ){return _fe .ParseNumber (_fgf ._ee )};func (_dcae *fdfParser )parseArray ()(*_fe .PdfObjectArray ,error ){_gcf :=_fe .MakeArray ();
_dcae ._ee .ReadByte ();for {_dcae .skipSpaces ();_ada ,_gcff :=_dcae ._ee .Peek (1);if _gcff !=nil {return _gcf ,_gcff ;};if _ada [0]==']'{_dcae ._ee .ReadByte ();break ;};_cef ,_gcff :=_dcae .parseObject ();if _gcff !=nil {return _gcf ,_gcff ;};_gcf .Append (_cef );
};return _gcf ,nil ;};func (_efag *fdfParser )parseNull ()(_fe .PdfObjectNull ,error ){_ ,_ggd :=_efag ._ee .Discard (4);return _fe .PdfObjectNull {},_ggd ;};func _bgcf (_addg string )(*fdfParser ,error ){_geb :=fdfParser {};_gee :=[]byte (_addg );_agg :=_g .NewReader (_gee );
_geb ._aec =_agg ;_geb ._dgg =map[int64 ]_fe .PdfObject {};_gac :=_d .NewReader (_agg );_geb ._ee =_gac ;_geb ._eg =int64 (len (_addg ));return &_geb ,_geb .parse ();};func (_gab *fdfParser )parse ()error {_gab ._aec .Seek (0,_aa .SeekStart );_gab ._ee =_d .NewReader (_gab ._aec );
for {_gab .skipComments ();_bcd ,_ffa :=_gab ._ee .Peek (20);if _ffa !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _ffa ;};if _b .HasPrefix (string (_bcd ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_gab ._ee .Discard (7);_gab .skipSpaces ();_gab .skipComments ();_ebg ,_ :=_gab .parseDict ();_gab ._bac =_ebg ;break ;};_fea :=_bdb .FindStringSubmatchIndex (string (_bcd ));
if len (_fea )< 6{_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_bcd ));
return _f .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_bcg ,_ffa :=_gab .parseIndirectObject ();if _ffa !=nil {return _ffa ;};switch _eefc :=_bcg .(type ){case *_fe .PdfIndirectObject :_gab ._dgg [_eefc .ObjectNumber ]=_eefc ;case *_fe .PdfObjectStream :_gab ._dgg [_eefc .ObjectNumber ]=_eefc ;default:return _f .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_ccf *fdfParser )parseBool ()(_fe .PdfObjectBool ,error ){_gcc ,_bgc :=_ccf ._ee .Peek (4);if _bgc !=nil {return _fe .PdfObjectBool (false ),_bgc ;};if (len (_gcc )>=4)&&(string (_gcc [:4])=="\u0074\u0072\u0075\u0065"){_ccf ._ee .Discard (4);
return _fe .PdfObjectBool (true ),nil ;};_gcc ,_bgc =_ccf ._ee .Peek (5);if _bgc !=nil {return _fe .PdfObjectBool (false ),_bgc ;};if (len (_gcc )>=5)&&(string (_gcc [:5])=="\u0066\u0061\u006cs\u0065"){_ccf ._ee .Discard (5);return _fe .PdfObjectBool (false ),nil ;
};return _fe .PdfObjectBool (false ),_f .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};

// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_gfe ,_bg :=_gg .Open (fdfPath );if _bg !=nil {return nil ,_bg ;};defer _gfe .Close ();return Load (_gfe );};func (_afc *fdfParser )readAtLeast (_fgb []byte ,_gbe int )(int ,error ){_be :=_gbe ;_ea :=0;
_agf :=0;for _be > 0{_cec ,_fbg :=_afc ._ee .Read (_fgb [_ea :]);if _fbg !=nil {_gb .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_cec ,_agf ,_fbg .Error ());
return _ea ,_f .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_agf ++;_ea +=_cec ;_be -=_cec ;};return _ea ,nil ;};func (_fae *fdfParser )seekToEOFMarker (_gfdc int64 )error {_gef :=int64 (0);_dbf :=int64 (1000);
for _gef < _gfdc {if _gfdc <=(_dbf +_gef ){_dbf =_gfdc -_gef ;};_ ,_gefe :=_fae ._aec .Seek (-_gef -_dbf ,_aa .SeekEnd );if _gefe !=nil {return _gefe ;};_bbc :=make ([]byte ,_dbf );_fae ._aec .Read (_bbc );_gb .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_bbc ));
_fgd :=_eag .FindAllStringIndex (string (_bbc ),-1);if _fgd !=nil {_eadd :=_fgd [len (_fgd )-1];_gb .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_fgd );_fae ._aec .Seek (-_gef -_dbf +int64 (_eadd [0]),_aa .SeekEnd );return nil ;};_gb .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_gef +=_dbf ;};_gb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _f .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_aef *fdfParser )parseObject ()(_fe .PdfObject ,error ){_gb .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_aef .skipSpaces ();for {_cffg ,_dgf :=_aef ._ee .Peek (2);if _dgf !=nil {return nil ,_dgf ;
};_gb .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_cffg ));if _cffg [0]=='/'{_gff ,_aag :=_aef .parseName ();_gb .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_gff );
return &_gff ,_aag ;}else if _cffg [0]=='('{_gb .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _aef .parseString ();}else if _cffg [0]=='['{_gb .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _aef .parseArray ();
}else if (_cffg [0]=='<')&&(_cffg [1]=='<'){_gb .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _aef .parseDict ();}else if _cffg [0]=='<'{_gb .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _aef .parseHexString ();
}else if _cffg [0]=='%'{_aef .readComment ();_aef .skipSpaces ();}else {_gb .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_cffg ,_ =_aef ._ee .Peek (15);_dbg :=string (_cffg );_gb .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_dbg );
if (len (_dbg )> 3)&&(_dbg [:4]=="\u006e\u0075\u006c\u006c"){_cffa ,_aefc :=_aef .parseNull ();return &_cffa ,_aefc ;}else if (len (_dbg )> 4)&&(_dbg [:5]=="\u0066\u0061\u006cs\u0065"){_ged ,_bfa :=_aef .parseBool ();return &_ged ,_bfa ;}else if (len (_dbg )> 3)&&(_dbg [:4]=="\u0074\u0072\u0075\u0065"){_dea ,_gca :=_aef .parseBool ();
return &_dea ,_gca ;};_gcaf :=_ebd .FindStringSubmatch (_dbg );if len (_gcaf )> 1{_cffg ,_ =_aef ._ee .ReadBytes ('R');_gb .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_cffg [:]));_ffg ,_ccb :=_ge (string (_cffg ));
return &_ffg ,_ccb ;};_fcb :=_eba .FindStringSubmatch (_dbg );if len (_fcb )> 1{_gb .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _aef .parseNumber ();};_fcb =_ae .FindStringSubmatch (_dbg );if len (_fcb )> 1{_gb .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_gb .Log .Trace ("\u0025\u0020\u0073",_fcb );return _aef .parseNumber ();};_gb .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_dbg );return nil ,_f .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};var _ae =_ab .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");

// Load loads FDF form data from `r`.
func Load (r _aa .ReadSeeker )(*Data ,error ){_cf ,_fd :=_fde (r );if _fd !=nil {return nil ,_fd ;};_e ,_fd :=_cf .Root ();if _fd !=nil {return nil ,_fd ;};_bd ,_af :=_fe .GetArray (_e .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_af {return nil ,_f .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_ag :_bd ,_gf :_e },nil ;};func (_afd *fdfParser )setFileOffset (_gfc int64 ){_afd ._aec .Seek (_gfc ,_aa .SeekStart );_afd ._ee =_d .NewReader (_afd ._aec );};func (_bbb *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_bbb ._aec .Seek (0,_aa .SeekStart );
_bbb ._ee =_d .NewReader (_bbb ._aec );_gae :=20;_afcb :=make ([]byte ,_gae );for {_gce ,_cafd :=_bbb ._ee .ReadByte ();if _cafd !=nil {if _cafd ==_aa .EOF {break ;}else {return 0,0,_cafd ;};};if _fe .IsDecimalDigit (_gce )&&_afcb [_gae -1]=='.'&&_fe .IsDecimalDigit (_afcb [_gae -2])&&_afcb [_gae -3]=='-'&&_afcb [_gae -4]=='F'&&_afcb [_gae -5]=='D'&&_afcb [_gae -6]=='P'{_edafe :=int (_afcb [_gae -2]-'0');
_bbg :=int (_gce -'0');return _edafe ,_bbg ,nil ;};_afcb =append (_afcb [1:_gae ],_gce );};return 0,0,_f .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func _fde (_ebb _aa .ReadSeeker )(*fdfParser ,error ){_agb :=&fdfParser {};
_agb ._aec =_ebb ;_agb ._dgg =map[int64 ]_fe .PdfObject {};_abb ,_cfd ,_edee :=_agb .parseFdfVersion ();if _edee !=nil {_gb .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_edee );
return nil ,_edee ;};_agb ._dc =_abb ;_agb ._ef =_cfd ;_edee =_agb .parse ();return _agb ,_edee ;};var _cg =_ab .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_eec *fdfParser )skipComments ()error {if _ ,_deg :=_eec .skipSpaces ();
_deg !=nil {return _deg ;};_fad :=true ;for {_fbf ,_fbfe :=_eec ._ee .Peek (1);if _fbfe !=nil {_gb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_fbfe .Error ());return _fbfe ;};if _fad &&_fbf [0]!='%'{return nil ;};_fad =false ;if (_fbf [0]!='\r')&&(_fbf [0]!='\n'){_eec ._ee .ReadByte ();
}else {break ;};};return _eec .skipComments ();};func (_fdc *fdfParser )skipSpaces ()(int ,error ){_fa :=0;for {_abf ,_cbb :=_fdc ._ee .ReadByte ();if _cbb !=nil {return 0,_cbb ;};if _fe .IsWhiteSpace (_abf ){_fa ++;}else {_fdc ._ee .UnreadByte ();break ;
};};return _fa ,nil ;};