//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

// Package fdf provides support for loading form field data from Form Field Data (FDF) files.
package fdf ;import (_bb "bufio";_g "bytes";_d "encoding/hex";_ae "errors";_c "fmt";_bd "github.com/unidoc/unipdf/v3/common";_ce "github.com/unidoc/unipdf/v3/core";_fb "io";_bbd "os";_e "regexp";_ac "sort";_b "strconv";_f "strings";);var _eaf =_e .MustCompile ("\u0025\u0025\u0045O\u0046");
var _ceg =_e .MustCompile ("\u0028\u005c\u0064\u002b)\\\u0073\u002b\u0028\u005c\u0064\u002b\u0029\u005c\u0073\u002b\u006f\u0062\u006a");func (_cgbe *fdfParser )parseName ()(_ce .PdfObjectName ,error ){var _feg _g .Buffer ;_dabe :=false ;for {_gbc ,_fgg :=_cgbe ._bcd .Peek (1);
if _fgg ==_fb .EOF {break ;};if _fgg !=nil {return _ce .PdfObjectName (_feg .String ()),_fgg ;};if !_dabe {if _gbc [0]=='/'{_dabe =true ;_cgbe ._bcd .ReadByte ();}else if _gbc [0]=='%'{_cgbe .readComment ();_cgbe .skipSpaces ();}else {_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020N\u0061\u006d\u0065\u0020\u0073\u0074\u0061\u0072\u0074\u0069\u006e\u0067\u0020w\u0069\u0074\u0068\u0020\u0025\u0073\u0020(\u0025\u0020\u0078\u0029",_gbc ,_gbc );
return _ce .PdfObjectName (_feg .String ()),_c .Errorf ("\u0069n\u0076a\u006c\u0069\u0064\u0020\u006ea\u006d\u0065:\u0020\u0028\u0025\u0063\u0029",_gbc [0]);};}else {if _ce .IsWhiteSpace (_gbc [0]){break ;}else if (_gbc [0]=='/')||(_gbc [0]=='[')||(_gbc [0]=='(')||(_gbc [0]==']')||(_gbc [0]=='<')||(_gbc [0]=='>'){break ;
}else if _gbc [0]=='#'{_ad ,_ggg :=_cgbe ._bcd .Peek (3);if _ggg !=nil {return _ce .PdfObjectName (_feg .String ()),_ggg ;};_cgbe ._bcd .Discard (3);_acb ,_ggg :=_d .DecodeString (string (_ad [1:3]));if _ggg !=nil {return _ce .PdfObjectName (_feg .String ()),_ggg ;
};_feg .Write (_acb );}else {_aea ,_ :=_cgbe ._bcd .ReadByte ();_feg .WriteByte (_aea );};};};return _ce .PdfObjectName (_feg .String ()),nil ;};func (_cc *fdfParser )setFileOffset (_dd int64 ){_cc ._aca .Seek (_dd ,_fb .SeekStart );_cc ._bcd =_bb .NewReader (_cc ._aca );
};var _ffg =_e .MustCompile ("\u005e\u005b\u005c\u002b\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d9\u002e\u005d\u002b\u0029");func (_abf *fdfParser )readTextLine ()(string ,error ){var _ced _g .Buffer ;for {_fbb ,_af :=_abf ._bcd .Peek (1);if _af !=nil {_bd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_af .Error ());
return _ced .String (),_af ;};if (_fbb [0]!='\r')&&(_fbb [0]!='\n'){_eag ,_ :=_abf ._bcd .ReadByte ();_ced .WriteByte (_eag );}else {break ;};};return _ced .String (),nil ;};func (_dff *fdfParser )readAtLeast (_efe []byte ,_caf int )(int ,error ){_fad :=_caf ;
_aa :=0;_ec :=0;for _fad > 0{_bgg ,_bca :=_dff ._bcd .Read (_efe [_aa :]);if _bca !=nil {_bd .Log .Debug ("\u0045\u0052\u0052O\u0052\u0020\u0046\u0061i\u006c\u0065\u0064\u0020\u0072\u0065\u0061d\u0069\u006e\u0067\u0020\u0028\u0025\u0064\u003b\u0025\u0064\u0029\u0020\u0025\u0073",_bgg ,_ec ,_bca .Error ());
return _aa ,_ae .New ("\u0066\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065a\u0064\u0069\u006e\u0067");};_ec ++;_aa +=_bgg ;_fad -=_bgg ;};return _aa ,nil ;};func _fc (_aeb string )(_ce .PdfObjectReference ,error ){_acgbc :=_ce .PdfObjectReference {};
_cdg :=_gg .FindStringSubmatch (_aeb );if len (_cdg )< 3{_bd .Log .Debug ("\u0045\u0072\u0072or\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0072\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");return _acgbc ,_ae .New ("\u0075n\u0061\u0062\u006c\u0065 \u0074\u006f\u0020\u0070\u0061r\u0073e\u0020r\u0065\u0066\u0065\u0072\u0065\u006e\u0063e");
};_cbdg ,_cbbc :=_b .Atoi (_cdg [1]);if _cbbc !=nil {_bd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0070a\u0072\u0073\u0069n\u0067\u0020\u006fb\u006a\u0065c\u0074\u0020\u006e\u0075\u006d\u0062e\u0072 '\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0075\u006d\u0020\u003d\u0020\u0030",_cdg [1]);
return _acgbc ,nil ;};_acgbc .ObjectNumber =int64 (_cbdg );_cce ,_cbbc :=_b .Atoi (_cdg [2]);if _cbbc !=nil {_bd .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061r\u0073\u0069\u006e\u0067\u0020g\u0065\u006e\u0065\u0072\u0061\u0074\u0069\u006f\u006e\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020\u0027\u0025\u0073\u0027\u0020\u002d\u0020\u0055\u0073\u0069\u006e\u0067\u0020\u0067\u0065\u006e\u0020\u003d\u0020\u0030",_cdg [2]);
return _acgbc ,nil ;};_acgbc .GenerationNumber =int64 (_cce );return _acgbc ,nil ;};var _cg =_e .MustCompile ("\u005e\u005b\u005c+-\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e]\u002b)\u0065[\u005c+\u002d\u002e\u005d\u002a\u0028\u005b\u0030\u002d\u0039\u002e\u005d\u002b\u0029");
func _dbc (_abdd string )(*fdfParser ,error ){_cgbd :=fdfParser {};_aed :=[]byte (_abdd );_bcg :=_g .NewReader (_aed );_cgbd ._aca =_bcg ;_cgbd ._ga =map[int64 ]_ce .PdfObject {};_bbcc :=_bb .NewReader (_bcg );_cgbd ._bcd =_bbcc ;_cgbd ._abb =int64 (len (_abdd ));
return &_cgbd ,_cgbd .parse ();};func (_acg *fdfParser )readComment ()(string ,error ){var _dgd _g .Buffer ;_ ,_bfg :=_acg .skipSpaces ();if _bfg !=nil {return _dgd .String (),_bfg ;};_eaff :=true ;for {_ddf ,_cga :=_acg ._bcd .Peek (1);if _cga !=nil {_bd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_cga .Error ());
return _dgd .String (),_cga ;};if _eaff &&_ddf [0]!='%'{return _dgd .String (),_ae .New ("c\u006f\u006d\u006d\u0065\u006e\u0074 \u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0073\u0074a\u0072\u0074\u0020w\u0069t\u0068\u0020\u0025");};_eaff =false ;if (_ddf [0]!='\r')&&(_ddf [0]!='\n'){_ccb ,_ :=_acg ._bcd .ReadByte ();
_dgd .WriteByte (_ccb );}else {break ;};};return _dgd .String (),nil ;};func (_fegf *fdfParser )seekFdfVersionTopDown ()(int ,int ,error ){_fegf ._aca .Seek (0,_fb .SeekStart );_fegf ._bcd =_bb .NewReader (_fegf ._aca );_cde :=20;_faa :=make ([]byte ,_cde );
for {_dfbd ,_ccf :=_fegf ._bcd .ReadByte ();if _ccf !=nil {if _ccf ==_fb .EOF {break ;}else {return 0,0,_ccf ;};};if _ce .IsDecimalDigit (_dfbd )&&_faa [_cde -1]=='.'&&_ce .IsDecimalDigit (_faa [_cde -2])&&_faa [_cde -3]=='-'&&_faa [_cde -4]=='F'&&_faa [_cde -5]=='D'&&_faa [_cde -6]=='P'{_cfgc :=int (_faa [_cde -2]-'0');
_edc :=int (_dfbd -'0');return _cfgc ,_edc ,nil ;};_faa =append (_faa [1:_cde ],_dfbd );};return 0,0,_ae .New ("\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};func (_bea *fdfParser )skipSpaces ()(int ,error ){_gge :=0;
for {_cgb ,_dc :=_bea ._bcd .ReadByte ();if _dc !=nil {return 0,_dc ;};if _ce .IsWhiteSpace (_cgb ){_gge ++;}else {_bea ._bcd .UnreadByte ();break ;};};return _gge ,nil ;};func (_eae *fdfParser )parseHexString ()(*_ce .PdfObjectString ,error ){_eae ._bcd .ReadByte ();
var _fdc _g .Buffer ;for {_bdf ,_gee :=_eae ._bcd .Peek (1);if _gee !=nil {return _ce .MakeHexString (""),_gee ;};if _bdf [0]=='>'{_eae ._bcd .ReadByte ();break ;};_ba ,_ :=_eae ._bcd .ReadByte ();if !_ce .IsWhiteSpace (_ba ){_fdc .WriteByte (_ba );};};
if _fdc .Len ()%2==1{_fdc .WriteRune ('0');};_dge ,_acgb :=_d .DecodeString (_fdc .String ());if _acgb !=nil {_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u0020\u0050\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0068\u0065\u0078\u0020\u0073\u0074r\u0069\u006e\u0067\u003a\u0020\u0027\u0025\u0073\u0027 \u002d\u0020\u0072\u0065\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u0061n\u0020\u0065\u006d\u0070\u0074\u0079 \u0073\u0074\u0072i\u006e\u0067",_fdc .String ());
return _ce .MakeHexString (""),nil ;};return _ce .MakeHexString (string (_dge )),nil ;};type fdfParser struct{_fde int ;_bed int ;_ga map[int64 ]_ce .PdfObject ;_aca _fb .ReadSeeker ;_bcd *_bb .Reader ;_abb int64 ;_dgc *_ce .PdfObjectDictionary ;};func (_ee *fdfParser )parseDict ()(*_ce .PdfObjectDictionary ,error ){_bd .Log .Trace ("\u0052\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020D\u0069\u0063\u0074\u0021");
_dac :=_ce .MakeDict ();_cfe ,_ :=_ee ._bcd .ReadByte ();if _cfe !='<'{return nil ,_ae .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");};_cfe ,_ =_ee ._bcd .ReadByte ();if _cfe !='<'{return nil ,_ae .New ("\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0064\u0069\u0063\u0074");
};for {_ee .skipSpaces ();_ee .skipComments ();_fdgc ,_cca :=_ee ._bcd .Peek (2);if _cca !=nil {return nil ,_cca ;};_bd .Log .Trace ("D\u0069c\u0074\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_fdgc ),string (_fdgc ));
if (_fdgc [0]=='>')&&(_fdgc [1]=='>'){_bd .Log .Trace ("\u0045\u004f\u0046\u0020\u0064\u0069\u0063\u0074\u0069o\u006e\u0061\u0072\u0079");_ee ._bcd .ReadByte ();_ee ._bcd .ReadByte ();break ;};_bd .Log .Trace ("\u0050a\u0072s\u0065\u0020\u0074\u0068\u0065\u0020\u006e\u0061\u006d\u0065\u0021");
_ecc ,_cca :=_ee .parseName ();_bd .Log .Trace ("\u004be\u0079\u003a\u0020\u0025\u0073",_ecc );if _cca !=nil {_bd .Log .Debug ("E\u0052\u0052\u004f\u0052\u0020\u0052e\u0074\u0075\u0072\u006e\u0069\u006e\u0067\u0020\u006ea\u006d\u0065\u0020e\u0072r\u0020\u0025\u0073",_cca );
return nil ,_cca ;};if len (_ecc )> 4&&_ecc [len (_ecc )-4:]=="\u006e\u0075\u006c\u006c"{_gaa :=_ecc [0:len (_ecc )-4];_bd .Log .Debug ("\u0054\u0061\u006b\u0069n\u0067\u0020\u0063\u0061\u0072\u0065\u0020\u006f\u0066\u0020n\u0075l\u006c\u0020\u0062\u0075\u0067\u0020\u0028%\u0073\u0029",_ecc );
_bd .Log .Debug ("\u004e\u0065\u0077\u0020ke\u0079\u0020\u0022\u0025\u0073\u0022\u0020\u003d\u0020\u006e\u0075\u006c\u006c",_gaa );_ee .skipSpaces ();_ffgg ,_ :=_ee ._bcd .Peek (1);if _ffgg [0]=='/'{_dac .Set (_gaa ,_ce .MakeNull ());continue ;};};_ee .skipSpaces ();
_ddfc ,_cca :=_ee .parseObject ();if _cca !=nil {return nil ,_cca ;};_dac .Set (_ecc ,_ddfc );_bd .Log .Trace ("\u0064\u0069\u0063\u0074\u005b\u0025\u0073\u005d\u0020\u003d\u0020\u0025\u0073",_ecc ,_ddfc .String ());};_bd .Log .Trace ("\u0072\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0046\u0044\u0046\u0020\u0044\u0069\u0063\u0074\u0021");
return _dac ,nil ;};func (_gf *fdfParser )parseObject ()(_ce .PdfObject ,error ){_bd .Log .Trace ("\u0052e\u0061d\u0020\u0064\u0069\u0072\u0065c\u0074\u0020o\u0062\u006a\u0065\u0063\u0074");_gf .skipSpaces ();for {_ffec ,_bebd :=_gf ._bcd .Peek (2);if _bebd !=nil {return nil ,_bebd ;
};_bd .Log .Trace ("\u0050e\u0065k\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_ffec ));if _ffec [0]=='/'{_bdc ,_aegf :=_gf .parseName ();_bd .Log .Trace ("\u002d\u003e\u004ea\u006d\u0065\u003a\u0020\u0027\u0025\u0073\u0027",_bdc );
return &_bdc ,_aegf ;}else if _ffec [0]=='('{_bd .Log .Trace ("\u002d>\u0053\u0074\u0072\u0069\u006e\u0067!");return _gf .parseString ();}else if _ffec [0]=='['{_bd .Log .Trace ("\u002d\u003e\u0041\u0072\u0072\u0061\u0079\u0021");return _gf .parseArray ();
}else if (_ffec [0]=='<')&&(_ffec [1]=='<'){_bd .Log .Trace ("\u002d>\u0044\u0069\u0063\u0074\u0021");return _gf .parseDict ();}else if _ffec [0]=='<'{_bd .Log .Trace ("\u002d\u003e\u0048\u0065\u0078\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0021");return _gf .parseHexString ();
}else if _ffec [0]=='%'{_gf .readComment ();_gf .skipSpaces ();}else {_bd .Log .Trace ("\u002d\u003eN\u0075\u006d\u0062e\u0072\u0020\u006f\u0072\u0020\u0072\u0065\u0066\u003f");_ffec ,_ =_gf ._bcd .Peek (15);_bfeb :=string (_ffec );_bd .Log .Trace ("\u0050\u0065\u0065k\u0020\u0073\u0074\u0072\u003a\u0020\u0025\u0073",_bfeb );
if (len (_bfeb )> 3)&&(_bfeb [:4]=="\u006e\u0075\u006c\u006c"){_dfd ,_bbc :=_gf .parseNull ();return &_dfd ,_bbc ;}else if (len (_bfeb )> 4)&&(_bfeb [:5]=="\u0066\u0061\u006cs\u0065"){_afb ,_bga :=_gf .parseBool ();return &_afb ,_bga ;}else if (len (_bfeb )> 3)&&(_bfeb [:4]=="\u0074\u0072\u0075\u0065"){_dcg ,_bfc :=_gf .parseBool ();
return &_dcg ,_bfc ;};_ffba :=_gg .FindStringSubmatch (_bfeb );if len (_ffba )> 1{_ffec ,_ =_gf ._bcd .ReadBytes ('R');_bd .Log .Trace ("\u002d\u003e\u0020\u0021\u0052\u0065\u0066\u003a\u0020\u0027\u0025\u0073\u0027",string (_ffec [:]));_dad ,_ccg :=_fc (string (_ffec ));
return &_dad ,_ccg ;};_gec :=_ffg .FindStringSubmatch (_bfeb );if len (_gec )> 1{_bd .Log .Trace ("\u002d\u003e\u0020\u004e\u0075\u006d\u0062\u0065\u0072\u0021");return _gf .parseNumber ();};_gec =_cg .FindStringSubmatch (_bfeb );if len (_gec )> 1{_bd .Log .Trace ("\u002d\u003e\u0020\u0045xp\u006f\u006e\u0065\u006e\u0074\u0069\u0061\u006c\u0020\u004e\u0075\u006d\u0062\u0065r\u0021");
_bd .Log .Trace ("\u0025\u0020\u0073",_gec );return _gf .parseNumber ();};_bd .Log .Debug ("\u0045R\u0052\u004f\u0052\u0020U\u006e\u006b\u006e\u006f\u0077n\u0020(\u0070e\u0065\u006b\u0020\u0022\u0025\u0073\u0022)",_bfeb );return nil ,_ae .New ("\u006f\u0062\u006a\u0065\u0063t\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0065\u0072\u0072\u006fr\u0020\u002d\u0020\u0075\u006e\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0070\u0061\u0074\u0074\u0065\u0072\u006e");
};};};func (_ege *fdfParser )parse ()error {_ege ._aca .Seek (0,_fb .SeekStart );_ege ._bcd =_bb .NewReader (_ege ._aca );for {_ege .skipComments ();_aag ,_aae :=_ege ._bcd .Peek (20);if _aae !=nil {_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");
return _aae ;};if _f .HasPrefix (string (_aag ),"\u0074r\u0061\u0069\u006c\u0065\u0072"){_ege ._bcd .Discard (7);_ege .skipSpaces ();_ege .skipComments ();_gbe ,_ :=_ege .parseDict ();_ege ._dgc =_gbe ;break ;};_bgfg :=_ceg .FindStringSubmatchIndex (string (_aag ));
if len (_bgfg )< 6{_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_aag ));
return _ae .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dced ,_aae :=_ege .parseIndirectObject ();if _aae !=nil {return _aae ;};switch _dga :=_dced .(type ){case *_ce .PdfIndirectObject :_ege ._ga [_dga .ObjectNumber ]=_dga ;case *_ce .PdfObjectStream :_ege ._ga [_dga .ObjectNumber ]=_dga ;default:return _ae .New ("\u0074\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");
};};return nil ;};func (_cbd *fdfParser )parseString ()(*_ce .PdfObjectString ,error ){_cbd ._bcd .ReadByte ();var _bcc _g .Buffer ;_ddd :=1;for {_efa ,_gbcb :=_cbd ._bcd .Peek (1);if _gbcb !=nil {return _ce .MakeString (_bcc .String ()),_gbcb ;};if _efa [0]=='\\'{_cbd ._bcd .ReadByte ();
_cege ,_ace :=_cbd ._bcd .ReadByte ();if _ace !=nil {return _ce .MakeString (_bcc .String ()),_ace ;};if _ce .IsOctalDigit (_cege ){_ffe ,_faf :=_cbd ._bcd .Peek (2);if _faf !=nil {return _ce .MakeString (_bcc .String ()),_faf ;};var _cgaa []byte ;_cgaa =append (_cgaa ,_cege );
for _ ,_daf :=range _ffe {if _ce .IsOctalDigit (_daf ){_cgaa =append (_cgaa ,_daf );}else {break ;};};_cbd ._bcd .Discard (len (_cgaa )-1);_bd .Log .Trace ("\u004e\u0075\u006d\u0065ri\u0063\u0020\u0073\u0074\u0072\u0069\u006e\u0067\u0020\u0022\u0025\u0073\u0022",_cgaa );
_dfb ,_faf :=_b .ParseUint (string (_cgaa ),8,32);if _faf !=nil {return _ce .MakeString (_bcc .String ()),_faf ;};_bcc .WriteByte (byte (_dfb ));continue ;};switch _cege {case 'n':_bcc .WriteRune ('\n');case 'r':_bcc .WriteRune ('\r');case 't':_bcc .WriteRune ('\t');
case 'b':_bcc .WriteRune ('\b');case 'f':_bcc .WriteRune ('\f');case '(':_bcc .WriteRune ('(');case ')':_bcc .WriteRune (')');case '\\':_bcc .WriteRune ('\\');};continue ;}else if _efa [0]=='('{_ddd ++;}else if _efa [0]==')'{_ddd --;if _ddd ==0{_cbd ._bcd .ReadByte ();
break ;};};_cbda ,_ :=_cbd ._bcd .ReadByte ();_bcc .WriteByte (_cbda );};return _ce .MakeString (_bcc .String ()),nil ;};func (_baf *fdfParser )parseBool ()(_ce .PdfObjectBool ,error ){_fdg ,_fff :=_baf ._bcd .Peek (4);if _fff !=nil {return _ce .PdfObjectBool (false ),_fff ;
};if (len (_fdg )>=4)&&(string (_fdg [:4])=="\u0074\u0072\u0075\u0065"){_baf ._bcd .Discard (4);return _ce .PdfObjectBool (true ),nil ;};_fdg ,_fff =_baf ._bcd .Peek (5);if _fff !=nil {return _ce .PdfObjectBool (false ),_fff ;};if (len (_fdg )>=5)&&(string (_fdg [:5])=="\u0066\u0061\u006cs\u0065"){_baf ._bcd .Discard (5);
return _ce .PdfObjectBool (false ),nil ;};return _ce .PdfObjectBool (false ),_ae .New ("\u0075n\u0065\u0078\u0070\u0065c\u0074\u0065\u0064\u0020\u0062o\u006fl\u0065a\u006e\u0020\u0073\u0074\u0072\u0069\u006eg");};func (_cbdb *fdfParser )parseFdfVersion ()(int ,int ,error ){_cbdb ._aca .Seek (0,_fb .SeekStart );
_ccab :=20;_bdg :=make ([]byte ,_ccab );_cbdb ._aca .Read (_bdg );_cfd :=_ag .FindStringSubmatch (string (_bdg ));if len (_cfd )< 3{_cgf ,_bafc ,_gga :=_cbdb .seekFdfVersionTopDown ();if _gga !=nil {_bd .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020\u0072\u0065\u0063\u006f\u0076\u0065\u0072\u0079\u0020\u002d\u0020\u0075n\u0061\u0062\u006c\u0065\u0020\u0074\u006f\u0020\u0066\u0069nd\u0020\u0076\u0065r\u0073i\u006f\u006e");
return 0,0,_gga ;};return _cgf ,_bafc ,nil ;};_cbcf ,_db :=_b .Atoi (_cfd [1]);if _db !=nil {return 0,0,_db ;};_gfe ,_db :=_b .Atoi (_cfd [2]);if _db !=nil {return 0,0,_db ;};_bd .Log .Debug ("\u0046\u0064\u0066\u0020\u0076\u0065\u0072\u0073\u0069\u006f\u006e\u0020%\u0064\u002e\u0025\u0064",_cbcf ,_gfe );
return _cbcf ,_gfe ,nil ;};

// Root returns the Root of the FDF document.
func (_gfef *fdfParser )Root ()(*_ce .PdfObjectDictionary ,error ){if _gfef ._dgc !=nil {if _bcdc ,_fga :=_gfef .trace (_gfef ._dgc .Get ("\u0052\u006f\u006f\u0074")).(*_ce .PdfObjectDictionary );_fga {if _acc ,_ffff :=_gfef .trace (_bcdc .Get ("\u0046\u0044\u0046")).(*_ce .PdfObjectDictionary );
_ffff {return _acc ,nil ;};};};var _bede []int64 ;for _cfde :=range _gfef ._ga {_bede =append (_bede ,_cfde );};_ac .Slice (_bede ,func (_ffa ,_eea int )bool {return _bede [_ffa ]< _bede [_eea ]});for _ ,_bcdf :=range _bede {_bgfb :=_gfef ._ga [_bcdf ];
if _afe ,_eab :=_gfef .trace (_bgfb ).(*_ce .PdfObjectDictionary );_eab {if _dgcc ,_ggc :=_gfef .trace (_afe .Get ("\u0046\u0044\u0046")).(*_ce .PdfObjectDictionary );_ggc {return _dgcc ,nil ;};};};return nil ,_ae .New ("\u0046\u0044\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_cbb *fdfParser )skipComments ()error {if _ ,_cbc :=_cbb .skipSpaces ();_cbc !=nil {return _cbc ;};_abc :=true ;for {_dab ,_abe :=_cbb ._bcd .Peek (1);if _abe !=nil {_bd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0025\u0073",_abe .Error ());
return _abe ;};if _abc &&_dab [0]!='%'{return nil ;};_abc =false ;if (_dab [0]!='\r')&&(_dab [0]!='\n'){_cbb ._bcd .ReadByte ();}else {break ;};};return _cbb .skipComments ();};

// Load loads FDF form data from `r`.
func Load (r _fb .ReadSeeker )(*Data ,error ){_bg ,_bc :=_gagg (r );if _bc !=nil {return nil ,_bc ;};_ef ,_bc :=_bg .Root ();if _bc !=nil {return nil ,_bc ;};_da ,_fa :=_ce .GetArray (_ef .Get ("\u0046\u0069\u0065\u006c\u0064\u0073"));if !_fa {return nil ,_ae .New ("\u0066\u0069\u0065\u006c\u0064\u0073\u0020\u006d\u0069s\u0073\u0069\u006e\u0067");
};return &Data {_df :_da ,_fg :_ef },nil ;};var _gg =_e .MustCompile ("^\u005c\u0073\u002a\u0028\\d\u002b)\u005c\u0073\u002b\u0028\u005cd\u002b\u0029\u005c\u0073\u002b\u0052");func (_ge *fdfParser )parseNumber ()(_ce .PdfObject ,error ){return _ce .ParseNumber (_ge ._bcd )};


// LoadFromPath loads FDF form data from file path `fdfPath`.
func LoadFromPath (fdfPath string )(*Data ,error ){_bbg ,_cd :=_bbd .Open (fdfPath );if _cd !=nil {return nil ,_cd ;};defer _bbg .Close ();return Load (_bbg );};func (_abfc *fdfParser )trace (_gbca _ce .PdfObject )_ce .PdfObject {switch _cba :=_gbca .(type ){case *_ce .PdfObjectReference :_cabe ,_bgb :=_abfc ._ga [_cba .ObjectNumber ].(*_ce .PdfIndirectObject );
if _bgb {return _cabe .PdfObject ;};_bd .Log .Debug ("\u0054\u0079\u0070\u0065\u0020\u0065\u0072\u0072\u006f\u0072");return nil ;case *_ce .PdfIndirectObject :return _cba .PdfObject ;};return _gbca ;};func (_bee *fdfParser )seekToEOFMarker (_cdb int64 )error {_gag :=int64 (0);
_cfg :=int64 (1000);for _gag < _cdb {if _cdb <=(_cfg +_gag ){_cfg =_cdb -_gag ;};_ ,_bcca :=_bee ._aca .Seek (-_gag -_cfg ,_fb .SeekEnd );if _bcca !=nil {return _bcca ;};_fdd :=make ([]byte ,_cfg );_bee ._aca .Read (_fdd );_bd .Log .Trace ("\u004c\u006f\u006f\u006bi\u006e\u0067\u0020\u0066\u006f\u0072\u0020\u0045\u004f\u0046 \u006da\u0072\u006b\u0065\u0072\u003a\u0020\u0022%\u0073\u0022",string (_fdd ));
_fag :=_eaf .FindAllStringIndex (string (_fdd ),-1);if _fag !=nil {_aaf :=_fag [len (_fag )-1];_bd .Log .Trace ("\u0049\u006e\u0064\u003a\u0020\u0025\u0020\u0064",_fag );_bee ._aca .Seek (-_gag -_cfg +int64 (_aaf [0]),_fb .SeekEnd );return nil ;};_bd .Log .Debug ("\u0057\u0061\u0072\u006e\u0069\u006eg\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006b\u0065\u0072\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u0021\u0020\u002d\u0020\u0063\u006f\u006e\u0074\u0069\u006e\u0075\u0065\u0020s\u0065e\u006b\u0069\u006e\u0067");
_gag +=_cfg ;};_bd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u003a\u0020\u0045\u004f\u0046\u0020\u006d\u0061\u0072\u006be\u0072 \u0077\u0061\u0073\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");return _ae .New ("\u0045\u004f\u0046\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");
};func (_daba *fdfParser )parseIndirectObject ()(_ce .PdfObject ,error ){_cab :=_ce .PdfIndirectObject {};_bd .Log .Trace ("\u002dR\u0065a\u0064\u0020\u0069\u006e\u0064i\u0072\u0065c\u0074\u0020\u006f\u0062\u006a");_gef ,_fdgca :=_daba ._bcd .Peek (20);
if _fdgca !=nil {_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0046\u0061\u0069\u006c\u0020\u0074\u006f\u0020r\u0065a\u0064\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a");return &_cab ,_fdgca ;};_bd .Log .Trace ("\u0028\u0069\u006edi\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0020\u0070\u0065\u0065\u006b\u0020\u0022\u0025\u0073\u0022",string (_gef ));
_bdge :=_ceg .FindStringSubmatchIndex (string (_gef ));if len (_bdge )< 6{_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_gef ));
return &_cab ,_ae .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_daba ._bcd .Discard (_bdge [0]);_bd .Log .Trace ("O\u0066\u0066\u0073\u0065\u0074\u0073\u0020\u0025\u0020\u0064",_bdge );_ffge :=_bdge [1]-_bdge [0];_cec :=make ([]byte ,_ffge );_ ,_fdgca =_daba .readAtLeast (_cec ,_ffge );if _fdgca !=nil {_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0061\u0062l\u0065\u0020\u0074\u006f\u0020\u0072\u0065\u0061\u0064\u0020-\u0020\u0025\u0073",_fdgca );
return nil ,_fdgca ;};_bd .Log .Trace ("\u0074\u0065\u0078t\u006c\u0069\u006e\u0065\u003a\u0020\u0025\u0073",_cec );_cag :=_ceg .FindStringSubmatch (string (_cec ));if len (_cag )< 3{_bd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020U\u006e\u0061\u0062l\u0065\u0020\u0074\u006f \u0066\u0069\u006e\u0064\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u0073\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065\u0020\u0028\u0025\u0073\u0029",string (_cec ));
return &_cab ,_ae .New ("\u0075\u006e\u0061b\u006c\u0065\u0020\u0074\u006f\u0020\u0064\u0065\u0074\u0065\u0063\u0074\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020s\u0069\u0067\u006e\u0061\u0074\u0075\u0072\u0065");
};_dabaa ,_ :=_b .Atoi (_cag [1]);_dee ,_ :=_b .Atoi (_cag [2]);_cab .ObjectNumber =int64 (_dabaa );_cab .GenerationNumber =int64 (_dee );for {_bcda ,_ffc :=_daba ._bcd .Peek (2);if _ffc !=nil {return &_cab ,_ffc ;};_bd .Log .Trace ("I\u006ed\u002e\u0020\u0070\u0065\u0065\u006b\u003a\u0020%\u0073\u0020\u0028\u0025 x\u0029\u0021",string (_bcda ),string (_bcda ));
if _ce .IsWhiteSpace (_bcda [0]){_daba .skipSpaces ();}else if _bcda [0]=='%'{_daba .skipComments ();}else if (_bcda [0]=='<')&&(_bcda [1]=='<'){_bd .Log .Trace ("\u0043\u0061\u006c\u006c\u0020\u0050\u0061\u0072\u0073e\u0044\u0069\u0063\u0074");_cab .PdfObject ,_ffc =_daba .parseDict ();
_bd .Log .Trace ("\u0045\u004f\u0046\u0020Ca\u006c\u006c\u0020\u0050\u0061\u0072\u0073\u0065\u0044\u0069\u0063\u0074\u003a\u0020%\u0076",_ffc );if _ffc !=nil {return &_cab ,_ffc ;};_bd .Log .Trace ("\u0050\u0061\u0072\u0073\u0065\u0064\u0020\u0064\u0069\u0063t\u0069\u006f\u006e\u0061\u0072\u0079\u002e.\u002e\u0020\u0066\u0069\u006e\u0069\u0073\u0068\u0065\u0064\u002e");
}else if (_bcda [0]=='/')||(_bcda [0]=='(')||(_bcda [0]=='[')||(_bcda [0]=='<'){_cab .PdfObject ,_ffc =_daba .parseObject ();if _ffc !=nil {return &_cab ,_ffc ;};_bd .Log .Trace ("P\u0061\u0072\u0073\u0065\u0064\u0020o\u0062\u006a\u0065\u0063\u0074\u0020\u002e\u002e\u002e \u0066\u0069\u006ei\u0073h\u0065\u0064\u002e");
}else {if _bcda [0]=='e'{_fdee ,_cda :=_daba .readTextLine ();if _cda !=nil {return nil ,_cda ;};if len (_fdee )>=6&&_fdee [0:6]=="\u0065\u006e\u0064\u006f\u0062\u006a"{break ;};}else if _bcda [0]=='s'{_bcda ,_ =_daba ._bcd .Peek (10);if string (_bcda [:6])=="\u0073\u0074\u0072\u0065\u0061\u006d"{_ceb :=6;
if len (_bcda )> 6{if _ce .IsWhiteSpace (_bcda [_ceb ])&&_bcda [_ceb ]!='\r'&&_bcda [_ceb ]!='\n'{_bd .Log .Debug ("\u004e\u006fn\u002d\u0063\u006f\u006e\u0066\u006f\u0072\u006d\u0061\u006e\u0074\u0020\u0046\u0044\u0046\u0020\u006e\u006f\u0074 \u0065\u006e\u0064\u0069\u006e\u0067 \u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006c\u0069\u006e\u0065\u0020\u0070\u0072o\u0070\u0065r\u006c\u0079\u0020\u0077i\u0074\u0068\u0020\u0045\u004fL\u0020\u006d\u0061\u0072\u006b\u0065\u0072");
_ceb ++;};if _bcda [_ceb ]=='\r'{_ceb ++;if _bcda [_ceb ]=='\n'{_ceb ++;};}else if _bcda [_ceb ]=='\n'{_ceb ++;};};_daba ._bcd .Discard (_ceb );_dca ,_eed :=_cab .PdfObject .(*_ce .PdfObjectDictionary );if !_eed {return nil ,_ae .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u0020\u006di\u0073s\u0069\u006e\u0067\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};_bd .Log .Trace ("\u0053\u0074\u0072\u0065\u0061\u006d\u0020\u0064\u0069c\u0074\u0020\u0025\u0073",_dca );_dcf ,_eeg :=_dca .Get ("\u004c\u0065\u006e\u0067\u0074\u0068").(*_ce .PdfObjectInteger );if !_eeg {return nil ,_ae .New ("\u0073\u0074re\u0061\u006d\u0020l\u0065\u006e\u0067\u0074h n\u0065ed\u0073\u0020\u0074\u006f\u0020\u0062\u0065 a\u006e\u0020\u0069\u006e\u0074\u0065\u0067e\u0072");
};_gd :=*_dcf ;if _gd < 0{return nil ,_ae .New ("\u0073\u0074\u0072\u0065\u0061\u006d\u0020\u006e\u0065\u0065\u0064\u0073\u0020\u0074\u006f \u0062e\u0020\u006c\u006f\u006e\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0030");};if int64 (_gd )> _daba ._abb {_bd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020\u0053t\u0072\u0065\u0061\u006d\u0020l\u0065\u006e\u0067\u0074\u0068\u0020\u0063\u0061\u006e\u006e\u006f\u0074\u0020\u0062\u0065\u0020\u006c\u0061\u0072\u0067\u0065\u0072\u0020\u0074\u0068\u0061\u006e\u0020\u0066\u0069\u006c\u0065\u0020\u0073\u0069\u007a\u0065");
return nil ,_ae .New ("\u0069n\u0076\u0061l\u0069\u0064\u0020\u0073t\u0072\u0065\u0061m\u0020\u006c\u0065\u006e\u0067\u0074\u0068\u002c\u0020la\u0072\u0067\u0065r\u0020\u0074h\u0061\u006e\u0020\u0066\u0069\u006ce\u0020\u0073i\u007a\u0065");};_eg :=make ([]byte ,_gd );
_ ,_ffc =_daba .readAtLeast (_eg ,int (_gd ));if _ffc !=nil {_bd .Log .Debug ("E\u0052\u0052\u004f\u0052 s\u0074r\u0065\u0061\u006d\u0020\u0028%\u0064\u0029\u003a\u0020\u0025\u0058",len (_eg ),_eg );_bd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ffc );
return nil ,_ffc ;};_dce :=_ce .PdfObjectStream {};_dce .Stream =_eg ;_dce .PdfObjectDictionary =_cab .PdfObject .(*_ce .PdfObjectDictionary );_dce .ObjectNumber =_cab .ObjectNumber ;_dce .GenerationNumber =_cab .GenerationNumber ;_daba .skipSpaces ();
_daba ._bcd .Discard (9);_daba .skipSpaces ();return &_dce ,nil ;};};_cab .PdfObject ,_ffc =_daba .parseObject ();return &_cab ,_ffc ;};};_bd .Log .Trace ("\u0052\u0065\u0074\u0075rn\u0069\u006e\u0067\u0020\u0069\u006e\u0064\u0069\u0072\u0065\u0063\u0074\u0021");
return &_cab ,nil ;};

// FieldValues implements interface model.FieldValueProvider.
// Returns a map of field names to values (PdfObjects).
func (fdf *Data )FieldValues ()(map[string ]_ce .PdfObject ,error ){_fe ,_de :=fdf .FieldDictionaries ();if _de !=nil {return nil ,_de ;};var _cf []string ;for _abd :=range _fe {_cf =append (_cf ,_abd );};_ac .Strings (_cf );_ff :=map[string ]_ce .PdfObject {};
for _ ,_cdd :=range _cf {_ffb :=_fe [_cdd ];_fee :=_ce .TraceToDirectObject (_ffb .Get ("\u0056"));_ff [_cdd ]=_fee ;};return _ff ,nil ;};func _gagg (_ggf _fb .ReadSeeker )(*fdfParser ,error ){_cgaf :=&fdfParser {};_cgaf ._aca =_ggf ;_cgaf ._ga =map[int64 ]_ce .PdfObject {};
_bedc ,_gbf ,_fcc :=_cgaf .parseFdfVersion ();if _fcc !=nil {_bd .Log .Error ("U\u006e\u0061\u0062\u006c\u0065\u0020t\u006f\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0076e\u0072\u0073\u0069o\u006e:\u0020\u0025\u0076",_fcc );return nil ,_fcc ;};_cgaf ._fde =_bedc ;
_cgaf ._bed =_gbf ;_fcc =_cgaf .parse ();return _cgaf ,_fcc ;};var _ag =_e .MustCompile ("\u0025F\u0044F\u002d\u0028\u005c\u0064\u0029\u005c\u002e\u0028\u005c\u0064\u0029");func (_ffd *fdfParser )parseArray ()(*_ce .PdfObjectArray ,error ){_bfgc :=_ce .MakeArray ();
_ffd ._bcd .ReadByte ();for {_ffd .skipSpaces ();_ccbb ,_dcb :=_ffd ._bcd .Peek (1);if _dcb !=nil {return _bfgc ,_dcb ;};if _ccbb [0]==']'{_ffd ._bcd .ReadByte ();break ;};_acbc ,_dcb :=_ffd .parseObject ();if _dcb !=nil {return _bfgc ,_dcb ;};_bfgc .Append (_acbc );
};return _bfgc ,nil ;};

// Data represents forms data format (FDF) file data.
type Data struct{_fg *_ce .PdfObjectDictionary ;_df *_ce .PdfObjectArray ;};func (_eca *fdfParser )parseNull ()(_ce .PdfObjectNull ,error ){_ ,_bfe :=_eca ._bcd .Discard (4);return _ce .PdfObjectNull {},_bfe ;};

// FieldDictionaries returns a map of field names to field dictionaries.
func (fdf *Data )FieldDictionaries ()(map[string ]*_ce .PdfObjectDictionary ,error ){_fd :=map[string ]*_ce .PdfObjectDictionary {};for _dfg :=0;_dfg < fdf ._df .Len ();_dfg ++{_ea ,_bf :=_ce .GetDict (fdf ._df .Get (_dfg ));if _bf {_be ,_ :=_ce .GetString (_ea .Get ("\u0054"));
if _be !=nil {_fd [_be .Str ()]=_ea ;};};};return _fd ,nil ;};func (_cb *fdfParser )getFileOffset ()int64 {_dg ,_ :=_cb ._aca .Seek (0,_fb .SeekCurrent );_dg -=int64 (_cb ._bcd .Buffered ());return _dg ;};