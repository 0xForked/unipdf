//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_e "errors";_ga "fmt";_gb "github.com/adrg/sysfont";_c "github.com/unidoc/unipdf/v3/common";_dg "github.com/unidoc/unipdf/v3/contentstream";_b "github.com/unidoc/unipdf/v3/core";_d "github.com/unidoc/unipdf/v3/internal/transform";_fc "github.com/unidoc/unipdf/v3/model";_db "github.com/unidoc/unipdf/v3/render/internal/context";_agc "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";_ag "image";_fe "image/draw";_g "image/jpeg";_efe "image/png";_ad "os";_ef "path/filepath";_f "strings";);var (_dbfg =_e .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_edf =_e .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _fd (_eda string ,_ege _ag .Image )error {_adf ,_geb :=_ad .Create (_eda );if _geb !=nil {return _geb ;};defer _adf .Close ();return _efe .Encode (_adf ,_ege );};func _fa (_ac string ,_dbf _ag .Image ,_cgg int )error {_eb ,_dbe :=_ad .Create (_ac );if _dbe !=nil {return _dbe ;};defer _eb .Close ();return _g .Encode (_eb ,_dbf ,&_g .Options {Quality :_cgg });};

// Render converts the specified PDF page into an image and returns the result.
func (_eg *ImageDevice )Render (page *_fc .PdfPage )(_ag .Image ,error ){_bb ,_gg :=page .GetMediaBox ();if _gg !=nil {return nil ,_gg ;};_gac ,_ada :=_bb .Llx +_bb .Width (),_bb .Lly +_bb .Height ();_gga :=_agc .NewContext (int (_gac ),int (_ada ));if _dc :=_eg .renderPage (_gga ,page );_dc !=nil {return nil ,_dc ;};_gad :=_gga .Image ();if _adc :=page .CropBox ;_adc !=nil {_ff :=_ag .Rect (0,0,int (_adc .Width ()),int (_adc .Height ()));_da :=_ag .Pt (int (_adc .Llx ),int (_ada -_adc .Ury ));_ge :=_ag .NewRGBA (_ff );_fe .Draw (_ge ,_ff ,_gad ,_da ,_fe .Src );_gad =_ge ;};return _gad ,nil ;};func (_gd renderer )renderPage (_agd _db .Context ,_dbc *_fc .PdfPage )error {_faf ,_aca :=_dbc .GetAllContentStreams ();if _aca !=nil {return _aca ;};_agd .Translate (0,float64 (_agd .Height ()));_agd .Scale (1,-1);_agd .Push ();_agd .SetRGBA (1,1,1,1);_agd .DrawRectangle (0,0,float64 (_agd .Width ()),float64 (_agd .Height ()));_agd .Fill ();_agd .Pop ();_agd .SetLineWidth (1.0);_agd .SetRGBA (0,0,0,1);return _gd .renderContentStream (_agd ,_faf ,_dbc .Resources );};func (_acg renderer )renderContentStream (_fcc _db .Context ,_bd string ,_daf *_fc .PdfPageResources )error {_ea ,_geg :=_dg .NewContentStreamParser (_bd ).Parse ();if _geg !=nil {return _geg ;};_fae :=_fcc .TextState ();_gaca :=map[string ]*_db .TextFont {};_edg :=_gb .NewFinder (&_gb .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_dbb :=_dg .NewContentStreamProcessor (*_ea );_dbb .AddHandler (_dg .HandlerConditionEnumAllOperands ,"",func (_dd *_dg .ContentStreamOperation ,_egf _dg .GraphicsState ,_af *_fc .PdfPageResources )error {_c .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_dd .Operand );switch _dd .Operand {case "\u0071":_fcc .Push ();case "\u0051":_fcc .Pop ();case "\u0063\u006d":if len (_dd .Params )!=6{return _edf ;};_ebe ,_ba :=_b .GetNumbersAsFloat (_dd .Params );if _ba !=nil {return _ba ;};_cf :=_d .NewMatrix (_ebe [0],_ebe [1],_ebe [2],_ebe [3],_ebe [4],_ebe [5]);_c .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_cf );_fcc .SetMatrix (_fcc .Matrix ().Mult (_cf ));_fea :=(_egf .CTM .ScalingFactorX ()+_egf .CTM .ScalingFactorY ())/2.0;_fcc .SetLineWidth (_fea *_fcc .LineWidth ());case "\u0077":if len (_dd .Params )!=1{return _edf ;};_be ,_cga :=_b .GetNumbersAsFloat (_dd .Params );if _cga !=nil {return _cga ;};_cfa :=(_egf .CTM .ScalingFactorX ()+_egf .CTM .ScalingFactorY ())/2.0;_fcc .SetLineWidth (_cfa *_be [0]);case "\u004a":if len (_dd .Params )!=1{return _edf ;};_daa ,_df :=_b .GetIntVal (_dd .Params [0]);if !_df {return _dbfg ;};switch _daa {case 0:_fcc .SetLineCap (_db .LineCapButt );case 1:_fcc .SetLineCap (_db .LineCapRound );case 2:_fcc .SetLineCap (_db .LineCapSquare );default:_c .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_daa );return _edf ;};case "\u006a":if len (_dd .Params )!=1{return _edf ;};_gada ,_fab :=_b .GetIntVal (_dd .Params [0]);if !_fab {return _dbfg ;};switch _gada {case 0:_fcc .SetLineJoin (_db .LineJoinBevel );case 1:_fcc .SetLineJoin (_db .LineJoinRound );case 2:_fcc .SetLineJoin (_db .LineJoinBevel );default:_c .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_gada );return _edf ;};case "\u004d":if len (_dd .Params )!=1{return _edf ;};_fce ,_efc :=_b .GetNumbersAsFloat (_dd .Params );if _efc !=nil {return _efc ;};_ =_fce ;_c .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_dd .Params )!=2{return _edf ;};_ede ,_bf :=_b .GetArray (_dd .Params [0]);if !_bf {return _dbfg ;};_cb ,_bf :=_b .GetIntVal (_dd .Params [1]);if !_bf {return _dbfg ;};_gc ,_bab :=_b .GetNumbersAsFloat (_ede .Elements ());if _bab !=nil {return _bab ;};_fcc .SetDash (_gc ...);_ =_cb ;_c .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_c .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_c .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_dd .Params )!=1{return _edf ;};_ce ,_gf :=_b .GetName (_dd .Params [0]);if !_gf {return _dbfg ;};if _ce ==nil {return _edf ;};_gbc ,_gf :=_af .GetExtGState (*_ce );if !_gf {_c .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_ce );return _e .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_ab ,_gf :=_b .GetDict (_gbc );if !_gf {_c .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");return _dbfg ;};_c .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_ab .String ());case "\u006d":if len (_dd .Params )!=2{_c .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_edf );return nil ;};_bc ,_egc :=_b .GetNumbersAsFloat (_dd .Params );if _egc !=nil {return _egc ;};_c .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_bc );_fcc .NewSubPath ();_fcc .MoveTo (_bc [0],_bc [1]);case "\u006c":if len (_dd .Params )!=2{_c .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_edf );return nil ;};_fdd ,_dbea :=_b .GetNumbersAsFloat (_dd .Params );if _dbea !=nil {return _dbea ;};_fcc .LineTo (_fdd [0],_fdd [1]);case "\u0063":if len (_dd .Params )!=6{return _edf ;};_ffc ,_edga :=_b .GetNumbersAsFloat (_dd .Params );if _edga !=nil {return _edga ;};_c .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_ffc );_fcc .CubicTo (_ffc [0],_ffc [1],_ffc [2],_ffc [3],_ffc [4],_ffc [5]);case "\u0076","\u0079":if len (_dd .Params )!=4{return _edf ;};_dcg ,_bef :=_b .GetNumbersAsFloat (_dd .Params );if _bef !=nil {return _bef ;};_c .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_dcg );_fcc .QuadraticTo (_dcg [0],_dcg [1],_dcg [2],_dcg [3]);case "\u0068":_fcc .ClosePath ();_fcc .NewSubPath ();case "\u0072\u0065":if len (_dd .Params )!=4{return _edf ;};_ebc ,_dcc :=_b .GetNumbersAsFloat (_dd .Params );if _dcc !=nil {return _dcc ;};_fcc .DrawRectangle (_ebc [0],_ebc [1],_ebc [2],_ebc [3]);_fcc .NewSubPath ();case "\u0053":_de ,_bbc :=_egf .ColorspaceStroking .ColorToRGB (_egf .ColorStroking );if _bbc !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbc );return _bbc ;};_agcb ,_bbf :=_de .(*_fc .PdfColorDeviceRGB );if !_bbf {_c .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _bbc ;};_fcc .SetRGBA (_agcb .R (),_agcb .G (),_agcb .B (),1);_fcc .Stroke ();case "\u0073":_fff ,_ca :=_egf .ColorspaceStroking .ColorToRGB (_egf .ColorStroking );if _ca !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ca );return _ca ;};_dge ,_gda :=_fff .(*_fc .PdfColorDeviceRGB );if !_gda {_c .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ca ;};_fcc .ClosePath ();_fcc .NewSubPath ();_fcc .SetRGBA (_dge .R (),_dge .G (),_dge .B (),1);_fcc .Stroke ();case "\u0066","\u0046":_dea ,_cfe :=_egf .ColorspaceNonStroking .ColorToRGB (_egf .ColorNonStroking );if _cfe !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cfe );return _cfe ;};_dec ,_feg :=_dea .(*_fc .PdfColorDeviceRGB );if !_feg {_c .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _cfe ;};_fcc .SetRGBA (_dec .R (),_dec .G (),_dec .B (),1);_fcc .SetFillRule (_db .FillRuleWinding );_fcc .Fill ();case "\u0066\u002a":_cgc ,_cgf :=_egf .ColorspaceNonStroking .ColorToRGB (_egf .ColorNonStroking );if _cgf !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cgf );return _cgf ;};_gbg ,_fac :=_cgc .(*_fc .PdfColorDeviceRGB );if !_fac {_c .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _cgf ;};_fcc .SetRGBA (_gbg .R (),_gbg .G (),_gbg .B (),1);_fcc .SetFillRule (_db .FillRuleEvenOdd );_fcc .Fill ();case "\u0042":_bac ,_fega :=_egf .ColorspaceNonStroking .ColorToRGB (_egf .ColorNonStroking );if _fega !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fega );return _fega ;};_afa :=_bac .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_afa .R (),_afa .G (),_afa .B (),1);_fcc .SetFillRule (_db .FillRuleWinding );_fcc .FillPreserve ();_bac ,_fega =_egf .ColorspaceStroking .ColorToRGB (_egf .ColorStroking );if _fega !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fega );return _fega ;};_afa =_bac .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_afa .R (),_afa .G (),_afa .B (),1);_fcc .Stroke ();case "\u0042\u002a":_eab ,_dbef :=_egf .ColorspaceNonStroking .ColorToRGB (_egf .ColorNonStroking );if _dbef !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dbef );return _dbef ;};_ddf :=_eab .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_ddf .R (),_ddf .G (),_ddf .B (),1);_fcc .SetFillRule (_db .FillRuleEvenOdd );_fcc .FillPreserve ();_eab ,_dbef =_egf .ColorspaceStroking .ColorToRGB (_egf .ColorStroking );if _dbef !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dbef );return _dbef ;};_ddf =_eab .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_ddf .R (),_ddf .G (),_ddf .B (),1);_fcc .Stroke ();case "\u0062":_ebg ,_cd :=_egf .ColorspaceNonStroking .ColorToRGB (_egf .ColorNonStroking );if _cd !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cd );return _cd ;};_feac :=_ebg .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_feac .R (),_feac .G (),_feac .B (),1);_fcc .ClosePath ();_fcc .NewSubPath ();_fcc .SetFillRule (_db .FillRuleWinding );_fcc .FillPreserve ();_ebg ,_cd =_egf .ColorspaceStroking .ColorToRGB (_egf .ColorStroking );if _cd !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cd );return _cd ;};_feac =_ebg .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_feac .R (),_feac .G (),_feac .B (),1);_fcc .Stroke ();case "\u0062\u002a":_fcc .ClosePath ();_gae ,_afg :=_egf .ColorspaceNonStroking .ColorToRGB (_egf .ColorNonStroking );if _afg !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_afg );return _afg ;};_dfg :=_gae .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_dfg .R (),_dfg .G (),_dfg .B (),1);_fcc .NewSubPath ();_fcc .SetFillRule (_db .FillRuleEvenOdd );_fcc .FillPreserve ();_gae ,_afg =_egf .ColorspaceStroking .ColorToRGB (_egf .ColorStroking );if _afg !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_afg );return _afg ;};_dfg =_gae .(*_fc .PdfColorDeviceRGB );_fcc .SetRGBA (_dfg .R (),_dfg .G (),_dfg .B (),1);_fcc .Stroke ();case "\u006e":_fcc .ClearPath ();case "\u0057":_fcc .SetFillRule (_db .FillRuleWinding );_fcc .ClipPreserve ();case "\u0057\u002a":_fcc .SetFillRule (_db .FillRuleEvenOdd );_fcc .ClipPreserve ();case "\u0072\u0067":_adac ,_gdd :=_egf .ColorNonStroking .(*_fc .PdfColorDeviceRGB );if !_gdd {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorNonStroking );return nil ;};_fcc .SetFillRGBA (_adac .R (),_adac .G (),_adac .B (),1);case "\u0052\u0047":_bfa ,_ffcc :=_egf .ColorStroking .(*_fc .PdfColorDeviceRGB );if !_ffcc {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorStroking );return nil ;};_fcc .SetStrokeRGBA (_bfa .R (),_bfa .G (),_bfa .B (),1);case "\u006b":_gbcf ,_gee :=_egf .ColorNonStroking .(*_fc .PdfColorDeviceCMYK );if !_gee {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorNonStroking );return nil ;};_edac ,_bdb :=_egf .ColorspaceNonStroking .ColorToRGB (_gbcf );if _bdb !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorNonStroking );return nil ;};_faec ,_gee :=_edac .(*_fc .PdfColorDeviceRGB );if !_gee {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_edac );return nil ;};_fcc .SetFillRGBA (_faec .R (),_faec .G (),_faec .B (),1);case "\u004b":_ffb ,_cbb :=_egf .ColorStroking .(*_fc .PdfColorDeviceCMYK );if !_cbb {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorStroking );return nil ;};_cad ,_fdf :=_egf .ColorspaceStroking .ColorToRGB (_ffb );if _fdf !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorStroking );return nil ;};_ffbc ,_cbb :=_cad .(*_fc .PdfColorDeviceRGB );if !_cbb {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cad );return nil ;};_fcc .SetStrokeRGBA (_ffbc .R (),_ffbc .G (),_ffbc .B (),1);case "\u0067":_ggg ,_bbb :=_egf .ColorNonStroking .(*_fc .PdfColorDeviceGray );if !_bbb {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorNonStroking );return nil ;};_gag ,_cba :=_egf .ColorspaceNonStroking .ColorToRGB (_ggg );if _cba !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorNonStroking );return nil ;};_cadg ,_bbb :=_gag .(*_fc .PdfColorDeviceRGB );if !_bbb {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gag );return nil ;};_fcc .SetFillRGBA (_cadg .R (),_cadg .G (),_cadg .B (),1);case "\u0047":_edfc ,_fcb :=_egf .ColorStroking .(*_fc .PdfColorDeviceGray );if !_fcb {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorStroking );return nil ;};_ec ,_bdd :=_egf .ColorspaceStroking .ColorToRGB (_edfc );if _bdd !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorStroking );return nil ;};_cgfg ,_fcb :=_ec .(*_fc .PdfColorDeviceRGB );if !_fcb {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ec );return nil ;};_fcc .SetStrokeRGBA (_cgfg .R (),_cgfg .G (),_cgfg .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_ae ,_ffg :=_egf .ColorspaceNonStroking .ColorToRGB (_egf .ColorNonStroking );if _ffg !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorNonStroking );return nil ;};_gacaf ,_adad :=_ae .(*_fc .PdfColorDeviceRGB );if !_adad {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ae );return nil ;};_fcc .SetFillRGBA (_gacaf .R (),_gacaf .G (),_gacaf .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_acf ,_egb :=_egf .ColorspaceStroking .ColorToRGB (_egf .ColorStroking );if _egb !=nil {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egf .ColorStroking );return nil ;};_deac ,_gbe :=_acf .(*_fc .PdfColorDeviceRGB );if !_gbe {_c .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_acf );return nil ;};_fcc .SetStrokeRGBA (_deac .R (),_deac .G (),_deac .B (),1);case "\u0044\u006f":if len (_dd .Params )!=1{return _edf ;};_aea ,_adca :=_b .GetName (_dd .Params [0]);if !_adca {return _dbfg ;};_ ,_cbc :=_af .GetXObjectByName (*_aea );switch _cbc {case _fc .XObjectTypeImage :_c .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_aea .String ());_gea ,_cfag :=_af .GetXObjectImageByName (*_aea );if _cfag !=nil {return _cfag ;};_dgd ,_cfag :=_gea .ToImage ();if _cfag !=nil {return _cfag ;};_gde ,_cfag :=_dgd .ToGoImage ();if _cfag !=nil {return _cfag ;};_fcba :=_gde .Bounds ();_fcc .Push ();_fcc .Scale (1.0/float64 (_fcba .Dx ()),-1.0/float64 (_fcba .Dy ()));_fcc .DrawImageAnchored (_gde ,0,0,0,1);_fcc .Pop ();case _fc .XObjectTypeForm :_c .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_aea .String ());_cac ,_aa :=_af .GetXObjectFormByName (*_aea );if _aa !=nil {return _aa ;};_aeae ,_aa :=_cac .GetContentStream ();if _aa !=nil {return _aa ;};_cace :=_cac .Resources ;if _cace ==nil {_cace =_af ;};_fcc .Push ();if _cac .Matrix !=nil {_gbf ,_ade :=_b .GetArray (_cac .Matrix );if !_ade {return _dbfg ;};_gff ,_gba :=_b .GetNumbersAsFloat (_gbf .Elements ());if _gba !=nil {return _gba ;};if len (_gff )!=6{return _edf ;};_gbd :=_d .NewMatrix (_gff [0],_gff [1],_gff [2],_gff [3],_gff [4],_gff [5]);_fcc .SetMatrix (_fcc .Matrix ().Mult (_gbd ));};if _cac .BBox !=nil {_bg ,_bea :=_b .GetArray (_cac .BBox );if !_bea {return _dbfg ;};_cae ,_cbe :=_b .GetNumbersAsFloat (_bg .Elements ());if _cbe !=nil {return _cbe ;};if len (_cae )!=4{_c .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_cae ));return _edf ;};_fcc .DrawRectangle (_cae [0],_cae [1],_cae [2]-_cae [0],_cae [3]-_cae [1]);_fcc .SetRGBA (1,0,0,1);_fcc .Clip ();}else {_c .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");};_aa =_acg .renderContentStream (_fcc ,string (_aeae ),_cace );if _aa !=nil {return _aa ;};_fcc .Pop ();};case "\u0042\u0049":if len (_dd .Params )!=1{return _edf ;};_bbbf ,_ecg :=_dd .Params [0].(*_dg .ContentStreamInlineImage );if !_ecg {return nil ;};_gagf ,_cfc :=_bbbf .ToImage (_af );if _cfc !=nil {return _cfc ;};_ebb ,_cfc :=_gagf .ToGoImage ();if _cfc !=nil {return _cfc ;};_abf :=_ebb .Bounds ();_fcc .Push ();_fcc .Scale (1.0/float64 (_abf .Dx ()),-1.0/float64 (_abf .Dy ()));_fcc .DrawImageAnchored (_ebb ,0,0,0,1);_fcc .Pop ();case "\u0042\u0054":_fae .Reset ();case "\u0045\u0054":_fae .Reset ();case "\u0054\u004c":if len (_dd .Params )!=1{return _edf ;};_eged ,_edaf :=_b .GetNumberAsFloat (_dd .Params [0]);if _edaf !=nil {return _edaf ;};_fae .Tl =_eged ;case "\u0054\u0063":if len (_dd .Params )!=1{return _edf ;};_fdfb ,_cgag :=_b .GetNumberAsFloat (_dd .Params [0]);if _cgag !=nil {return _cgag ;};_fae .Tc =_fdfb ;case "\u0054\u0077":if len (_dd .Params )!=1{return _edf ;};_bee ,_bdce :=_b .GetNumberAsFloat (_dd .Params [0]);if _bdce !=nil {return _bdce ;};_fae .Tw =_bee ;case "\u0054\u007a":if len (_dd .Params )!=1{return _edf ;};_gfe ,_dba :=_b .GetNumberAsFloat (_dd .Params [0]);if _dba !=nil {return _dba ;};_fae .Th =_gfe ;case "\u0054\u0073":if len (_dd .Params )!=1{return _edf ;};_bgd ,_dgf :=_b .GetNumberAsFloat (_dd .Params [0]);if _dgf !=nil {return _dgf ;};_fae .Ts =_bgd ;case "\u0054\u0064":if len (_dd .Params )!=2{return _edf ;};_ead ,_ceb :=_b .GetNumbersAsFloat (_dd .Params );if _ceb !=nil {return _ceb ;};_c .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_ead );_fae .ProcTd (_ead [0],_ead [1]);case "\u0054\u0044":if len (_dd .Params )!=2{return _edf ;};_ecd ,_dde :=_b .GetNumbersAsFloat (_dd .Params );if _dde !=nil {return _dde ;};_c .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_ecd );_fae .ProcTD (_ecd [0],_ecd [1]);case "\u0054\u002a":_fae .ProcTStar ();case "\u0054\u006d":if len (_dd .Params )!=6{return _edf ;};_cdd ,_ebbf :=_b .GetNumbersAsFloat (_dd .Params );if _ebbf !=nil {return _ebbf ;};_c .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_cdd );_fae .ProcTm (_cdd [0],_cdd [1],_cdd [2],_cdd [3],_cdd [4],_cdd [5]);case "\u0027":if len (_dd .Params )!=1{return _edf ;};_dca ,_dad :=_b .GetStringBytes (_dd .Params [0]);if !_dad {return _dbfg ;};_c .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_dca ));_fae .ProcQ (_dca ,_fcc );case "\u0022":if len (_dd .Params )!=3{return _edf ;};_gca ,_ee :=_b .GetNumberAsFloat (_dd .Params [0]);if _ee !=nil {return _ee ;};_ccc ,_ee :=_b .GetNumberAsFloat (_dd .Params [1]);if _ee !=nil {return _ee ;};_cebf ,_ecb :=_b .GetStringBytes (_dd .Params [2]);if !_ecb {return _dbfg ;};_fae .ProcDQ (_cebf ,_gca ,_ccc ,_fcc );case "\u0054\u006a":if len (_dd .Params )!=1{return _edf ;};_eea ,_afaf :=_b .GetStringBytes (_dd .Params [0]);if !_afaf {return _dbfg ;};_c .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_eea ));_fae .ProcTj (_eea ,_fcc );case "\u0054\u004a":if len (_dd .Params )!=1{return _edf ;};_eeg ,_bfc :=_b .GetArray (_dd .Params [0]);if !_bfc {_c .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_eeg );return _dbfg ;};_c .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_eeg );for _ ,_efb :=range _eeg .Elements (){switch _bbg :=_efb .(type ){case *_b .PdfObjectString :if _bbg !=nil {_fae .ProcTj (_bbg .Bytes (),_fcc );};case *_b .PdfObjectFloat ,*_b .PdfObjectInteger :_fb ,_bdbc :=_b .GetNumberAsFloat (_bbg );if _bdbc ==nil {_fae .Translate (-_fb *0.001*_fae .Tf .Size ,0);};};};case "\u0054\u0066":if len (_dd .Params )!=2{return _edf ;};_c .Log .Debug ("\u0025\u0023\u0076",_dd .Params );_cfac ,_ged :=_b .GetName (_dd .Params [0]);if !_ged ||_cfac ==nil {_c .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_dd .Params [0]);return _dbfg ;};_c .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_cfac .String ());_gaa ,_gadc :=_b .GetNumberAsFloat (_dd .Params [1]);if _gadc !=nil {_c .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_dd .Params [1]);return _dbfg ;};_c .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_gaa );_dbefc ,_ffe :=_af .GetFontByName (*_cfac );if !_ffe {_c .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_cfac .String ());return _e .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_c .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_dbefc );_egd ,_ged :=_b .GetDict (_dbefc );if !_ged {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");return _dbfg ;};_cdc ,_gadc :=_fc .NewPdfFontFromPdfObject (_egd );if _gadc !=nil {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");return _gadc ;};_ced :=_cdc .BaseFont ();if _ced ==""{_ced =_cfac .String ();};_dfe ,_ged :=_gaca [_ced ];if !_ged {_dfe ,_gadc =_db .NewTextFont (_cdc ,_gaa );if _gadc !=nil {_c .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_gadc );};};if _dfe ==nil {if len (_ced )> 7&&_ced [6]=='+'{_ced =_ced [7:];};_fdde :=[]string {_ced ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_fee :=range _fdde {_c .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_fee );if _dfe ,_ged =_gaca [_fee ];_ged {break ;};_aaf :=_edg .Match (_fee );if _aaf ==nil {_c .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_fee );continue ;};_dfe ,_gadc =_db .NewTextFontFromPath (_aaf .Filename ,_gaa );if _gadc !=nil {_c .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_aaf .Filename );continue ;};_c .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_ced ,_aaf .Name ,_aaf .Filename );_gaca [_fee ]=_dfe ;break ;};};if _dfe ==nil {_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");return _e .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_fae .ProcTf (_dfe .WithSize (_gaa ,_cdc ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_c .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_dd .Operand );};return nil ;});_geg =_dbb .Process (_daf );if _geg !=nil {return _geg ;};return nil ;};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_ed *ImageDevice )RenderToPath (page *_fc .PdfPage ,outputPath string )error {_cg ,_efg :=_ed .Render (page );if _efg !=nil {return _efg ;};_dae :=_f .ToLower (_ef .Ext (outputPath ));if _dae ==""{return _e .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");};switch _dae {case "\u002e\u0070\u006e\u0067":return _fd (outputPath ,_cg );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _fa (outputPath ,_cg ,100);};return _ga .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_dae );};

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {return &ImageDevice {}};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer };type renderer struct{};