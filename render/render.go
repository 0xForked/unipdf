//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_dc "errors";_eg "fmt";_fg "github.com/adrg/sysfont";_fe "github.com/unidoc/unipdf/v3/common";_egd "github.com/unidoc/unipdf/v3/contentstream";_a "github.com/unidoc/unipdf/v3/core";_df "github.com/unidoc/unipdf/v3/internal/transform";_bd "github.com/unidoc/unipdf/v3/model";_db "github.com/unidoc/unipdf/v3/render/internal/context";_cf "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";_ea "image";_b "image/draw";_ga "image/jpeg";_g "image/png";_c "os";_e "path/filepath";_f "strings";);func _fc (_ffb string ,_cad _ea .Image )error {_ag ,_cd :=_c .Create (_ffb );if _cd !=nil {return _cd ;};defer _ag .Close ();return _g .Encode (_ag ,_cad );};

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {return &ImageDevice {}};

// Render converts the specified PDF page into an image and returns the result.
func (_cb *ImageDevice )Render (page *_bd .PdfPage )(_ea .Image ,error ){_ad ,_ff :=page .GetMediaBox ();if _ff !=nil {return nil ,_ff ;};_be ,_ffd :=_ad .Llx +_ad .Width (),_ad .Lly +_ad .Height ();_aa :=_cf .NewContext (int (_be ),int (_ffd ));if _dg :=_cb .renderPage (_aa ,page );_dg !=nil {return nil ,_dg ;};_ca :=_aa .Image ();if _dcc :=page .CropBox ;_dcc !=nil {_ce :=_ea .Rect (0,0,int (_dcc .Width ()),int (_dcc .Height ()));_ceb :=_ea .Pt (int (_dcc .Llx ),int (_ffd -_dcc .Ury ));_bg :=_ea .NewRGBA (_ce );_b .Draw (_bg ,_ce ,_ca ,_ceb ,_b .Src );_ca =_bg ;};return _ca ,nil ;};func (_cfa renderer )renderContentStream (_gb _db .Context ,_fcg string ,_bad *_bd .PdfPageResources )error {_bf ,_da :=_egd .NewContentStreamParser (_fcg ).Parse ();if _da !=nil {return _da ;};_eac :=_gb .TextState ();_adge :=map[string ]*_db .TextFont {};_agf :=_fg .NewFinder (&_fg .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_ge :=_egd .NewContentStreamProcessor (*_bf );_ge .AddHandler (_egd .HandlerConditionEnumAllOperands ,"",func (_ege *_egd .ContentStreamOperation ,_fa _egd .GraphicsState ,_ac *_bd .PdfPageResources )error {_fe .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_ege .Operand );switch _ege .Operand {case "\u0071":_gb .Push ();case "\u0051":_gb .Pop ();case "\u0063\u006d":if len (_ege .Params )!=6{return _bee ;};_ceg ,_beb :=_a .GetNumbersAsFloat (_ege .Params );if _beb !=nil {return _beb ;};_af :=_df .NewMatrix (_ceg [0],_ceg [1],_ceg [2],_ceg [3],_ceg [4],_ceg [5]);_fe .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_af );_gb .SetMatrix (_gb .Matrix ().Mult (_af ));_bgg :=(_fa .CTM .ScalingFactorX ()+_fa .CTM .ScalingFactorY ())/2.0;_gb .SetLineWidth (_bgg *_gb .LineWidth ());case "\u0077":if len (_ege .Params )!=1{return _bee ;};_bfa ,_bga :=_a .GetNumbersAsFloat (_ege .Params );if _bga !=nil {return _bga ;};_fff :=(_fa .CTM .ScalingFactorX ()+_fa .CTM .ScalingFactorY ())/2.0;_gb .SetLineWidth (_fff *_bfa [0]);case "\u004a":if len (_ege .Params )!=1{return _bee ;};_fb ,_bfg :=_a .GetIntVal (_ege .Params [0]);if !_bfg {return _dbg ;};switch _fb {case 0:_gb .SetLineCap (_db .LineCapButt );case 1:_gb .SetLineCap (_db .LineCapRound );case 2:_gb .SetLineCap (_db .LineCapSquare );default:_fe .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_fb );return _bee ;};case "\u006a":if len (_ege .Params )!=1{return _bee ;};_cc ,_fac :=_a .GetIntVal (_ege .Params [0]);if !_fac {return _dbg ;};switch _cc {case 0:_gb .SetLineJoin (_db .LineJoinBevel );case 1:_gb .SetLineJoin (_db .LineJoinRound );case 2:_gb .SetLineJoin (_db .LineJoinBevel );default:_fe .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_cc );return _bee ;};case "\u004d":if len (_ege .Params )!=1{return _bee ;};_aaa ,_ab :=_a .GetNumbersAsFloat (_ege .Params );if _ab !=nil {return _ab ;};_ =_aaa ;_fe .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_ege .Params )!=2{return _bee ;};_gba ,_ada :=_a .GetArray (_ege .Params [0]);if !_ada {return _dbg ;};_ec ,_ada :=_a .GetIntVal (_ege .Params [1]);if !_ada {return _dbg ;};_fcfb ,_facg :=_a .GetNumbersAsFloat (_gba .Elements ());if _facg !=nil {return _facg ;};_gb .SetDash (_fcfb ...);_ =_ec ;_fe .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_fe .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_fe .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_ege .Params )!=1{return _bee ;};_fag ,_cdg :=_a .GetName (_ege .Params [0]);if !_cdg {return _dbg ;};if _fag ==nil {return _bee ;};_gd ,_cdg :=_ac .GetExtGState (*_fag );if !_cdg {_fe .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_fag );return _dc .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_cca ,_cdg :=_a .GetDict (_gd );if !_cdg {_fe .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");return _dbg ;};_fe .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_cca .String ());case "\u006d":if len (_ege .Params )!=2{_fe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_bee );return nil ;};_dce ,_ccb :=_a .GetNumbersAsFloat (_ege .Params );if _ccb !=nil {return _ccb ;};_fe .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_dce );_gb .NewSubPath ();_gb .MoveTo (_dce [0],_dce [1]);case "\u006c":if len (_ege .Params )!=2{_fe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_bee );return nil ;};_ed ,_fdg :=_a .GetNumbersAsFloat (_ege .Params );if _fdg !=nil {return _fdg ;};_gb .LineTo (_ed [0],_ed [1]);case "\u0063":if len (_ege .Params )!=6{return _bee ;};_fga ,_ddc :=_a .GetNumbersAsFloat (_ege .Params );if _ddc !=nil {return _ddc ;};_fe .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_fga );_gb .CubicTo (_fga [0],_fga [1],_fga [2],_fga [3],_fga [4],_fga [5]);case "\u0076","\u0079":if len (_ege .Params )!=4{return _bee ;};_bb ,_gbb :=_a .GetNumbersAsFloat (_ege .Params );if _gbb !=nil {return _gbb ;};_fe .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_bb );_gb .QuadraticTo (_bb [0],_bb [1],_bb [2],_bb [3]);case "\u0068":_gb .ClosePath ();_gb .NewSubPath ();case "\u0072\u0065":if len (_ege .Params )!=4{return _bee ;};_cdb ,_eda :=_a .GetNumbersAsFloat (_ege .Params );if _eda !=nil {return _eda ;};_gb .DrawRectangle (_cdb [0],_cdb [1],_cdb [2],_cdb [3]);_gb .NewSubPath ();case "\u0053":_fdf ,_dbf :=_fa .ColorspaceStroking .ColorToRGB (_fa .ColorStroking );if _dbf !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dbf );return _dbf ;};_dfd ,_afd :=_fdf .(*_bd .PdfColorDeviceRGB );if !_afd {_fe .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _dbf ;};_gb .SetRGBA (_dfd .R (),_dfd .G (),_dfd .B (),1);_gb .Stroke ();case "\u0073":_eag ,_ae :=_fa .ColorspaceStroking .ColorToRGB (_fa .ColorStroking );if _ae !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ae );return _ae ;};_ccd ,_ceba :=_eag .(*_bd .PdfColorDeviceRGB );if !_ceba {_fe .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ae ;};_gb .ClosePath ();_gb .NewSubPath ();_gb .SetRGBA (_ccd .R (),_ccd .G (),_ccd .B (),1);_gb .Stroke ();case "\u0066","\u0046":_gc ,_ef :=_fa .ColorspaceNonStroking .ColorToRGB (_fa .ColorNonStroking );if _ef !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ef );return _ef ;};_eab ,_feb :=_gc .(*_bd .PdfColorDeviceRGB );if !_feb {_fe .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ef ;};_gb .SetRGBA (_eab .R (),_eab .G (),_eab .B (),1);_gb .SetFillRule (_db .FillRuleWinding );_gb .Fill ();case "\u0066\u002a":_agd ,_bbf :=_fa .ColorspaceNonStroking .ColorToRGB (_fa .ColorNonStroking );if _bbf !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbf );return _bbf ;};_ggb ,_aeb :=_agd .(*_bd .PdfColorDeviceRGB );if !_aeb {_fe .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _bbf ;};_gb .SetRGBA (_ggb .R (),_ggb .G (),_ggb .B (),1);_gb .SetFillRule (_db .FillRuleEvenOdd );_gb .Fill ();case "\u0042":_cea ,_ggc :=_fa .ColorspaceNonStroking .ColorToRGB (_fa .ColorNonStroking );if _ggc !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ggc );return _ggc ;};_dgg :=_cea .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_dgg .R (),_dgg .G (),_dgg .B (),1);_gb .SetFillRule (_db .FillRuleWinding );_gb .FillPreserve ();_cea ,_ggc =_fa .ColorspaceStroking .ColorToRGB (_fa .ColorStroking );if _ggc !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ggc );return _ggc ;};_dgg =_cea .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_dgg .R (),_dgg .G (),_dgg .B (),1);_gb .Stroke ();case "\u0042\u002a":_aca ,_ee :=_fa .ColorspaceNonStroking .ColorToRGB (_fa .ColorNonStroking );if _ee !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ee );return _ee ;};_cdgc :=_aca .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_cdgc .R (),_cdgc .G (),_cdgc .B (),1);_gb .SetFillRule (_db .FillRuleEvenOdd );_gb .FillPreserve ();_aca ,_ee =_fa .ColorspaceStroking .ColorToRGB (_fa .ColorStroking );if _ee !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ee );return _ee ;};_cdgc =_aca .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_cdgc .R (),_cdgc .G (),_cdgc .B (),1);_gb .Stroke ();case "\u0062":_gaf ,_acc :=_fa .ColorspaceNonStroking .ColorToRGB (_fa .ColorNonStroking );if _acc !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_acc );return _acc ;};_fca :=_gaf .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_fca .R (),_fca .G (),_fca .B (),1);_gb .ClosePath ();_gb .NewSubPath ();_gb .SetFillRule (_db .FillRuleWinding );_gb .FillPreserve ();_gaf ,_acc =_fa .ColorspaceStroking .ColorToRGB (_fa .ColorStroking );if _acc !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_acc );return _acc ;};_fca =_gaf .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_fca .R (),_fca .G (),_fca .B (),1);_gb .Stroke ();case "\u0062\u002a":_gb .ClosePath ();_edf ,_eea :=_fa .ColorspaceNonStroking .ColorToRGB (_fa .ColorNonStroking );if _eea !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eea );return _eea ;};_cda :=_edf .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_cda .R (),_cda .G (),_cda .B (),1);_gb .NewSubPath ();_gb .SetFillRule (_db .FillRuleEvenOdd );_gb .FillPreserve ();_edf ,_eea =_fa .ColorspaceStroking .ColorToRGB (_fa .ColorStroking );if _eea !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eea );return _eea ;};_cda =_edf .(*_bd .PdfColorDeviceRGB );_gb .SetRGBA (_cda .R (),_cda .G (),_cda .B (),1);_gb .Stroke ();case "\u006e":_gb .ClearPath ();case "\u0057":_gb .SetFillRule (_db .FillRuleWinding );_gb .ClipPreserve ();case "\u0057\u002a":_gb .SetFillRule (_db .FillRuleEvenOdd );_gb .ClipPreserve ();case "\u0072\u0067":_cbd ,_ccdc :=_fa .ColorNonStroking .(*_bd .PdfColorDeviceRGB );if !_ccdc {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorNonStroking );return nil ;};_gb .SetFillRGBA (_cbd .R (),_cbd .G (),_cbd .B (),1);case "\u0052\u0047":_gdg ,_fdfd :=_fa .ColorStroking .(*_bd .PdfColorDeviceRGB );if !_fdfd {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorStroking );return nil ;};_gb .SetStrokeRGBA (_gdg .R (),_gdg .G (),_gdg .B (),1);case "\u006b":_fce ,_bc :=_fa .ColorNonStroking .(*_bd .PdfColorDeviceCMYK );if !_bc {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorNonStroking );return nil ;};_beg ,_eca :=_fa .ColorspaceNonStroking .ColorToRGB (_fce );if _eca !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorNonStroking );return nil ;};_eged ,_bc :=_beg .(*_bd .PdfColorDeviceRGB );if !_bc {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_beg );return nil ;};_gb .SetFillRGBA (_eged .R (),_eged .G (),_eged .B (),1);case "\u004b":_gdc ,_cee :=_fa .ColorStroking .(*_bd .PdfColorDeviceCMYK );if !_cee {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorStroking );return nil ;};_dag ,_cg :=_fa .ColorspaceStroking .ColorToRGB (_gdc );if _cg !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorStroking );return nil ;};_cbg ,_cee :=_dag .(*_bd .PdfColorDeviceRGB );if !_cee {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dag );return nil ;};_gb .SetStrokeRGBA (_cbg .R (),_cbg .G (),_cbg .B (),1);case "\u0067":_afg ,_gcd :=_fa .ColorNonStroking .(*_bd .PdfColorDeviceGray );if !_gcd {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorNonStroking );return nil ;};_fgf ,_afa :=_fa .ColorspaceNonStroking .ColorToRGB (_afg );if _afa !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorNonStroking );return nil ;};_fab ,_gcd :=_fgf .(*_bd .PdfColorDeviceRGB );if !_gcd {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fgf );return nil ;};_gb .SetFillRGBA (_fab .R (),_fab .G (),_fab .B (),1);case "\u0047":_fcec ,_ffde :=_fa .ColorStroking .(*_bd .PdfColorDeviceGray );if !_ffde {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorStroking );return nil ;};_egdd ,_bdf :=_fa .ColorspaceStroking .ColorToRGB (_fcec );if _bdf !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorStroking );return nil ;};_dad ,_ffde :=_egdd .(*_bd .PdfColorDeviceRGB );if !_ffde {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egdd );return nil ;};_gb .SetStrokeRGBA (_dad .R (),_dad .G (),_dad .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_bgad ,_bca :=_fa .ColorspaceNonStroking .ColorToRGB (_fa .ColorNonStroking );if _bca !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorNonStroking );return nil ;};_bbe ,_eee :=_bgad .(*_bd .PdfColorDeviceRGB );if !_eee {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bgad );return nil ;};_gb .SetFillRGBA (_bbe .R (),_bbe .G (),_bbe .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_aggf ,_ddg :=_fa .ColorspaceStroking .ColorToRGB (_fa .ColorStroking );if _ddg !=nil {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fa .ColorStroking );return nil ;};_cfc ,_ecc :=_aggf .(*_bd .PdfColorDeviceRGB );if !_ecc {_fe .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aggf );return nil ;};_gb .SetStrokeRGBA (_cfc .R (),_cfc .G (),_cfc .B (),1);case "\u0044\u006f":if len (_ege .Params )!=1{return _bee ;};_bfb ,_gge :=_a .GetName (_ege .Params [0]);if !_gge {return _dbg ;};_ ,_fef :=_ac .GetXObjectByName (*_bfb );switch _fef {case _bd .XObjectTypeImage :_fe .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_bfb .String ());_cag ,_aaag :=_ac .GetXObjectImageByName (*_bfb );if _aaag !=nil {return _aaag ;};_gbbe ,_aaag :=_cag .ToImage ();if _aaag !=nil {return _aaag ;};_cdgg ,_aaag :=_gbbe .ToGoImage ();if _aaag !=nil {return _aaag ;};_eaee :=_cdgg .Bounds ();_gb .Push ();_gb .Scale (1.0/float64 (_eaee .Dx ()),-1.0/float64 (_eaee .Dy ()));_gb .DrawImageAnchored (_cdgg ,0,0,0,1);_gb .Pop ();case _bd .XObjectTypeForm :_fe .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_bfb .String ());_gca ,_cgd :=_ac .GetXObjectFormByName (*_bfb );if _cgd !=nil {return _cgd ;};_ged ,_cgd :=_gca .GetContentStream ();if _cgd !=nil {return _cgd ;};_fcecg :=_gca .Resources ;if _fcecg ==nil {_fcecg =_ac ;};_gb .Push ();if _gca .Matrix !=nil {_febf ,_gcae :=_a .GetArray (_gca .Matrix );if !_gcae {return _dbg ;};_fda ,_ddgc :=_a .GetNumbersAsFloat (_febf .Elements ());if _ddgc !=nil {return _ddgc ;};if len (_fda )!=6{return _bee ;};_bba :=_df .NewMatrix (_fda [0],_fda [1],_fda [2],_fda [3],_fda [4],_fda [5]);_gb .SetMatrix (_gb .Matrix ().Mult (_bba ));};if _gca .BBox !=nil {_aaab ,_bcg :=_a .GetArray (_gca .BBox );if !_bcg {return _dbg ;};_gafa ,_fcaa :=_a .GetNumbersAsFloat (_aaab .Elements ());if _fcaa !=nil {return _fcaa ;};if len (_gafa )!=4{_fe .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_gafa ));return _bee ;};_gb .DrawRectangle (_gafa [0],_gafa [1],_gafa [2]-_gafa [0],_gafa [3]-_gafa [1]);_gb .SetRGBA (1,0,0,1);_gb .Clip ();}else {_fe .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");};_cgd =_cfa .renderContentStream (_gb ,string (_ged ),_fcecg );if _cgd !=nil {return _cgd ;};_gb .Pop ();};case "\u0042\u0049":if len (_ege .Params )!=1{return _bee ;};_ece ,_bdc :=_ege .Params [0].(*_egd .ContentStreamInlineImage );if !_bdc {return nil ;};_bebe ,_baa :=_ece .ToImage (_ac );if _baa !=nil {return _baa ;};_cfg ,_baa :=_bebe .ToGoImage ();if _baa !=nil {return _baa ;};_daa :=_cfg .Bounds ();_gb .Push ();_gb .Scale (1.0/float64 (_daa .Dx ()),-1.0/float64 (_daa .Dy ()));_gb .DrawImageAnchored (_cfg ,0,0,0,1);_gb .Pop ();case "\u0042\u0054":_eac .Reset ();case "\u0045\u0054":_eac .Reset ();case "\u0054\u004c":if len (_ege .Params )!=1{return _bee ;};_fdfc ,_cead :=_a .GetNumberAsFloat (_ege .Params [0]);if _cead !=nil {return _cead ;};_eac .Tl =_fdfc ;case "\u0054\u0063":if len (_ege .Params )!=1{return _bee ;};_aadb ,_fed :=_a .GetNumberAsFloat (_ege .Params [0]);if _fed !=nil {return _fed ;};_eac .Tc =_aadb ;case "\u0054\u0077":if len (_ege .Params )!=1{return _bee ;};_faa ,_adb :=_a .GetNumberAsFloat (_ege .Params [0]);if _adb !=nil {return _adb ;};_eac .Tw =_faa ;case "\u0054\u007a":if len (_ege .Params )!=1{return _bee ;};_aaf ,_bbb :=_a .GetNumberAsFloat (_ege .Params [0]);if _bbb !=nil {return _bbb ;};_eac .Th =_aaf ;case "\u0054\u0073":if len (_ege .Params )!=1{return _bee ;};_age ,_eb :=_a .GetNumberAsFloat (_ege .Params [0]);if _eb !=nil {return _eb ;};_eac .Ts =_age ;case "\u0054\u0064":if len (_ege .Params )!=2{return _bee ;};_dfe ,_dbeb :=_a .GetNumbersAsFloat (_ege .Params );if _dbeb !=nil {return _dbeb ;};_fe .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_dfe );_eac .ProcTd (_dfe [0],_dfe [1]);case "\u0054\u0044":if len (_ege .Params )!=2{return _bee ;};_dcg ,_ccbg :=_a .GetNumbersAsFloat (_ege .Params );if _ccbg !=nil {return _ccbg ;};_fe .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_dcg );_eac .ProcTD (_dcg [0],_dcg [1]);case "\u0054\u002a":_eac .ProcTStar ();case "\u0054\u006d":if len (_ege .Params )!=6{return _bee ;};_fgg ,_afe :=_a .GetNumbersAsFloat (_ege .Params );if _afe !=nil {return _afe ;};_fe .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_fgg );_eac .ProcTm (_fgg [0],_fgg [1],_fgg [2],_fgg [3],_fgg [4],_fgg [5]);case "\u0027":if len (_ege .Params )!=1{return _bee ;};_abd ,_fgb :=_a .GetStringBytes (_ege .Params [0]);if !_fgb {return _dbg ;};_fe .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_abd ));_eac .ProcQ (_abd ,_gb );case "\u0022":if len (_ege .Params )!=3{return _bee ;};_cbe ,_bab :=_a .GetNumberAsFloat (_ege .Params [0]);if _bab !=nil {return _bab ;};_acad ,_bab :=_a .GetNumberAsFloat (_ege .Params [1]);if _bab !=nil {return _bab ;};_ade ,_fbc :=_a .GetStringBytes (_ege .Params [2]);if !_fbc {return _dbg ;};_eac .ProcDQ (_ade ,_cbe ,_acad ,_gb );case "\u0054\u006a":if len (_ege .Params )!=1{return _bee ;};_dde ,_bbg :=_a .GetStringBytes (_ege .Params [0]);if !_bbg {return _dbg ;};_fe .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_dde ));_eac .ProcTj (_dde ,_gb );case "\u0054\u004a":if len (_ege .Params )!=1{return _bee ;};_fdfa ,_bbff :=_a .GetArray (_ege .Params [0]);if !_bbff {_fe .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_fdfa );return _dbg ;};_fe .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_fdfa );for _ ,_dfc :=range _fdfa .Elements (){switch _ggd :=_dfc .(type ){case *_a .PdfObjectString :if _ggd !=nil {_eac .ProcTj (_ggd .Bytes (),_gb );};case *_a .PdfObjectFloat ,*_a .PdfObjectInteger :_dcd ,_ced :=_a .GetNumberAsFloat (_ggd );if _ced ==nil {_eac .Translate (-_dcd *0.001*_eac .Tf .Size ,0);};};};case "\u0054\u0066":if len (_ege .Params )!=2{return _bee ;};_fe .Log .Debug ("\u0025\u0023\u0076",_ege .Params );_fgca ,_bgaa :=_a .GetName (_ege .Params [0]);if !_bgaa ||_fgca ==nil {_fe .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_ege .Params [0]);return _dbg ;};_fe .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_fgca .String ());_eaf ,_edc :=_a .GetNumberAsFloat (_ege .Params [1]);if _edc !=nil {_fe .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_ege .Params [1]);return _dbg ;};_fe .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_eaf );_cec ,_dcdc :=_ac .GetFontByName (*_fgca );if !_dcdc {_fe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_fgca .String ());return _dc .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_fe .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_cec );_ddd ,_bgaa :=_a .GetDict (_cec );if !_bgaa {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");return _dbg ;};_cgdb ,_edc :=_bd .NewPdfFontFromPdfObject (_ddd );if _edc !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");return _edc ;};_bcae :=_cgdb .BaseFont ();if _bcae ==""{_bcae =_fgca .String ();};_edae ,_bgaa :=_adge [_bcae ];if !_bgaa {_edae ,_edc =_db .NewTextFont (_cgdb ,_eaf );if _edc !=nil {_fe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_edc );};};if _edae ==nil {if len (_bcae )> 7&&_bcae [6]=='+'{_bcae =_bcae [7:];};_abc :=[]string {_bcae ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_edd :=range _abc {_fe .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_edd );if _edae ,_bgaa =_adge [_edd ];_bgaa {break ;};_fagf :=_agf .Match (_edd );if _fagf ==nil {_fe .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_edd );continue ;};_edae ,_edc =_db .NewTextFontFromPath (_fagf .Filename ,_eaf );if _edc !=nil {_fe .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_fagf .Filename );continue ;};_fe .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_bcae ,_fagf .Name ,_fagf .Filename );_adge [_edd ]=_edae ;break ;};};if _edae ==nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");return _dc .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_eac .ProcTf (_edae .WithSize (_eaf ,_cgdb ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_ege .Operand );};return nil ;});_da =_ge .Process (_bad );if _da !=nil {return _da ;};return nil ;};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_eae *ImageDevice )RenderToPath (page *_bd .PdfPage ,outputPath string )error {_dbe ,_feg :=_eae .Render (page );if _feg !=nil {return _feg ;};_bdb :=_f .ToLower (_e .Ext (outputPath ));if _bdb ==""{return _dc .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");};switch _bdb {case "\u002e\u0070\u006e\u0067":return _fc (outputPath ,_dbe );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _ba (outputPath ,_dbe ,100);};return _eg .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_bdb );};var (_dbg =_dc .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_bee =_dc .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_fgc renderer )renderPage (_fcf _db .Context ,_aad *_bd .PdfPage )error {_adg ,_gg :=_aad .GetAllContentStreams ();if _gg !=nil {return _gg ;};_fcf .Translate (0,float64 (_fcf .Height ()));_fcf .Scale (1,-1);_fcf .Push ();_fcf .SetRGBA (1,1,1,1);_fcf .DrawRectangle (0,0,float64 (_fcf .Width ()),float64 (_fcf .Height ()));_fcf .Fill ();_fcf .Pop ();_fcf .SetLineWidth (1.0);_fcf .SetRGBA (0,0,0,1);return _fgc .renderContentStream (_fcf ,_adg ,_aad .Resources );};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer };type renderer struct{};func _ba (_dd string ,_ffg _ea .Image ,_agg int )error {_gf ,_fd :=_c .Create (_dd );if _fd !=nil {return _fd ;};defer _gf .Close ();return _ga .Encode (_gf ,_ffg ,&_ga .Options {Quality :_agg });};