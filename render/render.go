//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_d "errors";_dd "fmt";_gdc "github.com/adrg/sysfont";_gdb "github.com/unidoc/unipdf/v3/common";_bf "github.com/unidoc/unipdf/v3/contentstream";_ab "github.com/unidoc/unipdf/v3/core";_gd "github.com/unidoc/unipdf/v3/internal/transform";_gc "github.com/unidoc/unipdf/v3/model";_bb "github.com/unidoc/unipdf/v3/render/internal/context";_af "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";_b "image";_ee "image/draw";_ae "image/jpeg";_a "image/png";_eg "os";_f "path/filepath";_e "strings";);

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer };

// Render converts the specified PDF page into an image and returns the result.
func (_fd *ImageDevice )Render (page *_gc .PdfPage )(_b .Image ,error ){_c ,_ba :=page .GetMediaBox ();if _ba !=nil {return nil ,_ba ;};_bbb ,_ed :=_c .Llx +_c .Width (),_c .Lly +_c .Height ();_de :=_af .NewContext (int (_bbb ),int (_ed ));if _bc :=_fd .renderPage (_de ,page );_bc !=nil {return nil ,_bc ;};_ag :=_de .Image ();if _fb :=page .CropBox ;_fb !=nil {_fa :=_b .Rect (0,0,int (_fb .Width ()),int (_fb .Height ()));_ac :=_b .Pt (int (_fb .Llx ),int (_ed -_fb .Ury ));_ce :=_b .NewRGBA (_fa );_ee .Draw (_ce ,_fa ,_ag ,_ac ,_ee .Src );_ag =_ce ;};return _ag ,nil ;};func (_da renderer )renderContentStream (_cb _bb .Context ,_gdbg string ,_egb *_gc .PdfPageResources )error {_aeg ,_fbb :=_bf .NewContentStreamParser (_gdbg ).Parse ();if _fbb !=nil {return _fbb ;};_bcf :=_cb .TextState ();_cg :=map[string ]*_bb .TextFont {};_gcfb :=_gdc .NewFinder (&_gdc .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_ad :=_bf .NewContentStreamProcessor (*_aeg );_ad .AddHandler (_bf .HandlerConditionEnumAllOperands ,"",func (_deg *_bf .ContentStreamOperation ,_efd _bf .GraphicsState ,_gg *_gc .PdfPageResources )error {_gdb .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_deg .Operand );switch _deg .Operand {case "\u0071":_cb .Push ();case "\u0051":_cb .Pop ();case "\u0063\u006d":if len (_deg .Params )!=6{return _fg ;};_gb ,_dad :=_ab .GetNumbersAsFloat (_deg .Params );if _dad !=nil {return _dad ;};_aeed :=_gd .NewMatrix (_gb [0],_gb [1],_gb [2],_gb [3],_gb [4],_gb [5]);_gdb .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_aeed );_cb .SetMatrix (_cb .Matrix ().Mult (_aeed ));_fdb :=(_efd .CTM .ScalingFactorX ()+_efd .CTM .ScalingFactorY ())/2.0;_cb .SetLineWidth (_fdb *_cb .LineWidth ());case "\u0077":if len (_deg .Params )!=1{return _fg ;};_bg ,_ff :=_ab .GetNumbersAsFloat (_deg .Params );if _ff !=nil {return _ff ;};_edc :=(_efd .CTM .ScalingFactorX ()+_efd .CTM .ScalingFactorY ())/2.0;_cb .SetLineWidth (_edc *_bg [0]);case "\u004a":if len (_deg .Params )!=1{return _fg ;};_efe ,_aa :=_ab .GetIntVal (_deg .Params [0]);if !_aa {return _afc ;};switch _efe {case 0:_cb .SetLineCap (_bb .LineCapButt );case 1:_cb .SetLineCap (_bb .LineCapRound );case 2:_cb .SetLineCap (_bb .LineCapSquare );default:_gdb .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_efe );return _fg ;};case "\u006a":if len (_deg .Params )!=1{return _fg ;};_cee ,_fbd :=_ab .GetIntVal (_deg .Params [0]);if !_fbd {return _afc ;};switch _cee {case 0:_cb .SetLineJoin (_bb .LineJoinBevel );case 1:_cb .SetLineJoin (_bb .LineJoinRound );case 2:_cb .SetLineJoin (_bb .LineJoinBevel );default:_gdb .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_cee );return _fg ;};case "\u004d":if len (_deg .Params )!=1{return _fg ;};_dff ,_eb :=_ab .GetNumbersAsFloat (_deg .Params );if _eb !=nil {return _eb ;};_ =_dff ;_gdb .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_deg .Params )!=2{return _fg ;};_bcd ,_fbe :=_ab .GetArray (_deg .Params [0]);if !_fbe {return _afc ;};_ec ,_fbe :=_ab .GetIntVal (_deg .Params [1]);if !_fbe {return _afc ;};_edcb ,_afa :=_ab .GetNumbersAsFloat (_bcd .Elements ());if _afa !=nil {return _afa ;};_cb .SetDash (_edcb ...);_ =_ec ;_gdb .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_gdb .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_gdb .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_deg .Params )!=1{return _fg ;};_dbd ,_cc :=_ab .GetName (_deg .Params [0]);if !_cc {return _afc ;};if _dbd ==nil {return _fg ;};_ceg ,_cc :=_gg .GetExtGState (*_dbd );if !_cc {_gdb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_dbd );return _d .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_fge ,_cc :=_ab .GetDict (_ceg );if !_cc {_gdb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");return _afc ;};_gdb .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_fge .String ());case "\u006d":if len (_deg .Params )!=2{_gdb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_fg );return nil ;};_cf ,_fdg :=_ab .GetNumbersAsFloat (_deg .Params );if _fdg !=nil {return _fdg ;};_gdb .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_cf );_cb .NewSubPath ();_cb .MoveTo (_cf [0],_cf [1]);case "\u006c":if len (_deg .Params )!=2{_gdb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_fg );return nil ;};_fdf ,_bbd :=_ab .GetNumbersAsFloat (_deg .Params );if _bbd !=nil {return _bbd ;};_cb .LineTo (_fdf [0],_fdf [1]);case "\u0063":if len (_deg .Params )!=6{return _fg ;};_dffa ,_gag :=_ab .GetNumbersAsFloat (_deg .Params );if _gag !=nil {return _gag ;};_gdb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_dffa );_cb .CubicTo (_dffa [0],_dffa [1],_dffa [2],_dffa [3],_dffa [4],_dffa [5]);case "\u0076","\u0079":if len (_deg .Params )!=4{return _fg ;};_bfb ,_gce :=_ab .GetNumbersAsFloat (_deg .Params );if _gce !=nil {return _gce ;};_gdb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_bfb );_cb .QuadraticTo (_bfb [0],_bfb [1],_bfb [2],_bfb [3]);case "\u0068":_cb .ClosePath ();_cb .NewSubPath ();case "\u0072\u0065":if len (_deg .Params )!=4{return _fg ;};_aab ,_gaa :=_ab .GetNumbersAsFloat (_deg .Params );if _gaa !=nil {return _gaa ;};_cb .DrawRectangle (_aab [0],_aab [1],_aab [2],_aab [3]);_cb .NewSubPath ();case "\u0053":_ffbd ,_gbf :=_efd .ColorspaceStroking .ColorToRGB (_efd .ColorStroking );if _gbf !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gbf );return _gbf ;};_feg ,_ccf :=_ffbd .(*_gc .PdfColorDeviceRGB );if !_ccf {_gdb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _gbf ;};_cb .SetRGBA (_feg .R (),_feg .G (),_feg .B (),1);_cb .Stroke ();case "\u0073":_dae ,_deb :=_efd .ColorspaceStroking .ColorToRGB (_efd .ColorStroking );if _deb !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_deb );return _deb ;};_ccc ,_baa :=_dae .(*_gc .PdfColorDeviceRGB );if !_baa {_gdb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _deb ;};_cb .ClosePath ();_cb .NewSubPath ();_cb .SetRGBA (_ccc .R (),_ccc .G (),_ccc .B (),1);_cb .Stroke ();case "\u0066","\u0046":_fc ,_ebf :=_efd .ColorspaceNonStroking .ColorToRGB (_efd .ColorNonStroking );if _ebf !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ebf );return _ebf ;};_aaa ,_dbde :=_fc .(*_gc .PdfColorDeviceRGB );if !_dbde {_gdb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ebf ;};_cb .SetRGBA (_aaa .R (),_aaa .G (),_aaa .B (),1);_cb .SetFillRule (_bb .FillRuleWinding );_cb .Fill ();case "\u0066\u002a":_gaab ,_aege :=_efd .ColorspaceNonStroking .ColorToRGB (_efd .ColorNonStroking );if _aege !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_aege );return _aege ;};_eab ,_fba :=_gaab .(*_gc .PdfColorDeviceRGB );if !_fba {_gdb .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _aege ;};_cb .SetRGBA (_eab .R (),_eab .G (),_eab .B (),1);_cb .SetFillRule (_bb .FillRuleEvenOdd );_cb .Fill ();case "\u0042":_ggf ,_cfg :=_efd .ColorspaceNonStroking .ColorToRGB (_efd .ColorNonStroking );if _cfg !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cfg );return _cfg ;};_gbg :=_ggf .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_gbg .R (),_gbg .G (),_gbg .B (),1);_cb .SetFillRule (_bb .FillRuleWinding );_cb .FillPreserve ();_ggf ,_cfg =_efd .ColorspaceStroking .ColorToRGB (_efd .ColorStroking );if _cfg !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cfg );return _cfg ;};_gbg =_ggf .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_gbg .R (),_gbg .G (),_gbg .B (),1);_cb .Stroke ();case "\u0042\u002a":_cfd ,_gff :=_efd .ColorspaceNonStroking .ColorToRGB (_efd .ColorNonStroking );if _gff !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gff );return _gff ;};_be :=_cfd .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_be .R (),_be .G (),_be .B (),1);_cb .SetFillRule (_bb .FillRuleEvenOdd );_cb .FillPreserve ();_cfd ,_gff =_efd .ColorspaceStroking .ColorToRGB (_efd .ColorStroking );if _gff !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gff );return _gff ;};_be =_cfd .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_be .R (),_be .G (),_be .B (),1);_cb .Stroke ();case "\u0062":_bfe ,_dfe :=_efd .ColorspaceNonStroking .ColorToRGB (_efd .ColorNonStroking );if _dfe !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfe );return _dfe ;};_dfc :=_bfe .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_dfc .R (),_dfc .G (),_dfc .B (),1);_cb .ClosePath ();_cb .NewSubPath ();_cb .SetFillRule (_bb .FillRuleWinding );_cb .FillPreserve ();_bfe ,_dfe =_efd .ColorspaceStroking .ColorToRGB (_efd .ColorStroking );if _dfe !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfe );return _dfe ;};_dfc =_bfe .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_dfc .R (),_dfc .G (),_dfc .B (),1);_cb .Stroke ();case "\u0062\u002a":_cb .ClosePath ();_fgc ,_bbf :=_efd .ColorspaceNonStroking .ColorToRGB (_efd .ColorNonStroking );if _bbf !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbf );return _bbf ;};_gbgc :=_fgc .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_gbgc .R (),_gbgc .G (),_gbgc .B (),1);_cb .NewSubPath ();_cb .SetFillRule (_bb .FillRuleEvenOdd );_cb .FillPreserve ();_fgc ,_bbf =_efd .ColorspaceStroking .ColorToRGB (_efd .ColorStroking );if _bbf !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbf );return _bbf ;};_gbgc =_fgc .(*_gc .PdfColorDeviceRGB );_cb .SetRGBA (_gbgc .R (),_gbgc .G (),_gbgc .B (),1);_cb .Stroke ();case "\u006e":_cb .ClearPath ();case "\u0057":_cb .SetFillRule (_bb .FillRuleWinding );_cb .ClipPreserve ();case "\u0057\u002a":_cb .SetFillRule (_bb .FillRuleEvenOdd );_cb .ClipPreserve ();case "\u0072\u0067":_cfe ,_ffe :=_efd .ColorNonStroking .(*_gc .PdfColorDeviceRGB );if !_ffe {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorNonStroking );return nil ;};_cb .SetFillRGBA (_cfe .R (),_cfe .G (),_cfe .B (),1);case "\u0052\u0047":_fcg ,_ggb :=_efd .ColorStroking .(*_gc .PdfColorDeviceRGB );if !_ggb {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorStroking );return nil ;};_cb .SetStrokeRGBA (_fcg .R (),_fcg .G (),_fcg .B (),1);case "\u006b":_fec ,_egbf :=_efd .ColorNonStroking .(*_gc .PdfColorDeviceCMYK );if !_egbf {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorNonStroking );return nil ;};_dg ,_abb :=_efd .ColorspaceNonStroking .ColorToRGB (_fec );if _abb !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorNonStroking );return nil ;};_afcb ,_egbf :=_dg .(*_gc .PdfColorDeviceRGB );if !_egbf {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dg );return nil ;};_cb .SetFillRGBA (_afcb .R (),_afcb .G (),_afcb .B (),1);case "\u004b":_fcd ,_fbed :=_efd .ColorStroking .(*_gc .PdfColorDeviceCMYK );if !_fbed {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorStroking );return nil ;};_cbe ,_edb :=_efd .ColorspaceStroking .ColorToRGB (_fcd );if _edb !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorStroking );return nil ;};_bfbf ,_fbed :=_cbe .(*_gc .PdfColorDeviceRGB );if !_fbed {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cbe );return nil ;};_cb .SetStrokeRGBA (_bfbf .R (),_bfbf .G (),_bfbf .B (),1);case "\u0067":_eca ,_cea :=_efd .ColorNonStroking .(*_gc .PdfColorDeviceGray );if !_cea {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorNonStroking );return nil ;};_dbe ,_gef :=_efd .ColorspaceNonStroking .ColorToRGB (_eca );if _gef !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorNonStroking );return nil ;};_bee ,_cea :=_dbe .(*_gc .PdfColorDeviceRGB );if !_cea {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dbe );return nil ;};_cb .SetFillRGBA (_bee .R (),_bee .G (),_bee .B (),1);case "\u0047":_ffa ,_fdgf :=_efd .ColorStroking .(*_gc .PdfColorDeviceGray );if !_fdgf {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorStroking );return nil ;};_ade ,_aed :=_efd .ColorspaceStroking .ColorToRGB (_ffa );if _aed !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorStroking );return nil ;};_dea ,_fdgf :=_ade .(*_gc .PdfColorDeviceRGB );if !_fdgf {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ade );return nil ;};_cb .SetStrokeRGBA (_dea .R (),_dea .G (),_dea .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_eag ,_efc :=_efd .ColorspaceNonStroking .ColorToRGB (_efd .ColorNonStroking );if _efc !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorNonStroking );return nil ;};_bd ,_fdbe :=_eag .(*_gc .PdfColorDeviceRGB );if !_fdbe {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eag );return nil ;};_cb .SetFillRGBA (_bd .R (),_bd .G (),_bd .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_edfb ,_dag :=_efd .ColorspaceStroking .ColorToRGB (_efd .ColorStroking );if _dag !=nil {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efd .ColorStroking );return nil ;};_gdde ,_fde :=_edfb .(*_gc .PdfColorDeviceRGB );if !_fde {_gdb .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_edfb );return nil ;};_cb .SetStrokeRGBA (_gdde .R (),_gdde .G (),_gdde .B (),1);case "\u0044\u006f":if len (_deg .Params )!=1{return _fg ;};_bcc ,_gbd :=_ab .GetName (_deg .Params [0]);if !_gbd {return _afc ;};_ ,_gbdb :=_gg .GetXObjectByName (*_bcc );switch _gbdb {case _gc .XObjectTypeImage :_gdb .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_bcc .String ());_ggg ,_ece :=_gg .GetXObjectImageByName (*_bcc );if _ece !=nil {return _ece ;};_abc ,_ece :=_ggg .ToImage ();if _ece !=nil {return _ece ;};_bag ,_ece :=_abc .ToGoImage ();if _ece !=nil {return _ece ;};_gda :=_bag .Bounds ();_cb .Push ();_cb .Scale (1.0/float64 (_gda .Dx ()),-1.0/float64 (_gda .Dy ()));_cb .DrawImageAnchored (_bag ,0,0,0,1);_cb .Pop ();case _gc .XObjectTypeForm :_gdb .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_bcc .String ());_dab ,_ede :=_gg .GetXObjectFormByName (*_bcc );if _ede !=nil {return _ede ;};_egd ,_ede :=_dab .GetContentStream ();if _ede !=nil {return _ede ;};_afb :=_dab .Resources ;if _afb ==nil {_afb =_gg ;};_cb .Push ();if _dab .Matrix !=nil {_gdcb ,_aabg :=_ab .GetArray (_dab .Matrix );if !_aabg {return _afc ;};_ffbdf ,_cd :=_ab .GetNumbersAsFloat (_gdcb .Elements ());if _cd !=nil {return _cd ;};if len (_ffbdf )!=6{return _fg ;};_ddd :=_gd .NewMatrix (_ffbdf [0],_ffbdf [1],_ffbdf [2],_ffbdf [3],_ffbdf [4],_ffbdf [5]);_cb .SetMatrix (_cb .Matrix ().Mult (_ddd ));};if _dab .BBox !=nil {_aca ,_edgd :=_ab .GetArray (_dab .BBox );if !_edgd {return _afc ;};_acd ,_ca :=_ab .GetNumbersAsFloat (_aca .Elements ());if _ca !=nil {return _ca ;};if len (_acd )!=4{_gdb .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_acd ));return _fg ;};_cb .DrawRectangle (_acd [0],_acd [1],_acd [2]-_acd [0],_acd [3]-_acd [1]);_cb .SetRGBA (1,0,0,1);_cb .Clip ();}else {_gdb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");};_ede =_da .renderContentStream (_cb ,string (_egd ),_afb );if _ede !=nil {return _ede ;};_cb .Pop ();};case "\u0042\u0049":if len (_deg .Params )!=1{return _fg ;};_ebd ,_fdff :=_deg .Params [0].(*_bf .ContentStreamInlineImage );if !_fdff {return nil ;};_dc ,_beea :=_ebd .ToImage (_gg );if _beea !=nil {return _beea ;};_fce ,_beea :=_dc .ToGoImage ();if _beea !=nil {return _beea ;};_fgd :=_fce .Bounds ();_cb .Push ();_cb .Scale (1.0/float64 (_fgd .Dx ()),-1.0/float64 (_fgd .Dy ()));_cb .DrawImageAnchored (_fce ,0,0,0,1);_cb .Pop ();case "\u0042\u0054":_bcf .Reset ();case "\u0045\u0054":_bcf .Reset ();case "\u0054\u004c":if len (_deg .Params )!=1{return _fg ;};_adg ,_dgc :=_ab .GetNumberAsFloat (_deg .Params [0]);if _dgc !=nil {return _dgc ;};_bcf .Tl =_adg ;case "\u0054\u0063":if len (_deg .Params )!=1{return _fg ;};_aba ,_ceae :=_ab .GetNumberAsFloat (_deg .Params [0]);if _ceae !=nil {return _ceae ;};_bcf .Tc =_aba ;case "\u0054\u0077":if len (_deg .Params )!=1{return _fg ;};_ace ,_abd :=_ab .GetNumberAsFloat (_deg .Params [0]);if _abd !=nil {return _abd ;};_bcf .Tw =_ace ;case "\u0054\u007a":if len (_deg .Params )!=1{return _fg ;};_gad ,_cec :=_ab .GetNumberAsFloat (_deg .Params [0]);if _cec !=nil {return _cec ;};_bcf .Th =_gad ;case "\u0054\u0073":if len (_deg .Params )!=1{return _fg ;};_bad ,_bba :=_ab .GetNumberAsFloat (_deg .Params [0]);if _bba !=nil {return _bba ;};_bcf .Ts =_bad ;case "\u0054\u0064":if len (_deg .Params )!=2{return _fg ;};_fdee ,_gcfa :=_ab .GetNumbersAsFloat (_deg .Params );if _gcfa !=nil {return _gcfa ;};_gdb .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_fdee );_bcf .ProcTd (_fdee [0],_fdee [1]);case "\u0054\u0044":if len (_deg .Params )!=2{return _fg ;};_eaa ,_dcd :=_ab .GetNumbersAsFloat (_deg .Params );if _dcd !=nil {return _dcd ;};_gdb .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_eaa );_bcf .ProcTD (_eaa [0],_eaa [1]);case "\u0054\u002a":_bcf .ProcTStar ();case "\u0054\u006d":if len (_deg .Params )!=6{return _fg ;};_ffef ,_bff :=_ab .GetNumbersAsFloat (_deg .Params );if _bff !=nil {return _bff ;};_gdb .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_ffef );_bcf .ProcTm (_ffef [0],_ffef [1],_ffef [2],_ffef [3],_ffef [4],_ffef [5]);case "\u0027":if len (_deg .Params )!=1{return _fg ;};_beb ,_gfa :=_ab .GetStringBytes (_deg .Params [0]);if !_gfa {return _afc ;};_gdb .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_beb ));_bcf .ProcQ (_beb ,_cb );case "\u0022":if len (_deg .Params )!=3{return _fg ;};_eae ,_cgg :=_ab .GetNumberAsFloat (_deg .Params [0]);if _cgg !=nil {return _cgg ;};_ecf ,_cgg :=_ab .GetNumberAsFloat (_deg .Params [1]);if _cgg !=nil {return _cgg ;};_eef ,_dbf :=_ab .GetStringBytes (_deg .Params [2]);if !_dbf {return _afc ;};_bcf .ProcDQ (_eef ,_eae ,_ecf ,_cb );case "\u0054\u006a":if len (_deg .Params )!=1{return _fg ;};_bebe ,_egdd :=_ab .GetStringBytes (_deg .Params [0]);if !_egdd {return _afc ;};_gdb .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_bebe ));_bcf .ProcTj (_bebe ,_cb );case "\u0054\u004a":if len (_deg .Params )!=1{return _fg ;};_gdg ,_edcg :=_ab .GetArray (_deg .Params [0]);if !_edcg {_gdb .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_gdg );return _afc ;};_gdb .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_gdg );for _ ,_cfeg :=range _gdg .Elements (){switch _cggb :=_cfeg .(type ){case *_ab .PdfObjectString :if _cggb !=nil {_bcf .ProcTj (_cggb .Bytes (),_cb );};case *_ab .PdfObjectFloat ,*_ab .PdfObjectInteger :_gbe ,_dca :=_ab .GetNumberAsFloat (_cggb );if _dca ==nil {_bcf .Translate (-_gbe *0.001*_bcf .Tf .Size ,0);};};};case "\u0054\u0066":if len (_deg .Params )!=2{return _fg ;};_gdb .Log .Debug ("\u0025\u0023\u0076",_deg .Params );_cfde ,_gdcbb :=_ab .GetName (_deg .Params [0]);if !_gdcbb ||_cfde ==nil {_gdb .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_deg .Params [0]);return _afc ;};_gdb .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_cfde .String ());_ecec ,_dcf :=_ab .GetNumberAsFloat (_deg .Params [1]);if _dcf !=nil {_gdb .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_deg .Params [1]);return _afc ;};_gdb .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_ecec );_fdeb ,_gbfc :=_gg .GetFontByName (*_cfde );if !_gbfc {_gdb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_cfde .String ());return _d .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_gdb .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_fdeb );_ffbe ,_gdcbb :=_ab .GetDict (_fdeb );if !_gdcbb {_gdb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");return _afc ;};_cge ,_dcf :=_gc .NewPdfFontFromPdfObject (_ffbe );if _dcf !=nil {_gdb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");return _dcf ;};_cfegb :=_cge .BaseFont ();if _cfegb ==""{_cfegb =_cfde .String ();};_edfg ,_gdcbb :=_cg [_cfegb ];if !_gdcbb {_edfg ,_dcf =_bb .NewTextFont (_cge ,_ecec );if _dcf !=nil {_gdb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dcf );};};if _edfg ==nil {if len (_cfegb )> 7&&_cfegb [6]=='+'{_cfegb =_cfegb [7:];};_abf :=[]string {_cfegb ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_bebd :=range _abf {_gdb .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_bebd );if _edfg ,_gdcbb =_cg [_bebd ];_gdcbb {break ;};_cegb :=_gcfb .Match (_bebd );if _cegb ==nil {_gdb .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_bebd );continue ;};_edfg ,_dcf =_bb .NewTextFontFromPath (_cegb .Filename ,_ecec );if _dcf !=nil {_gdb .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_cegb .Filename );continue ;};_gdb .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_cfegb ,_cegb .Name ,_cegb .Filename );_cg [_bebd ]=_edfg ;break ;};};if _edfg ==nil {_gdb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");return _d .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_bcf .ProcTf (_edfg .WithSize (_ecec ,_cge ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_gdb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_deg .Operand );};return nil ;});_fbb =_ad .Process (_egb );if _fbb !=nil {return _fbb ;};return nil ;};var (_afc =_d .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_fg =_d .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {return &ImageDevice {}};func _dde (_gcc string ,_bbbe _b .Image )error {_aee ,_bcb :=_eg .Create (_gcc );if _bcb !=nil {return _bcb ;};defer _aee .Close ();return _a .Encode (_aee ,_bbbe );};type renderer struct{};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_ef *ImageDevice )RenderToPath (page *_gc .PdfPage ,outputPath string )error {_gdd ,_gf :=_ef .Render (page );if _gf !=nil {return _gf ;};_ea :=_e .ToLower (_f .Ext (outputPath ));if _ea ==""{return _d .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");};switch _ea {case "\u002e\u0070\u006e\u0067":return _dde (outputPath ,_gdd );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _ga (outputPath ,_gdd ,100);};return _dd .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_ea );};func _ga (_edg string ,_bfd _b .Image ,_eeb int )error {_ge ,_edf :=_eg .Create (_edg );if _edf !=nil {return _edf ;};defer _ge .Close ();return _ae .Encode (_ge ,_bfd ,&_ae .Options {Quality :_eeb });};func (_gcf renderer )renderPage (_db _bb .Context ,_df *_gc .PdfPage )error {_fe ,_bfdf :=_df .GetAllContentStreams ();if _bfdf !=nil {return _bfdf ;};_db .Translate (0,float64 (_db .Height ()));_db .Scale (1,-1);_db .Push ();_db .SetRGBA (1,1,1,1);_db .DrawRectangle (0,0,float64 (_db .Width ()),float64 (_db .Height ()));_db .Fill ();_db .Pop ();_db .SetLineWidth (1.0);_db .SetRGBA (0,0,0,1);return _gcf .renderContentStream (_db ,_fe ,_df .Resources );};