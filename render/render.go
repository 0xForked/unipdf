//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_d "errors";_f "fmt";_fd "github.com/adrg/sysfont";_ca "github.com/unidoc/unipdf/v3/common";_gd "github.com/unidoc/unipdf/v3/contentstream";_cb "github.com/unidoc/unipdf/v3/core";_af "github.com/unidoc/unipdf/v3/internal/transform";_c "github.com/unidoc/unipdf/v3/model";_ae "github.com/unidoc/unipdf/v3/render/internal/context";_bg "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";_dda "image";_ag "image/draw";_bf "image/jpeg";_b "image/png";_dd "os";_g "path/filepath";_dg "strings";);

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_cbe *ImageDevice )RenderToPath (page *_c .PdfPage ,outputPath string )error {_agg ,_dc :=_cbe .Render (page );if _dc !=nil {return _dc ;};_aeg :=_dg .ToLower (_g .Ext (outputPath ));if _aeg ==""{return _d .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");};switch _aeg {case "\u002e\u0070\u006e\u0067":return _bfg (outputPath ,_agg );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _dge (outputPath ,_agg ,100);};return _f .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_aeg );};func _bfg (_ebb string ,_ea _dda .Image )error {_ebc ,_ab :=_dd .Create (_ebb );if _ab !=nil {return _ab ;};defer _ebc .Close ();return _b .Encode (_ebc ,_ea );};

// Render converts the specified PDF page into an image and returns the result.
func (_e *ImageDevice )Render (page *_c .PdfPage )(_dda .Image ,error ){_ee ,_bc :=page .GetMediaBox ();if _bc !=nil {return nil ,_bc ;};_cc ,_eb :=_ee .Llx +_ee .Width (),_ee .Lly +_ee .Height ();_bb :=_bg .NewContext (int (_cc ),int (_eb ));if _cg :=_e .renderPage (_bb ,page );_cg !=nil {return nil ,_cg ;};_gc :=_bb .Image ();if _bcc :=page .CropBox ;_bcc !=nil {_df :=_dda .Rect (0,0,int (_bcc .Width ()),int (_bcc .Height ()));_ga :=_dda .Pt (int (_bcc .Llx ),int (_eb -_bcc .Ury ));_aee :=_dda .NewRGBA (_df );_ag .Draw (_aee ,_df ,_gc ,_ga ,_ag .Src );_gc =_aee ;};return _gc ,nil ;};var (_aea =_d .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ed =_d .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _dge (_bfgd string ,_be _dda .Image ,_ad int )error {_de ,_bcd :=_dd .Create (_bfgd );if _bcd !=nil {return _bcd ;};defer _de .Close ();return _bf .Encode (_de ,_be ,&_bf .Options {Quality :_ad });};type renderer struct{};

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {return &ImageDevice {}};func (_ebba renderer )renderContentStream (_fg _ae .Context ,_bfb string ,_gg *_c .PdfPageResources )error {_dce ,_gf :=_gd .NewContentStreamParser (_bfb ).Parse ();if _gf !=nil {return _gf ;};_gaa :=_fg .TextState ();_ec :=map[string ]*_ae .TextFont {};_ddd :=_fd .NewFinder (&_fd .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_ffc :=_gd .NewContentStreamProcessor (*_dce );_ffc .AddHandler (_gd .HandlerConditionEnumAllOperands ,"",func (_aae *_gd .ContentStreamOperation ,_cab _gd .GraphicsState ,_aaed *_c .PdfPageResources )error {_ca .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_aae .Operand );switch _aae .Operand {case "\u0071":_fg .Push ();case "\u0051":_fg .Pop ();case "\u0063\u006d":if len (_aae .Params )!=6{return _ed ;};_afd ,_caa :=_cb .GetNumbersAsFloat (_aae .Params );if _caa !=nil {return _caa ;};_eef :=_af .NewMatrix (_afd [0],_afd [1],_afd [2],_afd [3],_afd [4],_afd [5]);_ca .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_eef );_fg .SetMatrix (_fg .Matrix ().Mult (_eef ));_ef :=(_cab .CTM .ScalingFactorX ()+_cab .CTM .ScalingFactorY ())/2.0;_fg .SetLineWidth (_ef *_fg .LineWidth ());case "\u0077":if len (_aae .Params )!=1{return _ed ;};_ccd ,_fe :=_cb .GetNumbersAsFloat (_aae .Params );if _fe !=nil {return _fe ;};_bcb :=(_cab .CTM .ScalingFactorX ()+_cab .CTM .ScalingFactorY ())/2.0;_fg .SetLineWidth (_bcb *_ccd [0]);case "\u004a":if len (_aae .Params )!=1{return _ed ;};_cgb ,_ffd :=_cb .GetIntVal (_aae .Params [0]);if !_ffd {return _aea ;};switch _cgb {case 0:_fg .SetLineCap (_ae .LineCapButt );case 1:_fg .SetLineCap (_ae .LineCapRound );case 2:_fg .SetLineCap (_ae .LineCapSquare );default:_ca .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_cgb );return _ed ;};case "\u006a":if len (_aae .Params )!=1{return _ed ;};_cbf ,_cf :=_cb .GetIntVal (_aae .Params [0]);if !_cf {return _aea ;};switch _cbf {case 0:_fg .SetLineJoin (_ae .LineJoinBevel );case 1:_fg .SetLineJoin (_ae .LineJoinRound );case 2:_fg .SetLineJoin (_ae .LineJoinBevel );default:_ca .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_cbf );return _ed ;};case "\u004d":if len (_aae .Params )!=1{return _ed ;};_aegg ,_fa :=_cb .GetNumbersAsFloat (_aae .Params );if _fa !=nil {return _fa ;};_ =_aegg ;_ca .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_aae .Params )!=2{return _ed ;};_fdd ,_gb :=_cb .GetArray (_aae .Params [0]);if !_gb {return _aea ;};_gbf ,_gb :=_cb .GetIntVal (_aae .Params [1]);if !_gb {return _aea ;};_da ,_cge :=_cb .GetNumbersAsFloat (_fdd .Elements ());if _cge !=nil {return _cge ;};_fg .SetDash (_da ...);_ =_gbf ;_ca .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_ca .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_ca .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_aae .Params )!=1{return _ed ;};_ebe ,_gff :=_cb .GetName (_aae .Params [0]);if !_gff {return _aea ;};if _ebe ==nil {return _ed ;};_ffdd ,_gff :=_aaed .GetExtGState (*_ebe );if !_gff {_ca .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_ebe );return _d .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_fdb ,_gff :=_cb .GetDict (_ffdd );if !_gff {_ca .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");return _aea ;};_ca .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_fdb .String ());case "\u006d":if len (_aae .Params )!=2{_ca .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ed );return nil ;};_dff ,_bgc :=_cb .GetNumbersAsFloat (_aae .Params );if _bgc !=nil {return _bgc ;};_ca .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_dff );_fg .NewSubPath ();_fg .MoveTo (_dff [0],_dff [1]);case "\u006c":if len (_aae .Params )!=2{_ca .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ed );return nil ;};_ebce ,_faa :=_cb .GetNumbersAsFloat (_aae .Params );if _faa !=nil {return _faa ;};_fg .LineTo (_ebce [0],_ebce [1]);case "\u0063":if len (_aae .Params )!=6{return _ed ;};_afc ,_eag :=_cb .GetNumbersAsFloat (_aae .Params );if _eag !=nil {return _eag ;};_ca .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_afc );_fg .CubicTo (_afc [0],_afc [1],_afc [2],_afc [3],_afc [4],_afc [5]);case "\u0076","\u0079":if len (_aae .Params )!=4{return _ed ;};_aaedc ,_ecc :=_cb .GetNumbersAsFloat (_aae .Params );if _ecc !=nil {return _ecc ;};_ca .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_aaedc );_fg .QuadraticTo (_aaedc [0],_aaedc [1],_aaedc [2],_aaedc [3]);case "\u0068":_fg .ClosePath ();_fg .NewSubPath ();case "\u0072\u0065":if len (_aae .Params )!=4{return _ed ;};_aef ,_abf :=_cb .GetNumbersAsFloat (_aae .Params );if _abf !=nil {return _abf ;};_fg .DrawRectangle (_aef [0],_aef [1],_aef [2],_aef [3]);_fg .NewSubPath ();case "\u0053":_cgg ,_ba :=_cab .ColorspaceStroking .ColorToRGB (_cab .ColorStroking );if _ba !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ba );return _ba ;};_gdd ,_dee :=_cgg .(*_c .PdfColorDeviceRGB );if !_dee {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ba ;};_fg .SetRGBA (_gdd .R (),_gdd .G (),_gdd .B (),1);_fg .Stroke ();case "\u0073":_dcd ,_eec :=_cab .ColorspaceStroking .ColorToRGB (_cab .ColorStroking );if _eec !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eec );return _eec ;};_bcf ,_dbb :=_dcd .(*_c .PdfColorDeviceRGB );if !_dbb {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _eec ;};_fg .ClosePath ();_fg .NewSubPath ();_fg .SetRGBA (_bcf .R (),_bcf .G (),_bcf .B (),1);_fg .Stroke ();case "\u0066","\u0046":_bcff ,_ebbb :=_cab .ColorspaceNonStroking .ColorToRGB (_cab .ColorNonStroking );if _ebbb !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ebbb );return _ebbb ;};_dgb ,_ebbe :=_bcff .(*_c .PdfColorDeviceRGB );if !_ebbe {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ebbb ;};_fg .SetRGBA (_dgb .R (),_dgb .G (),_dgb .B (),1);_fg .SetFillRule (_ae .FillRuleWinding );_fg .Fill ();case "\u0066\u002a":_gfe ,_ge :=_cab .ColorspaceNonStroking .ColorToRGB (_cab .ColorNonStroking );if _ge !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ge );return _ge ;};_bee ,_bba :=_gfe .(*_c .PdfColorDeviceRGB );if !_bba {_ca .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ge ;};_fg .SetRGBA (_bee .R (),_bee .G (),_bee .B (),1);_fg .SetFillRule (_ae .FillRuleEvenOdd );_fg .Fill ();case "\u0042":_ffca ,_gbe :=_cab .ColorspaceNonStroking .ColorToRGB (_cab .ColorNonStroking );if _gbe !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gbe );return _gbe ;};_eae :=_ffca .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_eae .R (),_eae .G (),_eae .B (),1);_fg .SetFillRule (_ae .FillRuleWinding );_fg .FillPreserve ();_ffca ,_gbe =_cab .ColorspaceStroking .ColorToRGB (_cab .ColorStroking );if _gbe !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gbe );return _gbe ;};_eae =_ffca .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_eae .R (),_eae .G (),_eae .B (),1);_fg .Stroke ();case "\u0042\u002a":_bab ,_ddae :=_cab .ColorspaceNonStroking .ColorToRGB (_cab .ColorNonStroking );if _ddae !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddae );return _ddae ;};_eea :=_bab .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_eea .R (),_eea .G (),_eea .B (),1);_fg .SetFillRule (_ae .FillRuleEvenOdd );_fg .FillPreserve ();_bab ,_ddae =_cab .ColorspaceStroking .ColorToRGB (_cab .ColorStroking );if _ddae !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ddae );return _ddae ;};_eea =_bab .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_eea .R (),_eea .G (),_eea .B (),1);_fg .Stroke ();case "\u0062":_edb ,_bgd :=_cab .ColorspaceNonStroking .ColorToRGB (_cab .ColorNonStroking );if _bgd !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bgd );return _bgd ;};_afce :=_edb .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_afce .R (),_afce .G (),_afce .B (),1);_fg .ClosePath ();_fg .NewSubPath ();_fg .SetFillRule (_ae .FillRuleWinding );_fg .FillPreserve ();_edb ,_bgd =_cab .ColorspaceStroking .ColorToRGB (_cab .ColorStroking );if _bgd !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bgd );return _bgd ;};_afce =_edb .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_afce .R (),_afce .G (),_afce .B (),1);_fg .Stroke ();case "\u0062\u002a":_fg .ClosePath ();_bfc ,_ggf :=_cab .ColorspaceNonStroking .ColorToRGB (_cab .ColorNonStroking );if _ggf !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ggf );return _ggf ;};_bad :=_bfc .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_bad .R (),_bad .G (),_bad .B (),1);_fg .NewSubPath ();_fg .SetFillRule (_ae .FillRuleEvenOdd );_fg .FillPreserve ();_bfc ,_ggf =_cab .ColorspaceStroking .ColorToRGB (_cab .ColorStroking );if _ggf !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ggf );return _ggf ;};_bad =_bfc .(*_c .PdfColorDeviceRGB );_fg .SetRGBA (_bad .R (),_bad .G (),_bad .B (),1);_fg .Stroke ();case "\u006e":_fg .ClearPath ();case "\u0057":_fg .SetFillRule (_ae .FillRuleWinding );_fg .ClipPreserve ();case "\u0057\u002a":_fg .SetFillRule (_ae .FillRuleEvenOdd );_fg .ClipPreserve ();case "\u0072\u0067":_bag ,_fee :=_cab .ColorNonStroking .(*_c .PdfColorDeviceRGB );if !_fee {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorNonStroking );return nil ;};_fg .SetFillRGBA (_bag .R (),_bag .G (),_bag .B (),1);case "\u0052\u0047":_beb ,_ac :=_cab .ColorStroking .(*_c .PdfColorDeviceRGB );if !_ac {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorStroking );return nil ;};_fg .SetStrokeRGBA (_beb .R (),_beb .G (),_beb .B (),1);case "\u006b":_efd ,_fga :=_cab .ColorNonStroking .(*_c .PdfColorDeviceCMYK );if !_fga {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorNonStroking );return nil ;};_bac ,_gga :=_cab .ColorspaceNonStroking .ColorToRGB (_efd );if _gga !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorNonStroking );return nil ;};_gce ,_fga :=_bac .(*_c .PdfColorDeviceRGB );if !_fga {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bac );return nil ;};_fg .SetFillRGBA (_gce .R (),_gce .G (),_gce .B (),1);case "\u004b":_eac ,_aec :=_cab .ColorStroking .(*_c .PdfColorDeviceCMYK );if !_aec {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorStroking );return nil ;};_fac ,_caf :=_cab .ColorspaceStroking .ColorToRGB (_eac );if _caf !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorStroking );return nil ;};_cce ,_aec :=_fac .(*_c .PdfColorDeviceRGB );if !_aec {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fac );return nil ;};_fg .SetStrokeRGBA (_cce .R (),_cce .G (),_cce .B (),1);case "\u0067":_ce ,_aad :=_cab .ColorNonStroking .(*_c .PdfColorDeviceGray );if !_aad {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorNonStroking );return nil ;};_dfg ,_baf :=_cab .ColorspaceNonStroking .ColorToRGB (_ce );if _baf !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorNonStroking );return nil ;};_eg ,_aad :=_dfg .(*_c .PdfColorDeviceRGB );if !_aad {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dfg );return nil ;};_fg .SetFillRGBA (_eg .R (),_eg .G (),_eg .B (),1);case "\u0047":_gee ,_ffdc :=_cab .ColorStroking .(*_c .PdfColorDeviceGray );if !_ffdc {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorStroking );return nil ;};_bebf ,_abg :=_cab .ColorspaceStroking .ColorToRGB (_gee );if _abg !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorStroking );return nil ;};_bfbb ,_ffdc :=_bebf .(*_c .PdfColorDeviceRGB );if !_ffdc {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bebf );return nil ;};_fg .SetStrokeRGBA (_bfbb .R (),_bfbb .G (),_bfbb .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_dcc ,_bd :=_cab .ColorspaceNonStroking .ColorToRGB (_cab .ColorNonStroking );if _bd !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorNonStroking );return nil ;};_gfd ,_fgg :=_dcc .(*_c .PdfColorDeviceRGB );if !_fgg {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dcc );return nil ;};_fg .SetFillRGBA (_gfd .R (),_gfd .G (),_gfd .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_eaa ,_efb :=_cab .ColorspaceStroking .ColorToRGB (_cab .ColorStroking );if _efb !=nil {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cab .ColorStroking );return nil ;};_eagg ,_geg :=_eaa .(*_c .PdfColorDeviceRGB );if !_geg {_ca .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eaa );return nil ;};_fg .SetStrokeRGBA (_eagg .R (),_eagg .G (),_eagg .B (),1);case "\u0044\u006f":if len (_aae .Params )!=1{return _ed ;};_dfa ,_edd :=_cb .GetName (_aae .Params [0]);if !_edd {return _aea ;};_ ,_cd :=_aaed .GetXObjectByName (*_dfa );switch _cd {case _c .XObjectTypeImage :_ca .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_dfa .String ());_cff ,_dad :=_aaed .GetXObjectImageByName (*_dfa );if _dad !=nil {return _dad ;};_fde ,_dad :=_cff .ToImage ();if _dad !=nil {return _dad ;};_cgf ,_dad :=_fde .ToGoImage ();if _dad !=nil {return _dad ;};_eed :=_cgf .Bounds ();_fg .Push ();_fg .Scale (1.0/float64 (_eed .Dx ()),-1.0/float64 (_eed .Dy ()));_fg .DrawImageAnchored (_cgf ,0,0,0,1);_fg .Pop ();case _c .XObjectTypeForm :_ca .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_dfa .String ());_gdg ,_fc :=_aaed .GetXObjectFormByName (*_dfa );if _fc !=nil {return _fc ;};_eagc ,_fc :=_gdg .GetContentStream ();if _fc !=nil {return _fc ;};_ggaf :=_gdg .Resources ;if _ggaf ==nil {_ggaf =_aaed ;};_fg .Push ();if _gdg .Matrix !=nil {_cggf ,_eddg :=_cb .GetArray (_gdg .Matrix );if !_eddg {return _aea ;};_ebae ,_eeb :=_cb .GetNumbersAsFloat (_cggf .Elements ());if _eeb !=nil {return _eeb ;};if len (_ebae )!=6{return _ed ;};_cdd :=_af .NewMatrix (_ebae [0],_ebae [1],_ebae [2],_ebae [3],_ebae [4],_ebae [5]);_fg .SetMatrix (_fg .Matrix ().Mult (_cdd ));};if _gdg .BBox !=nil {_egb ,_ddc :=_cb .GetArray (_gdg .BBox );if !_ddc {return _aea ;};_baa ,_ecd :=_cb .GetNumbersAsFloat (_egb .Elements ());if _ecd !=nil {return _ecd ;};if len (_baa )!=4{_ca .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_baa ));return _ed ;};_fg .DrawRectangle (_baa [0],_baa [1],_baa [2]-_baa [0],_baa [3]-_baa [1]);_fg .SetRGBA (1,0,0,1);_fg .Clip ();}else {_ca .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");};_fc =_ebba .renderContentStream (_fg ,string (_eagc ),_ggaf );if _fc !=nil {return _fc ;};_fg .Pop ();};case "\u0042\u0049":if len (_aae .Params )!=1{return _ed ;};_ffg ,_gdc :=_aae .Params [0].(*_gd .ContentStreamInlineImage );if !_gdc {return nil ;};_aegge ,_eaee :=_ffg .ToImage (_aaed );if _eaee !=nil {return _eaee ;};_fb ,_eaee :=_aegge .ToGoImage ();if _eaee !=nil {return _eaee ;};_acb :=_fb .Bounds ();_fg .Push ();_fg .Scale (1.0/float64 (_acb .Dx ()),-1.0/float64 (_acb .Dy ()));_fg .DrawImageAnchored (_fb ,0,0,0,1);_fg .Pop ();case "\u0042\u0054":_gaa .Reset ();case "\u0045\u0054":_gaa .Reset ();case "\u0054\u004c":if len (_aae .Params )!=1{return _ed ;};_eacc ,_cggd :=_cb .GetNumberAsFloat (_aae .Params [0]);if _cggd !=nil {return _cggd ;};_gaa .Tl =_eacc ;case "\u0054\u0063":if len (_aae .Params )!=1{return _ed ;};_dfc ,_bagf :=_cb .GetNumberAsFloat (_aae .Params [0]);if _bagf !=nil {return _bagf ;};_gaa .Tc =_dfc ;case "\u0054\u0077":if len (_aae .Params )!=1{return _ed ;};_abe ,_eaeb :=_cb .GetNumberAsFloat (_aae .Params [0]);if _eaeb !=nil {return _eaeb ;};_gaa .Tw =_abe ;case "\u0054\u007a":if len (_aae .Params )!=1{return _ed ;};_bgb ,_dde :=_cb .GetNumberAsFloat (_aae .Params [0]);if _dde !=nil {return _dde ;};_gaa .Th =_bgb ;case "\u0054\u0073":if len (_aae .Params )!=1{return _ed ;};_feg ,_aff :=_cb .GetNumberAsFloat (_aae .Params [0]);if _aff !=nil {return _aff ;};_gaa .Ts =_feg ;case "\u0054\u0064":if len (_aae .Params )!=2{return _ed ;};_eeg ,_ffb :=_cb .GetNumbersAsFloat (_aae .Params );if _ffb !=nil {return _ffb ;};_ca .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_eeg );_gaa .ProcTd (_eeg [0],_eeg [1]);case "\u0054\u0044":if len (_aae .Params )!=2{return _ed ;};_gege ,_cdda :=_cb .GetNumbersAsFloat (_aae .Params );if _cdda !=nil {return _cdda ;};_ca .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_gege );_gaa .ProcTD (_gege [0],_gege [1]);case "\u0054\u002a":_gaa .ProcTStar ();case "\u0054\u006d":if len (_aae .Params )!=6{return _ed ;};_bfa ,_afe :=_cb .GetNumbersAsFloat (_aae .Params );if _afe !=nil {return _afe ;};_ca .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_bfa );_gaa .ProcTm (_bfa [0],_bfa [1],_bfa [2],_bfa [3],_bfa [4],_bfa [5]);case "\u0027":if len (_aae .Params )!=1{return _ed ;};_bdd ,_dgc :=_cb .GetStringBytes (_aae .Params [0]);if !_dgc {return _aea ;};_ca .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_bdd ));_gaa .ProcQ (_bdd ,_fg );case "\u0022":if len (_aae .Params )!=3{return _ed ;};_ece ,_bce :=_cb .GetNumberAsFloat (_aae .Params [0]);if _bce !=nil {return _bce ;};_eagb ,_bce :=_cb .GetNumberAsFloat (_aae .Params [1]);if _bce !=nil {return _bce ;};_gca ,_gdf :=_cb .GetStringBytes (_aae .Params [2]);if !_gdf {return _aea ;};_gaa .ProcDQ (_gca ,_ece ,_eagb ,_fg );case "\u0054\u006a":if len (_aae .Params )!=1{return _ed ;};_cabb ,_bde :=_cb .GetStringBytes (_aae .Params [0]);if !_bde {return _aea ;};_ca .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_cabb ));_gaa .ProcTj (_cabb ,_fg );case "\u0054\u004a":if len (_aae .Params )!=1{return _ed ;};_egf ,_aaf :=_cb .GetArray (_aae .Params [0]);if !_aaf {_ca .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_egf );return _aea ;};_ca .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_egf );for _ ,_fgab :=range _egf .Elements (){switch _fff :=_fgab .(type ){case *_cb .PdfObjectString :if _fff !=nil {_gaa .ProcTj (_fff .Bytes (),_fg );};case *_cb .PdfObjectFloat ,*_cb .PdfObjectInteger :_edbb ,_afea :=_cb .GetNumberAsFloat (_fff );if _afea ==nil {_gaa .Translate (-_edbb *0.001*_gaa .Tf .Size ,0);};};};case "\u0054\u0066":if len (_aae .Params )!=2{return _ed ;};_ca .Log .Debug ("\u0025\u0023\u0076",_aae .Params );_ddca ,_fbc :=_cb .GetName (_aae .Params [0]);if !_fbc ||_ddca ==nil {_ca .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_aae .Params [0]);return _aea ;};_ca .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_ddca .String ());_gef ,_afeb :=_cb .GetNumberAsFloat (_aae .Params [1]);if _afeb !=nil {_ca .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_aae .Params [1]);return _aea ;};_ca .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_gef );_cdc ,_ggab :=_aaed .GetFontByName (*_ddca );if !_ggab {_ca .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_ddca .String ());return _d .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_ca .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_cdc );_aca ,_fbc :=_cb .GetDict (_cdc );if !_fbc {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");return _aea ;};_ddaa ,_afeb :=_c .NewPdfFontFromPdfObject (_aca );if _afeb !=nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");return _afeb ;};_fad :=_ddaa .BaseFont ();if _fad ==""{_fad =_ddca .String ();};_cbg ,_fbc :=_ec [_fad ];if !_fbc {_cbg ,_afeb =_ae .NewTextFont (_ddaa ,_gef );if _afeb !=nil {_ca .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_afeb );};};if _cbg ==nil {if len (_fad )> 7&&_fad [6]=='+'{_fad =_fad [7:];};_cfd :=[]string {_fad ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_ege :=range _cfd {_ca .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_ege );if _cbg ,_fbc =_ec [_ege ];_fbc {break ;};_edf :=_ddd .Match (_ege );if _edf ==nil {_ca .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_ege );continue ;};_cbg ,_afeb =_ae .NewTextFontFromPath (_edf .Filename ,_gef );if _afeb !=nil {_ca .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_edf .Filename );continue ;};_ca .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_fad ,_edf .Name ,_edf .Filename );_ec [_ege ]=_cbg ;break ;};};if _cbg ==nil {_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");return _d .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_gaa .ProcTf (_cbg .WithSize (_gef ,_ddaa ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_ca .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_aae .Operand );};return nil ;});_gf =_ffc .Process (_gg );if _gf !=nil {return _gf ;};return nil ;};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer };func (_ff renderer )renderPage (_gcd _ae .Context ,_aa *_c .PdfPage )error {_eba ,_db :=_aa .GetAllContentStreams ();if _db !=nil {return _db ;};_gcd .Translate (0,float64 (_gcd .Height ()));_gcd .Scale (1,-1);_gcd .Push ();_gcd .SetRGBA (1,1,1,1);_gcd .DrawRectangle (0,0,float64 (_gcd .Width ()),float64 (_gcd .Height ()));_gcd .Fill ();_gcd .Pop ();_gcd .SetLineWidth (1.0);_gcd .SetRGBA (0,0,0,1);return _ff .renderContentStream (_gcd ,_eba ,_aa .Resources );};