//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_c "errors";_e "fmt";_bg "github.com/adrg/sysfont";_fcd "github.com/unidoc/unipdf/v3/common";_fb "github.com/unidoc/unipdf/v3/contentstream";_ed "github.com/unidoc/unipdf/v3/core";_ac "github.com/unidoc/unipdf/v3/internal/transform";_d "github.com/unidoc/unipdf/v3/model";_aa "github.com/unidoc/unipdf/v3/render/internal/context";_g "github.com/unidoc/unipdf/v3/render/internal/context/imagerender";_bc "image";_fc "image/draw";_ae "image/jpeg";_b "image/png";_cg "os";_f "path/filepath";_ab "strings";);

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {return &ImageDevice {}};type renderer struct{};func (_gee renderer )renderContentStream (_afb _aa .Context ,_eg string ,_bgd *_d .PdfPageResources )error {_egf ,_bf :=_fb .NewContentStreamParser (_eg ).Parse ();if _bf !=nil {return _bf ;};_gb :=_afb .TextState ();_be :=map[string ]*_aa .TextFont {};_cb :=_bg .NewFinder (&_bg .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});_ag :=_fb .NewContentStreamProcessor (*_egf );_ag .AddHandler (_fb .HandlerConditionEnumAllOperands ,"",func (_bda *_fb .ContentStreamOperation ,_gdc _fb .GraphicsState ,_cc *_d .PdfPageResources )error {_fcd .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_bda .Operand );switch _bda .Operand {case "\u0071":_afb .Push ();case "\u0051":_afb .Pop ();case "\u0063\u006d":if len (_bda .Params )!=6{return _cfd ;};_cd ,_egg :=_ed .GetNumbersAsFloat (_bda .Params );if _egg !=nil {return _egg ;};_edc :=_ac .NewMatrix (_cd [0],_cd [1],_cd [2],_cd [3],_cd [4],_cd [5]);_fcd .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_edc );_afb .SetMatrix (_afb .Matrix ().Mult (_edc ));_bbg :=(_gdc .CTM .ScalingFactorX ()+_gdc .CTM .ScalingFactorY ())/2.0;_afb .SetLineWidth (_bbg *_afb .LineWidth ());case "\u0077":if len (_bda .Params )!=1{return _cfd ;};_fe ,_fef :=_ed .GetNumbersAsFloat (_bda .Params );if _fef !=nil {return _fef ;};_cdf :=(_gdc .CTM .ScalingFactorX ()+_gdc .CTM .ScalingFactorY ())/2.0;_afb .SetLineWidth (_cdf *_fe [0]);case "\u004a":if len (_bda .Params )!=1{return _cfd ;};_fbe ,_cfge :=_ed .GetIntVal (_bda .Params [0]);if !_cfge {return _geg ;};switch _fbe {case 0:_afb .SetLineCap (_aa .LineCapButt );case 1:_afb .SetLineCap (_aa .LineCapRound );case 2:_afb .SetLineCap (_aa .LineCapSquare );default:_fcd .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_fbe );return _cfd ;};case "\u006a":if len (_bda .Params )!=1{return _cfd ;};_abg ,_cfc :=_ed .GetIntVal (_bda .Params [0]);if !_cfc {return _geg ;};switch _abg {case 0:_afb .SetLineJoin (_aa .LineJoinBevel );case 1:_afb .SetLineJoin (_aa .LineJoinRound );case 2:_afb .SetLineJoin (_aa .LineJoinBevel );default:_fcd .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_abg );return _cfd ;};case "\u004d":if len (_bda .Params )!=1{return _cfd ;};_dbd ,_ca :=_ed .GetNumbersAsFloat (_bda .Params );if _ca !=nil {return _ca ;};_ =_dbd ;_fcd .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_bda .Params )!=2{return _cfd ;};_fa ,_bcd :=_ed .GetArray (_bda .Params [0]);if !_bcd {return _geg ;};_efb ,_bcd :=_ed .GetIntVal (_bda .Params [1]);if !_bcd {return _geg ;};_gda ,_cbc :=_ed .GetNumbersAsFloat (_fa .Elements ());if _cbc !=nil {return _cbc ;};_afb .SetDash (_gda ...);_ =_efb ;_fcd .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_fcd .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0069":_fcd .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_bda .Params )!=1{return _cfd ;};_edce ,_fdf :=_ed .GetName (_bda .Params [0]);if !_fdf {return _geg ;};if _edce ==nil {return _cfd ;};_abe ,_fdf :=_cc .GetExtGState (*_edce );if !_fdf {_fcd .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_edce );return _c .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_aaf ,_fdf :=_ed .GetDict (_abe );if !_fdf {_fcd .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");return _geg ;};_fcd .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_aaf .String ());case "\u006d":if len (_bda .Params )!=2{_fcd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cfd );return nil ;};_eff ,_ba :=_ed .GetNumbersAsFloat (_bda .Params );if _ba !=nil {return _ba ;};_fcd .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_eff );_afb .NewSubPath ();_afb .MoveTo (_eff [0],_eff [1]);case "\u006c":if len (_bda .Params )!=2{_fcd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_cfd );return nil ;};_da ,_efbd :=_ed .GetNumbersAsFloat (_bda .Params );if _efbd !=nil {return _efbd ;};_afb .LineTo (_da [0],_da [1]);case "\u0063":if len (_bda .Params )!=6{return _cfd ;};_aea ,_aaa :=_ed .GetNumbersAsFloat (_bda .Params );if _aaa !=nil {return _aaa ;};_fcd .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_aea );_afb .CubicTo (_aea [0],_aea [1],_aea [2],_aea [3],_aea [4],_aea [5]);case "\u0076","\u0079":if len (_bda .Params )!=4{return _cfd ;};_fdg ,_fca :=_ed .GetNumbersAsFloat (_bda .Params );if _fca !=nil {return _fca ;};_fcd .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_fdg );_afb .QuadraticTo (_fdg [0],_fdg [1],_fdg [2],_fdg [3]);case "\u0068":_afb .ClosePath ();_afb .NewSubPath ();case "\u0072\u0065":if len (_bda .Params )!=4{return _cfd ;};_ffc ,_cff :=_ed .GetNumbersAsFloat (_bda .Params );if _cff !=nil {return _cff ;};_afb .DrawRectangle (_ffc [0],_ffc [1],_ffc [2],_ffc [3]);_afb .NewSubPath ();case "\u0053":_cab ,_eb :=_gdc .ColorspaceStroking .ColorToRGB (_gdc .ColorStroking );if _eb !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_eb );return _eb ;};_bceg ,_gae :=_cab .(*_d .PdfColorDeviceRGB );if !_gae {_fcd .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _eb ;};_afb .SetRGBA (_bceg .R (),_bceg .G (),_bceg .B (),1);_afb .Stroke ();case "\u0073":_afa ,_egd :=_gdc .ColorspaceStroking .ColorToRGB (_gdc .ColorStroking );if _egd !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_egd );return _egd ;};_eca ,_abeg :=_afa .(*_d .PdfColorDeviceRGB );if !_abeg {_fcd .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _egd ;};_afb .ClosePath ();_afb .NewSubPath ();_afb .SetRGBA (_eca .R (),_eca .G (),_eca .B (),1);_afb .Stroke ();case "\u0066","\u0046":_fdd ,_dc :=_gdc .ColorspaceNonStroking .ColorToRGB (_gdc .ColorNonStroking );if _dc !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dc );return _dc ;};_bbb ,_cgb :=_fdd .(*_d .PdfColorDeviceRGB );if !_cgb {_fcd .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _dc ;};_afb .SetRGBA (_bbb .R (),_bbb .G (),_bbb .B (),1);_afb .SetFillRule (_aa .FillRuleWinding );_afb .Fill ();case "\u0066\u002a":_bdd ,_gegb :=_gdc .ColorspaceNonStroking .ColorToRGB (_gdc .ColorNonStroking );if _gegb !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gegb );return _gegb ;};_eda ,_gag :=_bdd .(*_d .PdfColorDeviceRGB );if !_gag {_fcd .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _gegb ;};_afb .SetRGBA (_eda .R (),_eda .G (),_eda .B (),1);_afb .SetFillRule (_aa .FillRuleEvenOdd );_afb .Fill ();case "\u0042":_fcgd ,_fea :=_gdc .ColorspaceNonStroking .ColorToRGB (_gdc .ColorNonStroking );if _fea !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fea );return _fea ;};_bbba :=_fcgd .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_bbba .R (),_bbba .G (),_bbba .B (),1);_afb .SetFillRule (_aa .FillRuleWinding );_afb .FillPreserve ();_fcgd ,_fea =_gdc .ColorspaceStroking .ColorToRGB (_gdc .ColorStroking );if _fea !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fea );return _fea ;};_bbba =_fcgd .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_bbba .R (),_bbba .G (),_bbba .B (),1);_afb .Stroke ();case "\u0042\u002a":_ecd ,_bea :=_gdc .ColorspaceNonStroking .ColorToRGB (_gdc .ColorNonStroking );if _bea !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bea );return _bea ;};_agc :=_ecd .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_agc .R (),_agc .G (),_agc .B (),1);_afb .SetFillRule (_aa .FillRuleEvenOdd );_afb .FillPreserve ();_ecd ,_bea =_gdc .ColorspaceStroking .ColorToRGB (_gdc .ColorStroking );if _bea !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bea );return _bea ;};_agc =_ecd .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_agc .R (),_agc .G (),_agc .B (),1);_afb .Stroke ();case "\u0062":_gdf ,_bbgc :=_gdc .ColorspaceNonStroking .ColorToRGB (_gdc .ColorNonStroking );if _bbgc !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbgc );return _bbgc ;};_acb :=_gdf .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_acb .R (),_acb .G (),_acb .B (),1);_afb .ClosePath ();_afb .NewSubPath ();_afb .SetFillRule (_aa .FillRuleWinding );_afb .FillPreserve ();_gdf ,_bbgc =_gdc .ColorspaceStroking .ColorToRGB (_gdc .ColorStroking );if _bbgc !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbgc );return _bbgc ;};_acb =_gdf .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_acb .R (),_acb .G (),_acb .B (),1);_afb .Stroke ();case "\u0062\u002a":_afb .ClosePath ();_add ,_gfc :=_gdc .ColorspaceNonStroking .ColorToRGB (_gdc .ColorNonStroking );if _gfc !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gfc );return _gfc ;};_eec :=_add .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_eec .R (),_eec .G (),_eec .B (),1);_afb .NewSubPath ();_afb .SetFillRule (_aa .FillRuleEvenOdd );_afb .FillPreserve ();_add ,_gfc =_gdc .ColorspaceStroking .ColorToRGB (_gdc .ColorStroking );if _gfc !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gfc );return _gfc ;};_eec =_add .(*_d .PdfColorDeviceRGB );_afb .SetRGBA (_eec .R (),_eec .G (),_eec .B (),1);_afb .Stroke ();case "\u006e":_afb .ClearPath ();case "\u0057":_afb .SetFillRule (_aa .FillRuleWinding );_afb .ClipPreserve ();case "\u0057\u002a":_afb .SetFillRule (_aa .FillRuleEvenOdd );_afb .ClipPreserve ();case "\u0072\u0067":_ecg ,_cbb :=_gdc .ColorNonStroking .(*_d .PdfColorDeviceRGB );if !_cbb {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorNonStroking );return nil ;};_afb .SetFillRGBA (_ecg .R (),_ecg .G (),_ecg .B (),1);case "\u0052\u0047":_cbf ,_dd :=_gdc .ColorStroking .(*_d .PdfColorDeviceRGB );if !_dd {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorStroking );return nil ;};_afb .SetStrokeRGBA (_cbf .R (),_cbf .G (),_cbf .B (),1);case "\u006b":_ecf ,_ecfb :=_gdc .ColorNonStroking .(*_d .PdfColorDeviceCMYK );if !_ecfb {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorNonStroking );return nil ;};_ffg ,_acf :=_gdc .ColorspaceNonStroking .ColorToRGB (_ecf );if _acf !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorNonStroking );return nil ;};_bcdc ,_ecfb :=_ffg .(*_d .PdfColorDeviceRGB );if !_ecfb {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ffg );return nil ;};_afb .SetFillRGBA (_bcdc .R (),_bcdc .G (),_bcdc .B (),1);case "\u004b":_bcc ,_bge :=_gdc .ColorStroking .(*_d .PdfColorDeviceCMYK );if !_bge {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorStroking );return nil ;};_gg ,_cbd :=_gdc .ColorspaceStroking .ColorToRGB (_bcc );if _cbd !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorStroking );return nil ;};_aad ,_bge :=_gg .(*_d .PdfColorDeviceRGB );if !_bge {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gg );return nil ;};_afb .SetStrokeRGBA (_aad .R (),_aad .G (),_aad .B (),1);case "\u0067":_ggc ,_beg :=_gdc .ColorNonStroking .(*_d .PdfColorDeviceGray );if !_beg {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorNonStroking );return nil ;};_adg ,_ecc :=_gdc .ColorspaceNonStroking .ColorToRGB (_ggc );if _ecc !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorNonStroking );return nil ;};_ecgg ,_beg :=_adg .(*_d .PdfColorDeviceRGB );if !_beg {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_adg );return nil ;};_afb .SetFillRGBA (_ecgg .R (),_ecgg .G (),_ecgg .B (),1);case "\u0047":_cffb ,_daa :=_gdc .ColorStroking .(*_d .PdfColorDeviceGray );if !_daa {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorStroking );return nil ;};_fdgg ,_dae :=_gdc .ColorspaceStroking .ColorToRGB (_cffb );if _dae !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorStroking );return nil ;};_fbc ,_daa :=_fdgg .(*_d .PdfColorDeviceRGB );if !_daa {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fdgg );return nil ;};_afb .SetStrokeRGBA (_fbc .R (),_fbc .G (),_fbc .B (),1);case "\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_gba ,_dff :=_gdc .ColorspaceNonStroking .ColorToRGB (_gdc .ColorNonStroking );if _dff !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorNonStroking );return nil ;};_gfb ,_fcbe :=_gba .(*_d .PdfColorDeviceRGB );if !_fcbe {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gba );return nil ;};_afb .SetFillRGBA (_gfb .R (),_gfb .G (),_gfb .B (),1);case "\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_ggg ,_ddc :=_gdc .ColorspaceStroking .ColorToRGB (_gdc .ColorStroking );if _ddc !=nil {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdc .ColorStroking );return nil ;};_abc ,_begg :=_ggg .(*_d .PdfColorDeviceRGB );if !_begg {_fcd .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ggg );return nil ;};_afb .SetStrokeRGBA (_abc .R (),_abc .G (),_abc .B (),1);case "\u0044\u006f":if len (_bda .Params )!=1{return _cfd ;};_fed ,_aeb :=_ed .GetName (_bda .Params [0]);if !_aeb {return _geg ;};_ ,_fcgb :=_cc .GetXObjectByName (*_fed );switch _fcgb {case _d .XObjectTypeImage :_fcd .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_fed .String ());_afbg ,_bba :=_cc .GetXObjectImageByName (*_fed );if _bba !=nil {return _bba ;};_agg ,_bba :=_afbg .ToImage ();if _bba !=nil {return _bba ;};_dea ,_bba :=_agg .ToGoImage ();if _bba !=nil {return _bba ;};_gbad :=_dea .Bounds ();_afb .Push ();_afb .Scale (1.0/float64 (_gbad .Dx ()),-1.0/float64 (_gbad .Dy ()));_afb .DrawImageAnchored (_dea ,0,0,0,1);_afb .Pop ();case _d .XObjectTypeForm :_fcd .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_fed .String ());_cgaf ,_geeg :=_cc .GetXObjectFormByName (*_fed );if _geeg !=nil {return _geeg ;};_feb ,_geeg :=_cgaf .GetContentStream ();if _geeg !=nil {return _geeg ;};_afae :=_cgaf .Resources ;if _afae ==nil {_afae =_cc ;};_afb .Push ();if _cgaf .Matrix !=nil {_ccb ,_faa :=_ed .GetArray (_cgaf .Matrix );if !_faa {return _geg ;};_fbb ,_abcb :=_ed .GetNumbersAsFloat (_ccb .Elements ());if _abcb !=nil {return _abcb ;};if len (_fbb )!=6{return _cfd ;};_daf :=_ac .NewMatrix (_fbb [0],_fbb [1],_fbb [2],_fbb [3],_fbb [4],_fbb [5]);_afb .SetMatrix (_afb .Matrix ().Mult (_daf ));};if _cgaf .BBox !=nil {_ccc ,_eecg :=_ed .GetArray (_cgaf .BBox );if !_eecg {return _geg ;};_bgde ,_dbc :=_ed .GetNumbersAsFloat (_ccc .Elements ());if _dbc !=nil {return _dbc ;};if len (_bgde )!=4{_fcd .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_bgde ));return _cfd ;};_afb .DrawRectangle (_bgde [0],_bgde [1],_bgde [2]-_bgde [0],_bgde [3]-_bgde [1]);_afb .SetRGBA (1,0,0,1);_afb .Clip ();}else {_fcd .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");};_geeg =_gee .renderContentStream (_afb ,string (_feb ),_afae );if _geeg !=nil {return _geeg ;};_afb .Pop ();};case "\u0042\u0049":if len (_bda .Params )!=1{return _cfd ;};_afba ,_fac :=_bda .Params [0].(*_fb .ContentStreamInlineImage );if !_fac {return nil ;};_ebd ,_ccca :=_afba .ToImage (_cc );if _ccca !=nil {return _ccca ;};_dag ,_ccca :=_ebd .ToGoImage ();if _ccca !=nil {return _ccca ;};_bac :=_dag .Bounds ();_afb .Push ();_afb .Scale (1.0/float64 (_bac .Dx ()),-1.0/float64 (_bac .Dy ()));_afb .DrawImageAnchored (_dag ,0,0,0,1);_afb .Pop ();case "\u0042\u0054":_gb .Reset ();case "\u0045\u0054":_gb .Reset ();case "\u0054\u004c":if len (_bda .Params )!=1{return _cfd ;};_gbd ,_gaea :=_ed .GetNumberAsFloat (_bda .Params [0]);if _gaea !=nil {return _gaea ;};_gb .Tl =_gbd ;case "\u0054\u0063":if len (_bda .Params )!=1{return _cfd ;};_dead ,_dcc :=_ed .GetNumberAsFloat (_bda .Params [0]);if _dcc !=nil {return _dcc ;};_gb .Tc =_dead ;case "\u0054\u0077":if len (_bda .Params )!=1{return _cfd ;};_cad ,_bcb :=_ed .GetNumberAsFloat (_bda .Params [0]);if _bcb !=nil {return _bcb ;};_gb .Tw =_cad ;case "\u0054\u007a":if len (_bda .Params )!=1{return _cfd ;};_afgd ,_gfbc :=_ed .GetNumberAsFloat (_bda .Params [0]);if _gfbc !=nil {return _gfbc ;};_gb .Th =_afgd ;case "\u0054\u0073":if len (_bda .Params )!=1{return _cfd ;};_cbcf ,_ede :=_ed .GetNumberAsFloat (_bda .Params [0]);if _ede !=nil {return _ede ;};_gb .Ts =_cbcf ;case "\u0054\u0064":if len (_bda .Params )!=2{return _cfd ;};_aec ,_bga :=_ed .GetNumbersAsFloat (_bda .Params );if _bga !=nil {return _bga ;};_fcd .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_aec );_gb .ProcTd (_aec [0],_aec [1]);case "\u0054\u0044":if len (_bda .Params )!=2{return _cfd ;};_cabd ,_gdb :=_ed .GetNumbersAsFloat (_bda .Params );if _gdb !=nil {return _gdb ;};_fcd .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_cabd );_gb .ProcTD (_cabd [0],_cabd [1]);case "\u0054\u002a":_gb .ProcTStar ();case "\u0054\u006d":if len (_bda .Params )!=6{return _cfd ;};_gege ,_eeg :=_ed .GetNumbersAsFloat (_bda .Params );if _eeg !=nil {return _eeg ;};_fcd .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_gege );_gb .ProcTm (_gege [0],_gege [1],_gege [2],_gege [3],_gege [4],_gege [5]);case "\u0027":if len (_bda .Params )!=1{return _cfd ;};_cbff ,_dce :=_ed .GetStringBytes (_bda .Params [0]);if !_dce {return _geg ;};_fcd .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_cbff ));_gb .ProcQ (_cbff ,_afb );case "\u0022":if len (_bda .Params )!=3{return _cfd ;};_cda ,_ffgd :=_ed .GetNumberAsFloat (_bda .Params [0]);if _ffgd !=nil {return _ffgd ;};_dda ,_ffgd :=_ed .GetNumberAsFloat (_bda .Params [1]);if _ffgd !=nil {return _ffgd ;};_gc ,_bdb :=_ed .GetStringBytes (_bda .Params [2]);if !_bdb {return _geg ;};_gb .ProcDQ (_gc ,_cda ,_dda ,_afb );case "\u0054\u006a":if len (_bda .Params )!=1{return _cfd ;};_ea ,_cbce :=_ed .GetStringBytes (_bda .Params [0]);if !_cbce {return _geg ;};_fcd .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_ea ));_gb .ProcTj (_ea ,_afb );case "\u0054\u004a":if len (_bda .Params )!=1{return _cfd ;};_dgc ,_fff :=_ed .GetArray (_bda .Params [0]);if !_fff {_fcd .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_dgc );return _geg ;};_fcd .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_dgc );for _ ,_cbfb :=range _dgc .Elements (){switch _cee :=_cbfb .(type ){case *_ed .PdfObjectString :if _cee !=nil {_gb .ProcTj (_cee .Bytes (),_afb );};case *_ed .PdfObjectFloat ,*_ed .PdfObjectInteger :_ebe ,_fag :=_ed .GetNumberAsFloat (_cee );if _fag ==nil {_gb .Translate (-_ebe *0.001*_gb .Tf .Size ,0);};};};case "\u0054\u0066":if len (_bda .Params )!=2{return _cfd ;};_fcd .Log .Debug ("\u0025\u0023\u0076",_bda .Params );_cbbc ,_gcf :=_ed .GetName (_bda .Params [0]);if !_gcf ||_cbbc ==nil {_fcd .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_bda .Params [0]);return _geg ;};_fcd .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_cbbc .String ());_bed ,_effb :=_ed .GetNumberAsFloat (_bda .Params [1]);if _effb !=nil {_fcd .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_bda .Params [1]);return _geg ;};_fcd .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_bed );_aggd ,_cdae :=_cc .GetFontByName (*_cbbc );if !_cdae {_fcd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_cbbc .String ());return _c .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_fcd .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_aggd );_cea ,_gcf :=_ed .GetDict (_aggd );if !_gcf {_fcd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");return _geg ;};_dab ,_effb :=_d .NewPdfFontFromPdfObject (_cea );if _effb !=nil {_fcd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");return _effb ;};_cbcb :=_dab .BaseFont ();if _cbcb ==""{_cbcb =_cbbc .String ();};_eag ,_gcf :=_be [_cbcb ];if !_gcf {_eag ,_effb =_aa .NewTextFont (_dab ,_bed );if _effb !=nil {_fcd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_effb );};};if _eag ==nil {if len (_cbcb )> 7&&_cbcb [6]=='+'{_cbcb =_cbcb [7:];};_gbb :=[]string {_cbcb ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};for _ ,_agb :=range _gbb {_fcd .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_agb );if _eag ,_gcf =_be [_agb ];_gcf {break ;};_gcd :=_cb .Match (_agb );if _gcd ==nil {_fcd .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_agb );continue ;};_eag ,_effb =_aa .NewTextFontFromPath (_gcd .Filename ,_bed );if _effb !=nil {_fcd .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_gcd .Filename );continue ;};_fcd .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_cbcb ,_gcd .Name ,_gcd .Filename );_be [_agb ]=_eag ;break ;};};if _eag ==nil {_fcd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");return _c .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_gb .ProcTf (_eag .WithSize (_bed ,_dab ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_fcd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_bda .Operand );};return nil ;});_bf =_ag .Process (_bgd );if _bf !=nil {return _bf ;};return nil ;};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_cfg *ImageDevice )RenderToPath (page *_d .PdfPage ,outputPath string )error {_ee ,_ff :=_cfg .Render (page );if _ff !=nil {return _ff ;};_bde :=_ab .ToLower (_f .Ext (outputPath ));if _bde ==""{return _c .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");};switch _bde {case "\u002e\u0070\u006e\u0067":return _ec (outputPath ,_ee );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _dec (outputPath ,_ee ,100);};return _e .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_bde );};func (_ef renderer )renderPage (_ce _aa .Context ,_afg *_d .PdfPage )error {_gfa ,_fcb :=_afg .GetAllContentStreams ();if _fcb !=nil {return _fcb ;};_ce .Translate (0,float64 (_ce .Height ()));_ce .Scale (1,-1);_ce .Push ();_ce .SetRGBA (1,1,1,1);_ce .DrawRectangle (0,0,float64 (_ce .Width ()),float64 (_ce .Height ()));_ce .Fill ();_ce .Pop ();_ce .SetLineWidth (1.0);_ce .SetRGBA (0,0,0,1);return _ef .renderContentStream (_ce ,_gfa ,_afg .Resources );};var (_geg =_c .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_cfd =_c .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _dec (_dg string ,_bce _bc .Image ,_bdc int )error {_db ,_cga :=_cg .Create (_dg );if _cga !=nil {return _cga ;};defer _db .Close ();return _ae .Encode (_db ,_bce ,&_ae .Options {Quality :_bdc });};

// Render converts the specified PDF page into an image and returns the result.
func (_af *ImageDevice )Render (page *_d .PdfPage )(_bc .Image ,error ){_cf ,_aff :=page .GetMediaBox ();if _aff !=nil {return nil ,_aff ;};_gf ,_fd :=_cf .Llx +_cf .Width (),_cf .Lly +_cf .Height ();_bd :=_g .NewContext (int (_gf ),int (_fd ));if _de :=_af .renderPage (_bd ,page );_de !=nil {return nil ,_de ;};_ad :=_bd .Image ();if _df :=page .CropBox ;_df !=nil {_afe :=_bc .Rect (0,0,int (_df .Width ()),int (_df .Height ()));_ga :=_bc .Pt (int (_df .Llx ),int (_fd -_df .Ury ));_gd :=_bc .NewRGBA (_afe );_fc .Draw (_gd ,_afe ,_ad ,_ga ,_fc .Src );_ad =_gd ;};return _ad ,nil ;};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer };func _ec (_cfe string ,_bb _bc .Image )error {_fce ,_ge :=_cg .Create (_cfe );if _ge !=nil {return _ge ;};defer _fce .Close ();return _b .Encode (_fce ,_bb );};