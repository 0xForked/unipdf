//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_fc "bytes";_b "errors";_a "fmt";_fe "github.com/unidoc/unipdf/v3/common";_cb "github.com/unidoc/unipdf/v3/contentstream";_af "github.com/unidoc/unipdf/v3/core";_bfe "github.com/unidoc/unipdf/v3/internal/license";_dac "github.com/unidoc/unipdf/v3/internal/textencoding";
_cbc "github.com/unidoc/unipdf/v3/internal/transform";_gd "github.com/unidoc/unipdf/v3/model";_cfa "golang.org/x/image/draw";_da "golang.org/x/text/unicode/norm";_g "golang.org/x/xerrors";_ee "image";_dd "image/color";_c "io";_ec "math";_bf "reflect";_e "regexp";
_f "sort";_df "strings";_bg "unicode";_cf "unicode/utf8";);

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_fag *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_ecgc ,_gea ,_cfe ,_afc :=_fag .extractPageText (_fag ._cc ,_fag ._cdb ,_cbc .IdentityMatrix (),0);if _afc !=nil &&_afc !=_gd .ErrColorOutOfRange {return nil ,0,0,_afc ;};if _fag ._dad !=nil {_ecgc ._fdec ._efbde =_fag ._dad .UseSimplerExtractionProcess ;
};_ecgc .computeViews ();_afc =_bfeeg (_ecgc );if _afc !=nil {return nil ,0,0,_afc ;};if _fag ._dad !=nil {if _fag ._dad .ApplyCropBox &&_fag ._dg !=nil {_ecgc .ApplyArea (*_fag ._dg );};_ecgc ._fdec ._cacc =_fag ._dad .DisableDocumentTags ;};return _ecgc ,_gea ,_cfe ,nil ;
};func (_beaf rulingList )intersections ()map[int ]intSet {var _fagdb ,_geeee []int ;for _gcee ,_gcff :=range _beaf {switch _gcff ._eacc {case _efcad :_fagdb =append (_fagdb ,_gcee );case _gccg :_geeee =append (_geeee ,_gcee );};};if len (_fagdb )< _gdbed +1||len (_geeee )< _acfb +1{return nil ;
};if len (_fagdb )+len (_geeee )> _cadd {_fe .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_beaf ),len (_fagdb ),len (_geeee ));
return nil ;};_fedcf :=make (map[int ]intSet ,len (_fagdb )+len (_geeee ));for _ ,_cdbdg :=range _fagdb {for _ ,_dcdb :=range _geeee {if _beaf [_cdbdg ].intersects (_beaf [_dcdb ]){if _ ,_efdaa :=_fedcf [_cdbdg ];!_efdaa {_fedcf [_cdbdg ]=make (intSet );
};if _ ,_ceegd :=_fedcf [_dcdb ];!_ceegd {_fedcf [_dcdb ]=make (intSet );};_fedcf [_cdbdg ].add (_dcdb );_fedcf [_dcdb ].add (_cdbdg );};};};return _fedcf ;};func (_bede *shapesState )closePath (){if _bede ._bdce {_bede ._bbfdc =append (_bede ._bbfdc ,_cdbg (_bede ._cfbg ));
_bede ._bdce =false ;}else if len (_bede ._bbfdc )==0{if _fagd {_fe .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_bede ._bdce =false ;return ;};_bede ._bbfdc [len (_bede ._bbfdc )-1].close ();
if _fagd {_fe .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_bede );};};type textState struct{_defe float64 ;_baca float64 ;_ebgf float64 ;_cebf float64 ;_afb float64 ;_bge RenderMode ;_eada float64 ;_efbd *_gd .PdfFont ;
_cfg _gd .PdfRectangle ;_aafg int ;_aea int ;};func (_bcafb *textTable )depth ()float64 {_gfeef :=1e10;for _edea :=0;_edea < _bcafb ._dfagg ;_edea ++{_eedf :=_bcafb .get (_edea ,0);if _eedf ==nil ||_eedf ._begb {continue ;};_gfeef =_ec .Min (_gfeef ,_eedf .depth ());
};return _gfeef ;};func _ddfd (_ggadd []TextMark ,_egbc *int ,_dfccb string )[]TextMark {_dbbc :=_ecc ;_dbbc .Text =_dfccb ;return _gadg (_ggadd ,_egbc ,_dbbc );};

// String returns a description of `k`.
func (_ceeb markKind )String ()string {_fgfg ,_baae :=_bcgd [_ceeb ];if !_baae {return _a .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_ceeb );};return _fgfg ;};func (_ebda TextTable )getCellInfo (_bged TextMark )[][]int {for _fcbd ,_afebf :=range _ebda .Cells {for _cggb ,_ebaf :=range _afebf {_agd :=&_ebaf .Marks ;
if _agd .exists (_bged ){return [][]int {{_fcbd },{_cggb }};};};};return nil ;};func _edccc (_add map[float64 ][]*textLine )[]float64 {_geeba :=[]float64 {};for _gafe :=range _add {_geeba =append (_geeba ,_gafe );};_f .Float64s (_geeba );return _geeba ;
};const (_ccbf =true ;_aefgf =true ;_gbfe =true ;_cef =false ;_gacdc =false ;_bgea =6;_cccd =3.0;_bad =200;_acf =true ;_babg =true ;_bec =true ;_gebbe =true ;_cecd =false ;);func (_dcdd paraList )merge ()*textPara {_fe .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_dcdd ));
if len (_dcdd )==0{return nil ;};_dcdd .sortReadingOrder ();_fgdf :=_dcdd [0].PdfRectangle ;_dabbd :=_dcdd [0]._aega ;for _ ,_gdbg :=range _dcdd [1:]{_fgdf =_cbcaf (_fgdf ,_gdbg .PdfRectangle );_dabbd =append (_dabbd ,_gdbg ._aega ...);};return _dgcd (_fgdf ,_dabbd );
};func (_gbd *textObject )getFont (_gaca string )(*_gd .PdfFont ,error ){if _gbd ._bbgb ._fcc !=nil {_ceag ,_gfc :=_gbd .getFontDict (_gaca );if _gfc !=nil {_fe .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_gaca ,_gfc .Error ());
return nil ,_gfc ;};_gbd ._bbgb ._ga ++;_edgd ,_ggdf :=_gbd ._bbgb ._fcc [_ceag .String ()];if _ggdf {_edgd ._ffcdb =_gbd ._bbgb ._ga ;return _edgd ._dadge ,nil ;};};_afa ,_gag :=_gbd .getFontDict (_gaca );if _gag !=nil {return nil ,_gag ;};_dcgc ,_gag :=_gbd .getFontDirect (_gaca );
if _gag !=nil {return nil ,_gag ;};if _gbd ._bbgb ._fcc !=nil {_fga :=fontEntry {_dcgc ,_gbd ._bbgb ._ga };if len (_gbd ._bbgb ._fcc )>=_cebe {var _bbaeb []string ;for _aecb :=range _gbd ._bbgb ._fcc {_bbaeb =append (_bbaeb ,_aecb );};_f .Slice (_bbaeb ,func (_bab ,_gfbg int )bool {return _gbd ._bbgb ._fcc [_bbaeb [_bab ]]._ffcdb < _gbd ._bbgb ._fcc [_bbaeb [_gfbg ]]._ffcdb ;
});delete (_gbd ._bbgb ._fcc ,_bbaeb [0]);};_gbd ._bbgb ._fcc [_afa .String ()]=_fga ;};return _dcgc ,nil ;};func (_cabbf paraList )applyTables (_acgd []*textTable )paraList {var _agbf paraList ;for _ ,_ceae :=range _acgd {_agbf =append (_agbf ,_ceae .newTablePara ());
};for _ ,_ebagd :=range _cabbf {if _ebagd ._dbbf {continue ;};_agbf =append (_agbf ,_ebagd );};return _agbf ;};func _acbge (_cabce string )string {_bcbg :=[]rune (_cabce );return string (_bcbg [:len (_bcbg )-1])};type shapesState struct{_eaa _cbc .Matrix ;
_bbfd _cbc .Matrix ;_bbfdc []*subpath ;_bdce bool ;_cfbg _cbc .Point ;_ffbf *textObject ;};func (_ffab *wordBag )blocked (_afgb *textWord )bool {if _afgb .Urx < _ffab .Llx {_eeg :=_eadf (_afgb .PdfRectangle );_bgdc :=_dfage (_ffab .PdfRectangle );if _ffab ._cdbd .blocks (_eeg ,_bgdc ){if _bcfe {_fe .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_afgb ,_ffab );
};return true ;};}else if _ffab .Urx < _afgb .Llx {_eaee :=_eadf (_ffab .PdfRectangle );_fdca :=_dfage (_afgb .PdfRectangle );if _ffab ._cdbd .blocks (_eaee ,_fdca ){if _bcfe {_fe .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_afgb ,_ffab );
};return true ;};};if _afgb .Ury < _ffab .Lly {_cag :=_ecfc (_afgb .PdfRectangle );_cdbc :=_fgcb (_ffab .PdfRectangle );if _ffab ._ceaga .blocks (_cag ,_cdbc ){if _bcfe {_fe .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_afgb ,_ffab );
};return true ;};}else if _ffab .Ury < _afgb .Lly {_gga :=_ecfc (_ffab .PdfRectangle );_gbfd :=_fgcb (_afgb .PdfRectangle );if _ffab ._ceaga .blocks (_gga ,_gbfd ){if _bcfe {_fe .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_afgb ,_ffab );
};return true ;};};return false ;};func _ccgb (_gebd *textLine )float64 {return _gebd ._effba [0].Llx };

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ï¿½).
func (_ebg *Extractor )ExtractText ()(string ,error ){_fbcg ,_ ,_ ,_fac :=_ebg .ExtractTextWithStats ();return _fbcg ,_fac ;};func _fggce (_afce _gd .PdfColorspace ,_dgaa _gd .PdfColor )_dd .Color {if _afce ==nil ||_dgaa ==nil {return _dd .Black ;};_bcagg ,_ggagg :=_afce .ColorToRGB (_dgaa );
if _ggagg !=nil {_fe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_dgaa ,_afce ,_ggagg );
return _dd .Black ;};_bedgb ,_agda :=_bcagg .(*_gd .PdfColorDeviceRGB );if !_agda {_fe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_bcagg );
return _dd .Black ;};return _dd .NRGBA {R :uint8 (_bedgb .R ()*255),G :uint8 (_bedgb .G ()*255),B :uint8 (_bedgb .B ()*255),A :uint8 (255)};};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_gd .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};type list struct{_efdbc []*textLine ;_gbdd string ;_egdad []*list ;_abef string ;};type textResult struct{_cebc PageText ;_ebag int ;_faag int ;};func _fdef (_edb ,_egfd bounded )float64 {return _edb .bbox ().Llx -_egfd .bbox ().Urx };
var _cfdb *_e .Regexp =_e .MustCompile (_fdfb +"\u007c"+_acff );func (_eefa *textMark )bbox ()_gd .PdfRectangle {return _eefa .PdfRectangle };func _fccbd (_bgcg []*textLine ,_efgg ,_acfa float64 )[]*textLine {var _gbac []*textLine ;for _ ,_dgab :=range _bgcg {if _efgg ==-1{if _dgab ._bcbff > _acfa {_gbac =append (_gbac ,_dgab );
};}else {if _dgab ._bcbff > _acfa &&_dgab ._bcbff < _efgg {_gbac =append (_gbac ,_dgab );};};};return _gbac ;};func (_gaf *PageText )computeViews (){_caaa :=_gaf .getParagraphs ();_ade :=new (_fc .Buffer );_caaa .writeText (_ade );_gaf ._gecf =_ade .String ();
_gaf ._gcga =_caaa .toTextMarks ();_gaf ._bbf =_caaa .tables ();if _bbfbe {_fe .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_gaf ._bbf ));};};func (_bagaa *shapesState )fill (_ebca *[]pathSection ){_dfae :=pathSection {_eebe :_bagaa ._bbfdc ,Color :_bagaa ._ffbf .getFillColor ()};
*_ebca =append (*_ebca ,_dfae );if _caga {_gagb :=_dfae .bbox ();_a .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_ebca ),len (_dfae ._eebe ),_bagaa ,_dfae .Color ,_gagb ,_gagb .Width (),_gagb .Height ());
if _efbba {for _bcbd ,_bfbb :=range _dfae ._eebe {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bcbd ,_bfbb );if _bcbd ==10{break ;};};};};};func (_baec gridTile )complete ()bool {return _baec .numBorders ()==4};func (_bba *textObject )moveText (_aag ,_edca float64 ){_bba .moveLP (_aag ,_edca )};
func (_ffga lineRuling )asRuling ()(*ruling ,bool ){_egca :=ruling {_eacc :_ffga ._bdfa ,Color :_ffga .Color ,_cbbab :_gega };switch _ffga ._bdfa {case _efcad :_egca ._egdcc =_ffga .xMean ();_egca ._cggaf =_ec .Min (_ffga ._bcde .Y ,_ffga ._bdfcd .Y );
_egca ._dgec =_ec .Max (_ffga ._bcde .Y ,_ffga ._bdfcd .Y );case _gccg :_egca ._egdcc =_ffga .yMean ();_egca ._cggaf =_ec .Min (_ffga ._bcde .X ,_ffga ._bdfcd .X );_egca ._dgec =_ec .Max (_ffga ._bcde .X ,_ffga ._bdfcd .X );default:_fe .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ffga ._bdfa );
return nil ,false ;};return &_egca ,true ;};func (_cddf *shapesState )cubicTo (_bed ,_febc ,_dca ,_fgaf ,_edcf ,_bfbd float64 ){if _fagd {_fe .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_cddf .addPoint (_edcf ,_bfbd );};func (_gdbbb rulingList )sort (){_f .Slice (_gdbbb ,_gdbbb .comp )};


// String returns a description of `p`.
func (_dfdeb *textPara )String ()string {if _dfdeb ._begb {return _a .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dfdeb .PdfRectangle );};_cebfb :="";if _dfdeb ._ecga !=nil {_cebfb =_a .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dfdeb ._ecga ._dfagg ,_dfdeb ._ecga ._fdeda );
};return _a .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dfdeb .PdfRectangle ,_cebfb ,len (_dfdeb ._aega ),_abdb (_dfdeb .text (),50));};func _gegdb (_cfec map[float64 ]map[float64 ]gridTile )[]float64 {_ccaef :=make ([]float64 ,0,len (_cfec ));
_gffbg :=make (map[float64 ]struct{},len (_cfec ));for _ ,_edggb :=range _cfec {for _dcda :=range _edggb {if _ ,_fcffg :=_gffbg [_dcda ];_fcffg {continue ;};_ccaef =append (_ccaef ,_dcda );_gffbg [_dcda ]=struct{}{};};};_f .Float64s (_ccaef );return _ccaef ;
};type ruling struct{_eacc rulingKind ;_cbbab markKind ;_dd .Color ;_egdcc float64 ;_cggaf float64 ;_dgec float64 ;_bbfcd float64 ;};func (_gef *wordBag )allWords ()[]*textWord {var _acag []*textWord ;for _ ,_edee :=range _gef ._dbfe {_acag =append (_acag ,_edee ...);
};return _acag ;};func (_aafge *textTable )isExportable ()bool {if _aafge ._agfdb {return true ;};_eefb :=func (_bcdae int )bool {_agage :=_aafge .get (0,_bcdae );if _agage ==nil {return false ;};_dfagf :=_agage .text ();_ccdd :=_cf .RuneCountInString (_dfagf );
_acaee :=_eecb .MatchString (_dfagf );return _ccdd <=1||_acaee ;};for _beaeg :=0;_beaeg < _aafge ._fdeda ;_beaeg ++{if !_eefb (_beaeg ){return true ;};};return false ;};func (_aagfb compositeCell )String ()string {_bgdg :="";if len (_aagfb .paraList )> 0{_bgdg =_abdb (_aagfb .paraList .merge ().text (),50);
};return _a .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_aagfb .PdfRectangle ,len (_aagfb .paraList ),_bgdg );};func _bfdfg (_abefe *list ,_afab *string )string {_fgbd :=_df .Split (_abefe ._abef ,"\u000a");
_bdag :=&_df .Builder {};for _ ,_daedg :=range _fgbd {if _daedg !=""{_bdag .WriteString (*_afab );_bdag .WriteString (_daedg );_bdag .WriteString ("\u000a");};};return _bdag .String ();};func (_dec *textObject )getCurrentFont ()*_gd .PdfFont {_bbad :=_dec ._bacc ._efbd ;
if _bbad ==nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");return _gd .DefaultFont ();
};return _bbad ;};type markKind int ;func _daea (_cdc func (*wordBag ,*textWord ,float64 )bool ,_eegd float64 )func (*wordBag ,*textWord )bool {return func (_ggded *wordBag ,_eagd *textWord )bool {return _cdc (_ggded ,_eagd ,_eegd )};};func _cgea (_acdb byte )bool {for _ ,_fcbe :=range _cada {if []byte (_fcbe )[0]==_acdb {return true ;
};};return false ;};func (_fbdf *wordBag )text ()string {_aaa :=_fbdf .allWords ();_gebb :=make ([]string ,len (_aaa ));for _ggeg ,_dfge :=range _aaa {_gebb [_ggeg ]=_dfge ._eaecc ;};return _df .Join (_gebb ,"\u0020");};

// Text returns the extracted page text.
func (_eadaff PageText )Text ()string {return _eadaff ._gecf };func (_dbfed *wordBag )highestWord (_fdee int ,_gfba ,_fdeee float64 )*textWord {for _ ,_egc :=range _dbfed ._dbfe [_fdee ]{if _gfba <=_egc ._fbfd &&_egc ._fbfd <=_fdeee {return _egc ;};};return nil ;
};func (_bfcd *shapesState )drawRectangle (_gdac ,_eecf ,_bgec ,_ggbg float64 ){if _fagd {_dacg :=_bfcd .devicePoint (_gdac ,_eecf );_bdbf :=_bfcd .devicePoint (_gdac +_bgec ,_eecf +_ggbg );_dcee :=_gd .PdfRectangle {Llx :_dacg .X ,Lly :_dacg .Y ,Urx :_bdbf .X ,Ury :_bdbf .Y };
_fe .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_dcee );};_bfcd .newSubPath ();_bfcd .moveTo (_gdac ,_eecf );_bfcd .lineTo (_gdac +_bgec ,_eecf );_bfcd .lineTo (_gdac +_bgec ,_eecf +_ggbg );
_bfcd .lineTo (_gdac ,_eecf +_ggbg );_bfcd .closePath ();};func (_cfbf *wordBag )minDepth ()float64 {return _cfbf ._dgbb -(_cfbf .Ury -_cfbf ._bfdf )};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_egdc *PageText )GetContentStreamOps ()*_cb .ContentStreamOperations {return _egdc ._cdf };

// TableInfo gets table information of the textmark `tm`.
func (_edad *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_edad ._egda {return nil ,nil ;};_cfgg :=_edad ._ada ;_bca :=_cfgg .getCellInfo (*_edad );return _cfgg ,_bca ;};type subpath struct{_gdcg []_cbc .Point ;_fgga bool ;};func (_gaed paraList )log (_adbfe string ){if !_bgcc {return ;
};_fe .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_adbfe ,len (_gaed ));for _cfaa ,_cdag :=range _gaed {if _cdag ==nil {continue ;
};_gebee :=_cdag .text ();_eeee :="\u0020\u0020";if _cdag ._ecga !=nil {_eeee =_a .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_cdag ._ecga ._dfagg ,_cdag ._ecga ._fdeda );};_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_cfaa ,_cdag .PdfRectangle ,_eeee ,_abdb (_gebee ,50));
};};func (_afeec *textTable )toTextTable ()TextTable {if _bbfbe {_fe .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_afeec ._dfagg ,_afeec ._fdeda );};_aegfc :=make ([][]TableCell ,_afeec ._fdeda );
for _acfaa :=0;_acfaa < _afeec ._fdeda ;_acfaa ++{_aegfc [_acfaa ]=make ([]TableCell ,_afeec ._dfagg );for _cfbbd :=0;_cfbbd < _afeec ._dfagg ;_cfbbd ++{_caccd :=_afeec .get (_cfbbd ,_acfaa );if _caccd ==nil {continue ;};if _bbfbe {_a .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_cfbbd ,_acfaa ,_caccd );
};_aegfc [_acfaa ][_cfbbd ].Text =_caccd .text ();_dcfga :=0;_aegfc [_acfaa ][_cfbbd ].Marks ._aed =_caccd .toTextMarks (&_dcfga );};};_agfg :=TextTable {W :_afeec ._dfagg ,H :_afeec ._fdeda ,Cells :_aegfc };_agfg .PdfRectangle =_afeec .bbox ();return _agfg ;
};

// String returns a human readable description of `ss`.
func (_dcf *shapesState )String ()string {return _a .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_dcf ._bbfdc ),_dcf ._bdce );};type intSet map[int ]struct{};func (_fdgce *textWord )absorb (_ccbaa *textWord ){_fdgce .PdfRectangle =_cbcaf (_fdgce .PdfRectangle ,_ccbaa .PdfRectangle );
_fdgce ._eecba =append (_fdgce ._eecba ,_ccbaa ._eecba ...);};type rulingList []*ruling ;

// Text returns the text content of the `bulletLists`.
func (_edgc *lists )Text ()string {_beba :=&_df .Builder {};for _ ,_agbd :=range *_edgc {_deec :=_agbd .Text ();_beba .WriteString (_deec );};return _beba .String ();};func (_eafe *wordBag )firstWord (_cbca int )*textWord {return _eafe ._dbfe [_cbca ][0]};
func _bbfb (_cdec ,_feged _gd .PdfRectangle )bool {return _cdec .Lly <=_feged .Ury &&_feged .Lly <=_cdec .Ury ;};func (_bbaca paraList )readBefore (_cebfg []int ,_deddd ,_fdffc int )bool {_fceb ,_dgdda :=_bbaca [_deddd ],_bbaca [_fdffc ];if _cbedd (_fceb ,_dgdda )&&_fceb .Lly > _dgdda .Lly {return true ;
};if !(_fceb ._gdce .Urx < _dgdda ._gdce .Llx ){return false ;};_gebg ,_efdgf :=_fceb .Lly ,_dgdda .Lly ;if _gebg > _efdgf {_efdgf ,_gebg =_gebg ,_efdgf ;};_feed :=_ec .Max (_fceb ._gdce .Llx ,_dgdda ._gdce .Llx );_dggf :=_ec .Min (_fceb ._gdce .Urx ,_dgdda ._gdce .Urx );
_ddggd :=_bbaca .llyRange (_cebfg ,_gebg ,_efdgf );for _ ,_ecded :=range _ddggd {if _ecded ==_deddd ||_ecded ==_fdffc {continue ;};_eaac :=_bbaca [_ecded ];if _eaac ._gdce .Llx <=_dggf &&_feed <=_eaac ._gdce .Urx {return false ;};};return true ;};

// String returns a string describing `ma`.
func (_aac TextMarkArray )String ()string {_cgbc :=len (_aac ._aed );if _cgbc ==0{return "\u0045\u004d\u0050T\u0059";};_gbe :=_aac ._aed [0];_dab :=_aac ._aed [_cgbc -1];return _a .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_cgbc ,_gbe ,_dab );
};func (_cac *textObject )setTextLeading (_eeda float64 ){if _cac ==nil {return ;};_cac ._bacc ._cebf =_eeda ;};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func _daedd (_dabg []*textLine )[]*textLine {_afbg :=[]*textLine {};for _ ,_aee :=range _dabg {_gafg :=_aee .text ();_ccde :=_cfdb .Find ([]byte (_gafg ));if _ccde !=nil {_afbg =append (_afbg ,_aee );};};return _afbg ;
};func _gadg (_bdab []TextMark ,_ebabd *int ,_dbdce TextMark )[]TextMark {_dbdce .Offset =*_ebabd ;_bdab =append (_bdab ,_dbdce );*_ebabd +=len (_dbdce .Text );return _bdab ;};type pathSection struct{_eebe []*subpath ;_dd .Color ;};func (_cefb rulingList )connections (_fecaf map[int ]intSet ,_bgedg int )intSet {_eaccg :=make (intSet );
_fgdfd :=make (intSet );var _ddaa func (int );_ddaa =func (_fdac int ){if !_fgdfd .has (_fdac ){_fgdfd .add (_fdac );for _ceac :=range _cefb {if _fecaf [_ceac ].has (_fdac ){_eaccg .add (_ceac );};};for _cgge :=range _cefb {if _eaccg .has (_cgge ){_ddaa (_cgge );
};};};};_ddaa (_bgedg );return _eaccg ;};func _fddff (_fgba ,_abdee int )int {if _fgba < _abdee {return _fgba ;};return _abdee ;};func _beda (_begfc int ,_aegcb map[int ][]float64 )([]int ,int ){_bddff :=make ([]int ,_begfc );_ffdc :=0;for _decge :=0;_decge < _begfc ;
_decge ++{_bddff [_decge ]=_ffdc ;_ffdc +=len (_aegcb [_decge ])+1;};return _bddff ,_ffdc ;};type gridTile struct{_gd .PdfRectangle ;_fadb ,_dbgb ,_dgbd ,_gdcfe bool ;};func _fgda (_fbca string ,_bebcd []rulingList ){_fe .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_bebcd ),_fbca );
for _dffe ,_gdfa :=range _bebcd {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dffe ,_gdfa .String ());};};func (_gdafc *textTable )growTable (){_gccae :=func (_cdgf paraList ){_gdafc ._fdeda ++;for _dcff :=0;_dcff < _gdafc ._dfagg ;_dcff ++{_bebf :=_cdgf [_dcff ];
_gdafc .put (_dcff ,_gdafc ._fdeda -1,_bebf );};};_bcebb :=func (_gfgb paraList ){_gdafc ._dfagg ++;for _bgde :=0;_bgde < _gdafc ._fdeda ;_bgde ++{_cdab :=_gfgb [_bgde ];_gdafc .put (_gdafc ._dfagg -1,_bgde ,_cdab );};};if _decg {_gdafc .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");
};for _cbge :=0;;_cbge ++{_beccd :=false ;_gbae :=_gdafc .getDown ();_ffebg :=_gdafc .getRight ();if _decg {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbge ,_gdafc );_a .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_gbae );
_a .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_ffebg );};if _gbae !=nil &&_ffebg !=nil {_gefb :=_gbae [len (_gbae )-1];if !_gefb .taken ()&&_gefb ==_ffebg [len (_ffebg )-1]{_gccae (_gbae );if _ffebg =_gdafc .getRight ();
_ffebg !=nil {_bcebb (_ffebg );_gdafc .put (_gdafc ._dfagg -1,_gdafc ._fdeda -1,_gefb );};_beccd =true ;};};if !_beccd &&_gbae !=nil {_gccae (_gbae );_beccd =true ;};if !_beccd &&_ffebg !=nil {_bcebb (_ffebg );_beccd =true ;};if !_beccd {break ;};};};

// String returns a description of `state`.
func (_bcc *textState )String ()string {_bgd :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _bcc ._efbd !=nil {_bgd =_bcc ._efbd .BaseFont ();};return _a .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_bcc ._defe ,_bcc ._baca ,_bcc ._afb ,_bgd );
};var _bcgd =map[markKind ]string {_gega :"\u0073\u0074\u0072\u006f\u006b\u0065",_bdeb :"\u0066\u0069\u006c\u006c",_eabb :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func _dece (_bafd *list )[]*list {var _ebbaa []*list ;for _ ,_gdea :=range _bafd ._egdad {switch _gdea ._gbdd {case "\u004c\u0049":_adee :=_fcef (_gdea );
_gebe :=_dece (_gdea );_fcce :=_gacag (_adee ,"\u0062\u0075\u006c\u006c\u0065\u0074",_gebe );_fddf :=_gfcd (_adee ,"");_fcce ._abef =_fddf ;_ebbaa =append (_ebbaa ,_fcce );case "\u004c\u0042\u006fd\u0079":return _dece (_gdea );case "\u004c":_cgef :=_dece (_gdea );
_ebbaa =append (_ebbaa ,_cgef ...);return _ebbaa ;};};return _ebbaa ;};func _aaeb (_bcedf ,_gffd bounded )float64 {_efgb :=_gebbb (_bcedf ,_gffd );if !_ddfbb (_efgb ){return _efgb ;};return _bea (_bcedf ,_gffd );};

// ToTextMark returns the public view of `tm`.
func (_fbaa *textMark )ToTextMark ()TextMark {return TextMark {Text :_fbaa ._cffce ,Original :_fbaa ._dbge ,BBox :_fbaa ._dfad ,Font :_fbaa ._gbbad ,FontSize :_fbaa ._fccd ,FillColor :_fbaa ._efcf ,StrokeColor :_fbaa ._fcada ,Orientation :_fbaa ._dgca ,DirectObject :_fbaa ._fcdfe ,ObjString :_fbaa ._dadgg ,Tw :_fbaa .Tw ,Th :_fbaa .Th ,Tc :_fbaa ._bbfbee ,Index :_fbaa ._bbac };
};func (_aaf *stateStack )top ()*textState {if _aaf .empty (){return nil ;};return (*_aaf )[_aaf .size ()-1];};func (_efg *PageText )getParagraphs ()paraList {var _fcad rulingList ;if _bec {_cgf :=_aafc (_efg ._agge );_fcad =append (_fcad ,_cgf ...);};
if _gebbe {_fcd :=_bgcee (_efg ._ebga );_fcad =append (_fcad ,_fcd ...);};_fcad ,_ebc :=_fcad .toTilings ();var _acab paraList ;_beg :=len (_efg ._gbba );for _fegb :=0;_fegb < 360&&_beg > 0;_fegb +=90{_dgf :=make ([]*textMark ,0,len (_efg ._gbba )-_beg );
for _ ,_gadb :=range _efg ._gbba {if _gadb ._dgca ==_fegb {_dgf =append (_dgf ,_gadb );};};if len (_dgf )> 0{_bfgg :=_abde (_dgf ,_efg ._deaf ,_fcad ,_ebc ,_efg ._fdec ._efbde );_acab =append (_acab ,_bfgg ...);_beg -=len (_dgf );};};return _acab ;};func (_baa *textObject )setHorizScaling (_fcbf float64 ){if _baa ==nil {return ;
};_baa ._bacc ._ebgf =_fcbf ;};func (_afec paraList )tables ()[]TextTable {var _gfaa []TextTable ;if _bbfbe {_fe .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_dbdfg :=range _afec {_bfee :=_dbdfg ._ecga ;
if _bfee !=nil &&_bfee .isExportable (){_gfaa =append (_gfaa ,_bfee .toTextTable ());};};return _gfaa ;};const (_gacad markKind =iota ;_gega ;_bdeb ;_eabb ;);func _cceff (_adabg ,_fcab float64 )bool {return _ec .Abs (_adabg -_fcab )<=_bbge };func (_gaab *textTable )compositeRowCorridors ()map[int ][]float64 {_agcgc :=make (map[int ][]float64 ,_gaab ._fdeda );
if _bbfbe {_fe .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_gaab ._fdeda );};for _gcead :=1;_gcead < _gaab ._fdeda ;_gcead ++{var _ccbfc []compositeCell ;
for _accee :=0;_accee < _gaab ._dfagg ;_accee ++{if _fdce ,_fgfcd :=_gaab ._bcee [_beag (_accee ,_gcead )];_fgfcd {_ccbfc =append (_ccbfc ,_fdce );};};if len (_ccbfc )==0{continue ;};_bbfa :=_fdddb (_ccbfc );_agcgc [_gcead ]=_bbfa ;if _bbfbe {_a .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_gcead ,_bbfa );
};};return _agcgc ;};type lists []*list ;var _fdfb string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
var _acff string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func _eafa (_bcbc ,_gbabf _gd .PdfRectangle )bool {return _bacf (_bcbc ,_gbabf )&&_bbfb (_bcbc ,_gbabf )};func _dadcg (_bgbg []*textMark ,_acbc _gd .PdfRectangle )[]*textWord {var _bbca []*textWord ;var _afdcf *textWord ;if _agcg {_fe .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_bgbg ));
};_ddgafd :=func (){if _afdcf !=nil {_ccac :=_afdcf .computeText ();if !_eece (_ccac ){_afdcf ._eaecc =_ccac ;_bbca =append (_bbca ,_afdcf );if _agcg {_fe .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_bbca )-1,_afdcf .String ());
for _cdeca ,_bbged :=range _afdcf ._eecba {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cdeca ,_bbged .String ());};};};_afdcf =nil ;};};for _ ,_baeb :=range _bgbg {if _gbfe &&_afdcf !=nil &&len (_afdcf ._eecba )> 0{_efcaa :=_afdcf ._eecba [len (_afdcf ._eecba )-1];
_fedf ,_fggg :=_affcg (_baeb ._cffce );_adedg ,_dfaf :=_affcg (_efcaa ._cffce );if _fggg &&!_dfaf &&_efcaa .inDiacriticArea (_baeb ){_afdcf .addDiacritic (_fedf );continue ;};if _dfaf &&!_fggg &&_baeb .inDiacriticArea (_efcaa ){_afdcf ._eecba =_afdcf ._eecba [:len (_afdcf ._eecba )-1];
_afdcf .appendMark (_baeb ,_acbc );_afdcf .addDiacritic (_adedg );continue ;};};_gcggb :=_eece (_baeb ._cffce );if _gcggb {_ddgafd ();continue ;};if _afdcf ==nil &&!_gcggb {_afdcf =_bfdgg ([]*textMark {_baeb },_acbc );continue ;};_dcgbd :=_afdcf ._dgac ;
_aecdd :=_ec .Abs (_cgfe (_acbc ,_baeb )-_afdcf ._fbfd )/_dcgbd ;_gaag :=_fdef (_baeb ,_afdcf )/_dcgbd ;if _gaag >=_fbba ||!(-_bdde <=_gaag &&_aecdd <=_abeb ){_ddgafd ();_afdcf =_bfdgg ([]*textMark {_baeb },_acbc );continue ;};_afdcf .appendMark (_baeb ,_acbc );
};_ddgafd ();return _bbca ;};func (_gfgec paraList )llyOrdering ()[]int {_cbbg :=make ([]int ,len (_gfgec ));for _efeb :=range _gfgec {_cbbg [_efeb ]=_efeb ;};_f .SliceStable (_cbbg ,func (_feeaf ,_fafe int )bool {_egdg ,_ddab :=_cbbg [_feeaf ],_cbbg [_fafe ];
return _gfgec [_egdg ].Lly < _gfgec [_ddab ].Lly ;});return _cbbg ;};func _ggffb (_cgab ,_bcgef _cbc .Point )bool {_eged :=_ec .Abs (_cgab .X -_bcgef .X );_fgge :=_ec .Abs (_cgab .Y -_bcgef .Y );return _agbda (_eged ,_fgge );};func (_effcg *textTable )getRight ()paraList {_gcgaf :=make (paraList ,_effcg ._fdeda );
for _dgadg :=0;_dgadg < _effcg ._fdeda ;_dgadg ++{_feefc :=_effcg .get (_effcg ._dfagg -1,_dgadg )._bbdf ;if _feefc .taken (){return nil ;};_gcgaf [_dgadg ]=_feefc ;};for _effad :=0;_effad < _effcg ._fdeda -1;_effad ++{if _gcgaf [_effad ]._bdbb !=_gcgaf [_effad +1]{return nil ;
};};return _gcgaf ;};func (_dge *stateStack )pop ()*textState {if _dge .empty (){return nil ;};_fed :=*(*_dge )[len (*_dge )-1];*_dge =(*_dge )[:len (*_dge )-1];return &_fed ;};

// String returns a string descibing `i`.
func (_gfcf gridTile )String ()string {_fdbcd :=func (_deda bool ,_acaca string )string {if _deda {return _acaca ;};return "\u005f";};return _a .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_gfcf .PdfRectangle ,_fdbcd (_gfcf ._dbgb ,"\u004c"),_fdbcd (_gfcf ._gdcfe ,"\u0052"),_fdbcd (_gfcf ._dgbd ,"\u0042"),_fdbcd (_gfcf ._fadb ,"\u0054"));
};

// Tables returns the tables extracted from the page.
func (_eca PageText )Tables ()[]TextTable {if _bbfbe {_fe .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_eca ._bbf ));};return _eca ._bbf ;};func (_effac *textPara )toCellTextMarks (_addf *int )[]TextMark {var _bcad []TextMark ;
for _dbfbd ,_ebde :=range _effac ._aega {_gaee :=_ebde .toTextMarks (_addf );_bcbe :=_ccbf &&_ebde .endsInHyphen ()&&_dbfbd !=len (_effac ._aega )-1;if _bcbe {_gaee =_ecef (_gaee ,_addf );};_bcad =append (_bcad ,_gaee ...);if !(_bcbe ||_dbfbd ==len (_effac ._aega )-1){_bcad =_ddfd (_bcad ,_addf ,_fcbgg (_ebde ._bcbff ,_effac ._aega [_dbfbd +1]._bcbff ));
};};return _bcad ;};func _cfeda (_eaea *_gd .Image ,_dffca _dd .Color )_ee .Image {_dbad ,_gfecf :=int (_eaea .Width ),int (_eaea .Height );_dgfda :=_ee .NewRGBA (_ee .Rect (0,0,_dbad ,_gfecf ));for _bcgfb :=0;_bcgfb < _gfecf ;_bcgfb ++{for _ededg :=0;
_ededg < _dbad ;_ededg ++{_fdfd ,_ecebg :=_eaea .ColorAt (_ededg ,_bcgfb );if _ecebg !=nil {_fe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_ededg ,_bcgfb );
continue ;};_bfdcf ,_cgbda ,_gddb ,_ :=_fdfd .RGBA ();var _fgdg _dd .Color ;if _bfdcf +_cgbda +_gddb ==0{_fgdg =_dd .Transparent ;}else {_fgdg =_dffca ;};_dgfda .Set (_ededg ,_bcgfb ,_fgdg );};};return _dgfda ;};type rulingKind int ;func _acde (_deeaa *paraList )map[int ][]*textLine {_dcba :=map[int ][]*textLine {};
for _ ,_fbea :=range *_deeaa {for _ ,_cdga :=range _fbea ._aega {if !_gggg (_cdga ){_fe .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_cecb :=_cdga ._effba [0]._eecba [0]._bbcbf ;_dcba [_cecb ]=append (_dcba [_cecb ],_cdga );};if _fbea ._ecga !=nil {_bfdg :=_fbea ._ecga ._adfd ;for _ ,_eabc :=range _bfdg {for _ ,_abba :=range _eabc ._aega {if !_gggg (_abba ){_fe .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_dccd :=_abba ._effba [0]._eecba [0]._bbcbf ;_dcba [_dccd ]=append (_dcba [_dccd ],_abba );};};};};return _dcba ;};func (_fgcg *shapesState )lastpointEstablished ()(_cbc .Point ,bool ){if _fgcg ._bdce {return _fgcg ._cfbg ,false ;};_ece :=len (_fgcg ._bbfdc );
if _ece > 0&&_fgcg ._bbfdc [_ece -1]._fgga {return _fgcg ._bbfdc [_ece -1].last (),false ;};return _cbc .Point {},true ;};type rectRuling struct{_dfcac rulingKind ;_cfcb markKind ;_dd .Color ;_gd .PdfRectangle ;};func (_fcfb paraList )findTables (_fdacg []gridTiling )[]*textTable {_fcfb .addNeighbours ();
_f .Slice (_fcfb ,func (_eecc ,_bbbbe int )bool {return _aaeb (_fcfb [_eecc ],_fcfb [_bbbbe ])< 0});var _gfee []*textTable ;if _acf {_cfdba :=_fcfb .findGridTables (_fdacg );_gfee =append (_gfee ,_cfdba ...);};if _babg {_gecb :=_fcfb .findTextTables ();
_gfee =append (_gfee ,_gecb ...);};return _gfee ;};func _abde (_eedg []*textMark ,_cdafg _gd .PdfRectangle ,_ddgaf rulingList ,_feaa []gridTiling ,_fdbc bool )paraList {_fe .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_eedg ),_cdafg );
if len (_eedg )==0{return nil ;};_eecab :=_dadcg (_eedg ,_cdafg );if len (_eecab )==0{return nil ;};_ddgaf .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_gcdd ,_efae :=_ddgaf .vertsHorzs ();_debb :=_geae (_eecab ,_cdafg .Ury ,_gcdd ,_efae );
_cgag :=_bgdb (_debb ,_cdafg .Ury ,_gcdd ,_efae );_cgag =_cadg (_cgag );_agfc :=make (paraList ,0,len (_cgag ));for _ ,_gbdde :=range _cgag {_dced :=_gbdde .arrangeText ();if _dced !=nil {_agfc =append (_agfc ,_dced );};};if !_fdbc &&len (_agfc )>=_acfc {_agfc =_agfc .extractTables (_feaa );
};_agfc .sortReadingOrder ();if !_fdbc {_agfc .sortTopoOrder ();};_agfc .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _agfc ;};func (_bgfdc gridTiling )complete ()bool {for _ ,_gfbb :=range _bgfdc ._fdbd {for _ ,_gfbgb :=range _gfbb {if !_gfbgb .complete (){return false ;
};};};return true ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_cc string ;_cdb *_gd .PdfPageResources ;_aa _gd .PdfRectangle ;_dg *_gd .PdfRectangle ;_fcc map[string ]fontEntry ;_fa map[string ]textResult ;_ga int64 ;_cbg int ;_dad *Options ;_gad *_af .PdfObject ;_ef _af .PdfObject ;};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_gd .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_gd .PdfFontDescriptor ;};func _ag (_ad []Font ,_db string )bool {for _ ,_dgb :=range _ad {if _dgb .FontName ==_db {return true ;};};return false ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//     options := &Options{
//	     DisableDocumentTags: false, // this means use document tag if available
//     }
//     ex, err := NewWithOptions(page, options)
//     // handle error
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle error
//     lists := pageText.List()
//     txt := lists.Text()
func (_bfbc PageText )List ()lists {_ebcg :=!_bfbc ._fdec ._cacc ;_bcfa :=_bfbc .getParagraphs ();_bagaaf :=true ;if _bfbc ._bgb ==nil ||*_bfbc ._bgb ==nil {_bagaaf =false ;};_befc :=_bcfa .list ();if _bagaaf &&_ebcg {_acabb :=_acde (&_bcfa );_gfcc :=&structTreeRoot {};
_gfcc .parseStructTreeRoot (*_bfbc ._bgb );if _gfcc ._aegf ==nil {_fe .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _befc ;};_befc =_gfcc .buildList (_acabb ,_bfbc ._fecg );};return _befc ;};func _gebbb (_cgebc ,_cbbd bounded )float64 {return _cgebc .bbox ().Llx -_cbbd .bbox ().Llx };func (_dbbgf *compositeCell )updateBBox (){for _ ,_bcea :=range _dbbgf .paraList {_dbbgf .PdfRectangle =_cbcaf (_dbbgf .PdfRectangle ,_bcea .PdfRectangle );
};};func (_debe paraList )computeEBBoxes (){if _fegc {_fe .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_ccec :=range _debe {_ccec ._gdce =_ccec .PdfRectangle ;};_edcg :=_debe .yNeighbours (0);
for _ddede ,_cdgag :=range _debe {_bcbaf :=_cdgag ._gdce ;_gbbd ,_fgag :=-1.0e9,+1.0e9;for _ ,_cfda :=range _edcg [_cdgag ]{_cdbgg :=_debe [_cfda ]._gdce ;if _cdbgg .Urx < _bcbaf .Llx {_gbbd =_ec .Max (_gbbd ,_cdbgg .Urx );}else if _bcbaf .Urx < _cdbgg .Llx {_fgag =_ec .Min (_fgag ,_cdbgg .Llx );
};};for _cdeg ,_cbgc :=range _debe {_ecgb :=_cbgc ._gdce ;if _ddede ==_cdeg ||_ecgb .Ury > _bcbaf .Lly {continue ;};if _gbbd <=_ecgb .Llx &&_ecgb .Llx < _bcbaf .Llx {_bcbaf .Llx =_ecgb .Llx ;}else if _ecgb .Urx <=_fgag &&_bcbaf .Urx < _ecgb .Urx {_bcbaf .Urx =_ecgb .Urx ;
};};if _fegc {_a .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_ddede ,_cdgag ._gdce ,_bcbaf ,_abdb (_cdgag .text (),50));};_cdgag ._gdce =_bcbaf ;};if _cef {for _ ,_gdbf :=range _debe {_gdbf .PdfRectangle =_gdbf ._gdce ;
};};};func _bdf (_gaga *wordBag ,_aegd int )*textLine {_bcbb :=_gaga .firstWord (_aegd );_dfeb :=textLine {PdfRectangle :_bcbb .PdfRectangle ,_acg :_bcbb ._dgac ,_bcbff :_bcbb ._fbfd };_dfeb .pullWord (_gaga ,_bcbb ,_aegd );return &_dfeb ;};type bounded interface{bbox ()_gd .PdfRectangle };
func (_ddfa *textObject )setWordSpacing (_aaga float64 ){if _ddfa ==nil {return ;};_ddfa ._bacc ._baca =_aaga ;};func (_bccc *textTable )put (_ffccac ,_cafdf int ,_bbfe *textPara ){_bccc ._adfd [_beag (_ffccac ,_cafdf )]=_bbfe ;};func (_fef *textObject )moveTextSetLeading (_fafc ,_bbe float64 ){_fef ._bacc ._cebf =-_bbe ;
_fef .moveLP (_fafc ,_bbe );};func (_eafde *wordBag )depthBand (_efda ,_fbdg float64 )[]int {if len (_eafde ._dbfe )==0{return nil ;};return _eafde .depthRange (_eafde .getDepthIdx (_efda ),_eafde .getDepthIdx (_fbdg ));};

// String returns a description of `b`.
func (_ddda *wordBag )String ()string {var _dgd []string ;for _ ,_ccfa :=range _ddda .depthIndexes (){_fedd :=_ddda ._dbfe [_ccfa ];for _ ,_aefc :=range _fedd {_dgd =append (_dgd ,_aefc ._eaecc );};};return _a .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_ddda .PdfRectangle ,_ddda ._bfdf ,len (_dgd ),_dgd );
};func (_egfc *Extractor )extractPageText (_aeg string ,_ebgd *_gd .PdfPageResources ,_fgg _cbc .Matrix ,_ffa int )(*PageText ,int ,int ,error ){_fe .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_ffa );
_gfa :=&PageText {_deaf :_egfc ._aa ,_bgb :_egfc ._gad ,_fecg :_egfc ._ef };_agad :=_ebad (_egfc ._aa );var _efe stateStack ;_gbfa :=_fab (_egfc ,_ebgd ,_cb .GraphicsState {},&_agad ,&_efe );_dfca :=shapesState {_bbfd :_fgg ,_eaa :_cbc .IdentityMatrix (),_ffbf :_gbfa };
var _ebb bool ;_cff :=-1;if _ffa > _eafd {_afcb :=_b .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_ffa ,_afcb );
return _gfa ,_agad ._aafg ,_agad ._aea ,_afcb ;};_feg :=_cb .NewContentStreamParser (_aeg );_abb ,_age :=_feg .Parse ();if _age !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_age );
return _gfa ,_agad ._aafg ,_agad ._aea ,_age ;};_gfa ._cdf =_abb ;_gce :=_cb .NewContentStreamProcessor (*_abb );_gce .AddHandler (_cb .HandlerConditionEnumAllOperands ,"",func (_fggf *_cb .ContentStreamOperation ,_efb _cb .GraphicsState ,_ebba *_gd .PdfPageResources )error {_eade :=_fggf .Operand ;
if _ded {_fe .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_fggf );};switch _eade {case "\u0071":if _fagd {_fe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dfca ._eaa );};_efe .push (&_agad );case "\u0051":if !_efe .empty (){_agad =*_efe .pop ();
};_dfca ._eaa =_efb .CTM ;if _fagd {_fe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dfca ._eaa );};case "\u0042\u0044\u0043":_bgc ,_ggg :=_af .GetDict (_fggf .Params [1]);if !_ggg {_fe .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fggf );
return _age ;};_bga :=_bgc .Get ("\u004d\u0043\u0049\u0044");if _bga !=nil {_cca ,_dga :=_af .GetIntVal (_bga );if !_dga {_fe .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_fggf ,_bga );
};_cff =_cca ;}else {_cff =-1;};case "\u0045\u004d\u0043":_cff =-1;case "\u0042\u0054":if _ebb {_fe .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_gfa ._gbba =append (_gfa ._gbba ,_gbfa ._dead ...);};_ebb =true ;_cgga :=_efb ;_cgga .CTM =_fgg .Mult (_cgga .CTM );_gbfa =_fab (_egfc ,_ebba ,_cgga ,&_agad ,&_efe );_dfca ._ffbf =_gbfa ;case "\u0045\u0054":if !_ebb {_fe .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_ebb =false ;_gfa ._gbba =append (_gfa ._gbba ,_gbfa ._dead ...);_gbfa .reset ();case "\u0054\u002a":_gbfa .nextLine ();case "\u0054\u0064":if _ace ,_adg :=_gbfa .checkOp (_fggf ,2,true );!_ace {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_adg );
return _adg ;};_dbf ,_cced ,_fbb :=_gfece (_fggf .Params );if _fbb !=nil {return _fbb ;};_gbfa .moveText (_dbf ,_cced );case "\u0054\u0044":if _eag ,_ffec :=_gbfa .checkOp (_fggf ,2,true );!_eag {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ffec );
return _ffec ;};_abbe ,_bdb ,_bc :=_gfece (_fggf .Params );if _bc !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bc );return _bc ;};_gbfa .moveTextSetLeading (_abbe ,_bdb );case "\u0054\u006a":if _agee ,_edc :=_gbfa .checkOp (_fggf ,1,true );
!_agee {_fe .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_fggf ,_edc );return _edc ;};_fccb :=_af .TraceToDirectObject (_fggf .Params [0]);_feb ,_cab :=_af .GetStringBytes (_fccb );
if !_cab {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_fggf );return _af .ErrTypeError ;
};return _gbfa .showText (_fccb ,_feb ,_cff );case "\u0054\u004a":if _caa ,_agc :=_gbfa .checkOp (_fggf ,1,true );!_caa {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_agc );return _agc ;};_dfee ,_dbc :=_af .GetArray (_fggf .Params [0]);
if !_dbc {_fe .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fggf );return _age ;};return _gbfa .showTextAdjusted (_dfee ,_cff );
case "\u0027":if _efbb ,_aeff :=_gbfa .checkOp (_fggf ,1,true );!_efbb {_fe .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aeff );return _aeff ;};_ede :=_af .TraceToDirectObject (_fggf .Params [0]);_ebd ,_gdge :=_af .GetStringBytes (_ede );
if !_gdge {_fe .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_fggf );return _af .ErrTypeError ;};_gbfa .nextLine ();return _gbfa .showText (_ede ,_ebd ,_cff );
case "\u0022":if _bcf ,_ffcd :=_gbfa .checkOp (_fggf ,3,true );!_bcf {_fe .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ffcd );return _ffcd ;};_ccag ,_cgc ,_abe :=_gfece (_fggf .Params [:2]);if _abe !=nil {return _abe ;
};_abf :=_af .TraceToDirectObject (_fggf .Params [2]);_cbac ,_deg :=_af .GetStringBytes (_abf );if !_deg {_fe .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_fggf );
return _af .ErrTypeError ;};_gbfa .setCharSpacing (_ccag );_gbfa .setWordSpacing (_cgc );_gbfa .nextLine ();return _gbfa .showText (_abf ,_cbac ,_cff );case "\u0054\u004c":_ccf ,_acb :=_eda (_fggf );if _acb !=nil {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acb );
return _acb ;};_gbfa .setTextLeading (_ccf );case "\u0054\u0063":_ddb ,_gcce :=_eda (_fggf );if _gcce !=nil {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcce );return _gcce ;};_gbfa .setCharSpacing (_ddb );
case "\u0054\u0066":if _beb ,_fbg :=_gbfa .checkOp (_fggf ,2,true );!_beb {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbg );return _fbg ;};_debc ,_agec :=_af .GetNameVal (_fggf .Params [0]);
if !_agec {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_fggf );return _af .ErrTypeError ;};_fbf ,_agg :=_af .GetNumberAsFloat (_fggf .Params [1]);
if !_agec {_fe .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fggf ,_agg );
return _agg ;};_agg =_gbfa .setFont (_debc ,_fbf );_gbfa ._ddg =_g .Is (_agg ,_af .ErrNotSupported );if _agg !=nil &&!_gbfa ._ddg {return _agg ;};case "\u0054\u006d":if _gec ,_cea :=_gbfa .checkOp (_fggf ,6,true );!_gec {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cea );
return _cea ;};_cgb ,_cge :=_af .GetNumbersAsFloat (_fggf .Params );if _cge !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cge );return _cge ;};_gbfa .setTextMatrix (_cgb );case "\u0054\u0072":if _eec ,_fff :=_gbfa .checkOp (_fggf ,1,true );
!_eec {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fff );return _fff ;};_fgc ,_eefd :=_af .GetIntVal (_fggf .Params [0]);if !_eefd {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fggf );
return _af .ErrTypeError ;};_gbfa .setTextRenderMode (_fgc );case "\u0054\u0073":if _aabf ,_fgb :=_gbfa .checkOp (_fggf ,1,true );!_aabf {_fe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgb );return _fgb ;
};_dcg ,_fccbe :=_af .GetNumberAsFloat (_fggf .Params [0]);if _fccbe !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fccbe );return _fccbe ;};_gbfa .setTextRise (_dcg );case "\u0054\u0077":if _ega ,_faf :=_gbfa .checkOp (_fggf ,1,true );
!_ega {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_faf );return _faf ;};_dbcd ,_bcb :=_af .GetNumberAsFloat (_fggf .Params [0]);if _bcb !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcb );
return _bcb ;};_gbfa .setWordSpacing (_dbcd );case "\u0054\u007a":if _bgab ,_dde :=_gbfa .checkOp (_fggf ,1,true );!_bgab {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dde );return _dde ;};_fcb ,_effa :=_af .GetNumberAsFloat (_fggf .Params [0]);
if _effa !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_effa );return _effa ;};_gbfa .setHorizScaling (_fcb );case "\u0063\u006d":_dfca ._eaa =_efb .CTM ;if _dfca ._eaa .Singular (){_gfb :=_cbc .IdentityMatrix ().Translate (_dfca ._eaa .Translation ());
_fe .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_dfca ._eaa ,_gfb );_dfca ._eaa =_gfb ;};if _fagd {_fe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dfca ._eaa );};case "\u006d":if len (_fggf .Params )!=2{_fe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ddf );
return nil ;};_dce ,_dgg :=_af .GetNumbersAsFloat (_fggf .Params );if _dgg !=nil {return _dgg ;};_dfca .moveTo (_dce [0],_dce [1]);case "\u006c":if len (_fggf .Params )!=2{_fe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ddf );
return nil ;};_caf ,_gde :=_af .GetNumbersAsFloat (_fggf .Params );if _gde !=nil {return _gde ;};_dfca .lineTo (_caf [0],_caf [1]);case "\u0063":if len (_fggf .Params )!=6{return _ddf ;};_dafd ,_bcd :=_af .GetNumbersAsFloat (_fggf .Params );if _bcd !=nil {return _bcd ;
};_fe .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_dafd );_dfca .cubicTo (_dafd [0],_dafd [1],_dafd [2],_dafd [3],_dafd [4],_dafd [5]);case "\u0076","\u0079":if len (_fggf .Params )!=4{return _ddf ;
};_cgdc ,_agga :=_af .GetNumbersAsFloat (_fggf .Params );if _agga !=nil {return _agga ;};_fe .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cgdc );_dfca .quadraticTo (_cgdc [0],_cgdc [1],_cgdc [2],_cgdc [3]);
case "\u0068":_dfca .closePath ();case "\u0072\u0065":if len (_fggf .Params )!=4{return _ddf ;};_abcc ,_dfb :=_af .GetNumbersAsFloat (_fggf .Params );if _dfb !=nil {return _dfb ;};_dfca .drawRectangle (_abcc [0],_abcc [1],_abcc [2],_abcc [3]);_dfca .closePath ();
case "\u0053":_dfca .stroke (&_gfa ._agge );_dfca .clearPath ();case "\u0073":_dfca .closePath ();_dfca .stroke (&_gfa ._agge );_dfca .clearPath ();case "\u0046":_dfca .fill (&_gfa ._ebga );_dfca .clearPath ();case "\u0066","\u0066\u002a":_dfca .closePath ();
_dfca .fill (&_gfa ._ebga );_dfca .clearPath ();case "\u0042","\u0042\u002a":_dfca .fill (&_gfa ._ebga );_dfca .stroke (&_gfa ._agge );_dfca .clearPath ();case "\u0062","\u0062\u002a":_dfca .closePath ();_dfca .fill (&_gfa ._ebga );_dfca .stroke (&_gfa ._agge );
_dfca .clearPath ();case "\u006e":_dfca .clearPath ();case "\u0044\u006f":if len (_fggf .Params )==0{_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_fggf .Params );
return _af .ErrRangeError ;};_egd ,_dfg :=_af .GetName (_fggf .Params [0]);if !_dfg {_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_fggf .Params [0]);
return _af .ErrTypeError ;};_ ,_bbc :=_ebba .GetXObjectByName (*_egd );if _bbc !=_gd .XObjectTypeForm {break ;};_gbb ,_dfg :=_egfc ._fa [_egd .String ()];if !_dfg {_ddbd ,_dfed :=_ebba .GetXObjectFormByName (*_egd );if _dfed !=nil {_fe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfed );
return _dfed ;};_fbfg ,_dfed :=_ddbd .GetContentStream ();if _dfed !=nil {_fe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfed );return _dfed ;};_bdee :=_ddbd .Resources ;if _bdee ==nil {_bdee =_ebba ;};_facc :=_efb .CTM ;if _bac ,_dff :=_af .GetArray (_ddbd .Matrix );
_dff {_ged ,_fadd :=_bac .GetAsFloat64Slice ();if _fadd !=nil {return _fadd ;};if len (_ged )!=6{return _ddf ;};_ccae :=_cbc .NewMatrix (_ged [0],_ged [1],_ged [2],_ged [3],_ged [4],_ged [5]);_facc =_efb .CTM .Mult (_ccae );};_fdc ,_baga ,_fec ,_dfed :=_egfc .extractPageText (string (_fbfg ),_bdee ,_fgg .Mult (_facc ),_ffa +1);
if _dfed !=nil {_fe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_dfed );return _dfed ;};_gbb =textResult {*_fdc ,_baga ,_fec };_egfc ._fa [_egd .String ()]=_gbb ;};_dfca ._eaa =_efb .CTM ;if _fagd {_fe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dfca ._eaa );
};_gfa ._gbba =append (_gfa ._gbba ,_gbb ._cebc ._gbba ...);_gfa ._agge =append (_gfa ._agge ,_gbb ._cebc ._agge ...);_gfa ._ebga =append (_gfa ._ebga ,_gbb ._cebc ._ebga ...);_agad ._aafg +=_gbb ._ebag ;_agad ._aea +=_gbb ._faag ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_gbfa ._fde .ColorspaceNonStroking =_efb .ColorspaceNonStroking ;
_gbfa ._fde .ColorNonStroking =_efb .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_gbfa ._fde .ColorspaceStroking =_efb .ColorspaceStroking ;_gbfa ._fde .ColorStroking =_efb .ColorStroking ;
};return nil ;});_age =_gce .Process (_ebgd );return _gfa ,_agad ._aafg ,_agad ._aea ,_age ;};func _fab (_deee *Extractor ,_afcc *_gd .PdfPageResources ,_cec _cb .GraphicsState ,_dag *textState ,_gcg *stateStack )*textObject {return &textObject {_bbgb :_deee ,_afeb :_afcc ,_fde :_cec ,_efeg :_gcg ,_bacc :_dag ,_cffb :_cbc .IdentityMatrix (),_fbff :_cbc .IdentityMatrix ()};
};func (_adag *textPara )writeCellText (_eggf _c .Writer ){for _bfbcb ,_aeda :=range _adag ._aega {_daca :=_aeda .text ();_acdd :=_ccbf &&_aeda .endsInHyphen ()&&_bfbcb !=len (_adag ._aega )-1;if _acdd {_daca =_acbge (_daca );};_eggf .Write ([]byte (_daca ));
if !(_acdd ||_bfbcb ==len (_adag ._aega )-1){_eggf .Write ([]byte (_fcbgg (_aeda ._bcbff ,_adag ._aega [_bfbcb +1]._bcbff )));};};};type textMark struct{_gd .PdfRectangle ;_dgca int ;_cffce string ;_dbge string ;_gbbad *_gd .PdfFont ;_fccd float64 ;_bbfbee float64 ;
_bbag _cbc .Matrix ;_ggggg _cbc .Point ;_dfad _gd .PdfRectangle ;_efcf _dd .Color ;_fcada _dd .Color ;_fcdfe _af .PdfObject ;_dadgg []string ;Tw float64 ;Th float64 ;_bbcbf int ;_bbac int ;};func (_ebgdc *textPara )isAtom ()*textTable {_fagac :=_ebgdc ;
_fabc :=_ebgdc ._bbdf ;_efdbf :=_ebgdc ._bdbb ;if _fabc .taken ()||_efdbf .taken (){return nil ;};_gedfd :=_fabc ._bdbb ;if _gedfd .taken ()||_gedfd !=_efdbf ._bbdf {return nil ;};return _cdage (_fagac ,_fabc ,_efdbf ,_gedfd );};func (_eac *wordBag )scanBand (_febd string ,_ddgc *wordBag ,_aecbb func (_bagad *wordBag ,_bdg *textWord )bool ,_agdd ,_dcac ,_aadc float64 ,_daeb ,_acaf bool )int {_gfea :=_ddgc ._bfdf ;
var _gegf map[int ]map[*textWord ]struct{};if !_daeb {_gegf =_eac .makeRemovals ();};_ebe :=_eeff *_gfea ;_eeca :=0;for _ ,_ebce :=range _eac .depthBand (_agdd -_ebe ,_dcac +_ebe ){if len (_eac ._dbfe [_ebce ])==0{continue ;};for _ ,_gdca :=range _eac ._dbfe [_ebce ]{if !(_agdd -_ebe <=_gdca ._fbfd &&_gdca ._fbfd <=_dcac +_ebe ){continue ;
};if !_aecbb (_ddgc ,_gdca ){continue ;};_bdae :=2.0*_ec .Abs (_gdca ._dgac -_ddgc ._bfdf )/(_gdca ._dgac +_ddgc ._bfdf );_ddbda :=_ec .Max (_gdca ._dgac /_ddgc ._bfdf ,_ddgc ._bfdf /_gdca ._dgac );_gbfad :=_ec .Min (_bdae ,_ddbda );if _aadc > 0&&_gbfad > _aadc {continue ;
};if _ddgc .blocked (_gdca ){continue ;};if !_daeb {_ddgc .pullWord (_gdca ,_ebce ,_gegf );};_eeca ++;if !_acaf {if _gdca ._fbfd < _agdd {_agdd =_gdca ._fbfd ;};if _gdca ._fbfd > _dcac {_dcac =_gdca ._fbfd ;};};if _daeb {break ;};};};if !_daeb {_eac .applyRemovals (_gegf );
};return _eeca ;};func (_gecgc *textLine )toTextMarks (_deff *int )[]TextMark {var _bbgfd []TextMark ;for _ ,_fbbe :=range _gecgc ._effba {if _fbbe ._ddbb {_bbgfd =_ddfd (_bbgfd ,_deff ,"\u0020");};_decf :=_fbbe .toTextMarks (_deff );_bbgfd =append (_bbgfd ,_decf ...);
};return _bbgfd ;};func (_bfbe intSet )has (_gfead int )bool {_ ,_eedb :=_bfbe [_gfead ];return _eedb };func (_aefg *wordBag )depthRange (_ceg ,_edcc int )[]int {var _bcba []int ;for _fegf :=range _aefg ._dbfe {if _ceg <=_fegf &&_fegf <=_edcc {_bcba =append (_bcba ,_fegf );
};};if len (_bcba )==0{return nil ;};_f .Ints (_bcba );return _bcba ;};func (_bdef *shapesState )addPoint (_bbda ,_aacd float64 ){_bccd :=_bdef .establishSubpath ();_fce :=_bdef .devicePoint (_bbda ,_aacd );if _bccd ==nil {_bdef ._bdce =true ;_bdef ._cfbg =_fce ;
}else {_bccd .add (_fce );};};

// String returns a description of `l`.
func (_dabc *textLine )String ()string {return _a .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_dabc ._bcbff ,_dabc .PdfRectangle ,_dabc ._acg ,_dabc .text ());
};func (_fggb *ruling )alignsSec (_cbff *ruling )bool {const _gbca =_dbbg +1.0;return _fggb ._cggaf -_gbca <=_cbff ._dgec &&_cbff ._cggaf -_gbca <=_fggb ._dgec ;};func (_bcbf *textObject )getFontDirect (_abdg string )(*_gd .PdfFont ,error ){_faba ,_ebfb :=_bcbf .getFontDict (_abdg );
if _ebfb !=nil {return nil ,_ebfb ;};_afaa ,_ebfb :=_gd .NewPdfFontFromPdfObject (_faba );if _ebfb !=nil {_fe .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abdg ,_ebfb );
};return _afaa ,_ebfb ;};const (_gdg ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_efd ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_ca ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
const _gbab =1.0/1000.0;

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ï¬ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_ccc *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _ccc ==nil {return nil ,_b .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_a .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_gggb :=len (_ccc ._aed );if _gggb ==0{return _ccc ,nil ;};if start < _ccc ._aed [0].Offset {start =_ccc ._aed [0].Offset ;};if end > _ccc ._aed [_gggb -1].Offset +1{end =_ccc ._aed [_gggb -1].Offset +1;};_dgc :=_f .Search (_gggb ,func (_agea int )bool {return _ccc ._aed [_agea ].Offset +len (_ccc ._aed [_agea ].Text )-1>=start });
if !(0<=_dgc &&_dgc < _gggb ){_ebbf :=_a .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_dgc ,_gggb ,_ccc ._aed [0],_ccc ._aed [_gggb -1]);
return nil ,_ebbf ;};_bfc :=_f .Search (_gggb ,func (_daba int )bool {return _ccc ._aed [_daba ].Offset > end -1});if !(0<=_bfc &&_bfc < _gggb ){_dace :=_a .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_bfc ,_gggb ,_ccc ._aed [0],_ccc ._aed [_gggb -1]);
return nil ,_dace ;};if _bfc <=_dgc {return nil ,_a .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_dgc ,_bfc );
};return &TextMarkArray {_aed :_ccc ._aed [_dgc :_bfc ]},nil ;};func (_bbgd lineRuling )xMean ()float64 {return 0.5*(_bbgd ._bcde .X +_bbgd ._bdfcd .X )};func _adcb (_bfdfgc map[int ]intSet )[]int {_eacac :=make ([]int ,0,len (_bfdfgc ));for _eaaf :=range _bfdfgc {_eacac =append (_eacac ,_eaaf );
};_f .Ints (_eacac );return _eacac ;};func (_aabdb *textPara )bbox ()_gd .PdfRectangle {return _aabdb .PdfRectangle };func (_agaec paraList )findTextTables ()[]*textTable {var _eabd []*textTable ;for _ ,_geba :=range _agaec {if _geba .taken ()||_geba .Width ()==0{continue ;
};_bgag :=_geba .isAtom ();if _bgag ==nil {continue ;};_bgag .growTable ();if _bgag ._dfagg *_bgag ._fdeda < _acfc {continue ;};_bgag .markCells ();_bgag .log ("\u0067\u0072\u006fw\u006e");_eabd =append (_eabd ,_bgag );};return _eabd ;};func (_aeed *textTable )getDown ()paraList {_efcde :=make (paraList ,_aeed ._dfagg );
for _aaccf :=0;_aaccf < _aeed ._dfagg ;_aaccf ++{_fbcf :=_aeed .get (_aaccf ,_aeed ._fdeda -1)._bdbb ;if _fbcf .taken (){return nil ;};_efcde [_aaccf ]=_fbcf ;};for _eecd :=0;_eecd < _aeed ._dfagg -1;_eecd ++{if _efcde [_eecd ]._bbdf !=_efcde [_eecd +1]{return nil ;
};};return _efcde ;};func (_gaa *shapesState )stroke (_geg *[]pathSection ){_ggfg :=pathSection {_eebe :_gaa ._bbfdc ,Color :_gaa ._ffbf .getStrokeColor ()};*_geg =append (*_geg ,_ggfg );if _caga {_a .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_geg ),_gaa ,_gaa ._ffbf .getStrokeColor (),_ggfg .bbox ());
if _efbba {for _gff ,_fdfc :=range _gaa ._bbfdc {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gff ,_fdfc );if _gff ==10{break ;};};};};};func (_acbg paraList )topoOrder ()[]int {if _bgcc {_fe .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_gddd :=len (_acbg );_cdca :=make ([]bool ,_gddd );_acbf :=make ([]int ,0,_gddd );_beae :=_acbg .llyOrdering ();var _gcbbg func (_eacf int );_gcbbg =func (_adba int ){_cdca [_adba ]=true ;for _cadbf :=0;_cadbf < _gddd ;_cadbf ++{if !_cdca [_cadbf ]{if _acbg .readBefore (_beae ,_adba ,_cadbf ){_gcbbg (_cadbf );
};};};_acbf =append (_acbf ,_adba );};for _gbg :=0;_gbg < _gddd ;_gbg ++{if !_cdca [_gbg ]{_gcbbg (_gbg );};};return _aaeg (_acbf );};func (_dbfg compositeCell )parasBBox ()(paraList ,_gd .PdfRectangle ){return _dbfg .paraList ,_dbfg .PdfRectangle ;};func _ebad (_gee _gd .PdfRectangle )textState {return textState {_ebgf :100,_bge :RenderModeFill ,_cfg :_gee };
};func _geae (_dgga []*textWord ,_dceed float64 ,_degd ,_cfgd rulingList )*wordBag {_eegb :=_cgeb (_dgga [0],_dceed ,_degd ,_cfgd );for _ ,_edfe :=range _dgga [1:]{_abbeg :=_eabe (_edfe ._fbfd );_eegb ._dbfe [_abbeg ]=append (_eegb ._dbfe [_abbeg ],_edfe );
_eegb .PdfRectangle =_cbcaf (_eegb .PdfRectangle ,_edfe .PdfRectangle );};_eegb .sort ();return _eegb ;};func _bgcee (_edcae []pathSection )rulingList {_ecfce (_edcae );if _caga {_fe .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_edcae ));
};var _feca rulingList ;for _ ,_agefc :=range _edcae {for _ ,_ccdc :=range _agefc ._eebe {if !_ccdc .isQuadrilateral (){if _caga {_fe .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_ccdc );
};continue ;};if _deafe ,_fagg :=_ccdc .makeRectRuling (_agefc .Color );_fagg {_feca =append (_feca ,_deafe );}else {if _aggd {_fe .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_ccdc );
};};};};if _caga {_fe .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_feca .String ());};return _feca ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_gd .PdfPageResources )(*Extractor ,error ){const _deb ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_gda :=&Extractor {_cc :contents ,_cdb :resources ,_fcc :map[string ]fontEntry {},_fa :map[string ]textResult {}};
_bfe .TrackUse (_deb );return _gda ,nil ;};func _dfage (_acca _gd .PdfRectangle )*ruling {return &ruling {_eacc :_efcad ,_egdcc :_acca .Llx ,_cggaf :_acca .Lly ,_dgec :_acca .Ury };};func _gded (_aeaa bounded )float64 {return -_aeaa .bbox ().Lly };

// String returns a human readable description of `path`.
func (_edf *subpath )String ()string {_fega :=_edf ._gdcg ;_gcca :=len (_fega );if _gcca <=5{return _a .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_gcca ,_fega );};return _a .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_gcca ,_fega [0],_fega [1],_fega [_gcca -1]);
};func (_aebe rectRuling )asRuling ()(*ruling ,bool ){_gcaa :=ruling {_eacc :_aebe ._dfcac ,Color :_aebe .Color ,_cbbab :_bdeb };switch _aebe ._dfcac {case _efcad :_gcaa ._egdcc =0.5*(_aebe .Llx +_aebe .Urx );_gcaa ._cggaf =_aebe .Lly ;_gcaa ._dgec =_aebe .Ury ;
_eaec ,_bdabc :=_aebe .checkWidth (_aebe .Llx ,_aebe .Urx );if !_bdabc {if _aggd {_fe .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_aebe );
};return nil ,false ;};_gcaa ._bbfcd =_eaec ;case _gccg :_gcaa ._egdcc =0.5*(_aebe .Lly +_aebe .Ury );_gcaa ._cggaf =_aebe .Llx ;_gcaa ._dgec =_aebe .Urx ;_dggfc ,_gffb :=_aebe .checkWidth (_aebe .Lly ,_aebe .Ury );if !_gffb {if _aggd {_fe .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_aebe );
};return nil ,false ;};_gcaa ._bbfcd =_dggfc ;default:_fe .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_aebe ._dfcac );return nil ,false ;};return &_gcaa ,true ;};const (_ccga rulingKind =iota ;
_gccg ;_efcad ;);func _bacf (_gdbe ,_gecd _gd .PdfRectangle )bool {return _gecd .Llx <=_gdbe .Urx &&_gdbe .Llx <=_gecd .Urx ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_gd .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func _ecfc (_cgafe _gd .PdfRectangle )*ruling {return &ruling {_eacc :_gccg ,_egdcc :_cgafe .Ury ,_cggaf :_cgafe .Llx ,_dgec :_cgafe .Urx };};func _cdage (_gdfad ,_gfecg ,_fdadf ,_fbbcf *textPara )*textTable {_bggb :=&textTable {_dfagg :2,_fdeda :2,_adfd :make (map[uint64 ]*textPara ,4)};
_bggb .put (0,0,_gdfad );_bggb .put (1,0,_gfecg );_bggb .put (0,1,_fdadf );_bggb .put (1,1,_fbbcf );return _bggb ;};func (_ddef *textPara )taken ()bool {return _ddef ==nil ||_ddef ._dbbf };var (_dedgc =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_cddc *wordBag )empty (_cffc int )bool {_ ,_bbgbg :=_cddc ._dbfe [_cffc ];return !_bbgbg };func _cbec (_eddb int ,_bbfdcf func (int ,int )bool )[]int {_eacbe :=make ([]int ,_eddb );for _beage :=range _eacbe {_eacbe [_beage ]=_beage ;};_f .Slice (_eacbe ,func (_ggagc ,_ccfg int )bool {return _bbfdcf (_eacbe [_ggagc ],_eacbe [_ccfg ])});
return _eacbe ;};func _affcg (_gdda string )(string ,bool ){_gfdgg :=[]rune (_gdda );if len (_gfdgg )!=1{return "",false ;};_fgbf ,_fggbg :=_dedgc [_gfdgg [0]];return _fgbf ,_fggbg ;};func (_dfe *imageExtractContext )extractContentStreamImages (_ead string ,_gbf *_gd .PdfPageResources )error {_afg :=_cb .NewContentStreamParser (_ead );
_fdf ,_ffc :=_afg .Parse ();if _ffc !=nil {return _ffc ;};if _dfe ._abc ==nil {_dfe ._abc =map[*_af .PdfObjectStream ]*cachedImage {};};if _dfe ._aba ==nil {_dfe ._aba =&ImageExtractOptions {};};_dacd :=_cb .NewContentStreamProcessor (*_fdf );_dacd .AddHandler (_cb .HandlerConditionEnumAllOperands ,"",_dfe .processOperand );
return _dacd .Process (_gbf );};func (_gfda *ruling )encloses (_bfdca ,_bagbe float64 )bool {return _gfda ._cggaf -_bbge <=_bfdca &&_bagbe <=_gfda ._dgec +_bbge ;};func _cbgb (_cdfc *wordBag ,_dfd *textWord ,_bafg float64 )bool {return _cdfc .Urx <=_dfd .Llx &&_dfd .Llx < _cdfc .Urx +_bafg ;
};type compositeCell struct{_gd .PdfRectangle ;paraList ;};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;};type structTreeRoot struct{_aegf []structElement ;_agag string ;};var _cd =false ;func (_fcbef intSet )del (_dfbg int ){delete (_fcbef ,_dfbg )};func (_abccf *textObject )renderText (_abbd _af .PdfObject ,_bfb []byte ,_cde int )error {if _abccf ._ddg {_fe .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_gbff :=_abccf .getCurrentFont ();_dbcb :=_gbff .BytesToCharcodes (_bfb );_daed ,_ebdgc ,_geb :=_gbff .CharcodesToStrings (_dbcb );if _geb > 0{_fe .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_ebdgc ,_geb );
};_abccf ._bacc ._aafg +=_ebdgc ;_abccf ._bacc ._aea +=_geb ;_gadc :=_abccf ._bacc ;_faaf :=_gadc ._afb ;_efa :=_gadc ._ebgf /100.0;_fdeb :=_gbab ;if _gbff .Subtype ()=="\u0054\u0079\u0070e\u0033"{_fdeb =1;};_ccfd ,_bbd :=_gbff .GetRuneMetrics (' ');if !_bbd {_ccfd ,_bbd =_gbff .GetCharMetrics (32);
};if !_bbd {_ccfd ,_ =_gd .DefaultFont ().GetRuneMetrics (' ');};_ddbe :=_ccfd .Wx *_fdeb ;_fe .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_ddbe ,_daed ,_gbff ,_faaf );
_eee :=_cbc .NewMatrix (_faaf *_efa ,0,0,_faaf ,0,_gadc ._eada );if _acdc {_fe .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_dbcb ),_dbcb ,_daed );
};_fe .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_dbcb ),_dbcb ,len (_daed ));_ffaf :=_abccf .getFillColor ();
_eadaf :=_abccf .getStrokeColor ();for _gab ,_bdbe :=range _daed {_dda :=[]rune (_bdbe );if len (_dda )==1&&_dda [0]=='\x00'{continue ;};_gdgf :=_dbcb [_gab ];_eadc :=_abccf ._fde .CTM .Mult (_abccf ._cffb ).Mult (_eee );_gcgg :=0.0;if len (_dda )==1&&_dda [0]==32{_gcgg =_gadc ._baca ;
};_aabb ,_cacd :=_gbff .GetCharMetrics (_gdgf );if !_cacd {_fe .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_gdgf ,_dda ,_dda ,_gbff );
return _a .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_gbff .String (),_gdgf );};_egfe :=_cbc .Point {X :_aabb .Wx *_fdeb ,Y :_aabb .Wy *_fdeb };
_cfae :=_cbc .Point {X :(_egfe .X *_faaf +_gcgg )*_efa };_fdcc :=_cbc .Point {X :(_egfe .X *_faaf +_gadc ._defe +_gcgg )*_efa };if _acdc {_fe .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_faaf ,_gadc ._defe ,_gadc ._baca ,_efa );
_fe .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_egfe ,_cfae ,_fdcc );};_dacc :=_debg (_cfae );_cgbd :=_debg (_fdcc );_ccedd :=_abccf ._fde .CTM .Mult (_abccf ._cffb ).Mult (_dacc );
if _ebab {_fe .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_abccf ._fde .CTM ,_abccf ._cffb ,_cgbd ,_acae (_abccf ._fde .CTM .Mult (_abccf ._cffb ).Mult (_cgbd )),_dacc ,_ccedd ,_acae (_ccedd ));
};_cgdg ,_caac :=_abccf .newTextMark (_dac .ExpandLigatures (_dda ),_eadc ,_acae (_ccedd ),_ec .Abs (_ddbe *_eadc .ScalingFactorX ()),_gbff ,_abccf ._bacc ._defe ,_ffaf ,_eadaf ,_abbd ,_daed ,_gab ,_cde );if !_caac {_fe .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _gbff ==nil {_fe .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _gbff .Encoder ()==nil {_fe .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_gbff );
}else {if _gedg ,_fdb :=_gbff .Encoder ().CharcodeToRune (_gdgf );_fdb {_cgdg ._dbge =string (_gedg );};};_fe .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_gab ,_gdgf ,_cgdg ,_eadc );
_abccf ._dead =append (_abccf ._dead ,&_cgdg );_abccf ._cffb .Concat (_cgbd );};return nil ;};func _fgaa (_defc map[int ][]float64 )string {_gbbf :=_gaffe (_defc );_egdgc :=make ([]string ,len (_defc ));for _acfd ,_bdebc :=range _gbbf {_egdgc [_acfd ]=_a .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_bdebc ,_defc [_bdebc ]);
};return _a .Sprintf ("\u007b\u0025\u0073\u007d",_df .Join (_egdgc ,"\u002c\u0020"));};func (_bdfd rectRuling )checkWidth (_aagc ,_ggcf float64 )(float64 ,bool ){_ebgg :=_ggcf -_aagc ;_bddf :=_ebgg <=_dbbg ;return _ebgg ,_bddf ;};func (_abeff compositeCell )split (_dbgga ,_aagg []float64 )*textTable {_bggc :=len (_dbgga )+1;
_gdbbd :=len (_aagg )+1;if _bbfbe {_fe .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_gdbbd ,_bggc ,_abeff ,_dbgga ,_aagg );
_a .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_abeff .paraList ));for _acac ,_ggff :=range _abeff .paraList {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_acac ,_ggff .String ());};_a .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_abeff .lines ()));
for _eabf ,_afgd :=range _abeff .lines (){_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eabf ,_afgd );};};_dbgga =_bgfb (_dbgga ,_abeff .Ury ,_abeff .Lly );_aagg =_bgfb (_aagg ,_abeff .Llx ,_abeff .Urx );_cdgb :=make (map[uint64 ]*textPara ,_gdbbd *_bggc );
_cbbad :=textTable {_dfagg :_gdbbd ,_fdeda :_bggc ,_adfd :_cdgb };_ffge :=_abeff .paraList ;_f .Slice (_ffge ,func (_eefe ,_eacd int )bool {_gggd ,_edgce :=_ffge [_eefe ],_ffge [_eacd ];_bedf ,_cfgee :=_gggd .Lly ,_edgce .Lly ;if _bedf !=_cfgee {return _bedf < _cfgee ;
};return _gggd .Llx < _edgce .Llx ;});_fcda :=make (map[uint64 ]_gd .PdfRectangle ,_gdbbd *_bggc );for _cgceb ,_fdfcd :=range _dbgga [1:]{_cfcd :=_dbgga [_cgceb ];for _bfcdf ,_gegea :=range _aagg [1:]{_fecd :=_aagg [_bfcdf ];_fcda [_beag (_bfcdf ,_cgceb )]=_gd .PdfRectangle {Llx :_fecd ,Urx :_gegea ,Lly :_fdfcd ,Ury :_cfcd };
};};if _bbfbe {_fe .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_a .Printf ("\u0020\u0020\u0020\u0020");for _abcag :=0;_abcag < _gdbbd ;
_abcag ++{_a .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_abcag );};_a .Println ();for _bcebg :=0;_bcebg < _bggc ;_bcebg ++{_a .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_bcebg );for _dcfa :=0;_dcfa < _gdbbd ;_dcfa ++{_a .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_fcda [_beag (_dcfa ,_bcebg )]);
};_a .Println ();};};_dabd :=func (_bdagd *textLine )(int ,int ){for _febf :=0;_febf < _bggc ;_febf ++{for _afgf :=0;_afgf < _gdbbd ;_afgf ++{if _adgg (_fcda [_beag (_afgf ,_febf )],_bdagd .PdfRectangle ){return _afgf ,_febf ;};};};return -1,-1;};_aabfg :=make (map[uint64 ][]*textLine ,_gdbbd *_bggc );
for _ ,_abdd :=range _ffge .lines (){_cefg ,_eedd :=_dabd (_abdd );if _cefg < 0{continue ;};_aabfg [_beag (_cefg ,_eedd )]=append (_aabfg [_beag (_cefg ,_eedd )],_abdd );};for _dbbcc :=0;_dbbcc < len (_dbgga )-1;_dbbcc ++{_ceegc :=_dbgga [_dbbcc ];_efca :=_dbgga [_dbbcc +1];
for _cbce :=0;_cbce < len (_aagg )-1;_cbce ++{_fcfe :=_aagg [_cbce ];_bcgg :=_aagg [_cbce +1];_gfbc :=_gd .PdfRectangle {Llx :_fcfe ,Urx :_bcgg ,Lly :_efca ,Ury :_ceegc };_bcag :=_aabfg [_beag (_cbce ,_dbbcc )];if len (_bcag )==0{continue ;};_aeae :=_dgcd (_gfbc ,_bcag );
_cbbad .put (_cbce ,_dbbcc ,_aeae );};};return &_cbbad ;};func (_abbb rulingList )isActualGrid ()(rulingList ,bool ){_dgee ,_bffd :=_abbb .augmentGrid ();if !(len (_dgee )>=_gdbed +1&&len (_bffd )>=_acfb +1){if _caga {_fe .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_dgee ),len (_bffd ),_gdbed +1,_acfb +1);
};return nil ,false ;};if _caga {_fe .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_abbb ,len (_dgee )>=2,len (_bffd )>=2,len (_dgee )>=2&&len (_bffd )>=2);
for _bbdc ,_deed :=range _abbb {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_bbdc ,_deed );};};if _cecd {_aggec ,_fagb :=_dgee [0],_dgee [len (_dgee )-1];_gedc ,_edd :=_bffd [0],_bffd [len (_bffd )-1];if !(_dcgfe (_aggec ._egdcc -_gedc ._cggaf )&&_dcgfe (_fagb ._egdcc -_gedc ._dgec )&&_dcgfe (_gedc ._egdcc -_aggec ._dgec )&&_dcgfe (_edd ._egdcc -_aggec ._cggaf )){if _caga {_fe .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_aggec ,_fagb ,_gedc ,_edd );
};return nil ,false ;};}else {if !_dgee .aligned (){if _gabg {_fe .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_dgee ));
};return nil ,false ;};if !_bffd .aligned (){if _caga {_fe .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_bffd ));
};return nil ,false ;};};_aeac :=append (_dgee ,_bffd ...);return _aeac ,true ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_caab *PageText )ApplyArea (bbox _gd .PdfRectangle ){_bfba :=make ([]*textMark ,0,len (_caab ._gbba ));for _ ,_bcg :=range _caab ._gbba {if _eafa (_bcg .bbox (),bbox ){_bfba =append (_bfba ,_bcg );};};var _gaba paraList ;_bddb :=len (_bfba );for _afbd :=0;
_afbd < 360&&_bddb > 0;_afbd +=90{_afebc :=make ([]*textMark ,0,len (_bfba )-_bddb );for _ ,_bce :=range _bfba {if _bce ._dgca ==_afbd {_afebc =append (_afebc ,_bce );};};if len (_afebc )> 0{_bfgd :=_abde (_afebc ,_caab ._deaf ,nil ,nil ,_caab ._fdec ._efbde );
_gaba =append (_gaba ,_bfgd ...);_bddb -=len (_afebc );};};_fba :=new (_fc .Buffer );_gaba .writeText (_fba );_caab ._gecf =_fba .String ();_caab ._gcga =_gaba .toTextMarks ();_caab ._bbf =_gaba .tables ();};func (_dbdc *textLine )text ()string {var _dacf []string ;
for _ ,_cgcf :=range _dbdc ._effba {if _cgcf ._ddbb {_dacf =append (_dacf ,"\u0020");};_dacf =append (_dacf ,_cgcf ._eaecc );};return _df .Join (_dacf ,"");};

// String returns a human readable description of `s`.
func (_ceebc intSet )String ()string {var _baag []int ;for _cefeca :=range _ceebc {if _ceebc .has (_cefeca ){_baag =append (_baag ,_cefeca );};};_f .Ints (_baag );return _a .Sprintf ("\u0025\u002b\u0076",_baag );};func _eabe (_acc float64 )int {var _gace int ;
if _acc >=0{_gace =int (_acc /_feef );}else {_gace =int (_acc /_feef )-1;};return _gace ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _gd .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_gd .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _dd .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _dd .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _af .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_egda bool ;_ada *TextTable ;};func _aagf (_agde ,_aedc bounded )float64 {_faec :=_bea (_agde ,_aedc );if !_ddfbb (_faec ){return _faec ;};return _gebbb (_agde ,_aedc );};func (_ddga *structTreeRoot )buildList (_egef map[int ][]*textLine ,_dcea _af .PdfObject )[]*list {if _ddga ==nil {_fe .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _bbgc *structElement ;_cfdc :=[]structElement {};if len (_ddga ._aegf )==1{_ddaf :=_ddga ._aegf [0]._dbfb ;if _ddaf =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_ddaf =="\u0053\u0065\u0063\u0074"||_ddaf =="\u0050\u0061\u0072\u0074"||_ddaf =="\u0044\u0069\u0076"||_ddaf =="\u0041\u0072\u0074"{_bbgc =&_ddga ._aegf [0];
};}else {_bbgc =&structElement {_bdcb :_ddga ._aegf ,_dbfb :_ddga ._agag };};if _bbgc ==nil {_fe .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_fbec :=range _bbgc ._bdcb {if _fbec ._dbfb =="\u004c"{_cfdc =append (_cfdc ,_fbec );}else if _fbec ._dbfb =="\u0054\u0061\u0062l\u0065"{_ffcc :=_ggaa (_fbec );_cfdc =append (_cfdc ,_ffcc ...);};};_cga :=_fabe (_cfdc ,_egef ,_dcea );
var _dgbf []*list ;for _ ,_fdba :=range _cga {_babc :=_dece (_fdba );_dgbf =append (_dgbf ,_babc ...);};return _dgbf ;};type textPara struct{_gd .PdfRectangle ;_gdce _gd .PdfRectangle ;_aega []*textLine ;_ecga *textTable ;_dbbf bool ;_begb bool ;_dddb *textPara ;
_bbdf *textPara ;_dgcf *textPara ;_bdbb *textPara ;_egge []list ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func _bea (_caef ,_fafg bounded )float64 {return _gded (_caef )-_gded (_fafg )};func _aggc (_cdff []*textLine )map[float64 ][]*textLine {_f .Slice (_cdff ,func (_baggd ,_caec int )bool {return _cdff [_baggd ]._bcbff < _cdff [_caec ]._bcbff });
_bbfc :=map[float64 ][]*textLine {};for _ ,_cddb :=range _cdff {_cdfb :=_ccgb (_cddb );_cdfb =_ec .Round (_cdfb );_bbfc [_cdfb ]=append (_bbfc [_cdfb ],_cddb );};return _bbfc ;};func (_fedef *textTable )reduce ()*textTable {_caaag :=make ([]int ,0,_fedef ._fdeda );
_ffecg :=make ([]int ,0,_fedef ._dfagg );for _cbef :=0;_cbef < _fedef ._fdeda ;_cbef ++{if !_fedef .emptyCompositeRow (_cbef ){_caaag =append (_caaag ,_cbef );};};for _acef :=0;_acef < _fedef ._dfagg ;_acef ++{if !_fedef .emptyCompositeColumn (_acef ){_ffecg =append (_ffecg ,_acef );
};};if len (_caaag )==_fedef ._fdeda &&len (_ffecg )==_fedef ._dfagg {return _fedef ;};_dcce :=textTable {_agfdb :_fedef ._agfdb ,_dfagg :len (_ffecg ),_fdeda :len (_caaag ),_adfd :make (map[uint64 ]*textPara ,len (_ffecg )*len (_caaag ))};if _bbfbe {_fe .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_fedef ._dfagg ,_fedef ._fdeda ,len (_ffecg ),len (_caaag ));
_fe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_ffecg );_fe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_caaag );};for _cfcae ,_gagg :=range _caaag {for _dabcd ,_eded :=range _ffecg {_ddca ,_dcedc :=_fedef .getComposite (_eded ,_gagg );
if _ddca ==nil {continue ;};if _bbfbe {_a .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_dabcd ,_cfcae ,_eded ,_gagg ,_abdb (_ddca .merge ().text (),50));};_dcce .putComposite (_dabcd ,_cfcae ,_ddca ,_dcedc );
};};return &_dcce ;};func (_gbdb *ruling )equals (_egbde *ruling )bool {return _gbdb ._eacc ==_egbde ._eacc &&_cceff (_gbdb ._egdcc ,_egbde ._egdcc )&&_cceff (_gbdb ._cggaf ,_egbde ._cggaf )&&_cceff (_gbdb ._dgec ,_egbde ._dgec );};func (_gcdg paraList )extractTables (_eafb []gridTiling )paraList {if _bbfbe {_fe .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gcdg ));
};if len (_gcdg )< _acfc {return _gcdg ;};_gccac :=_gcdg .findTables (_eafb );if _bbfbe {_fe .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_gccac ));
for _fgbddb ,_ffba :=range _gccac {_ffba .log (_a .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_fgbddb ));};};return _gcdg .applyTables (_gccac );};func (_ecbb paraList )reorder (_dabb []int ){_babf :=make (paraList ,len (_ecbb ));
for _eeec ,_afaf :=range _dabb {_babf [_eeec ]=_ecbb [_afaf ];};copy (_ecbb ,_babf );};func (_gcdge *textTable )compositeColCorridors ()map[int ][]float64 {_babb :=make (map[int ][]float64 ,_gcdge ._dfagg );if _bbfbe {_fe .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_gcdge ._dfagg );
};for _deadaa :=0;_deadaa < _gcdge ._dfagg ;_deadaa ++{_babb [_deadaa ]=nil ;};return _babb ;};func (_agaa *textObject )checkOp (_cfd *_cb .ContentStreamOperation ,_dfgd int ,_cfc bool )(_ffcg bool ,_fbd error ){if _agaa ==nil {var _abcb []_af .PdfObject ;
if _dfgd > 0{_abcb =_cfd .Params ;if len (_abcb )> _dfgd {_abcb =_abcb [:_dfgd ];};};_fe .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_cfd .Operand ,_abcb );
};if _dfgd >=0{if len (_cfd .Params )!=_dfgd {if _cfc {_fbd =_b .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cfd .Operand ,_dfgd ,len (_cfd .Params ),_cfd .Params );
return false ,_fbd ;};};return true ,nil ;};func (_dcb *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_cbe :=make (map[int ]map[*textWord ]struct{},len (_dcb ._dbfe ));for _gebf :=range _dcb ._dbfe {_cbe [_gebf ]=make (map[*textWord ]struct{});
};return _cbe ;};type lineRuling struct{_bdfa rulingKind ;_cacg markKind ;_dd .Color ;_bcde ,_bdfcd _cbc .Point ;};const (_cece =1.0e-6;_cgfeg =1.0e-4;_ecb =10;_feef =6;_eeff =0.5;_fbba =0.12;_bdde =0.19;_abeb =0.04;_adbf =0.04;_cfeg =1.0;_cbfg =0.04;_bcda =0.4;
_fbbg =0.7;_fdgga =1.0;_gdcf =0.1;_ccfc =1.4;_fdeeg =0.46;_egae =0.02;_daccc =0.2;_fcdf =0.5;_aeffb =4;_gaaa =4.0;_acfc =6;_acbe =0.3;_gegfe =0.01;_cfce =0.02;_gdbed =2;_acfb =2;_cadd =500;_afef =4.0;_aaff =4.0;_cfba =0.05;_dbab =0.1;_bbge =2.0;_dbbg =2.0;
_aabe =1.5;_dfef =3.0;_cbed =0.25;);

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_bag *Extractor )ExtractTextWithStats ()(_bbb string ,_faa int ,_dada int ,_eba error ){_daad ,_faa ,_dada ,_eba :=_bag .ExtractPageText ();if _eba !=nil {return "",_faa ,_dada ,_eba ;};return _daad .Text (),_faa ,_dada ,nil ;};func (_cbga *textLine )appendWord (_agbeg *textWord ){_cbga ._effba =append (_cbga ._effba ,_agbeg );
_cbga .PdfRectangle =_cbcaf (_cbga .PdfRectangle ,_agbeg .PdfRectangle );if _agbeg ._dgac > _cbga ._acg {_cbga ._acg =_agbeg ._dgac ;};if _agbeg ._fbfd > _cbga ._bcbff {_cbga ._bcbff =_agbeg ._fbfd ;};};func (_fcdb *textWord )toTextMarks (_efea *int )[]TextMark {var _acdgg []TextMark ;
for _ ,_ggdfe :=range _fcdb ._eecba {_acdgg =_gadg (_acdgg ,_efea ,_ggdfe .ToTextMark ());};return _acdgg ;};func (_fecb *stateStack )push (_gge *textState ){_bagg :=*_gge ;*_fecb =append (*_fecb ,&_bagg )};const (RenderModeStroke RenderMode =1<<iota ;
RenderModeFill ;RenderModeClip ;);type textLine struct{_gd .PdfRectangle ;_bcbff float64 ;_effba []*textWord ;_acg float64 ;};func (_dcfe *textMark )inDiacriticArea (_eaad *textMark )bool {_faad :=_dcfe .Llx -_eaad .Llx ;_abbc :=_dcfe .Urx -_eaad .Urx ;
_egbd :=_dcfe .Lly -_eaad .Lly ;return _ec .Abs (_faad +_abbc )< _dcfe .Width ()*_fcdf &&_ec .Abs (_egbd )< _dcfe .Height ()*_fcdf ;};func (_bcga *wordBag )removeDuplicates (){if _gca {_fe .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_bcga .text ());
};for _ ,_dffd :=range _bcga .depthIndexes (){if len (_bcga ._dbfe [_dffd ])==0{continue ;};_bebad :=_bcga ._dbfe [_dffd ][0];_fbeg :=_daccc *_bebad ._dgac ;_ccffef :=_bebad ._fbfd ;for _ ,_cdfd :=range _bcga .depthBand (_ccffef ,_ccffef +_fbeg ){_gdbb :=map[*textWord ]struct{}{};
_fafcg :=_bcga ._dbfe [_cdfd ];for _ ,_ccebe :=range _fafcg {if _ ,_bead :=_gdbb [_ccebe ];_bead {continue ;};for _ ,_agebc :=range _fafcg {if _ ,_gcfcg :=_gdbb [_agebc ];_gcfcg {continue ;};if _agebc !=_ccebe &&_agebc ._eaecc ==_ccebe ._eaecc &&_ec .Abs (_agebc .Llx -_ccebe .Llx )< _fbeg &&_ec .Abs (_agebc .Urx -_ccebe .Urx )< _fbeg &&_ec .Abs (_agebc .Lly -_ccebe .Lly )< _fbeg &&_ec .Abs (_agebc .Ury -_ccebe .Ury )< _fbeg {_gdbb [_agebc ]=struct{}{};
};};};if len (_gdbb )> 0{_cbcc :=0;for _ ,_adcc :=range _fafcg {if _ ,_decfc :=_gdbb [_adcc ];!_decfc {_fafcg [_cbcc ]=_adcc ;_cbcc ++;};};_bcga ._dbfe [_cdfd ]=_fafcg [:len (_fafcg )-len (_gdbb )];if len (_bcga ._dbfe [_cdfd ])==0{delete (_bcga ._dbfe ,_cdfd );
};};};};};func _efab (_fegba ,_baaa _cbc .Point ,_effbb _dd .Color )(*ruling ,bool ){_fdefb :=lineRuling {_bcde :_fegba ,_bdfcd :_baaa ,_bdfa :_cfbe (_fegba ,_baaa ),Color :_effbb };if _fdefb ._bdfa ==_ccga {return nil ,false ;};return _fdefb .asRuling ();
};func (_eb *imageExtractContext )extractXObjectImage (_aga *_af .PdfObjectName ,_fb _cb .GraphicsState ,_ecg *_gd .PdfPageResources )error {_ebf ,_ :=_ecg .GetXObjectByName (*_aga );if _ebf ==nil {return nil ;};_gba ,_fee :=_eb ._abc [_ebf ];if !_fee {_cgd ,_aca :=_ecg .GetXObjectImageByName (*_aga );
if _aca !=nil {return _aca ;};if _cgd ==nil {return nil ;};_aef ,_aca :=_cgd .ToImage ();if _aca !=nil {return _aca ;};var _ge _ee .Image ;if _cgd .SMask !=nil {_ge ,_aca =_deaffa (_cgd .SMask ,_dd .Opaque );if _aca !=nil {_fe .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _ge !=nil {_fgfd ,_ceb :=_aef .ToGoImage ();if _ceb !=nil {return _ceb ;};_fgfd =_feae (_fgfd ,_ge );switch _cgd .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_aef ,_ceb =_gd .ImageHandling .NewGrayImageFromGoImage (_fgfd );
if _ceb !=nil {return _ceb ;};default:_aef ,_ceb =_gd .ImageHandling .NewImageFromGoImage (_fgfd );if _ceb !=nil {return _ceb ;};};};_gba =&cachedImage {_bde :_aef ,_dbb :_cgd .ColorSpace };_eb ._abc [_ebf ]=_gba ;};_eaf :=_gba ._bde ;_abae :=_gba ._dbb ;
_dc ,_gacd :=_abae .ImageToRGB (*_eaf );if _gacd !=nil {return _gacd ;};_fe .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_fb .CTM .String ());_dcd :=ImageMark {Image :&_dc ,Width :_fb .CTM .ScalingFactorX (),Height :_fb .CTM .ScalingFactorY (),Angle :_fb .CTM .Angle ()};
_dcd .X ,_dcd .Y =_fb .CTM .Translation ();_eb ._cfaf =append (_eb ._cfaf ,_dcd );_eb ._afda ++;return nil ;};func (_bfde rulingList )tidied (_gbc string )rulingList {_faca :=_bfde .removeDuplicates ();_faca .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");
_dbag :=_faca .snapToGroups ();if _dbag ==nil {return nil ;};_dbag .sort ();if _caga {_fe .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_gbc ,len (_bfde ),len (_faca ),len (_dbag ));
};_dbag .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _dbag ;};

// Elements returns the TextMarks in `ma`.
func (_bgf *TextMarkArray )Elements ()[]TextMark {return _bgf ._aed };type textObject struct{_bbgb *Extractor ;_afeb *_gd .PdfPageResources ;_fde _cb .GraphicsState ;_bacc *textState ;_efeg *stateStack ;_cffb _cbc .Matrix ;_fbff _cbc .Matrix ;_dead []*textMark ;
_ddg bool ;};func _dcgfe (_dddf float64 )bool {return _ec .Abs (_dddf )< _dbbg };func (_gdcfb *textTable )get (_ccgac ,_dadf int )*textPara {return _gdcfb ._adfd [_beag (_ccgac ,_dadf )]};type gridTiling struct{_gd .PdfRectangle ;_cfac []float64 ;_afdca []float64 ;
_fdbd map[float64 ]map[float64 ]gridTile ;};const _eafd =20;func _dbdf (_afff ,_bddc *textPara )bool {if _afff ._begb ||_bddc ._begb {return true ;};return _ddfbb (_afff .depth ()-_bddc .depth ());};const (_fegc =false ;_agcg =false ;_ded =false ;_ebab =false ;
_fagd =false ;_acdc =false ;_dfdc =false ;_bgcc =false ;_dagfa =false ;_gdaf =_dagfa &&true ;_gdba =_gdaf &&false ;_gca =_dagfa &&true ;_bbfbe =false ;_decg =_bbfbe &&false ;_aceec =_bbfbe &&true ;_caga =false ;_efbba =_caga &&false ;_gabg =_caga &&false ;
_faaga =_caga &&true ;_aggd =_caga &&false ;_bcfe =_caga &&false ;);func (_efec rulingList )aligned ()bool {if len (_efec )< 2{return false ;};_adcg :=make (map[*ruling ]int );_adcg [_efec [0]]=0;for _ ,_gdgb :=range _efec [1:]{_bcge :=false ;for _ccdca :=range _adcg {if _gdgb .gridIntersecting (_ccdca ){_adcg [_ccdca ]++;
_bcge =true ;break ;};};if !_bcge {_adcg [_gdgb ]=0;};};_dbcbc :=0;for _ ,_ecfg :=range _adcg {if _ecfg ==0{_dbcbc ++;};};_abdc :=float64 (_dbcbc )/float64 (len (_efec ));_acce :=_abdc <=1.0-_cbed ;if _caga {_fe .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_acce ,_abdc ,_dbcbc ,len (_efec ),_efec .String ());
};return _acce ;};func _fabe (_cfegc []structElement ,_gccc map[int ][]*textLine ,_ecfb _af .PdfObject )[]*list {_aece :=[]*list {};for _ ,_aeec :=range _cfegc {_gegff :=_aeec ._bdcb ;_ggag :=int (_aeec ._fbbb );_agff :=_aeec ._dbfb ;_efee :=[]*textLine {};
_aaaa :=[]*list {};_cffca :=_aeec ._gccf ;_dadb ,_ddgdf :=(_cffca .(*_af .PdfObjectReference ));if !_ddgdf {_fe .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _ggag !=-1&&_dadb !=nil {if _gcbf ,_edgde :=_gccc [_ggag ];_edgde {if _egec ,_egde :=_ecfb .(*_af .PdfIndirectObject );_egde {_ebcab :=_egec .PdfObjectReference ;if _bf .DeepEqual (*_dadb ,_ebcab ){_efee =_gcbf ;};};};};if _gegff !=nil {_aaaa =_fabe (_gegff ,_gccc ,_ecfb );
};_acgc :=_gacag (_efee ,_agff ,_aaaa );_aece =append (_aece ,_acgc );};return _aece ;};func (_ffgab intSet )add (_efbca int ){_ffgab [_efbca ]=struct{}{}};func (_ebcb rulingList )splitSec ()[]rulingList {_f .Slice (_ebcb ,func (_afea ,_cfca int )bool {_bdaa ,_baega :=_ebcb [_afea ],_ebcb [_cfca ];
if _bdaa ._cggaf !=_baega ._cggaf {return _bdaa ._cggaf < _baega ._cggaf ;};return _bdaa ._dgec < _baega ._dgec ;});_efcd :=make (map[*ruling ]struct{},len (_ebcb ));_bfad :=func (_cddbc *ruling )rulingList {_degcg :=rulingList {_cddbc };_efcd [_cddbc ]=struct{}{};
for _ ,_ebdb :=range _ebcb {if _ ,_febfe :=_efcd [_ebdb ];_febfe {continue ;};for _ ,_gbaaa :=range _degcg {if _ebdb .alignsSec (_gbaaa ){_degcg =append (_degcg ,_ebdb );_efcd [_ebdb ]=struct{}{};break ;};};};return _degcg ;};_ecfdb :=[]rulingList {_bfad (_ebcb [0])};
for _ ,_efdfc :=range _ebcb [1:]{if _ ,_ggeab :=_efcd [_efdfc ];_ggeab {continue ;};_ecfdb =append (_ecfdb ,_bfad (_efdfc ));};return _ecfdb ;};func (_eaacd *subpath )makeRectRuling (_effbg _dd .Color )(*ruling ,bool ){if _aggd {_fe .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_eaacd );
};_acdbd :=_eaacd ._gdcg [:4];_dcde :=make (map[int ]rulingKind ,len (_acdbd ));for _dbea ,_abfdd :=range _acdbd {_aaed :=_eaacd ._gdcg [(_dbea +1)%4];_dcde [_dbea ]=_afbc (_abfdd ,_aaed );if _aggd {_a .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_dbea ,_dcde [_dbea ],_abfdd ,_aaed );
};};if _aggd {_a .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_dcde );};var _fbdda ,_gafeb []int ;for _bbeb ,_gdab :=range _dcde {switch _gdab {case _gccg :_gafeb =append (_gafeb ,_bbeb );case _efcad :_fbdda =append (_fbdda ,_bbeb );
};};if _aggd {_a .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gafeb ),_gafeb );_a .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_fbdda ),_fbdda );
};_ebgad :=(len (_gafeb )==2&&len (_fbdda )==2)||(len (_gafeb )==2&&len (_fbdda )==0&&_faffa (_acdbd [_gafeb [0]],_acdbd [_gafeb [1]]))||(len (_fbdda )==2&&len (_gafeb )==0&&_ggffb (_acdbd [_fbdda [0]],_acdbd [_fbdda [1]]));if _aggd {_a .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gafeb ),len (_fbdda ),_ebgad );
};if !_ebgad {if _aggd {_fe .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_eaacd );_a .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gafeb ),len (_fbdda ),_ebgad );
};return &ruling {},false ;};if len (_fbdda )==0{for _bgef ,_afgdc :=range _dcde {if _afgdc !=_gccg {_fbdda =append (_fbdda ,_bgef );};};};if len (_gafeb )==0{for _eefea ,_dcgbf :=range _dcde {if _dcgbf !=_efcad {_gafeb =append (_gafeb ,_eefea );};};};
if _aggd {_fe .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_gafeb ),len (_fbdda ),len (_acdbd ),_gafeb ,_fbdda ,_acdbd );
};var _dfaec ,_aafa ,_gacfa ,_egdd _cbc .Point ;if _acdbd [_gafeb [0]].Y > _acdbd [_gafeb [1]].Y {_gacfa ,_egdd =_acdbd [_gafeb [0]],_acdbd [_gafeb [1]];}else {_gacfa ,_egdd =_acdbd [_gafeb [1]],_acdbd [_gafeb [0]];};if _acdbd [_fbdda [0]].X > _acdbd [_fbdda [1]].X {_dfaec ,_aafa =_acdbd [_fbdda [0]],_acdbd [_fbdda [1]];
}else {_dfaec ,_aafa =_acdbd [_fbdda [1]],_acdbd [_fbdda [0]];};_ffbdb :=_gd .PdfRectangle {Llx :_dfaec .X ,Urx :_aafa .X ,Lly :_egdd .Y ,Ury :_gacfa .Y };if _ffbdb .Llx > _ffbdb .Urx {_ffbdb .Llx ,_ffbdb .Urx =_ffbdb .Urx ,_ffbdb .Llx ;};if _ffbdb .Lly > _ffbdb .Ury {_ffbdb .Lly ,_ffbdb .Ury =_ffbdb .Ury ,_ffbdb .Lly ;
};_babge :=rectRuling {PdfRectangle :_ffbdb ,_dfcac :_cfcf (_ffbdb ),Color :_effbg };if _babge ._dfcac ==_ccga {if _aggd {_fe .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_gecdg ,_caabg :=_babge .asRuling ();if !_caabg {if _aggd {_fe .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _caga {_a .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_gecdg .String ());
};return _gecdg ,true ;};func (_abab *textObject )setCharSpacing (_def float64 ){if _abab ==nil {return ;};_abab ._bacc ._defe =_def ;if _acdc {_fe .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_def ,_abab ._bacc .String ());
};};func (_bcdf *ruling )gridIntersecting (_eeffa *ruling )bool {return _cceff (_bcdf ._cggaf ,_eeffa ._cggaf )&&_cceff (_bcdf ._dgec ,_eeffa ._dgec );};func _gaad (_gadcb float64 )float64 {return _cgfeg *_ec .Round (_gadcb /_cgfeg )};type paraList []*textPara ;
func (_bccf *shapesState )establishSubpath ()*subpath {_egg ,_bagc :=_bccf .lastpointEstablished ();if !_bagc {_bccf ._bbfdc =append (_bccf ._bbfdc ,_cdbg (_egg ));};if len (_bccf ._bbfdc )==0{return nil ;};_bccf ._bdce =false ;return _bccf ._bbfdc [len (_bccf ._bbfdc )-1];
};func (_gcea *textObject )getStrokeColor ()_dd .Color {return _fggce (_gcea ._fde .ColorspaceStroking ,_gcea ._fde .ColorStroking );};func (_ecad *TextMarkArray )getTextMarkAtOffset (_gfe int )*TextMark {for _ ,_ccbe :=range _ecad ._aed {if _ccbe .Offset ==_gfe {return &_ccbe ;
};};return nil ;};func (_afabe rulingList )sortStrict (){_f .Slice (_afabe ,func (_ddbg ,_dfbe int )bool {_ecacg ,_eeac :=_afabe [_ddbg ],_afabe [_dfbe ];_fcga ,_bbdfe :=_ecacg ._eacc ,_eeac ._eacc ;if _fcga !=_bbdfe {return _fcga > _bbdfe ;};_gfgf ,_cegac :=_ecacg ._egdcc ,_eeac ._egdcc ;
if !_ddfbb (_gfgf -_cegac ){return _gfgf < _cegac ;};_gfgf ,_cegac =_ecacg ._cggaf ,_eeac ._cggaf ;if _gfgf !=_cegac {return _gfgf < _cegac ;};return _ecacg ._dgec < _eeac ._dgec ;});};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_ddd *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_bdd :=PageFonts {};_ab :=_bdd .extractPageResourcesToFont (_ddd ._cdb );if _ab !=nil {return nil ,_ab ;};if previousPageFonts !=nil {for _ ,_fgf :=range previousPageFonts .Fonts {if !_ag (_bdd .Fonts ,_fgf .FontName ){_bdd .Fonts =append (_bdd .Fonts ,_fgf );
};};};return &PageFonts {Fonts :_bdd .Fonts },nil ;};func _ecfce (_aagdc []pathSection ){if _cgfeg < 0.0{return ;};if _caga {_fe .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_aagdc ));
};for _cbad ,_cdbb :=range _aagdc {for _bfeea ,_fafeb :=range _cdbb ._eebe {for _ddgafb ,_ceef :=range _fafeb ._gdcg {_fafeb ._gdcg [_ddgafb ]=_cbc .Point {X :_gaad (_ceef .X ),Y :_gaad (_ceef .Y )};if _caga {_ebeg :=_fafeb ._gdcg [_ddgafb ];if !_cgfg (_ceef ,_ebeg ){_fdbf :=_cbc .Point {X :_ebeg .X -_ceef .X ,Y :_ebeg .Y -_ceef .Y };
_a .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_cbad ,_bfeea ,_ddgafb ,_ceef ,_ebeg ,_fdbf );};};};};};};func (_daccb *structTreeRoot )parseStructTreeRoot (_egfed _af .PdfObject ){if _egfed !=nil {_aeea ,_bbgg :=_af .GetDict (_egfed );
if !_bbgg {_fe .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_aeea .Get ("\u004b");_ffbbc :=_aeea .Get ("\u0054\u0079\u0070\u0065").String ();var _gegd *_af .PdfObjectArray ;switch _cdaee :=K .(type ){case *_af .PdfObjectArray :_gegd =_cdaee ;case *_af .PdfObjectReference :_gegd =_af .MakeArray (K );};_cgdcdg :=[]structElement {};
for _ ,_cbcf :=range _gegd .Elements (){_ccdb :=&structElement {};_ccdb .parseStructElement (_cbcf );_cgdcdg =append (_cgdcdg ,*_ccdb );};_daccb ._aegf =_cgdcdg ;_daccb ._agag =_ffbbc ;};};type textWord struct{_gd .PdfRectangle ;_fbfd float64 ;_eaecc string ;
_eecba []*textMark ;_dgac float64 ;_ddbb bool ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_gd .PdfPage ,options *Options )(*Extractor ,error ){const _be ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_ed ,_gac :=page .GetAllContentStreams ();
if _gac !=nil {return nil ,_gac ;};_fg ,_fd :=page .GetStructTreeRoot ();if !_fd {_fe .Log .Info ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_bd :=page .GetContainingPdfObject ();_ce ,_gac :=page .GetMediaBox ();if _gac !=nil {return nil ,_a .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_gac );
};_dadc :=&Extractor {_cc :_ed ,_cdb :page .Resources ,_aa :*_ce ,_dg :page .CropBox ,_fcc :map[string ]fontEntry {},_fa :map[string ]textResult {},_dad :options ,_gad :_fg ,_ef :_bd };if _dadc ._aa .Llx > _dadc ._aa .Urx {_fe .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_dadc ._aa );
_dadc ._aa .Llx ,_dadc ._aa .Urx =_dadc ._aa .Urx ,_dadc ._aa .Llx ;};if _dadc ._aa .Lly > _dadc ._aa .Ury {_fe .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_dadc ._aa );
_dadc ._aa .Lly ,_dadc ._aa .Ury =_dadc ._aa .Ury ,_dadc ._aa .Lly ;};_bfe .TrackUse (_be );return _dadc ,nil ;};func (_bacdb *textPara )text ()string {_fcdg :=new (_fc .Buffer );_bacdb .writeText (_fcdg );return _fcdg .String ();};func (_dbg *textObject )setFont (_faagg string ,_ggb float64 )error {if _dbg ==nil {return nil ;
};_dbg ._bacc ._afb =_ggb ;_bda ,_bbeg :=_dbg .getFont (_faagg );if _bbeg !=nil {return _bbeg ;};_dbg ._bacc ._efbd =_bda ;return nil ;};func (_ecab rulingList )toTilings ()(rulingList ,[]gridTiling ){_ecab .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");
if len (_ecab )==0{return nil ,nil ;};_ecab =_ecab .tidied ("\u0061\u006c\u006c");_ecab .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_cefa :=_ecab .toGrids ();_gcggg :=make ([]gridTiling ,len (_cefa ));for _ddfc ,_adbe :=range _cefa {_gcggg [_ddfc ]=_adbe .asTiling ();
};return _ecab ,_gcggg ;};var _eecb =_e .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func (_fddfc paraList )writeText (_cbdf _c .Writer ){for _ffde ,_dbdg :=range _fddfc {if _dbdg ._begb {continue ;
};_dbdg .writeText (_cbdf );if _ffde !=len (_fddfc )-1{if _dbdf (_dbdg ,_fddfc [_ffde +1]){_cbdf .Write ([]byte ("\u0020"));}else {_cbdf .Write ([]byte ("\u000a"));_cbdf .Write ([]byte ("\u000a"));};};};_cbdf .Write ([]byte ("\u000a"));_cbdf .Write ([]byte ("\u000a"));
};func (_gcde *textTable )subdivide ()*textTable {_gcde .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_cfeec :=_gcde .compositeRowCorridors ();_aabba :=_gcde .compositeColCorridors ();if _bbfbe {_fe .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_fgaa (_cfeec ),_fgaa (_aabba ));
};if len (_cfeec )==0||len (_aabba )==0{return _gcde ;};_aeagb (_cfeec );_aeagb (_aabba );if _bbfbe {_fe .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_fgaa (_cfeec ),_fgaa (_aabba ));
};_gacaa ,_abbdf :=_beda (_gcde ._fdeda ,_cfeec );_ebdfd ,_ggffg :=_beda (_gcde ._dfagg ,_aabba );_aagfe :=make (map[uint64 ]*textPara ,_ggffg *_abbdf );_feafa :=&textTable {PdfRectangle :_gcde .PdfRectangle ,_agfdb :_gcde ._agfdb ,_fdeda :_abbdf ,_dfagg :_ggffg ,_adfd :_aagfe };
if _bbfbe {_fe .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_gcde ._dfagg ,_gcde ._fdeda ,_ggffg ,_abbdf ,_fgaa (_cfeec ),_fgaa (_aabba ),_gacaa ,_ebdfd );
};for _gbfcg :=0;_gbfcg < _gcde ._fdeda ;_gbfcg ++{_cgbff :=_gacaa [_gbfcg ];for _eddea :=0;_eddea < _gcde ._dfagg ;_eddea ++{_gadba :=_ebdfd [_eddea ];if _bbfbe {_a .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_eddea ,_gbfcg ,_gadba ,_cgbff );
};_bgdgf ,_ffcf :=_gcde ._bcee [_beag (_eddea ,_gbfcg )];if !_ffcf {continue ;};_gbcd :=_bgdgf .split (_cfeec [_gbfcg ],_aabba [_eddea ]);for _egccc :=0;_egccc < _gbcd ._fdeda ;_egccc ++{for _edga :=0;_edga < _gbcd ._dfagg ;_edga ++{_agbfd :=_gbcd .get (_edga ,_egccc );
_feafa .put (_gadba +_edga ,_cgbff +_egccc ,_agbfd );if _bbfbe {_a .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gadba +_edga ,_cgbff +_egccc ,_agbfd );};};};};};return _feafa ;};func _gaffe (_aace map[int ][]float64 )[]int {_bcef :=make ([]int ,len (_aace ));
_bgcb :=0;for _abcbg :=range _aace {_bcef [_bgcb ]=_abcbg ;_bgcb ++;};_f .Ints (_bcef );return _bcef ;};

// Append appends `mark` to the mark array.
func (_bceg *TextMarkArray )Append (mark TextMark ){_bceg ._aed =append (_bceg ._aed ,mark )};func (_dacccc compositeCell )hasLines (_badb []*textLine )bool {for _fddd ,_eadce :=range _badb {_agfd :=_eafa (_dacccc .PdfRectangle ,_eadce .PdfRectangle );
if _bbfbe {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_agfd ,_fddd ,len (_badb ));_a .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_dacccc );
_a .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_eadce );};if _agfd {return true ;};};return false ;};

// PageText represents the layout of text on a device page.
type PageText struct{_gbba []*textMark ;_gecf string ;_gcga []TextMark ;_bbf []TextTable ;_deaf _gd .PdfRectangle ;_agge []pathSection ;_ebga []pathSection ;_bgb *_af .PdfObject ;_fecg _af .PdfObject ;_cdf *_cb .ContentStreamOperations ;_fdec PageTextOptions ;
};func (_aefd rulingList )vertsHorzs ()(rulingList ,rulingList ){var _feddf ,_bgedcb rulingList ;for _ ,_dbbe :=range _aefd {switch _dbbe ._eacc {case _efcad :_feddf =append (_feddf ,_dbbe );case _gccg :_bgedcb =append (_bgedcb ,_dbbe );};};return _feddf ,_bgedcb ;
};func (_dgcb *textPara )fontsize ()float64 {return _dgcb ._aega [0]._acg };func (_eefg *imageExtractContext )extractFormImages (_abca *_af .PdfObjectName ,_fcf _cb .GraphicsState ,_agb *_gd .PdfPageResources )error {_fbc ,_cdd :=_agb .GetXObjectFormByName (*_abca );
if _cdd !=nil {return _cdd ;};if _fbc ==nil {return nil ;};_fgd ,_cdd :=_fbc .GetContentStream ();if _cdd !=nil {return _cdd ;};_acd :=_fbc .Resources ;if _acd ==nil {_acd =_agb ;};_cdd =_eefg .extractContentStreamImages (string (_fgd ),_acd );if _cdd !=nil {return _cdd ;
};_eefg ._adc ++;return nil ;};func (_fecf *textObject )getFillColor ()_dd .Color {return _fggce (_fecf ._fde .ColorspaceNonStroking ,_fecf ._fde .ColorNonStroking );};func (_ffcca rulingList )bbox ()_gd .PdfRectangle {var _gcdc _gd .PdfRectangle ;if len (_ffcca )==0{_fe .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _gd .PdfRectangle {};};if _ffcca [0]._eacc ==_gccg {_gcdc .Llx ,_gcdc .Urx =_ffcca .secMinMax ();_gcdc .Lly ,_gcdc .Ury =_ffcca .primMinMax ();}else {_gcdc .Llx ,_gcdc .Urx =_ffcca .primMinMax ();_gcdc .Lly ,_gcdc .Ury =_ffcca .secMinMax ();};return _gcdc ;
};func (_ffdcg paraList )inTile (_bcdee gridTile )paraList {var _cbgg paraList ;for _ ,_afdg :=range _ffdcg {if _bcdee .contains (_afdg .PdfRectangle ){_cbgg =append (_cbgg ,_afdg );};};if _bbfbe {_a .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_bcdee ,len (_cbgg ));
for _acdg ,_gbbdb :=range _cbgg {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_acdg ,_gbbdb );};_a .Println ("");};return _cbgg ;};func (_bage paraList )toTextMarks ()[]TextMark {_eegbc :=0;var _bbfgg []TextMark ;for _cedfa ,_cccf :=range _bage {if _cccf ._begb {continue ;
};_aeef :=_cccf .toTextMarks (&_eegbc );_bbfgg =append (_bbfgg ,_aeef ...);if _cedfa !=len (_bage )-1{if _dbdf (_cccf ,_bage [_cedfa +1]){_bbfgg =_ddfd (_bbfgg ,&_eegbc ,"\u0020");}else {_bbfgg =_ddfd (_bbfgg ,&_eegbc ,"\u000a");_bbfgg =_ddfd (_bbfgg ,&_eegbc ,"\u000a");
};};};_bbfgg =_ddfd (_bbfgg ,&_eegbc ,"\u000a");_bbfgg =_ddfd (_bbfgg ,&_eegbc ,"\u000a");return _bbfgg ;};func _beag (_fgcgg ,_ddff int )uint64 {return uint64 (_fgcgg )*0x1000000+uint64 (_ddff )};func _ecef (_dgeg []TextMark ,_ffafd *int )[]TextMark {_ggbgf :=_dgeg [len (_dgeg )-1];
_dedc :=[]rune (_ggbgf .Text );if len (_dedc )==1{_dgeg =_dgeg [:len (_dgeg )-1];_cgbde :=_dgeg [len (_dgeg )-1];*_ffafd =_cgbde .Offset +len (_cgbde .Text );}else {_faagge :=_acbge (_ggbgf .Text );*_ffafd +=len (_faagge )-len (_ggbgf .Text );_ggbgf .Text =_faagge ;
};return _dgeg ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_aabd *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_dfcd :=&imageExtractContext {_aba :options };_ba :=_dfcd .extractContentStreamImages (_aabd ._cc ,_aabd ._cdb );if _ba !=nil {return nil ,_ba ;};return &PageImages {Images :_dfcd ._cfaf },nil ;
};func _abdb (_eadcd string ,_cdefe int )string {if len (_eadcd )< _cdefe {return _eadcd ;};return _eadcd [:_cdefe ];};func (_cdgc rulingList )removeDuplicates ()rulingList {if len (_cdgc )==0{return nil ;};_cdgc .sort ();_cggg :=rulingList {_cdgc [0]};
for _ ,_cfed :=range _cdgc [1:]{if _cfed .equals (_cggg [len (_cggg )-1]){continue ;};_cggg =append (_cggg ,_cfed );};return _cggg ;};func _agbda (_dbdgg ,_cgfa float64 )bool {return _dbdgg /_ec .Max (_dbab ,_cgfa )< _cfba };type cachedImage struct{_bde *_gd .Image ;
_dbb _gd .PdfColorspace ;};func (_acbd *textLine )pullWord (_febe *wordBag ,_aefef *textWord ,_gacef int ){_acbd .appendWord (_aefef );_febe .removeWord (_aefef ,_gacef );};type textTable struct{_gd .PdfRectangle ;_dfagg ,_fdeda int ;_agfdb bool ;_adfd map[uint64 ]*textPara ;
_bcee map[uint64 ]compositeCell ;};func _bfeeg (_ddbc *PageText )error {_ddee :=_bfe .GetLicenseKey ();if _ddee !=nil &&_ddee .IsLicensed ()||_cd {return nil ;};_a .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_a .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _b .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func _bgfb (_acda []float64 ,_ddcd ,_bdaf float64 )[]float64 {_bgcec ,_gbde :=_ddcd ,_bdaf ;
if _gbde < _bgcec {_bgcec ,_gbde =_gbde ,_bgcec ;};_gbgbd :=make ([]float64 ,0,len (_acda )+2);_gbgbd =append (_gbgbd ,_ddcd );for _ ,_ddge :=range _acda {if _ddge <=_bgcec {continue ;}else if _ddge >=_gbde {break ;};_gbgbd =append (_gbgbd ,_ddge );};_gbgbd =append (_gbgbd ,_bdaf );
return _gbgbd ;};func (_ffe *imageExtractContext )extractInlineImage (_dae *_cb .ContentStreamInlineImage ,_deea _cb .GraphicsState ,_gbfc *_gd .PdfPageResources )error {_fae ,_cba :=_dae .ToImage (_gbfc );if _cba !=nil {return _cba ;};_fcg ,_cba :=_dae .GetColorSpace (_gbfc );
if _cba !=nil {return _cba ;};if _fcg ==nil {_fcg =_gd .NewPdfColorspaceDeviceGray ();};_cgg ,_cba :=_fcg .ImageToRGB (*_fae );if _cba !=nil {return _cba ;};_egf :=ImageMark {Image :&_cgg ,Width :_deea .CTM .ScalingFactorX (),Height :_deea .CTM .ScalingFactorY (),Angle :_deea .CTM .Angle ()};
_egf .X ,_egf .Y =_deea .CTM .Translation ();_ffe ._cfaf =append (_ffe ._cfaf ,_egf );_ffe ._gb ++;return nil ;};func (_gfbgd paraList )llyRange (_ccbd []int ,_acbfg ,_dbae float64 )[]int {_bgaa :=len (_gfbgd );if _dbae < _gfbgd [_ccbd [0]].Lly ||_acbfg > _gfbgd [_ccbd [_bgaa -1]].Lly {return nil ;
};_ffea :=_f .Search (_bgaa ,func (_dgcc int )bool {return _gfbgd [_ccbd [_dgcc ]].Lly >=_acbfg });_gffec :=_f .Search (_bgaa ,func (_caee int )bool {return _gfbgd [_ccbd [_caee ]].Lly > _dbae });return _ccbd [_ffea :_gffec ];};func (_edfgg lineRuling )yMean ()float64 {return 0.5*(_edfgg ._bcde .Y +_edfgg ._bdfcd .Y )};
var _ecc =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_dd .White ,StrokeColor :_dd .White };func (_bdga rulingList )primMinMax ()(float64 ,float64 ){_dddg ,_gface :=_bdga [0]._egdcc ,_bdga [0]._egdcc ;for _ ,_adgd :=range _bdga [1:]{if _adgd ._egdcc < _dddg {_dddg =_adgd ._egdcc ;
}else if _adgd ._egdcc > _gface {_gface =_adgd ._egdcc ;};};return _dddg ,_gface ;};func (_facg paraList )sortReadingOrder (){_fe .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_facg ));
if len (_facg )<=1{return ;};_facg .computeEBBoxes ();_f .Slice (_facg ,func (_aded ,_bcfed int )bool {return _aagf (_facg [_aded ],_facg [_bcfed ])<=0});};func _cbedd (_dfebg ,_eadg *textPara )bool {return _bacf (_dfebg ._gdce ,_eadg ._gdce )};func (_feead *textTable )bbox ()_gd .PdfRectangle {return _feead .PdfRectangle };
func _acae (_caea _cbc .Matrix )_cbc .Point {_aec ,_abg :=_caea .Translation ();return _cbc .Point {X :_aec ,Y :_abg };};func (_acbfb paraList )yNeighbours (_gcba float64 )map[*textPara ][]int {_bbfdfd :=make ([]event ,2*len (_acbfb ));if _gcba ==0{for _adbfa ,_fgdac :=range _acbfb {_bbfdfd [2*_adbfa ]=event {_fgdac .Lly ,true ,_adbfa };
_bbfdfd [2*_adbfa +1]=event {_fgdac .Ury ,false ,_adbfa };};}else {for _cfggc ,_cdagc :=range _acbfb {_bbfdfd [2*_cfggc ]=event {_cdagc .Lly -_gcba *_cdagc .fontsize (),true ,_cfggc };_bbfdfd [2*_cfggc +1]=event {_cdagc .Ury +_gcba *_cdagc .fontsize (),false ,_cfggc };
};};return _acbfb .eventNeighbours (_bbfdfd );};type fontEntry struct{_dadge *_gd .PdfFont ;_ffcdb int64 ;};func (_dbd *textObject )setTextRise (_dadg float64 ){if _dbd ==nil {return ;};_dbd ._bacc ._eada =_dadg ;};func (_cafd *wordBag )removeWord (_geed *textWord ,_cagd int ){_dbbd :=_cafd ._dbfe [_cagd ];
_dbbd =_ccebb (_dbbd ,_geed );if len (_dbbd )==0{delete (_cafd ._dbfe ,_cagd );}else {_cafd ._dbfe [_cagd ]=_dbbd ;};};func _cgeb (_bgac *textWord ,_dgba float64 ,_bfbg ,_abbf rulingList )*wordBag {_eeeb :=_eabe (_bgac ._fbfd );_ecee :=[]*textWord {_bgac };
_ebfa :=wordBag {_dbfe :map[int ][]*textWord {_eeeb :_ecee },PdfRectangle :_bgac .PdfRectangle ,_bfdf :_bgac ._dgac ,_dgbb :_dgba ,_cdbd :_bfbg ,_ceaga :_abbf };return &_ebfa ;};func _feae (_bfda ,_efde _ee .Image )_ee .Image {_cggag ,_feaed :=_efde .Bounds ().Size (),_bfda .Bounds ().Size ();
_ddcbe ,_eedbf :=_cggag .X ,_cggag .Y ;if _feaed .X > _ddcbe {_ddcbe =_feaed .X ;};if _feaed .Y > _eedbf {_eedbf =_feaed .Y ;};_bgga :=_ee .Rect (0,0,_ddcbe ,_eedbf );if _cggag .X !=_ddcbe ||_cggag .Y !=_eedbf {_faaggg :=_ee .NewRGBA (_bgga );_cfa .BiLinear .Scale (_faaggg ,_bgga ,_bfda ,_efde .Bounds (),_cfa .Over ,nil );
_efde =_faaggg ;};if _feaed .X !=_ddcbe ||_feaed .Y !=_eedbf {_fgff :=_ee .NewRGBA (_bgga );_cfa .BiLinear .Scale (_fgff ,_bgga ,_bfda ,_bfda .Bounds (),_cfa .Over ,nil );_bfda =_fgff ;};_dccf :=_ee .NewRGBA (_bgga );_cfa .DrawMask (_dccf ,_bgga ,_bfda ,_ee .Point {},_efde ,_ee .Point {},_cfa .Over );
return _dccf ;};func (_dgfd *wordBag )firstReadingIndex (_ccg int )int {_adaee :=_dgfd .firstWord (_ccg )._dgac ;_dgae :=float64 (_ccg +1)*_feef ;_afeg :=_dgae +_gaaa *_adaee ;_dged :=_ccg ;for _ ,_gffg :=range _dgfd .depthBand (_dgae ,_afeg ){if _gebbb (_dgfd .firstWord (_gffg ),_dgfd .firstWord (_dged ))< 0{_dged =_gffg ;
};};return _dged ;};func (_eea *TextMarkArray )exists (_fgdc TextMark )bool {for _ ,_dfbc :=range _eea .Elements (){if _bf .DeepEqual (_fgdc .DirectObject ,_dfbc .DirectObject )&&_bf .DeepEqual (_fgdc .BBox ,_dfbc .BBox )&&_dfbc .Text ==_fgdc .Text {return true ;
};};return false ;};func _ggaa (_defb structElement )[]structElement {_dedg :=[]structElement {};for _ ,_gdf :=range _defb ._bdcb {for _ ,_bdad :=range _gdf ._bdcb {for _ ,_ebeb :=range _bdad ._bdcb {if _ebeb ._dbfb =="\u004c"{_dedg =append (_dedg ,_ebeb );
};};};};return _dedg ;};func (_abfb paraList )xNeighbours (_abaec float64 )map[*textPara ][]int {_cdaff :=make ([]event ,2*len (_abfb ));if _abaec ==0{for _eafc ,_edbd :=range _abfb {_cdaff [2*_eafc ]=event {_edbd .Llx ,true ,_eafc };_cdaff [2*_eafc +1]=event {_edbd .Urx ,false ,_eafc };
};}else {for _faaae ,_febgg :=range _abfb {_cdaff [2*_faaae ]=event {_febgg .Llx -_abaec *_febgg .fontsize (),true ,_faaae };_cdaff [2*_faaae +1]=event {_febgg .Urx +_abaec *_febgg .fontsize (),false ,_faaae };};};return _abfb .eventNeighbours (_cdaff );
};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_cfb *TextMarkArray )BBox ()(_gd .PdfRectangle ,bool ){var _ddgd _gd .PdfRectangle ;_ffd :=false ;for _ ,_efdb :=range _cfb ._aed {if _efdb .Meta ||_eece (_efdb .Text ){continue ;};if _ffd {_ddgd =_cbcaf (_ddgd ,_efdb .BBox );}else {_ddgd =_efdb .BBox ;
_ffd =true ;};};return _ddgd ,_ffd ;};func (_eae *subpath )last ()_cbc .Point {return _eae ._gdcg [len (_eae ._gdcg )-1]};func (_bcfef *textTable )reduceTiling (_fdbg gridTiling ,_afeecd float64 )*textTable {_fdbae :=make ([]int ,0,_bcfef ._fdeda );_bgeff :=make ([]int ,0,_bcfef ._dfagg );
_fced :=_fdbg ._cfac ;_aeaec :=_fdbg ._afdca ;for _deae :=0;_deae < _bcfef ._fdeda ;_deae ++{_eeffd :=_deae > 0&&_ec .Abs (_aeaec [_deae -1]-_aeaec [_deae ])< _afeecd &&_bcfef .emptyCompositeRow (_deae );if !_eeffd {_fdbae =append (_fdbae ,_deae );};};
for _aabcd :=0;_aabcd < _bcfef ._dfagg ;_aabcd ++{_bffb :=_aabcd < _bcfef ._dfagg -1&&_ec .Abs (_fced [_aabcd +1]-_fced [_aabcd ])< _afeecd &&_bcfef .emptyCompositeColumn (_aabcd );if !_bffb {_bgeff =append (_bgeff ,_aabcd );};};if len (_fdbae )==_bcfef ._fdeda &&len (_bgeff )==_bcfef ._dfagg {return _bcfef ;
};_gcgc :=textTable {_agfdb :_bcfef ._agfdb ,_dfagg :len (_bgeff ),_fdeda :len (_fdbae ),_bcee :make (map[uint64 ]compositeCell ,len (_bgeff )*len (_fdbae ))};if _bbfbe {_fe .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_bcfef ._dfagg ,_bcfef ._fdeda ,len (_bgeff ),len (_fdbae ));
_fe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_bgeff );_fe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_fdbae );};for _face ,_ccdcc :=range _fdbae {for _agce ,_fbcc :=range _bgeff {_eecbb ,_dcgce :=_bcfef .getComposite (_fbcc ,_ccdcc );
if len (_eecbb )==0{continue ;};if _bbfbe {_a .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_agce ,_face ,_fbcc ,_ccdcc ,_abdb (_eecbb .merge ().text (),50));};_gcgc .putComposite (_agce ,_face ,_eecbb ,_dcgce );
};};return &_gcgc ;};func _dgcd (_begfd _gd .PdfRectangle ,_gfac []*textLine )*textPara {return &textPara {PdfRectangle :_begfd ,_aega :_gfac };};func (_fbce *wordBag )absorb (_dgfe *wordBag ){_efdf :=_dgfe .makeRemovals ();for _fggc ,_cabb :=range _dgfe ._dbfe {for _ ,_geee :=range _cabb {_fbce .pullWord (_geee ,_fggc ,_efdf );
};};_dgfe .applyRemovals (_efdf );};func (_bbacg gridTile )contains (_eedc _gd .PdfRectangle )bool {if _bbacg .numBorders ()< 3{return false ;};if _bbacg ._dbgb &&_eedc .Llx < _bbacg .Llx -_aabe {return false ;};if _bbacg ._gdcfe &&_eedc .Urx > _bbacg .Urx +_aabe {return false ;
};if _bbacg ._dgbd &&_eedc .Lly < _bbacg .Lly -_aabe {return false ;};if _bbacg ._fadb &&_eedc .Ury > _bbacg .Ury +_aabe {return false ;};return true ;};func (_egcag rulingList )secMinMax ()(float64 ,float64 ){_adeed ,_dede :=_egcag [0]._cggaf ,_egcag [0]._dgec ;
for _ ,_aecd :=range _egcag [1:]{if _aecd ._cggaf < _adeed {_adeed =_aecd ._cggaf ;};if _aecd ._dgec > _dede {_dede =_aecd ._dgec ;};};return _adeed ,_dede ;};func _fecfg (_cfbd *list ,_fdad *_df .Builder ,_cffa *string ){_aecbf :=_bfdfg (_cfbd ,_cffa );
_fdad .WriteString (_aecbf );for _ ,_fgbb :=range _cfbd ._egdad {_cee :=*_cffa +"\u0020\u0020\u0020";_fecfg (_fgbb ,_fdad ,&_cee );};};func _gfad (_baegd *textLine ,_feebb []*textLine ,_beff []float64 )float64 {var _ffccf float64 =-1;for _ ,_becg :=range _feebb {if _becg ._bcbff > _baegd ._bcbff {if _ec .Round (_becg .Llx )>=_ec .Round (_baegd .Llx ){_ffccf =_becg ._bcbff ;
}else {break ;};};};return _ffccf ;};func _effc (_efge map[float64 ]map[float64 ]gridTile )[]float64 {_cecc :=make ([]float64 ,0,len (_efge ));for _aede :=range _efge {_cecc =append (_cecc ,_aede );};_f .Float64s (_cecc );_dgabg :=len (_cecc );for _agcc :=0;
_agcc < _dgabg /2;_agcc ++{_cecc [_agcc ],_cecc [_dgabg -1-_agcc ]=_cecc [_dgabg -1-_agcc ],_cecc [_agcc ];};return _cecc ;};func (_dddc *wordBag )arrangeText ()*textPara {_dddc .sort ();if _aefgf {_dddc .removeDuplicates ();};var _fdecf []*textLine ;for _ ,_gebeb :=range _dddc .depthIndexes (){for !_dddc .empty (_gebeb ){_dbe :=_dddc .firstReadingIndex (_gebeb );
_egcc :=_dddc .firstWord (_dbe );_ababg :=_bdf (_dddc ,_dbe );_egacd :=_egcc ._dgac ;_febce :=_egcc ._fbfd -_eeff *_egacd ;_deac :=_egcc ._fbfd +_eeff *_egacd ;_egfcb :=_ccfc *_egacd ;_acbgc :=_fdeeg *_egacd ;_edgg :for {var _ffabb *textWord ;_ggc :=0;
for _ ,_defa :=range _dddc .depthBand (_febce ,_deac ){_degb :=_dddc .highestWord (_defa ,_febce ,_deac );if _degb ==nil {continue ;};_fecfc :=_fdef (_degb ,_ababg ._effba [len (_ababg ._effba )-1]);if _fecfc < -_acbgc {break _edgg ;};if _fecfc > _egfcb {continue ;
};if _ffabb !=nil &&_gebbb (_degb ,_ffabb )>=0{continue ;};_ffabb =_degb ;_ggc =_defa ;};if _ffabb ==nil {break ;};_ababg .pullWord (_dddc ,_ffabb ,_ggc );};_ababg .markWordBoundaries ();_fdecf =append (_fdecf ,_ababg );};};if len (_fdecf )==0{return nil ;
};_f .Slice (_fdecf ,func (_edgf ,_ebebdd int )bool {return _aagf (_fdecf [_edgf ],_fdecf [_ebebdd ])< 0});_dfcdg :=_dgcd (_dddc .PdfRectangle ,_fdecf );if _dagfa {_fe .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_dfcdg .String ());
if _gdaf {for _fbdd ,_bedee :=range _dfcdg ._aega {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbdd ,_bedee .String ());if _gdba {for _ffda ,_ffbd :=range _bedee ._effba {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ffda ,_ffbd .String ());
for _aaca ,_dcfg :=range _ffbd ._eecba {_a .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_aaca ,_dcfg .String ());};};};};};};return _dfcdg ;};func _bef (_bbec ,_cbcb _gd .PdfRectangle )(_gd .PdfRectangle ,bool ){if !_eafa (_bbec ,_cbcb ){return _gd .PdfRectangle {},false ;
};return _gd .PdfRectangle {Llx :_ec .Max (_bbec .Llx ,_cbcb .Llx ),Urx :_ec .Min (_bbec .Urx ,_cbcb .Urx ),Lly :_ec .Max (_bbec .Lly ,_cbcb .Lly ),Ury :_ec .Min (_bbec .Ury ,_cbcb .Ury )},true ;};func (_bae *wordBag )depthIndexes ()[]int {if len (_bae ._dbfe )==0{return nil ;
};_fcbc :=make ([]int ,len (_bae ._dbfe ));_cgfd :=0;for _baeg :=range _bae ._dbfe {_fcbc [_cgfd ]=_baeg ;_cgfd ++;};_f .Ints (_fcbc );return _fcbc ;};

// String returns a description of `t`.
func (_gccee *textTable )String ()string {return _a .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_gccee ._dfagg ,_gccee ._fdeda ,_gccee ._agfdb );};func (_fgagc *ruling )alignsPrimary (_bfga *ruling )bool {return _fgagc ._eacc ==_bfga ._eacc &&_ec .Abs (_fgagc ._egdcc -_bfga ._egdcc )< _dbbg *0.5;
};func (_gcfd *textPara )depth ()float64 {if _gcfd ._begb {return -1.0;};if len (_gcfd ._aega )> 0{return _gcfd ._aega [0]._bcbff ;};return _gcfd ._ecga .depth ();};

// Text gets the extracted text contained in `l`.
func (_fagf *list )Text ()string {_bege :=&_df .Builder {};_fcbdb :="";_fecfg (_fagf ,_bege ,&_fcbdb );return _bege .String ();};func (_bcbgg rulingList )comp (_gedf ,_fbecc int )bool {_bfa ,_gcfg :=_bcbgg [_gedf ],_bcbgg [_fbecc ];_cagc ,_dbggaa :=_bfa ._eacc ,_gcfg ._eacc ;
if _cagc !=_dbggaa {return _cagc > _dbggaa ;};if _cagc ==_ccga {return false ;};_faga :=func (_debea bool )bool {if _cagc ==_gccg {return _debea ;};return !_debea ;};_fgde ,_ecfge :=_bfa ._egdcc ,_gcfg ._egdcc ;if _fgde !=_ecfge {return _faga (_fgde > _ecfge );
};_fgde ,_ecfge =_bfa ._cggaf ,_gcfg ._cggaf ;if _fgde !=_ecfge {return _faga (_fgde < _ecfge );};return _faga (_bfa ._dgec < _gcfg ._dgec );};func (_aada *shapesState )devicePoint (_ccee ,_fbfc float64 )_cbc .Point {_caeae :=_aada ._bbfd .Mult (_aada ._eaa );
_ccee ,_fbfc =_caeae .Transform (_ccee ,_fbfc );return _cbc .NewPoint (_ccee ,_fbfc );};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_ffbb PageText )ToText ()string {return _ffbb .Text ()};func _cdagg (_cfbfc []*textWord ,_ebgaba int )[]*textWord {_beee :=len (_cfbfc );copy (_cfbfc [_ebgaba :],_cfbfc [_ebgaba +1:]);return _cfbfc [:_beee -1];};func (_bfcb *textPara )toTextMarks (_caggf *int )[]TextMark {if _bfcb ._ecga ==nil {return _bfcb .toCellTextMarks (_caggf );
};var _bgff []TextMark ;for _gecdb :=0;_gecdb < _bfcb ._ecga ._fdeda ;_gecdb ++{for _gfdg :=0;_gfdg < _bfcb ._ecga ._dfagg ;_gfdg ++{_dfbd :=_bfcb ._ecga .get (_gfdg ,_gecdb );if _dfbd ==nil {_bgff =_ddfd (_bgff ,_caggf ,"\u0009");}else {_gbfaf :=_dfbd .toCellTextMarks (_caggf );
_bgff =append (_bgff ,_gbfaf ...);};_bgff =_ddfd (_bgff ,_caggf ,"\u0020");};if _gecdb < _bfcb ._ecga ._fdeda -1{_bgff =_ddfd (_bgff ,_caggf ,"\u000a");};};_gfdc :=_bfcb ._ecga ;if _gfdc .isExportable (){_abea :=_gfdc .toTextTable ();_bgff =_caeab (_bgff ,&_abea );
};return _bgff ;};func (_abaee paraList )lines ()[]*textLine {var _dfff []*textLine ;for _ ,_aagd :=range _abaee {_dfff =append (_dfff ,_aagd ._aega ...);};return _dfff ;};func (_ceaed *textTable )getComposite (_febgc ,_acdcd int )(paraList ,_gd .PdfRectangle ){_dcfb ,_cbdg :=_ceaed ._bcee [_beag (_febgc ,_acdcd )];
if _bbfbe {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_febgc ,_acdcd ,_dcfb .String ());};if !_cbdg {return nil ,_gd .PdfRectangle {};
};return _dcfb .parasBBox ();};func (_ccff *textObject )showText (_gggf _af .PdfObject ,_acba []byte ,_fda int )error {return _ccff .renderText (_gggf ,_acba ,_fda );};type stateStack []*textState ;func (_cccb *textWord )computeText ()string {_cbgaf :=make ([]string ,len (_cccb ._eecba ));
for _ggffe ,_eddc :=range _cccb ._eecba {_cbgaf [_ggffe ]=_eddc ._cffce ;};return _df .Join (_cbgaf ,"");};

// Len returns the number of TextMarks in `ma`.
func (_bced *TextMarkArray )Len ()int {if _bced ==nil {return 0;};return len (_bced ._aed );};func _cfbe (_bdea ,_gadgf _cbc .Point )rulingKind {_gfce :=_ec .Abs (_bdea .X -_gadgf .X );_ggbgfd :=_ec .Abs (_bdea .Y -_gadgf .Y );return _bfeef (_gfce ,_ggbgfd ,_afef );
};func (_edba rulingList )findPrimSec (_fdfcc ,_dcbca float64 )*ruling {for _ ,_aceeg :=range _edba {if _ddfbb (_aceeg ._egdcc -_fdfcc )&&_aceeg ._cggaf -_bbge <=_dcbca &&_dcbca <=_aceeg ._dgec +_bbge {return _aceeg ;};};return nil ;};func (_eaag *textTable )markCells (){for _gabda :=0;
_gabda < _eaag ._fdeda ;_gabda ++{for _bffda :=0;_bffda < _eaag ._dfagg ;_bffda ++{_cbebf :=_eaag .get (_bffda ,_gabda );if _cbebf !=nil {_cbebf ._dbbf =true ;};};};};func (_ebbff paraList )eventNeighbours (_dcfba []event )map[*textPara ][]int {_f .Slice (_dcfba ,func (_dgdbg ,_eaae int )bool {_bfaga ,_daeg :=_dcfba [_dgdbg ],_dcfba [_eaae ];
_dfaa ,_fcgb :=_bfaga ._eeag ,_daeg ._eeag ;if _dfaa !=_fcgb {return _dfaa < _fcgb ;};if _bfaga ._aadfa !=_daeg ._aadfa {return _bfaga ._aadfa ;};return _dgdbg < _eaae ;});_deedb :=make (map[int ]intSet );_ffgea :=make (intSet );for _ ,_ffeaa :=range _dcfba {if _ffeaa ._aadfa {_deedb [_ffeaa ._edbdg ]=make (intSet );
for _gafa :=range _ffgea {if _gafa !=_ffeaa ._edbdg {_deedb [_ffeaa ._edbdg ].add (_gafa );_deedb [_gafa ].add (_ffeaa ._edbdg );};};_ffgea .add (_ffeaa ._edbdg );}else {_ffgea .del (_ffeaa ._edbdg );};};_gaac :=map[*textPara ][]int {};for _afdf ,_bagf :=range _deedb {_ccccde :=_ebbff [_afdf ];
if len (_bagf )==0{_gaac [_ccccde ]=nil ;continue ;};_edgcf :=make ([]int ,len (_bagf ));_cceec :=0;for _dbbgc :=range _bagf {_edgcf [_cceec ]=_dbbgc ;_cceec ++;};_gaac [_ccccde ]=_edgcf ;};return _gaac ;};func (_caacb *subpath )close (){if !_cgfg (_caacb ._gdcg [0],_caacb .last ()){_caacb .add (_caacb ._gdcg [0]);
};_caacb ._fgga =true ;_caacb .removeDuplicates ();};type structElement struct{_dbfb string ;_bdcb []structElement ;_fbbb int64 ;_gccf _af .PdfObject ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_cabc PageText )Marks ()*TextMarkArray {return &TextMarkArray {_aed :_cabc ._gcga }};func (_bcdb *textObject )moveLP (_bafa ,_aadf float64 ){_bcdb ._fbff .Concat (_cbc .NewMatrix (1,0,0,1,_bafa ,_aadf ));_bcdb ._cffb =_bcdb ._fbff ;};func (_cacgg gridTile )numBorders ()int {_aabfgg :=0;
if _cacgg ._dbgb {_aabfgg ++;};if _cacgg ._gdcfe {_aabfgg ++;};if _cacgg ._dgbd {_aabfgg ++;};if _cacgg ._fadb {_aabfgg ++;};return _aabfgg ;};func _afbc (_ceaa ,_dbgf _cbc .Point )rulingKind {_cgfeb :=_ec .Abs (_ceaa .X -_dbgf .X );_cdfbb :=_ec .Abs (_ceaa .Y -_dbgf .Y );
return _bfeef (_cgfeb ,_cdfbb ,_cfba );};func _cgfe (_cagg _gd .PdfRectangle ,_efdc bounded )float64 {return _cagg .Ury -_efdc .bbox ().Lly };func (_acdce *textLine )endsInHyphen ()bool {_ccef :=_acdce ._effba [len (_acdce ._effba )-1];_cbaa :=_ccef ._eaecc ;
_egac ,_gfaf :=_cf .DecodeLastRuneInString (_cbaa );if _gfaf <=0||!_bg .Is (_bg .Hyphen ,_egac ){return false ;};if _ccef ._ddbb &&_dade (_cbaa ){return true ;};return _dade (_acdce .text ());};func (_fbcge rulingList )snapToGroups ()rulingList {_affe ,_gece :=_fbcge .vertsHorzs ();
if len (_affe )> 0{_affe =_affe .snapToGroupsDirection ();};if len (_gece )> 0{_gece =_gece .snapToGroupsDirection ();};_gedgc :=append (_affe ,_gece ...);_gedgc .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _gedgc ;
};func _aaeg (_aagb []int )[]int {_dbbce :=make ([]int ,len (_aagb ));for _gfdb ,_feaf :=range _aagb {_dbbce [len (_aagb )-1-_gfdb ]=_feaf ;};return _dbbce ;};func (_fdg *textObject )getFontDict (_ggf string )(_dcec _af .PdfObject ,_caae error ){_gdc :=_fdg ._afeb ;
if _gdc ==nil {_fe .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_ggf );return nil ,nil ;};_dcec ,_cdg :=_gdc .GetFontByName (_af .PdfObjectName (_ggf ));
if !_cdg {_fe .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_ggf );return nil ,_b .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");
};return _dcec ,nil ;};func _fdddb (_gdebd []compositeCell )[]float64 {var _bdgc []*textLine ;_fgbg :=0;for _ ,_dffa :=range _gdebd {_fgbg +=len (_dffa .paraList );_bdgc =append (_bdgc ,_dffa .lines ()...);};_f .Slice (_bdgc ,func (_gbdbd ,_aegcc int )bool {_daedce ,_fcaf :=_bdgc [_gbdbd ],_bdgc [_aegcc ];
_accg ,_abgc :=_daedce ._bcbff ,_fcaf ._bcbff ;if !_ddfbb (_accg -_abgc ){return _accg < _abgc ;};return _daedce .Llx < _fcaf .Llx ;});if _bbfbe {_a .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_fgbg ,len (_bdgc ));
for _dcdbc ,_ccge :=range _bdgc {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dcdbc ,_ccge );};};var _aadce []float64 ;_fdea :=_bdgc [0];var _ceed [][]*textLine ;_adec :=[]*textLine {_fdea };for _begd ,_gfgg :=range _bdgc [1:]{if _gfgg .Ury < _fdea .Lly {_efdcb :=0.5*(_gfgg .Ury +_fdea .Lly );
if _bbfbe {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_begd ,_gfgg .Ury ,_fdea .Lly ,_efdcb ,_fdea ,_gfgg );
};_aadce =append (_aadce ,_efdcb );_ceed =append (_ceed ,_adec );_adec =nil ;};_adec =append (_adec ,_gfgg );if _gfgg .Lly < _fdea .Lly {_fdea =_gfgg ;};};if len (_adec )> 0{_ceed =append (_ceed ,_adec );};if _bbfbe {_a .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_aadce );
};if _bbfbe {_fe .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_gdebd ));for _bfcc ,_dffc :=range _gdebd {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bfcc ,_dffc );};_fe .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_ceed ));
for _bgfg ,_ffeg :=range _ceed {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_bgfg ,len (_ffeg ));for _efaa ,_ecgg :=range _ffeg {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_efaa ,_ecgg );};};};_gbce :=true ;for _ddfdb ,_fagge :=range _ceed {_bccfc :=true ;
for _dcgd ,_fdgf :=range _gdebd {if _bbfbe {_a .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_ddfdb ,len (_ceed ),_dcgd ,len (_gdebd ),_fdgf );
};if !_fdgf .hasLines (_fagge ){if _bbfbe {_a .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_ddfdb ,len (_ceed ),_dcgd ,len (_gdebd ));
};_bccfc =false ;break ;};};if !_bccfc {_gbce =false ;break ;};};if !_gbce {if _bbfbe {_fe .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_aadce =nil ;};if _bbfbe &&_aadce !=nil {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_aadce );};return _aadce ;
};func (_ccbea *subpath )clear (){*_ccbea =subpath {}};func (_gbddb *ruling )intersects (_ggae *ruling )bool {_gggee :=(_gbddb ._eacc ==_efcad &&_ggae ._eacc ==_gccg )||(_ggae ._eacc ==_efcad &&_gbddb ._eacc ==_gccg );_baggc :=func (_cged ,_adge *ruling )bool {return _cged ._cggaf -_bbge <=_adge ._egdcc &&_adge ._egdcc <=_cged ._dgec +_bbge ;
};_bcdd :=_baggc (_gbddb ,_ggae );_bdac :=_baggc (_ggae ,_gbddb );if _caga {_a .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_gggee ,_bcdd ,_bdac ,_gggee &&_bcdd &&_bdac ,_gbddb ,_ggae );
};return _gggee &&_bcdd &&_bdac ;};func _bgdb (_ebff *wordBag ,_fada float64 ,_fgbbc ,_edac rulingList )[]*wordBag {var _ddeb []*wordBag ;for _ ,_bgede :=range _ebff .depthIndexes (){_cbeg :=false ;for !_ebff .empty (_bgede ){_ggac :=_ebff .firstReadingIndex (_bgede );
_efgbf :=_ebff .firstWord (_ggac );_bfgdc :=_cgeb (_efgbf ,_fada ,_fgbbc ,_edac );_ebff .removeWord (_efgbf ,_ggac );if _dfdc {_fe .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_efgbf .String ());
};for _cbcg :=true ;_cbcg ;_cbcg =_cbeg {_cbeg =false ;_bacfg :=_fdgga *_bfgdc ._bfdf ;_gacf :=_bcda *_bfgdc ._bfdf ;_afdc :=_cfeg *_bfgdc ._bfdf ;if _dfdc {_fe .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_bfgdc .minDepth (),_bfgdc .maxDepth (),_afdc ,_gacf );
};if _ebff .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_bfgdc ,_daea (_daae ,0),_bfgdc .minDepth ()-_afdc ,_bfgdc .maxDepth ()+_afdc ,_cbfg ,false ,false )> 0{_cbeg =true ;};if _ebff .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bfgdc ,_daea (_daae ,_gacf ),_bfgdc .minDepth (),_bfgdc .maxDepth (),_fbbg ,false ,false )> 0{_cbeg =true ;
};if _cbeg {continue ;};_ggbe :=_ebff .scanBand ("",_bfgdc ,_daea (_cbgb ,_bacfg ),_bfgdc .minDepth (),_bfgdc .maxDepth (),_gdcf ,true ,false );if _ggbe > 0{_ggdec :=(_bfgdc .maxDepth ()-_bfgdc .minDepth ())/_bfgdc ._bfdf ;if (_ggbe > 1&&float64 (_ggbe )> 0.3*_ggdec )||_ggbe <=10{if _ebff .scanBand ("\u006f\u0074\u0068e\u0072",_bfgdc ,_daea (_cbgb ,_bacfg ),_bfgdc .minDepth (),_bfgdc .maxDepth (),_gdcf ,false ,true )> 0{_cbeg =true ;
};};};};_ddeb =append (_ddeb ,_bfgdc );};};return _ddeb ;};func (_bdebe rulingList )asTiling ()gridTiling {if _faaga {_fe .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_bdebe ));
};for _abaa ,_fddfa :=range _bdebe [1:]{_ebdde :=_bdebe [_abaa ];if _ebdde .alignsPrimary (_fddfa )&&_ebdde .alignsSec (_fddfa ){_fe .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_fddfa ,_ebdde );
};};_bdebe .sortStrict ();_bdebe .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_bcgf ,_cbfe :=_bdebe .vertsHorzs ();_fdeg :=_bcgf .primaries ();_bee :=_cbfe .primaries ();_cefec :=len (_fdeg )-1;_cddd :=len (_bee )-1;if _cefec ==0||_cddd ==0{return gridTiling {};
};_cffbc :=_gd .PdfRectangle {Llx :_fdeg [0],Urx :_fdeg [_cefec ],Lly :_bee [0],Ury :_bee [_cddd ]};if _faaga {_fe .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_bcgf ));
for _fbag ,_geeeg :=range _bcgf {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbag ,_geeeg );};_fe .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_cbfe ));
for _fcefb ,_beaee :=range _cbfe {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fcefb ,_beaee );};_fe .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_cefec ,_cddd ,_fdeg ,_bee );
};_ffbe :=make ([]gridTile ,_cefec *_cddd );for _bgda :=_cddd -1;_bgda >=0;_bgda --{_ggcc :=_bee [_bgda ];_abac :=_bee [_bgda +1];for _agbde :=0;_agbde < _cefec ;_agbde ++{_egbdb :=_fdeg [_agbde ];_cffdb :=_fdeg [_agbde +1];_ddcf :=_bcgf .findPrimSec (_egbdb ,_ggcc );
_gfdcf :=_bcgf .findPrimSec (_cffdb ,_ggcc );_abbg :=_cbfe .findPrimSec (_ggcc ,_egbdb );_affa :=_cbfe .findPrimSec (_abac ,_egbdb );_ggbd :=_gd .PdfRectangle {Llx :_egbdb ,Urx :_cffdb ,Lly :_ggcc ,Ury :_abac };_cbega :=_gcbbf (_ggbd ,_ddcf ,_gfdcf ,_abbg ,_affa );
_ffbe [_bgda *_cefec +_agbde ]=_cbega ;if _faaga {_a .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_agbde ,_bgda ,_cbega .String (),_cbega .Width (),_cbega .Height ());
};};};if _faaga {_fe .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cffbc );
};_fffa :=make ([]map[float64 ]gridTile ,_cddd );for _dgeda :=_cddd -1;_dgeda >=0;_dgeda --{if _faaga {_a .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_dgeda );};_fffa [_dgeda ]=make (map[float64 ]gridTile ,_cefec );for _bfgdg :=0;_bfgdg < _cefec ;
_bfgdg ++{_cbeb :=_ffbe [_dgeda *_cefec +_bfgdg ];if _faaga {_a .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bfgdg ,_cbeb );};if !_cbeb ._dbgb {continue ;};_eccg :=_bfgdg ;for _cgged :=_bfgdg +1;!_cbeb ._gdcfe &&_cgged < _cefec ;
_cgged ++{_ddfb :=_ffbe [_dgeda *_cefec +_cgged ];_cbeb .Urx =_ddfb .Urx ;_cbeb ._fadb =_cbeb ._fadb ||_ddfb ._fadb ;_cbeb ._dgbd =_cbeb ._dgbd ||_ddfb ._dgbd ;_cbeb ._gdcfe =_ddfb ._gdcfe ;if _faaga {_a .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_cgged ,_ddfb ,_cbeb );
};_eccg =_cgged ;};if _faaga {_a .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_bfgdg ,_eccg ,_cbeb );};_bfgdg =_eccg ;_fffa [_dgeda ][_cbeb .Llx ]=_cbeb ;};};_fgfc :=make (map[float64 ]map[float64 ]gridTile ,_cddd );
_degf :=make (map[float64 ]map[float64 ]struct{},_cddd );for _deeb :=_cddd -1;_deeb >=0;_deeb --{_ggaddd :=_ffbe [_deeb *_cefec ].Lly ;_fgfc [_ggaddd ]=make (map[float64 ]gridTile ,_cefec );_degf [_ggaddd ]=make (map[float64 ]struct{},_cefec );};if _faaga {_fe .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cffbc );
};for _fcec :=_cddd -1;_fcec >=0;_fcec --{_gfeb :=_ffbe [_fcec *_cefec ].Lly ;_bdccc :=_fffa [_fcec ];if _faaga {_a .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_fcec );};for _ ,_egdf :=range _cfee (_bdccc ){if _ ,_aaddc :=_degf [_gfeb ][_egdf ];
_aaddc {continue ;};_fbaf :=_bdccc [_egdf ];if _faaga {_a .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fbaf .String ());};for _gbgf :=_fcec -1;_gbgf >=0;_gbgf --{if _fbaf ._dgbd {break ;};_ceee :=_fffa [_gbgf ];_bade ,_fcff :=_ceee [_egdf ];
if !_fcff {break ;};if _bade .Urx !=_fbaf .Urx {break ;};_fbaf ._dgbd =_bade ._dgbd ;_fbaf .Lly =_bade .Lly ;if _faaga {_a .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_bade .String (),_fbaf .String ());
};_degf [_bade .Lly ][_bade .Llx ]=struct{}{};};if _fcec ==0{_fbaf ._dgbd =true ;};if _fbaf .complete (){_fgfc [_gfeb ][_egdf ]=_fbaf ;};};};_cddba :=gridTiling {PdfRectangle :_cffbc ,_cfac :_gegdb (_fgfc ),_afdca :_effc (_fgfc ),_fdbd :_fgfc };_cddba .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _cddba ;};func _bfeef (_dfcb ,_bcgb ,_bgace float64 )rulingKind {if _dfcb >=_bgace &&_agbda (_bcgb ,_dfcb ){return _gccg ;};if _bcgb >=_bgace &&_agbda (_dfcb ,_bcgb ){return _efcad ;};return _ccga ;};func (_cdgd *textWord )addDiacritic (_ddaab string ){_gceb :=_cdgd ._eecba [len (_cdgd ._eecba )-1];
_gceb ._cffce +=_ddaab ;_gceb ._cffce =_da .NFKC .String (_gceb ._cffce );};func _deaffa (_ecadc _af .PdfObject ,_fbegg _dd .Color )(_ee .Image ,error ){_bgcgd ,_bbdef :=_af .GetStream (_ecadc );if !_bbdef {return nil ,nil ;};_fcaba ,_dgfdg :=_gd .NewXObjectImageFromStream (_bgcgd );
if _dgfdg !=nil {return nil ,_dgfdg ;};_fagdf ,_dgfdg :=_fcaba .ToImage ();if _dgfdg !=nil {return nil ,_dgfdg ;};return _cfeda (_fagdf ,_fbegg ),nil ;};func (_fdff *shapesState )lineTo (_agbc ,_dcc float64 ){if _fagd {_fe .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_agbc ,_dcc ,_fdff .devicePoint (_agbc ,_dcc ));
};_fdff .addPoint (_agbc ,_dcc );};func (_dgbc *textTable )logComposite (_cacdb string ){if !_bbfbe {return ;};_fe .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_dgbc ._dfagg ,_dgbc ._fdeda ,_cacdb );
_a .Printf ("\u0025\u0035\u0073 \u007c","");for _gdbee :=0;_gdbee < _dgbc ._dfagg ;_gdbee ++{_a .Printf ("\u0025\u0033\u0064 \u007c",_gdbee );};_a .Println ("");_a .Printf ("\u0025\u0035\u0073 \u002b","");for _agecd :=0;_agecd < _dgbc ._dfagg ;_agecd ++{_a .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_a .Println ("");for _aebed :=0;_aebed < _dgbc ._fdeda ;_aebed ++{_a .Printf ("\u0025\u0035\u0064 \u007c",_aebed );for _bacb :=0;_bacb < _dgbc ._dfagg ;_bacb ++{_bfag ,_ :=_dgbc ._bcee [_beag (_bacb ,_aebed )].parasBBox ();_a .Printf ("\u0025\u0033\u0064 \u007c",len (_bfag ));
};_a .Println ("");};_fe .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_dgbc ._dfagg ,_dgbc ._fdeda ,_cacdb );_a .Printf ("\u0025\u0035\u0073 \u007c","");for _gbaee :=0;_gbaee < _dgbc ._dfagg ;_gbaee ++{_a .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_gbaee );
};_a .Println ("");_a .Printf ("\u0025\u0035\u0073 \u002b","");for _deecc :=0;_deecc < _dgbc ._dfagg ;_deecc ++{_a .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_a .Println ("");for _bfbfd :=0;_bfbfd < _dgbc ._fdeda ;
_bfbfd ++{_a .Printf ("\u0025\u0035\u0064 \u007c",_bfbfd );for _fdedb :=0;_fdedb < _dgbc ._dfagg ;_fdedb ++{_bacae ,_ :=_dgbc ._bcee [_beag (_fdedb ,_bfbfd )].parasBBox ();_gggfgb :="";_dfec :=_bacae .merge ();if _dfec !=nil {_gggfgb =_dfec .text ();};
_gggfgb =_a .Sprintf ("\u0025\u0071",_abdb (_gggfgb ,12));_gggfgb =_gggfgb [1:len (_gggfgb )-1];_a .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_gggfgb );};_a .Println ("");};};func _afgc (_baccf []rulingList )(rulingList ,rulingList ){var _gcbfa rulingList ;
for _ ,_ecac :=range _baccf {_gcbfa =append (_gcbfa ,_ecac ...);};return _gcbfa .vertsHorzs ();};func _fgcb (_degba _gd .PdfRectangle )*ruling {return &ruling {_eacc :_gccg ,_egdcc :_degba .Lly ,_cggaf :_degba .Llx ,_dgec :_degba .Urx };};func (_fgaga *textTable )putComposite (_cecba ,_ecgaf int ,_dbfd paraList ,_accd _gd .PdfRectangle ){if len (_dbfd )==0{_fe .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_bdace :=compositeCell {PdfRectangle :_accd ,paraList :_dbfd };if _bbfbe {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_cecba ,_ecgaf ,_bdace .String ());
};_bdace .updateBBox ();_fgaga ._bcee [_beag (_cecba ,_ecgaf )]=_bdace ;};func (_ccgbb paraList )findTableGrid (_cbfc gridTiling )(*textTable ,map[*textPara ]struct{}){_dagfe :=len (_cbfc ._cfac );_dbaf :=len (_cbfc ._afdca );_aaag :=textTable {_agfdb :true ,_dfagg :_dagfe ,_fdeda :_dbaf ,_adfd :make (map[uint64 ]*textPara ,_dagfe *_dbaf ),_bcee :make (map[uint64 ]compositeCell ,_dagfe *_dbaf )};
_aaag .PdfRectangle =_cbfc .PdfRectangle ;_gggdb :=make (map[*textPara ]struct{});_dcdea :=int ((1.0-_acbe )*float64 (_dagfe *_dbaf ));_fcbcf :=0;if _faaga {_fe .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_dagfe ,_dbaf );
};for _ddcde ,_febca :=range _cbfc ._afdca {_ebbe ,_afeecdc :=_cbfc ._fdbd [_febca ];if !_afeecdc {continue ;};for _aegfe ,_cfcg :=range _cbfc ._cfac {_aege ,_caecfc :=_ebbe [_cfcg ];if !_caecfc {continue ;};_degca :=_ccgbb .inTile (_aege );if len (_degca )==0{_fcbcf ++;
if _fcbcf > _dcdea {if _faaga {_fe .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_fcbcf );};return nil ,nil ;};}else {_aaag .putComposite (_aegfe ,_ddcde ,_degca ,_aege .PdfRectangle );for _ ,_bebge :=range _degca {_gggdb [_bebge ]=struct{}{};
};};};};_fgfe :=0;for _becd :=0;_becd < _dagfe ;_becd ++{_dafe :=_aaag .get (_becd ,0);if _dafe ==nil ||!_dafe ._begb {_fgfe ++;};};if _fgfe ==0{if _faaga {_fe .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_faegc :=_aaag .reduceTiling (_cbfc ,_dfef );_faegc =_faegc .subdivide ();return _faegc ,_gggdb ;};func (_fdda *wordBag )maxDepth ()float64 {return _fdda ._dgbb -_fdda .Lly };func (_fdd *stateStack )size ()int {return len (*_fdd )};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_gd .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func (_bcadb *textTable )emptyCompositeColumn (_ecfag int )bool {for _baff :=0;_baff < _bcadb ._fdeda ;_baff ++{if _eegba ,_cdfbe :=_bcadb ._bcee [_beag (_ecfag ,_baff )];
_cdfbe {if len (_eegba .paraList )> 0{return false ;};};};return true ;};func (_cbgd *wordBag )getDepthIdx (_daedc float64 )int {_fcbg :=_cbgd .depthIndexes ();_eab :=_eabe (_daedc );if _eab < _fcbg [0]{return _fcbg [0];};if _eab > _fcbg [len (_fcbg )-1]{return _fcbg [len (_fcbg )-1];
};return _eab ;};func (_adea paraList )list ()[]*list {var _cgce []*textLine ;var _cccc []*textLine ;for _ ,_abbfb :=range _adea {_cgbg :=_abbfb .getListLines ();_cgce =append (_cgce ,_cgbg ...);_cccc =append (_cccc ,_abbfb ._aega ...);};_cafb :=_aggc (_cgce );
_feff :=_ecfa (_cccc ,_cafb );return _feff ;};func _gfece (_accad []_af .PdfObject )(_cgcb ,_agced float64 ,_bbef error ){if len (_accad )!=2{return 0,0,_a .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_accad ));
};_fdde ,_bbef :=_af .GetNumbersAsFloat (_accad );if _bbef !=nil {return 0,0,_bbef ;};return _fdde [0],_fdde [1],nil ;};func (_effcc rulingList )merge ()*ruling {_cfbbe :=_effcc [0]._egdcc ;_dfgee :=_effcc [0]._cggaf ;_cdddf :=_effcc [0]._dgec ;for _ ,_cffbcg :=range _effcc [1:]{_cfbbe +=_cffbcg ._egdcc ;
if _cffbcg ._cggaf < _dfgee {_dfgee =_cffbcg ._cggaf ;};if _cffbcg ._dgec > _cdddf {_cdddf =_cffbcg ._dgec ;};};_feeg :=&ruling {_eacc :_effcc [0]._eacc ,_cbbab :_effcc [0]._cbbab ,Color :_effcc [0].Color ,_egdcc :_cfbbe /float64 (len (_effcc )),_cggaf :_dfgee ,_dgec :_cdddf };
if _gabg {_fe .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_effcc ),_feeg );for _eaaa ,_fbbd :=range _effcc {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_eaaa ,_fbbd );};
};return _feeg ;};func _gacag (_ebdga []*textLine ,_ffed string ,_cbbe []*list )*list {return &list {_efdbc :_ebdga ,_gbdd :_ffed ,_egdad :_cbbe };};func (_feea *subpath )add (_ageb ..._cbc .Point ){_feea ._gdcg =append (_feea ._gdcg ,_ageb ...)};func (_fegda *textTable )computeBbox ()_gd .PdfRectangle {var _bgcd _gd .PdfRectangle ;
_fabb :=false ;for _fcagf :=0;_fcagf < _fegda ._fdeda ;_fcagf ++{for _aacge :=0;_aacge < _fegda ._dfagg ;_aacge ++{_acad :=_fegda .get (_aacge ,_fcagf );if _acad ==nil {continue ;};if !_fabb {_bgcd =_acad .PdfRectangle ;_fabb =true ;}else {_bgcd =_cbcaf (_bgcd ,_acad .PdfRectangle );
};};};return _bgcd ;};func (_dacdg rulingList )snapToGroupsDirection ()rulingList {_dacdg .sortStrict ();_dccda :=make (map[*ruling ]rulingList ,len (_dacdg ));_fede :=_dacdg [0];_beed :=func (_accf *ruling ){_fede =_accf ;_dccda [_fede ]=rulingList {_accf }};
_beed (_dacdg [0]);for _ ,_aeeaa :=range _dacdg [1:]{if _aeeaa ._egdcc < _fede ._egdcc -_cece {_fe .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_fede ,_aeeaa );
};if _aeeaa ._egdcc > _fede ._egdcc +_dbbg {_beed (_aeeaa );}else {_dccda [_fede ]=append (_dccda [_fede ],_aeeaa );};};_ddgge :=make (map[*ruling ]float64 ,len (_dccda ));_cbbdd :=make (map[*ruling ]*ruling ,len (_dacdg ));for _gcbbfd ,_cbfef :=range _dccda {_ddgge [_gcbbfd ]=_cbfef .mergePrimary ();
for _ ,_gafc :=range _cbfef {_cbbdd [_gafc ]=_gcbbfd ;};};for _ ,_badee :=range _dacdg {_badee ._egdcc =_ddgge [_cbbdd [_badee ]];};_dbbef :=make (rulingList ,0,len (_dacdg ));for _ ,_eaca :=range _dccda {_fecdb :=_eaca .splitSec ();for _ffaa ,_bccb :=range _fecdb {_gbdf :=_bccb .merge ();
if len (_dbbef )> 0{_edde :=_dbbef [len (_dbbef )-1];if _edde .alignsPrimary (_gbdf )&&_edde .alignsSec (_gbdf ){_fe .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_ffaa ,_edde ,_gbdf );
continue ;};};_dbbef =append (_dbbef ,_gbdf );};};_dbbef .sortStrict ();return _dbbef ;};func (_ecbe rulingList )primaries ()[]float64 {_feec :=make (map[float64 ]struct{},len (_ecbe ));for _ ,_cdfa :=range _ecbe {_feec [_cdfa ._egdcc ]=struct{}{};};_aggdd :=make ([]float64 ,len (_feec ));
_deadac :=0;for _ffbc :=range _feec {_aggdd [_deadac ]=_ffbc ;_deadac ++;};_f .Float64s (_aggdd );return _aggdd ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_cacc bool ;_efbde bool ;};func (_cbba *textPara )writeText (_cdba _c .Writer ){if _cbba ._ecga ==nil {_cbba .writeCellText (_cdba );return ;};for _fgca :=0;_fgca < _cbba ._ecga ._fdeda ;_fgca ++{for _adgf :=0;_adgf < _cbba ._ecga ._dfagg ;
_adgf ++{_bacag :=_cbba ._ecga .get (_adgf ,_fgca );if _bacag ==nil {_cdba .Write ([]byte ("\u0009"));}else {_bacag .writeCellText (_cdba );};_cdba .Write ([]byte ("\u0020"));};if _fgca < _cbba ._ecga ._fdeda -1{_cdba .Write ([]byte ("\u000a"));};};};func (_aadda paraList )addNeighbours (){_fggd :=func (_cfbag []int ,_cdfbf *textPara )([]*textPara ,[]*textPara ){_caff :=make ([]*textPara ,0,len (_cfbag )-1);
_eage :=make ([]*textPara ,0,len (_cfbag )-1);for _ ,_aefdb :=range _cfbag {_dgaea :=_aadda [_aefdb ];if _dgaea .Urx <=_cdfbf .Llx {_caff =append (_caff ,_dgaea );}else if _dgaea .Llx >=_cdfbf .Urx {_eage =append (_eage ,_dgaea );};};return _caff ,_eage ;
};_fdga :=func (_fdgab []int ,_ffdb *textPara )([]*textPara ,[]*textPara ){_aeeg :=make ([]*textPara ,0,len (_fdgab )-1);_abaag :=make ([]*textPara ,0,len (_fdgab )-1);for _ ,_eefc :=range _fdgab {_cgbge :=_aadda [_eefc ];if _cgbge .Ury <=_ffdb .Lly {_abaag =append (_abaag ,_cgbge );
}else if _cgbge .Lly >=_ffdb .Ury {_aeeg =append (_aeeg ,_cgbge );};};return _aeeg ,_abaag ;};_efbda :=_aadda .yNeighbours (_cfce );for _ ,_eaccc :=range _aadda {_bbgeb :=_efbda [_eaccc ];if len (_bbgeb )==0{continue ;};_egfa ,_fadf :=_fggd (_bbgeb ,_eaccc );
if len (_egfa )==0&&len (_fadf )==0{continue ;};if len (_egfa )> 0{_efdd :=_egfa [0];for _ ,_eebd :=range _egfa [1:]{if _eebd .Urx >=_efdd .Urx {_efdd =_eebd ;};};for _ ,_eebg :=range _egfa {if _eebg !=_efdd &&_eebg .Urx > _efdd .Llx {_efdd =nil ;break ;
};};if _efdd !=nil &&_bbfb (_eaccc .PdfRectangle ,_efdd .PdfRectangle ){_eaccc ._dddb =_efdd ;};};if len (_fadf )> 0{_abebe :=_fadf [0];for _ ,_gafb :=range _fadf [1:]{if _gafb .Llx <=_abebe .Llx {_abebe =_gafb ;};};for _ ,_baaab :=range _fadf {if _baaab !=_abebe &&_baaab .Llx < _abebe .Urx {_abebe =nil ;
break ;};};if _abebe !=nil &&_bbfb (_eaccc .PdfRectangle ,_abebe .PdfRectangle ){_eaccc ._bbdf =_abebe ;};};};_efbda =_aadda .xNeighbours (_gegfe );for _ ,_agaab :=range _aadda {_bdccce :=_efbda [_agaab ];if len (_bdccce )==0{continue ;};_decd ,_cdgbe :=_fdga (_bdccce ,_agaab );
if len (_decd )==0&&len (_cdgbe )==0{continue ;};if len (_cdgbe )> 0{_fbfcb :=_cdgbe [0];for _ ,_bdafg :=range _cdgbe [1:]{if _bdafg .Ury >=_fbfcb .Ury {_fbfcb =_bdafg ;};};for _ ,_cgagf :=range _cdgbe {if _cgagf !=_fbfcb &&_cgagf .Ury > _fbfcb .Lly {_fbfcb =nil ;
break ;};};if _fbfcb !=nil &&_bacf (_agaab .PdfRectangle ,_fbfcb .PdfRectangle ){_agaab ._bdbb =_fbfcb ;};};if len (_decd )> 0{_bcedb :=_decd [0];for _ ,_ccebc :=range _decd [1:]{if _ccebc .Lly <=_bcedb .Lly {_bcedb =_ccebc ;};};for _ ,_bfgc :=range _decd {if _bfgc !=_bcedb &&_bfgc .Lly < _bcedb .Ury {_bcedb =nil ;
break ;};};if _bcedb !=nil &&_bacf (_agaab .PdfRectangle ,_bcedb .PdfRectangle ){_agaab ._dgcf =_bcedb ;};};};for _ ,_aaccg :=range _aadda {if _aaccg ._dddb !=nil &&_aaccg ._dddb ._bbdf !=_aaccg {_aaccg ._dddb =nil ;};if _aaccg ._dgcf !=nil &&_aaccg ._dgcf ._bdbb !=_aaccg {_aaccg ._dgcf =nil ;
};if _aaccg ._bbdf !=nil &&_aaccg ._bbdf ._dddb !=_aaccg {_aaccg ._bbdf =nil ;};if _aaccg ._bdbb !=nil &&_aaccg ._bdbb ._dgcf !=_aaccg {_aaccg ._bdbb =nil ;};};};func _gggg (_bedg *textLine )bool {_gefd :=true ;_bbfdf :=-1;for _ ,_eceg :=range _bedg ._effba {for _ ,_fabd :=range _eceg ._eecba {_cabcd :=_fabd ._bbcbf ;
if _bbfdf ==-1{_bbfdf =_cabcd ;}else {if _bbfdf !=_cabcd {_gefd =false ;break ;};};};};return _gefd ;};func (_dffg *stateStack )empty ()bool {return len (*_dffg )==0};func (_bada *textTable )emptyCompositeRow (_caecf int )bool {for _egfeg :=0;_egfeg < _bada ._dfagg ;
_egfeg ++{if _fadc ,_eebb :=_bada ._bcee [_beag (_egfeg ,_caecf )];_eebb {if len (_fadc .paraList )> 0{return false ;};};};return true ;};func _fcbgg (_bfcdc ,_gedgf float64 )string {_efba :=!_ddfbb (_bfcdc -_gedgf );if _efba {return "\u000a";};return "\u0020";
};func (_gefe rulingList )blocks (_efdbe ,_bagag *ruling )bool {if _efdbe ._cggaf > _bagag ._dgec ||_bagag ._cggaf > _efdbe ._dgec {return false ;};_dggd :=_ec .Max (_efdbe ._cggaf ,_bagag ._cggaf );_ccea :=_ec .Min (_efdbe ._dgec ,_bagag ._dgec );if _efdbe ._egdcc > _bagag ._egdcc {_efdbe ,_bagag =_bagag ,_efdbe ;
};for _ ,_badc :=range _gefe {if _efdbe ._egdcc <=_badc ._egdcc +_dbbg &&_badc ._egdcc <=_bagag ._egdcc +_dbbg &&_badc ._cggaf <=_ccea &&_dggd <=_badc ._dgec {return true ;};};return false ;};func _ecfa (_faff []*textLine ,_bbce map[float64 ][]*textLine )[]*list {_bdcc :=_edccc (_bbce );
_ffee :=[]*list {};if len (_bdcc )==0{return _ffee ;};_eegg :=_bdcc [0];_aggb :=1;_egga :=_bbce [_eegg ];for _agef ,_dcgf :=range _egga {var _bbde float64 ;_efbbd :=[]*list {};_dedd :=_dcgf ._bcbff ;_gdgfc :=-1.0;if _agef < len (_egga )-1{_gdgfc =_egga [_agef +1]._bcbff ;
};if _aggb < len (_bdcc ){_efbbd =_cgdb (_faff ,_bbce ,_bdcc ,_aggb ,_dedd ,_gdgfc );};_bbde =_gdgfc ;if len (_efbbd )> 0{_gege :=_efbbd [0];if len (_gege ._efdbc )> 0{_bbde =_gege ._efdbc [0]._bcbff ;};};_gaea :=[]*textLine {_dcgf };_ggad :=_gfaed (_dcgf ,_faff ,_bdcc ,_dedd ,_bbde );
_gaea =append (_gaea ,_ggad ...);_egaa :=_gacag (_gaea ,"\u0062\u0075\u006c\u006c\u0065\u0074",_efbbd );_egaa ._abef =_gfcd (_gaea ,"");_ffee =append (_ffee ,_egaa );};return _ffee ;};func (_bcacc rulingList )augmentGrid ()(rulingList ,rulingList ){_ebdd ,_gbcb :=_bcacc .vertsHorzs ();
if len (_ebdd )==0||len (_gbcb )==0{return _ebdd ,_gbcb ;};_dfba ,_cfaec :=_ebdd ,_gbcb ;_abcba :=_ebdd .bbox ();_ecabb :=_gbcb .bbox ();if _caga {_fe .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_abcba );
_fe .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_ecabb );};var _bgedc ,_gaaag ,_gegag ,_bdfg *ruling ;if _ecabb .Llx < _abcba .Llx -_bbge {_bgedc =&ruling {_cbbab :_eabb ,_eacc :_efcad ,_egdcc :_ecabb .Llx ,_cggaf :_abcba .Lly ,_dgec :_abcba .Ury };
_ebdd =append (rulingList {_bgedc },_ebdd ...);};if _ecabb .Urx > _abcba .Urx +_bbge {_gaaag =&ruling {_cbbab :_eabb ,_eacc :_efcad ,_egdcc :_ecabb .Urx ,_cggaf :_abcba .Lly ,_dgec :_abcba .Ury };_ebdd =append (_ebdd ,_gaaag );};if _abcba .Lly < _ecabb .Lly -_bbge {_gegag =&ruling {_cbbab :_eabb ,_eacc :_gccg ,_egdcc :_abcba .Lly ,_cggaf :_ecabb .Llx ,_dgec :_ecabb .Urx };
_gbcb =append (rulingList {_gegag },_gbcb ...);};if _abcba .Ury > _ecabb .Ury +_bbge {_bdfg =&ruling {_cbbab :_eabb ,_eacc :_gccg ,_egdcc :_abcba .Ury ,_cggaf :_ecabb .Llx ,_dgec :_ecabb .Urx };_gbcb =append (_gbcb ,_bdfg );};if len (_ebdd )+len (_gbcb )==len (_bcacc ){return _dfba ,_cfaec ;
};_ebgff :=append (_ebdd ,_gbcb ...);_bcacc .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_ebgff .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _ebdd ,_gbcb ;};func (_bdadb *textTable )log (_beab string ){if !_bbfbe {return ;
};_fe .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_beab ,_bdadb ._dfagg ,_bdadb ._fdeda ,_bdadb ._agfdb ,_bdadb .PdfRectangle );
for _gfgd :=0;_gfgd < _bdadb ._fdeda ;_gfgd ++{for _fggcg :=0;_fggcg < _bdadb ._dfagg ;_fggcg ++{_gbace :=_bdadb .get (_fggcg ,_gfgd );if _gbace ==nil {continue ;};_a .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_fggcg ,_gfgd ,_gbace .PdfRectangle ,_abdb (_gbace .text (),50),_cf .RuneCountInString (_gbace .text ()));
};};};var _cada =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func _dade (_cccg string )bool {if _cf .RuneCountInString (_cccg )< _aeffb {return false ;};_acafd ,_dfeg :=_cf .DecodeLastRuneInString (_cccg );
if _dfeg <=0||!_bg .Is (_bg .Hyphen ,_acafd ){return false ;};_acafd ,_dfeg =_cf .DecodeLastRuneInString (_cccg [:len (_cccg )-_dfeg ]);return _dfeg > 0&&!_bg .IsSpace (_acafd );};func _eece (_acdbf string )bool {for _ ,_aefb :=range _acdbf {if !_bg .IsSpace (_aefb ){return false ;
};};return true ;};func (_fagfg paraList )findGridTables (_gbaf []gridTiling )[]*textTable {if _bbfbe {_fe .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_fagfg ));
for _fcee ,_febg :=range _fagfg {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fcee ,_febg );};};var _dcecb []*textTable ;for _caaccb ,_gdad :=range _gbaf {_aeecb ,_fcge :=_fagfg .findTableGrid (_gdad );if _aeecb !=nil {_aeecb .log (_a .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_caaccb ));
_dcecb =append (_dcecb ,_aeecb );_aeecb .markCells ();};for _aeaae :=range _fcge {_aeaae ._dbbf =true ;};};if _bbfbe {_fe .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_dcecb ));
};return _dcecb ;};var _bdba =map[rulingKind ]string {_ccga :"\u006e\u006f\u006e\u0065",_gccg :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_efcad :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func (_fcdd *subpath )removeDuplicates (){if len (_fcdd ._gdcg )==0{return ;
};_adae :=[]_cbc .Point {_fcdd ._gdcg [0]};for _ ,_fdgd :=range _fcdd ._gdcg [1:]{if !_cgfg (_fdgd ,_adae [len (_adae )-1]){_adae =append (_adae ,_fdgd );};};_fcdd ._gdcg =_adae ;};type imageExtractContext struct{_cfaf []ImageMark ;_gb int ;_afda int ;
_adc int ;_abc map[*_af .PdfObjectStream ]*cachedImage ;_aba *ImageExtractOptions ;};func _eadf (_ccccd _gd .PdfRectangle )*ruling {return &ruling {_eacc :_efcad ,_egdcc :_ccccd .Urx ,_cggaf :_ccccd .Lly ,_dgec :_ccccd .Ury };};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_aed []TextMark };func _faffa (_bebab ,_gbga _cbc .Point )bool {_ccfde :=_ec .Abs (_bebab .X -_gbga .X );_ecgag :=_ec .Abs (_bebab .Y -_gbga .Y );return _agbda (_ecgag ,_ccfde );};func _caeab (_efbf []TextMark ,_cfcc *TextTable )[]TextMark {var _deef []TextMark ;
for _ ,_gaceb :=range _efbf {_gaceb ._egda =true ;_gaceb ._ada =_cfcc ;_deef =append (_deef ,_gaceb );};return _deef ;};func _adgg (_fdbe ,_cgdcd _gd .PdfRectangle )bool {return _fdbe .Llx <=_cgdcd .Llx &&_cgdcd .Urx <=_fdbe .Urx &&_fdbe .Lly <=_cgdcd .Lly &&_cgdcd .Ury <=_fdbe .Ury ;
};func (_beede *textWord )bbox ()_gd .PdfRectangle {return _beede .PdfRectangle };func (_baba rulingList )toGrids ()[]rulingList {if _caga {_fe .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_baba );};_ffcdd :=_baba .intersections ();
if _caga {_fe .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_baba ),len (_ffcdd ));for _ ,_caabgf :=range _adcb (_ffcdd ){_a .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_caabgf ,_ffcdd [_caabgf ]);
};};_adfg :=make (map[int ]intSet ,len (_baba ));for _abec :=range _baba {_cgba :=_baba .connections (_ffcdd ,_abec );if len (_cgba )> 0{_adfg [_abec ]=_cgba ;};};if _caga {_fe .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_adfg ));
for _ ,_dfcae :=range _adcb (_adfg ){_a .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_dfcae ,_adfg [_dfcae ]);};};_acbde :=_cbec (len (_baba ),func (_fefd ,_bfcg int )bool {_egeg ,_fegd :=len (_adfg [_fefd ]),len (_adfg [_bfcg ]);if _egeg !=_fegd {return _egeg > _fegd ;
};return _baba .comp (_fefd ,_bfcg );});if _caga {_fe .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_acbde );};_ebfff :=[][]int {{_acbde [0]}};_fgbdd :for _ ,_ebbbb :=range _acbde [1:]{for _cdaa ,_ffgd :=range _ebfff {for _ ,_adbad :=range _ffgd {if _adfg [_adbad ].has (_ebbbb ){_ebfff [_cdaa ]=append (_ffgd ,_ebbbb );
continue _fgbdd ;};};};_ebfff =append (_ebfff ,[]int {_ebbbb });};if _caga {_fe .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_ebfff );};_f .SliceStable (_ebfff ,func (_dddeg ,_eacb int )bool {return len (_ebfff [_dddeg ])> len (_ebfff [_eacb ])});
for _ ,_ddcbg :=range _ebfff {_f .Slice (_ddcbg ,func (_adfa ,_geag int )bool {return _baba .comp (_ddcbg [_adfa ],_ddcbg [_geag ])});};_aaad :=make ([]rulingList ,len (_ebfff ));for _cfaac ,_gbgb :=range _ebfff {_edec :=make (rulingList ,len (_gbgb ));
for _defeg ,_edgfb :=range _gbgb {_edec [_defeg ]=_baba [_edgfb ];};_aaad [_cfaac ]=_edec ;};if _caga {_fe .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_aaad );};var _aaef []rulingList ;for _ ,_gccb :=range _aaad {if _dgdf ,_bbed :=_gccb .isActualGrid ();
_bbed {_gccb =_dgdf ;_gccb =_gccb .snapToGroups ();_aaef =append (_aaef ,_gccb );};};if _caga {_fgda ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_aaef );_fe .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_aaad ),len (_aaef ));
};return _aaef ;};type wordBag struct{_gd .PdfRectangle ;_bfdf float64 ;_cdbd ,_ceaga rulingList ;_dgbb float64 ;_dbfe map[int ][]*textWord ;};type event struct{_eeag float64 ;_aadfa bool ;_edbdg int ;};

// String returns a description of `k`.
func (_geea rulingKind )String ()string {_agfdg ,_edgb :=_bdba [_geea ];if !_edgb {return _a .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_geea );};return _agfdg ;};const _cebe =10;func (_bfd *textObject )setTextMatrix (_bfg []float64 ){if len (_bfg )!=6{_fe .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_bfg ));
return ;};_ebbd ,_dfcc ,_fbfb ,_dea ,_aadg ,_aefe :=_bfg [0],_bfg [1],_bfg [2],_bfg [3],_bfg [4],_bfg [5];_bfd ._cffb =_cbc .NewMatrix (_ebbd ,_dfcc ,_fbfb ,_dea ,_aadg ,_aefe );_bfd ._fbff =_bfd ._cffb ;};func _ccebb (_ceegb []*textWord ,_aafcc *textWord )[]*textWord {for _gfgc ,_fccg :=range _ceegb {if _fccg ==_aafcc {return _cdagg (_ceegb ,_gfgc );
};};_fe .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_aafcc );
return nil ;};

// String returns a description of `w`.
func (_fbfe *textWord )String ()string {return _a .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_fbfe ._fbfd ,_fbfe .PdfRectangle ,_fbfe ._dgac ,_fbfe ._eaecc );
};func (_fcba *textPara )getListLines ()[]*textLine {var _bfdb []*textLine ;_cabe :=_daedd (_fcba ._aega );for _ ,_fbcb :=range _fcba ._aega {_dfde :=_fbcb ._effba [0]._eaecc [0];if _cgea (_dfde ){_bfdb =append (_bfdb ,_fbcb );};};_bfdb =append (_bfdb ,_cabe ...);
return _bfdb ;};func (_eggc *textTable )newTablePara ()*textPara {_bbfda :=_eggc .computeBbox ();_adbff :=&textPara {PdfRectangle :_bbfda ,_gdce :_bbfda ,_ecga :_eggc };if _bbfbe {_fe .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_adbff );
};return _adbff ;};func _cdbg (_facf _cbc .Point )*subpath {return &subpath {_gdcg :[]_cbc .Point {_facf }}};func (_afdb *wordBag )applyRemovals (_bfbf map[int ]map[*textWord ]struct{}){for _aafb ,_gacb :=range _bfbf {if len (_gacb )==0{continue ;};_bebc :=_afdb ._dbfe [_aafb ];
_gadd :=len (_bebc )-len (_gacb );if _gadd ==0{delete (_afdb ._dbfe ,_aafb );continue ;};_caca :=make ([]*textWord ,_gadd );_faeb :=0;for _ ,_bcfd :=range _bebc {if _ ,_caacc :=_gacb [_bcfd ];!_caacc {_caca [_faeb ]=_bcfd ;_faeb ++;};};_afdb ._dbfe [_aafb ]=_caca ;
};};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_fge *shapesState )newSubPath (){_fge .clearPath ();if _fagd {_fe .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_fge );};};var (_de =_b .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_ddf =_b .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _gfcd (_gfae []*textLine ,_bbfg string )string {var _ccce _df .Builder ;_abfg :=0.0;for _eaab ,_cefe :=range _gfae {_cbfdc :=_cefe .text ();
_dfccc :=_cefe ._bcbff ;if _eaab < len (_gfae )-1{_abfg =_gfae [_eaab +1]._bcbff ;}else {_abfg =0.0;};_ccce .WriteString (_bbfg );_ccce .WriteString (_cbfdc );if _abfg !=_dfccc {_ccce .WriteString ("\u000a");}else {_ccce .WriteString ("\u0020");};};return _ccce .String ();
};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_gd .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func _cfee (_bddfd map[float64 ]gridTile )[]float64 {_fffc :=make ([]float64 ,0,len (_bddfd ));for _edae :=range _bddfd {_fffc =append (_fffc ,_edae );};_f .Float64s (_fffc );return _fffc ;
};func (_dbgg *textObject )reset (){_dbgg ._cffb =_cbc .IdentityMatrix ();_dbgg ._fbff =_cbc .IdentityMatrix ();_dbgg ._dead =nil ;};func (_aabc *wordBag )pullWord (_dbce *textWord ,_caaccf int ,_aead map[int ]map[*textWord ]struct{}){_aabc .PdfRectangle =_cbcaf (_aabc .PdfRectangle ,_dbce .PdfRectangle );
if _dbce ._dgac > _aabc ._bfdf {_aabc ._bfdf =_dbce ._dgac ;};_aabc ._dbfe [_caaccf ]=append (_aabc ._dbfe [_caaccf ],_dbce );_aead [_caaccf ][_dbce ]=struct{}{};};

// String returns a description of `tm`.
func (_fdgcd *textMark )String ()string {return _a .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_fdgcd .PdfRectangle ,_fdgcd ._fccd ,_fdgcd ._cffce );};func _gcbbf (_bfdc _gd .PdfRectangle ,_deddg ,_aeaea ,_caad ,_cfged *ruling )gridTile {_bgcf :=_bfdc .Llx ;
_cdbee :=_bfdc .Urx ;_ffeb :=_bfdc .Lly ;_aegg :=_bfdc .Ury ;return gridTile {PdfRectangle :_bfdc ,_dbgb :_deddg !=nil &&_deddg .encloses (_ffeb ,_aegg ),_gdcfe :_aeaea !=nil &&_aeaea .encloses (_ffeb ,_aegg ),_dgbd :_caad !=nil &&_caad .encloses (_bgcf ,_cdbee ),_fadb :_cfged !=nil &&_cfged .encloses (_bgcf ,_cdbee )};
};func _bfdgg (_cfdf []*textMark ,_adbfg _gd .PdfRectangle )*textWord {_edacf :=_cfdf [0].PdfRectangle ;_ggdg :=_cfdf [0]._fccd ;for _ ,_ccba :=range _cfdf [1:]{_edacf =_cbcaf (_edacf ,_ccba .PdfRectangle );if _ccba ._fccd > _ggdg {_ggdg =_ccba ._fccd ;
};};return &textWord {PdfRectangle :_edacf ,_eecba :_cfdf ,_fbfd :_adbfg .Ury -_edacf .Lly ,_dgac :_ggdg };};func _aafc (_agedb []pathSection )rulingList {_ecfce (_agedb );if _caga {_fe .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_agedb ));
};var _abdeb rulingList ;for _ ,_eaeb :=range _agedb {for _ ,_fegfe :=range _eaeb ._eebe {if len (_fegfe ._gdcg )< 2{continue ;};_aegc :=_fegfe ._gdcg [0];for _ ,_cgaf :=range _fegfe ._gdcg [1:]{if _dgad ,_fbeb :=_efab (_aegc ,_cgaf ,_eaeb .Color );_fbeb {_abdeb =append (_abdeb ,_dgad );
};_aegc =_cgaf ;};};};if _caga {_fe .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_abdeb );};return _abdeb ;};func _fcef (_gabb *list )[]*textLine {for _ ,_fbbc :=range _gabb ._egdad {switch _fbbc ._gbdd {case "\u004c\u0042\u006fd\u0079":if len (_fbbc ._efdbc )!=0{return _fbbc ._efdbc ;
};return _fcef (_fbbc );case "\u0053\u0070\u0061\u006e":return _fbbc ._efdbc ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _fbbc ._efdbc ;};};return nil ;};

// String returns a string describing `pt`.
func (_bdbg PageText )String ()string {_egfcg :=_a .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_bdbg ._gbba ));_eafg :=[]string {"\u002d"+_egfcg };for _ ,_aae :=range _bdbg ._gbba {_eafg =append (_eafg ,_aae .String ());
};_eafg =append (_eafg ,"\u002b"+_egfcg );return _df .Join (_eafg ,"\u000a");};

// String returns a human readable description of `vecs`.
func (_ddfe rulingList )String ()string {if len (_ddfe )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_aegcd ,_aabfb :=_ddfe .vertsHorzs ();_bgaac :=len (_aegcd );_defg :=len (_aabfb );if _bgaac ==0||_defg ==0{return _a .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_bgaac ,_defg );
};_adccf :=_gd .PdfRectangle {Llx :_aegcd [0]._egdcc ,Urx :_aegcd [_bgaac -1]._egdcc ,Lly :_aabfb [_defg -1]._egdcc ,Ury :_aabfb [0]._egdcc };return _a .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_bgaac ,_defg ,_adccf );
};func (_aff *imageExtractContext )processOperand (_effb *_cb .ContentStreamOperation ,_agf _cb .GraphicsState ,_aad *_gd .PdfPageResources )error {if _effb .Operand =="\u0042\u0049"&&len (_effb .Params )==1{_ecf ,_gcc :=_effb .Params [0].(*_cb .ContentStreamInlineImage );
if !_gcc {return nil ;};if _cg ,_eef :=_af .GetBoolVal (_ecf .ImageMask );_eef {if _cg &&!_aff ._aba .IncludeInlineStencilMasks {return nil ;};};return _aff .extractInlineImage (_ecf ,_agf ,_aad );}else if _effb .Operand =="\u0044\u006f"&&len (_effb .Params )==1{_gf ,_cbb :=_af .GetName (_effb .Params [0]);
if !_cbb {_fe .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _de ;};_ ,_adf :=_aad .GetXObjectByName (*_gf );switch _adf {case _gd .XObjectTypeImage :return _aff .extractXObjectImage (_gf ,_agf ,_aad );case _gd .XObjectTypeForm :return _aff .extractFormImages (_gf ,_agf ,_aad );
};};return nil ;};func (_cbbf *subpath )isQuadrilateral ()bool {if len (_cbbf ._gdcg )< 4||len (_cbbf ._gdcg )> 5{return false ;};if len (_cbbf ._gdcg )==5{_gcfdc :=_cbbf ._gdcg [0];_cbddf :=_cbbf ._gdcg [4];if _gcfdc .X !=_cbddf .X ||_gcfdc .Y !=_cbddf .Y {return false ;
};};return true ;};func _cbcaf (_bbcb ,_gecg _gd .PdfRectangle )_gd .PdfRectangle {return _gd .PdfRectangle {Llx :_ec .Min (_bbcb .Llx ,_gecg .Llx ),Lly :_ec .Min (_bbcb .Lly ,_gecg .Lly ),Urx :_ec .Max (_bbcb .Urx ,_gecg .Urx ),Ury :_ec .Max (_bbcb .Ury ,_gecg .Ury )};
};func _cfge (_gcge float64 ,_ceeg int )int {if _ceeg ==0{_ceeg =1;};_aacc :=float64 (_ceeg );return int (_ec .Round (_gcge /_aacc )*_aacc );};func (_dcaf *shapesState )quadraticTo (_dagf ,_efdg ,_fecc ,_dgbg float64 ){if _fagd {_fe .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_dcaf .addPoint (_fecc ,_dgbg );};func _daae (_dacgb *wordBag ,_dcdc *textWord ,_gcf float64 )bool {return _dcdc .Llx < _dacgb .Urx +_gcf &&_dacgb .Llx -_gcf < _dcdc .Urx ;};func (_bdec *textObject )nextLine (){_bdec .moveLP (0,-_bdec ._bacc ._cebf )};
func (_gcd *shapesState )moveTo (_gfec ,_bgce float64 ){_gcd ._bdce =true ;_gcd ._cfbg =_gcd .devicePoint (_gfec ,_bgce );if _fagd {_fe .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_gfec ,_bgce ,_gcd ._cfbg );
};};func (_dgea rulingList )log (_bgabd string ){if !_caga {return ;};_fe .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_bgabd ,_dgea .String ());for _fbgd ,_egag :=range _dgea {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbgd ,_egag .String ());
};};func (_ceace *textWord )appendMark (_efgbc *textMark ,_cgdfb _gd .PdfRectangle ){_ceace ._eecba =append (_ceace ._eecba ,_efgbc );_ceace .PdfRectangle =_cbcaf (_ceace .PdfRectangle ,_efgbc .PdfRectangle );if _efgbc ._fccd > _ceace ._dgac {_ceace ._dgac =_efgbc ._fccd ;
};_ceace ._fbfd =_cgdfb .Ury -_ceace .PdfRectangle .Lly ;};func (_dgdg paraList )sortTopoOrder (){_fcbgb :=_dgdg .topoOrder ();_dgdg .reorder (_fcbgb )};

// String returns a string describing `tm`.
func (_dfa TextMark )String ()string {_ggd :=_dfa .BBox ;var _efc string ;if _dfa .Font !=nil {_efc =_dfa .Font .String ();if len (_efc )> 50{_efc =_efc [:50]+"\u002e\u002e\u002e";};};var _ccbg string ;if _dfa .Meta {_ccbg ="\u0020\u002a\u004d\u002a";};
return _a .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_dfa .Offset ,_dfa .Text ,[]rune (_dfa .Text ),_ggd .Llx ,_ggd .Lly ,_ggd .Urx ,_ggd .Ury ,_efc ,_ccbg );
};func (_dgdd *textLine )markWordBoundaries (){_daee :=_egae *_dgdd ._acg ;for _daef ,_cdedd :=range _dgdd ._effba [1:]{if _fdef (_cdedd ,_dgdd ._effba [_daef ])>=_daee {_cdedd ._ddbb =true ;};};};func (_bbea *textObject )showTextAdjusted (_cae *_af .PdfObjectArray ,_bbg int )error {_feba :=false ;
for _ ,_fade :=range _cae .Elements (){switch _fade .(type ){case *_af .PdfObjectFloat ,*_af .PdfObjectInteger :_ecff ,_faeg :=_af .GetNumberAsFloat (_fade );if _faeg !=nil {_fe .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fade ,_cae );
return _faeg ;};_gdd ,_ebdg :=-_ecff *0.001*_bbea ._bacc ._afb ,0.0;if _feba {_ebdg ,_gdd =_gdd ,_ebdg ;};_afe :=_debg (_cbc .Point {X :_gdd ,Y :_ebdg });_bbea ._cffb .Concat (_afe );case *_af .PdfObjectString :_affg :=_af .TraceToDirectObject (_fade );
_ccd ,_cad :=_af .GetStringBytes (_affg );if !_cad {_fe .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fade ,_cae );
return _af .ErrTypeError ;};_bbea .renderText (_affg ,_ccd ,_bbg );default:_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_fade ,_cae );
return _af .ErrTypeError ;};};return nil ;};func _cadg (_cfbb []*wordBag )[]*wordBag {if len (_cfbb )<=1{return _cfbb ;};if _dagfa {_fe .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_f .Slice (_cfbb ,func (_fgbe ,_agadd int )bool {_gdb ,_dded :=_cfbb [_fgbe ],_cfbb [_agadd ];
_edfg :=_gdb .Width ()*_gdb .Height ();_ddcb :=_dded .Width ()*_dded .Height ();if _edfg !=_ddcb {return _edfg > _ddcb ;};if _gdb .Height ()!=_dded .Height (){return _gdb .Height ()> _dded .Height ();};return _fgbe < _agadd ;});var _gede []*wordBag ;_cded :=make (intSet );
for _egcb :=0;_egcb < len (_cfbb );_egcb ++{if _cded .has (_egcb ){continue ;};_ggde :=_cfbb [_egcb ];for _fdgg :=_egcb +1;_fdgg < len (_cfbb );_fdgg ++{if _cded .has (_egcb ){continue ;};_ccffe :=_cfbb [_fdgg ];_gdcb :=_ggde .PdfRectangle ;_gdcb .Llx -=_ggde ._bfdf ;
if _adgg (_gdcb ,_ccffe .PdfRectangle ){_ggde .absorb (_ccffe );_cded .add (_fdgg );};};_gede =append (_gede ,_ggde );};if len (_cfbb )!=len (_gede )+len (_cded ){_fe .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_cfbb ),len (_gede ),len (_cded ));
};return _gede ;};func _cgfg (_befce ,_bfae _cbc .Point )bool {return _befce .X ==_bfae .X &&_befce .Y ==_bfae .Y };func _eda (_eadeg *_cb .ContentStreamOperation )(float64 ,error ){if len (_eadeg .Params )!=1{_cfef :=_b .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_fe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_eadeg .Operand ,1,len (_eadeg .Params ),_eadeg .Params );
return 0.0,_cfef ;};return _af .GetNumberAsFloat (_eadeg .Params [0]);};func (_affc *wordBag )sort (){for _ ,_bfbad :=range _affc ._dbfe {_f .Slice (_bfbad ,func (_fbe ,_edeg int )bool {return _gebbb (_bfbad [_fbe ],_bfbad [_edeg ])< 0});};};func (_caeg rulingList )mergePrimary ()float64 {_aeca :=_caeg [0]._egdcc ;
for _ ,_ffdec :=range _caeg [1:]{_aeca +=_ffdec ._egdcc ;};return _aeca /float64 (len (_caeg ));};func _gfaed (_ffad *textLine ,_aggf []*textLine ,_aced []float64 ,_aaffd ,_baee float64 )[]*textLine {_dcbfd :=[]*textLine {};for _ ,_ebefd :=range _aggf {if _ebefd ._bcbff >=_aaffd {if _baee !=-1&&_ebefd ._bcbff < _baee {if _ebefd .text ()!=_ffad .text (){if _ec .Round (_ebefd .Llx )< _ec .Round (_ffad .Llx ){break ;
};_dcbfd =append (_dcbfd ,_ebefd );};}else if _baee ==-1{if _ebefd ._bcbff ==_ffad ._bcbff {if _ebefd .text ()!=_ffad .text (){_dcbfd =append (_dcbfd ,_ebefd );};continue ;};_adab :=_gfad (_ffad ,_aggf ,_aced );if _adab !=-1&&_ebefd ._bcbff <=_adab {_dcbfd =append (_dcbfd ,_ebefd );
};};};};return _dcbfd ;};func _cfcf (_degc _gd .PdfRectangle )rulingKind {_aeag :=_degc .Width ();_bedd :=_degc .Height ();if _aeag > _bedd {if _aeag >=_afef {return _gccg ;};}else {if _bedd >=_afef {return _efcad ;};};return _ccga ;};

// String returns a string describing the current state of the textState stack.
func (_bbae *stateStack )String ()string {_gae :=[]string {_a .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_bbae ))};for _gcb ,_eeb :=range *_bbae {_cbf :="\u003c\u006e\u0069l\u003e";
if _eeb !=nil {_cbf =_eeb .String ();};_gae =append (_gae ,_a .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_gcb ,_cbf ));};return _df .Join (_gae ,"\u000a");};func (_gcbb *shapesState )clearPath (){_gcbb ._bbfdc =nil ;_gcbb ._bdce =false ;
if _fagd {_fe .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_gcbb );};};func _ddfbb (_cafbb float64 )bool {return _ec .Abs (_cafbb )< _cece };func _aeagb (_fbgdd map[int ][]float64 ){if len (_fbgdd )<=1{return ;};_abaea :=_gaffe (_fbgdd );
if _bbfbe {_fe .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_abaea );};var _cebcb ,_daadb int ;for _cebcb ,_daadb =range _abaea {if _fbgdd [_daadb ]!=nil {break ;};};for _beadg ,_faaa :=range _abaea [_cebcb :]{_fdcag :=_fbgdd [_faaa ];
if _fdcag ==nil {continue ;};if _bbfbe {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_cebcb +_beadg ,_daadb ,_faaa );};_deaff :=_fbgdd [_faaa ];if _deaff [len (_deaff )-1]> _fdcag [0]{_deaff [len (_deaff )-1]=_fdcag [0];
_fbgdd [_daadb ]=_deaff ;};_daadb =_faaa ;};};func (_cfde *textLine )bbox ()_gd .PdfRectangle {return _cfde .PdfRectangle };func (_baf *textObject )setTextRenderMode (_abdf int ){if _baf ==nil {return ;};_baf ._bacc ._bge =RenderMode (_abdf );};func (_efdaf *structElement )parseStructElement (_edab _af .PdfObject ){_debf ,_bgdcd :=_af .GetDict (_edab );
if !_bgdcd {_fe .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_abefa :=_debf .Get ("\u0053");_cegg :=_debf .Get ("\u0050\u0067");_gfg :="";if _abefa !=nil {_gfg =_abefa .String ();};_ggdedg :=_debf .Get ("\u004b");_efdaf ._dbfb =_gfg ;_efdaf ._gccf =_cegg ;switch _bebcg :=_ggdedg .(type ){case *_af .PdfObjectInteger :_efdaf ._dbfb =_gfg ;
_efdaf ._fbbb =int64 (*_bebcg );_efdaf ._gccf =_cegg ;case *_af .PdfObjectReference :_ecd :=*_af .MakeArray (_bebcg );var _dbfa int64 =-1;_efdaf ._fbbb =_dbfa ;if _ecd .Len ()==1{_aebg :=_ecd .Elements ()[0];_cdbe ,_gcfc :=_aebg .(*_af .PdfObjectInteger );
if _gcfc {_dbfa =int64 (*_cdbe );_efdaf ._fbbb =_dbfa ;_efdaf ._dbfb =_gfg ;_efdaf ._gccf =_cegg ;return ;};};_bff :=[]structElement {};for _ ,_efag :=range _ecd .Elements (){_acbec ,_feeb :=_efag .(*_af .PdfObjectInteger );if _feeb {_dbfa =int64 (*_acbec );
_efdaf ._fbbb =_dbfa ;_efdaf ._dbfb =_gfg ;}else {_affce :=&structElement {};_affce .parseStructElement (_efag );_bff =append (_bff ,*_affce );};_dbfa =-1;};_efdaf ._bdcb =_bff ;case *_af .PdfObjectArray :_bagb :=_ggdedg .(*_af .PdfObjectArray );var _ced int64 =-1;
_efdaf ._fbbb =_ced ;if _bagb .Len ()==1{_gfd :=_bagb .Elements ()[0];_adbd ,_bdcd :=_gfd .(*_af .PdfObjectInteger );if _bdcd {_ced =int64 (*_adbd );_efdaf ._fbbb =_ced ;_efdaf ._dbfb =_gfg ;_efdaf ._gccf =_cegg ;return ;};};_bgfd :=[]structElement {};
for _ ,_dfag :=range _bagb .Elements (){_ecde ,_ebgab :=_dfag .(*_af .PdfObjectInteger );if _ebgab {_ced =int64 (*_ecde );_efdaf ._fbbb =_ced ;_efdaf ._dbfb =_gfg ;_efdaf ._gccf =_cegg ;}else {_beca :=&structElement {};_beca .parseStructElement (_dfag );
_bgfd =append (_bgfd ,*_beca );};_ced =-1;};_efdaf ._bdcb =_bgfd ;};};func (_bdff gridTiling )log (_badbd string ){if !_faaga {return ;};_fe .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_bdff ._cfac ),len (_bdff ._afdca ),_badbd );
_a .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_bdff ._cfac );_a .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_bdff ._afdca );for _abeg ,_dedcf :=range _bdff ._afdca {_eebf ,_bgdcc :=_bdff ._fdbd [_dedcf ];
if !_bgdcc {continue ;};_a .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_abeg ,_dedcf );for _dgecg ,_acec :=range _bdff ._cfac {_bece ,_fded :=_eebf [_acec ];if !_fded {continue ;};_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dgecg ,_bece .String ());
};};};func (_gffe pathSection )bbox ()_gd .PdfRectangle {_bacd :=_gffe ._eebe [0]._gdcg [0];_eagb :=_gd .PdfRectangle {Llx :_bacd .X ,Urx :_bacd .X ,Lly :_bacd .Y ,Ury :_bacd .Y };_ggee :=func (_gaeb _cbc .Point ){if _gaeb .X < _eagb .Llx {_eagb .Llx =_gaeb .X ;
}else if _gaeb .X > _eagb .Urx {_eagb .Urx =_gaeb .X ;};if _gaeb .Y < _eagb .Lly {_eagb .Lly =_gaeb .Y ;}else if _gaeb .Y > _eagb .Ury {_eagb .Ury =_gaeb .Y ;};};for _ ,_bbgf :=range _gffe ._eebe [0]._gdcg [1:]{_ggee (_bbgf );};for _ ,_geeb :=range _gffe ._eebe [1:]{for _ ,_agbe :=range _geeb ._gdcg {_ggee (_agbe );
};};return _eagb ;};

// String returns a description of `v`.
func (_cgffe *ruling )String ()string {if _cgffe ._eacc ==_ccga {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_eadd ,_cagdg :="\u0078","\u0079";if _cgffe ._eacc ==_gccg {_eadd ,_cagdg ="\u0079","\u0078";};_aaab :="";if _cgffe ._bbfcd !=0.0{_aaab =_a .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_cgffe ._bbfcd );
};return _a .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_cgffe ._eacc ,_eadd ,_cgffe ._egdcc ,_cagdg ,_cgffe ._cggaf ,_cgffe ._dgec ,_cgffe ._dgec -_cgffe ._cggaf ,_cgffe ._cbbab ,_cgffe .Color ,_aaab );
};func _edeea (_deeg ,_agfda int )int {if _deeg > _agfda {return _deeg ;};return _agfda ;};func _cgdb (_cdef []*textLine ,_adaa map[float64 ][]*textLine ,_fcbga []float64 ,_bgbd int ,_ddde ,_eccf float64 )[]*list {_gdeb :=[]*list {};_fadg :=_bgbd ;_bgbd =_bgbd +1;
_fdgc :=_fcbga [_fadg ];_efbbb :=_adaa [_fdgc ];_bgfda :=_fccbd (_efbbb ,_eccf ,_ddde );for _ebdac ,_bdbc :=range _bgfda {var _agae float64 ;_gbfcd :=[]*list {};_abda :=_bdbc ._bcbff ;_cdfcd :=_eccf ;if _ebdac < len (_bgfda )-1{_cdfcd =_bgfda [_ebdac +1]._bcbff ;
};if _bgbd < len (_fcbga ){_gbfcd =_cgdb (_cdef ,_adaa ,_fcbga ,_bgbd ,_abda ,_cdfcd );};_agae =_cdfcd ;if len (_gbfcd )> 0{_begf :=_gbfcd [0];if len (_begf ._efdbc )> 0{_agae =_begf ._efdbc [0]._bcbff ;};};_bdadd :=[]*textLine {_bdbc };_gfeg :=_gfaed (_bdbc ,_cdef ,_fcbga ,_abda ,_agae );
_bdadd =append (_bdadd ,_gfeg ...);_aeba :=_gacag (_bdadd ,"\u0062\u0075\u006c\u006c\u0065\u0074",_gbfcd );_aeba ._abef =_gfcd (_bdadd ,"");_gdeb =append (_gdeb ,_aeba );};return _gdeb ;};func (_cdbdc *textObject )newTextMark (_fdadd string ,_dabe _cbc .Matrix ,_cadb _cbc .Point ,_cebcd float64 ,_ddgg *_gd .PdfFont ,_fcgc float64 ,_cbcaa ,_dcgb _dd .Color ,_abga _af .PdfObject ,_cgbb []string ,_cgdf int ,_cbdd int )(textMark ,bool ){_bdage :=_dabe .Angle ();
_cdbde :=_cfge (_bdage ,_ecb );var _bcaf float64 ;if _cdbde %180!=90{_bcaf =_dabe .ScalingFactorY ();}else {_bcaf =_dabe .ScalingFactorX ();};_adda :=_acae (_dabe );_cdfcg :=_gd .PdfRectangle {Llx :_adda .X ,Lly :_adda .Y ,Urx :_cadb .X ,Ury :_cadb .Y };
switch _cdbde %360{case 90:_cdfcg .Urx -=_bcaf ;case 180:_cdfcg .Ury -=_bcaf ;case 270:_cdfcg .Urx +=_bcaf ;case 0:_cdfcg .Ury +=_bcaf ;default:_cdbde =0;_cdfcg .Ury +=_bcaf ;};if _cdfcg .Llx > _cdfcg .Urx {_cdfcg .Llx ,_cdfcg .Urx =_cdfcg .Urx ,_cdfcg .Llx ;
};if _cdfcg .Lly > _cdfcg .Ury {_cdfcg .Lly ,_cdfcg .Ury =_cdfcg .Ury ,_cdfcg .Lly ;};_ebbb :=true ;if _cdbdc ._bbgb ._aa .Width ()> 0{_cffd ,_eagf :=_bef (_cdfcg ,_cdbdc ._bbgb ._aa );if !_eagf {_ebbb =false ;_fe .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_cdfcg ,_cdbdc ._bbgb ._aa ,_fdadd );
};_cdfcg =_cffd ;};_eegc :=_cdfcg ;_aacg :=_cdbdc ._bbgb ._aa ;switch _cdbde %360{case 90:_aacg .Urx ,_aacg .Ury =_aacg .Ury ,_aacg .Urx ;_eegc =_gd .PdfRectangle {Llx :_aacg .Urx -_cdfcg .Ury ,Urx :_aacg .Urx -_cdfcg .Lly ,Lly :_cdfcg .Llx ,Ury :_cdfcg .Urx };
case 180:_eegc =_gd .PdfRectangle {Llx :_aacg .Urx -_cdfcg .Llx ,Urx :_aacg .Urx -_cdfcg .Urx ,Lly :_aacg .Ury -_cdfcg .Lly ,Ury :_aacg .Ury -_cdfcg .Ury };case 270:_aacg .Urx ,_aacg .Ury =_aacg .Ury ,_aacg .Urx ;_eegc =_gd .PdfRectangle {Llx :_cdfcg .Ury ,Urx :_cdfcg .Lly ,Lly :_aacg .Ury -_cdfcg .Llx ,Ury :_aacg .Ury -_cdfcg .Urx };
};if _eegc .Llx > _eegc .Urx {_eegc .Llx ,_eegc .Urx =_eegc .Urx ,_eegc .Llx ;};if _eegc .Lly > _eegc .Ury {_eegc .Lly ,_eegc .Ury =_eegc .Ury ,_eegc .Lly ;};_ebagf :=textMark {_cffce :_fdadd ,PdfRectangle :_eegc ,_dfad :_cdfcg ,_gbbad :_ddgg ,_fccd :_bcaf ,_bbfbee :_fcgc ,_bbag :_dabe ,_ggggg :_cadb ,_dgca :_cdbde ,_efcf :_cbcaa ,_fcada :_dcgb ,_fcdfe :_abga ,_dadgg :_cgbb ,Th :_cdbdc ._bacc ._ebgf ,Tw :_cdbdc ._bacc ._baca ,_bbcbf :_cbdd ,_bbac :_cgdf };
if _agcg {_fe .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_adda ,_cadb ,_ebagf .String ());};return _ebagf ,_ebbb ;
};func (_gc *PageFonts )extractPageResourcesToFont (_dee *_gd .PdfPageResources )error {_daa ,_eff :=_af .GetDict (_dee .Font );if !_eff {return _b .New (_gdg );};for _ ,_eg :=range _daa .Keys (){var (_ea =true ;_cbd []byte ;_ae string ;);_bdc ,_ccb :=_dee .GetFontByName (_eg );
if !_ccb {return _b .New (_efd );};_ff ,_abd :=_gd .NewPdfFontFromPdfObject (_bdc );if _abd !=nil {return _abd ;};_eed :=_ff .FontDescriptor ();_ac :=_ff .FontDescriptor ().FontName .String ();_aab :=_ff .Subtype ();if _ag (_gc .Fonts ,_ac ){continue ;
};if len (_ff .ToUnicode ())==0{_ea =false ;};if _eed .FontFile !=nil {if _cda ,_fad :=_af .GetStream (_eed .FontFile );_fad {_cbd ,_abd =_af .DecodeStream (_cda );if _abd !=nil {return _abd ;};_ae =_ac +"\u002e\u0070\u0066\u0062";};}else if _eed .FontFile2 !=nil {if _fca ,_gg :=_af .GetStream (_eed .FontFile2 );
_gg {_cbd ,_abd =_af .DecodeStream (_fca );if _abd !=nil {return _abd ;};_ae =_ac +"\u002e\u0074\u0074\u0066";};}else if _eed .FontFile3 !=nil {if _daf ,_dfc :=_af .GetStream (_eed .FontFile3 );_dfc {_cbd ,_abd =_af .DecodeStream (_daf );if _abd !=nil {return _abd ;
};_ae =_ac +"\u002e\u0063\u0066\u0066";};};if len (_ae )< 1{_fe .Log .Debug (_ca );};_ege :=Font {FontName :_ac ,PdfFont :_ff ,IsCID :_ff .IsCID (),IsSimple :_ff .IsSimple (),ToUnicode :_ea ,FontType :_aab ,FontData :_cbd ,FontFileName :_ae ,FontDescriptor :_eed };
_gc .Fonts =append (_gc .Fonts ,_ege );};return nil ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _debg (_dbcdb _cbc .Point )_cbc .Matrix {return _cbc .TranslationMatrix (_dbcdb .X ,_dbcdb .Y )};