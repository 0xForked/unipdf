//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_ec "bytes";_a "errors";_gd "fmt";_fd "github.com/unidoc/unipdf/v3/common";_ce "github.com/unidoc/unipdf/v3/contentstream";_eb "github.com/unidoc/unipdf/v3/core";_cb "github.com/unidoc/unipdf/v3/internal/license";_cf "github.com/unidoc/unipdf/v3/internal/textencoding";
_fe "github.com/unidoc/unipdf/v3/internal/transform";_ga "github.com/unidoc/unipdf/v3/model";_db "golang.org/x/image/draw";_dbg "golang.org/x/text/unicode/norm";_ge "golang.org/x/xerrors";_fg "image";_g "image/color";_c "io";_f "math";_be "reflect";_d "regexp";
_ed "sort";_cc "strings";_dg "unicode";_e "unicode/utf8";);func _fcdg (_fbff []*textMark ,_ebcg _ga .PdfRectangle ,_ffcbc rulingList ,_fba []gridTiling ,_gfbg bool )paraList {_fd .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_fbff ),_ebcg );
if len (_fbff )==0{return nil ;};_egbg :=_cedeg (_fbff ,_ebcg );if len (_egbg )==0{return nil ;};_ffcbc .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_eeggc ,_bbee :=_ffcbc .vertsHorzs ();_edfc :=_befc (_egbg ,_ebcg .Ury ,_eeggc ,_bbee );
_fagg :=_dbeg (_edfc ,_ebcg .Ury ,_eeggc ,_bbee );_fagg =_ccda (_fagg );_gdbf :=make (paraList ,0,len (_fagg ));for _ ,_gdcef :=range _fagg {_dcaa :=_gdcef .arrangeText ();if _dcaa !=nil {_gdbf =append (_gdbf ,_dcaa );};};if !_gfbg &&len (_gdbf )>=_begaf {_gdbf =_gdbf .extractTables (_fba );
};_gdbf .sortReadingOrder ();if !_gfbg {_gdbf .sortTopoOrder ();};_gdbf .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _gdbf ;};func (_abaa *textObject )newTextMark (_cgae string ,_cdeeg _fe .Matrix ,_fbgga _fe .Point ,_afcg float64 ,_gaede *_ga .PdfFont ,_dgde float64 ,_dgddb ,_cedd _g .Color ,_addg _eb .PdfObject ,_ggdg []string ,_efga int ,_cdgb int )(textMark ,bool ){_degg :=_cdeeg .Angle ();
_bbdec :=_bege (_degg ,_ceae );var _aadc float64 ;if _bbdec %180!=90{_aadc =_cdeeg .ScalingFactorY ();}else {_aadc =_cdeeg .ScalingFactorX ();};_ccdf :=_cfdd (_cdeeg );_baafc :=_ga .PdfRectangle {Llx :_ccdf .X ,Lly :_ccdf .Y ,Urx :_fbgga .X ,Ury :_fbgga .Y };
switch _bbdec %360{case 90:_baafc .Urx -=_aadc ;case 180:_baafc .Ury -=_aadc ;case 270:_baafc .Urx +=_aadc ;case 0:_baafc .Ury +=_aadc ;default:_bbdec =0;_baafc .Ury +=_aadc ;};if _baafc .Llx > _baafc .Urx {_baafc .Llx ,_baafc .Urx =_baafc .Urx ,_baafc .Llx ;
};if _baafc .Lly > _baafc .Ury {_baafc .Lly ,_baafc .Ury =_baafc .Ury ,_baafc .Lly ;};_agd :=true ;if _abaa ._eaab ._gee .Width ()> 0{_abbg ,_deca :=_dgca (_baafc ,_abaa ._eaab ._gee );if !_deca {_agd =false ;_fd .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_baafc ,_abaa ._eaab ._gee ,_cgae );
};_baafc =_abbg ;};_dggb :=_baafc ;_fbgc :=_abaa ._eaab ._gee ;switch _bbdec %360{case 90:_fbgc .Urx ,_fbgc .Ury =_fbgc .Ury ,_fbgc .Urx ;_dggb =_ga .PdfRectangle {Llx :_fbgc .Urx -_baafc .Ury ,Urx :_fbgc .Urx -_baafc .Lly ,Lly :_baafc .Llx ,Ury :_baafc .Urx };
case 180:_dggb =_ga .PdfRectangle {Llx :_fbgc .Urx -_baafc .Llx ,Urx :_fbgc .Urx -_baafc .Urx ,Lly :_fbgc .Ury -_baafc .Lly ,Ury :_fbgc .Ury -_baafc .Ury };case 270:_fbgc .Urx ,_fbgc .Ury =_fbgc .Ury ,_fbgc .Urx ;_dggb =_ga .PdfRectangle {Llx :_baafc .Ury ,Urx :_baafc .Lly ,Lly :_fbgc .Ury -_baafc .Llx ,Ury :_fbgc .Ury -_baafc .Urx };
};if _dggb .Llx > _dggb .Urx {_dggb .Llx ,_dggb .Urx =_dggb .Urx ,_dggb .Llx ;};if _dggb .Lly > _dggb .Ury {_dggb .Lly ,_dggb .Ury =_dggb .Ury ,_dggb .Lly ;};_ebbf :=textMark {_fbbef :_cgae ,PdfRectangle :_dggb ,_ebcbe :_baafc ,_bdbf :_gaede ,_dfbea :_aadc ,_cgfe :_dgde ,_cdcg :_cdeeg ,_ecdc :_fbgga ,_aegf :_bbdec ,_bbde :_dgddb ,_bfdga :_cedd ,_cadf :_addg ,_faag :_ggdg ,Th :_abaa ._agb ._dfbb ,Tw :_abaa ._agb ._fdbg ,_aaeg :_cdgb ,_eeff :_efga };
if _bfgc {_fd .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_ccdf ,_fbgga ,_ebbf .String ());};return _ebbf ,_agd ;
};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_dag *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_beb :=PageFonts {};_bfe :=_beb .extractPageResourcesToFont (_dag ._dad );if _bfe !=nil {return nil ,_bfe ;};if previousPageFonts !=nil {for _ ,_fbdg :=range previousPageFonts .Fonts {if !_gdd (_beb .Fonts ,_fbdg .FontName ){_beb .Fonts =append (_beb .Fonts ,_fbdg );
};};};return &PageFonts {Fonts :_beb .Fonts },nil ;};func (_ccdd paraList )sortReadingOrder (){_fd .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ccdd ));
if len (_ccdd )<=1{return ;};_ccdd .computeEBBoxes ();_ed .Slice (_ccdd ,func (_acbg ,_ebbd int )bool {return _gbcc (_ccdd [_acbg ],_ccdd [_ebbd ])<=0});};func (_gcea *textLine )toTextMarks (_cgbe *int )[]TextMark {var _cfae []TextMark ;for _ ,_cefc :=range _gcea ._fgbge {if _cefc ._cggc {_cfae =_geaed (_cfae ,_cgbe ,"\u0020");
};_bgbg :=_cefc .toTextMarks (_cgbe );_cfae =append (_cfae ,_bgbg ...);};return _cfae ;};func (_bdaf *textTable )getComposite (_gbeg ,_egedac int )(paraList ,_ga .PdfRectangle ){_eaacc ,_cdeb :=_bdaf ._bfdgbe [_geagf (_gbeg ,_egedac )];if _edgc {_gd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_gbeg ,_egedac ,_eaacc .String ());
};if !_cdeb {return nil ,_ga .PdfRectangle {};};return _eaacc .parasBBox ();};func (_bda *imageExtractContext )extractXObjectImage (_cbb *_eb .PdfObjectName ,_cba _ce .GraphicsState ,_dff *_ga .PdfPageResources )error {_dcf ,_ :=_dff .GetXObjectByName (*_cbb );
if _dcf ==nil {return nil ;};_gg ,_dgb :=_bda ._dbge [_dcf ];if !_dgb {_ccc ,_ebce :=_dff .GetXObjectImageByName (*_cbb );if _ebce !=nil {return _ebce ;};if _ccc ==nil {return nil ;};_bddb ,_ebce :=_ccc .ToImage ();if _ebce !=nil {return _ebce ;};var _adgb _fg .Image ;
if _ccc .SMask !=nil {_adgb ,_ebce =_fgefe (_ccc .SMask ,_g .Opaque );if _ebce !=nil {_fd .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _adgb !=nil {_ac ,_fge :=_bddb .ToGoImage ();if _fge !=nil {return _fge ;};_ac =_degdg (_ac ,_adgb );switch _ccc .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_bddb ,_fge =_ga .ImageHandling .NewGrayImageFromGoImage (_ac );
if _fge !=nil {return _fge ;};default:_bddb ,_fge =_ga .ImageHandling .NewImageFromGoImage (_ac );if _fge !=nil {return _fge ;};};};_gg =&cachedImage {_bad :_bddb ,_ee :_ccc .ColorSpace };_bda ._dbge [_dcf ]=_gg ;};_efe :=_gg ._bad ;_bdda :=_gg ._ee ;_fbb ,_gccc :=_bdda .ImageToRGB (*_efe );
if _gccc !=nil {return _gccc ;};_fd .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_cba .CTM .String ());_gba :=ImageMark {Image :&_fbb ,Width :_cba .CTM .ScalingFactorX (),Height :_cba .CTM .ScalingFactorY (),Angle :_cba .CTM .Angle ()};
_gba .X ,_gba .Y =_cba .CTM .Translation ();_bda ._bdd =append (_bda ._bdd ,_gba );_bda ._eg ++;return nil ;};func (_gfcac *textPara )fontsize ()float64 {return _gfcac ._afgcbe [0]._dbcc };

// TableCell is a cell in a TextTable.
type TableCell struct{_ga .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func _eeeb (_ccdg *list ,_dfegd *string )string {_gagef :=_cc .Split (_ccdg ._bcgc ,"\u000a");_gfgf :=&_cc .Builder {};for _ ,_gcga :=range _gagef {if _gcga !=""{_gfgf .WriteString (*_dfegd );_gfgf .WriteString (_gcga );_gfgf .WriteString ("\u000a");
};};return _gfgf .String ();};func (_eeadb *textTable )depth ()float64 {_cfddd :=1e10;for _aecdc :=0;_aecdc < _eeadb ._ccce ;_aecdc ++{_feefb :=_eeadb .get (_aecdc ,0);if _feefb ==nil ||_feefb ._aaef {continue ;};_cfddd =_f .Min (_cfddd ,_feefb .depth ());
};return _cfddd ;};func (_ccfgd *textMark )inDiacriticArea (_fggc *textMark )bool {_acea :=_ccfgd .Llx -_fggc .Llx ;_dagcf :=_ccfgd .Urx -_fggc .Urx ;_cgd :=_ccfgd .Lly -_fggc .Lly ;return _f .Abs (_acea +_dagcf )< _ccfgd .Width ()*_ccef &&_f .Abs (_cgd )< _ccfgd .Height ()*_ccef ;
};func (_aad *PageText )getParagraphs ()paraList {var _aac rulingList ;if _adadb {_agaf :=_efgaf (_aad ._ecee );_aac =append (_aac ,_agaf ...);};if _ageb {_ccfd :=_dgdf (_aad ._abg );_aac =append (_aac ,_ccfd ...);};_aac ,_dfbbf :=_aac .toTilings ();var _bgac paraList ;
_abc :=len (_aad ._feg );for _ebef :=0;_ebef < 360&&_abc > 0;_ebef +=90{_bff :=make ([]*textMark ,0,len (_aad ._feg )-_abc );for _ ,_dgcc :=range _aad ._feg {if _dgcc ._aegf ==_ebef {_bff =append (_bff ,_dgcc );};};if len (_bff )> 0{_adfa :=_fcdg (_bff ,_aad ._bcg ,_aac ,_dfbbf ,_aad ._ade ._cag );
_bgac =append (_bgac ,_adfa ...);_abc -=len (_bff );};};return _bgac ;};type textWord struct{_ga .PdfRectangle ;_gdae float64 ;_eaedb string ;_cefce []*textMark ;_febea float64 ;_cggc bool ;};func (_faa *textLine )bbox ()_ga .PdfRectangle {return _faa .PdfRectangle };


// String returns a description of `k`.
func (_gffbe markKind )String ()string {_cdeab ,_cdcb :=_bdegd [_gffbe ];if !_cdcb {return _gd .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_gffbe );};return _cdeab ;};func (_feef *ruling )gridIntersecting (_cfbbf *ruling )bool {return _fcdcg (_feef ._bdbd ,_cfbbf ._bdbd )&&_fcdcg (_feef ._deaad ,_cfbbf ._deaad );
};func _geaed (_aaec []TextMark ,_edbb *int ,_afgcb string )[]TextMark {_bfce :=_aba ;_bfce .Text =_afgcb ;return _bceca (_aaec ,_edbb ,_bfce );};func _effda (_ccadd map[int ][]float64 )string {_faecb :=_ecgee (_ccadd );_ecbb :=make ([]string ,len (_ccadd ));
for _bfgce ,_edbfb :=range _faecb {_ecbb [_bfgce ]=_gd .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_edbfb ,_ccadd [_edbfb ]);};return _gd .Sprintf ("\u007b\u0025\u0073\u007d",_cc .Join (_ecbb ,"\u002c\u0020"));};func _dbeg (_dcgb *wordBag ,_dabf float64 ,_gade ,_abbc rulingList )[]*wordBag {var _fdff []*wordBag ;
for _ ,_ceda :=range _dcgb .depthIndexes (){_bgcag :=false ;for !_dcgb .empty (_ceda ){_cffd :=_dcgb .firstReadingIndex (_ceda );_eecdf :=_dcgb .firstWord (_cffd );_baea :=_bed (_eecdf ,_dabf ,_gade ,_abbc );_dcgb .removeWord (_eecdf ,_cffd );if _dgf {_fd .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_eecdf .String ());
};for _adfb :=true ;_adfb ;_adfb =_bgcag {_bgcag =false ;_cceb :=_ffdc *_baea ._gegb ;_fedg :=_gbfb *_baea ._gegb ;_bcgg :=_ddbe *_baea ._gegb ;if _dgf {_fd .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_baea .minDepth (),_baea .maxDepth (),_bcgg ,_fedg );
};if _dcgb .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_baea ,_gdagbg (_eff ,0),_baea .minDepth ()-_bcgg ,_baea .maxDepth ()+_bcgg ,_ebgd ,false ,false )> 0{_bgcag =true ;};if _dcgb .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_baea ,_gdagbg (_eff ,_fedg ),_baea .minDepth (),_baea .maxDepth (),_dbc ,false ,false )> 0{_bgcag =true ;
};if _bgcag {continue ;};_cddb :=_dcgb .scanBand ("",_baea ,_gdagbg (_bfdc ,_cceb ),_baea .minDepth (),_baea .maxDepth (),_acgb ,true ,false );if _cddb > 0{_bfca :=(_baea .maxDepth ()-_baea .minDepth ())/_baea ._gegb ;if (_cddb > 1&&float64 (_cddb )> 0.3*_bfca )||_cddb <=10{if _dcgb .scanBand ("\u006f\u0074\u0068e\u0072",_baea ,_gdagbg (_bfdc ,_cceb ),_baea .minDepth (),_baea .maxDepth (),_acgb ,false ,true )> 0{_bgcag =true ;
};};};};_fdff =append (_fdff ,_baea );};};return _fdff ;};func (_ecce *textWord )bbox ()_ga .PdfRectangle {return _ecce .PdfRectangle };

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_gbc []TextMark };func _afdg (_dbbc _ga .PdfRectangle )*ruling {return &ruling {_gbcbd :_dafd ,_eeac :_dbbc .Llx ,_bdbd :_dbbc .Lly ,_deaad :_dbbc .Ury };};func (_gfcfb *textObject )setWordSpacing (_dbdb float64 ){if _gfcfb ==nil {return ;
};_gfcfb ._agb ._fdbg =_dbdb ;};func _deccb (_fadcc structElement )[]structElement {_gfbea :=[]structElement {};for _ ,_acdd :=range _fadcc ._dafe {for _ ,_gdaaa :=range _acdd ._dafe {for _ ,_fdggf :=range _gdaaa ._dafe {if _fdggf ._eaad =="\u004c"{_gfbea =append (_gfbea ,_fdggf );
};};};};return _gfbea ;};func _cdfc (_aabb ,_cegac ,_dedc float64 )rulingKind {if _aabb >=_dedc &&_fadd (_cegac ,_aabb ){return _agge ;};if _cegac >=_dedc &&_fadd (_aabb ,_cegac ){return _dafd ;};return _gefd ;};func _dgca (_afcd ,_ecde _ga .PdfRectangle )(_ga .PdfRectangle ,bool ){if !_dcdc (_afcd ,_ecde ){return _ga .PdfRectangle {},false ;
};return _ga .PdfRectangle {Llx :_f .Max (_afcd .Llx ,_ecde .Llx ),Urx :_f .Min (_afcd .Urx ,_ecde .Urx ),Lly :_f .Max (_afcd .Lly ,_ecde .Lly ),Ury :_f .Min (_afcd .Ury ,_ecde .Ury )},true ;};func _ccda (_cdcf []*wordBag )[]*wordBag {if len (_cdcf )<=1{return _cdcf ;
};if _cacg {_fd .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_ed .Slice (_cdcf ,func (_fgbd ,_daaa int )bool {_ebde ,_cebd :=_cdcf [_fgbd ],_cdcf [_daaa ];_acd :=_ebde .Width ()*_ebde .Height ();_cagf :=_cebd .Width ()*_cebd .Height ();
if _acd !=_cagf {return _acd > _cagf ;};if _ebde .Height ()!=_cebd .Height (){return _ebde .Height ()> _cebd .Height ();};return _fgbd < _daaa ;});var _bccg []*wordBag ;_gdb :=make (intSet );for _ddbg :=0;_ddbg < len (_cdcf );_ddbg ++{if _gdb .has (_ddbg ){continue ;
};_deba :=_cdcf [_ddbg ];for _cceed :=_ddbg +1;_cceed < len (_cdcf );_cceed ++{if _gdb .has (_ddbg ){continue ;};_ebed :=_cdcf [_cceed ];_agee :=_deba .PdfRectangle ;_agee .Llx -=_deba ._gegb ;if _bcda (_agee ,_ebed .PdfRectangle ){_deba .absorb (_ebed );
_gdb .add (_cceed );};};_bccg =append (_bccg ,_deba );};if len (_cdcf )!=len (_bccg )+len (_gdb ){_fd .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_cdcf ),len (_bccg ),len (_gdb ));
};return _bccg ;};func _egagf (_eebc map[float64 ]gridTile )[]float64 {_ecaed :=make ([]float64 ,0,len (_eebc ));for _beceb :=range _eebc {_ecaed =append (_ecaed ,_beceb );};_ed .Float64s (_ecaed );return _ecaed ;};type textTable struct{_ga .PdfRectangle ;
_ccce ,_gddg int ;_cbbba bool ;_aaee map[uint64 ]*textPara ;_bfdgbe map[uint64 ]compositeCell ;};func (_cafbd *textTable )get (_ggdgg ,_eaccd int )*textPara {return _cafbd ._aaee [_geagf (_ggdgg ,_eaccd )];};func (_ad *imageExtractContext )extractContentStreamImages (_fae string ,_dfg *_ga .PdfPageResources )error {_aa :=_ce .NewContentStreamParser (_fae );
_ead ,_gf :=_aa .Parse ();if _gf !=nil {return _gf ;};if _ad ._dbge ==nil {_ad ._dbge =map[*_eb .PdfObjectStream ]*cachedImage {};};if _ad ._gccf ==nil {_ad ._gccf =&ImageExtractOptions {};};_cea :=_ce .NewContentStreamProcessor (*_ead );_cea .AddHandler (_ce .HandlerConditionEnumAllOperands ,"",_ad .processOperand );
return _cea .Process (_dfg );};type wordBag struct{_ga .PdfRectangle ;_gegb float64 ;_gacc ,_affa rulingList ;_ecb float64 ;_fced map[int ][]*textWord ;};func (_ebee gridTile )contains (_bbgbg _ga .PdfRectangle )bool {if _ebee .numBorders ()< 3{return false ;
};if _ebee ._fega &&_bbgbg .Llx < _ebee .Llx -_daff {return false ;};if _ebee ._cdcgd &&_bbgbg .Urx > _ebee .Urx +_daff {return false ;};if _ebee ._begec &&_bbgbg .Lly < _ebee .Lly -_daff {return false ;};if _ebee ._gefed &&_bbgbg .Ury > _ebee .Ury +_daff {return false ;
};return true ;};func (_bcgcb intSet )has (_faaff int )bool {_ ,_caaca :=_bcgcb [_faaff ];return _caaca };func (_fad *textObject )getCurrentFont ()*_ga .PdfFont {_beef :=_fad ._agb ._dcce ;if _beef ==nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _ga .DefaultFont ();};return _beef ;};func (_gdag *PageText )computeViews (){_deg :=_gdag .getParagraphs ();_acf :=new (_ec .Buffer );_deg .writeText (_acf );_gdag ._ddfb =_acf .String ();_gdag ._acg =_deg .toTextMarks ();_gdag ._aeba =_deg .tables ();
if _edgc {_fd .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_gdag ._aeba ));};};func (_cgeg *wordBag )maxDepth ()float64 {return _cgeg ._ecb -_cgeg .Lly };
func (_gdde *structTreeRoot )parseStructTreeRoot (_cggf _eb .PdfObject ){if _cggf !=nil {_baefb ,_baad :=_eb .GetDict (_cggf );if !_baad {_fd .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_baefb .Get ("\u004b");_afgc :=_baefb .Get ("\u0054\u0079\u0070\u0065").String ();var _fccaa *_eb .PdfObjectArray ;switch _bfed :=K .(type ){case *_eb .PdfObjectArray :_fccaa =_bfed ;case *_eb .PdfObjectReference :_fccaa =_eb .MakeArray (K );};_badb :=[]structElement {};
for _ ,_cca :=range _fccaa .Elements (){_agafb :=&structElement {};_agafb .parseStructElement (_cca );_badb =append (_badb ,*_agafb );};_gdde ._cffba =_badb ;_gdde ._gbfd =_afgc ;};};func _aebb (_ffdcc []*textLine ,_faec map[float64 ][]*textLine ,_eaed []float64 ,_aeda int ,_becg ,_dgcb float64 )[]*list {_aeg :=[]*list {};
_fbef :=_aeda ;_aeda =_aeda +1;_dbeb :=_eaed [_fbef ];_bggfg :=_faec [_dbeb ];_ggbg :=_edac (_bggfg ,_dgcb ,_becg );for _deef ,_afge :=range _ggbg {var _geea float64 ;_deeff :=[]*list {};_edffa :=_afge ._acga ;_faba :=_dgcb ;if _deef < len (_ggbg )-1{_faba =_ggbg [_deef +1]._acga ;
};if _aeda < len (_eaed ){_deeff =_aebb (_ffdcc ,_faec ,_eaed ,_aeda ,_edffa ,_faba );};_geea =_faba ;if len (_deeff )> 0{_cefg :=_deeff [0];if len (_cefg ._cfg )> 0{_geea =_cefg ._cfg [0]._acga ;};};_bgae :=[]*textLine {_afge };_egfe :=_fccb (_afge ,_ffdcc ,_eaed ,_edffa ,_geea );
_bgae =append (_bgae ,_egfe ...);_gdee :=_eeef (_bgae ,"\u0062\u0075\u006c\u006c\u0065\u0074",_deeff );_gdee ._bcgc =_ebga (_bgae ,"");_aeg =append (_aeg ,_gdee );};return _aeg ;};func _dccg (_gaabc ,_gfcce _fe .Point )bool {return _gaabc .X ==_gfcce .X &&_gaabc .Y ==_gfcce .Y };
func _aecgg (_eadc ,_ddfd float64 )string {_dbee :=!_dcaed (_eadc -_ddfd );if _dbee {return "\u000a";};return "\u0020";};func (_ccgc rectRuling )checkWidth (_edbge ,_eafgf float64 )(float64 ,bool ){_fdgce :=_eafgf -_edbge ;_efgag :=_fdgce <=_beccb ;return _fdgce ,_efgag ;
};func (_acebc rulingList )snapToGroups ()rulingList {_fbbc ,_defca :=_acebc .vertsHorzs ();if len (_fbbc )> 0{_fbbc =_fbbc .snapToGroupsDirection ();};if len (_defca )> 0{_defca =_defca .snapToGroupsDirection ();};_fagef :=append (_fbbc ,_defca ...);_fagef .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");
return _fagef ;};func (_bab *stateStack )push (_fff *textState ){_affg :=*_fff ;*_bab =append (*_bab ,&_affg )};func _bfggc (_efcfa _ga .PdfColorspace ,_aadff _ga .PdfColor )_g .Color {if _efcfa ==nil ||_aadff ==nil {return _g .Black ;};_afef ,_egbbf :=_efcfa .ColorToRGB (_aadff );
if _egbbf !=nil {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_aadff ,_efcfa ,_egbbf );
return _g .Black ;};_cagc ,_egcgb :=_afef .(*_ga .PdfColorDeviceRGB );if !_egcgb {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_afef );
return _g .Black ;};return _g .NRGBA {R :uint8 (_cagc .R ()*255),G :uint8 (_cagc .G ()*255),B :uint8 (_cagc .B ()*255),A :uint8 (255)};};

// ToTextMark returns the public view of `tm`.
func (_dcda *textMark )ToTextMark ()TextMark {return TextMark {Text :_dcda ._fbbef ,Original :_dcda ._geae ,BBox :_dcda ._ebcbe ,Font :_dcda ._bdbf ,FontSize :_dcda ._dfbea ,FillColor :_dcda ._bbde ,StrokeColor :_dcda ._bfdga ,Orientation :_dcda ._aegf ,DirectObject :_dcda ._cadf ,ObjString :_dcda ._faag ,Tw :_dcda .Tw ,Th :_dcda .Th ,Tc :_dcda ._cgfe ,Index :_dcda ._eeff };
};func _gcdc (_bddag []TextMark ,_abagb *TextTable )[]TextMark {var _dfba []TextMark ;for _ ,_cfef :=range _bddag {_cfef ._febf =true ;_cfef ._cbbb =_abagb ;_dfba =append (_dfba ,_cfef );};return _dfba ;};func (_bggfgc *textTable )subdivide ()*textTable {_bggfgc .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_gegc :=_bggfgc .compositeRowCorridors ();_eegb :=_bggfgc .compositeColCorridors ();if _edgc {_fd .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_effda (_gegc ),_effda (_eegb ));
};if len (_gegc )==0||len (_eegb )==0{return _bggfgc ;};_eafbd (_gegc );_eafbd (_eegb );if _edgc {_fd .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_effda (_gegc ),_effda (_eegb ));
};_edec ,_ebeff :=_eadf (_bggfgc ._gddg ,_gegc );_bbag ,_edae :=_eadf (_bggfgc ._ccce ,_eegb );_fbdb :=make (map[uint64 ]*textPara ,_edae *_ebeff );_eafb :=&textTable {PdfRectangle :_bggfgc .PdfRectangle ,_cbbba :_bggfgc ._cbbba ,_gddg :_ebeff ,_ccce :_edae ,_aaee :_fbdb };
if _edgc {_fd .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_bggfgc ._ccce ,_bggfgc ._gddg ,_edae ,_ebeff ,_effda (_gegc ),_effda (_eegb ),_edec ,_bbag );
};for _fdbf :=0;_fdbf < _bggfgc ._gddg ;_fdbf ++{_caefd :=_edec [_fdbf ];for _defce :=0;_defce < _bggfgc ._ccce ;_defce ++{_ggdbb :=_bbag [_defce ];if _edgc {_gd .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_defce ,_fdbf ,_ggdbb ,_caefd );
};_cceeg ,_dgced :=_bggfgc ._bfdgbe [_geagf (_defce ,_fdbf )];if !_dgced {continue ;};_abdab :=_cceeg .split (_gegc [_fdbf ],_eegb [_defce ]);for _bdcfa :=0;_bdcfa < _abdab ._gddg ;_bdcfa ++{for _febc :=0;_febc < _abdab ._ccce ;_febc ++{_abgc :=_abdab .get (_febc ,_bdcfa );
_eafb .put (_ggdbb +_febc ,_caefd +_bdcfa ,_abgc );if _edgc {_gd .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_ggdbb +_febc ,_caefd +_bdcfa ,_abgc );};};};};};return _eafb ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_ga .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_cdc *TextMarkArray )getTextMarkAtOffset (_cfcc int )*TextMark {for _ ,_fcfee :=range _cdc ._gbc {if _fcfee .Offset ==_cfcc {return &_fcfee ;};};return nil ;};const _edfe =1.0/1000.0;
func _edac (_ceedg []*textLine ,_bafa ,_ggc float64 )[]*textLine {var _eeae []*textLine ;for _ ,_dbbd :=range _ceedg {if _bafa ==-1{if _dbbd ._acga > _ggc {_eeae =append (_eeae ,_dbbd );};}else {if _dbbd ._acga > _ggc &&_dbbd ._acga < _bafa {_eeae =append (_eeae ,_dbbd );
};};};return _eeae ;};func _efce (_dedd float64 )int {var _efaf int ;if _dedd >=0{_efaf =int (_dedd /_abga );}else {_efaf =int (_dedd /_abga )-1;};return _efaf ;};func (_dbeba rulingList )comp (_dabba ,_afcc int )bool {_ecgc ,_gcbb :=_dbeba [_dabba ],_dbeba [_afcc ];
_dcbg ,_bgaa :=_ecgc ._gbcbd ,_gcbb ._gbcbd ;if _dcbg !=_bgaa {return _dcbg > _bgaa ;};if _dcbg ==_gefd {return false ;};_bbfa :=func (_adbd bool )bool {if _dcbg ==_agge {return _adbd ;};return !_adbd ;};_fafcd ,_bcegb :=_ecgc ._eeac ,_gcbb ._eeac ;if _fafcd !=_bcegb {return _bbfa (_fafcd > _bcegb );
};_fafcd ,_bcegb =_ecgc ._bdbd ,_gcbb ._bdbd ;if _fafcd !=_bcegb {return _bbfa (_fafcd < _bcegb );};return _bbfa (_ecgc ._deaad < _gcbb ._deaad );};func _eff (_edbf *wordBag ,_aeag *textWord ,_afda float64 )bool {return _aeag .Llx < _edbf .Urx +_afda &&_edbf .Llx -_afda < _aeag .Urx ;
};func (_agfd rulingList )merge ()*ruling {_gggdd :=_agfd [0]._eeac ;_fegef :=_agfd [0]._bdbd ;_gcab :=_agfd [0]._deaad ;for _ ,_ddcc :=range _agfd [1:]{_gggdd +=_ddcc ._eeac ;if _ddcc ._bdbd < _fegef {_fegef =_ddcc ._bdbd ;};if _ddcc ._deaad > _gcab {_gcab =_ddcc ._deaad ;
};};_adag :=&ruling {_gbcbd :_agfd [0]._gbcbd ,_dagg :_agfd [0]._dagg ,Color :_agfd [0].Color ,_eeac :_gggdd /float64 (len (_agfd )),_bdbd :_fegef ,_deaad :_gcab };if _fcdf {_fd .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_agfd ),_adag );
for _daffe ,_gccfg :=range _agfd {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_daffe ,_gccfg );};};return _adag ;};func _cbfd (_bcaca ,_cabgee ,_efdee ,_dgbcb *textPara )*textTable {_aedac :=&textTable {_ccce :2,_gddg :2,_aaee :make (map[uint64 ]*textPara ,4)};
_aedac .put (0,0,_bcaca );_aedac .put (1,0,_cabgee );_aedac .put (0,1,_efdee );_aedac .put (1,1,_dgbcb );return _aedac ;};func (_afff *wordBag )firstWord (_ebge int )*textWord {return _afff ._fced [_ebge ][0]};func _gbff (_cgabg *paraList )map[int ][]*textLine {_cdbbc :=map[int ][]*textLine {};
for _ ,_gffd :=range *_cgabg {for _ ,_aecc :=range _gffd ._afgcbe {if !_cabb (_aecc ){_fd .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_adddd :=_aecc ._fgbge [0]._cefce [0]._aaeg ;_cdbbc [_adddd ]=append (_cdbbc [_adddd ],_aecc );};if _gffd ._fcea !=nil {_dgebce :=_gffd ._fcea ._aaee ;for _ ,_bcfc :=range _dgebce {for _ ,_ffebc :=range _bcfc ._afgcbe {if !_cabb (_ffebc ){_fd .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_dfag :=_ffebc ._fgbge [0]._cefce [0]._aaeg ;_cdbbc [_dfag ]=append (_cdbbc [_dfag ],_ffebc );};};};};return _cdbbc ;};

// String returns a human readable description of `ss`.
func (_gged *shapesState )String ()string {return _gd .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_gged ._bcdg ),_gged ._dfbg );};func (_fcab *wordBag )getDepthIdx (_ebae float64 )int {_ccee :=_fcab .depthIndexes ();
_gaccd :=_efce (_ebae );if _gaccd < _ccee [0]{return _ccee [0];};if _gaccd > _ccee [len (_ccee )-1]{return _ccee [len (_ccee )-1];};return _gaccd ;};

// String returns a string describing `ma`.
func (_eafef TextMarkArray )String ()string {_ffba :=len (_eafef ._gbc );if _ffba ==0{return "\u0045\u004d\u0050T\u0059";};_defa :=_eafef ._gbc [0];_adda :=_eafef ._gbc [_ffba -1];return _gd .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_ffba ,_defa ,_adda );
};func (_ccge *wordBag )scanBand (_fgabd string ,_fefba *wordBag ,_fcbg func (_gacgd *wordBag ,_bgfeb *textWord )bool ,_edff ,_caee ,_fdfe float64 ,_gada ,_egc bool )int {_dae :=_fefba ._gegb ;var _dcd map[int ]map[*textWord ]struct{};if !_gada {_dcd =_ccge .makeRemovals ();
};_dcea :=_efgd *_dae ;_fdfd :=0;for _ ,_egeb :=range _ccge .depthBand (_edff -_dcea ,_caee +_dcea ){if len (_ccge ._fced [_egeb ])==0{continue ;};for _ ,_fdggd :=range _ccge ._fced [_egeb ]{if !(_edff -_dcea <=_fdggd ._gdae &&_fdggd ._gdae <=_caee +_dcea ){continue ;
};if !_fcbg (_fefba ,_fdggd ){continue ;};_bdgd :=2.0*_f .Abs (_fdggd ._febea -_fefba ._gegb )/(_fdggd ._febea +_fefba ._gegb );_gcfce :=_f .Max (_fdggd ._febea /_fefba ._gegb ,_fefba ._gegb /_fdggd ._febea );_cgaf :=_f .Min (_bdgd ,_gcfce );if _fdfe > 0&&_cgaf > _fdfe {continue ;
};if _fefba .blocked (_fdggd ){continue ;};if !_gada {_fefba .pullWord (_fdggd ,_egeb ,_dcd );};_fdfd ++;if !_egc {if _fdggd ._gdae < _edff {_edff =_fdggd ._gdae ;};if _fdggd ._gdae > _caee {_caee =_fdggd ._gdae ;};};if _gada {break ;};};};if !_gada {_ccge .applyRemovals (_dcd );
};return _fdfd ;};func _fgdb (_fcg *Extractor ,_eeda *_ga .PdfPageResources ,_fgf _ce .GraphicsState ,_cbg *textState ,_bbab *stateStack )*textObject {return &textObject {_eaab :_fcg ,_edd :_eeda ,_daa :_fgf ,_gdga :_bbab ,_agb :_cbg ,_eabe :_fe .IdentityMatrix (),_cgb :_fe .IdentityMatrix ()};
};func _bcda (_ddcaa ,_ageg _ga .PdfRectangle )bool {return _ddcaa .Llx <=_ageg .Llx &&_ageg .Urx <=_ddcaa .Urx &&_ddcaa .Lly <=_ageg .Lly &&_ageg .Ury <=_ddcaa .Ury ;};func (_gecb *wordBag )removeWord (_beadc *textWord ,_aadad int ){_cffb :=_gecb ._fced [_aadad ];
_cffb =_cagba (_cffb ,_beadc );if len (_cffb )==0{delete (_gecb ._fced ,_aadad );}else {_gecb ._fced [_aadad ]=_cffb ;};};func _bed (_ebbb *textWord ,_fagc float64 ,_ggf ,_eedg rulingList )*wordBag {_cbba :=_efce (_ebbb ._gdae );_egdb :=[]*textWord {_ebbb };
_fgab :=wordBag {_fced :map[int ][]*textWord {_cbba :_egdb },PdfRectangle :_ebbb .PdfRectangle ,_gegb :_ebbb ._febea ,_ecb :_fagc ,_gacc :_ggf ,_affa :_eedg };return &_fgab ;};func (_dgfg *compositeCell )updateBBox (){for _ ,_acagf :=range _dgfg .paraList {_dgfg .PdfRectangle =_aefc (_dgfg .PdfRectangle ,_acagf .PdfRectangle );
};};var _gfdd =map[rulingKind ]string {_gefd :"\u006e\u006f\u006e\u0065",_agge :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_dafd :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};const (_bbcg markKind =iota ;_ccde ;_befe ;_caag ;
);func _fbea (_aggb []*textMark ,_aaab _ga .PdfRectangle )*textWord {_cgbg :=_aggb [0].PdfRectangle ;_eabc :=_aggb [0]._dfbea ;for _ ,_cedag :=range _aggb [1:]{_cgbg =_aefc (_cgbg ,_cedag .PdfRectangle );if _cedag ._dfbea > _eabc {_eabc =_cedag ._dfbea ;
};};return &textWord {PdfRectangle :_cgbg ,_cefce :_aggb ,_gdae :_aaab .Ury -_cgbg .Lly ,_febea :_eabc };};func (_cbcc *wordBag )absorb (_dagc *wordBag ){_eecd :=_dagc .makeRemovals ();for _baff ,_egfb :=range _dagc ._fced {for _ ,_ffad :=range _egfb {_cbcc .pullWord (_ffad ,_baff ,_eecd );
};};_dagc .applyRemovals (_eecd );};func _cabb (_gegg *textLine )bool {_aae :=true ;_bfde :=-1;for _ ,_fagb :=range _gegg ._fgbge {for _ ,_edgf :=range _fagb ._cefce {_fagd :=_edgf ._aaeg ;if _bfde ==-1{_bfde =_fagd ;}else {if _bfde !=_fagd {_aae =false ;
break ;};};};};return _aae ;};func (_adc *textObject )showTextAdjusted (_eed *_eb .PdfObjectArray ,_age int )error {_gea :=false ;for _ ,_cbc :=range _eed .Elements (){switch _cbc .(type ){case *_eb .PdfObjectFloat ,*_eb .PdfObjectInteger :_adde ,_egd :=_eb .GetNumberAsFloat (_cbc );
if _egd !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cbc ,_eed );
return _egd ;};_eccg ,_gad :=-_adde *0.001*_adc ._agb ._cede ,0.0;if _gea {_gad ,_eccg =_eccg ,_gad ;};_ceg :=_geag (_fe .Point {X :_eccg ,Y :_gad });_adc ._eabe .Concat (_ceg );case *_eb .PdfObjectString :_cbde :=_eb .TraceToDirectObject (_cbc );_bee ,_dbfc :=_eb .GetStringBytes (_cbde );
if !_dbfc {_fd .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cbc ,_eed );
return _eb .ErrTypeError ;};_adc .renderText (_cbde ,_bee ,_age );default:_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_cbc ,_eed );
return _eb .ErrTypeError ;};};return nil ;};type shapesState struct{_cfda _fe .Matrix ;_cef _fe .Matrix ;_bcdg []*subpath ;_dfbg bool ;_eae _fe .Point ;_ede *textObject ;};func (_bcee gridTile )complete ()bool {return _bcee .numBorders ()==4};

// String returns a string describing `pt`.
func (_fdc PageText )String ()string {_gccfd :=_gd .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_fdc ._feg ));_dfde :=[]string {"\u002d"+_gccfd };for _ ,_fdca :=range _fdc ._feg {_dfde =append (_dfde ,_fdca .String ());
};_dfde =append (_dfde ,"\u002b"+_gccfd );return _cc .Join (_dfde ,"\u000a");};func (_abdg rulingList )secMinMax ()(float64 ,float64 ){_cfce ,_gddca :=_abdg [0]._bdbd ,_abdg [0]._deaad ;for _ ,_eadaa :=range _abdg [1:]{if _eadaa ._bdbd < _cfce {_cfce =_eadaa ._bdbd ;
};if _eadaa ._deaad > _gddca {_gddca =_eadaa ._deaad ;};};return _cfce ,_gddca ;};const (_ggfa =1.0e-6;_cccb =1.0e-4;_ceae =10;_abga =6;_efgd =0.5;_gebc =0.12;_afee =0.19;_cdcad =0.04;_edbg =0.04;_ddbe =1.0;_ebgd =0.04;_gbfb =0.4;_dbc =0.7;_ffdc =1.0;_acgb =0.1;
_fgef =1.4;_fdced =0.46;_acb =0.02;_adac =0.2;_ccef =0.5;_bfef =4;_cffbb =4.0;_begaf =6;_ecdeb =0.3;_ffcb =0.01;_facc =0.02;_debe =2;_eaba =2;_deda =500;_eegg =4.0;_edef =4.0;_adec =0.05;_bgcd =0.1;_efde =2.0;_beccb =2.0;_daff =1.5;_ddced =3.0;_cfdb =0.25;
);func _fgeb (_gfdf *textLine )float64 {return _gfdf ._fgbge [0].Llx };

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ga .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};var _aggg =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func (_fceg *textObject )setCharSpacing (_feb float64 ){if _fceg ==nil {return ;
};_fceg ._agb ._bgf =_feb ;if _fdag {_fd .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_feb ,_fceg ._agb .String ());};};func _ecgee (_fefa map[int ][]float64 )[]int {_fbbedd :=make ([]int ,len (_fefa ));
_ebaad :=0;for _cebef :=range _fefa {_fbbedd [_ebaad ]=_cebef ;_ebaad ++;};_ed .Ints (_fbbedd );return _fbbedd ;};func (_fadc *shapesState )establishSubpath ()*subpath {_eadba ,_gcgd :=_fadc .lastpointEstablished ();if !_gcgd {_fadc ._bcdg =append (_fadc ._bcdg ,_bgca (_eadba ));
};if len (_fadc ._bcdg )==0{return nil ;};_fadc ._dfbg =false ;return _fadc ._bcdg [len (_fadc ._bcdg )-1];};func (_aebe gridTile )numBorders ()int {_eaacd :=0;if _aebe ._fega {_eaacd ++;};if _aebe ._cdcgd {_eaacd ++;};if _aebe ._begec {_eaacd ++;};if _aebe ._gefed {_eaacd ++;
};return _eaacd ;};const (_ecge =true ;_cfbc =true ;_cdd =true ;_afgbe =false ;_ffcc =false ;_adad =6;_debg =3.0;_fgg =200;_aecd =true ;_bffb =true ;_adadb =true ;_ageb =true ;_bbcab =false ;);func (_fddd *wordBag )highestWord (_dadbg int ,_febe ,_ffaa float64 )*textWord {for _ ,_dabe :=range _fddd ._fced [_dadbg ]{if _febe <=_dabe ._gdae &&_dabe ._gdae <=_ffaa {return _dabe ;
};};return nil ;};func (_ecbf *textPara )bbox ()_ga .PdfRectangle {return _ecbf .PdfRectangle };func _becc (_bade ,_gfcbg bounded )float64 {return _bade .bbox ().Llx -_gfcbg .bbox ().Urx };func _bfgb (_bcea map[float64 ][]*textLine )[]float64 {_ddfa :=[]float64 {};
for _eeea :=range _bcea {_ddfa =append (_ddfa ,_eeea );};_ed .Float64s (_ddfa );return _ddfa ;};func (_gbcb *subpath )clear (){*_gbcb =subpath {}};func _gdeee (_eaadg *_ga .Image ,_bdae _g .Color )_fg .Image {_ebegg ,_aaadc :=int (_eaadg .Width ),int (_eaadg .Height );
_fdfdf :=_fg .NewRGBA (_fg .Rect (0,0,_ebegg ,_aaadc ));for _gdbd :=0;_gdbd < _aaadc ;_gdbd ++{for _fefe :=0;_fefe < _ebegg ;_fefe ++{_dgeaf ,_cbcg :=_eaadg .ColorAt (_fefe ,_gdbd );if _cbcg !=nil {_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_fefe ,_gdbd );
continue ;};_cegd ,_cdcaa ,_aecee ,_ :=_dgeaf .RGBA ();var _ddgfd _g .Color ;if _cegd +_cdcaa +_aecee ==0{_ddgfd =_g .Transparent ;}else {_ddgfd =_bdae ;};_fdfdf .Set (_fefe ,_gdbd ,_ddgfd );};};return _fdfdf ;};func _fac (_fbba ,_debae bounded )float64 {_gbac :=_fbec (_fbba ,_debae );
if !_dcaed (_gbac ){return _gbac ;};return _dbaaf (_fbba ,_debae );};func (_dgbca rulingList )log (_fedf string ){if !_cgab {return ;};_fd .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_fedf ,_dgbca .String ());
for _badg ,_cbdec :=range _dgbca {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_badg ,_cbdec .String ());};};var _ddfag =_d .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
func _cagba (_ggcg []*textWord ,_dgbce *textWord )[]*textWord {for _adfab ,_gfad :=range _ggcg {if _gfad ==_dgbce {return _dcacg (_ggcg ,_adfab );};};_fd .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_dgbce );
return nil ;};func (_gadb *textPara )writeText (_dcae _c .Writer ){if _gadb ._fcea ==nil {_gadb .writeCellText (_dcae );return ;};for _cdga :=0;_cdga < _gadb ._fcea ._gddg ;_cdga ++{for _bbcf :=0;_bbcf < _gadb ._fcea ._ccce ;_bbcf ++{_ddbec :=_gadb ._fcea .get (_bbcf ,_cdga );
if _ddbec ==nil {_dcae .Write ([]byte ("\u0009"));}else {_ddbec .writeCellText (_dcae );};_dcae .Write ([]byte ("\u0020"));};if _cdga < _gadb ._fcea ._gddg -1{_dcae .Write ([]byte ("\u000a"));};};};func (_fdfb paraList )eventNeighbours (_bbcae []event )map[*textPara ][]int {_ed .Slice (_bbcae ,func (_gecf ,_cfbbff int )bool {_gdbbf ,_fcfc :=_bbcae [_gecf ],_bbcae [_cfbbff ];
_begc ,_cgdc :=_gdbbf ._ceeab ,_fcfc ._ceeab ;if _begc !=_cgdc {return _begc < _cgdc ;};if _gdbbf ._bfae !=_fcfc ._bfae {return _gdbbf ._bfae ;};return _gecf < _cfbbff ;});_dgcee :=make (map[int ]intSet );_gagf :=make (intSet );for _ ,_cbdcb :=range _bbcae {if _cbdcb ._bfae {_dgcee [_cbdcb ._cebae ]=make (intSet );
for _bdbb :=range _gagf {if _bdbb !=_cbdcb ._cebae {_dgcee [_cbdcb ._cebae ].add (_bdbb );_dgcee [_bdbb ].add (_cbdcb ._cebae );};};_gagf .add (_cbdcb ._cebae );}else {_gagf .del (_cbdcb ._cebae );};};_bggfgb :=map[*textPara ][]int {};for _eaaea ,_cbfb :=range _dgcee {_gdfe :=_fdfb [_eaaea ];
if len (_cbfb )==0{_bggfgb [_gdfe ]=nil ;continue ;};_ceebd :=make ([]int ,len (_cbfb ));_gfaf :=0;for _fbdfe :=range _cbfb {_ceebd [_gfaf ]=_fbdfe ;_gfaf ++;};_bggfgb [_gdfe ]=_ceebd ;};return _bggfgb ;};func _fbec (_cecg ,_dcg bounded )float64 {return _cecg .bbox ().Llx -_dcg .bbox ().Llx };


// PageText represents the layout of text on a device page.
type PageText struct{_feg []*textMark ;_ddfb string ;_acg []TextMark ;_aeba []TextTable ;_bcg _ga .PdfRectangle ;_ecee []pathSection ;_abg []pathSection ;_cfbb *_eb .PdfObject ;_dfd _eb .PdfObject ;_edbe *_ce .ContentStreamOperations ;_ade PageTextOptions ;
};func _aeeb (_gbafd *wordBag ,_gfbc int )*textLine {_edcbdc :=_gbafd .firstWord (_gfbc );_caeef :=textLine {PdfRectangle :_edcbdc .PdfRectangle ,_dbcc :_edcbdc ._febea ,_acga :_edcbdc ._gdae };_caeef .pullWord (_gbafd ,_edcbdc ,_gfbc );return &_caeef ;
};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_acef *PageText )GetContentStreamOps ()*_ce .ContentStreamOperations {return _acef ._edbe };func (_gafb *textPara )taken ()bool {return _gafb ==nil ||_gafb ._bgeg };

// String returns a description of `t`.
func (_debgb *textTable )String ()string {return _gd .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_debgb ._ccce ,_debgb ._gddg ,_debgb ._cbbba );};func _dbaaf (_agfc ,_bebb bounded )float64 {return _eecb (_agfc )-_eecb (_bebb )};
func (_gbag rulingList )mergePrimary ()float64 {_gffef :=_gbag [0]._eeac ;for _ ,_afgdd :=range _gbag [1:]{_gffef +=_afgdd ._eeac ;};return _gffef /float64 (len (_gbag ));};func (_ffg *shapesState )fill (_dgbd *[]pathSection ){_gedc :=pathSection {_bdbc :_ffg ._bcdg ,Color :_ffg ._ede .getFillColor ()};
*_dgbd =append (*_dgbd ,_gedc );if _cgab {_fee :=_gedc .bbox ();_gd .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_dgbd ),len (_gedc ._bdbc ),_ffg ,_gedc .Color ,_fee ,_fee .Width (),_fee .Height ());
if _fdfda {for _ecdg ,_abcf :=range _gedc ._bdbc {_gd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ecdg ,_abcf );if _ecdg ==10{break ;};};};};};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;};type intSet map[int ]struct{};func _daed (_ecbg string )(string ,bool ){_eage :=[]rune (_ecbg );if len (_eage )!=1{return "",false ;};_bedc ,_afbcf :=_ceec [_eage [0]];return _bedc ,_afbcf ;};func _bege (_ecef float64 ,_dbaad int )int {if _dbaad ==0{_dbaad =1;
};_adef :=float64 (_dbaad );return int (_f .Round (_ecef /_adef )*_adef );};func (_gaag paraList )tables ()[]TextTable {var _babe []TextTable ;if _edgc {_fd .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};
for _ ,_fadce :=range _gaag {_eedb :=_fadce ._fcea ;if _eedb !=nil &&_eedb .isExportable (){_babe =append (_babe ,_eedb .toTextTable ());};};return _babe ;};

// Text returns the text content of the `bulletLists`.
func (_cbdb *lists )Text ()string {_afabb :=&_cc .Builder {};for _ ,_dade :=range *_cbdb {_bbef :=_dade .Text ();_afabb .WriteString (_bbef );};return _afabb .String ();};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_eac PageText )ToText ()string {return _eac .Text ()};func _bceca (_dbde []TextMark ,_gfag *int ,_accf TextMark )[]TextMark {_accf .Offset =*_gfag ;_dbde =append (_dbde ,_accf );*_gfag +=len (_accf .Text );return _dbde ;};type subpath struct{_fag []_fe .Point ;
_cabg bool ;};func (_dggf *textPara )depth ()float64 {if _dggf ._aaef {return -1.0;};if len (_dggf ._afgcbe )> 0{return _dggf ._afgcbe [0]._acga ;};return _dggf ._fcea .depth ();};func (_dfdae compositeCell )hasLines (_cfff []*textLine )bool {for _fdaa ,_fgecc :=range _cfff {_bdgdc :=_dcdc (_dfdae .PdfRectangle ,_fgecc .PdfRectangle );
if _edgc {_gd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_bdgdc ,_fdaa ,len (_cfff ));_gd .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_dfdae );
_gd .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_fgecc );};if _bdgdc {return true ;};};return false ;};func (_cega *subpath )removeDuplicates (){if len (_cega ._fag )==0{return ;};_beac :=[]_fe .Point {_cega ._fag [0]};
for _ ,_aabcb :=range _cega ._fag [1:]{if !_dccg (_aabcb ,_beac [len (_beac )-1]){_beac =append (_beac ,_aabcb );};};_cega ._fag =_beac ;};

// String returns a description of `l`.
func (_aadgd *textLine )String ()string {return _gd .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_aadgd ._acga ,_aadgd .PdfRectangle ,_aadgd ._dbcc ,_aadgd .text ());
};func (_acdf *wordBag )arrangeText ()*textPara {_acdf .sort ();if _cfbc {_acdf .removeDuplicates ();};var _edbff []*textLine ;for _ ,_ecbe :=range _acdf .depthIndexes (){for !_acdf .empty (_ecbe ){_gfdfe :=_acdf .firstReadingIndex (_ecbe );_bacf :=_acdf .firstWord (_gfdfe );
_fbcd :=_aeeb (_acdf ,_gfdfe );_gcad :=_bacf ._febea ;_beeebf :=_bacf ._gdae -_efgd *_gcad ;_cgef :=_bacf ._gdae +_efgd *_gcad ;_bgbe :=_fgef *_gcad ;_bbede :=_fdced *_gcad ;_bagd :for {var _cecb *textWord ;_cfaf :=0;for _ ,_dfdbb :=range _acdf .depthBand (_beeebf ,_cgef ){_degfe :=_acdf .highestWord (_dfdbb ,_beeebf ,_cgef );
if _degfe ==nil {continue ;};_ffeed :=_becc (_degfe ,_fbcd ._fgbge [len (_fbcd ._fgbge )-1]);if _ffeed < -_bbede {break _bagd ;};if _ffeed > _bgbe {continue ;};if _cecb !=nil &&_fbec (_degfe ,_cecb )>=0{continue ;};_cecb =_degfe ;_cfaf =_dfdbb ;};if _cecb ==nil {break ;
};_fbcd .pullWord (_acdf ,_cecb ,_cfaf );};_fbcd .markWordBoundaries ();_edbff =append (_edbff ,_fbcd );};};if len (_edbff )==0{return nil ;};_ed .Slice (_edbff ,func (_agde ,_gbec int )bool {return _gbcc (_edbff [_agde ],_edbff [_gbec ])< 0});_fbdc :=_fedgg (_acdf .PdfRectangle ,_edbff );
if _cacg {_fd .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_fbdc .String ());if _bggf {for _gbbg ,_dcaaf :=range _fbdc ._afgcbe {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbbg ,_dcaaf .String ());
if _bbeg {for _fgdd ,_dcabg :=range _dcaaf ._fgbge {_gd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fgdd ,_dcabg .String ());for _adcg ,_cgc :=range _dcabg ._cefce {_gd .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_adcg ,_cgc .String ());
};};};};};};return _fbdc ;};func _gbdbf (_fgdea map[int ]intSet )[]int {_cbeb :=make ([]int ,0,len (_fgdea ));for _becba :=range _fgdea {_cbeb =append (_cbeb ,_becba );};_ed .Ints (_cbeb );return _cbeb ;};type textLine struct{_ga .PdfRectangle ;_acga float64 ;
_fgbge []*textWord ;_dbcc float64 ;};func _aebaa (_ceba []TextMark ,_aeaf *int )[]TextMark {_cegff :=_ceba [len (_ceba )-1];_cdcfd :=[]rune (_cegff .Text );if len (_cdcfd )==1{_ceba =_ceba [:len (_ceba )-1];_ebdd :=_ceba [len (_ceba )-1];*_aeaf =_ebdd .Offset +len (_ebdd .Text );
}else {_egdc :=_ecebe (_cegff .Text );*_aeaf +=len (_egdc )-len (_cegff .Text );_cegff .Text =_egdc ;};return _ceba ;};func (_ebd *shapesState )newSubPath (){_ebd .clearPath ();if _cbdea {_fd .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_ebd );
};};

// String returns a description of `b`.
func (_gbcba *wordBag )String ()string {var _gfcb []string ;for _ ,_aage :=range _gbcba .depthIndexes (){_ggb :=_gbcba ._fced [_aage ];for _ ,_eddd :=range _ggb {_gfcb =append (_gfcb ,_eddd ._eaedb );};};return _gd .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_gbcba .PdfRectangle ,_gbcba ._gegb ,len (_gfcb ),_gfcb );
};func (_caef *ruling )encloses (_cbaca ,_gaea float64 )bool {return _caef ._bdbd -_efde <=_cbaca &&_gaea <=_caef ._deaad +_efde ;};

// String returns a description of `v`.
func (_baead *ruling )String ()string {if _baead ._gbcbd ==_gefd {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_cbbe ,_gdcd :="\u0078","\u0079";if _baead ._gbcbd ==_agge {_cbbe ,_gdcd ="\u0079","\u0078";};_bdbda :="";if _baead ._fcegf !=0.0{_bdbda =_gd .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_baead ._fcegf );
};return _gd .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_baead ._gbcbd ,_cbbe ,_baead ._eeac ,_gdcd ,_baead ._bdbd ,_baead ._deaad ,_baead ._deaad -_baead ._bdbd ,_baead ._dagg ,_baead .Color ,_bdbda );
};func (_bffa *shapesState )addPoint (_ecdge ,_fcee float64 ){_cdf :=_bffa .establishSubpath ();_fdgg :=_bffa .devicePoint (_ecdge ,_fcee );if _cdf ==nil {_bffa ._dfbg =true ;_bffa ._eae =_fdgg ;}else {_cdf .add (_fdgg );};};func _gddcc (_ddfbb []pathSection ){if _cccb < 0.0{return ;
};if _cgab {_fd .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_ddfbb ));};for _bbec ,_baca :=range _ddfbb {for _fabd ,_acfa :=range _baca ._bdbc {for _abeea ,_dgeae :=range _acfa ._fag {_acfa ._fag [_abeea ]=_fe .Point {X :_gcffac (_dgeae .X ),Y :_gcffac (_dgeae .Y )};
if _cgab {_babg :=_acfa ._fag [_abeea ];if !_dccg (_dgeae ,_babg ){_cegb :=_fe .Point {X :_babg .X -_dgeae .X ,Y :_babg .Y -_dgeae .Y };_gd .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_bbec ,_fabd ,_abeea ,_dgeae ,_babg ,_cegb );
};};};};};};func (_becf *wordBag )depthRange (_dbaa ,_gdec int )[]int {var _bgfb []int ;for _eea :=range _becf ._fced {if _dbaa <=_eea &&_eea <=_gdec {_bgfb =append (_bgfb ,_eea );};};if len (_bgfb )==0{return nil ;};_ed .Ints (_bgfb );return _bgfb ;};
type cachedImage struct{_bad *_ga .Image ;_ee _ga .PdfColorspace ;};func _eadf (_abace int ,_dedda map[int ][]float64 )([]int ,int ){_dgag :=make ([]int ,_abace );_beeae :=0;for _efafg :=0;_efafg < _abace ;_efafg ++{_dgag [_efafg ]=_beeae ;_beeae +=len (_dedda [_efafg ])+1;
};return _dgag ,_beeae ;};func _cgegf (_ecf ,_cbee _ga .PdfRectangle )bool {return _cbee .Llx <=_ecf .Urx &&_ecf .Llx <=_cbee .Urx };func _fafc (_ebac *list ,_eade *_cc .Builder ,_abfc *string ){_bcdgg :=_eeeb (_ebac ,_abfc );_eade .WriteString (_bcdgg );
for _ ,_ffff :=range _ebac ._gbgd {_bbgb :=*_abfc +"\u0020\u0020\u0020";_fafc (_ffff ,_eade ,&_bbgb );};};func (_bbga compositeCell )parasBBox ()(paraList ,_ga .PdfRectangle ){return _bbga .paraList ,_bbga .PdfRectangle ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_ag *Extractor )ExtractText ()(string ,error ){_eeg ,_ ,_ ,_agf :=_ag .ExtractTextWithStats ();return _eeg ,_agf ;};func (_dac *shapesState )lineTo (_bcdf ,_ccbbc float64 ){if _cbdea {_fd .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_bcdf ,_ccbbc ,_dac .devicePoint (_bcdf ,_ccbbc ));
};_dac .addPoint (_bcdf ,_ccbbc );};type rulingList []*ruling ;func (_bgde *shapesState )devicePoint (_dbbe ,_bddd float64 )_fe .Point {_dgda :=_bgde ._cef .Mult (_bgde ._cfda );_dbbe ,_bddd =_dgda .Transform (_dbbe ,_bddd );return _fe .NewPoint (_dbbe ,_bddd );
};func _dbca (_bedd []rulingList )(rulingList ,rulingList ){var _gbed rulingList ;for _ ,_afgef :=range _bedd {_gbed =append (_gbed ,_afgef ...);};return _gbed .vertsHorzs ();};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_gbfdc *textTable )newTablePara ()*textPara {_edgeb :=_gbfdc .computeBbox ();_bdef :=&textPara {PdfRectangle :_edgeb ,_agfgg :_edgeb ,_fcea :_gbfdc };if _edgc {_fd .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_bdef );
};return _bdef ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ga .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ga .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _g .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _g .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _eb .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_febf bool ;_cbbb *TextTable ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_bfdb bool ;_cag bool ;};func _adaa (_bbedb ,_cbaf *textPara )bool {if _bbedb ._aaef ||_cbaf ._aaef {return true ;};return _dcaed (_bbedb .depth ()-_cbaf .depth ());};func _cegfa (_bbdg []*textLine )[]*textLine {_bfaa :=[]*textLine {};
for _ ,_dggg :=range _bbdg {_gfca :=_dggg .text ();_eaeg :=_dggd .Find ([]byte (_gfca ));if _eaeg !=nil {_bfaa =append (_bfaa ,_dggg );};};return _bfaa ;};

// Elements returns the TextMarks in `ma`.
func (_bfg *TextMarkArray )Elements ()[]TextMark {return _bfg ._gbc };func (_ccfc *wordBag )blocked (_gcfc *textWord )bool {if _gcfc .Urx < _ccfc .Llx {_ddgg :=_abcc (_gcfc .PdfRectangle );_dfda :=_afdg (_ccfc .PdfRectangle );if _ccfc ._gacc .blocks (_ddgg ,_dfda ){if _effe {_fd .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gcfc ,_ccfc );
};return true ;};}else if _ccfc .Urx < _gcfc .Llx {_ffbaa :=_abcc (_ccfc .PdfRectangle );_dccb :=_afdg (_gcfc .PdfRectangle );if _ccfc ._gacc .blocks (_ffbaa ,_dccb ){if _effe {_fd .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gcfc ,_ccfc );
};return true ;};};if _gcfc .Ury < _ccfc .Lly {_aadg :=_cdcgf (_gcfc .PdfRectangle );_bdde :=_gcfceg (_ccfc .PdfRectangle );if _ccfc ._affa .blocks (_aadg ,_bdde ){if _effe {_fd .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gcfc ,_ccfc );
};return true ;};}else if _ccfc .Ury < _gcfc .Lly {_fdf :=_cdcgf (_ccfc .PdfRectangle );_gggd :=_gcfceg (_gcfc .PdfRectangle );if _ccfc ._affa .blocks (_fdf ,_gggd ){if _effe {_fd .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gcfc ,_ccfc );
};return true ;};};return false ;};func (_dffge *textPara )toTextMarks (_edggd *int )[]TextMark {if _dffge ._fcea ==nil {return _dffge .toCellTextMarks (_edggd );};var _aaca []TextMark ;for _bbcc :=0;_bbcc < _dffge ._fcea ._gddg ;_bbcc ++{for _bffd :=0;
_bffd < _dffge ._fcea ._ccce ;_bffd ++{_ceea :=_dffge ._fcea .get (_bffd ,_bbcc );if _ceea ==nil {_aaca =_geaed (_aaca ,_edggd ,"\u0009");}else {_gaab :=_ceea .toCellTextMarks (_edggd );_aaca =append (_aaca ,_gaab ...);};_aaca =_geaed (_aaca ,_edggd ,"\u0020");
};if _bbcc < _dffge ._fcea ._gddg -1{_aaca =_geaed (_aaca ,_edggd ,"\u000a");};};_dcff :=_dffge ._fcea ;if _dcff .isExportable (){_ggbc :=_dcff .toTextTable ();_aaca =_gcdc (_aaca ,&_ggbc );};return _aaca ;};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//     options := &Options{
//	     DisableDocumentTags: false, // this means use document tag if available
//     }
//     ex, err := NewWithOptions(page, options)
//     // handle error
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle error
//     lists := pageText.List()
//     txt := lists.Text()
func (_eddgbg PageText )List ()lists {_agef :=!_eddgbg ._ade ._bfdb ;_fbfe :=_eddgbg .getParagraphs ();_adedd :=true ;if _eddgbg ._cfbb ==nil ||*_eddgbg ._cfbb ==nil {_adedd =false ;};_adba :=_fbfe .list ();if _adedd &&_agef {_fbdf :=_gbff (&_fbfe );_bggff :=&structTreeRoot {};
_bggff .parseStructTreeRoot (*_eddgbg ._cfbb );if _bggff ._cffba ==nil {_fd .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _adba ;};_adba =_bggff .buildList (_fbdf ,_eddgbg ._dfd );};return _adba ;};func (_gcba *subpath )isQuadrilateral ()bool {if len (_gcba ._fag )< 4||len (_gcba ._fag )> 5{return false ;};if len (_gcba ._fag )==5{_ceeb :=_gcba ._fag [0];_bgbga :=_gcba ._fag [4];
if _ceeb .X !=_bgbga .X ||_ceeb .Y !=_bgbga .Y {return false ;};};return true ;};func (_aebc *ruling )intersects (_ccdde *ruling )bool {_bdcg :=(_aebc ._gbcbd ==_dafd &&_ccdde ._gbcbd ==_agge )||(_ccdde ._gbcbd ==_dafd &&_aebc ._gbcbd ==_agge );_bgbf :=func (_ccbe ,_daba *ruling )bool {return _ccbe ._bdbd -_efde <=_daba ._eeac &&_daba ._eeac <=_ccbe ._deaad +_efde ;
};_bgdb :=_bgbf (_aebc ,_ccdde );_dbgf :=_bgbf (_ccdde ,_aebc );if _cgab {_gd .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_bdcg ,_bgdb ,_dbgf ,_bdcg &&_bgdb &&_dbgf ,_aebc ,_ccdde );
};return _bdcg &&_bgdb &&_dbgf ;};func (_aefg *subpath )add (_faga ..._fe .Point ){_aefg ._fag =append (_aefg ._fag ,_faga ...)};func (_eaaac rulingList )aligned ()bool {if len (_eaaac )< 2{return false ;};_aacg :=make (map[*ruling ]int );_aacg [_eaaac [0]]=0;
for _ ,_bcdae :=range _eaaac [1:]{_egae :=false ;for _gabcg :=range _aacg {if _bcdae .gridIntersecting (_gabcg ){_aacg [_gabcg ]++;_egae =true ;break ;};};if !_egae {_aacg [_bcdae ]=0;};};_babc :=0;for _ ,_bbebf :=range _aacg {if _bbebf ==0{_babc ++;};
};_gffgfa :=float64 (_babc )/float64 (len (_eaaac ));_cfgd :=_gffgfa <=1.0-_cfdb ;if _cgab {_fd .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cfgd ,_gffgfa ,_babc ,len (_eaaac ),_eaaac .String ());
};return _cfgd ;};func (_bgbgg rulingList )toTilings ()(rulingList ,[]gridTiling ){_bgbgg .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_bgbgg )==0{return nil ,nil ;};_bgbgg =_bgbgg .tidied ("\u0061\u006c\u006c");_bgbgg .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_cdfb :=_bgbgg .toGrids ();_geeb :=make ([]gridTiling ,len (_cdfb ));for _egde ,_cbabb :=range _cdfb {_geeb [_egde ]=_cbabb .asTiling ();};return _bgbgg ,_geeb ;};func (_gaeg rulingList )removeDuplicates ()rulingList {if len (_gaeg )==0{return nil ;};_gaeg .sort ();
_cbdf :=rulingList {_gaeg [0]};for _ ,_bbac :=range _gaeg [1:]{if _bbac .equals (_cbdf [len (_cbdf )-1]){continue ;};_cbdf =append (_cbdf ,_bbac );};return _cbdf ;};var (_beg =_a .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_dab =_a .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););var (_ceec =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_cgabgf *textTable )computeBbox ()_ga .PdfRectangle {var _bfcb _ga .PdfRectangle ;_ccfeg :=false ;for _ddfe :=0;_ddfe < _cgabgf ._gddg ;_ddfe ++{for _becb :=0;_becb < _cgabgf ._ccce ;_becb ++{_cdfgg :=_cgabgf .get (_becb ,_ddfe );if _cdfgg ==nil {continue ;
};if !_ccfeg {_bfcb =_cdfgg .PdfRectangle ;_ccfeg =true ;}else {_bfcb =_aefc (_bfcb ,_cdfgg .PdfRectangle );};};};return _bfcb ;};func (_fefb TextTable )getCellInfo (_bcd TextMark )[][]int {for _bceg ,_geg :=range _fefb .Cells {for _agg ,_dadb :=range _geg {_agbg :=&_dadb .Marks ;
if _agbg .exists (_bcd ){return [][]int {{_bceg },{_agg }};};};};return nil ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_afe *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_ada ,_gfe ,_bce ,_afdf :=_afe .extractPageText (_afe ._ca ,_afe ._dad ,_fe .IdentityMatrix (),0);if _afdf !=nil &&_afdf !=_ga .ErrColorOutOfRange {return nil ,0,0,_afdf ;};if _afe ._bc !=nil {_ada ._ade ._cag =_afe ._bc .UseSimplerExtractionProcess ;
};_ada .computeViews ();_afdf =_cdfge (_ada );if _afdf !=nil {return nil ,0,0,_afdf ;};if _afe ._bc !=nil {if _afe ._bc .ApplyCropBox &&_afe ._gc !=nil {_ada .ApplyArea (*_afe ._gc );};_ada ._ade ._bfdb =_afe ._bc .DisableDocumentTags ;};return _ada ,_gfe ,_bce ,nil ;
};func (_dfegf rulingList )blocks (_cbada ,_eabde *ruling )bool {if _cbada ._bdbd > _eabde ._deaad ||_eabde ._bdbd > _cbada ._deaad {return false ;};_dddd :=_f .Max (_cbada ._bdbd ,_eabde ._bdbd );_gadec :=_f .Min (_cbada ._deaad ,_eabde ._deaad );if _cbada ._eeac > _eabde ._eeac {_cbada ,_eabde =_eabde ,_cbada ;
};for _ ,_gbfbd :=range _dfegf {if _cbada ._eeac <=_gbfbd ._eeac +_beccb &&_gbfbd ._eeac <=_eabde ._eeac +_beccb &&_gbfbd ._bdbd <=_gadec &&_dddd <=_gbfbd ._deaad {return true ;};};return false ;};func _ecebe (_ddgd string )string {_bfge :=[]rune (_ddgd );
return string (_bfge [:len (_bfge )-1])};func (_eagc paraList )findTextTables ()[]*textTable {var _fgagg []*textTable ;for _ ,_gaeeb :=range _eagc {if _gaeeb .taken ()||_gaeeb .Width ()==0{continue ;};_dgadb :=_gaeeb .isAtom ();if _dgadb ==nil {continue ;
};_dgadb .growTable ();if _dgadb ._ccce *_dgadb ._gddg < _begaf {continue ;};_dgadb .markCells ();_dgadb .log ("\u0067\u0072\u006fw\u006e");_fgagg =append (_fgagg ,_dgadb );};return _fgagg ;};func _edcd (_gadd *_ce .ContentStreamOperation )(float64 ,error ){if len (_gadd .Params )!=1{_geaf :=_a .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_gadd .Operand ,1,len (_gadd .Params ),_gadd .Params );
return 0.0,_geaf ;};return _eb .GetNumberAsFloat (_gadd .Params [0]);};func _gggf (_bfeg *textLine ,_dgcaa []*textLine ,_gcef []float64 )float64 {var _afddb float64 =-1;for _ ,_acde :=range _dgcaa {if _acde ._acga > _bfeg ._acga {if _f .Round (_acde .Llx )>=_f .Round (_bfeg .Llx ){_afddb =_acde ._acga ;
}else {break ;};};};return _afddb ;};func (_caf *textObject )showText (_bdg _eb .PdfObject ,_fcdd []byte ,_egg int )error {return _caf .renderText (_bdg ,_fcdd ,_egg );};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};type textObject struct{_eaab *Extractor ;_edd *_ga .PdfPageResources ;_daa _ce .GraphicsState ;_agb *textState ;_gdga *stateStack ;_eabe _fe .Matrix ;_cgb _fe .Matrix ;_ecgd []*textMark ;_dgba bool ;};func (_bgaca paraList )findTableGrid (_fdcd gridTiling )(*textTable ,map[*textPara ]struct{}){_fdbb :=len (_fdcd ._bbba );
_cgec :=len (_fdcd ._adfad );_abae :=textTable {_cbbba :true ,_ccce :_fdbb ,_gddg :_cgec ,_aaee :make (map[uint64 ]*textPara ,_fdbb *_cgec ),_bfdgbe :make (map[uint64 ]compositeCell ,_fdbb *_cgec )};_abae .PdfRectangle =_fdcd .PdfRectangle ;_feba :=make (map[*textPara ]struct{});
_ccaeb :=int ((1.0-_ecdeb )*float64 (_fdbb *_cgec ));_aefce :=0;if _babf {_fd .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_fdbb ,_cgec );};for _aade ,_eadg :=range _fdcd ._adfad {_ecgeg ,_cdebd :=_fdcd ._gcdb [_eadg ];
if !_cdebd {continue ;};for _dfbd ,_acdeg :=range _fdcd ._bbba {_gbeed ,_ebbff :=_ecgeg [_acdeg ];if !_ebbff {continue ;};_bbgd :=_bgaca .inTile (_gbeed );if len (_bbgd )==0{_aefce ++;if _aefce > _ccaeb {if _babf {_fd .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_aefce );
};return nil ,nil ;};}else {_abae .putComposite (_dfbd ,_aade ,_bbgd ,_gbeed .PdfRectangle );for _ ,_acfb :=range _bbgd {_feba [_acfb ]=struct{}{};};};};};_egbb :=0;for _gdge :=0;_gdge < _fdbb ;_gdge ++{_cdgbf :=_abae .get (_gdge ,0);if _cdgbf ==nil ||!_cdgbf ._aaef {_egbb ++;
};};if _egbb ==0{if _babf {_fd .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_fdgf :=_abae .reduceTiling (_fdcd ,_ddced );_fdgf =_fdgf .subdivide ();return _fdgf ,_feba ;};func (_defd *shapesState )stroke (_cecdf *[]pathSection ){_abe :=pathSection {_bdbc :_defd ._bcdg ,Color :_defd ._ede .getStrokeColor ()};
*_cecdf =append (*_cecdf ,_abe );if _cgab {_gd .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_cecdf ),_defd ,_defd ._ede .getStrokeColor (),_abe .bbox ());
if _fdfda {for _aada ,_fbde :=range _defd ._bcdg {_gd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aada ,_fbde );if _aada ==10{break ;};};};};};const (_geb ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_bbf ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_fa ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
func (_agfda *textTable )logComposite (_abdgc string ){if !_edgc {return ;};_fd .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agfda ._ccce ,_agfda ._gddg ,_abdgc );_gd .Printf ("\u0025\u0035\u0073 \u007c","");
for _bfead :=0;_bfead < _agfda ._ccce ;_bfead ++{_gd .Printf ("\u0025\u0033\u0064 \u007c",_bfead );};_gd .Println ("");_gd .Printf ("\u0025\u0035\u0073 \u002b","");for _fceeg :=0;_fceeg < _agfda ._ccce ;_fceeg ++{_gd .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_gd .Println ("");for _gaeed :=0;_gaeed < _agfda ._gddg ;_gaeed ++{_gd .Printf ("\u0025\u0035\u0064 \u007c",_gaeed );for _eabea :=0;_eabea < _agfda ._ccce ;_eabea ++{_dfca ,_ :=_agfda ._bfdgbe [_geagf (_eabea ,_gaeed )].parasBBox ();_gd .Printf ("\u0025\u0033\u0064 \u007c",len (_dfca ));
};_gd .Println ("");};_fd .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_agfda ._ccce ,_agfda ._gddg ,_abdgc );_gd .Printf ("\u0025\u0035\u0073 \u007c","");for _fdde :=0;_fdde < _agfda ._ccce ;_fdde ++{_gd .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_fdde );
};_gd .Println ("");_gd .Printf ("\u0025\u0035\u0073 \u002b","");for _gdgf :=0;_gdgf < _agfda ._ccce ;_gdgf ++{_gd .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_gd .Println ("");for _fcbe :=0;_fcbe < _agfda ._gddg ;
_fcbe ++{_gd .Printf ("\u0025\u0035\u0064 \u007c",_fcbe );for _bebfg :=0;_bebfg < _agfda ._ccce ;_bebfg ++{_ddfeb ,_ :=_agfda ._bfdgbe [_geagf (_bebfg ,_fcbe )].parasBBox ();_gcceg :="";_dbgc :=_ddfeb .merge ();if _dbgc !=nil {_gcceg =_dbgc .text ();};
_gcceg =_gd .Sprintf ("\u0025\u0071",_bcbc (_gcceg ,12));_gcceg =_gcceg [1:len (_gcceg )-1];_gd .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_gcceg );};_gd .Println ("");};};func (_fgfd *textTable )putComposite (_dfdag ,_eaag int ,_feag paraList ,_afgea _ga .PdfRectangle ){if len (_feag )==0{_fd .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_gcfgc :=compositeCell {PdfRectangle :_afgea ,paraList :_feag };if _edgc {_gd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_dfdag ,_eaag ,_gcfgc .String ());
};_gcfgc .updateBBox ();_fgfd ._bfdgbe [_geagf (_dfdag ,_eaag )]=_gcfgc ;};func (_gcbc rectRuling )asRuling ()(*ruling ,bool ){_cgbef :=ruling {_gbcbd :_gcbc ._aagb ,Color :_gcbc .Color ,_dagg :_befe };switch _gcbc ._aagb {case _dafd :_cgbef ._eeac =0.5*(_gcbc .Llx +_gcbc .Urx );
_cgbef ._bdbd =_gcbc .Lly ;_cgbef ._deaad =_gcbc .Ury ;_eccf ,_efca :=_gcbc .checkWidth (_gcbc .Llx ,_gcbc .Urx );if !_efca {if _eddgb {_fd .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_gcbc );
};return nil ,false ;};_cgbef ._fcegf =_eccf ;case _agge :_cgbef ._eeac =0.5*(_gcbc .Lly +_gcbc .Ury );_cgbef ._bdbd =_gcbc .Llx ;_cgbef ._deaad =_gcbc .Urx ;_bgbc ,_ccdgc :=_gcbc .checkWidth (_gcbc .Lly ,_gcbc .Ury );if !_ccdgc {if _eddgb {_fd .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_gcbc );
};return nil ,false ;};_cgbef ._fcegf =_bgbc ;default:_fd .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_gcbc ._aagb );return nil ,false ;};return &_cgbef ,true ;};func (_gbdf lineRuling )asRuling ()(*ruling ,bool ){_afgca :=ruling {_gbcbd :_gbdf ._gfdg ,Color :_gbdf .Color ,_dagg :_ccde };
switch _gbdf ._gfdg {case _dafd :_afgca ._eeac =_gbdf .xMean ();_afgca ._bdbd =_f .Min (_gbdf ._degd .Y ,_gbdf ._bbfg .Y );_afgca ._deaad =_f .Max (_gbdf ._degd .Y ,_gbdf ._bbfg .Y );case _agge :_afgca ._eeac =_gbdf .yMean ();_afgca ._bdbd =_f .Min (_gbdf ._degd .X ,_gbdf ._bbfg .X );
_afgca ._deaad =_f .Max (_gbdf ._degd .X ,_gbdf ._bbfg .X );default:_fd .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_gbdf ._gfdg );return nil ,false ;};return &_afgca ,true ;};
func (_gcfga *textTable )isExportable ()bool {if _gcfga ._cbbba {return true ;};_cbcd :=func (_aaed int )bool {_ggecc :=_gcfga .get (0,_aaed );if _ggecc ==nil {return false ;};_cgaeb :=_ggecc .text ();_dfdbc :=_e .RuneCountInString (_cgaeb );_edgb :=_ddfag .MatchString (_cgaeb );
return _dfdbc <=1||_edgb ;};for _aaadg :=0;_aaadg < _gcfga ._gddg ;_aaadg ++{if !_cbcd (_aaadg ){return true ;};};return false ;};func (_afgb *textObject )setTextRenderMode (_fec int ){if _afgb ==nil {return ;};_afgb ._agb ._ffe =RenderMode (_fec );};

// String returns a description of `tm`.
func (_fgebg *textMark )String ()string {return _gd .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_fgebg .PdfRectangle ,_fgebg ._dfbea ,_fgebg ._fbbef );};

// Text gets the extracted text contained in `l`.
func (_dffg *list )Text ()string {_bfbb :=&_cc .Builder {};_agae :="";_fafc (_dffg ,_bfbb ,&_agae );return _bfbb .String ();};

// String returns a string descibing `i`.
func (_baadb gridTile )String ()string {_bcffd :=func (_adcdg bool ,_dfcfb string )string {if _adcdg {return _dfcfb ;};return "\u005f";};return _gd .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_baadb .PdfRectangle ,_bcffd (_baadb ._fega ,"\u004c"),_bcffd (_baadb ._cdcgd ,"\u0052"),_bcffd (_baadb ._begec ,"\u0042"),_bcffd (_baadb ._gefed ,"\u0054"));
};func _bcdb (_cbege map[float64 ]map[float64 ]gridTile )[]float64 {_gbdb :=make ([]float64 ,0,len (_cbege ));for _ddbcg :=range _cbege {_gbdb =append (_gbdb ,_ddbcg );};_ed .Float64s (_gbdb );_aafg :=len (_gbdb );for _bbdcg :=0;_bbdcg < _aafg /2;_bbdcg ++{_gbdb [_bbdcg ],_gbdb [_aafg -1-_bbdcg ]=_gbdb [_aafg -1-_bbdcg ],_gbdb [_bbdcg ];
};return _gbdb ;};type bounded interface{bbox ()_ga .PdfRectangle };func _fgbaa (_eegab int ,_acff func (int ,int )bool )[]int {_dfdc :=make ([]int ,_eegab );for _bdbgd :=range _dfdc {_dfdc [_bdbgd ]=_bdbgd ;};_ed .Slice (_dfdc ,func (_dgfgb ,_cgac int )bool {return _acff (_dfdc [_dgfgb ],_dfdc [_cgac ])});
return _dfdc ;};func (_cebe *subpath )last ()_fe .Point {return _cebe ._fag [len (_cebe ._fag )-1]};func _eeef (_gbca []*textLine ,_fgbad string ,_eef []*list )*list {return &list {_cfg :_gbca ,_bfc :_fgbad ,_gbgd :_eef };};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_gfge rulingList )findPrimSec (_fecc ,_adga float64 )*ruling {for _ ,_dabg :=range _gfge {if _dcaed (_dabg ._eeac -_fecc )&&_dabg ._bdbd -_efde <=_adga &&_adga <=_dabg ._deaad +_efde {return _dabg ;
};};return nil ;};func (_eccgd rulingList )sort (){_ed .Slice (_eccgd ,_eccgd .comp )};func _fbdd (_acbb []*textLine ,_edda map[float64 ][]*textLine )[]*list {_adddb :=_bfgb (_edda );_eceb :=[]*list {};if len (_adddb )==0{return _eceb ;};_fegg :=_adddb [0];
_deaf :=1;_fdbec :=_edda [_fegg ];for _aaba ,_dbdga :=range _fdbec {var _bfec float64 ;_bdgda :=[]*list {};_egba :=_dbdga ._acga ;_ddea :=-1.0;if _aaba < len (_fdbec )-1{_ddea =_fdbec [_aaba +1]._acga ;};if _deaf < len (_adddb ){_bdgda =_aebb (_acbb ,_edda ,_adddb ,_deaf ,_egba ,_ddea );
};_bfec =_ddea ;if len (_bdgda )> 0{_bgcb :=_bdgda [0];if len (_bgcb ._cfg )> 0{_bfec =_bgcb ._cfg [0]._acga ;};};_feda :=[]*textLine {_dbdga };_gaae :=_fccb (_dbdga ,_acbb ,_adddb ,_egba ,_bfec );_feda =append (_feda ,_gaae ...);_abbff :=_eeef (_feda ,"\u0062\u0075\u006c\u006c\u0065\u0074",_bdgda );
_abbff ._bcgc =_ebga (_feda ,"");_eceb =append (_eceb ,_abbff );};return _eceb ;};type rectRuling struct{_aagb rulingKind ;_cbab markKind ;_g .Color ;_ga .PdfRectangle ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_dfb *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_bd :=&imageExtractContext {_gccf :options };_cad :=_bd .extractContentStreamImages (_dfb ._ca ,_dfb ._dad );if _cad !=nil {return nil ,_cad ;};return &PageImages {Images :_bd ._bdd },nil ;
};func (_gage *wordBag )depthBand (_gffg ,_cbgg float64 )[]int {if len (_gage ._fced )==0{return nil ;};return _gage .depthRange (_gage .getDepthIdx (_gffg ),_gage .getDepthIdx (_cbgg ));};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_afgd PageText )Marks ()*TextMarkArray {return &TextMarkArray {_gbc :_afgd ._acg }};func (_ccfe *textTable )markCells (){for _bfecg :=0;_bfecg < _ccfe ._gddg ;_bfecg ++{for _cfcf :=0;_cfcf < _ccfe ._ccce ;_cfcf ++{_fgfg :=_ccfe .get (_cfcf ,_bfecg );
if _fgfg !=nil {_fgfg ._bgeg =true ;};};};};func (_adcd *shapesState )quadraticTo (_eeca ,_cbgf ,_faff ,_bcfd float64 ){if _cbdea {_fd .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_adcd .addPoint (_faff ,_bcfd );
};func (_efba *textPara )isAtom ()*textTable {_baeee :=_efba ;_gacd :=_efba ._beaeb ;_dcac :=_efba ._fcbb ;if _gacd .taken ()||_dcac .taken (){return nil ;};_dbbcg :=_gacd ._fcbb ;if _dbbcg .taken ()||_dbbcg !=_dcac ._beaeb {return nil ;};return _cbfd (_baeee ,_gacd ,_dcac ,_dbbcg );
};func _geagf (_edbce ,_cfcfb int )uint64 {return uint64 (_edbce )*0x1000000+uint64 (_cfcfb )};func _abcc (_dbba _ga .PdfRectangle )*ruling {return &ruling {_gbcbd :_dafd ,_eeac :_dbba .Urx ,_bdbd :_dbba .Lly ,_deaad :_dbba .Ury };};func (_efa *shapesState )cubicTo (_fdce ,_edadf ,_caba ,_bgfe ,_dgg ,_bdbe float64 ){if _cbdea {_fd .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_efa .addPoint (_dgg ,_bdbe );};func (_bgce *structTreeRoot )buildList (_fadca map[int ][]*textLine ,_eceg _eb .PdfObject )[]*list {if _bgce ==nil {_fd .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _ddfbc *structElement ;_ecda :=[]structElement {};if len (_bgce ._cffba )==1{_dcgg :=_bgce ._cffba [0]._eaad ;if _dcgg =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_dcgg =="\u0053\u0065\u0063\u0074"||_dcgg =="\u0050\u0061\u0072\u0074"||_dcgg =="\u0044\u0069\u0076"||_dcgg =="\u0041\u0072\u0074"{_ddfbc =&_bgce ._cffba [0];
};}else {_ddfbc =&structElement {_dafe :_bgce ._cffba ,_eaad :_bgce ._gbfd };};if _ddfbc ==nil {_fd .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_bccb :=range _ddfbc ._dafe {if _bccb ._eaad =="\u004c"{_ecda =append (_ecda ,_bccb );}else if _bccb ._eaad =="\u0054\u0061\u0062l\u0065"{_acgbc :=_deccb (_bccb );_ecda =append (_ecda ,_acgbc ...);};};_bcdaa :=_cagd (_ecda ,_fadca ,_eceg );
var _gfeb []*list ;for _ ,_effd :=range _bcdaa {_bbda :=_dbea (_effd );_gfeb =append (_gfeb ,_bbda ...);};return _gfeb ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_ga .PdfPage ,options *Options )(*Extractor ,error ){const _edg ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_gca ,_ebg :=page .GetAllContentStreams ();
if _ebg !=nil {return nil ,_ebg ;};_cae ,_ebc :=page .GetStructTreeRoot ();if !_ebc {_fd .Log .Info ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_bb :=page .GetContainingPdfObject ();_fbd ,_ebg :=page .GetMediaBox ();if _ebg !=nil {return nil ,_gd .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_ebg );
};_bf :=&Extractor {_ca :_gca ,_dad :page .Resources ,_gee :*_fbd ,_gc :page .CropBox ,_cbd :map[string ]fontEntry {},_fb :map[string ]textResult {},_bc :options ,_gcc :_cae ,_gab :_bb };if _bf ._gee .Llx > _bf ._gee .Urx {_fd .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_bf ._gee );
_bf ._gee .Llx ,_bf ._gee .Urx =_bf ._gee .Urx ,_bf ._gee .Llx ;};if _bf ._gee .Lly > _bf ._gee .Ury {_fd .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_bf ._gee );
_bf ._gee .Lly ,_bf ._gee .Ury =_bf ._gee .Ury ,_bf ._gee .Lly ;};_cb .TrackUse (_edg );return _bf ,nil ;};func (_ccgf *textTable )getRight ()paraList {_bfaac :=make (paraList ,_ccgf ._gddg );for _feccb :=0;_feccb < _ccgf ._gddg ;_feccb ++{_dffb :=_ccgf .get (_ccgf ._ccce -1,_feccb )._beaeb ;
if _dffb .taken (){return nil ;};_bfaac [_feccb ]=_dffb ;};for _ceeac :=0;_ceeac < _ccgf ._gddg -1;_ceeac ++{if _bfaac [_ceeac ]._fcbb !=_bfaac [_ceeac +1]{return nil ;};};return _bfaac ;};func _bcbc (_afaac string ,_ddgeg int )string {if len (_afaac )< _ddgeg {return _afaac ;
};return _afaac [:_ddgeg ];};func _gdd (_afa []Font ,_eaa string )bool {for _ ,_fbg :=range _afa {if _fbg .FontName ==_eaa {return true ;};};return false ;};func _eafbd (_acgg map[int ][]float64 ){if len (_acgg )<=1{return ;};_ccec :=_ecgee (_acgg );if _edgc {_fd .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_ccec );
};var _facce ,_feeb int ;for _facce ,_feeb =range _ccec {if _acgg [_feeb ]!=nil {break ;};};for _bcfa ,_fggg :=range _ccec [_facce :]{_fbda :=_acgg [_fggg ];if _fbda ==nil {continue ;};if _edgc {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_facce +_bcfa ,_feeb ,_fggg );
};_dadc :=_acgg [_fggg ];if _dadc [len (_dadc )-1]> _fbda [0]{_dadc [len (_dadc )-1]=_fbda [0];_acgg [_feeb ]=_dadc ;};_feeb =_fggg ;};};func (_aecf *textTable )reduce ()*textTable {_fbfd :=make ([]int ,0,_aecf ._gddg );_cfggb :=make ([]int ,0,_aecf ._ccce );
for _faea :=0;_faea < _aecf ._gddg ;_faea ++{if !_aecf .emptyCompositeRow (_faea ){_fbfd =append (_fbfd ,_faea );};};for _cdfe :=0;_cdfe < _aecf ._ccce ;_cdfe ++{if !_aecf .emptyCompositeColumn (_cdfe ){_cfggb =append (_cfggb ,_cdfe );};};if len (_fbfd )==_aecf ._gddg &&len (_cfggb )==_aecf ._ccce {return _aecf ;
};_gdfc :=textTable {_cbbba :_aecf ._cbbba ,_ccce :len (_cfggb ),_gddg :len (_fbfd ),_aaee :make (map[uint64 ]*textPara ,len (_cfggb )*len (_fbfd ))};if _edgc {_fd .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_aecf ._ccce ,_aecf ._gddg ,len (_cfggb ),len (_fbfd ));
_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_cfggb );_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_fbfd );};for _bfbdd ,_cadb :=range _fbfd {for _ggefb ,_eeggca :=range _cfggb {_ffdce ,_bffcec :=_aecf .getComposite (_eeggca ,_cadb );
if _ffdce ==nil {continue ;};if _edgc {_gd .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_ggefb ,_bfbdd ,_eeggca ,_cadb ,_bcbc (_ffdce .merge ().text (),50));};_gdfc .putComposite (_ggefb ,_bfbdd ,_ffdce ,_bffcec );
};};return &_gdfc ;};type gridTile struct{_ga .PdfRectangle ;_gefed ,_fega ,_begec ,_cdcgd bool ;};func (_dbgff *textTable )compositeRowCorridors ()map[int ][]float64 {_ebeaga :=make (map[int ][]float64 ,_dbgff ._gddg );if _edgc {_fd .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_dbgff ._gddg );
};for _cegfff :=1;_cegfff < _dbgff ._gddg ;_cegfff ++{var _gbae []compositeCell ;for _fffce :=0;_fffce < _dbgff ._ccce ;_fffce ++{if _bfff ,_acfee :=_dbgff ._bfdgbe [_geagf (_fffce ,_cegfff )];_acfee {_gbae =append (_gbae ,_bfff );};};if len (_gbae )==0{continue ;
};_ggefe :=_edecc (_gbae );_ebeaga [_cegfff ]=_ggefe ;if _edgc {_gd .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_cegfff ,_ggefe );};};return _ebeaga ;};func (_fdcce paraList )addNeighbours (){_edba :=func (_bgbb []int ,_adfae *textPara )([]*textPara ,[]*textPara ){_adeda :=make ([]*textPara ,0,len (_bgbb )-1);
_adagb :=make ([]*textPara ,0,len (_bgbb )-1);for _ ,_gbaef :=range _bgbb {_bbgbb :=_fdcce [_gbaef ];if _bbgbb .Urx <=_adfae .Llx {_adeda =append (_adeda ,_bbgbb );}else if _bbgbb .Llx >=_adfae .Urx {_adagb =append (_adagb ,_bbgbb );};};return _adeda ,_adagb ;
};_efdcg :=func (_beagf []int ,_eegae *textPara )([]*textPara ,[]*textPara ){_adeeg :=make ([]*textPara ,0,len (_beagf )-1);_dfac :=make ([]*textPara ,0,len (_beagf )-1);for _ ,_cebb :=range _beagf {_bagf :=_fdcce [_cebb ];if _bagf .Ury <=_eegae .Lly {_dfac =append (_dfac ,_bagf );
}else if _bagf .Lly >=_eegae .Ury {_adeeg =append (_adeeg ,_bagf );};};return _adeeg ,_dfac ;};_adbgc :=_fdcce .yNeighbours (_facc );for _ ,_cfbbgf :=range _fdcce {_gdbfg :=_adbgc [_cfbbgf ];if len (_gdbfg )==0{continue ;};_gfbfa ,_ebaec :=_edba (_gdbfg ,_cfbbgf );
if len (_gfbfa )==0&&len (_ebaec )==0{continue ;};if len (_gfbfa )> 0{_bdeae :=_gfbfa [0];for _ ,_gbccg :=range _gfbfa [1:]{if _gbccg .Urx >=_bdeae .Urx {_bdeae =_gbccg ;};};for _ ,_gbcbde :=range _gfbfa {if _gbcbde !=_bdeae &&_gbcbde .Urx > _bdeae .Llx {_bdeae =nil ;
break ;};};if _bdeae !=nil &&_cecf (_cfbbgf .PdfRectangle ,_bdeae .PdfRectangle ){_cfbbgf ._aafd =_bdeae ;};};if len (_ebaec )> 0{_dcdda :=_ebaec [0];for _ ,_dbggb :=range _ebaec [1:]{if _dbggb .Llx <=_dcdda .Llx {_dcdda =_dbggb ;};};for _ ,_dbbf :=range _ebaec {if _dbbf !=_dcdda &&_dbbf .Llx < _dcdda .Urx {_dcdda =nil ;
break ;};};if _dcdda !=nil &&_cecf (_cfbbgf .PdfRectangle ,_dcdda .PdfRectangle ){_cfbbgf ._beaeb =_dcdda ;};};};_adbgc =_fdcce .xNeighbours (_ffcb );for _ ,_gagc :=range _fdcce {_cbfdf :=_adbgc [_gagc ];if len (_cbfdf )==0{continue ;};_gcefa ,_ffagf :=_efdcg (_cbfdf ,_gagc );
if len (_gcefa )==0&&len (_ffagf )==0{continue ;};if len (_ffagf )> 0{_abbb :=_ffagf [0];for _ ,_afbce :=range _ffagf [1:]{if _afbce .Ury >=_abbb .Ury {_abbb =_afbce ;};};for _ ,_aagea :=range _ffagf {if _aagea !=_abbb &&_aagea .Ury > _abbb .Lly {_abbb =nil ;
break ;};};if _abbb !=nil &&_cgegf (_gagc .PdfRectangle ,_abbb .PdfRectangle ){_gagc ._fcbb =_abbb ;};};if len (_gcefa )> 0{_abgbd :=_gcefa [0];for _ ,_faed :=range _gcefa [1:]{if _faed .Lly <=_abgbd .Lly {_abgbd =_faed ;};};for _ ,_ecdb :=range _gcefa {if _ecdb !=_abgbd &&_ecdb .Lly < _abgbd .Ury {_abgbd =nil ;
break ;};};if _abgbd !=nil &&_cgegf (_gagc .PdfRectangle ,_abgbd .PdfRectangle ){_gagc ._fecec =_abgbd ;};};};for _ ,_fcfa :=range _fdcce {if _fcfa ._aafd !=nil &&_fcfa ._aafd ._beaeb !=_fcfa {_fcfa ._aafd =nil ;};if _fcfa ._fecec !=nil &&_fcfa ._fecec ._fcbb !=_fcfa {_fcfa ._fecec =nil ;
};if _fcfa ._beaeb !=nil &&_fcfa ._beaeb ._aafd !=_fcfa {_fcfa ._beaeb =nil ;};if _fcfa ._fcbb !=nil &&_fcfa ._fcbb ._fecec !=_fcfa {_fcfa ._fcbb =nil ;};};};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_ga .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_ga .PdfFontDescriptor ;};func (_deae *wordBag )minDepth ()float64 {return _deae ._ecb -(_deae .Ury -_deae ._gegb )};

// TableInfo gets table information of the textmark `tm`.
func (_baf *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_baf ._febf {return nil ,nil ;};_fddg :=_baf ._cbbb ;_agbb :=_fddg .getCellInfo (*_baf );return _fddg ,_agbb ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);
func _gdagbg (_cdg func (*wordBag ,*textWord ,float64 )bool ,_ddff float64 )func (*wordBag ,*textWord )bool {return func (_afdb *wordBag ,_dgebc *textWord )bool {return _cdg (_afdb ,_dgebc ,_ddff )};};type textPara struct{_ga .PdfRectangle ;_agfgg _ga .PdfRectangle ;
_afgcbe []*textLine ;_fcea *textTable ;_bgeg bool ;_aaef bool ;_aafd *textPara ;_beaeb *textPara ;_fecec *textPara ;_fcbb *textPara ;_gceag []list ;};func (_ffab *textTable )bbox ()_ga .PdfRectangle {return _ffab .PdfRectangle };func _cagd (_bdgb []structElement ,_ebea map[int ][]*textLine ,_caac _eb .PdfObject )[]*list {_cbdd :=[]*list {};
for _ ,_dcabd :=range _bdgb {_fbfg :=_dcabd ._dafe ;_accg :=int (_dcabd ._fdeac );_egeg :=_dcabd ._eaad ;_cbdead :=[]*textLine {};_abcb :=[]*list {};_aaf :=_dcabd ._egfd ;_begg ,_cda :=(_aaf .(*_eb .PdfObjectReference ));if !_cda {_fd .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _accg !=-1&&_begg !=nil {if _bgff ,_eega :=_ebea [_accg ];_eega {if _edeeg ,_gaed :=_caac .(*_eb .PdfIndirectObject );_gaed {_gadag :=_edeeg .PdfObjectReference ;if _be .DeepEqual (*_begg ,_gadag ){_cbdead =_bgff ;};};};};if _fbfg !=nil {_abcb =_cagd (_fbfg ,_ebea ,_caac );
};_eecda :=_eeef (_cbdead ,_egeg ,_abcb );_cbdd =append (_cbdd ,_eecda );};return _cbdd ;};

// Len returns the number of TextMarks in `ma`.
func (_ebbe *TextMarkArray )Len ()int {if _ebbe ==nil {return 0;};return len (_ebbe ._gbc );};func (_bdgf *shapesState )drawRectangle (_abgb ,_afab ,_gfbd ,_gfed float64 ){if _cbdea {_cfbbg :=_bdgf .devicePoint (_abgb ,_afab );_gddf :=_bdgf .devicePoint (_abgb +_gfbd ,_afab +_gfed );
_eagf :=_ga .PdfRectangle {Llx :_cfbbg .X ,Lly :_cfbbg .Y ,Urx :_gddf .X ,Ury :_gddf .Y };_fd .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_eagf );};_bdgf .newSubPath ();_bdgf .moveTo (_abgb ,_afab );
_bdgf .lineTo (_abgb +_gfbd ,_afab );_bdgf .lineTo (_abgb +_gfbd ,_afab +_gfed );_bdgf .lineTo (_abgb ,_afab +_gfed );_bdgf .closePath ();};func (_ebeag paraList )sortTopoOrder (){_bffge :=_ebeag .topoOrder ();_ebeag .reorder (_bffge )};func (_gecg paraList )topoOrder ()[]int {if _eddg {_fd .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_cgdf :=len (_gecg );_beca :=make ([]bool ,_cgdf );_dgcba :=make ([]int ,0,_cgdf );_fgde :=_gecg .llyOrdering ();var _bdddb func (_gcffa int );_bdddb =func (_dedef int ){_beca [_dedef ]=true ;for _eefc :=0;_eefc < _cgdf ;_eefc ++{if !_beca [_eefc ]{if _gecg .readBefore (_fgde ,_dedef ,_eefc ){_bdddb (_eefc );
};};};_dgcba =append (_dgcba ,_dedef );};for _gfbf :=0;_gfbf < _cgdf ;_gfbf ++{if !_beca [_gfbf ]{_bdddb (_gfbf );};};return _gcfgb (_dgcba );};func _feaa (_bfedb string ,_gedbc []rulingList ){_fd .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_gedbc ),_bfedb );
for _ffed ,_ebfe :=range _gedbc {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ffed ,_ebfe .String ());};};func (_cegc *textObject )setTextLeading (_aab float64 ){if _cegc ==nil {return ;};_cegc ._agb ._aaag =_aab ;};func (_bggg *stateStack )size ()int {return len (*_bggg )};
type rulingKind int ;func (_ddab *textLine )appendWord (_adb *textWord ){_ddab ._fgbge =append (_ddab ._fgbge ,_adb );_ddab .PdfRectangle =_aefc (_ddab .PdfRectangle ,_adb .PdfRectangle );if _adb ._febea > _ddab ._dbcc {_ddab ._dbcc =_adb ._febea ;};if _adb ._gdae > _ddab ._acga {_ddab ._acga =_adb ._gdae ;
};};func _dcdc (_eabeg ,_gbcd _ga .PdfRectangle )bool {return _cgegf (_eabeg ,_gbcd )&&_cecf (_eabeg ,_gbcd )};func _ccga (_bfad ,_decad *textPara )bool {return _cgegf (_bfad ._agfgg ,_decad ._agfgg )};

// Append appends `mark` to the mark array.
func (_aded *TextMarkArray )Append (mark TextMark ){_aded ._gbc =append (_aded ._gbc ,mark )};var _da =false ;func (_gefb rulingList )splitSec ()[]rulingList {_ed .Slice (_gefb ,func (_gbee ,_dbccc int )bool {_ccgb ,_affd :=_gefb [_gbee ],_gefb [_dbccc ];
if _ccgb ._bdbd !=_affd ._bdbd {return _ccgb ._bdbd < _affd ._bdbd ;};return _ccgb ._deaad < _affd ._deaad ;});_ceag :=make (map[*ruling ]struct{},len (_gefb ));_gddb :=func (_egbaf *ruling )rulingList {_eagae :=rulingList {_egbaf };_ceag [_egbaf ]=struct{}{};
for _ ,_ebff :=range _gefb {if _ ,_egcf :=_ceag [_ebff ];_egcf {continue ;};for _ ,_afga :=range _eagae {if _ebff .alignsSec (_afga ){_eagae =append (_eagae ,_ebff );_ceag [_ebff ]=struct{}{};break ;};};};return _eagae ;};_egaf :=[]rulingList {_gddb (_gefb [0])};
for _ ,_aadge :=range _gefb [1:]{if _ ,_dccc :=_ceag [_aadge ];_dccc {continue ;};_egaf =append (_egaf ,_gddb (_aadge ));};return _egaf ;};func _cdcd (_gfce ,_fgad _fe .Point )rulingKind {_cefcd :=_f .Abs (_gfce .X -_fgad .X );_ggee :=_f .Abs (_gfce .Y -_fgad .Y );
return _cdfc (_cefcd ,_ggee ,_eegg );};func (_addaf *wordBag )empty (_afecf int )bool {_ ,_ddec :=_addaf ._fced [_afecf ];return !_ddec };func (_efgdc *textLine )markWordBoundaries (){_bbbg :=_acb *_efgdc ._dbcc ;for _gega ,_gede :=range _efgdc ._fgbge [1:]{if _becc (_gede ,_efgdc ._fgbge [_gega ])>=_bbbg {_gede ._cggc =true ;
};};};

// String returns a description of `k`.
func (_ddga rulingKind )String ()string {_baed ,_bfaf :=_gfdd [_ddga ];if !_bfaf {return _gd .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_ddga );};return _baed ;};func _edecc (_agda []compositeCell )[]float64 {var _ffag []*textLine ;
_bebf :=0;for _ ,_dcggd :=range _agda {_bebf +=len (_dcggd .paraList );_ffag =append (_ffag ,_dcggd .lines ()...);};_ed .Slice (_ffag ,func (_ddge ,_fcece int )bool {_cgfdd ,_faeg :=_ffag [_ddge ],_ffag [_fcece ];_eadaf ,_ebab :=_cgfdd ._acga ,_faeg ._acga ;
if !_dcaed (_eadaf -_ebab ){return _eadaf < _ebab ;};return _cgfdd .Llx < _faeg .Llx ;});if _edgc {_gd .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_bebf ,len (_ffag ));
for _egef ,_cabc :=range _ffag {_gd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_egef ,_cabc );};};var _aaff []float64 ;_bbfcc :=_ffag [0];var _aaagg [][]*textLine ;_efdc :=[]*textLine {_bbfcc };for _bfeaa ,_caffc :=range _ffag [1:]{if _caffc .Ury < _bbfcc .Lly {_eceea :=0.5*(_caffc .Ury +_bbfcc .Lly );
if _edgc {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_bfeaa ,_caffc .Ury ,_bbfcc .Lly ,_eceea ,_bbfcc ,_caffc );
};_aaff =append (_aaff ,_eceea );_aaagg =append (_aaagg ,_efdc );_efdc =nil ;};_efdc =append (_efdc ,_caffc );if _caffc .Lly < _bbfcc .Lly {_bbfcc =_caffc ;};};if len (_efdc )> 0{_aaagg =append (_aaagg ,_efdc );};if _edgc {_gd .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_aaff );
};if _edgc {_fd .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_agda ));for _fgee ,_afbc :=range _agda {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgee ,_afbc );};_fd .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_aaagg ));
for _gbdfb ,_bafb :=range _aaagg {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_gbdfb ,len (_bafb ));for _cebeg ,_egege :=range _bafb {_gd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cebeg ,_egege );};};};_ccgg :=true ;
for _gcce ,_effae :=range _aaagg {_cgbdg :=true ;for _facb ,_bfdcc :=range _agda {if _edgc {_gd .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_gcce ,len (_aaagg ),_facb ,len (_agda ),_bfdcc );
};if !_bfdcc .hasLines (_effae ){if _edgc {_gd .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_gcce ,len (_aaagg ),_facb ,len (_agda ));
};_cgbdg =false ;break ;};};if !_cgbdg {_ccgg =false ;break ;};};if !_ccgg {if _edgc {_fd .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_aaff =nil ;};if _edgc &&_aaff !=nil {_gd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_aaff );};return _aaff ;};
func (_edce rulingList )asTiling ()gridTiling {if _babf {_fd .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_edce ));
};for _gadbd ,_fbbf :=range _edce [1:]{_faad :=_edce [_gadbd ];if _faad .alignsPrimary (_fbbf )&&_faad .alignsSec (_fbbf ){_fd .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_fbbf ,_faad );
};};_edce .sortStrict ();_edce .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_bggfgg ,_affe :=_edce .vertsHorzs ();_edeeb :=_bggfgg .primaries ();_ffebf :=_affe .primaries ();_bddg :=len (_edeeb )-1;_ffca :=len (_ffebf )-1;if _bddg ==0||_ffca ==0{return gridTiling {};
};_cadeg :=_ga .PdfRectangle {Llx :_edeeb [0],Urx :_edeeb [_bddg ],Lly :_ffebf [0],Ury :_ffebf [_ffca ]};if _babf {_fd .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_bggfgg ));
for _abbfc ,_eebe :=range _bggfgg {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abbfc ,_eebe );};_fd .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_affe ));
for _ebcgg ,_dbgg :=range _affe {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ebcgg ,_dbgg );};_fd .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_bddg ,_ffca ,_edeeb ,_ffebf );
};_cegfd :=make ([]gridTile ,_bddg *_ffca );for _eaga :=_ffca -1;_eaga >=0;_eaga --{_bbdf :=_ffebf [_eaga ];_ecae :=_ffebf [_eaga +1];for _aedcg :=0;_aedcg < _bddg ;_aedcg ++{_baafb :=_edeeb [_aedcg ];_eefcf :=_edeeb [_aedcg +1];_bfdgb :=_bggfgg .findPrimSec (_baafb ,_bbdf );
_acgaf :=_bggfgg .findPrimSec (_eefcf ,_bbdf );_dddf :=_affe .findPrimSec (_bbdf ,_baafb );_fcbc :=_affe .findPrimSec (_ecae ,_baafb );_bfcd :=_ga .PdfRectangle {Llx :_baafb ,Urx :_eefcf ,Lly :_bbdf ,Ury :_ecae };_bdbge :=_bfcf (_bfcd ,_bfdgb ,_acgaf ,_dddf ,_fcbc );
_cegfd [_eaga *_bddg +_aedcg ]=_bdbge ;if _babf {_gd .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_aedcg ,_eaga ,_bdbge .String (),_bdbge .Width (),_bdbge .Height ());
};};};if _babf {_fd .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cadeg );
};_dbbdc :=make ([]map[float64 ]gridTile ,_ffca );for _aaeaf :=_ffca -1;_aaeaf >=0;_aaeaf --{if _babf {_gd .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_aaeaf );};_dbbdc [_aaeaf ]=make (map[float64 ]gridTile ,_bddg );for _ecga :=0;_ecga < _bddg ;
_ecga ++{_fegaa :=_cegfd [_aaeaf *_bddg +_ecga ];if _babf {_gd .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ecga ,_fegaa );};if !_fegaa ._fega {continue ;};_cbbc :=_ecga ;for _effc :=_ecga +1;!_fegaa ._cdcgd &&_effc < _bddg ;
_effc ++{_gagee :=_cegfd [_aaeaf *_bddg +_effc ];_fegaa .Urx =_gagee .Urx ;_fegaa ._gefed =_fegaa ._gefed ||_gagee ._gefed ;_fegaa ._begec =_fegaa ._begec ||_gagee ._begec ;_fegaa ._cdcgd =_gagee ._cdcgd ;if _babf {_gd .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_effc ,_gagee ,_fegaa );
};_cbbc =_effc ;};if _babf {_gd .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_ecga ,_cbbc ,_fegaa );};_ecga =_cbbc ;_dbbdc [_aaeaf ][_fegaa .Llx ]=_fegaa ;};};_fbbfb :=make (map[float64 ]map[float64 ]gridTile ,_ffca );
_gbbd :=make (map[float64 ]map[float64 ]struct{},_ffca );for _cbec :=_ffca -1;_cbec >=0;_cbec --{_afddg :=_cegfd [_cbec *_bddg ].Lly ;_fbbfb [_afddg ]=make (map[float64 ]gridTile ,_bddg );_gbbd [_afddg ]=make (map[float64 ]struct{},_bddg );};if _babf {_fd .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_cadeg );
};for _ccbea :=_ffca -1;_ccbea >=0;_ccbea --{_ddda :=_cegfd [_ccbea *_bddg ].Lly ;_cafb :=_dbbdc [_ccbea ];if _babf {_gd .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_ccbea );};for _ ,_agfb :=range _egagf (_cafb ){if _ ,_bbbc :=_gbbd [_ddda ][_agfb ];
_bbbc {continue ;};_eecdd :=_cafb [_agfb ];if _babf {_gd .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_eecdd .String ());};for _febff :=_ccbea -1;_febff >=0;_febff --{if _eecdd ._begec {break ;};_cfdbc :=_dbbdc [_febff ];_egcag ,_ceacf :=_cfdbc [_agfb ];
if !_ceacf {break ;};if _egcag .Urx !=_eecdd .Urx {break ;};_eecdd ._begec =_egcag ._begec ;_eecdd .Lly =_egcag .Lly ;if _babf {_gd .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_egcag .String (),_eecdd .String ());
};_gbbd [_egcag .Lly ][_egcag .Llx ]=struct{}{};};if _ccbea ==0{_eecdd ._begec =true ;};if _eecdd .complete (){_fbbfb [_ddda ][_agfb ]=_eecdd ;};};};_bfdbd :=gridTiling {PdfRectangle :_cadeg ,_bbba :_fcfb (_fbbfb ),_adfad :_bcdb (_fbbfb ),_gcdb :_fbbfb };
_bfdbd .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _bfdbd ;};func (_dca *imageExtractContext )extractInlineImage (_ebca *_ce .ContentStreamInlineImage ,_fbc _ce .GraphicsState ,_efc *_ga .PdfPageResources )error {_gb ,_adg :=_ebca .ToImage (_efc );
if _adg !=nil {return _adg ;};_fca ,_adg :=_ebca .GetColorSpace (_efc );if _adg !=nil {return _adg ;};if _fca ==nil {_fca =_ga .NewPdfColorspaceDeviceGray ();};_cac ,_adg :=_fca .ImageToRGB (*_gb );if _adg !=nil {return _adg ;};_afg :=ImageMark {Image :&_cac ,Width :_fbc .CTM .ScalingFactorX (),Height :_fbc .CTM .ScalingFactorY (),Angle :_fbc .CTM .Angle ()};
_afg .X ,_afg .Y =_fbc .CTM .Translation ();_dca ._bdd =append (_dca ._bdd ,_afg );_dca ._ae ++;return nil ;};func (_cccbg rulingList )sortStrict (){_ed .Slice (_cccbg ,func (_cabdb ,_gbeb int )bool {_bgcf ,_acebg :=_cccbg [_cabdb ],_cccbg [_gbeb ];_efcc ,_fcge :=_bgcf ._gbcbd ,_acebg ._gbcbd ;
if _efcc !=_fcge {return _efcc > _fcge ;};_bdab ,_bdeda :=_bgcf ._eeac ,_acebg ._eeac ;if !_dcaed (_bdab -_bdeda ){return _bdab < _bdeda ;};_bdab ,_bdeda =_bgcf ._bdbd ,_acebg ._bdbd ;if _bdab !=_bdeda {return _bdab < _bdeda ;};return _bgcf ._deaad < _acebg ._deaad ;
});};func _fedgg (_gfab _ga .PdfRectangle ,_bcde []*textLine )*textPara {return &textPara {PdfRectangle :_gfab ,_afgcbe :_bcde };};func (_fabbe gridTiling )complete ()bool {for _ ,_cedb :=range _fabbe ._gcdb {for _ ,_egfg :=range _cedb {if !_egfg .complete (){return false ;
};};};return true ;};func (_eacb lineRuling )xMean ()float64 {return 0.5*(_eacb ._degd .X +_eacb ._bbfg .X )};func _fcfb (_deggc map[float64 ]map[float64 ]gridTile )[]float64 {_bdec :=make ([]float64 ,0,len (_deggc ));_fbece :=make (map[float64 ]struct{},len (_deggc ));
for _ ,_cege :=range _deggc {for _geca :=range _cege {if _ ,_aecec :=_fbece [_geca ];_aecec {continue ;};_bdec =append (_bdec ,_geca );_fbece [_geca ]=struct{}{};};};_ed .Float64s (_bdec );return _bdec ;};func (_cdeeb paraList )extractTables (_dcdd []gridTiling )paraList {if _edgc {_fd .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_cdeeb ));
};if len (_cdeeb )< _begaf {return _cdeeb ;};_acfe :=_cdeeb .findTables (_dcdd );if _edgc {_fd .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_acfe ));
for _ggbcf ,_cbcb :=range _acfe {_cbcb .log (_gd .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_ggbcf ));};};return _cdeeb .applyTables (_acfe );};func (_gaagg paraList )log (_fbggbd string ){if !_eddg {return ;};_fd .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_fbggbd ,len (_gaagg ));
for _fcdgg ,_bffce :=range _gaagg {if _bffce ==nil {continue ;};_ebdff :=_bffce .text ();_bdcf :="\u0020\u0020";if _bffce ._fcea !=nil {_bdcf =_gd .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_bffce ._fcea ._ccce ,_bffce ._fcea ._gddg );};_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_fcdgg ,_bffce .PdfRectangle ,_bdcf ,_bcbc (_ebdff ,50));
};};

// Text returns the extracted page text.
func (_fcfe PageText )Text ()string {return _fcfe ._ddfb };func (_egec *textPara )writeCellText (_dbdfg _c .Writer ){for _gcccd ,_bfda :=range _egec ._afgcbe {_fcdff :=_bfda .text ();_cabf :=_ecge &&_bfda .endsInHyphen ()&&_gcccd !=len (_egec ._afgcbe )-1;
if _cabf {_fcdff =_ecebe (_fcdff );};_dbdfg .Write ([]byte (_fcdff ));if !(_cabf ||_gcccd ==len (_egec ._afgcbe )-1){_dbdfg .Write ([]byte (_aecgg (_bfda ._acga ,_egec ._afgcbe [_gcccd +1]._acga )));};};};func (_cecbe rulingList )tidied (_baag string )rulingList {_fdad :=_cecbe .removeDuplicates ();
_fdad .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_cabec :=_fdad .snapToGroups ();if _cabec ==nil {return nil ;};_cabec .sort ();if _cgab {_fd .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_baag ,len (_cecbe ),len (_fdad ),len (_cabec ));
};_cabec .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _cabec ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_ebfca *textWord )toTextMarks (_edecf *int )[]TextMark {var _fffe []TextMark ;for _ ,_agcg :=range _ebfca ._cefce {_fffe =_bceca (_fffe ,_edecf ,_agcg .ToTextMark ());};return _fffe ;};type stateStack []*textState ;func (_aef *textObject )checkOp (_ace *_ce .ContentStreamOperation ,_fcaf int ,_edf bool )(_bbe bool ,_gfd error ){if _aef ==nil {var _dda []_eb .PdfObject ;
if _fcaf > 0{_dda =_ace .Params ;if len (_dda )> _fcaf {_dda =_dda [:_fcaf ];};};_fd .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_ace .Operand ,_dda );
};if _fcaf >=0{if len (_ace .Params )!=_fcaf {if _edf {_gfd =_a .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_ace .Operand ,_fcaf ,len (_ace .Params ),_ace .Params );
return false ,_gfd ;};};return true ,nil ;};type event struct{_ceeab float64 ;_bfae bool ;_cebae int ;};const _baaf =10;func (_aee *textObject )moveLP (_ccfa ,_baef float64 ){_aee ._cgb .Concat (_fe .NewMatrix (1,0,0,1,_ccfa ,_baef ));_aee ._eabe =_aee ._cgb ;
};func _fage (_gggbe _ga .PdfRectangle ,_adee bounded )float64 {return _gggbe .Ury -_adee .bbox ().Lly };

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_ca string ;_dad *_ga .PdfPageResources ;_gee _ga .PdfRectangle ;_gc *_ga .PdfRectangle ;_cbd map[string ]fontEntry ;_fb map[string ]textResult ;_geeg int64 ;_dd int ;_bc *Options ;_gcc *_eb .PdfObject ;_gab _eb .PdfObject ;};func _bgca (_cfec _fe .Point )*subpath {return &subpath {_fag :[]_fe .Point {_cfec }}};
func (_degb *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_gfg :=make (map[int ]map[*textWord ]struct{},len (_degb ._fced ));for _bfbd :=range _degb ._fced {_gfg [_bfbd ]=make (map[*textWord ]struct{});};return _gfg ;};func (_dde *stateStack )pop ()*textState {if _dde .empty (){return nil ;
};_cfe :=*(*_dde )[len (*_dde )-1];*_dde =(*_dde )[:len (*_dde )-1];return &_cfe ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ga .PdfPageResources )(*Extractor ,error ){const _fdg ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_ddg :=&Extractor {_ca :contents ,_dad :resources ,_cbd :map[string ]fontEntry {},_fb :map[string ]textResult {}};
_cb .TrackUse (_fdg );return _ddg ,nil ;};func (_fcd *imageExtractContext )processOperand (_cee *_ce .ContentStreamOperation ,_bde _ce .GraphicsState ,_cbe *_ga .PdfPageResources )error {if _cee .Operand =="\u0042\u0049"&&len (_cee .Params )==1{_bfb ,_bef :=_cee .Params [0].(*_ce .ContentStreamInlineImage );
if !_bef {return nil ;};if _ef ,_gde :=_eb .GetBoolVal (_bfb .ImageMask );_gde {if _ef &&!_fcd ._gccf .IncludeInlineStencilMasks {return nil ;};};return _fcd .extractInlineImage (_bfb ,_bde ,_cbe );}else if _cee .Operand =="\u0044\u006f"&&len (_cee .Params )==1{_eab ,_cd :=_eb .GetName (_cee .Params [0]);
if !_cd {_fd .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _beg ;};_ ,_fce :=_cbe .GetXObjectByName (*_eab );switch _fce {case _ga .XObjectTypeImage :return _fcd .extractXObjectImage (_eab ,_bde ,_cbe );case _ga .XObjectTypeForm :return _fcd .extractFormImages (_eab ,_bde ,_cbe );
};};return nil ;};func _fccb (_bffg *textLine ,_bgga []*textLine ,_fbbed []float64 ,_dbdf ,_ddcd float64 )[]*textLine {_bgggf :=[]*textLine {};for _ ,_gggbc :=range _bgga {if _gggbc ._acga >=_dbdf {if _ddcd !=-1&&_gggbc ._acga < _ddcd {if _gggbc .text ()!=_bffg .text (){if _f .Round (_gggbc .Llx )< _f .Round (_bffg .Llx ){break ;
};_bgggf =append (_bgggf ,_gggbc );};}else if _ddcd ==-1{if _gggbc ._acga ==_bffg ._acga {if _gggbc .text ()!=_bffg .text (){_bgggf =append (_bgggf ,_gggbc );};continue ;};_fdeg :=_gggf (_bffg ,_bgga ,_fbbed );if _fdeg !=-1&&_gggbc ._acga <=_fdeg {_bgggf =append (_bgggf ,_gggbc );
};};};};return _bgggf ;};func _gcegc (_cfffc []_eb .PdfObject )(_agdce ,_beagff float64 ,_edea error ){if len (_cfffc )!=2{return 0,0,_gd .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_cfffc ));
};_adacc ,_edea :=_eb .GetNumbersAsFloat (_cfffc );if _edea !=nil {return 0,0,_edea ;};return _adacc [0],_adacc [1],nil ;};type textState struct{_bgf float64 ;_fdbg float64 ;_dfbb float64 ;_aaag float64 ;_cede float64 ;_ffe RenderMode ;_cgfg float64 ;_dcce *_ga .PdfFont ;
_begb _ga .PdfRectangle ;_febb int ;_faf int ;};type structTreeRoot struct{_cffba []structElement ;_gbfd string ;};func (_fdbc *textPara )getListLines ()[]*textLine {var _bac []*textLine ;_cbbf :=_cegfa (_fdbc ._afgcbe );for _ ,_aadf :=range _fdbc ._afgcbe {_gbgf :=_aadf ._fgbge [0]._eaedb [0];
if _ecfb (_gbgf ){_bac =append (_bac ,_aadf );};};_bac =append (_bac ,_cbbf ...);return _bac ;};func (_daec paraList )llyRange (_gcfg []int ,_daac ,_bdaa float64 )[]int {_dbdfb :=len (_daec );if _bdaa < _daec [_gcfg [0]].Lly ||_daac > _daec [_gcfg [_dbdfb -1]].Lly {return nil ;
};_dcbb :=_ed .Search (_dbdfb ,func (_abaad int )bool {return _daec [_gcfg [_abaad ]].Lly >=_daac });_efed :=_ed .Search (_dbdfb ,func (_cgge int )bool {return _daec [_gcfg [_cgge ]].Lly > _bdaa });return _gcfg [_dcbb :_efed ];};func (_ccae rulingList )primMinMax ()(float64 ,float64 ){_fabfd ,_cfdde :=_ccae [0]._eeac ,_ccae [0]._eeac ;
for _ ,_afcdd :=range _ccae [1:]{if _afcdd ._eeac < _fabfd {_fabfd =_afcdd ._eeac ;}else if _afcdd ._eeac > _cfdde {_cfdde =_afcdd ._eeac ;};};return _fabfd ,_cfdde ;};func (_ggeeb paraList )inTile (_fabba gridTile )paraList {var _aegd paraList ;for _ ,_beaebb :=range _ggeeb {if _fabba .contains (_beaebb .PdfRectangle ){_aegd =append (_aegd ,_beaebb );
};};if _edgc {_gd .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_fabba ,len (_aegd ));for _ebaae ,_bcaf :=range _aegd {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ebaae ,_bcaf );
};_gd .Println ("");};return _aegd ;};var _aba =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_g .White ,StrokeColor :_g .White };func (_bgb *shapesState )lastpointEstablished ()(_fe .Point ,bool ){if _bgb ._dfbg {return _bgb ._eae ,false ;
};_cce :=len (_bgb ._bcdg );if _cce > 0&&_bgb ._bcdg [_cce -1]._cabg {return _bgb ._bcdg [_cce -1].last (),false ;};return _fe .Point {},true ;};func (_fgdgc paraList )lines ()[]*textLine {var _begea []*textLine ;for _ ,_fffca :=range _fgdgc {_begea =append (_begea ,_fffca ._afgcbe ...);
};return _begea ;};func (_abfe *textWord )appendMark (_edaa *textMark ,_acdc _ga .PdfRectangle ){_abfe ._cefce =append (_abfe ._cefce ,_edaa );_abfe .PdfRectangle =_aefc (_abfe .PdfRectangle ,_edaa .PdfRectangle );if _edaa ._dfbea > _abfe ._febea {_abfe ._febea =_edaa ._dfbea ;
};_abfe ._gdae =_acdc .Ury -_abfe .PdfRectangle .Lly ;};func (_eedd *textTable )toTextTable ()TextTable {if _edgc {_fd .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_eedd ._ccce ,_eedd ._gddg );
};_efbc :=make ([][]TableCell ,_eedd ._gddg );for _fegefd :=0;_fegefd < _eedd ._gddg ;_fegefd ++{_efbc [_fegefd ]=make ([]TableCell ,_eedd ._ccce );for _fcdcc :=0;_fcdcc < _eedd ._ccce ;_fcdcc ++{_aacgg :=_eedd .get (_fcdcc ,_fegefd );if _aacgg ==nil {continue ;
};if _edgc {_gd .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_fcdcc ,_fegefd ,_aacgg );};_efbc [_fegefd ][_fcdcc ].Text =_aacgg .text ();_degbd :=0;_efbc [_fegefd ][_fcdcc ].Marks ._gbc =_aacgg .toTextMarks (&_degbd );
};};_cabee :=TextTable {W :_eedd ._ccce ,H :_eedd ._gddg ,Cells :_efbc };_cabee .PdfRectangle =_eedd .bbox ();return _cabee ;};func (_fddc paraList )applyTables (_aadgf []*textTable )paraList {var _fcagd paraList ;for _ ,_eefd :=range _aadgf {_fcagd =append (_fcagd ,_eefd .newTablePara ());
};for _ ,_faac :=range _fddc {if _faac ._bgeg {continue ;};_fcagd =append (_fcagd ,_faac );};return _fcagd ;};func _dacf (_agafd []*textLine )map[float64 ][]*textLine {_ed .Slice (_agafd ,func (_bedg ,_gaf int )bool {return _agafd [_bedg ]._acga < _agafd [_gaf ]._acga });
_efbd :=map[float64 ][]*textLine {};for _ ,_efdd :=range _agafd {_fdcc :=_fgeb (_efdd );_fdcc =_f .Round (_fdcc );_efbd [_fdcc ]=append (_efbd [_fdcc ],_efdd );};return _efbd ;};func (_ddd *Extractor )extractPageText (_addc string ,_cfd *_ga .PdfPageResources ,_cccf _fe .Matrix ,_dfff int )(*PageText ,int ,int ,error ){_fd .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_dfff );
_bag :=&PageText {_bcg :_ddd ._gee ,_cfbb :_ddd ._gcc ,_dfd :_ddd ._gab };_gdf :=_gbd (_ddd ._gee );var _cfc stateStack ;_bbd :=_fgdb (_ddd ,_cfd ,_ce .GraphicsState {},&_gdf ,&_cfc );_ddf :=shapesState {_cef :_cccf ,_cfda :_fe .IdentityMatrix (),_ede :_bbd };
var _dge bool ;_dfgg :=-1;if _dfff > _ebcc {_ecg :=_a .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_dfff ,_ecg );
return _bag ,_gdf ._febb ,_gdf ._faf ,_ecg ;};_edcc :=_ce .NewContentStreamParser (_addc );_aga ,_dfeg :=_edcc .Parse ();if _dfeg !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfeg );
return _bag ,_gdf ._febb ,_gdf ._faf ,_dfeg ;};_bag ._edbe =_aga ;_dcb :=_ce .NewContentStreamProcessor (*_aga );_dcb .AddHandler (_ce .HandlerConditionEnumAllOperands ,"",func (_cbf *_ce .ContentStreamOperation ,_bead _ce .GraphicsState ,_gdc *_ga .PdfPageResources )error {_bca :=_cbf .Operand ;
if _cgbb {_fd .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_cbf );};switch _bca {case "\u0071":if _cbdea {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddf ._cfda );};_cfc .push (&_gdf );case "\u0051":if !_cfc .empty (){_gdf =*_cfc .pop ();
};_ddf ._cfda =_bead .CTM ;if _cbdea {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddf ._cfda );};case "\u0042\u0044\u0043":_dba ,_cfa :=_eb .GetDict (_cbf .Params [1]);if !_cfa {_fd .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cbf );
return _dfeg ;};_ccbf :=_dba .Get ("\u004d\u0043\u0049\u0044");if _ccbf !=nil {_cec ,_ebe :=_eb .GetIntVal (_ccbf );if !_ebe {_fd .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_cbf ,_ccbf );
};_dfgg =_cec ;}else {_dfgg =-1;};case "\u0045\u004d\u0043":_dfgg =-1;case "\u0042\u0054":if _dge {_fd .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_bag ._feg =append (_bag ._feg ,_bbd ._ecgd ...);};_dge =true ;_fbe :=_bead ;_fbe .CTM =_cccf .Mult (_fbe .CTM );_bbd =_fgdb (_ddd ,_gdc ,_fbe ,&_gdf ,&_cfc );_ddf ._ede =_bbd ;case "\u0045\u0054":if !_dge {_fd .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_dge =false ;_bag ._feg =append (_bag ._feg ,_bbd ._ecgd ...);_bbd .reset ();case "\u0054\u002a":_bbd .nextLine ();case "\u0054\u0064":if _cacf ,_ab :=_bbd .checkOp (_cbf ,2,true );!_cacf {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ab );
return _ab ;};_gdce ,_fcc ,_bcad :=_gcegc (_cbf .Params );if _bcad !=nil {return _bcad ;};_bbd .moveText (_gdce ,_fcc );case "\u0054\u0044":if _cbed ,_gge :=_bbd .checkOp (_cbf ,2,true );!_cbed {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gge );
return _gge ;};_fed ,_gbaf ,_fcae :=_gcegc (_cbf .Params );if _fcae !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcae );return _fcae ;};_bbd .moveTextSetLeading (_fed ,_gbaf );case "\u0054\u006a":if _edb ,_ff :=_bbd .checkOp (_cbf ,1,true );
!_edb {_fd .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_cbf ,_ff );return _ff ;};_gfc :=_eb .TraceToDirectObject (_cbf .Params [0]);_dbb ,_aed :=_eb .GetStringBytes (_gfc );
if !_aed {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_cbf );return _eb .ErrTypeError ;
};return _bbd .showText (_gfc ,_dbb ,_dfgg );case "\u0054\u004a":if _dgc ,_cacb :=_bbd .checkOp (_cbf ,1,true );!_dgc {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cacb );return _cacb ;};_cga ,_eec :=_eb .GetArray (_cbf .Params [0]);
if !_eec {_fd .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cbf );return _dfeg ;};return _bbd .showTextAdjusted (_cga ,_dfgg );
case "\u0027":if _gcf ,_gdcc :=_bbd .checkOp (_cbf ,1,true );!_gcf {_fd .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gdcc );return _gdcc ;};_aag :=_eb .TraceToDirectObject (_cbf .Params [0]);_fgb ,_geee :=_eb .GetStringBytes (_aag );
if !_geee {_fd .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_cbf );return _eb .ErrTypeError ;};_bbd .nextLine ();return _bbd .showText (_aag ,_fgb ,_dfgg );
case "\u0022":if _fda ,_gcff :=_bbd .checkOp (_cbf ,3,true );!_fda {_fd .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcff );return _gcff ;};_fged ,_edcf ,_cfb :=_gcegc (_cbf .Params [:2]);if _cfb !=nil {return _cfb ;
};_abb :=_eb .TraceToDirectObject (_cbf .Params [2]);_dcfb ,_ddc :=_eb .GetStringBytes (_abb );if !_ddc {_fd .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_cbf );
return _eb .ErrTypeError ;};_bbd .setCharSpacing (_fged );_bbd .setWordSpacing (_edcf );_bbd .nextLine ();return _bbd .showText (_abb ,_dcfb ,_dfgg );case "\u0054\u004c":_gag ,_ffa :=_edcd (_cbf );if _ffa !=nil {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ffa );
return _ffa ;};_bbd .setTextLeading (_gag );case "\u0054\u0063":_bae ,_cece :=_edcd (_cbf );if _cece !=nil {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cece );return _cece ;};_bbd .setCharSpacing (_bae );
case "\u0054\u0066":if _dgd ,_bcb :=_bbd .checkOp (_cbf ,2,true );!_dgd {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcb );return _bcb ;};_gdg ,_gcca :=_eb .GetNameVal (_cbf .Params [0]);if !_gcca {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_cbf );
return _eb .ErrTypeError ;};_eda ,_ccg :=_eb .GetNumberAsFloat (_cbf .Params [1]);if !_gcca {_fd .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbf ,_ccg );
return _ccg ;};_ccg =_bbd .setFont (_gdg ,_eda );_bbd ._dgba =_ge .Is (_ccg ,_eb .ErrNotSupported );if _ccg !=nil &&!_bbd ._dgba {return _ccg ;};case "\u0054\u006d":if _gbg ,_fgbg :=_bbd .checkOp (_cbf ,6,true );!_gbg {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgbg );
return _fgbg ;};_bgc ,_dbdd :=_eb .GetNumbersAsFloat (_cbf .Params );if _dbdd !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbdd );return _dbdd ;};_bbd .setTextMatrix (_bgc );case "\u0054\u0072":if _dec ,_bga :=_bbd .checkOp (_cbf ,1,true );
!_dec {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bga );return _bga ;};_dbf ,_bgg :=_eb .GetIntVal (_cbf .Params [0]);if !_bgg {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cbf );
return _eb .ErrTypeError ;};_bbd .setTextRenderMode (_dbf );case "\u0054\u0073":if _bcf ,_ecc :=_bbd .checkOp (_cbf ,1,true );!_bcf {_fd .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ecc );return _ecc ;
};_ccf ,_gcg :=_eb .GetNumberAsFloat (_cbf .Params [0]);if _gcg !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcg );return _gcg ;};_bbd .setTextRise (_ccf );case "\u0054\u0077":if _cabd ,_bec :=_bbd .checkOp (_cbf ,1,true );
!_cabd {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bec );return _bec ;};_cecd ,_dcc :=_eb .GetNumberAsFloat (_cbf .Params [0]);if _dcc !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcc );
return _dcc ;};_bbd .setWordSpacing (_cecd );case "\u0054\u007a":if _fede ,_abd :=_bbd .checkOp (_cbf ,1,true );!_fede {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abd );return _abd ;};_aec ,_feaf :=_eb .GetNumberAsFloat (_cbf .Params [0]);
if _feaf !=nil {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_feaf );return _feaf ;};_bbd .setHorizScaling (_aec );case "\u0063\u006d":_ddf ._cfda =_bead .CTM ;if _ddf ._cfda .Singular (){_dgea :=_fe .IdentityMatrix ().Translate (_ddf ._cfda .Translation ());
_fd .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_ddf ._cfda ,_dgea );_ddf ._cfda =_dgea ;};if _cbdea {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddf ._cfda );};case "\u006d":if len (_cbf .Params )!=2{_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dab );
return nil ;};_afdd ,_cbef :=_eb .GetNumbersAsFloat (_cbf .Params );if _cbef !=nil {return _cbef ;};_ddf .moveTo (_afdd [0],_afdd [1]);case "\u006c":if len (_cbf .Params )!=2{_fd .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_dab );
return nil ;};_bagb ,_dbbg :=_eb .GetNumbersAsFloat (_cbf .Params );if _dbbg !=nil {return _dbbg ;};_ddf .lineTo (_bagb [0],_bagb [1]);case "\u0063":if len (_cbf .Params )!=6{return _dab ;};_cccd ,_dgdd :=_eb .GetNumbersAsFloat (_cbf .Params );if _dgdd !=nil {return _dgdd ;
};_fd .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cccd );_ddf .cubicTo (_cccd [0],_cccd [1],_cccd [2],_cccd [3],_cccd [4],_cccd [5]);case "\u0076","\u0079":if len (_cbf .Params )!=4{return _dab ;
};_cgf ,_cde :=_eb .GetNumbersAsFloat (_cbf .Params );if _cde !=nil {return _cde ;};_fd .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_cgf );_ddf .quadraticTo (_cgf [0],_cgf [1],_cgf [2],_cgf [3]);
case "\u0068":_ddf .closePath ();case "\u0072\u0065":if len (_cbf .Params )!=4{return _dab ;};_aaa ,_eca :=_eb .GetNumbersAsFloat (_cbf .Params );if _eca !=nil {return _eca ;};_ddf .drawRectangle (_aaa [0],_aaa [1],_aaa [2],_aaa [3]);_ddf .closePath ();
case "\u0053":_ddf .stroke (&_bag ._ecee );_ddf .clearPath ();case "\u0073":_ddf .closePath ();_ddf .stroke (&_bag ._ecee );_ddf .clearPath ();case "\u0046":_ddf .fill (&_bag ._abg );_ddf .clearPath ();case "\u0066","\u0066\u002a":_ddf .closePath ();_ddf .fill (&_bag ._abg );
_ddf .clearPath ();case "\u0042","\u0042\u002a":_ddf .fill (&_bag ._abg );_ddf .stroke (&_bag ._ecee );_ddf .clearPath ();case "\u0062","\u0062\u002a":_ddf .closePath ();_ddf .fill (&_bag ._abg );_ddf .stroke (&_bag ._ecee );_ddf .clearPath ();case "\u006e":_ddf .clearPath ();
case "\u0044\u006f":if len (_cbf .Params )==0{_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_cbf .Params );
return _eb .ErrRangeError ;};_baa ,_ded :=_eb .GetName (_cbf .Params [0]);if !_ded {_fd .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_cbf .Params [0]);
return _eb .ErrTypeError ;};_ ,_gae :=_gdc .GetXObjectByName (*_baa );if _gae !=_ga .XObjectTypeForm {break ;};_efg ,_ded :=_ddd ._fb [_baa .String ()];if !_ded {_ebb ,_ggd :=_gdc .GetXObjectFormByName (*_baa );if _ggd !=nil {_fd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ggd );
return _ggd ;};_fef ,_ggd :=_ebb .GetContentStream ();if _ggd !=nil {_fd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ggd );return _ggd ;};_ccbfb :=_ebb .Resources ;if _ccbfb ==nil {_ccbfb =_gdc ;};_ecgb :=_bead .CTM ;if _fbdgf ,_gaee :=_eb .GetArray (_ebb .Matrix );
_gaee {_fdd ,_fbgg :=_fbdgf .GetAsFloat64Slice ();if _fbgg !=nil {return _fbgg ;};if len (_fdd )!=6{return _dab ;};_dada :=_fe .NewMatrix (_fdd [0],_fdd [1],_fdd [2],_fdd [3],_fdd [4],_fdd [5]);_ecgb =_bead .CTM .Mult (_dada );};_afb ,_ffd ,_bbb ,_ggd :=_ddd .extractPageText (string (_fef ),_ccbfb ,_cccf .Mult (_ecgb ),_dfff +1);
if _ggd !=nil {_fd .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ggd );return _ggd ;};_efg =textResult {*_afb ,_ffd ,_bbb };_ddd ._fb [_baa .String ()]=_efg ;};_ddf ._cfda =_bead .CTM ;if _cbdea {_fd .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_ddf ._cfda );
};_bag ._feg =append (_bag ._feg ,_efg ._ced ._feg ...);_bag ._ecee =append (_bag ._ecee ,_efg ._ced ._ecee ...);_bag ._abg =append (_bag ._abg ,_efg ._ced ._abg ...);_gdf ._febb +=_efg ._fdb ;_gdf ._faf +=_efg ._ccfg ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_bbd ._daa .ColorspaceNonStroking =_bead .ColorspaceNonStroking ;
_bbd ._daa .ColorNonStroking =_bead .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_bbd ._daa .ColorspaceStroking =_bead .ColorspaceStroking ;_bbd ._daa .ColorStroking =_bead .ColorStroking ;
};return nil ;});_dfeg =_dcb .Process (_cfd );return _bag ,_gdf ._febb ,_gdf ._faf ,_dfeg ;};func (_gbcbac *textMark )bbox ()_ga .PdfRectangle {return _gbcbac .PdfRectangle };func (_abf *textObject )getFontDirect (_fegf string )(*_ga .PdfFont ,error ){_daad ,_eee :=_abf .getFontDict (_fegf );
if _eee !=nil {return nil ,_eee ;};_bcae ,_eee :=_ga .NewPdfFontFromPdfObject (_daad );if _eee !=nil {_fd .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fegf ,_eee );
};return _bcae ,_eee ;};type gridTiling struct{_ga .PdfRectangle ;_bbba []float64 ;_adfad []float64 ;_gcdb map[float64 ]map[float64 ]gridTile ;};func (_fdbe *shapesState )closePath (){if _fdbe ._dfbg {_fdbe ._bcdg =append (_fdbe ._bcdg ,_bgca (_fdbe ._eae ));
_fdbe ._dfbg =false ;}else if len (_fdbe ._bcdg )==0{if _cbdea {_fd .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_fdbe ._dfbg =false ;return ;};_fdbe ._bcdg [len (_fdbe ._bcdg )-1].close ();
if _cbdea {_fd .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_fdbe );};};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_ggdb *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _ggdb ==nil {return nil ,_a .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_gd .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_deaa :=len (_ggdb ._gbc );if _deaa ==0{return _ggdb ,nil ;};if start < _ggdb ._gbc [0].Offset {start =_ggdb ._gbc [0].Offset ;};if end > _ggdb ._gbc [_deaa -1].Offset +1{end =_ggdb ._gbc [_deaa -1].Offset +1;};_cgfc :=_ed .Search (_deaa ,func (_cdbbd int )bool {return _ggdb ._gbc [_cdbbd ].Offset +len (_ggdb ._gbc [_cdbbd ].Text )-1>=start });
if !(0<=_cgfc &&_cgfc < _deaa ){_cbdag :=_gd .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_cgfc ,_deaa ,_ggdb ._gbc [0],_ggdb ._gbc [_deaa -1]);
return nil ,_cbdag ;};_dgeb :=_ed .Search (_deaa ,func (_dffe int )bool {return _ggdb ._gbc [_dffe ].Offset > end -1});if !(0<=_dgeb &&_dgeb < _deaa ){_dbga :=_gd .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_dgeb ,_deaa ,_ggdb ._gbc [0],_ggdb ._gbc [_deaa -1]);
return nil ,_dbga ;};if _dgeb <=_cgfc {return nil ,_gd .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_cgfc ,_dgeb );
};return &TextMarkArray {_gbc :_ggdb ._gbc [_cgfc :_dgeb ]},nil ;};func (_fcf *textObject )setHorizScaling (_adf float64 ){if _fcf ==nil {return ;};_fcf ._agb ._dfbb =_adf ;};func (_gbbe paraList )reorder (_ffee []int ){_gfagc :=make (paraList ,len (_gbbe ));
for _gcbf ,_acbbd :=range _ffee {_gfagc [_gcbf ]=_gbbe [_acbbd ];};copy (_gbbe ,_gfagc );};func (_cfgb intSet )add (_begbc int ){_cfgb [_begbc ]=struct{}{}};func _ebga (_eggc []*textLine ,_aceb string )string {var _edffg _cc .Builder ;_fdgc :=0.0;for _faaf ,_gabg :=range _eggc {_cdad :=_gabg .text ();
_cagge :=_gabg ._acga ;if _faaf < len (_eggc )-1{_fdgc =_eggc [_faaf +1]._acga ;}else {_fdgc =0.0;};_edffg .WriteString (_aceb );_edffg .WriteString (_cdad );if _fdgc !=_cagge {_edffg .WriteString ("\u000a");}else {_edffg .WriteString ("\u0020");};};return _edffg .String ();
};const _ebcc =20;func (_gga *textObject )nextLine (){_gga .moveLP (0,-_gga ._agb ._aaag )};func _gcffac (_gfef float64 )float64 {return _cccb *_f .Round (_gfef /_cccb )};func _dgae (_bfdd string )bool {for _ ,_gagfg :=range _bfdd {if !_dg .IsSpace (_gagfg ){return false ;
};};return true ;};

// String returns a description of `w`.
func (_gbgb *textWord )String ()string {return _gd .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_gbgb ._gdae ,_gbgb .PdfRectangle ,_gbgb ._febea ,_gbgb ._eaedb );
};func _fgefe (_aebf _eb .PdfObject ,_cefga _g .Color )(_fg .Image ,error ){_eaca ,_ddffc :=_eb .GetStream (_aebf );if !_ddffc {return nil ,nil ;};_fdbgd ,_cgbfd :=_ga .NewXObjectImageFromStream (_eaca );if _cgbfd !=nil {return nil ,_cgbfd ;};_dccbg ,_cgbfd :=_fdbgd .ToImage ();
if _cgbfd !=nil {return nil ,_cgbfd ;};return _gdeee (_dccbg ,_cefga ),nil ;};func (_fgcc *textWord )addDiacritic (_bcbd string ){_gcdbg :=_fgcc ._cefce [len (_fgcc ._cefce )-1];_gcdbg ._fbbef +=_bcbd ;_gcdbg ._fbbef =_dbg .NFKC .String (_gcdbg ._fbbef );
};func (_dc *PageFonts )extractPageResourcesToFont (_bg *_ga .PdfPageResources )error {_ea ,_gda :=_eb .GetDict (_bg .Font );if !_gda {return _a .New (_geb );};for _ ,_bea :=range _ea .Keys (){var (_cab =true ;_de []byte ;_af string ;);_ece ,_bbg :=_bg .GetFontByName (_bea );
if !_bbg {return _a .New (_bbf );};_daf ,_dea :=_ga .NewPdfFontFromPdfObject (_ece );if _dea !=nil {return _dea ;};_fc :=_daf .FontDescriptor ();_ccb :=_daf .FontDescriptor ().FontName .String ();_dga :=_daf .Subtype ();if _gdd (_dc .Fonts ,_ccb ){continue ;
};if len (_daf .ToUnicode ())==0{_cab =false ;};if _fc .FontFile !=nil {if _aff ,_dee :=_eb .GetStream (_fc .FontFile );_dee {_de ,_dea =_eb .DecodeStream (_aff );if _dea !=nil {return _dea ;};_af =_ccb +"\u002e\u0070\u0066\u0062";};}else if _fc .FontFile2 !=nil {if _cg ,_eba :=_eb .GetStream (_fc .FontFile2 );
_eba {_de ,_dea =_eb .DecodeStream (_cg );if _dea !=nil {return _dea ;};_af =_ccb +"\u002e\u0074\u0074\u0066";};}else if _fc .FontFile3 !=nil {if _ba ,_df :=_eb .GetStream (_fc .FontFile3 );_df {_de ,_dea =_eb .DecodeStream (_ba );if _dea !=nil {return _dea ;
};_af =_ccb +"\u002e\u0063\u0066\u0066";};};if len (_af )< 1{_fd .Log .Debug (_fa );};_begf :=Font {FontName :_ccb ,PdfFont :_daf ,IsCID :_daf .IsCID (),IsSimple :_daf .IsSimple (),ToUnicode :_cab ,FontType :_dga ,FontData :_de ,FontFileName :_af ,FontDescriptor :_fc };
_dc .Fonts =append (_dc .Fonts ,_begf );};return nil ;};func _cedeg (_badea []*textMark ,_bfeb _ga .PdfRectangle )[]*textWord {var _fdbfg []*textWord ;var _ebfc *textWord ;if _bfgc {_fd .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_badea ));
};_gcde :=func (){if _ebfc !=nil {_cdfd :=_ebfc .computeText ();if !_dgae (_cdfd ){_ebfc ._eaedb =_cdfd ;_fdbfg =append (_fdbfg ,_ebfc );if _bfgc {_fd .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_fdbfg )-1,_ebfc .String ());
for _aeed ,_gcadf :=range _ebfc ._cefce {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aeed ,_gcadf .String ());};};};_ebfc =nil ;};};for _ ,_ffedf :=range _badea {if _cdd &&_ebfc !=nil &&len (_ebfc ._cefce )> 0{_ecea :=_ebfc ._cefce [len (_ebfc ._cefce )-1];
_dggfc ,_afdfb :=_daed (_ffedf ._fbbef );_bdbeb ,_gcgc :=_daed (_ecea ._fbbef );if _afdfb &&!_gcgc &&_ecea .inDiacriticArea (_ffedf ){_ebfc .addDiacritic (_dggfc );continue ;};if _gcgc &&!_afdfb &&_ffedf .inDiacriticArea (_ecea ){_ebfc ._cefce =_ebfc ._cefce [:len (_ebfc ._cefce )-1];
_ebfc .appendMark (_ffedf ,_bfeb );_ebfc .addDiacritic (_bdbeb );continue ;};};_dadee :=_dgae (_ffedf ._fbbef );if _dadee {_gcde ();continue ;};if _ebfc ==nil &&!_dadee {_ebfc =_fbea ([]*textMark {_ffedf },_bfeb );continue ;};_degfd :=_ebfc ._febea ;_edgga :=_f .Abs (_fage (_bfeb ,_ffedf )-_ebfc ._gdae )/_degfd ;
_gaaa :=_becc (_ffedf ,_ebfc )/_degfd ;if _gaaa >=_gebc ||!(-_afee <=_gaaa &&_edgga <=_cdcad ){_gcde ();_ebfc =_fbea ([]*textMark {_ffedf },_bfeb );continue ;};_ebfc .appendMark (_ffedf ,_bfeb );};_gcde ();return _fdbfg ;};func (_ggea rulingList )isActualGrid ()(rulingList ,bool ){_gedb ,_bdgge :=_ggea .augmentGrid ();
if !(len (_gedb )>=_debe +1&&len (_bdgge )>=_eaba +1){if _cgab {_fd .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_gedb ),len (_bdgge ),_debe +1,_eaba +1);
};return nil ,false ;};if _cgab {_fd .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_ggea ,len (_gedb )>=2,len (_bdgge )>=2,len (_gedb )>=2&&len (_bdgge )>=2);
for _fbca ,_fdfc :=range _ggea {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_fbca ,_fdfc );};};if _bbcab {_fbbg ,_bfbf :=_gedb [0],_gedb [len (_gedb )-1];_egcg ,_afaa :=_bdgge [0],_bdgge [len (_bdgge )-1];if !(_afca (_fbbg ._eeac -_egcg ._bdbd )&&_afca (_bfbf ._eeac -_egcg ._deaad )&&_afca (_egcg ._eeac -_fbbg ._deaad )&&_afca (_afaa ._eeac -_fbbg ._bdbd )){if _cgab {_fd .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_fbbg ,_bfbf ,_egcg ,_afaa );
};return nil ,false ;};}else {if !_gedb .aligned (){if _fcdf {_fd .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_gedb ));
};return nil ,false ;};if !_bdgge .aligned (){if _cgab {_fd .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_bdgge ));
};return nil ,false ;};};_fcgg :=append (_gedb ,_bdgge ...);return _fcgg ,true ;};func (_cfcaa *textTable )log (_fefge string ){if !_edgc {return ;};_fd .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_fefge ,_cfcaa ._ccce ,_cfcaa ._gddg ,_cfcaa ._cbbba ,_cfcaa .PdfRectangle );
for _gdded :=0;_gdded < _cfcaa ._gddg ;_gdded ++{for _gggdf :=0;_gggdf < _cfcaa ._ccce ;_gggdf ++{_eecbd :=_cfcaa .get (_gggdf ,_gdded );if _eecbd ==nil {continue ;};_gd .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_gggdf ,_gdded ,_eecbd .PdfRectangle ,_bcbc (_eecbd .text (),50),_e .RuneCountInString (_eecbd .text ()));
};};};func _gcfgb (_gffgf []int )[]int {_ccad :=make ([]int ,len (_gffgf ));for _ddad ,_dbefc :=range _gffgf {_ccad [len (_gffgf )-1-_ddad ]=_dbefc ;};return _ccad ;};func (_dbcbd *textTable )reduceTiling (_dabd gridTiling ,_abca float64 )*textTable {_dfaa :=make ([]int ,0,_dbcbd ._gddg );
_ebada :=make ([]int ,0,_dbcbd ._ccce );_eefab :=_dabd ._bbba ;_fgac :=_dabd ._adfad ;for _ceef :=0;_ceef < _dbcbd ._gddg ;_ceef ++{_cbga :=_ceef > 0&&_f .Abs (_fgac [_ceef -1]-_fgac [_ceef ])< _abca &&_dbcbd .emptyCompositeRow (_ceef );if !_cbga {_dfaa =append (_dfaa ,_ceef );
};};for _dcaf :=0;_dcaf < _dbcbd ._ccce ;_dcaf ++{_gfbb :=_dcaf < _dbcbd ._ccce -1&&_f .Abs (_eefab [_dcaf +1]-_eefab [_dcaf ])< _abca &&_dbcbd .emptyCompositeColumn (_dcaf );if !_gfbb {_ebada =append (_ebada ,_dcaf );};};if len (_dfaa )==_dbcbd ._gddg &&len (_ebada )==_dbcbd ._ccce {return _dbcbd ;
};_bbdgc :=textTable {_cbbba :_dbcbd ._cbbba ,_ccce :len (_ebada ),_gddg :len (_dfaa ),_bfdgbe :make (map[uint64 ]compositeCell ,len (_ebada )*len (_dfaa ))};if _edgc {_fd .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_dbcbd ._ccce ,_dbcbd ._gddg ,len (_ebada ),len (_dfaa ));
_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_ebada );_fd .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_dfaa );};for _aeaa ,_aacb :=range _dfaa {for _fbag ,_fbbcg :=range _ebada {_ffdb ,_dgdg :=_dbcbd .getComposite (_fbbcg ,_aacb );
if len (_ffdb )==0{continue ;};if _edgc {_gd .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_fbag ,_aeaa ,_fbbcg ,_aacb ,_bcbc (_ffdb .merge ().text (),50));};_bbdgc .putComposite (_fbag ,_aeaa ,_ffdb ,_dgdg );
};};return &_bbdgc ;};func (_dgad *wordBag )applyRemovals (_cdbd map[int ]map[*textWord ]struct{}){for _cdee ,_edgd :=range _cdbd {if len (_edgd )==0{continue ;};_gedcg :=_dgad ._fced [_cdee ];_gggb :=len (_gedcg )-len (_edgd );if _gggb ==0{delete (_dgad ._fced ,_cdee );
continue ;};_edcbd :=make ([]*textWord ,_gggb );_gdagb :=0;for _ ,_eged :=range _gedcg {if _ ,_dgbc :=_edgd [_eged ];!_dgbc {_edcbd [_gdagb ]=_eged ;_gdagb ++;};};_dgad ._fced [_cdee ]=_edcbd ;};};func (_cfge paraList )toTextMarks ()[]TextMark {_gbda :=0;
var _dedb []TextMark ;for _degf ,_aeeg :=range _cfge {if _aeeg ._aaef {continue ;};_fabf :=_aeeg .toTextMarks (&_gbda );_dedb =append (_dedb ,_fabf ...);if _degf !=len (_cfge )-1{if _adaa (_aeeg ,_cfge [_degf +1]){_dedb =_geaed (_dedb ,&_gbda ,"\u0020");
}else {_dedb =_geaed (_dedb ,&_gbda ,"\u000a");_dedb =_geaed (_dedb ,&_gbda ,"\u000a");};};};_dedb =_geaed (_dedb ,&_gbda ,"\u000a");_dedb =_geaed (_dedb ,&_gbda ,"\u000a");return _dedb ;};func (_efee *wordBag )depthIndexes ()[]int {if len (_efee ._fced )==0{return nil ;
};_eaea :=make ([]int ,len (_efee ._fced ));_dbff :=0;for _addca :=range _efee ._fced {_eaea [_dbff ]=_addca ;_dbff ++;};_ed .Ints (_eaea );return _eaea ;};func _dcacg (_decb []*textWord ,_acda int )[]*textWord {_fgca :=len (_decb );copy (_decb [_acda :],_decb [_acda +1:]);
return _decb [:_fgca -1];};type ruling struct{_gbcbd rulingKind ;_dagg markKind ;_g .Color ;_eeac float64 ;_bdbd float64 ;_deaad float64 ;_fcegf float64 ;};func (_fgdab paraList )readBefore (_dbebb []int ,_abfge ,_bccgf int )bool {_effea ,_cgega :=_fgdab [_abfge ],_fgdab [_bccgf ];
if _ccga (_effea ,_cgega )&&_effea .Lly > _cgega .Lly {return true ;};if !(_effea ._agfgg .Urx < _cgega ._agfgg .Llx ){return false ;};_dfdd ,_egag :=_effea .Lly ,_cgega .Lly ;if _dfdd > _egag {_egag ,_dfdd =_dfdd ,_egag ;};_edacd :=_f .Max (_effea ._agfgg .Llx ,_cgega ._agfgg .Llx );
_gfea :=_f .Min (_effea ._agfgg .Urx ,_cgega ._agfgg .Urx );_ffcbg :=_fgdab .llyRange (_dbebb ,_dfdd ,_egag );for _ ,_acad :=range _ffcbg {if _acad ==_abfge ||_acad ==_bccgf {continue ;};_bgcbb :=_fgdab [_acad ];if _bgcbb ._agfgg .Llx <=_gfea &&_edacd <=_bgcbb ._agfgg .Urx {return false ;
};};return true ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_gacg *TextMarkArray )BBox ()(_ga .PdfRectangle ,bool ){var _defe _ga .PdfRectangle ;_egf :=false ;for _ ,_agfg :=range _gacg ._gbc {if _agfg .Meta ||_dgae (_agfg .Text ){continue ;};if _egf {_defe =_aefc (_defe ,_agfg .BBox );}else {_defe =_agfg .BBox ;
_egf =true ;};};return _defe ,_egf ;};func _dbea (_eefa *list )[]*list {var _fffc []*list ;for _ ,_gbgc :=range _eefa ._gbgd {switch _gbgc ._bfc {case "\u004c\u0049":_bfgf :=_eabb (_gbgc );_eccc :=_dbea (_gbgc );_ageac :=_eeef (_bfgf ,"\u0062\u0075\u006c\u006c\u0065\u0074",_eccc );
_aeab :=_ebga (_bfgf ,"");_ageac ._bcgc =_aeab ;_fffc =append (_fffc ,_ageac );case "\u004c\u0042\u006fd\u0079":return _dbea (_gbgc );case "\u004c":_gedg :=_dbea (_gbgc );_fffc =append (_fffc ,_gedg ...);return _fffc ;};};return _fffc ;};type textResult struct{_ced PageText ;
_fdb int ;_ccfg int ;};func _dgdf (_fcgf []pathSection )rulingList {_gddcc (_fcgf );if _cgab {_fd .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_fcgf ));};var _gaca rulingList ;
for _ ,_fgdgg :=range _fcgf {for _ ,_afbba :=range _fgdgg ._bdbc {if !_afbba .isQuadrilateral (){if _cgab {_fd .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_afbba );};continue ;};if _ccdab ,_cdfa :=_afbba .makeRectRuling (_fgdgg .Color );
_cdfa {_gaca =append (_gaca ,_ccdab );}else {if _eddgb {_fd .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_afbba );};};};};if _cgab {_fd .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_gaca .String ());
};return _gaca ;};func (_ccfgg paraList )xNeighbours (_dcfbf float64 )map[*textPara ][]int {_cdggd :=make ([]event ,2*len (_ccfgg ));if _dcfbf ==0{for _agbgc ,_edffc :=range _ccfgg {_cdggd [2*_agbgc ]=event {_edffc .Llx ,true ,_agbgc };_cdggd [2*_agbgc +1]=event {_edffc .Urx ,false ,_agbgc };
};}else {for _efaa ,_aadaf :=range _ccfgg {_cdggd [2*_efaa ]=event {_aadaf .Llx -_dcfbf *_aadaf .fontsize (),true ,_efaa };_cdggd [2*_efaa +1]=event {_aadaf .Urx +_dcfbf *_aadaf .fontsize (),false ,_efaa };};};return _ccfgg .eventNeighbours (_cdggd );};
func (_eegf *textObject )getFont (_dbae string )(*_ga .PdfFont ,error ){if _eegf ._eaab ._cbd !=nil {_ffeb ,_bgfa :=_eegf .getFontDict (_dbae );if _bgfa !=nil {_fd .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_dbae ,_bgfa .Error ());
return nil ,_bgfa ;};_eegf ._eaab ._geeg ++;_fbggb ,_edad :=_eegf ._eaab ._cbd [_ffeb .String ()];if _edad {_fbggb ._caa =_eegf ._eaab ._geeg ;return _fbggb ._fgda ,nil ;};};_ccbb ,_abad :=_eegf .getFontDict (_dbae );if _abad !=nil {return nil ,_abad ;
};_abac ,_abad :=_eegf .getFontDirect (_dbae );if _abad !=nil {return nil ,_abad ;};if _eegf ._eaab ._cbd !=nil {_afgba :=fontEntry {_abac ,_eegf ._eaab ._geeg };if len (_eegf ._eaab ._cbd )>=_baaf {var _agbc []string ;for _bgcg :=range _eegf ._eaab ._cbd {_agbc =append (_agbc ,_bgcg );
};_ed .Slice (_agbc ,func (_fffg ,_dfffd int )bool {return _eegf ._eaab ._cbd [_agbc [_fffg ]]._caa < _eegf ._eaab ._cbd [_agbc [_dfffd ]]._caa ;});delete (_eegf ._eaab ._cbd ,_agbc [0]);};_eegf ._eaab ._cbd [_ccbb .String ()]=_afgba ;};return _abac ,nil ;
};var _bdegd =map[markKind ]string {_ccde :"\u0073\u0074\u0072\u006f\u006b\u0065",_befe :"\u0066\u0069\u006c\u006c",_caag :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func (_cbca *textObject )getFillColor ()_g .Color {return _bfggc (_cbca ._daa .ColorspaceNonStroking ,_cbca ._daa .ColorNonStroking );
};func _aegef (_dbgca ,_caffb int )int {if _dbgca < _caffb {return _dbgca ;};return _caffb ;};func (_fabb rulingList )primaries ()[]float64 {_cegfc :=make (map[float64 ]struct{},len (_fabb ));for _ ,_bfaad :=range _fabb {_cegfc [_bfaad ._eeac ]=struct{}{};
};_bbdce :=make ([]float64 ,len (_cegfc ));_edab :=0;for _eecac :=range _cegfc {_bbdce [_edab ]=_eecac ;_edab ++;};_ed .Float64s (_bbdce );return _bbdce ;};func (_dfcf *wordBag )pullWord (_bebc *textWord ,_ffc int ,_feea map[int ]map[*textWord ]struct{}){_dfcf .PdfRectangle =_aefc (_dfcf .PdfRectangle ,_bebc .PdfRectangle );
if _bebc ._febea > _dfcf ._gegb {_dfcf ._gegb =_bebc ._febea ;};_dfcf ._fced [_ffc ]=append (_dfcf ._fced [_ffc ],_bebc );_feea [_ffc ][_bebc ]=struct{}{};};func _fcdcg (_bggge ,_fgff float64 )bool {return _f .Abs (_bggge -_fgff )<=_efde };func (_aeee *wordBag )allWords ()[]*textWord {var _bddf []*textWord ;
for _ ,_gbcg :=range _aeee ._fced {_bddf =append (_bddf ,_gbcg ...);};return _bddf ;};func (_aeb *textObject )setFont (_bdb string ,_bcc float64 )error {if _aeb ==nil {return nil ;};_aeb ._agb ._cede =_bcc ;_fcde ,_bcca :=_aeb .getFont (_bdb );if _bcca !=nil {return _bcca ;
};_aeb ._agb ._dcce =_fcde ;return nil ;};func (_efd *textObject )setTextMatrix (_bbad []float64 ){if len (_bbad )!=6{_fd .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_bbad ));
return ;};_eafe ,_gbb ,_gac ,_bfa ,_fgdg ,_fefg :=_bbad [0],_bbad [1],_bbad [2],_bbad [3],_bbad [4],_bbad [5];_efd ._eabe =_fe .NewMatrix (_eafe ,_gbb ,_gac ,_bfa ,_fgdg ,_fefg );_efd ._cgb =_efd ._eabe ;};func _cdcgf (_bcaec _ga .PdfRectangle )*ruling {return &ruling {_gbcbd :_agge ,_eeac :_bcaec .Ury ,_bdbd :_bcaec .Llx ,_deaad :_bcaec .Urx };
};const (_gefd rulingKind =iota ;_agge ;_dafd ;);func _befc (_gadf []*textWord ,_fceee float64 ,_gddfb ,_fcca rulingList )*wordBag {_beba :=_bed (_gadf [0],_fceee ,_gddfb ,_fcca );for _ ,_gddc :=range _gadf [1:]{_cdca :=_efce (_gddc ._gdae );_beba ._fced [_cdca ]=append (_beba ._fced [_cdca ],_gddc );
_beba .PdfRectangle =_aefc (_beba .PdfRectangle ,_gddc .PdfRectangle );};_beba .sort ();return _beba ;};func _bfcf (_gfde _ga .PdfRectangle ,_fabbc ,_gfcc ,_gecde ,_ddfad *ruling )gridTile {_cedab :=_gfde .Llx ;_cecc :=_gfde .Urx ;_dgab :=_gfde .Lly ;_adceb :=_gfde .Ury ;
return gridTile {PdfRectangle :_gfde ,_fega :_fabbc !=nil &&_fabbc .encloses (_dgab ,_adceb ),_cdcgd :_gfcc !=nil &&_gfcc .encloses (_dgab ,_adceb ),_begec :_gecde !=nil &&_gecde .encloses (_cedab ,_cecc ),_gefed :_ddfad !=nil &&_ddfad .encloses (_cedab ,_cecc )};
};func _aefc (_gdeb ,_fccd _ga .PdfRectangle )_ga .PdfRectangle {return _ga .PdfRectangle {Llx :_f .Min (_gdeb .Llx ,_fccd .Llx ),Lly :_f .Min (_gdeb .Lly ,_fccd .Lly ),Urx :_f .Max (_gdeb .Urx ,_fccd .Urx ),Ury :_f .Max (_gdeb .Ury ,_fccd .Ury )};};type pathSection struct{_bdbc []*subpath ;
_g .Color ;};func (_cgad *textWord )absorb (_cfga *textWord ){_cgad .PdfRectangle =_aefc (_cgad .PdfRectangle ,_cfga .PdfRectangle );_cgad ._cefce =append (_cgad ._cefce ,_cfga ._cefce ...);};func (_adaab *textWord )computeText ()string {_cfag :=make ([]string ,len (_adaab ._cefce ));
for _gdafc ,_efece :=range _adaab ._cefce {_cfag [_gdafc ]=_efece ._fbbef ;};return _cc .Join (_cfag ,"");};type lists []*list ;func (_agc pathSection )bbox ()_ga .PdfRectangle {_eafg :=_agc ._bdbc [0]._fag [0];_eccd :=_ga .PdfRectangle {Llx :_eafg .X ,Urx :_eafg .X ,Lly :_eafg .Y ,Ury :_eafg .Y };
_bbca :=func (_bdeg _fe .Point ){if _bdeg .X < _eccd .Llx {_eccd .Llx =_bdeg .X ;}else if _bdeg .X > _eccd .Urx {_eccd .Urx =_bdeg .X ;};if _bdeg .Y < _eccd .Lly {_eccd .Lly =_bdeg .Y ;}else if _bdeg .Y > _eccd .Ury {_eccd .Ury =_bdeg .Y ;};};for _ ,_bbed :=range _agc ._bdbc [0]._fag [1:]{_bbca (_bbed );
};for _ ,_acag :=range _agc ._bdbc [1:]{for _ ,_bfba :=range _acag ._fag {_bbca (_bfba );};};return _eccd ;};type lineRuling struct{_gfdg rulingKind ;_ffeeb markKind ;_g .Color ;_degd ,_bbfg _fe .Point ;};func (_ege *stateStack )empty ()bool {return len (*_ege )==0};
func _cecf (_ccgeb ,_acfc _ga .PdfRectangle )bool {return _ccgeb .Lly <=_acfc .Ury &&_acfc .Lly <=_ccgeb .Ury ;};func (_ffbcdf *subpath )makeRectRuling (_efec _g .Color )(*ruling ,bool ){if _eddgb {_fd .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_ffbcdf );
};_decag :=_ffbcdf ._fag [:4];_bece :=make (map[int ]rulingKind ,len (_decag ));for _fddgf ,_dgga :=range _decag {_fedb :=_ffbcdf ._fag [(_fddgf +1)%4];_bece [_fddgf ]=_dacb (_dgga ,_fedb );if _eddgb {_gd .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_fddgf ,_bece [_fddgf ],_dgga ,_fedb );
};};if _eddgb {_gd .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_bece );};var _bdfg ,_aacd []int ;for _egeda ,_bacfd :=range _bece {switch _bacfd {case _agge :_aacd =append (_aacd ,_egeda );case _dafd :_bdfg =append (_bdfg ,_egeda );
};};if _eddgb {_gd .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_aacd ),_aacd );_gd .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_bdfg ),_bdfg );
};_aaaga :=(len (_aacd )==2&&len (_bdfg )==2)||(len (_aacd )==2&&len (_bdfg )==0&&_ebcbb (_decag [_aacd [0]],_decag [_aacd [1]]))||(len (_bdfg )==2&&len (_aacd )==0&&_efgf (_decag [_bdfg [0]],_decag [_bdfg [1]]));if _eddgb {_gd .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_aacd ),len (_bdfg ),_aaaga );
};if !_aaaga {if _eddgb {_fd .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_ffbcdf );_gd .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_aacd ),len (_bdfg ),_aaaga );
};return &ruling {},false ;};if len (_bdfg )==0{for _eeba ,_geac :=range _bece {if _geac !=_agge {_bdfg =append (_bdfg ,_eeba );};};};if len (_aacd )==0{for _gadfe ,_edfg :=range _bece {if _edfg !=_dafd {_aacd =append (_aacd ,_gadfe );};};};if _eddgb {_fd .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_aacd ),len (_bdfg ),len (_decag ),_aacd ,_bdfg ,_decag );
};var _cedg ,_caff ,_dbab ,_cbded _fe .Point ;if _decag [_aacd [0]].Y > _decag [_aacd [1]].Y {_dbab ,_cbded =_decag [_aacd [0]],_decag [_aacd [1]];}else {_dbab ,_cbded =_decag [_aacd [1]],_decag [_aacd [0]];};if _decag [_bdfg [0]].X > _decag [_bdfg [1]].X {_cedg ,_caff =_decag [_bdfg [0]],_decag [_bdfg [1]];
}else {_cedg ,_caff =_decag [_bdfg [1]],_decag [_bdfg [0]];};_fffgf :=_ga .PdfRectangle {Llx :_cedg .X ,Urx :_caff .X ,Lly :_cbded .Y ,Ury :_dbab .Y };if _fffgf .Llx > _fffgf .Urx {_fffgf .Llx ,_fffgf .Urx =_fffgf .Urx ,_fffgf .Llx ;};if _fffgf .Lly > _fffgf .Ury {_fffgf .Lly ,_fffgf .Ury =_fffgf .Ury ,_fffgf .Lly ;
};_ddbc :=rectRuling {PdfRectangle :_fffgf ,_aagb :_ddgc (_fffgf ),Color :_efec };if _ddbc ._aagb ==_gefd {if _eddgb {_fd .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_adce ,_ecgg :=_ddbc .asRuling ();if !_ecgg {if _eddgb {_fd .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _cgab {_gd .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_adce .String ());
};return _adce ,true ;};func (_fab *textLine )endsInHyphen ()bool {_gccad :=_fab ._fgbge [len (_fab ._fgbge )-1];_dcag :=_gccad ._eaedb ;_ceac ,_gabc :=_e .DecodeLastRuneInString (_dcag );if _gabc <=0||!_dg .Is (_dg .Hyphen ,_ceac ){return false ;};if _gccad ._cggc &&_eegfg (_dcag ){return true ;
};return _eegfg (_fab .text ());};type list struct{_cfg []*textLine ;_bfc string ;_gbgd []*list ;_bcgc string ;};func (_ged *TextMarkArray )exists (_cgfgf TextMark )bool {for _ ,_egfc :=range _ged .Elements (){if _be .DeepEqual (_cgfgf .DirectObject ,_egfc .DirectObject )&&_be .DeepEqual (_cgfgf .BBox ,_egfc .BBox )&&_egfc .Text ==_cgfgf .Text {return true ;
};};return false ;};func (_bdga rulingList )intersections ()map[int ]intSet {var _dfdec ,_becee []int ;for _ddbga ,_cdfce :=range _bdga {switch _cdfce ._gbcbd {case _dafd :_dfdec =append (_dfdec ,_ddbga );case _agge :_becee =append (_becee ,_ddbga );};
};if len (_dfdec )< _debe +1||len (_becee )< _eaba +1{return nil ;};if len (_dfdec )+len (_becee )> _deda {_fd .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_bdga ),len (_dfdec ),len (_becee ));
return nil ;};_edffd :=make (map[int ]intSet ,len (_dfdec )+len (_becee ));for _ ,_bcac :=range _dfdec {for _ ,_fgbdc :=range _becee {if _bdga [_bcac ].intersects (_bdga [_fgbdc ]){if _ ,_bdge :=_edffd [_bcac ];!_bdge {_edffd [_bcac ]=make (intSet );};
if _ ,_gedgd :=_edffd [_fgbdc ];!_gedgd {_edffd [_fgbdc ]=make (intSet );};_edffd [_bcac ].add (_fgbdc );_edffd [_fgbdc ].add (_bcac );};};};return _edffd ;};func (_cada *textTable )put (_gbdae ,_eaee int ,_ecca *textPara ){_cada ._aaee [_geagf (_gbdae ,_eaee )]=_ecca ;
};func (_ggg *textObject )getFontDict (_dfffdd string )(_fde _eb .PdfObject ,_gdaa error ){_baefa :=_ggg ._edd ;if _baefa ==nil {_fd .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_dfffdd );
return nil ,nil ;};_fde ,_ecdf :=_baefa .GetFontByName (_eb .PdfObjectName (_dfffdd ));if !_ecdf {_fd .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_dfffdd );
return nil ,_a .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _fde ,nil ;};func _gcfceg (_dbddc _ga .PdfRectangle )*ruling {return &ruling {_gbcbd :_agge ,_eeac :_dbddc .Lly ,_bdbd :_dbddc .Llx ,_deaad :_dbddc .Urx };
};func (_dfa *textLine )text ()string {var _fffa []string ;for _ ,_aecg :=range _dfa ._fgbge {if _aecg ._cggc {_fffa =append (_fffa ,"\u0020");};_fffa =append (_fffa ,_aecg ._eaedb );};return _cc .Join (_fffa ,"");};

// String returns a description of `state`.
func (_dce *textState )String ()string {_geaa :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _dce ._dcce !=nil {_geaa =_dce ._dcce .BaseFont ();};return _gd .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_dce ._bgf ,_dce ._fdbg ,_dce ._cede ,_geaa );
};func _dcaed (_cfccf float64 )bool {return _f .Abs (_cfccf )< _ggfa };func _bfdc (_dfdb *wordBag ,_efbf *textWord ,_abdf float64 )bool {return _dfdb .Urx <=_efbf .Llx &&_efbf .Llx < _dfdb .Urx +_abdf ;};func (_bbeb compositeCell )String ()string {_ecba :="";
if len (_bbeb .paraList )> 0{_ecba =_bcbc (_bbeb .paraList .merge ().text (),50);};return _gd .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_bbeb .PdfRectangle ,len (_bbeb .paraList ),_ecba );
};func (_dagcb *ruling )equals (_caea *ruling )bool {return _dagcb ._gbcbd ==_caea ._gbcbd &&_fcdcg (_dagcb ._eeac ,_caea ._eeac )&&_fcdcg (_dagcb ._bdbd ,_caea ._bdbd )&&_fcdcg (_dagcb ._deaad ,_caea ._deaad );};func _eegfg (_fabe string )bool {if _e .RuneCountInString (_fabe )< _bfef {return false ;
};_ggef ,_aecb :=_e .DecodeLastRuneInString (_fabe );if _aecb <=0||!_dg .Is (_dg .Hyphen ,_ggef ){return false ;};_ggef ,_aecb =_e .DecodeLastRuneInString (_fabe [:len (_fabe )-_aecb ]);return _aecb > 0&&!_dg .IsSpace (_ggef );};func (_begd rulingList )toGrids ()[]rulingList {if _cgab {_fd .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_begd );
};_eacbd :=_begd .intersections ();if _cgab {_fd .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_begd ),len (_eacbd ));
for _ ,_abbd :=range _gbdbf (_eacbd ){_gd .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_abbd ,_eacbd [_abbd ]);};};_dfffe :=make (map[int ]intSet ,len (_begd ));for _aged :=range _begd {_bbfc :=_begd .connections (_eacbd ,_aged );if len (_bbfc )> 0{_dfffe [_aged ]=_bbfc ;
};};if _cgab {_fd .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_dfffe ));for _ ,_bbcfb :=range _gbdbf (_dfffe ){_gd .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bbcfb ,_dfffe [_bbcfb ]);
};};_dfegg :=_fgbaa (len (_begd ),func (_fdffd ,_cdgd int )bool {_aedb ,_fbfa :=len (_dfffe [_fdffd ]),len (_dfffe [_cdgd ]);if _aedb !=_fbfa {return _aedb > _fbfa ;};return _begd .comp (_fdffd ,_cdgd );});if _cgab {_fd .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_dfegg );
};_bccc :=[][]int {{_dfegg [0]}};_aagf :for _ ,_gcgf :=range _dfegg [1:]{for _fgag ,_ggad :=range _bccc {for _ ,_afag :=range _ggad {if _dfffe [_afag ].has (_gcgf ){_bccc [_fgag ]=append (_ggad ,_gcgf );continue _aagf ;};};};_bccc =append (_bccc ,[]int {_gcgf });
};if _cgab {_fd .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_bccc );};_ed .SliceStable (_bccc ,func (_debgf ,_accd int )bool {return len (_bccc [_debgf ])> len (_bccc [_accd ])});for _ ,_caeg :=range _bccc {_ed .Slice (_caeg ,func (_addcd ,_agag int )bool {return _begd .comp (_caeg [_addcd ],_caeg [_agag ])});
};_aeccc :=make ([]rulingList ,len (_bccc ));for _bded ,_bbcb :=range _bccc {_acgbe :=make (rulingList ,len (_bbcb ));for _bdgg ,_eefad :=range _bbcb {_acgbe [_bdgg ]=_begd [_eefad ];};_aeccc [_bded ]=_acgbe ;};if _cgab {_fd .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_aeccc );
};var _dgcaf []rulingList ;for _ ,_aebg :=range _aeccc {if _aaae ,_dfeba :=_aebg .isActualGrid ();_dfeba {_aebg =_aaae ;_aebg =_aebg .snapToGroups ();_dgcaf =append (_dgcaf ,_aebg );};};if _cgab {_feaa ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_dgcaf );
_fd .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_aeccc ),len (_dgcaf ));};return _dgcaf ;};func _degdg (_dfffc ,_bdcd _fg .Image )_fg .Image {_fcbd ,_fabde :=_bdcd .Bounds ().Size (),_dfffc .Bounds ().Size ();
_bfbfg ,_fbfgc :=_fcbd .X ,_fcbd .Y ;if _fabde .X > _bfbfg {_bfbfg =_fabde .X ;};if _fabde .Y > _fbfgc {_fbfgc =_fabde .Y ;};_acgba :=_fg .Rect (0,0,_bfbfg ,_fbfgc );if _fcbd .X !=_bfbfg ||_fcbd .Y !=_fbfgc {_afdaf :=_fg .NewRGBA (_acgba );_db .BiLinear .Scale (_afdaf ,_acgba ,_dfffc ,_bdcd .Bounds (),_db .Over ,nil );
_bdcd =_afdaf ;};if _fabde .X !=_bfbfg ||_fabde .Y !=_fbfgc {_eege :=_fg .NewRGBA (_acgba );_db .BiLinear .Scale (_eege ,_acgba ,_dfffc ,_dfffc .Bounds (),_db .Over ,nil );_dfffc =_eege ;};_ggcca :=_fg .NewRGBA (_acgba );_db .DrawMask (_ggcca ,_acgba ,_dfffc ,_fg .Point {},_bdcd ,_fg .Point {},_db .Over );
return _ggcca ;};

// String returns a human readable description of `s`.
func (_gbcag intSet )String ()string {var _faab []int ;for _gadc :=range _gbcag {if _gbcag .has (_gadc ){_faab =append (_faab ,_gadc );};};_ed .Ints (_faab );return _gd .Sprintf ("\u0025\u002b\u0076",_faab );};func (_egfea paraList )writeText (_dgbag _c .Writer ){for _gecd ,_aggc :=range _egfea {if _aggc ._aaef {continue ;
};_aggc .writeText (_dgbag );if _gecd !=len (_egfea )-1{if _adaa (_aggc ,_egfea [_gecd +1]){_dgbag .Write ([]byte ("\u0020"));}else {_dgbag .Write ([]byte ("\u000a"));_dgbag .Write ([]byte ("\u000a"));};};};_dgbag .Write ([]byte ("\u000a"));_dgbag .Write ([]byte ("\u000a"));
};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ga .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};

// String returns a string describing the current state of the textState stack.
func (_gcb *stateStack )String ()string {_aea :=[]string {_gd .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_gcb ))};for _cgaa ,_eag :=range *_gcb {_bgd :="\u003c\u006e\u0069l\u003e";
if _eag !=nil {_bgd =_eag .String ();};_aea =append (_aea ,_gd .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_cgaa ,_bgd ));};return _cc .Join (_aea ,"\u000a");};func (_cfbff *textLine )pullWord (_geef *wordBag ,_bedb *textWord ,_efdb int ){_cfbff .appendWord (_bedb );
_geef .removeWord (_bedb ,_efdb );};type structElement struct{_eaad string ;_dafe []structElement ;_fdeac int64 ;_egfd _eb .PdfObject ;};func _eabb (_cdea *list )[]*textLine {for _ ,_gbbf :=range _cdea ._gbgd {switch _gbbf ._bfc {case "\u004c\u0042\u006fd\u0079":if len (_gbbf ._cfg )!=0{return _gbbf ._cfg ;
};return _eabb (_gbbf );case "\u0053\u0070\u0061\u006e":return _gbbf ._cfg ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _gbbf ._cfg ;};};return nil ;};func (_decc *wordBag )firstReadingIndex (_gbga int )int {_ega :=_decc .firstWord (_gbga )._febea ;
_efcf :=float64 (_gbga +1)*_abga ;_ebbg :=_efcf +_cffbb *_ega ;_gebd :=_gbga ;for _ ,_cedf :=range _decc .depthBand (_efcf ,_ebbg ){if _fbec (_decc .firstWord (_cedf ),_decc .firstWord (_gebd ))< 0{_gebd =_cedf ;};};return _gebd ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_deac *PageText )ApplyArea (bbox _ga .PdfRectangle ){_bcec :=make ([]*textMark ,0,len (_deac ._feg ));for _ ,_fcb :=range _deac ._feg {if _dcdc (_fcb .bbox (),bbox ){_bcec =append (_bcec ,_fcb );};};var _fgbc paraList ;_cfbaa :=len (_bcec );for _bcgf :=0;
_bcgf < 360&&_cfbaa > 0;_bcgf +=90{_fgbb :=make ([]*textMark ,0,len (_bcec )-_cfbaa );for _ ,_gcaa :=range _bcec {if _gcaa ._aegf ==_bcgf {_fgbb =append (_fgbb ,_gcaa );};};if len (_fgbb )> 0{_cabe :=_fcdg (_fgbb ,_deac ._bcg ,nil ,nil ,_deac ._ade ._cag );
_fgbc =append (_fgbc ,_cabe ...);_cfbaa -=len (_fgbb );};};_gffe :=new (_ec .Buffer );_fgbc .writeText (_gffe );_deac ._ddfb =_gffe .String ();_deac ._acg =_fgbc .toTextMarks ();_deac ._aeba =_fgbc .tables ();};func (_cdaf rulingList )snapToGroupsDirection ()rulingList {_cdaf .sortStrict ();
_eebcd :=make (map[*ruling ]rulingList ,len (_cdaf ));_bgcbc :=_cdaf [0];_bfafe :=func (_gddcb *ruling ){_bgcbc =_gddcb ;_eebcd [_bgcbc ]=rulingList {_gddcb }};_bfafe (_cdaf [0]);for _ ,_affee :=range _cdaf [1:]{if _affee ._eeac < _bgcbc ._eeac -_ggfa {_fd .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_bgcbc ,_affee );
};if _affee ._eeac > _bgcbc ._eeac +_beccb {_bfafe (_affee );}else {_eebcd [_bgcbc ]=append (_eebcd [_bgcbc ],_affee );};};_dgbcdf :=make (map[*ruling ]float64 ,len (_eebcd ));_ceca :=make (map[*ruling ]*ruling ,len (_cdaf ));for _ebgea ,_bgdd :=range _eebcd {_dgbcdf [_ebgea ]=_bgdd .mergePrimary ();
for _ ,_feeaa :=range _bgdd {_ceca [_feeaa ]=_ebgea ;};};for _ ,_afafd :=range _cdaf {_afafd ._eeac =_dgbcdf [_ceca [_afafd ]];};_bbfaf :=make (rulingList ,0,len (_cdaf ));for _ ,_bffgeg :=range _eebcd {_aaece :=_bffgeg .splitSec ();for _dbce ,_ebgf :=range _aaece {_fbege :=_ebgf .merge ();
if len (_bbfaf )> 0{_bfaadf :=_bbfaf [len (_bbfaf )-1];if _bfaadf .alignsPrimary (_fbege )&&_bfaadf .alignsSec (_fbege ){_fd .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_dbce ,_bfaadf ,_fbege );
continue ;};};_bbfaf =append (_bbfaf ,_fbege );};};_bbfaf .sortStrict ();return _bbfaf ;};func (_gffgg *wordBag )sort (){for _ ,_agbcf :=range _gffgg ._fced {_ed .Slice (_agbcf ,func (_cfbf ,_gabb int )bool {return _fbec (_agbcf [_cfbf ],_agbcf [_gabb ])< 0});
};};func (_gaeef rulingList )bbox ()_ga .PdfRectangle {var _ddbff _ga .PdfRectangle ;if len (_gaeef )==0{_fd .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _ga .PdfRectangle {};};if _gaeef [0]._gbcbd ==_agge {_ddbff .Llx ,_ddbff .Urx =_gaeef .secMinMax ();_ddbff .Lly ,_ddbff .Ury =_gaeef .primMinMax ();}else {_ddbff .Llx ,_ddbff .Urx =_gaeef .primMinMax ();_ddbff .Lly ,_ddbff .Ury =_gaeef .secMinMax ();
};return _ddbff ;};func (_ebccg rulingList )connections (_dfce map[int ]intSet ,_efafa int )intSet {_bcfdd :=make (intSet );_fcafb :=make (intSet );var _adbf func (int );_adbf =func (_cdgac int ){if !_fcafb .has (_cdgac ){_fcafb .add (_cdgac );for _dffd :=range _ebccg {if _dfce [_dffd ].has (_cdgac ){_bcfdd .add (_dffd );
};};for _aedcf :=range _ebccg {if _bcfdd .has (_aedcf ){_adbf (_aedcf );};};};};_adbf (_efafa );return _bcfdd ;};func (_bega *imageExtractContext )extractFormImages (_fcdc *_eb .PdfObjectName ,_gff _ce .GraphicsState ,_eaf *_ga .PdfPageResources )error {_eadb ,_dfbe :=_eaf .GetXObjectFormByName (*_fcdc );
if _dfbe !=nil {return _dfbe ;};if _eadb ==nil {return nil ;};_bbge ,_dfbe :=_eadb .GetContentStream ();if _dfbe !=nil {return _dfbe ;};_afd :=_eadb .Resources ;if _afd ==nil {_afd =_eaf ;};_dfbe =_bega .extractContentStreamImages (string (_bbge ),_afd );
if _dfbe !=nil {return _dfbe ;};_bega ._cge ++;return nil ;};func (_bdeac gridTiling )log (_baee string ){if !_babf {return ;};_fd .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_bdeac ._bbba ),len (_bdeac ._adfad ),_baee );
_gd .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_bdeac ._bbba );_gd .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_bdeac ._adfad );for _dbcae ,_cgbf :=range _bdeac ._adfad {_gcgb ,_deggd :=_bdeac ._gcdb [_cgbf ];
if !_deggd {continue ;};_gd .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_dbcae ,_cgbf );for _daadg ,_fbfaf :=range _bdeac ._bbba {_fbeg ,_fcag :=_gcgb [_fbfaf ];if !_fcag {continue ;};_gd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_daadg ,_fbeg .String ());
};};};func (_ffdcee *textTable )emptyCompositeRow (_gdgab int )bool {for _fdba :=0;_fdba < _ffdcee ._ccce ;_fdba ++{if _debb ,_cgce :=_ffdcee ._bfdgbe [_geagf (_fdba ,_gdgab )];_cgce {if len (_debb .paraList )> 0{return false ;};};};return true ;};func (_cfbab *textTable )compositeColCorridors ()map[int ][]float64 {_caec :=make (map[int ][]float64 ,_cfbab ._ccce );
if _edgc {_fd .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_cfbab ._ccce );};for _bfea :=0;_bfea < _cfbab ._ccce ;_bfea ++{_caec [_bfea ]=nil ;
};return _caec ;};type compositeCell struct{_ga .PdfRectangle ;paraList ;};func (_adcf *ruling )alignsPrimary (_adcgc *ruling )bool {return _adcf ._gbcbd ==_adcgc ._gbcbd &&_f .Abs (_adcf ._eeac -_adcgc ._eeac )< _beccb *0.5;};func (_aedgg *structElement )parseStructElement (_egcc _eb .PdfObject ){_fege ,_bdag :=_eb .GetDict (_egcc );
if !_bdag {_fd .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_dcab :=_fege .Get ("\u0053");_fafd :=_fege .Get ("\u0050\u0067");_dfcfe :="";if _dcab !=nil {_dfcfe =_dcab .String ();};_ebad :=_fege .Get ("\u004b");_aedgg ._eaad =_dfcfe ;_aedgg ._egfd =_fafd ;switch _gceg :=_ebad .(type ){case *_eb .PdfObjectInteger :_aedgg ._eaad =_dfcfe ;
_aedgg ._fdeac =int64 (*_gceg );_aedgg ._egfd =_fafd ;case *_eb .PdfObjectReference :_beda :=*_eb .MakeArray (_gceg );var _ddgf int64 =-1;_aedgg ._fdeac =_ddgf ;if _beda .Len ()==1{_cgfcb :=_beda .Elements ()[0];_egcb ,_adcc :=_cgfcb .(*_eb .PdfObjectInteger );
if _adcc {_ddgf =int64 (*_egcb );_aedgg ._fdeac =_ddgf ;_aedgg ._eaad =_dfcfe ;_aedgg ._egfd =_fafd ;return ;};};_aeff :=[]structElement {};for _ ,_dfec :=range _beda .Elements (){_bge ,_cagg :=_dfec .(*_eb .PdfObjectInteger );if _cagg {_ddgf =int64 (*_bge );
_aedgg ._fdeac =_ddgf ;_aedgg ._eaad =_dfcfe ;}else {_efdec :=&structElement {};_efdec .parseStructElement (_dfec );_aeff =append (_aeff ,*_efdec );};_ddgf =-1;};_aedgg ._dafe =_aeff ;case *_eb .PdfObjectArray :_gegbc :=_ebad .(*_eb .PdfObjectArray );var _gbe int64 =-1;
_aedgg ._fdeac =_gbe ;if _gegbc .Len ()==1{_bfbg :=_gegbc .Elements ()[0];_beae ,_cfdg :=_bfbg .(*_eb .PdfObjectInteger );if _cfdg {_gbe =int64 (*_beae );_aedgg ._fdeac =_gbe ;_aedgg ._eaad =_dfcfe ;_aedgg ._egfd =_fafd ;return ;};};_edee :=[]structElement {};
for _ ,_fdbce :=range _gegbc .Elements (){_gbcf ,_gbfc :=_fdbce .(*_eb .PdfObjectInteger );if _gbfc {_gbe =int64 (*_gbcf );_aedgg ._fdeac =_gbe ;_aedgg ._eaad =_dfcfe ;_aedgg ._egfd =_fafd ;}else {_gebe :=&structElement {};_gebe .parseStructElement (_fdbce );
_edee =append (_edee ,*_gebe );};_gbe =-1;};_aedgg ._dafe =_edee ;};};func (_fgbe paraList )computeEBBoxes (){if _dbef {_fd .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_egdf :=range _fgbe {_egdf ._agfgg =_egdf .PdfRectangle ;
};_gbfg :=_fgbe .yNeighbours (0);for _beag ,_ffgb :=range _fgbe {_abag :=_ffgb ._agfgg ;_befd ,_cagb :=-1.0e9,+1.0e9;for _ ,_debd :=range _gbfg [_ffgb ]{_aece :=_fgbe [_debd ]._agfgg ;if _aece .Urx < _abag .Llx {_befd =_f .Max (_befd ,_aece .Urx );}else if _abag .Urx < _aece .Llx {_cagb =_f .Min (_cagb ,_aece .Llx );
};};for _fece ,_bgacd :=range _fgbe {_cddd :=_bgacd ._agfgg ;if _beag ==_fece ||_cddd .Ury > _abag .Lly {continue ;};if _befd <=_cddd .Llx &&_cddd .Llx < _abag .Llx {_abag .Llx =_cddd .Llx ;}else if _cddd .Urx <=_cagb &&_abag .Urx < _cddd .Urx {_abag .Urx =_cddd .Urx ;
};};if _dbef {_gd .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_beag ,_ffgb ._agfgg ,_abag ,_bcbc (_ffgb .text (),50));};_ffgb ._agfgg =_abag ;};if _afgbe {for _ ,_daage :=range _fgbe {_daage .PdfRectangle =_daage ._agfgg ;
};};};func _bfgfa (_fbdcf []float64 ,_cbfc ,_dcdf float64 )[]float64 {_agbeg ,_fdecc :=_cbfc ,_dcdf ;if _fdecc < _agbeg {_agbeg ,_fdecc =_fdecc ,_agbeg ;};_eagd :=make ([]float64 ,0,len (_fbdcf )+2);_eagd =append (_eagd ,_cbfc );for _ ,_ggbb :=range _fbdcf {if _ggbb <=_agbeg {continue ;
}else if _ggbb >=_fdecc {break ;};_eagd =append (_eagd ,_ggbb );};_eagd =append (_eagd ,_dcdf );return _eagd ;};func (_abdd paraList )yNeighbours (_aegc float64 )map[*textPara ][]int {_ecac :=make ([]event ,2*len (_abdd ));if _aegc ==0{for _dfgba ,_aecgf :=range _abdd {_ecac [2*_dfgba ]=event {_aecgf .Lly ,true ,_dfgba };
_ecac [2*_dfgba +1]=event {_aecgf .Ury ,false ,_dfgba };};}else {for _fbaa ,_abea :=range _abdd {_ecac [2*_fbaa ]=event {_abea .Lly -_aegc *_abea .fontsize (),true ,_fbaa };_ecac [2*_fbaa +1]=event {_abea .Ury +_aegc *_abea .fontsize (),false ,_fbaa };
};};return _abdd .eventNeighbours (_ecac );};func _gbd (_beee _ga .PdfRectangle )textState {return textState {_dfbb :100,_ffe :RenderModeFill ,_begb :_beee };};func _ddgc (_eecaa _ga .PdfRectangle )rulingKind {_gegbb :=_eecaa .Width ();_gfff :=_eecaa .Height ();
if _gegbb > _gfff {if _gegbb >=_eegg {return _agge ;};}else {if _gfff >=_eegg {return _dafd ;};};return _gefd ;};func (_dgge *wordBag )removeDuplicates (){if _egfcc {_fd .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_dgge .text ());
};for _ ,_bacd :=range _dgge .depthIndexes (){if len (_dgge ._fced [_bacd ])==0{continue ;};_ffbc :=_dgge ._fced [_bacd ][0];_aafe :=_adac *_ffbc ._febea ;_cebg :=_ffbc ._gdae ;for _ ,_cdgg :=range _dgge .depthBand (_cebg ,_cebg +_aafe ){_dedg :=map[*textWord ]struct{}{};
_ddcde :=_dgge ._fced [_cdgg ];for _ ,_bbdc :=range _ddcde {if _ ,_efdba :=_dedg [_bbdc ];_efdba {continue ;};for _ ,_fgge :=range _ddcde {if _ ,_aadb :=_dedg [_fgge ];_aadb {continue ;};if _fgge !=_bbdc &&_fgge ._eaedb ==_bbdc ._eaedb &&_f .Abs (_fgge .Llx -_bbdc .Llx )< _aafe &&_f .Abs (_fgge .Urx -_bbdc .Urx )< _aafe &&_f .Abs (_fgge .Lly -_bbdc .Lly )< _aafe &&_f .Abs (_fgge .Ury -_bbdc .Ury )< _aafe {_dedg [_fgge ]=struct{}{};
};};};if len (_dedg )> 0{_ggedd :=0;for _ ,_eead :=range _ddcde {if _ ,_bddc :=_dedg [_eead ];!_bddc {_ddcde [_ggedd ]=_eead ;_ggedd ++;};};_dgge ._fced [_cdgg ]=_ddcde [:len (_ddcde )-len (_dedg )];if len (_dgge ._fced [_cdgg ])==0{delete (_dgge ._fced ,_cdgg );
};};};};};var _bbgc string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func (_ebcbd rulingList )vertsHorzs ()(rulingList ,rulingList ){var _cgca ,_facf rulingList ;for _ ,_aaefg :=range _ebcbd {switch _aaefg ._gbcbd {case _dafd :_cgca =append (_cgca ,_aaefg );case _agge :_facf =append (_facf ,_aaefg );};};return _cgca ,_facf ;
};func _bagc (_dddfb ,_dfecg int )int {if _dddfb > _dfecg {return _dddfb ;};return _dfecg ;};func (_dgaa *textObject )renderText (_cbfg _eb .PdfObject ,_adgbb []byte ,_gce int )error {if _dgaa ._dgba {_fd .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_fbf :=_dgaa .getCurrentFont ();_acc :=_fbf .BytesToCharcodes (_adgbb );_dede ,_fbbe ,_gfb :=_fbf .CharcodesToStrings (_acc );if _gfb > 0{_fd .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_fbbe ,_gfb );
};_dgaa ._agb ._febb +=_fbbe ;_dgaa ._agb ._faf +=_gfb ;_gcd :=_dgaa ._agb ;_cfea :=_gcd ._cede ;_aaad :=_gcd ._dfbb /100.0;_fcec :=_edfe ;if _fbf .Subtype ()=="\u0054\u0079\u0070e\u0033"{_fcec =1;};_agea ,_afbb :=_fbf .GetRuneMetrics (' ');if !_afbb {_agea ,_afbb =_fbf .GetCharMetrics (32);
};if !_afbb {_agea ,_ =_ga .DefaultFont ().GetRuneMetrics (' ');};_ddb :=_agea .Wx *_fcec ;_fd .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_ddb ,_dede ,_fbf ,_cfea );
_dbfb :=_fe .NewMatrix (_cfea *_aaad ,0,0,_cfea ,0,_gcd ._cgfg );if _fdag {_fd .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_acc ),_acc ,_dede );
};_fd .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_acc ),_acc ,len (_dede ));_bbdb :=_dgaa .getFillColor ();
_gbge :=_dgaa .getStrokeColor ();for _ebf ,_dbe :=range _dede {_abbf :=[]rune (_dbe );if len (_abbf )==1&&_abbf [0]=='\x00'{continue ;};_edcb :=_acc [_ebf ];_gbaa :=_dgaa ._daa .CTM .Mult (_dgaa ._eabe ).Mult (_dbfb );_egb :=0.0;if len (_abbf )==1&&_abbf [0]==32{_egb =_gcd ._fdbg ;
};_cbda ,_cfcd :=_fbf .GetCharMetrics (_edcb );if !_cfcd {_fd .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_edcb ,_abbf ,_abbf ,_fbf );
return _gd .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_fbf .String (),_edcb );};_baab :=_fe .Point {X :_cbda .Wx *_fcec ,Y :_cbda .Wy *_fcec };
_dfcc :=_fe .Point {X :(_baab .X *_cfea +_egb )*_aaad };_eecg :=_fe .Point {X :(_baab .X *_cfea +_gcd ._bgf +_egb )*_aaad };if _fdag {_fd .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_cfea ,_gcd ._bgf ,_gcd ._fdbg ,_aaad );
_fd .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_baab ,_dfcc ,_eecg );};_ebfd :=_geag (_dfcc );_aabd :=_geag (_eecg );_ffb :=_dgaa ._daa .CTM .Mult (_dgaa ._eabe ).Mult (_ebfd );
if _edge {_fd .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_dgaa ._daa .CTM ,_dgaa ._eabe ,_aabd ,_cfdd (_dgaa ._daa .CTM .Mult (_dgaa ._eabe ).Mult (_aabd )),_ebfd ,_ffb ,_cfdd (_ffb ));
};_cfeg ,_ebcb :=_dgaa .newTextMark (_cf .ExpandLigatures (_abbf ),_gbaa ,_cfdd (_ffb ),_f .Abs (_ddb *_gbaa .ScalingFactorX ()),_fbf ,_dgaa ._agb ._bgf ,_bbdb ,_gbge ,_cbfg ,_dede ,_ebf ,_gce );if !_ebcb {_fd .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _fbf ==nil {_fd .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _fbf .Encoder ()==nil {_fd .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_fbf );
}else {if _aabc ,_ebeg :=_fbf .Encoder ().CharcodeToRune (_edcb );_ebeg {_cfeg ._geae =string (_aabc );};};_fd .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_ebf ,_edcb ,_cfeg ,_gbaa );
_dgaa ._ecgd =append (_dgaa ._ecgd ,&_cfeg );_dgaa ._eabe .Concat (_aabd );};return nil ;};func (_aaacb intSet )del (_cbcbd int ){delete (_aaacb ,_cbcbd )};func _afca (_agdeg float64 )bool {return _f .Abs (_agdeg )< _beccb };

// String returns a description of `p`.
func (_eddf *textPara )String ()string {if _eddf ._aaef {return _gd .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_eddf .PdfRectangle );};_adccb :="";if _eddf ._fcea !=nil {_adccb =_gd .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_eddf ._fcea ._ccce ,_eddf ._fcea ._gddg );
};return _gd .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_eddf .PdfRectangle ,_adccb ,len (_eddf ._afgcbe ),_bcbc (_eddf .text (),50));};func (_cdfg paraList )findGridTables (_dbbdb []gridTiling )[]*textTable {if _edgc {_fd .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_cdfg ));
for _gdfg ,_abcd :=range _cdfg {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gdfg ,_abcd );};};var _dbedb []*textTable ;for _fbgdg ,_adcdf :=range _dbbdb {_aaeb ,_dafde :=_cdfg .findTableGrid (_adcdf );if _aaeb !=nil {_aaeb .log (_gd .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_fbgdg ));
_dbedb =append (_dbedb ,_aaeb );_aaeb .markCells ();};for _eegd :=range _dafde {_eegd ._bgeg =true ;};};if _edgc {_fd .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_dbedb ));
};return _dbedb ;};type markKind int ;func (_cdb *textObject )moveText (_dfc ,_bba float64 ){_cdb .moveLP (_dfc ,_bba )};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_eaaa *Extractor )ExtractTextWithStats ()(_dabb string ,_add int ,_gef int ,_deb error ){_cadg ,_add ,_gef ,_deb :=_eaaa .ExtractPageText ();if _deb !=nil {return "",_add ,_gef ,_deb ;};return _cadg .Text (),_add ,_gef ,nil ;};func _eecb (_ggec bounded )float64 {return -_ggec .bbox ().Lly };
func (_abff *textPara )toCellTextMarks (_cceeda *int )[]TextMark {var _dbcd []TextMark ;for _dbac ,_cefgb :=range _abff ._afgcbe {_caeeb :=_cefgb .toTextMarks (_cceeda );_cdac :=_ecge &&_cefgb .endsInHyphen ()&&_dbac !=len (_abff ._afgcbe )-1;if _cdac {_caeeb =_aebaa (_caeeb ,_cceeda );
};_dbcd =append (_dbcd ,_caeeb ...);if !(_cdac ||_dbac ==len (_abff ._afgcbe )-1){_dbcd =_geaed (_dbcd ,_cceeda ,_aecgg (_cefgb ._acga ,_abff ._afgcbe [_dbac +1]._acga ));};};return _dbcd ;};func _fadd (_bfgg ,_bbcca float64 )bool {return _bfgg /_f .Max (_bgcd ,_bbcca )< _adec };
func (_cdbcd *wordBag )text ()string {_gcbd :=_cdbcd .allWords ();_fgec :=make ([]string ,len (_gcbd ));for _gece ,_eedgg :=range _gcbd {_fgec [_gece ]=_eedgg ._eaedb ;};return _cc .Join (_fgec ,"\u0020");};func _ecfb (_eaff byte )bool {for _ ,_bfdf :=range _aggg {if []byte (_bfdf )[0]==_eaff {return true ;
};};return false ;};

// String returns a human readable description of `vecs`.
func (_egfde rulingList )String ()string {if len (_egfde )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_agdc ,_aegec :=_egfde .vertsHorzs ();_eece :=len (_agdc );_egcd :=len (_aegec );if _eece ==0||_egcd ==0{return _gd .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_eece ,_egcd );
};_gbea :=_ga .PdfRectangle {Llx :_agdc [0]._eeac ,Urx :_agdc [_eece -1]._eeac ,Lly :_aegec [_egcd -1]._eeac ,Ury :_aegec [0]._eeac };return _gd .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_eece ,_egcd ,_gbea );
};func _efgaf (_adbaa []pathSection )rulingList {_gddcc (_adbaa );if _cgab {_fd .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_adbaa ));
};var _faeb rulingList ;for _ ,_gebdb :=range _adbaa {for _ ,_efff :=range _gebdb ._bdbc {if len (_efff ._fag )< 2{continue ;};_agfgb :=_efff ._fag [0];for _ ,_gbgcb :=range _efff ._fag [1:]{if _geaff ,_cgdfc :=_cbdeg (_agfgb ,_gbgcb ,_gebdb .Color );_cgdfc {_faeb =append (_faeb ,_geaff );
};_agfgb =_gbgcb ;};};};if _cgab {_fd .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_faeb );};return _faeb ;};func _efgf (_fddf ,_edccf _fe .Point )bool {_feee :=_f .Abs (_fddf .X -_edccf .X );
_gbdc :=_f .Abs (_fddf .Y -_edccf .Y );return _fadd (_feee ,_gbdc );};func _ebcbb (_dffce ,_gfbec _fe .Point )bool {_afdfa :=_f .Abs (_dffce .X -_gfbec .X );_bcfb :=_f .Abs (_dffce .Y -_gfbec .Y );return _fadd (_bcfb ,_afdfa );};type fontEntry struct{_fgda *_ga .PdfFont ;
_caa int64 ;};

// String returns a string describing `tm`.
func (_ddca TextMark )String ()string {_bdf :=_ddca .BBox ;var _gfa string ;if _ddca .Font !=nil {_gfa =_ddca .Font .String ();if len (_gfa )> 50{_gfa =_gfa [:50]+"\u002e\u002e\u002e";};};var _fbfb string ;if _ddca .Meta {_fbfb ="\u0020\u002a\u004d\u002a";
};return _gd .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_ddca .Offset ,_ddca .Text ,[]rune (_ddca .Text ),_bdf .Llx ,_bdf .Lly ,_bdf .Urx ,_bdf .Ury ,_gfa ,_fbfb );
};func _dacb (_becd ,_faece _fe .Point )rulingKind {_dgce :=_f .Abs (_becd .X -_faece .X );_dfea :=_f .Abs (_becd .Y -_faece .Y );return _cdfc (_dgce ,_dfea ,_adec );};func (_eede paraList )merge ()*textPara {_fd .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eede ));
if len (_eede )==0{return nil ;};_eede .sortReadingOrder ();_fefd :=_eede [0].PdfRectangle ;_bceb :=_eede [0]._afgcbe ;for _ ,_bdbg :=range _eede [1:]{_fefd =_aefc (_fefd ,_bdbg .PdfRectangle );_bceb =append (_bceb ,_bdbg ._afgcbe ...);};return _fedgg (_fefd ,_bceb );
};func _cfdd (_afc _fe .Matrix )_fe .Point {_bfd ,_aca :=_afc .Translation ();return _fe .Point {X :_bfd ,Y :_aca };};func (_afeb *textPara )text ()string {_agba :=new (_ec .Buffer );_afeb .writeText (_agba );return _agba .String ();};func (_bcfcb paraList )llyOrdering ()[]int {_defc :=make ([]int ,len (_bcfcb ));
for _eabd :=range _bcfcb {_defc [_eabd ]=_eabd ;};_ed .SliceStable (_defc ,func (_gaad ,_ccfdg int )bool {_cade ,_beeed :=_defc [_gaad ],_defc [_ccfdg ];return _bcfcb [_cade ].Lly < _bcfcb [_beeed ].Lly ;});return _defc ;};func (_agcea paraList )findTables (_bbbf []gridTiling )[]*textTable {_agcea .addNeighbours ();
_ed .Slice (_agcea ,func (_ccdac ,_dcfff int )bool {return _fac (_agcea [_ccdac ],_agcea [_dcfff ])< 0});var _bfcg []*textTable ;if _aecd {_cgfd :=_agcea .findGridTables (_bbbf );_bfcg =append (_bfcg ,_cgfd ...);};if _bffb {_bdac :=_agcea .findTextTables ();
_bfcg =append (_bfcg ,_bdac ...);};return _bfcg ;};func (_gagd *textObject )reset (){_gagd ._eabe =_fe .IdentityMatrix ();_gagd ._cgb =_fe .IdentityMatrix ();_gagd ._ecgd =nil ;};func (_ddce *shapesState )moveTo (_ggeb ,_bbc float64 ){_ddce ._dfbg =true ;
_ddce ._eae =_ddce .devicePoint (_ggeb ,_bbc );if _cbdea {_fd .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_ggeb ,_bbc ,_ddce ._eae );
};};func _cbdeg (_fbdff ,_fagba _fe .Point ,_gdebd _g .Color )(*ruling ,bool ){_bdbgg :=lineRuling {_degd :_fbdff ,_bbfg :_fagba ,_gfdg :_cdcd (_fbdff ,_fagba ),Color :_gdebd };if _bdbgg ._gfdg ==_gefd {return nil ,false ;};return _bdbgg .asRuling ();};
func (_fdea *shapesState )clearPath (){_fdea ._bcdg =nil ;_fdea ._dfbg =false ;if _cbdea {_fd .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_fdea );};};

// Tables returns the tables extracted from the page.
func (_cegf PageText )Tables ()[]TextTable {if _edgc {_fd .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_cegf ._aeba ));};return _cegf ._aeba ;};func (_dffde *textTable )growTable (){_dfafc :=func (_bcfbf paraList ){_dffde ._gddg ++;
for _acae :=0;_acae < _dffde ._ccce ;_acae ++{_fccg :=_bcfbf [_acae ];_dffde .put (_acae ,_dffde ._gddg -1,_fccg );};};_cfgg :=func (_dfbed paraList ){_dffde ._ccce ++;for _gdebf :=0;_gdebf < _dffde ._gddg ;_gdebf ++{_dfga :=_dfbed [_gdebf ];_dffde .put (_dffde ._ccce -1,_gdebf ,_dfga );
};};if _cdeec {_dffde .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _cfca :=0;;_cfca ++{_eadad :=false ;_acgf :=_dffde .getDown ();_gedga :=_dffde .getRight ();if _cdeec {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfca ,_dffde );
_gd .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_acgf );_gd .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_gedga );};if _acgf !=nil &&_gedga !=nil {_fffae :=_acgf [len (_acgf )-1];
if !_fffae .taken ()&&_fffae ==_gedga [len (_gedga )-1]{_dfafc (_acgf );if _gedga =_dffde .getRight ();_gedga !=nil {_cfgg (_gedga );_dffde .put (_dffde ._ccce -1,_dffde ._gddg -1,_fffae );};_eadad =true ;};};if !_eadad &&_acgf !=nil {_dfafc (_acgf );_eadad =true ;
};if !_eadad &&_gedga !=nil {_cfgg (_gedga );_eadad =true ;};if !_eadad {break ;};};};func (_badbe paraList )list ()[]*list {var _dgcd []*textLine ;var _cfgf []*textLine ;for _ ,_ggbaf :=range _badbe {_agbe :=_ggbaf .getListLines ();_dgcd =append (_dgcd ,_agbe ...);
_cfgf =append (_cfgf ,_ggbaf ._afgcbe ...);};_fdbeca :=_dacf (_dgcd );_dgbcd :=_fbdd (_cfgf ,_fdbeca );return _dgbcd ;};type paraList []*textPara ;func (_def *textObject )setTextRise (_cbeg float64 ){if _def ==nil {return ;};_def ._agb ._cgfg =_cbeg ;};
func _cdfge (_ffbf *PageText )error {_gbba :=_cb .GetLicenseKey ();if _gbba !=nil &&_gbba .IsLicensed ()||_da {return nil ;};_gd .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_gd .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _a .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};const (_dbef =false ;_bfgc =false ;_cgbb =false ;_edge =false ;_cbdea =false ;_fdag =false ;
_dgf =false ;_eddg =false ;_cacg =false ;_bggf =_cacg &&true ;_bbeg =_bggf &&false ;_egfcc =_cacg &&true ;_edgc =false ;_cdeec =_edgc &&false ;_bebe =_edgc &&true ;_cgab =false ;_fdfda =_cgab &&false ;_fcdf =_cgab &&false ;_babf =_cgab &&true ;_eddgb =_cgab &&false ;
_effe =_cgab &&false ;);type imageExtractContext struct{_bdd []ImageMark ;_ae int ;_eg int ;_cge int ;_dbge map[*_eb .PdfObjectStream ]*cachedImage ;_gccf *ImageExtractOptions ;};func _geag (_cdbb _fe .Point )_fe .Matrix {return _fe .TranslationMatrix (_cdbb .X ,_cdbb .Y )};
func _gbcc (_aedc ,_bdad bounded )float64 {_fcabf :=_dbaaf (_aedc ,_bdad );if !_dcaed (_fcabf ){return _fcabf ;};return _fbec (_aedc ,_bdad );};func (_fcda *subpath )close (){if !_dccg (_fcda ._fag [0],_fcda .last ()){_fcda .add (_fcda ._fag [0]);};_fcda ._cabg =true ;
_fcda .removeDuplicates ();};func (_fgfe *textObject )getStrokeColor ()_g .Color {return _bfggc (_fgfe ._daa .ColorspaceStroking ,_fgfe ._daa .ColorStroking );};var _dggd *_d .Regexp =_d .MustCompile (_edgef +"\u007c"+_bbgc );func (_ccd *stateStack )top ()*textState {if _ccd .empty (){return nil ;
};return (*_ccd )[_ccd .size ()-1];};

// String returns a human readable description of `path`.
func (_feed *subpath )String ()string {_fgba :=_feed ._fag ;_cabge :=len (_fgba );if _cabge <=5{return _gd .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_cabge ,_fgba );};return _gd .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_cabge ,_fgba [0],_fgba [1],_fgba [_cabge -1]);
};func (_efafd compositeCell )split (_gacgf ,_gafg []float64 )*textTable {_aecbg :=len (_gacgf )+1;_effa :=len (_gafg )+1;if _edgc {_fd .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_effa ,_aecbg ,_efafd ,_gacgf ,_gafg );
_gd .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_efafd .paraList ));for _cfgee ,_fdec :=range _efafd .paraList {_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cfgee ,_fdec .String ());
};_gd .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_efafd .lines ()));for _dffc ,_cebc :=range _efafd .lines (){_gd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dffc ,_cebc );};};_gacgf =_bfgfa (_gacgf ,_efafd .Ury ,_efafd .Lly );
_gafg =_bfgfa (_gafg ,_efafd .Llx ,_efafd .Urx );_ccefb :=make (map[uint64 ]*textPara ,_effa *_aecbg );_ebaa :=textTable {_ccce :_effa ,_gddg :_aecbg ,_aaee :_ccefb };_ddee :=_efafd .paraList ;_ed .Slice (_ddee ,func (_ffaf ,_cccbe int )bool {_geed ,_aaea :=_ddee [_ffaf ],_ddee [_cccbe ];
_becae ,_fbee :=_geed .Lly ,_aaea .Lly ;if _becae !=_fbee {return _becae < _fbee ;};return _geed .Llx < _aaea .Llx ;});_gbbfb :=make (map[uint64 ]_ga .PdfRectangle ,_effa *_aecbg );for _efddg ,_acec :=range _gacgf [1:]{_bbgcf :=_gacgf [_efddg ];for _fbgd ,_cbbfc :=range _gafg [1:]{_gaeb :=_gafg [_fbgd ];
_gbbfb [_geagf (_fbgd ,_efddg )]=_ga .PdfRectangle {Llx :_gaeb ,Urx :_cbbfc ,Lly :_acec ,Ury :_bbgcf };};};if _edgc {_fd .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_gd .Printf ("\u0020\u0020\u0020\u0020");for _ffbcd :=0;_ffbcd < _effa ;_ffbcd ++{_gd .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_ffbcd );};_gd .Println ();for _dbcdb :=0;_dbcdb < _aecbg ;_dbcdb ++{_gd .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_dbcdb );
for _bddff :=0;_bddff < _effa ;_bddff ++{_gd .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_gbbfb [_geagf (_bddff ,_dbcdb )]);};_gd .Println ();};};_fecb :=func (_eefbe *textLine )(int ,int ){for _gafa :=0;_gafa < _aecbg ;_gafa ++{for _cgdd :=0;_cgdd < _effa ;
_cgdd ++{if _bcda (_gbbfb [_geagf (_cgdd ,_gafa )],_eefbe .PdfRectangle ){return _cgdd ,_gafa ;};};};return -1,-1;};_gddfba :=make (map[uint64 ][]*textLine ,_effa *_aecbg );for _ ,_cbad :=range _ddee .lines (){_ccbbg ,_eggcf :=_fecb (_cbad );if _ccbbg < 0{continue ;
};_gddfba [_geagf (_ccbbg ,_eggcf )]=append (_gddfba [_geagf (_ccbbg ,_eggcf )],_cbad );};for _aceg :=0;_aceg < len (_gacgf )-1;_aceg ++{_ddbece :=_gacgf [_aceg ];_dced :=_gacgf [_aceg +1];for _efbdf :=0;_efbdf < len (_gafg )-1;_efbdf ++{_aeec :=_gafg [_efbdf ];
_afaf :=_gafg [_efbdf +1];_aabab :=_ga .PdfRectangle {Llx :_aeec ,Urx :_afaf ,Lly :_dced ,Ury :_ddbece };_cfffd :=_gddfba [_geagf (_efbdf ,_aceg )];if len (_cfffd )==0{continue ;};_gdbb :=_fedgg (_aabab ,_cfffd );_ebaa .put (_efbdf ,_aceg ,_gdbb );};};
return &_ebaa ;};func (_bdea rulingList )augmentGrid ()(rulingList ,rulingList ){_fcabfg ,_egbf :=_bdea .vertsHorzs ();if len (_fcabfg )==0||len (_egbf )==0{return _fcabfg ,_egbf ;};_abee ,_gcag :=_fcabfg ,_egbf ;_gfcd :=_fcabfg .bbox ();_aaagd :=_egbf .bbox ();
if _cgab {_fd .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_gfcd );_fd .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_aaagd );
};var _bfdef ,_dgdcg ,_cgbd ,_babfe *ruling ;if _aaagd .Llx < _gfcd .Llx -_efde {_bfdef =&ruling {_dagg :_caag ,_gbcbd :_dafd ,_eeac :_aaagd .Llx ,_bdbd :_gfcd .Lly ,_deaad :_gfcd .Ury };_fcabfg =append (rulingList {_bfdef },_fcabfg ...);};if _aaagd .Urx > _gfcd .Urx +_efde {_dgdcg =&ruling {_dagg :_caag ,_gbcbd :_dafd ,_eeac :_aaagd .Urx ,_bdbd :_gfcd .Lly ,_deaad :_gfcd .Ury };
_fcabfg =append (_fcabfg ,_dgdcg );};if _gfcd .Lly < _aaagd .Lly -_efde {_cgbd =&ruling {_dagg :_caag ,_gbcbd :_agge ,_eeac :_gfcd .Lly ,_bdbd :_aaagd .Llx ,_deaad :_aaagd .Urx };_egbf =append (rulingList {_cgbd },_egbf ...);};if _gfcd .Ury > _aaagd .Ury +_efde {_babfe =&ruling {_dagg :_caag ,_gbcbd :_agge ,_eeac :_gfcd .Ury ,_bdbd :_aaagd .Llx ,_deaad :_aaagd .Urx };
_egbf =append (_egbf ,_babfe );};if len (_fcabfg )+len (_egbf )==len (_bdea ){return _abee ,_gcag ;};_edbea :=append (_fcabfg ,_egbf ...);_bdea .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_edbea .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _fcabfg ,_egbf ;};func (_dbed lineRuling )yMean ()float64 {return 0.5*(_dbed ._degd .Y +_dbed ._bbfg .Y )};var _edgef string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";
func (_cgg *textObject )moveTextSetLeading (_cdef ,_aedg float64 ){_cgg ._agb ._aaag =-_aedg ;_cgg .moveLP (_cdef ,_aedg );};func (_bggd *ruling )alignsSec (_fbbea *ruling )bool {const _ceddc =_beccb +1.0;return _bggd ._bdbd -_ceddc <=_fbbea ._deaad &&_fbbea ._bdbd -_ceddc <=_bggd ._deaad ;
};func (_aceeg *textTable )getDown ()paraList {_fdgdf :=make (paraList ,_aceeg ._ccce );for _efae :=0;_efae < _aceeg ._ccce ;_efae ++{_dadf :=_aceeg .get (_efae ,_aceeg ._gddg -1)._fcbb ;if _dadf .taken (){return nil ;};_fdgdf [_efae ]=_dadf ;};for _bgddc :=0;
_bgddc < _aceeg ._ccce -1;_bgddc ++{if _fdgdf [_bgddc ]._beaeb !=_fdgdf [_bgddc +1]{return nil ;};};return _fdgdf ;};type textMark struct{_ga .PdfRectangle ;_aegf int ;_fbbef string ;_geae string ;_bdbf *_ga .PdfFont ;_dfbea float64 ;_cgfe float64 ;_cdcg _fe .Matrix ;
_ecdc _fe .Point ;_ebcbe _ga .PdfRectangle ;_bbde _g .Color ;_bfdga _g .Color ;_cadf _eb .PdfObject ;_faag []string ;Tw float64 ;Th float64 ;_aaeg int ;_eeff int ;};func (_efgc *textTable )emptyCompositeColumn (_dgcec int )bool {for _bfbgd :=0;_bfbgd < _efgc ._gddg ;
_bfbgd ++{if _dfgb ,_aebba :=_efgc ._bfdgbe [_geagf (_dgcec ,_bfbgd )];_aebba {if len (_dfgb .paraList )> 0{return false ;};};};return true ;};