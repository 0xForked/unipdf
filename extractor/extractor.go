//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_ba "bytes";_af "errors";_dg "fmt";_gb "github.com/unidoc/unipdf/v3/common";_ff "github.com/unidoc/unipdf/v3/contentstream";_fb "github.com/unidoc/unipdf/v3/core";_bd "github.com/unidoc/unipdf/v3/internal/license";_ea "github.com/unidoc/unipdf/v3/internal/textencoding";
_cc "github.com/unidoc/unipdf/v3/internal/transform";_gf "github.com/unidoc/unipdf/v3/model";_fc "golang.org/x/text/unicode/norm";_ae "golang.org/x/xerrors";_b "image/color";_e "io";_f "math";_c "regexp";_afa "sort";_g "strings";_cd "unicode";_d "unicode/utf8";
);func (_cefg *textObject )setTextRenderMode (_faa int ){if _cefg ==nil {return ;};_cefg ._ffcb ._eaae =RenderMode (_faa );};func (_dfgb *wordBag )removeDuplicates (){if _eada {_gb .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_dfgb .text ());
};for _ ,_ecece :=range _dfgb .depthIndexes (){if len (_dfgb ._dgbad [_ecece ])==0{continue ;};_feggb :=_dfgb ._dgbad [_ecece ][0];_dfdb :=_gfgfb *_feggb ._abcda ;_ecee :=_feggb ._ffbae ;for _ ,_ebgbe :=range _dfgb .depthBand (_ecee ,_ecee +_dfdb ){_fgacd :=map[*textWord ]struct{}{};
_bbeb :=_dfgb ._dgbad [_ebgbe ];for _ ,_dddd :=range _bbeb {if _ ,_bcbf :=_fgacd [_dddd ];_bcbf {continue ;};for _ ,_cfge :=range _bbeb {if _ ,_cebda :=_fgacd [_cfge ];_cebda {continue ;};if _cfge !=_dddd &&_cfge ._bbgf ==_dddd ._bbgf &&_f .Abs (_cfge .Llx -_dddd .Llx )< _dfdb &&_f .Abs (_cfge .Urx -_dddd .Urx )< _dfdb &&_f .Abs (_cfge .Lly -_dddd .Lly )< _dfdb &&_f .Abs (_cfge .Ury -_dddd .Ury )< _dfdb {_fgacd [_cfge ]=struct{}{};
};};};if len (_fgacd )> 0{_gacge :=0;for _ ,_geff :=range _bbeb {if _ ,_ddfc :=_fgacd [_geff ];!_ddfc {_bbeb [_gacge ]=_geff ;_gacge ++;};};_dfgb ._dgbad [_ebgbe ]=_bbeb [:len (_bbeb )-len (_fgacd )];if len (_dfgb ._dgbad [_ebgbe ])==0{delete (_dfgb ._dgbad ,_ebgbe );
};};};};};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = ï¿½).
func (_bfc *Extractor )ExtractText ()(string ,error ){_dag ,_ ,_ ,_bec :=_bfc .ExtractTextWithStats ();return _dag ,_bec ;};func (_acdb *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_baae :=make (map[int ]map[*textWord ]struct{},len (_acdb ._dgbad ));
for _ffdc :=range _acdb ._dgbad {_baae [_ffdc ]=make (map[*textWord ]struct{});};return _baae ;};func _aefg (_cgdcd []TextMark ,_gbae *int ,_faaca TextMark )[]TextMark {_faaca .Offset =*_gbae ;_cgdcd =append (_cgdcd ,_faaca );*_gbae +=len (_faaca .Text );
return _cgdcd ;};type textObject struct{_adad *Extractor ;_ffe *_gf .PdfPageResources ;_bca _ff .GraphicsState ;_ffcb *textState ;_cbac *stateStack ;_dcg _cc .Matrix ;_fga _cc .Matrix ;_ddbe []*textMark ;_aea bool ;};func (_aaeag *wordBag )firstReadingIndex (_cgdb int )int {_bagb :=_aaeag .firstWord (_cgdb )._abcda ;
_badag :=float64 (_cgdb +1)*_gcfb ;_fbd :=_badag +_bcfe *_bagb ;_fdeb :=_cgdb ;for _ ,_gfe :=range _aaeag .depthBand (_badag ,_fbd ){if _gbfa (_aaeag .firstWord (_gfe ),_aaeag .firstWord (_fdeb ))< 0{_fdeb =_gfe ;};};return _fdeb ;};func (_cfc *textObject )moveText (_dccd ,_egd float64 ){_cfc .moveLP (_dccd ,_egd )};
func (_aabc rulingList )secMinMax ()(float64 ,float64 ){_bcdde ,_gcfdd :=_aabc [0]._fcdfd ,_aabc [0]._gecf ;for _ ,_dagb :=range _aabc [1:]{if _dagb ._fcdfd < _bcdde {_bcdde =_dagb ._fcdfd ;};if _dagb ._gecf > _gcfdd {_gcfdd =_dagb ._gecf ;};};return _bcdde ,_gcfdd ;
};func _beeg (_fcbe *wordBag ,_gcff float64 ,_fgaa ,_aadd rulingList )[]*wordBag {var _fbfa []*wordBag ;for _ ,_dbae :=range _fcbe .depthIndexes (){_bagcd :=false ;for !_fcbe .empty (_dbae ){_cgda :=_fcbe .firstReadingIndex (_dbae );_defaa :=_fcbe .firstWord (_cgda );
_acfb :=_dgbe (_defaa ,_gcff ,_fgaa ,_aadd );_fcbe .removeWord (_defaa ,_cgda );if _aacb {_gb .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_defaa .String ());};for _dbbfg :=true ;_dbbfg ;
_dbbfg =_bagcd {_bagcd =false ;_gacd :=_eddga *_acfb ._aed ;_fgecc :=_bgfc *_acfb ._aed ;_ecba :=_dace *_acfb ._aed ;if _aacb {_gb .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_acfb .minDepth (),_acfb .maxDepth (),_ecba ,_fgecc );
};if _fcbe .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_acfb ,_abeg (_gfcd ,0),_acfb .minDepth ()-_ecba ,_acfb .maxDepth ()+_ecba ,_fgcfg ,false ,false )> 0{_bagcd =true ;};if _fcbe .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_acfb ,_abeg (_gfcd ,_fgecc ),_acfb .minDepth (),_acfb .maxDepth (),_gddf ,false ,false )> 0{_bagcd =true ;
};if _bagcd {continue ;};_gagd :=_fcbe .scanBand ("",_acfb ,_abeg (_ccfb ,_gacd ),_acfb .minDepth (),_acfb .maxDepth (),_cgfd ,true ,false );if _gagd > 0{_edfde :=(_acfb .maxDepth ()-_acfb .minDepth ())/_acfb ._aed ;if (_gagd > 1&&float64 (_gagd )> 0.3*_edfde )||_gagd <=10{if _fcbe .scanBand ("\u006f\u0074\u0068e\u0072",_acfb ,_abeg (_ccfb ,_gacd ),_acfb .minDepth (),_acfb .maxDepth (),_cgfd ,false ,true )> 0{_bagcd =true ;
};};};};_fbfa =append (_fbfa ,_acfb );};};return _fbfa ;};

// String returns a description of `t`.
func (_dbcgd *textTable )String ()string {return _dg .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_dbcgd ._edbb ,_dbcgd ._debd ,_dbcgd ._cgdaa );};func _bded (_geefg float64 ,_edde int )int {if _edde ==0{_edde =1;};_gggbc :=float64 (_edde );
return int (_f .Round (_geefg /_gggbc )*_gggbc );};func (_edge compositeCell )hasLines (_bcgcf []*textLine )bool {for _efgd ,_cbgd :=range _bcgcf {_fbee :=_ccd (_edge .PdfRectangle ,_cbgd .PdfRectangle );if _dfad {_dg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_fbee ,_efgd ,len (_bcgcf ));
_dg .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_edge );_dg .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_cbgd );};if _fbee {return true ;
};};return false ;};func (_dfgda gridTile )complete ()bool {return _dfgda .numBorders ()==4};func (_aff *textObject )setTextMatrix (_egfd []float64 ){if len (_egfd )!=6{_gb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_egfd ));
return ;};_geg ,_ecg ,_fcf ,_dgda ,_cbae ,_bced :=_egfd [0],_egfd [1],_egfd [2],_egfd [3],_egfd [4],_egfd [5];_aff ._dcg =_cc .NewMatrix (_geg ,_ecg ,_fcf ,_dgda ,_cbae ,_bced );_aff ._fga =_aff ._dcg ;};var _gabf =map[markKind ]string {_dbca :"\u0073\u0074\u0072\u006f\u006b\u0065",_aggge :"\u0066\u0069\u006c\u006c",_cdcc :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func (_gdga *textObject )setCharSpacing (_efe float64 ){if _gdga ==nil {return ;};_gdga ._ffcb ._bgd =_efe ;if _dge {_gb .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_efe ,_gdga ._ffcb .String ());
};};func _fbfbd (_dbad _gf .PdfRectangle ,_gbfb ,_efcga ,_ggbb ,_dcac *ruling )gridTile {_dcggb :=_dbad .Llx ;_cfdfb :=_dbad .Urx ;_gcgg :=_dbad .Lly ;_cbba :=_dbad .Ury ;return gridTile {PdfRectangle :_dbad ,_gbadg :_gbfb !=nil &&_gbfb .encloses (_gcgg ,_cbba ),_dfeb :_efcga !=nil &&_efcga .encloses (_gcgg ,_cbba ),_gdeaa :_ggbb !=nil &&_ggbb .encloses (_dcggb ,_cfdfb ),_faab :_dcac !=nil &&_dcac .encloses (_dcggb ,_cfdfb )};
};func _gegb (_cga ,_cbeg _gf .PdfRectangle )bool {return _cbeg .Llx <=_cga .Urx &&_cga .Llx <=_cbeg .Urx };func _dbfg (_gfgfe []*textMark ,_gbg _gf .PdfRectangle ,_ecec rulingList ,_efag []gridTiling )paraList {_gb .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_gfgfe ),_gbg );
if len (_gfgfe )==0{return nil ;};_fcfb :=_cefdd (_gfgfe ,_gbg );if len (_fcfb )==0{return nil ;};_ecec .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_cdf ,_gbef :=_ecec .vertsHorzs ();_bcded :=_gfabc (_fcfb ,_gbg .Ury ,_cdf ,_gbef );
_fgee :=_beeg (_bcded ,_gbg .Ury ,_cdf ,_gbef );_fgee =_cbgc (_fgee );_cgfc :=make (paraList ,0,len (_fgee ));for _ ,_eccdf :=range _fgee {_effe :=_eccdf .arrangeText ();if _effe !=nil {_cgfc =append (_cgfc ,_effe );};};if len (_cgfc )>=_dgbb {_cgfc =_cgfc .extractTables (_efag );
};_cgfc .sortReadingOrder ();_cgfc .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _cgfc ;};type fontEntry struct{_fgcf *_gf .PdfFont ;_facf int64 ;};type stateStack []*textState ;


// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_deff []TextMark };

// Append appends `mark` to the mark array.
func (_gacf *TextMarkArray )Append (mark TextMark ){_gacf ._deff =append (_gacf ._deff ,mark )};func _dcdgc (_dfbe ,_gdcgb int )int {if _dfbe > _gdcgb {return _dfbe ;};return _gdcgb ;};func (_fg *imageExtractContext )extractInlineImage (_eaf *_ff .ContentStreamInlineImage ,_fbb _ff .GraphicsState ,_dda *_gf .PdfPageResources )error {_cbc ,_aeb :=_eaf .ToImage (_dda );
if _aeb !=nil {return _aeb ;};_ec ,_aeb :=_eaf .GetColorSpace (_dda );if _aeb !=nil {return _aeb ;};if _ec ==nil {_ec =_gf .NewPdfColorspaceDeviceGray ();};_fcc ,_aeb :=_ec .ImageToRGB (*_cbc );if _aeb !=nil {return _aeb ;};_fgb :=ImageMark {Image :&_fcc ,Width :_fbb .CTM .ScalingFactorX (),Height :_fbb .CTM .ScalingFactorY (),Angle :_fbb .CTM .Angle ()};
_fgb .X ,_fgb .Y =_fbb .CTM .Translation ();_fg ._cde =append (_fg ._cde ,_fgb );_fg ._dc ++;return nil ;};func _gcga (_abcbd string ,_ebdb []rulingList ){_gb .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_ebdb ),_abcbd );
for _feada ,_bdgbf :=range _ebdb {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_feada ,_bdgbf .String ());};};func (_bgeg *textObject )renderText (_bbdg []byte )error {if _bgeg ._aea {_gb .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_ddbd :=_bgeg .getCurrentFont ();_ggec :=_ddbd .BytesToCharcodes (_bbdg );_aeag ,_aad ,_beb :=_ddbd .CharcodesToStrings (_ggec );if _beb > 0{_gb .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_aad ,_beb );
};_bgeg ._ffcb ._dcca +=_aad ;_bgeg ._ffcb ._dde +=_beb ;_bcag :=_bgeg ._ffcb ;_egg :=_bcag ._fbe ;_bdf :=_bcag ._dabf /100.0;_eda :=_cbad ;if _ddbd .Subtype ()=="\u0054\u0079\u0070e\u0033"{_eda =1;};_dgba ,_deef :=_ddbd .GetRuneMetrics (' ');if !_deef {_dgba ,_deef =_ddbd .GetCharMetrics (32);
};if !_deef {_dgba ,_ =_gf .DefaultFont ().GetRuneMetrics (' ');};_febg :=_dgba .Wx *_eda ;_gb .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_febg ,_aeag ,_ddbd ,_egg );
_fbbg :=_cc .NewMatrix (_egg *_bdf ,0,0,_egg ,0,_bcag ._aabf );if _dge {_gb .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_ggec ),_ggec ,_aeag );
};_gb .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_ggec ),_ggec ,len (_aeag ));_ged :=_bgeg .getFillColor ();
_fed :=_bgeg .getStrokeColor ();for _dff ,_egb :=range _aeag {_dbb :=[]rune (_egb );if len (_dbb )==1&&_dbb [0]=='\x00'{continue ;};_abc :=_ggec [_dff ];_bcb :=_bgeg ._bca .CTM .Mult (_bgeg ._dcg ).Mult (_fbbg );_ggfa :=0.0;if len (_dbb )==1&&_dbb [0]==32{_ggfa =_bcag ._bccc ;
};_ecd ,_edd :=_ddbd .GetCharMetrics (_abc );if !_edd {_gb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_abc ,_dbb ,_dbb ,_ddbd );
return _dg .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_ddbd .String (),_abc );};_ccb :=_cc .Point {X :_ecd .Wx *_eda ,Y :_ecd .Wy *_eda };
_afgd :=_cc .Point {X :(_ccb .X *_egg +_ggfa )*_bdf };_eff :=_cc .Point {X :(_ccb .X *_egg +_bcag ._bgd +_ggfa )*_bdf };if _dge {_gb .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_egg ,_bcag ._bgd ,_bcag ._bccc ,_bdf );
_gb .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_ccb ,_afgd ,_eff );};_bed :=_ebb (_afgd );_cfdf :=_ebb (_eff );_edgc :=_bgeg ._bca .CTM .Mult (_bgeg ._dcg ).Mult (_bed );
if _ccfc {_gb .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_bgeg ._bca .CTM ,_bgeg ._dcg ,_cfdf ,_dac (_bgeg ._bca .CTM .Mult (_bgeg ._dcg ).Mult (_cfdf )),_bed ,_edgc ,_dac (_edgc ));
};_afff ,_cgc :=_bgeg .newTextMark (_ea .ExpandLigatures (_dbb ),_bcb ,_dac (_edgc ),_f .Abs (_febg *_bcb .ScalingFactorX ()),_ddbd ,_bgeg ._ffcb ._bgd ,_ged ,_fed );if !_cgc {_gb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _ddbd ==nil {_gb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _ddbd .Encoder ()==nil {_gb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_ddbd );
}else {if _gbdb ,_fab :=_ddbd .Encoder ().CharcodeToRune (_abc );_fab {_afff ._eccgf =string (_gbdb );};};_gb .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_dff ,_abc ,_afff ,_bcb );
_bgeg ._ddbe =append (_bgeg ._ddbe ,&_afff );_bgeg ._dcg .Concat (_cfdf );};return nil ;};

// PageText represents the layout of text on a device page.
type PageText struct{_dfcg []*textMark ;_bccf string ;_eagg []TextMark ;_bcg []TextTable ;_efcg _gf .PdfRectangle ;_fbg []pathSection ;_cfcc []pathSection ;};func (_gce *imageExtractContext )extractContentStreamImages (_df string ,_agd *_gf .PdfPageResources )error {_dadc :=_ff .NewContentStreamParser (_df );
_dcd ,_deg :=_dadc .Parse ();if _deg !=nil {return _deg ;};if _gce ._abg ==nil {_gce ._abg =map[*_fb .PdfObjectStream ]*cachedImage {};};if _gce ._gfg ==nil {_gce ._gfg =&ImageExtractOptions {};};_dgd :=_ff .NewContentStreamProcessor (*_dcd );_dgd .AddHandler (_ff .HandlerConditionEnumAllOperands ,"",_gce .processOperand );
return _dgd .Process (_agd );};func (_eeed rulingList )blocks (_bgbdc ,_bbdc *ruling )bool {if _bgbdc ._fcdfd > _bbdc ._gecf ||_bbdc ._fcdfd > _bgbdc ._gecf {return false ;};_ddbg :=_f .Max (_bgbdc ._fcdfd ,_bbdc ._fcdfd );_ccfca :=_f .Min (_bgbdc ._gecf ,_bbdc ._gecf );
if _bgbdc ._cegc > _bbdc ._cegc {_bgbdc ,_bbdc =_bbdc ,_bgbdc ;};for _ ,_bbbg :=range _eeed {if _bgbdc ._cegc <=_bbbg ._cegc +_adgc &&_bbbg ._cegc <=_bbdc ._cegc +_adgc &&_bbbg ._fcdfd <=_ccfca &&_ddbg <=_bbbg ._gecf {return true ;};};return false ;};func (_aaeea *shapesState )fill (_gfcg *[]pathSection ){_ggage :=pathSection {_afcf :_aaeea ._bgga ,Color :_aaeea ._ffde .getFillColor ()};
*_gfcg =append (*_gfcg ,_ggage );if _gggbb {_gcge :=_ggage .bbox ();_dg .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_gfcg ),len (_ggage ._afcf ),_aaeea ,_ggage .Color ,_gcge ,_gcge .Width (),_gcge .Height ());
if _ebbf {for _dbf ,_dage :=range _ggage ._afcf {_dg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dbf ,_dage );if _dbf ==10{break ;};};};};};func (_bac *textPara )depth ()float64 {if _bac ._aged {return -1.0;};if len (_bac ._effa )> 0{return _bac ._effa [0]._fcfag ;
};return _bac ._dgbc .depth ();};

// Tables returns the tables extracted from the page.
func (_daa PageText )Tables ()[]TextTable {if _dfad {_gb .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_daa ._bcg ));};return _daa ._bcg ;};func (_afdb rectRuling )asRuling ()(*ruling ,bool ){_decc :=ruling {_ffedb :_afdb ._caea ,Color :_afdb .Color ,_fgae :_aggge };
switch _afdb ._caea {case _bcaf :_decc ._cegc =0.5*(_afdb .Llx +_afdb .Urx );_decc ._fcdfd =_afdb .Lly ;_decc ._gecf =_afdb .Ury ;_acgb ,_geeb :=_afdb .checkWidth (_afdb .Llx ,_afdb .Urx );if !_geeb {if _cbaa {_gb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_afdb );
};return nil ,false ;};_decc ._fcdad =_acgb ;case _gbbge :_decc ._cegc =0.5*(_afdb .Lly +_afdb .Ury );_decc ._fcdfd =_afdb .Llx ;_decc ._gecf =_afdb .Urx ;_aedd ,_afde :=_afdb .checkWidth (_afdb .Lly ,_afdb .Ury );if !_afde {if _cbaa {_gb .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_afdb );
};return nil ,false ;};_decc ._fcdad =_aedd ;default:_gb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_afdb ._caea );return nil ,false ;};return &_decc ,true ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_agf PageText )Marks ()*TextMarkArray {return &TextMarkArray {_deff :_agf ._eagg }};var _ffga =_c .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");
var (_ggffd =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);

// String returns a human readable description of `vecs`.
func (_ffede rulingList )String ()string {if len (_ffede )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_gfef ,_efbgd :=_ffede .vertsHorzs ();_acda :=len (_gfef );_bafa :=len (_efbgd );if _acda ==0||_bafa ==0{return _dg .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_acda ,_bafa );
};_deca :=_gf .PdfRectangle {Llx :_gfef [0]._cegc ,Urx :_gfef [_acda -1]._cegc ,Lly :_efbgd [_bafa -1]._cegc ,Ury :_efbgd [0]._cegc };return _dg .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_acda ,_bafa ,_deca );
};type textMark struct{_gf .PdfRectangle ;_efadg int ;_facd string ;_eccgf string ;_cec *_gf .PdfFont ;_egca float64 ;_aaeb float64 ;_acg _cc .Matrix ;_dffa _cc .Point ;_bcgc _gf .PdfRectangle ;_aeeb _b .Color ;_cgbde _b .Color ;};func _cdac (_decfa float64 )float64 {return _ffeee *_f .Round (_decfa /_ffeee )};
type rectRuling struct{_caea rulingKind ;_dfdab markKind ;_b .Color ;_gf .PdfRectangle ;};func (_gfecf paraList )addNeighbours (){_cccb :=func (_babc []int ,_bcgca *textPara )([]*textPara ,[]*textPara ){_efcc :=make ([]*textPara ,0,len (_babc )-1);_gabe :=make ([]*textPara ,0,len (_babc )-1);
for _ ,_fbea :=range _babc {_bcgf :=_gfecf [_fbea ];if _bcgf .Urx <=_bcgca .Llx {_efcc =append (_efcc ,_bcgf );}else if _bcgf .Llx >=_bcgca .Urx {_gabe =append (_gabe ,_bcgf );};};return _efcc ,_gabe ;};_dfdd :=func (_gegd []int ,_gbbe *textPara )([]*textPara ,[]*textPara ){_dacdd :=make ([]*textPara ,0,len (_gegd )-1);
_badac :=make ([]*textPara ,0,len (_gegd )-1);for _ ,_fadc :=range _gegd {_bcea :=_gfecf [_fadc ];if _bcea .Ury <=_gbbe .Lly {_badac =append (_badac ,_bcea );}else if _bcea .Lly >=_gbbe .Ury {_dacdd =append (_dacdd ,_bcea );};};return _dacdd ,_badac ;};
_gbcf :=_gfecf .yNeighbours (_ebag );for _ ,_ddfcb :=range _gfecf {_gddae :=_gbcf [_ddfcb ];if len (_gddae )==0{continue ;};_fgdc ,_eafdc :=_cccb (_gddae ,_ddfcb );if len (_fgdc )==0&&len (_eafdc )==0{continue ;};if len (_fgdc )> 0{_gdbe :=_fgdc [0];for _ ,_eeca :=range _fgdc [1:]{if _eeca .Urx >=_gdbe .Urx {_gdbe =_eeca ;
};};for _ ,_dcafd :=range _fgdc {if _dcafd !=_gdbe &&_dcafd .Urx > _gdbe .Llx {_gdbe =nil ;break ;};};if _gdbe !=nil &&_ffbf (_ddfcb .PdfRectangle ,_gdbe .PdfRectangle ){_ddfcb ._adge =_gdbe ;};};if len (_eafdc )> 0{_facca :=_eafdc [0];for _ ,_fbddf :=range _eafdc [1:]{if _fbddf .Llx <=_facca .Llx {_facca =_fbddf ;
};};for _ ,_gdcb :=range _eafdc {if _gdcb !=_facca &&_gdcb .Llx < _facca .Urx {_facca =nil ;break ;};};if _facca !=nil &&_ffbf (_ddfcb .PdfRectangle ,_facca .PdfRectangle ){_ddfcb ._fgfb =_facca ;};};};_gbcf =_gfecf .xNeighbours (_edbf );for _ ,_gcaa :=range _gfecf {_gcgae :=_gbcf [_gcaa ];
if len (_gcgae )==0{continue ;};_geccf ,_gagbc :=_dfdd (_gcgae ,_gcaa );if len (_geccf )==0&&len (_gagbc )==0{continue ;};if len (_gagbc )> 0{_dege :=_gagbc [0];for _ ,_cbfg :=range _gagbc [1:]{if _cbfg .Ury >=_dege .Ury {_dege =_cbfg ;};};for _ ,_baggf :=range _gagbc {if _baggf !=_dege &&_baggf .Ury > _dege .Lly {_dege =nil ;
break ;};};if _dege !=nil &&_gegb (_gcaa .PdfRectangle ,_dege .PdfRectangle ){_gcaa ._ebgb =_dege ;};};if len (_geccf )> 0{_affg :=_geccf [0];for _ ,_fbfbg :=range _geccf [1:]{if _fbfbg .Lly <=_affg .Lly {_affg =_fbfbg ;};};for _ ,_eefa :=range _geccf {if _eefa !=_affg &&_eefa .Lly < _affg .Ury {_affg =nil ;
break ;};};if _affg !=nil &&_gegb (_gcaa .PdfRectangle ,_affg .PdfRectangle ){_gcaa ._dabcd =_affg ;};};};for _ ,_bdaf :=range _gfecf {if _bdaf ._adge !=nil &&_bdaf ._adge ._fgfb !=_bdaf {_bdaf ._adge =nil ;};if _bdaf ._dabcd !=nil &&_bdaf ._dabcd ._ebgb !=_bdaf {_bdaf ._dabcd =nil ;
};if _bdaf ._fgfb !=nil &&_bdaf ._fgfb ._adge !=_bdaf {_bdaf ._fgfb =nil ;};if _bdaf ._ebgb !=nil &&_bdaf ._ebgb ._dabcd !=_bdaf {_bdaf ._ebgb =nil ;};};};func _fggbd (_bgddb ,_cgbb int )int {if _bgddb < _cgbb {return _bgddb ;};return _cgbb ;};func _cgcb (_cbfd ,_fbab bounded )float64 {return _cbfd .bbox ().Llx -_fbab .bbox ().Urx };
func (_afda lineRuling )xMean ()float64 {return 0.5*(_afda ._fbfab .X +_afda ._eefd .X )};

// String returns a description of `l`.
func (_cfec *textLine )String ()string {return _dg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_cfec ._fcfag ,_cfec .PdfRectangle ,_cfec ._babd ,_cfec .text ());
};func _cfacc (_ccgce map[int ][]float64 ){if len (_ccgce )<=1{return ;};_bgbe :=_caaaa (_ccgce );if _dfad {_gb .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_bgbe );};var _bfdf ,_adcc int ;for _bfdf ,_adcc =range _bgbe {if _ccgce [_adcc ]!=nil {break ;
};};for _eegf ,_fbeb :=range _bgbe [_bfdf :]{_cebef :=_ccgce [_fbeb ];if _cebef ==nil {continue ;};if _dfad {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_bfdf +_eegf ,_adcc ,_fbeb );};
_aafbe :=_ccgce [_fbeb ];if _aafbe [len (_aafbe )-1]> _cebef [0]{_aafbe [len (_aafbe )-1]=_cebef [0];_ccgce [_adcc ]=_aafbe ;};_adcc =_fbeb ;};};func (_eced rulingList )sortStrict (){_afa .Slice (_eced ,func (_ccc ,_dgga int )bool {_dcfa ,_decaf :=_eced [_ccc ],_eced [_dgga ];
_bbfg ,_bdeg :=_dcfa ._ffedb ,_decaf ._ffedb ;if _bbfg !=_bdeg {return _bbfg > _bdeg ;};_dffdf ,_dcgf :=_dcfa ._cegc ,_decaf ._cegc ;if !_agcc (_dffdf -_dcgf ){return _dffdf < _dcgf ;};_dffdf ,_dcgf =_dcfa ._fcdfd ,_decaf ._fcdfd ;if _dffdf !=_dcgf {return _dffdf < _dcgf ;
};return _dcfa ._gecf < _decaf ._gecf ;});};func _ggbd (_afec _gf .PdfRectangle ,_fgac bounded )float64 {return _afec .Ury -_fgac .bbox ().Lly };func (_bceg *textTable )reduce ()*textTable {_bace :=make ([]int ,0,_bceg ._debd );_ccbe :=make ([]int ,0,_bceg ._edbb );
for _ccbeg :=0;_ccbeg < _bceg ._debd ;_ccbeg ++{if !_bceg .emptyRow (_ccbeg ){_bace =append (_bace ,_ccbeg );};};for _feccd :=0;_feccd < _bceg ._edbb ;_feccd ++{if !_bceg .emptyColumn (_feccd ){_ccbe =append (_ccbe ,_feccd );};};if len (_bace )==_bceg ._debd &&len (_ccbe )==_bceg ._edbb {return _bceg ;
};_bbbb :=textTable {_cgdaa :_bceg ._cgdaa ,_edbb :len (_ccbe ),_debd :len (_bace ),_bagf :make (map[uint64 ]*textPara ,len (_ccbe )*len (_bace ))};if _dfad {_gb .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_bceg ._edbb ,_bceg ._debd ,len (_ccbe ),len (_bace ));
_gb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_ccbe );_gb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_bace );};for _bbee ,_eaaeb :=range _bace {for _fbdd ,_gdcg :=range _ccbe {_aeegg :=_bceg .get (_gdcg ,_eaaeb );
if _aeegg ==nil {continue ;};if _dfad {_dg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_fbdd ,_bbee ,_gdcg ,_eaaeb ,_gfcf (_aeegg .text (),50));};_bbbb .put (_fbdd ,_bbee ,_aeegg );
};};return &_bbbb ;};func (_fbde *textTable )put (_babde ,_fbfg int ,_bgaa *textPara ){_fbde ._bagf [_gbff (_babde ,_fbfg )]=_bgaa ;};func (_affd *textTable )getRight ()paraList {_aagceb :=make (paraList ,_affd ._debd );for _cfdcc :=0;_cfdcc < _affd ._debd ;
_cfdcc ++{_cffcg :=_affd .get (_affd ._edbb -1,_cfdcc )._fgfb ;if _cffcg ==nil ||_cffcg ._eacag {return nil ;};_aagceb [_cfdcc ]=_cffcg ;};for _gdgcf :=0;_gdgcf < _affd ._debd -1;_gdgcf ++{if _aagceb [_gdgcf ]._ebgb !=_aagceb [_gdgcf +1]{return nil ;};
};return _aagceb ;};func (_eggc *textWord )bbox ()_gf .PdfRectangle {return _eggc .PdfRectangle };func (_efbg *subpath )last ()_cc .Point {return _efbg ._cgf [len (_efbg ._cgf )-1]};

// Text returns the extracted page text.
func (_bfgd PageText )Text ()string {return _bfgd ._bccf };func (_fabfa paraList )findTables (_eafb []gridTiling )[]*textTable {_fabfa .addNeighbours ();_afa .Slice (_fabfa ,func (_efca ,_fgaca int )bool {return _baf (_fabfa [_efca ],_fabfa [_fgaca ])< 0});
var _gdebb []*textTable ;if _ggea {_facad :=_fabfa .findGridTables (_eafb );_gdebb =append (_gdebb ,_facad ...);};if _fcgd {_aafb :=_fabfa .findTextTables ();_gdebb =append (_gdebb ,_aafb ...);};return _gdebb ;};func _dbbg (_cdfg *PageText )error {_ceag :=_bd .GetLicenseKey ();
if _ceag !=nil &&_ceag .IsLicensed ()||_gc {return nil ;};_dg .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_dg .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _af .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_cbge paraList )applyTables (_bgdf []*textTable )paraList {var _decae paraList ;
for _ ,_ffab :=range _bgdf {_decae =append (_decae ,_ffab .newTablePara ());};for _ ,_bdegb :=range _cbge {if _bdegb ._eacag {continue ;};_decae =append (_decae ,_bdegb );};return _decae ;};func (_gcba *textLine )appendWord (_bbaf *textWord ){_gcba ._dbcg =append (_gcba ._dbcg ,_bbaf );
_gcba .PdfRectangle =_fgge (_gcba .PdfRectangle ,_bbaf .PdfRectangle );if _bbaf ._abcda > _gcba ._babd {_gcba ._babd =_bbaf ._abcda ;};if _bbaf ._ffbae > _gcba ._fcfag {_gcba ._fcfag =_bbaf ._ffbae ;};};func (_bgbd *textObject )setWordSpacing (_dgcg float64 ){if _bgbd ==nil {return ;
};_bgbd ._ffcb ._bccc =_dgcg ;};func _gbadf (_edca []int )[]int {_fgcg :=make ([]int ,len (_edca ));for _decfc ,_cecb :=range _edca {_fgcg [len (_edca )-1-_decfc ]=_cecb ;};return _fgcg ;};func _feb (_abb *Extractor ,_ceb *_gf .PdfPageResources ,_bbe _ff .GraphicsState ,_adg *textState ,_eeg *stateStack )*textObject {return &textObject {_adad :_abb ,_ffe :_ceb ,_bca :_bbe ,_cbac :_eeg ,_ffcb :_adg ,_dcg :_cc .IdentityMatrix (),_fga :_cc .IdentityMatrix ()};
};func (_cddbc paraList )yNeighbours (_dbfd float64 )map[*textPara ][]int {_ebgcc :=make ([]event ,2*len (_cddbc ));if _dbfd ==0{for _adga ,_geaad :=range _cddbc {_ebgcc [2*_adga ]=event {_geaad .Lly ,true ,_adga };_ebgcc [2*_adga +1]=event {_geaad .Ury ,false ,_adga };
};}else {for _fcgdc ,_cdcdf :=range _cddbc {_ebgcc [2*_fcgdc ]=event {_cdcdf .Lly -_dbfd *_cdcdf .fontsize (),true ,_fcgdc };_ebgcc [2*_fcgdc +1]=event {_cdcdf .Ury +_dbfd *_cdcdf .fontsize (),false ,_fcgdc };};};return _cddbc .eventNeighbours (_ebgcc );
};func _agcc (_eafgd float64 )bool {return _f .Abs (_eafgd )< _ecgd };func (_fced *textTable )bbox ()_gf .PdfRectangle {return _fced .PdfRectangle };type textResult struct{_dcc PageText ;_abe int ;_cfdc int ;};func (_cbeb *PageText )computeViews (){var _efce rulingList ;
if _aecf {_fegg :=_cgfda (_cbeb ._fbg );_efce =append (_efce ,_fegg ...);};if _debb {_aga :=_affc (_cbeb ._cfcc );_efce =append (_efce ,_aga ...);};_efce ,_dabdd :=_efce .toTilings ();var _gcda paraList ;_fbad :=len (_cbeb ._dfcg );for _acdf :=0;_acdf < 360&&_fbad > 0;
_acdf +=90{_fbf :=make ([]*textMark ,0,len (_cbeb ._dfcg )-_fbad );for _ ,_bae :=range _cbeb ._dfcg {if _bae ._efadg ==_acdf {_fbf =append (_fbf ,_bae );};};if len (_fbf )> 0{_beab :=_dbfg (_fbf ,_cbeb ._efcg ,_efce ,_dabdd );_gcda =append (_gcda ,_beab ...);
_fbad -=len (_fbf );};};_egda :=new (_ba .Buffer );_gcda .writeText (_egda );_cbeb ._bccf =_egda .String ();_cbeb ._eagg =_gcda .toTextMarks ();_cbeb ._bcg =_gcda .tables ();if _dfad {_gb .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_cbeb ._bcg ));
};};func _egec (_fccf map[float64 ]map[float64 ]gridTile )[]float64 {_aecbg :=make ([]float64 ,0,len (_fccf ));_cfae :=make (map[float64 ]struct{},len (_fccf ));for _ ,_bdceg :=range _fccf {for _bbgb :=range _bdceg {if _ ,_aagd :=_cfae [_bbgb ];_aagd {continue ;
};_aecbg =append (_aecbg ,_bbgb );_cfae [_bbgb ]=struct{}{};};};_afa .Float64s (_aecbg );return _aecbg ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_gf .PdfPageResources )(*Extractor ,error ){const _afg ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_fec :=&Extractor {_cca :contents ,_ab :resources ,_cb :map[string ]fontEntry {},_da :map[string ]textResult {}};
_bd .TrackUse (_afg );return _fec ,nil ;};func (_dba *stateStack )empty ()bool {return len (*_dba )==0};func (_aacfc rulingList )tidied (_cedf string )rulingList {_gbdf :=_aacfc .removeDuplicates ();_gbdf .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");
_gbdeb :=_gbdf .snapToGroups ();if _gbdeb ==nil {return nil ;};_gbdeb .sort ();if _gggbb {_gb .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_cedf ,len (_aacfc ),len (_gbdf ),len (_gbdeb ));
};_gbdeb .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _gbdeb ;};func (_ggag *shapesState )drawRectangle (_aggf ,_bcgb ,_abgf ,_dddef float64 ){if _gbaf {_eae :=_ggag .devicePoint (_aggf ,_bcgb );_ddgdc :=_ggag .devicePoint (_aggf +_abgf ,_bcgb +_dddef );
_dfgfa :=_gf .PdfRectangle {Llx :_eae .X ,Lly :_eae .Y ,Urx :_ddgdc .X ,Ury :_ddgdc .Y };_gb .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_dfgfa );};_ggag .newSubPath ();_ggag .moveTo (_aggf ,_bcgb );
_ggag .lineTo (_aggf +_abgf ,_bcgb );_ggag .lineTo (_aggf +_abgf ,_bcgb +_dddef );_ggag .lineTo (_aggf ,_bcgb +_dddef );_ggag .closePath ();};func _gbf (_caed _gf .PdfRectangle )textState {return textState {_dabf :100,_eaae :RenderModeFill ,_cae :_caed };
};type gridTiling struct{_gf .PdfRectangle ;_ggdf []float64 ;_ebff []float64 ;_cebgg map[float64 ]map[float64 ]gridTile ;};func _caaaa (_gbdc map[int ][]float64 )[]int {_gcfe :=make ([]int ,len (_gbdc ));_egef :=0;for _ggdca :=range _gbdc {_gcfe [_egef ]=_ggdca ;
_egef ++;};_afa .Ints (_gcfe );return _gcfe ;};func (_aead *wordBag )allWords ()[]*textWord {var _adgb []*textWord ;for _ ,_fcff :=range _aead ._dgbad {_adgb =append (_adgb ,_fcff ...);};return _adgb ;};type paraList []*textPara ;func (_cgce paraList )inTile (_abeda gridTile )paraList {var _cdcf paraList ;
for _ ,_fdebf :=range _cgce {if _abeda .contains (_fdebf .PdfRectangle ){_cdcf =append (_cdcf ,_fdebf );};};if _dfad {_dg .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_abeda ,len (_cdcf ));
for _edbc ,_dacgg :=range _cdcf {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_edbc ,_dacgg );};_dg .Println ("");};return _cdcf ;};func (_ceg *wordBag )applyRemovals (_egfa map[int ]map[*textWord ]struct{}){for _adbf ,_eaga :=range _egfa {if len (_eaga )==0{continue ;
};_agad :=_ceg ._dgbad [_adbf ];_gef :=len (_agad )-len (_eaga );if _gef ==0{delete (_ceg ._dgbad ,_adbf );continue ;};_bfbb :=make ([]*textWord ,_gef );_agdd :=0;for _ ,_caeda :=range _agad {if _ ,_dabae :=_eaga [_caeda ];!_dabae {_bfbb [_agdd ]=_caeda ;
_agdd ++;};};_ceg ._dgbad [_adbf ]=_bfbb ;};};func (_def *textObject )checkOp (_gbbg *_ff .ContentStreamOperation ,_gbc int ,_ggf bool )(_eagf bool ,_age error ){if _def ==nil {var _fea []_fb .PdfObject ;if _gbc > 0{_fea =_gbbg .Params ;if len (_fea )> _gbc {_fea =_fea [:_gbc ];
};};_gb .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_gbbg .Operand ,_fea );};if _gbc >=0{if len (_gbbg .Params )!=_gbc {if _ggf {_age =_af .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
};_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_gbbg .Operand ,_gbc ,len (_gbbg .Params ),_gbbg .Params );
return false ,_age ;};};return true ,nil ;};func _acffg (_agdf ,_bgc bounded )float64 {_ffg :=_dcce (_agdf ,_bgc );if !_agcc (_ffg ){return _ffg ;};return _gbfa (_agdf ,_bgc );};func (_gbbd *textObject )reset (){_gbbd ._dcg =_cc .IdentityMatrix ();_gbbd ._fga =_cc .IdentityMatrix ();
_gbbd ._ddbe =nil ;};func _gecg (_cbef _gf .PdfRectangle )rulingKind {_gafcf :=_cbef .Width ();_bedg :=_cbef .Height ();if _gafcf > _bedg {if _gafcf >=_fede {return _gbbge ;};}else {if _bedg >=_fede {return _bcaf ;};};return _ebca ;};func (_dafa *stateStack )pop ()*textState {if _dafa .empty (){return nil ;
};_fdee :=*(*_dafa )[len (*_dafa )-1];*_dafa =(*_dafa )[:len (*_dafa )-1];return &_fdee ;};func (_afffff *textTable )getDown ()paraList {_gbadd :=make (paraList ,_afffff ._edbb );for _cdcee :=0;_cdcee < _afffff ._edbb ;_cdcee ++{_egba :=_afffff .get (_cdcee ,_afffff ._debd -1)._ebgb ;
if _egba ==nil ||_egba ._eacag {return nil ;};_gbadd [_cdcee ]=_egba ;};for _dbaf :=0;_dbaf < _afffff ._edbb -1;_dbaf ++{if _gbadd [_dbaf ]._fgfb !=_gbadd [_dbaf +1]{return nil ;};};return _gbadd ;};var _geef =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_b .White ,StrokeColor :_b .White };


// String returns a description of `w`.
func (_aggb *textWord )String ()string {return _dg .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_aggb ._ffbae ,_aggb .PdfRectangle ,_aggb ._abcda ,_aggb ._bbgf );
};func (_gcbfg rulingList )snapToGroupsDirection ()rulingList {_gcbfg .sortStrict ();_fabfd :=make (map[*ruling ]rulingList ,len (_gcbfg ));_eaagb :=_gcbfg [0];_eddd :=func (_cfff *ruling ){_eaagb =_cfff ;_fabfd [_eaagb ]=rulingList {_cfff }};_eddd (_gcbfg [0]);
for _ ,_eaed :=range _gcbfg [1:]{if _eaed ._cegc < _eaagb ._cegc -_ecgd {_gb .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_eaagb ,_eaed );
};if _eaed ._cegc > _eaagb ._cegc +_adgc {_eddd (_eaed );}else {_fabfd [_eaagb ]=append (_fabfd [_eaagb ],_eaed );};};_eacabe :=make (map[*ruling ]float64 ,len (_fabfd ));_geedb :=make (map[*ruling ]*ruling ,len (_gcbfg ));for _eefdf ,_dfcb :=range _fabfd {_eacabe [_eefdf ]=_dfcb .mergePrimary ();
for _ ,_cffg :=range _dfcb {_geedb [_cffg ]=_eefdf ;};};for _ ,_agba :=range _gcbfg {_agba ._cegc =_eacabe [_geedb [_agba ]];};_faef :=make (rulingList ,0,len (_gcbfg ));for _ ,_ggeda :=range _fabfd {_bdae :=_ggeda .splitSec ();for _abfe ,_dbfgf :=range _bdae {_dbbc :=_dbfgf .merge ();
if len (_faef )> 0{_beegf :=_faef [len (_faef )-1];if _beegf .alignsPrimary (_dbbc )&&_beegf .alignsSec (_dbbc ){_gb .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_abfe ,_beegf ,_dbbc );
continue ;};};_faef =append (_faef ,_dbbc );};};_faef .sortStrict ();return _faef ;};func (_dbccf intSet )add (_bbcce int ){_dbccf [_bbcce ]=struct{}{}};type gridTile struct{_gf .PdfRectangle ;_faab ,_gbadg ,_gdeaa ,_dfeb bool ;};func (_degdd *textTable )emptyColumn (_geaf int )bool {for _ebgef :=0;
_ebgef < _degdd ._debd ;_ebgef ++{_cecg :=_degdd .get (_geaf ,_ebgef );if _cecg !=nil &&_cecg .text ()!=""{return false ;};};return true ;};func (_beac rulingList )findPrimSec (_cegdc ,_bdedc float64 )*ruling {for _ ,_cceb :=range _beac {if _agcc (_cceb ._cegc -_cegdc )&&_cceb ._fcdfd -_dced <=_bdedc &&_bdedc <=_cceb ._gecf +_dced {return _cceb ;
};};return nil ;};func (_edf *wordBag )absorb (_fefc *wordBag ){_aegc :=_fefc .makeRemovals ();for _gbab ,_faea :=range _fefc ._dgbad {for _ ,_eceg :=range _faea {_edf .pullWord (_eceg ,_gbab ,_aegc );};};_fefc .applyRemovals (_aegc );};func (_beae *wordBag )blocked (_bgbg *textWord )bool {if _bgbg .Urx < _beae .Llx {_aacf :=_gfadc (_bgbg .PdfRectangle );
_eagd :=_ggedg (_beae .PdfRectangle );if _beae ._ddgb .blocks (_aacf ,_eagd ){if _ffdca {_gb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bgbg ,_beae );};return true ;};}else if _beae .Urx < _bgbg .Llx {_ccec :=_gfadc (_beae .PdfRectangle );
_gaee :=_ggedg (_bgbg .PdfRectangle );if _beae ._ddgb .blocks (_ccec ,_gaee ){if _ffdca {_gb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bgbg ,_beae );};return true ;};};if _bgbg .Ury < _beae .Lly {_efbgg :=_ffbg (_bgbg .PdfRectangle );
_defa :=_afac (_beae .PdfRectangle );if _beae ._fcee .blocks (_efbgg ,_defa ){if _ffdca {_gb .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_bgbg ,_beae );};return true ;};}else if _beae .Ury < _bgbg .Lly {_adbc :=_ffbg (_beae .PdfRectangle );
_cgfa :=_afac (_bgbg .PdfRectangle );if _beae ._fcee .blocks (_adbc ,_cgfa ){if _ffdca {_gb .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_bgbg ,_beae );};return true ;};};return false ;};func (_ceca *textTable )reduceTiling (_gcbace gridTiling ,_gffba float64 )*textTable {_geaa :=make ([]int ,0,_ceca ._debd );
_fcgfd :=make ([]int ,0,_ceca ._edbb );_gcdb :=_gcbace ._ggdf ;_cebed :=_gcbace ._ebff ;for _edcac :=0;_edcac < _ceca ._debd ;_edcac ++{_bdggb :=_edcac > 0&&_f .Abs (_cebed [_edcac -1]-_cebed [_edcac ])< _gffba &&_ceca .emptyRow (_edcac );if !_bdggb {_geaa =append (_geaa ,_edcac );
};};for _aege :=0;_aege < _ceca ._edbb ;_aege ++{_bbdgc :=_aege < _ceca ._edbb -1&&_f .Abs (_gcdb [_aege +1]-_gcdb [_aege ])< _gffba &&_ceca .emptyColumn (_aege );if !_bbdgc {_fcgfd =append (_fcgfd ,_aege );};};if len (_geaa )==_ceca ._debd &&len (_fcgfd )==_ceca ._edbb {return _ceca ;
};_cgcf :=textTable {_cgdaa :_ceca ._cgdaa ,_edbb :len (_fcgfd ),_debd :len (_geaa ),_cadb :make (map[uint64 ]compositeCell ,len (_fcgfd )*len (_geaa ))};if _dfad {_gb .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_ceca ._edbb ,_ceca ._debd ,len (_fcgfd ),len (_geaa ));
_gb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fcgfd );_gb .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_geaa );};for _eedd ,_agag :=range _geaa {for _cddb ,_cdecdc :=range _fcgfd {_gacfb ,_cagf :=_ceca .getComposite (_cdecdc ,_agag );
if len (_gacfb )==0{continue ;};if _dfad {_dg .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_cddb ,_eedd ,_cdecdc ,_agag ,_gfcf (_gacfb .merge ().text (),50));};_cgcf .putComposite (_cddb ,_eedd ,_gacfb ,_cagf );
};};return &_cgcf ;};func _bcdac (_efeda ,_fcae _cc .Point )bool {_ccebb :=_f .Abs (_efeda .X -_fcae .X );_gfgc :=_f .Abs (_efeda .Y -_fcae .Y );return _eggd (_ccebb ,_gfgc );};func (_dea *textObject )moveTextSetLeading (_bgb ,_ccf float64 ){_dea ._ffcb ._egc =-_ccf ;
_dea .moveLP (_bgb ,_ccf );};func _abae (_bcec []_fb .PdfObject )(_cffb ,_ccba float64 ,_ebcb error ){if len (_bcec )!=2{return 0,0,_dg .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_bcec ));
};_aaeeg ,_ebcb :=_fb .GetNumbersAsFloat (_bcec );if _ebcb !=nil {return 0,0,_ebcb ;};return _aaeeg [0],_aaeeg [1],nil ;};func (_bcaa *subpath )clear (){*_bcaa =subpath {}};func (_bbff *shapesState )clearPath (){_bbff ._bgga =nil ;_bbff ._fbbc =false ;
if _gbaf {_gb .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_bbff );};};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_bdbe *textLine )bbox ()_gf .PdfRectangle {return _bdbe .PdfRectangle };func _edgae (_badgf []*textWord ,_afacc *textWord )[]*textWord {for _ffdcf ,_aeebc :=range _badgf {if _aeebc ==_afacc {return _gdefe (_badgf ,_ffdcf );
};};_gb .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_afacc );
return nil ;};func (_egcd pathSection )bbox ()_gf .PdfRectangle {_aebg :=_egcd ._afcf [0]._cgf [0];_caeg :=_gf .PdfRectangle {Llx :_aebg .X ,Urx :_aebg .X ,Lly :_aebg .Y ,Ury :_aebg .Y };_eba :=func (_gad _cc .Point ){if _gad .X < _caeg .Llx {_caeg .Llx =_gad .X ;
}else if _gad .X > _caeg .Urx {_caeg .Urx =_gad .X ;};if _gad .Y < _caeg .Lly {_caeg .Lly =_gad .Y ;}else if _gad .Y > _caeg .Ury {_caeg .Ury =_gad .Y ;};};for _ ,_fdcd :=range _egcd ._afcf [0]._cgf [1:]{_eba (_fdcd );};for _ ,_gade :=range _egcd ._afcf [1:]{for _ ,_eacab :=range _gade ._cgf {_eba (_eacab );
};};return _caeg ;};func (_fdec rulingList )toTilings ()(rulingList ,[]gridTiling ){_fdec .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_fdec )==0{return nil ,nil ;};_fdec =_fdec .tidied ("\u0061\u006c\u006c");_fdec .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_aafdc :=_fdec .toGrids ();_cfbe :=make ([]gridTiling ,len (_aafdc ));for _dfgd ,_dageg :=range _aafdc {_cfbe [_dfgd ]=_dageg .asTiling ();};return _fdec ,_cfbe ;};func (_cdce *shapesState )newSubPath (){_cdce .clearPath ();if _gbaf {_gb .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_cdce );
};};func (_fgfe rulingList )primaries ()[]float64 {_eeabe :=make (map[float64 ]struct{},len (_fgfe ));for _ ,_ccfcg :=range _fgfe {_eeabe [_ccfcg ._cegc ]=struct{}{};};_aaebb :=make ([]float64 ,len (_eeabe ));_egbf :=0;for _daaa :=range _eeabe {_aaebb [_egbf ]=_daaa ;
_egbf ++;};_afa .Float64s (_aaebb );return _aaebb ;};func _cefdd (_fbcb []*textMark ,_dgag _gf .PdfRectangle )[]*textWord {var _aded []*textWord ;var _ffdd *textWord ;if _ecb {_gb .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_fbcb ));
};_cgcd :=func (){if _ffdd !=nil {_gbgc :=_ffdd .computeText ();if !_dgcdfc (_gbgc ){_ffdd ._bbgf =_gbgc ;_aded =append (_aded ,_ffdd );if _ecb {_gb .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_aded )-1,_ffdd .String ());
for _faabc ,_acdbg :=range _ffdd ._ebbfbc {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_faabc ,_acdbg .String ());};};};_ffdd =nil ;};};for _ ,_bccgf :=range _fbcb {if _dcfdf &&_ffdd !=nil &&len (_ffdd ._ebbfbc )> 0{_eabe :=_ffdd ._ebbfbc [len (_ffdd ._ebbfbc )-1];
_gdgb ,_aecgcb :=_gadg (_bccgf ._facd );_fdde ,_dfefa :=_gadg (_eabe ._facd );if _aecgcb &&!_dfefa &&_eabe .inDiacriticArea (_bccgf ){_ffdd .addDiacritic (_gdgb );continue ;};if _dfefa &&!_aecgcb &&_bccgf .inDiacriticArea (_eabe ){_ffdd ._ebbfbc =_ffdd ._ebbfbc [:len (_ffdd ._ebbfbc )-1];
_ffdd .appendMark (_bccgf ,_dgag );_ffdd .addDiacritic (_fdde );continue ;};};_gfbac :=_dgcdfc (_bccgf ._facd );if _gfbac {_cgcd ();continue ;};if _ffdd ==nil &&!_gfbac {_ffdd =_baddfb ([]*textMark {_bccgf },_dgag );continue ;};_bef :=_ffdd ._abcda ;_ffgc :=_f .Abs (_ggbd (_dgag ,_bccgf )-_ffdd ._ffbae )/_bef ;
_dffc :=_cgcb (_bccgf ,_ffdd )/_bef ;if _dffc >=_gbbc ||!(-_badf <=_dffc &&_ffgc <=_faac ){_cgcd ();_ffdd =_baddfb ([]*textMark {_bccgf },_dgag );continue ;};_ffdd .appendMark (_bccgf ,_dgag );};_cgcd ();return _aded ;};func (_gcgee rulingList )isActualGrid ()(rulingList ,bool ){_dbcd ,_efed :=_gcgee .augmentGrid ();
if !(len (_dbcd )>=_caebb +1&&len (_efed )>=_bgde +1){if _gggbb {_gb .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_dbcd ),len (_efed ),_caebb +1,_bgde +1);
};return nil ,false ;};if _gggbb {_gb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_gcgee ,len (_dbcd )>=2,len (_efed )>=2,len (_dbcd )>=2&&len (_efed )>=2);
for _efde ,_gcbab :=range _gcgee {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_efde ,_gcbab );};};if _gdec {_aebf ,_dgab :=_dbcd [0],_dbcd [len (_dbcd )-1];_bfad ,_bdgd :=_efed [0],_efed [len (_efed )-1];if !(_ebe (_aebf ._cegc -_bfad ._fcdfd )&&_ebe (_dgab ._cegc -_bfad ._gecf )&&_ebe (_bfad ._cegc -_aebf ._gecf )&&_ebe (_bdgd ._cegc -_aebf ._fcdfd )){if _gggbb {_gb .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_aebf ,_dgab ,_bfad ,_bdgd );
};return nil ,false ;};}else {if !_dbcd .aligned (){if _gadc {_gb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_dbcd ));
};return nil ,false ;};if !_efed .aligned (){if _gggbb {_gb .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_efed ));
};return nil ,false ;};};_dbeg :=append (_dbcd ,_efed ...);return _dbeg ,true ;};type subpath struct{_cgf []_cc .Point ;_bcee bool ;};func _gfad (_dfbc *_ff .ContentStreamOperation )(float64 ,error ){if len (_dfbc .Params )!=1{_afeb :=_af .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_dfbc .Operand ,1,len (_dfbc .Params ),_dfbc .Params );
return 0.0,_afeb ;};return _fb .GetNumberAsFloat (_dfbc .Params [0]);};func _ebb (_dfd _cc .Point )_cc .Matrix {return _cc .TranslationMatrix (_dfd .X ,_dfd .Y )};func (_ggac *textObject )showText (_cbee []byte )error {return _ggac .renderText (_cbee )};
func (_eecd *shapesState )addPoint (_eddg ,_bdgb float64 ){_edb :=_eecd .establishSubpath ();_ead :=_eecd .devicePoint (_eddg ,_bdgb );if _edb ==nil {_eecd ._fbbc =true ;_eecd ._fdc =_ead ;}else {_edb .add (_ead );};};func (_afef *textPara )isAtom ()*textTable {_egdff :=_afef ;
_dagcd :=_afef ._fgfb ;_gdbf :=_afef ._ebgb ;if !(_dagcd !=nil &&!_dagcd ._eacag &&_gdbf !=nil &&!_gdbf ._eacag ){return nil ;};_bccce :=_dagcd ._ebgb ;if !(_bccce !=nil &&!_bccce ._eacag &&_bccce ==_gdbf ._fgfb ){return nil ;};return _ccff (_egdff ,_dagcd ,_gdbf ,_bccce );
};func _aaeca (_faee ,_dgg _gf .PdfRectangle )(_gf .PdfRectangle ,bool ){if !_ccd (_faee ,_dgg ){return _gf .PdfRectangle {},false ;};return _gf .PdfRectangle {Llx :_f .Max (_faee .Llx ,_dgg .Llx ),Urx :_f .Min (_faee .Urx ,_dgg .Urx ),Lly :_f .Max (_faee .Lly ,_dgg .Lly ),Ury :_f .Min (_faee .Ury ,_dgg .Ury )},true ;
};

// String returns a description of `k`.
func (_ccgcd rulingKind )String ()string {_gdeb ,_abggd :=_fgdbb [_ccgcd ];if !_abggd {return _dg .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_ccgcd );};return _gdeb ;};func (_gagb paraList )topoOrder ()[]int {if _ccfcc {_gb .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");
};_cgaa :=len (_gagb );_abbg :=make ([]bool ,_cgaa );_ddcb :=make ([]int ,0,_cgaa );_effgb :=_gagb .llyOrdering ();var _cfcd func (_dadbf int );_cfcd =func (_bbffe int ){_abbg [_bbffe ]=true ;for _bggf :=0;_bggf < _cgaa ;_bggf ++{if !_abbg [_bggf ]{if _gagb .readBefore (_effgb ,_bbffe ,_bggf ){_cfcd (_bggf );
};};};_ddcb =append (_ddcb ,_bbffe );};for _decff :=0;_decff < _cgaa ;_decff ++{if !_abbg [_decff ]{_cfcd (_decff );};};return _gbadf (_ddcb );};func (_cede paraList )lines ()[]*textLine {var _faca []*textLine ;for _ ,_cdbe :=range _cede {_faca =append (_faca ,_cdbe ._effa ...);
};return _faca ;};func _gggbe (_baddf bounded )float64 {return -_baddf .bbox ().Lly };func _ccff (_gegbd ,_cdcb ,_debag ,_gafa *textPara )*textTable {_cdgg :=&textTable {_edbb :2,_debd :2,_bagf :make (map[uint64 ]*textPara ,4)};_cdgg .put (0,0,_gegbd );
_cdgg .put (1,0,_cdcb );_cdgg .put (0,1,_debag );_cdgg .put (1,1,_gafa );return _cdgg ;};

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_aeeg paraList )extractTables (_fbbb []gridTiling )paraList {if _dfad {_gb .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_aeeg ));
};if len (_aeeg )< _dgbb {return _aeeg ;};_daffd :=_aeeg .findTables (_fbbb );if _dfad {_gb .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_daffd ));
for _cgdba ,_cbbg :=range _daffd {_cbbg .log (_dg .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_cgdba ));};};return _aeeg .applyTables (_daffd );};func (_daff *textLine )markWordBoundaries (){_eagac :=_gagg *_daff ._babd ;for _ebgc ,_bagg :=range _daff ._dbcg [1:]{if _cgcb (_bagg ,_daff ._dbcg [_ebgc ])>=_eagac {_bagg ._bdcc =true ;
};};};type textWord struct{_gf .PdfRectangle ;_ffbae float64 ;_bbgf string ;_ebbfbc []*textMark ;_abcda float64 ;_bdcc bool ;};

// String returns a description of `b`.
func (_afaa *wordBag )String ()string {var _agab []string ;for _ ,_gggb :=range _afaa .depthIndexes (){_cgfg :=_afaa ._dgbad [_gggb ];for _ ,_dcff :=range _cgfg {_agab =append (_agab ,_dcff ._bbgf );};};return _dg .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_afaa .PdfRectangle ,_afaa ._aed ,len (_agab ),_agab );
};func _gdefe (_eefe []*textWord ,_fgbcd int )[]*textWord {_efaa :=len (_eefe );copy (_eefe [_fgbcd :],_eefe [_fgbcd +1:]);return _eefe [:_efaa -1];};func (_fafd *stateStack )push (_ffba *textState ){_cee :=*_ffba ;*_fafd =append (*_fafd ,&_cee )};func (_feag paraList )sortReadingOrder (){_gb .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_feag ));
if len (_feag )<=1{return ;};_feag .computeEBBoxes ();_afa .Slice (_feag ,func (_bebe ,_bffg int )bool {return _acffg (_feag [_bebe ],_feag [_bffg ])<=0});_bffe :=_feag .topoOrder ();_feag .reorder (_bffe );};func (_fee *imageExtractContext )extractXObjectImage (_ed *_fb .PdfObjectName ,_aa _ff .GraphicsState ,_bff *_gf .PdfPageResources )error {_ca ,_ :=_bff .GetXObjectByName (*_ed );
if _ca ==nil {return nil ;};_ddg ,_aab :=_fee ._abg [_ca ];if !_aab {_gcb ,_ccg :=_bff .GetXObjectImageByName (*_ed );if _ccg !=nil {return _ccg ;};if _gcb ==nil {return nil ;};_ad ,_ccg :=_gcb .ToImage ();if _ccg !=nil {return _ccg ;};_ddg =&cachedImage {_ce :_ad ,_ee :_gcb .ColorSpace };
_fee ._abg [_ca ]=_ddg ;};_be :=_ddg ._ce ;_aae :=_ddg ._ee ;_gfc ,_cfd :=_aae .ImageToRGB (*_be );if _cfd !=nil {return _cfd ;};_gb .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_aa .CTM .String ());_ddd :=ImageMark {Image :&_gfc ,Width :_aa .CTM .ScalingFactorX (),Height :_aa .CTM .ScalingFactorY (),Angle :_aa .CTM .Angle ()};
_ddd .X ,_ddd .Y =_aa .CTM .Translation ();_fee ._cde =append (_fee ._cde ,_ddd );_fee ._dab ++;return nil ;};func (_cfcb rulingList )aligned ()bool {if len (_cfcb )< 2{return false ;};_gfcb :=make (map[*ruling ]int );_gfcb [_cfcb [0]]=0;for _ ,_eebd :=range _cfcb [1:]{_cgge :=false ;
for _feed :=range _gfcb {if _eebd .gridIntersecting (_feed ){_gfcb [_feed ]++;_cgge =true ;break ;};};if !_cgge {_gfcb [_eebd ]=0;};};_aeede :=0;for _ ,_deffe :=range _gfcb {if _deffe ==0{_aeede ++;};};_dbfaa :=float64 (_aeede )/float64 (len (_cfcb ));
_cbce :=_dbfaa <=1.0-_adgbg ;if _gggbb {_gb .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_cbce ,_dbfaa ,_aeede ,len (_cfcb ),_cfcb .String ());
};return _cbce ;};func (_bgbgb paraList )computeEBBoxes (){if _aaabe {_gb .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_edfc :=range _bgbgb {_edfc ._bbbf =_edfc .PdfRectangle ;};_acffb :=_bgbgb .yNeighbours (0);
for _dgcdf ,_fafbc :=range _bgbgb {_cbbd :=_fafbc ._bbbf ;_fafg ,_fcef :=-1.0e9,+1.0e9;for _ ,_bcdc :=range _acffb [_fafbc ]{_gadf :=_bgbgb [_bcdc ]._bbbf ;if _gadf .Urx < _cbbd .Llx {_fafg =_f .Max (_fafg ,_gadf .Urx );}else if _cbbd .Urx < _gadf .Llx {_fcef =_f .Min (_fcef ,_gadf .Llx );
};};for _efcf ,_edccf :=range _bgbgb {_aacfa :=_edccf ._bbbf ;if _dgcdf ==_efcf ||_aacfa .Ury > _cbbd .Lly {continue ;};if _fafg <=_aacfa .Llx &&_aacfa .Llx < _cbbd .Llx {_cbbd .Llx =_aacfa .Llx ;}else if _aacfa .Urx <=_fcef &&_cbbd .Urx < _aacfa .Urx {_cbbd .Urx =_aacfa .Urx ;
};};if _aaabe {_dg .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_dgcdf ,_fafbc ._bbbf ,_cbbd ,_gfcf (_fafbc .text (),50));};_fafbc ._bbbf =_cbbd ;};if _bbc {for _ ,_bagde :=range _bgbgb {_bagde .PdfRectangle =_bagde ._bbbf ;
};};};func (_bdag *wordBag )highestWord (_ccacd int ,_bdgbb ,_caab float64 )*textWord {for _ ,_feaf :=range _bdag ._dgbad [_ccacd ]{if _bdgbb <=_feaf ._ffbae &&_feaf ._ffbae <=_caab {return _feaf ;};};return nil ;};func _afac (_dffea _gf .PdfRectangle )*ruling {return &ruling {_ffedb :_gbbge ,_cegc :_dffea .Lly ,_fcdfd :_dffea .Llx ,_gecf :_dffea .Urx };
};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_gf .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_faff *textWord )toTextMarks (_dded *int )[]TextMark {var _dbcbf []TextMark ;for _ ,_gfecc :=range _faff ._ebbfbc {_dbcbf =_aefg (_dbcbf ,_dded ,_gfecc .ToTextMark ());};return _dbcbf ;};func (_bbfbg intSet )del (_gaedd int ){delete (_bbfbg ,_gaedd )};
func (_cdag rulingList )comp (_begg ,_ccfba int )bool {_gcbe ,_gdaa :=_cdag [_begg ],_cdag [_ccfba ];_dfee ,_fbdf :=_gcbe ._ffedb ,_gdaa ._ffedb ;if _dfee !=_fbdf {return _dfee > _fbdf ;};if _dfee ==_ebca {return false ;};_bdeff :=func (_bggd bool )bool {if _dfee ==_gbbge {return _bggd ;
};return !_bggd ;};_dcad ,_afgdf :=_gcbe ._cegc ,_gdaa ._cegc ;if _dcad !=_afgdf {return _bdeff (_dcad > _afgdf );};_dcad ,_afgdf =_gcbe ._fcdfd ,_gdaa ._fcdfd ;if _dcad !=_afgdf {return _bdeff (_dcad < _afgdf );};return _bdeff (_gcbe ._gecf < _gdaa ._gecf );
};const (_dgee markKind =iota ;_dbca ;_aggge ;_cdcc ;);func (_fdbdd *compositeCell )updateBBox (){for _ ,_gbga :=range _fdbdd .paraList {_fdbdd .PdfRectangle =_fgge (_fdbdd .PdfRectangle ,_gbga .PdfRectangle );};};func (_abf *textObject )getFontDirect (_gfge string )(*_gf .PdfFont ,error ){_fcb ,_bgba :=_abf .getFontDict (_gfge );
if _bgba !=nil {return nil ,_bgba ;};_dbbf ,_bgba :=_gf .NewPdfFontFromPdfObject (_fcb );if _bgba !=nil {_gb .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gfge ,_bgba );
};return _dbbf ,_bgba ;};type wordBag struct{_gf .PdfRectangle ;_aed float64 ;_ddgb ,_fcee rulingList ;_fbaf float64 ;_dgbad map[int ][]*textWord ;};func _dac (_caag _cc .Matrix )_cc .Point {_daca ,_bea :=_caag .Translation ();return _cc .Point {X :_daca ,Y :_bea };
};func (_ebfg *textObject )getFont (_eceb string )(*_gf .PdfFont ,error ){if _ebfg ._adad ._cb !=nil {_ebfg ._adad ._gd ++;_bcbg ,_cebg :=_ebfg ._adad ._cb [_eceb ];if _cebg {_bcbg ._facf =_ebfg ._adad ._gd ;return _bcbg ._fgcf ,nil ;};};_aafd ,_dcfb :=_ebfg .getFontDirect (_eceb );
if _dcfb !=nil {return nil ,_dcfb ;};if _ebfg ._adad ._cb !=nil {_agdcf :=fontEntry {_aafd ,_ebfg ._adad ._gd };if len (_ebfg ._adad ._cb )>=_badg {var _gcbcb []string ;for _cdd :=range _ebfg ._adad ._cb {_gcbcb =append (_gcbcb ,_cdd );};_afa .Slice (_gcbcb ,func (_ecf ,_eea int )bool {return _ebfg ._adad ._cb [_gcbcb [_ecf ]]._facf < _ebfg ._adad ._cb [_gcbcb [_eea ]]._facf ;
});delete (_ebfg ._adad ._cb ,_gcbcb [0]);};_ebfg ._adad ._cb [_eceb ]=_agdcf ;};return _aafd ,nil ;};func (_fca rulingList )removeDuplicates ()rulingList {if len (_fca )==0{return nil ;};_fca .sort ();_aadf :=rulingList {_fca [0]};for _ ,_ebdc :=range _fca [1:]{if _ebdc .equals (_aadf [len (_aadf )-1]){continue ;
};_aadf =append (_aadf ,_ebdc );};return _aadf ;};var (_fe =_af .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_eg =_af .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func _ffbf (_cdeb ,_fge _gf .PdfRectangle )bool {return _cdeb .Lly <=_fge .Ury &&_fge .Lly <=_cdeb .Ury };func (_gfdg *subpath )add (_ffa ..._cc .Point ){_gfdg ._cgf =append (_gfdg ._cgf ,_ffa ...)};func _edga (_bcde []TextMark ,_eddge *int ,_ddffg string )[]TextMark {_bdcg :=_geef ;
_bdcg .Text =_ddffg ;return _aefg (_bcde ,_eddge ,_bdcg );};type textTable struct{_gf .PdfRectangle ;_edbb ,_debd int ;_cgdaa bool ;_bagf map[uint64 ]*textPara ;_cadb map[uint64 ]compositeCell ;};func _deba (_cgaf ,_fbca float64 )string {_afgf :=!_agcc (_cgaf -_fbca );
if _afgf {return "\u000a";};return "\u0020";};func (_dffd *wordBag )scanBand (_fecb string ,_ffee *wordBag ,_fgfd func (_bcgg *wordBag ,_agdb *textWord )bool ,_efdf ,_eaac ,_dgbf float64 ,_efg ,_fgbcf bool )int {_ccac :=_ffee ._aed ;var _gde map[int ]map[*textWord ]struct{};
if !_efg {_gde =_dffd .makeRemovals ();};_ecc :=_edaa *_ccac ;_eegd :=0;for _ ,_bdfb :=range _dffd .depthBand (_efdf -_ecc ,_eaac +_ecc ){if len (_dffd ._dgbad [_bdfb ])==0{continue ;};for _ ,_bdef :=range _dffd ._dgbad [_bdfb ]{if !(_efdf -_ecc <=_bdef ._ffbae &&_bdef ._ffbae <=_eaac +_ecc ){continue ;
};if !_fgfd (_ffee ,_bdef ){continue ;};_begf :=2.0*_f .Abs (_bdef ._abcda -_ffee ._aed )/(_bdef ._abcda +_ffee ._aed );_defb :=_f .Max (_bdef ._abcda /_ffee ._aed ,_ffee ._aed /_bdef ._abcda );_bagd :=_f .Min (_begf ,_defb );if _dgbf > 0&&_bagd > _dgbf {continue ;
};if _ffee .blocked (_bdef ){continue ;};if !_efg {_ffee .pullWord (_bdef ,_bdfb ,_gde );};_eegd ++;if !_fgbcf {if _bdef ._ffbae < _efdf {_efdf =_bdef ._ffbae ;};if _bdef ._ffbae > _eaac {_eaac =_bdef ._ffbae ;};};if _efg {break ;};};};if !_efg {_dffd .applyRemovals (_gde );
};return _eegd ;};func _beaa (_dedc []rulingList )(rulingList ,rulingList ){var _fbgg rulingList ;for _ ,_egag :=range _dedc {_fbgg =append (_fbgg ,_egag ...);};return _fbgg .vertsHorzs ();};func (_fgcfa compositeCell )String ()string {_bdbc :="";if len (_fgcfa .paraList )> 0{_bdbc =_gfcf (_fgcfa .paraList .merge ().text (),50);
};return _dg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_fgcfa .PdfRectangle ,len (_fgcfa .paraList ),_bdbc );};func (_fbag paraList )readBefore (_edaed []int ,_dcba ,_bebd int )bool {_cdab ,_ebd :=_fbag [_dcba ],_fbag [_bebd ];
if _fecbf (_cdab ,_ebd )&&_cdab .Lly > _ebd .Lly {return true ;};if !(_cdab ._bbbf .Urx < _ebd ._bbbf .Llx ){return false ;};_dcffe ,_affe :=_cdab .Lly ,_ebd .Lly ;if _dcffe > _affe {_affe ,_dcffe =_dcffe ,_affe ;};_aefgg :=_f .Max (_cdab ._bbbf .Llx ,_ebd ._bbbf .Llx );
_gece :=_f .Min (_cdab ._bbbf .Urx ,_ebd ._bbbf .Urx );_dbbfc :=_fbag .llyRange (_edaed ,_dcffe ,_affe );for _ ,_dfcd :=range _dbbfc {if _dfcd ==_dcba ||_dfcd ==_bebd {continue ;};_dbge :=_fbag [_dfcd ];if _dbge ._bbbf .Llx <=_gece &&_aefgg <=_dbge ._bbbf .Urx {return false ;
};};return true ;};func _ccfb (_cdg *wordBag ,_fgcb *textWord ,_cac float64 )bool {return _cdg .Urx <=_fgcb .Llx &&_fgcb .Llx < _cdg .Urx +_cac ;};func (_ggb *textObject )showTextAdjusted (_afcc *_fb .PdfObjectArray )error {_eafd :=false ;for _ ,_ggacd :=range _afcc .Elements (){switch _ggacd .(type ){case *_fb .PdfObjectFloat ,*_fb .PdfObjectInteger :_aaee ,_ebg :=_fb .GetNumberAsFloat (_ggacd );
if _ebg !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggacd ,_afcc );
return _ebg ;};_cfac ,_gcea :=-_aaee *0.001*_ggb ._ffcb ._fbe ,0.0;if _eafd {_gcea ,_cfac =_cfac ,_gcea ;};_degf :=_ebb (_cc .Point {X :_cfac ,Y :_gcea });_ggb ._dcg .Concat (_degf );case *_fb .PdfObjectString :_efddc ,_agg :=_fb .GetStringBytes (_ggacd );
if !_agg {_gb .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggacd ,_afcc );
return _fb .ErrTypeError ;};_ggb .renderText (_efddc );default:_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggacd ,_afcc );
return _fb .ErrTypeError ;};};return nil ;};type lineRuling struct{_bbcc rulingKind ;_ecbgd markKind ;_b .Color ;_fbfab ,_eefd _cc .Point ;};func _bbfge (_bedc []float64 ,_ebbc ,_adgcb float64 )[]float64 {_dfffg ,_ceac :=_ebbc ,_adgcb ;if _ceac < _dfffg {_dfffg ,_ceac =_ceac ,_dfffg ;
};_dedcg :=make ([]float64 ,0,len (_bedc )+2);_dedcg =append (_dedcg ,_ebbc );for _ ,_fbgee :=range _bedc {if _fbgee <=_dfffg {continue ;}else if _fbgee >=_ceac {break ;};_dedcg =append (_dedcg ,_fbgee );};_dedcg =append (_dedcg ,_adgcb );return _dedcg ;
};func (_addd *textTable )putComposite (_fgfg ,_ddfbe int ,_gfgbe paraList ,_bfeg _gf .PdfRectangle ){if len (_gfgbe )==0{_gb .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_dgbge :=compositeCell {_bfeg ,_gfgbe };if _dfad {_dg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_fgfg ,_ddfbe ,_dgbge .String ());
};_dgbge .updateBBox ();_addd ._cadb [_gbff (_fgfg ,_ddfbe )]=_dgbge ;};func _dgcdfc (_dcfff string )bool {for _ ,_gbagf :=range _dcfff {if !_cd .IsSpace (_gbagf ){return false ;};};return true ;};func (_gbbb *textPara )toCellTextMarks (_ccdd *int )[]TextMark {var _fefa []TextMark ;
for _gbde ,_gffe :=range _gbbb ._effa {_gddg :=_gffe .toTextMarks (_ccdd );_gegg :=_edaf &&_gffe .endsInHyphen ()&&_gbde !=len (_gbbb ._effa )-1;if _gegg {_gddg =_bgce (_gddg ,_ccdd );};_fefa =append (_fefa ,_gddg ...);if !(_gegg ||_gbde ==len (_gbbb ._effa )-1){_fefa =_edga (_fefa ,_ccdd ,_deba (_gffe ._fcfag ,_gbbb ._effa [_gbde +1]._fcfag ));
};};return _fefa ;};func (_bdaaf rulingList )log (_caeba string ){if !_gggbb {return ;};_gb .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_caeba ,_bdaaf .String ());for _deggd ,_debe :=range _bdaaf {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_deggd ,_debe .String ());
};};func _eaag (_eede ,_cbea _cc .Point )rulingKind {_egga :=_f .Abs (_eede .X -_cbea .X );_fegce :=_f .Abs (_eede .Y -_cbea .Y );return _efcd (_egga ,_fegce ,_dbc );};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};

// String returns a human readable description of `s`.
func (_gbeeb intSet )String ()string {var _efdee []int ;for _bcac :=range _gbeeb {if _gbeeb .has (_bcac ){_efdee =append (_efdee ,_bcac );};};_afa .Ints (_efdee );return _dg .Sprintf ("\u0025\u002b\u0076",_efdee );};func (_gdac *ruling )alignsPrimary (_bedf *ruling )bool {return _gdac ._ffedb ==_bedf ._ffedb &&_f .Abs (_gdac ._cegc -_bedf ._cegc )< _adgc *0.5;
};func (_edba compositeCell )split (_fdcda ,_fcbdc []float64 )*textTable {_dcbc :=len (_fdcda )+1;_afbf :=len (_fcbdc )+1;if _dfad {_gb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_afbf ,_dcbc ,_edba ,_fdcda ,_fcbdc );
_dg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_edba .paraList ));for _fbbf ,_deed :=range _edba .paraList {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbbf ,_deed .String ());};_dg .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_edba .lines ()));
for _ccbf ,_dbdc :=range _edba .lines (){_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ccbf ,_dbdc );};};_fdcda =_bbfge (_fdcda ,_edba .Ury ,_edba .Lly );_fcbdc =_bbfge (_fcbdc ,_edba .Llx ,_edba .Urx );_fbcd :=make (map[uint64 ]*textPara ,_afbf *_dcbc );
_agdda :=textTable {_edbb :_afbf ,_debd :_dcbc ,_bagf :_fbcd };_accc :=_edba .paraList ;_afa .Slice (_accc ,func (_gcbf ,_cbbe int )bool {_dfff ,_ccgd :=_accc [_gcbf ],_accc [_cbbe ];_dbga ,_fada :=_dfff .Lly ,_ccgd .Lly ;if _dbga !=_fada {return _dbga < _fada ;
};return _dfff .Llx < _ccgd .Llx ;});_geffe :=make (map[uint64 ]_gf .PdfRectangle ,_afbf *_dcbc );for _deece ,_feggd :=range _fdcda [1:]{_cdec :=_fdcda [_deece ];for _fedf ,_cegd :=range _fcbdc [1:]{_dcea :=_fcbdc [_fedf ];_geffe [_gbff (_fedf ,_deece )]=_gf .PdfRectangle {Llx :_dcea ,Urx :_cegd ,Lly :_feggd ,Ury :_cdec };
};};if _dfad {_gb .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_dg .Printf ("\u0020\u0020\u0020\u0020");for _geed :=0;_geed < _afbf ;_geed ++{_dg .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_geed );
};_dg .Println ();for _ddab :=0;_ddab < _dcbc ;_ddab ++{_dg .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_ddab );for _aagg :=0;_aagg < _afbf ;_aagg ++{_dg .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_geffe [_gbff (_aagg ,_ddab )]);};_dg .Println ();
};};_ecdg :=func (_degfd *textLine )(int ,int ){for _baab :=0;_baab < _dcbc ;_baab ++{for _fcda :=0;_fcda < _afbf ;_fcda ++{if _bdcf (_geffe [_gbff (_fcda ,_baab )],_degfd .PdfRectangle ){return _fcda ,_baab ;};};};return -1,-1;};_fgbf :=make (map[uint64 ][]*textLine ,_afbf *_dcbc );
for _ ,_ecda :=range _accc .lines (){_cdca ,_bgef :=_ecdg (_ecda );if _cdca < 0{continue ;};_fgbf [_gbff (_cdca ,_bgef )]=append (_fgbf [_gbff (_cdca ,_bgef )],_ecda );};for _cgdab :=0;_cgdab < len (_fdcda )-1;_cgdab ++{_ffda :=_fdcda [_cgdab ];_dbaef :=_fdcda [_cgdab +1];
for _eaecd :=0;_eaecd < len (_fcbdc )-1;_eaecd ++{_ddfe :=_fcbdc [_eaecd ];_gdef :=_fcbdc [_eaecd +1];_ebbgd :=_gf .PdfRectangle {Llx :_ddfe ,Urx :_gdef ,Lly :_dbaef ,Ury :_ffda };_dgfa :=_fgbf [_gbff (_eaecd ,_cgdab )];if len (_dgfa )==0{continue ;};_agfd :=_cgbc (_ebbgd ,_dgfa );
_agdda .put (_eaecd ,_cgdab ,_agfd );};};return &_agdda ;};func (_afcb rulingList )mergePrimary ()float64 {_cbed :=_afcb [0]._cegc ;for _ ,_eabgf :=range _afcb [1:]{_cbed +=_eabgf ._cegc ;};return _cbed /float64 (len (_afcb ));};func _cbfe (_bbbc ,_bgegf _cc .Point ,_acaf _b .Color )(*ruling ,bool ){_caaga :=lineRuling {_fbfab :_bbbc ,_eefd :_bgegf ,_bbcc :_efda (_bbbc ,_bgegf ),Color :_acaf };
if _caaga ._bbcc ==_ebca {return nil ,false ;};return _caaga .asRuling ();};func _ebe (_fggd float64 )bool {return _f .Abs (_fggd )< _adgc };

// String returns a string describing `ma`.
func (_ecaf TextMarkArray )String ()string {_ffbe :=len (_ecaf ._deff );if _ffbe ==0{return "\u0045\u004d\u0050T\u0059";};_daba :=_ecaf ._deff [0];_gcbc :=_ecaf ._deff [_ffbe -1];return _dg .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_ffbe ,_daba ,_gcbc );
};

// Len returns the number of TextMarks in `ma`.
func (_abbf *TextMarkArray )Len ()int {if _abbf ==nil {return 0;};return len (_abbf ._deff );};func _fgge (_aagf ,_dfab _gf .PdfRectangle )_gf .PdfRectangle {return _gf .PdfRectangle {Llx :_f .Min (_aagf .Llx ,_dfab .Llx ),Lly :_f .Min (_aagf .Lly ,_dfab .Lly ),Urx :_f .Max (_aagf .Urx ,_dfab .Urx ),Ury :_f .Max (_aagf .Ury ,_dfab .Ury )};
};func (_edfd *wordBag )text ()string {_aaab :=_edfd .allWords ();_fbfb :=make ([]string ,len (_aaab ));for _bgbgf ,_bgf :=range _aaab {_fbfb [_bgbgf ]=_bgf ._bbgf ;};return _g .Join (_fbfb ,"\u0020");};func (_gag *subpath )removeDuplicates (){if len (_gag ._cgf )==0{return ;
};_ffed :=[]_cc .Point {_gag ._cgf [0]};for _ ,_bbea :=range _gag ._cgf [1:]{if !_fadad (_bbea ,_ffed [len (_ffed )-1]){_ffed =append (_ffed ,_bbea );};};_gag ._cgf =_ffed ;};func _effga (_cgab int ,_bcff func (int ,int )bool )[]int {_dbgdf :=make ([]int ,_cgab );
for _dbcafe :=range _dbgdf {_dbgdf [_dbcafe ]=_dbcafe ;};_afa .Slice (_dbgdf ,func (_afgdc ,_cbcgc int )bool {return _bcff (_dbgdf [_afgdc ],_dbgdf [_cbcgc ])});return _dbgdf ;};func (_eeba *textLine )endsInHyphen ()bool {_efeb :=_eeba ._dbcg [len (_eeba ._dbcg )-1];
_fdfd :=_efeb ._bbgf ;_bfed ,_ecbb :=_d .DecodeLastRuneInString (_fdfd );if _ecbb <=0||!_cd .Is (_cd .Hyphen ,_bfed ){return false ;};if _efeb ._bdcc &&_gafc (_fdfd ){return true ;};return _gafc (_eeba .text ());};func _deefa (_gfgb ,_ccda *textPara )bool {if _gfgb ._aged ||_ccda ._aged {return true ;
};return _agcc (_gfgb .depth ()-_ccda .depth ());};func (_ecfdg *subpath )isQuadrilateral ()bool {if len (_ecfdg ._cgf )< 4||len (_ecfdg ._cgf )> 5{return false ;};if len (_ecfdg ._cgf )==5{_cgaed :=_ecfdg ._cgf [0];_efbc :=_ecfdg ._cgf [4];if _cgaed .X !=_efbc .X ||_cgaed .Y !=_efbc .Y {return false ;
};};return true ;};func (_dcgg paraList )reorder (_ccgf []int ){_effef :=make (paraList ,len (_dcgg ));for _ebcf ,_fbedd :=range _ccgf {_effef [_ebcf ]=_dcgg [_fbedd ];};copy (_dcgg ,_effef );};func (_afeaa *textTable )getComposite (_aegb ,_bccd int )(paraList ,_gf .PdfRectangle ){_dbgag ,_bgge :=_afeaa ._cadb [_gbff (_aegb ,_bccd )];
if _dfad {_dg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_aegb ,_bccd ,_dbgag .String ());};if !_bgge {return nil ,_gf .PdfRectangle {};
};return _dbgag .parasBBox ();};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func _fecbf (_fgfde ,_fgbcb *textPara )bool {return _gegb (_fgfde ._bbbf ,_fgbcb ._bbbf )};const (_edaf =true ;_aage =true ;_dcfdf =true ;_bbc =false ;_ecef =false ;_fggec =6;_ddfg =3.0;_edcdb =200;
_ggea =true ;_fcgd =true ;_aecf =true ;_debb =true ;_gdec =false ;);func (_gbbce paraList )tables ()[]TextTable {var _efbb []TextTable ;if _dfad {_gb .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_ddea :=range _gbbce {_fgfc :=_ddea ._dgbc ;
if _fgfc !=nil &&_fgfc .isExportable (){_efbb =append (_efbb ,_fgfc .toTextTable ());};};return _efbb ;};func (_aef *stateStack )size ()int {return len (*_aef )};

// String returns a human readable description of `path`.
func (_aafa *subpath )String ()string {_bcf :=_aafa ._cgf ;_gede :=len (_bcf );if _gede <=5{return _dg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_gede ,_bcf );};return _dg .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_gede ,_bcf [0],_bcf [1],_bcf [_gede -1]);
};func (_ccbcc *textPara )taken ()bool {return _ccbcc ==nil ||_ccbcc ._eacag };func _gfadc (_aefb _gf .PdfRectangle )*ruling {return &ruling {_ffedb :_bcaf ,_cegc :_aefb .Urx ,_fcdfd :_aefb .Lly ,_gecf :_aefb .Ury };};func (_ddf *textObject )getFillColor ()_b .Color {return _caca (_ddf ._bca .ColorspaceNonStroking ,_ddf ._bca .ColorNonStroking );
};func (_cgfgc lineRuling )yMean ()float64 {return 0.5*(_cgfgc ._fbfab .Y +_cgfgc ._eefd .Y )};func (_fgcfgf rulingList )bbox ()_gf .PdfRectangle {var _eabg _gf .PdfRectangle ;if len (_fgcfgf )==0{_gb .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _gf .PdfRectangle {};};if _fgcfgf [0]._ffedb ==_gbbge {_eabg .Llx ,_eabg .Urx =_fgcfgf .secMinMax ();_eabg .Lly ,_eabg .Ury =_fgcfgf .primMinMax ();}else {_eabg .Llx ,_eabg .Urx =_fgcfgf .primMinMax ();_eabg .Lly ,_eabg .Ury =_fgcfgf .secMinMax ();
};return _eabg ;};func (_gaaf *textPara )writeText (_edff _e .Writer ){if _gaaf ._dgbc ==nil {_gaaf .writeCellText (_edff );return ;};for _ggaca :=0;_ggaca < _gaaf ._dgbc ._debd ;_ggaca ++{for _afag :=0;_afag < _gaaf ._dgbc ._edbb ;_afag ++{_aagce :=_gaaf ._dgbc .get (_afag ,_ggaca );
if _aagce ==nil {_edff .Write ([]byte ("\u0009"));}else {_aagce .writeCellText (_edff );};_edff .Write ([]byte ("\u0020"));};if _ggaca < _gaaf ._dgbc ._debd -1{_edff .Write ([]byte ("\u000a"));};};};func (_ecgdd paraList )llyRange (_ecbe []int ,_bdea ,_dacd float64 )[]int {_gdbg :=len (_ecgdd );
if _dacd < _ecgdd [_ecbe [0]].Lly ||_bdea > _ecgdd [_ecbe [_gdbg -1]].Lly {return nil ;};_dbd :=_afa .Search (_gdbg ,func (_aagc int )bool {return _ecgdd [_ecbe [_aagc ]].Lly >=_bdea });_baad :=_afa .Search (_gdbg ,func (_fbed int )bool {return _ecgdd [_ecbe [_fbed ]].Lly > _dacd });
return _ecbe [_dbd :_baad ];};type intSet map[int ]struct{};func (_cebga rulingList )vertsHorzs ()(rulingList ,rulingList ){var _eded ,_beea rulingList ;for _ ,_eabf :=range _cebga {switch _eabf ._ffedb {case _bcaf :_eded =append (_eded ,_eabf );case _gbbge :_beea =append (_beea ,_eabf );
};};return _eded ,_beea ;};func _eggd (_fbecf ,_ceba float64 )bool {return _fbecf /_f .Max (_gccde ,_ceba )< _dbc };func _cbgc (_bccfd []*wordBag )[]*wordBag {if len (_bccfd )<=1{return _bccfd ;};if _fggg {_gb .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_afa .Slice (_bccfd ,func (_fdf ,_gddb int )bool {_cgga ,_cedc :=_bccfd [_fdf ],_bccfd [_gddb ];_gdc :=_cgga .Width ()*_cgga .Height ();_dfge :=_cedc .Width ()*_cedc .Height ();if _gdc !=_dfge {return _gdc > _dfge ;};if _cgga .Height ()!=_cedc .Height (){return _cgga .Height ()> _cedc .Height ();
};return _fdf < _gddb ;});var _bcfg []*wordBag ;_cfb :=make (intSet );for _fbec :=0;_fbec < len (_bccfd );_fbec ++{if _cfb .has (_fbec ){continue ;};_ccae :=_bccfd [_fbec ];for _dddg :=_fbec +1;_dddg < len (_bccfd );_dddg ++{if _cfb .has (_fbec ){continue ;
};_gdb :=_bccfd [_dddg ];_bfd :=_ccae .PdfRectangle ;_bfd .Llx -=_ccae ._aed ;if _bdcf (_bfd ,_gdb .PdfRectangle ){_ccae .absorb (_gdb );_cfb .add (_dddg );};};_bcfg =append (_bcfg ,_ccae );};if len (_bccfd )!=len (_bcfg )+len (_cfb ){_gb .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_bccfd ),len (_bcfg ),len (_cfb ));
};return _bcfg ;};func (_ceef *shapesState )lineTo (_fad ,_dabc float64 ){if _gbaf {_gb .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_fad ,_dabc ,_ceef .devicePoint (_fad ,_dabc ));
};_ceef .addPoint (_fad ,_dabc );};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_dgdb *PageText )ApplyArea (bbox _gf .PdfRectangle ){_bgdc :=make ([]*textMark ,0,len (_dgdb ._dfcg ));for _ ,_aec :=range _dgdb ._dfcg {if _ccd (_aec .bbox (),bbox ){_bgdc =append (_bgdc ,_aec );};};var _dagc paraList ;_ddc :=len (_bgdc );for _bde :=0;
_bde < 360&&_ddc > 0;_bde +=90{_gfab :=make ([]*textMark ,0,len (_bgdc )-_ddc );for _ ,_adc :=range _bgdc {if _adc ._efadg ==_bde {_gfab =append (_gfab ,_adc );};};if len (_gfab )> 0{_afge :=_dbfg (_gfab ,_dgdb ._efcg ,nil ,nil );_dagc =append (_dagc ,_afge ...);
_ddc -=len (_gfab );};};_gffb :=new (_ba .Buffer );_dagc .writeText (_gffb );_dgdb ._bccf =_gffb .String ();_dgdb ._eagg =_dagc .toTextMarks ();_dgdb ._bcg =_dagc .tables ();};func (_faaa *textObject )setTextRise (_dgb float64 ){if _faaa ==nil {return ;
};_faaa ._ffcb ._aabf =_dgb ;};func _baddfb (_ddbee []*textMark ,_bfeff _gf .PdfRectangle )*textWord {_bege :=_ddbee [0].PdfRectangle ;_degea :=_ddbee [0]._egca ;for _ ,_ffdbg :=range _ddbee [1:]{_bege =_fgge (_bege ,_ffdbg .PdfRectangle );if _ffdbg ._egca > _degea {_degea =_ffdbg ._egca ;
};};return &textWord {PdfRectangle :_bege ,_ebbfbc :_ddbee ,_ffbae :_bfeff .Ury -_bege .Lly ,_abcda :_degea };};func (_cdc *textObject )setFont (_bag string ,_gged float64 )error {if _cdc ==nil {return nil ;};_cdc ._ffcb ._fbe =_gged ;_fde ,_abgg :=_cdc .getFont (_bag );
if _abgg !=nil {return _abgg ;};_cdc ._ffcb ._fac =_fde ;return nil ;};func (_fgad *textTable )logComposite (_fggc string ){if !_dfad {return ;};_gb .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_fgad ._edbb ,_fgad ._debd ,_fggc );
_dg .Printf ("\u0025\u0035\u0073 \u007c","");for _fecce :=0;_fecce < _fgad ._edbb ;_fecce ++{_dg .Printf ("\u0025\u0033\u0064 \u007c",_fecce );};_dg .Println ("");_dg .Printf ("\u0025\u0035\u0073 \u002b","");for _eege :=0;_eege < _fgad ._edbb ;_eege ++{_dg .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_dg .Println ("");for _gcdf :=0;_gcdf < _fgad ._debd ;_gcdf ++{_dg .Printf ("\u0025\u0035\u0064 \u007c",_gcdf );for _ecbbb :=0;_ecbbb < _fgad ._edbb ;_ecbbb ++{_dffaa ,_ :=_fgad ._cadb [_gbff (_ecbbb ,_gcdf )].parasBBox ();_dg .Printf ("\u0025\u0033\u0064 \u007c",len (_dffaa ));
};_dg .Println ("");};_gb .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_fgad ._edbb ,_fgad ._debd ,_fggc );_dg .Printf ("\u0025\u0035\u0073 \u007c","");for _aagcc :=0;_aagcc < _fgad ._edbb ;_aagcc ++{_dg .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_aagcc );
};_dg .Println ("");_dg .Printf ("\u0025\u0035\u0073 \u002b","");for _deeff :=0;_deeff < _fgad ._edbb ;_deeff ++{_dg .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_dg .Println ("");for _abfc :=0;_abfc < _fgad ._debd ;
_abfc ++{_dg .Printf ("\u0025\u0035\u0064 \u007c",_abfc );for _gdged :=0;_gdged < _fgad ._edbb ;_gdged ++{_geba ,_ :=_fgad ._cadb [_gbff (_gdged ,_abfc )].parasBBox ();_fbcg :="";_fgde :=_geba .merge ();if _fgde !=nil {_fbcg =_fgde .text ();};_fbcg =_dg .Sprintf ("\u0025\u0071",_gfcf (_fbcg ,12));
_fbcg =_fbcg [1:len (_fbcg )-1];_dg .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_fbcg );};_dg .Println ("");};};func (_adebb gridTile )contains (_cebc _gf .PdfRectangle )bool {if _adebb .numBorders ()< 3{return false ;};if _adebb ._gbadg &&_cebc .Llx < _adebb .Llx -_bdbb {return false ;
};if _adebb ._dfeb &&_cebc .Urx > _adebb .Urx +_bdbb {return false ;};if _adebb ._gdeaa &&_cebc .Lly < _adebb .Lly -_bdbb {return false ;};if _adebb ._faab &&_cebc .Ury > _adebb .Ury +_bdbb {return false ;};return true ;};func (_bfae *ruling )intersects (_gdad *ruling )bool {_eeada :=(_bfae ._ffedb ==_bcaf &&_gdad ._ffedb ==_gbbge )||(_gdad ._ffedb ==_bcaf &&_bfae ._ffedb ==_gbbge );
_eecf :=func (_fabg ,_ffdbdf *ruling )bool {return _fabg ._fcdfd -_dced <=_ffdbdf ._cegc &&_ffdbdf ._cegc <=_fabg ._gecf +_dced ;};_afged :=_eecf (_bfae ,_gdad );_ecdab :=_eecf (_gdad ,_bfae );if _gggbb {_dg .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_eeada ,_afged ,_ecdab ,_eeada &&_afged &&_ecdab ,_bfae ,_gdad );
};return _eeada &&_afged &&_ecdab ;};func _ccge (_fgfcc ,_edgf float64 )bool {return _f .Abs (_fgfcc -_edgf )<=_dced };

// String returns a string describing the current state of the textState stack.
func (_ade *stateStack )String ()string {_fdb :=[]string {_dg .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_ade ))};for _eedg ,_fda :=range *_ade {_bbf :="\u003c\u006e\u0069l\u003e";
if _fda !=nil {_bbf =_fda .String ();};_fdb =append (_fdb ,_dg .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_eedg ,_bbf ));};return _g .Join (_fdb ,"\u000a");};func (_fdaa rulingList )connections (_dafd map[int ]intSet ,_dbgd int )intSet {_bafg :=make (intSet );
_ecfde :=make (intSet );var _aabgf func (int );_aabgf =func (_bfaa int ){if !_ecfde .has (_bfaa ){_ecfde .add (_bfaa );for _fdfdg :=range _fdaa {if _dafd [_fdfdg ].has (_bfaa ){_bafg .add (_fdfdg );};};for _ecgc :=range _fdaa {if _bafg .has (_ecgc ){_aabgf (_ecgc );
};};};};_aabgf (_dbgd );return _bafg ;};func (_accad *textTable )compositeRowCorridors ()map[int ][]float64 {_aaecg :=make (map[int ][]float64 ,_accad ._debd );if _dfad {_gb .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_accad ._debd );
};for _bcad :=1;_bcad < _accad ._debd ;_bcad ++{var _bdfa []compositeCell ;for _bccg :=0;_bccg < _accad ._edbb ;_bccg ++{if _cabc ,_abef :=_accad ._cadb [_gbff (_bccg ,_bcad )];_abef {_bdfa =append (_bdfa ,_cabc );};};if len (_bdfa )==0{continue ;};_gcfdgb :=_fbfaa (_bdfa );
_aaecg [_bcad ]=_gcfdgb ;if _dfad {_dg .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_bcad ,_gcfdgb );};};return _aaecg ;};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_dce PageText )ToText ()string {return _dce .Text ()};func (_addee intSet )has (_gceg int )bool {_ ,_cfbf :=_addee [_gceg ];return _cfbf };func _gafc (_dggc string )bool {if _d .RuneCountInString (_dggc )< _acb {return false ;};_fcfg ,_eceaf :=_d .DecodeLastRuneInString (_dggc );
if _eceaf <=0||!_cd .Is (_cd .Hyphen ,_fcfg ){return false ;};_fcfg ,_eceaf =_d .DecodeLastRuneInString (_dggc [:len (_dggc )-_eceaf ]);return _eceaf > 0&&!_cd .IsSpace (_fcfg );};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_ga *Extractor )ExtractTextWithStats ()(_dcb string ,_bge int ,_db int ,_dfg error ){_cfg ,_bge ,_db ,_dfg :=_ga .ExtractPageText ();if _dfg !=nil {return "",_bge ,_db ,_dfg ;};return _cfg .Text (),_bge ,_db ,nil ;};func _baf (_eaec ,_afcca bounded )float64 {_bgda :=_gbfa (_eaec ,_afcca );
if !_agcc (_bgda ){return _bgda ;};return _dcce (_eaec ,_afcca );};func (_cbfdg paraList )findGridTables (_aaeg []gridTiling )[]*textTable {if _dfad {_gb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_cbfdg ));
for _fbgb ,_ffcf :=range _cbfdg {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbgb ,_ffcf );};};var _eccga []*textTable ;for _ggdce ,_gbfdf :=range _aaeg {_fbbd ,_beec :=_cbfdg .findTableGrid (_gbfdf );if _fbbd !=nil {_fbbd .log (_dg .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_ggdce ));
_eccga =append (_eccga ,_fbbd );_fbbd .markCells ();};for _aaddg :=range _beec {_aaddg ._eacag =true ;};};if _dfad {_gb .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_eccga ));
};return _eccga ;};func (_agae *wordBag )depthIndexes ()[]int {if len (_agae ._dgbad )==0{return nil ;};_bdfg :=make ([]int ,len (_agae ._dgbad ));_bagc :=0;for _ddfb :=range _agae ._dgbad {_bdfg [_bagc ]=_ddfb ;_bagc ++;};_afa .Ints (_bdfg );return _bdfg ;
};type shapesState struct{_fdbb _cc .Matrix ;_eeab _cc .Matrix ;_bgga []*subpath ;_fbbc bool ;_fdc _cc .Point ;_ffde *textObject ;};func (_gddgf rulingList )sort (){_afa .Slice (_gddgf ,_gddgf .comp )};func _abeg (_cdeaa func (*wordBag ,*textWord ,float64 )bool ,_gfb float64 )func (*wordBag ,*textWord )bool {return func (_dgf *wordBag ,_cgdc *textWord )bool {return _cdeaa (_dgf ,_cgdc ,_gfb )};
};

// Elements returns the TextMarks in `ma`.
func (_adea *TextMarkArray )Elements ()[]TextMark {return _adea ._deff };func _dcce (_eafg ,_dfdc bounded )float64 {return _gggbe (_eafg )-_gggbe (_dfdc )};type event struct{_geec float64 ;_fdfe bool ;_afbc int ;};var _gc =false ;func (_cbab *textObject )moveLP (_bada ,_cbag float64 ){_cbab ._fga .Concat (_cc .NewMatrix (1,0,0,1,_bada ,_cbag ));
_cbab ._dcg =_cbab ._fga ;};const (_ecgd =1.0e-6;_ffeee =1.0e-4;_dggd =10;_gcfb =6;_edaa =0.5;_gbbc =0.12;_badf =0.19;_faac =0.04;_bee =0.04;_dace =1.0;_fgcfg =0.04;_bgfc =0.4;_gddf =0.7;_eddga =1.0;_cgfd =0.1;_gcfa =1.4;_cdcd =0.46;_gagg =0.02;_gfgfb =0.2;
_bdb =0.5;_acb =4;_bcfe =4.0;_dgbb =6;_eagga =0.3;_edbf =0.01;_ebag =0.02;_caebb =2;_bgde =2;_abca =500;_fede =4.0;_dfda =4.0;_dbc =0.05;_gccde =0.1;_dced =2.0;_adgc =2.0;_bdbb =1.5;_eccg =3.0;_adgbg =0.25;);func (_ebagb paraList )findTableGrid (_adfa gridTiling )(*textTable ,map[*textPara ]struct{}){_cgec :=len (_adfa ._ggdf );
_cfgf :=len (_adfa ._ebff );_bfcg :=textTable {_cgdaa :true ,_edbb :_cgec ,_debd :_cfgf ,_bagf :make (map[uint64 ]*textPara ,_cgec *_cfgf ),_cadb :make (map[uint64 ]compositeCell ,_cgec *_cfgf )};_cbdab :=make (map[*textPara ]struct{});_cbgcc :=int ((1.0-_eagga )*float64 (_cgec *_cfgf ));
_aggcb :=0;if _ggbf {_gb .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_cgec ,_cfgf );};for _defae ,_cege :=range _adfa ._ebff {_dfcc ,_dgge :=_adfa ._cebgg [_cege ];
if !_dgge {continue ;};for _dcec ,_daeg :=range _adfa ._ggdf {_daeb ,_gefff :=_dfcc [_daeg ];if !_gefff {continue ;};_gdeg :=_ebagb .inTile (_daeb );if len (_gdeg )==0{_aggcb ++;if _aggcb > _cbgcc {if _ggbf {_gb .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_aggcb );
};return nil ,nil ;};}else {_bfcg .putComposite (_dcec ,_defae ,_gdeg ,_daeb .PdfRectangle );for _ ,_bcbgb :=range _gdeg {_cbdab [_bcbgb ]=struct{}{};};};};};_geccd :=0;for _gbba :=0;_gbba < _cgec ;_gbba ++{_dbdcfa :=_bfcg .get (_gbba ,0);if _dbdcfa ==nil ||!_dbdcfa ._aged {_geccd ++;
};};if _geccd ==0{if _ggbf {_gb .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_gbag :=_bfcg .reduceTiling (_adfa ,_eccg );_gbag =_gbag .subdivide ();return _gbag ,_cbdab ;};func (_eec *shapesState )cubicTo (_bbb ,_fcd ,_bfge ,_fcde ,_ffcd ,_edcd float64 ){if _gbaf {_gb .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_eec .addPoint (_ffcd ,_edcd );};func _bafe (_ecgcg ,_ggbff _cc .Point )bool {_ecge :=_f .Abs (_ecgcg .X -_ggbff .X );_dbcaf :=_f .Abs (_ecgcg .Y -_ggbff .Y );return _eggd (_dbcaf ,_ecge );};func (_cbabg paraList )eventNeighbours (_eabcc []event )map[*textPara ][]int {_afa .Slice (_eabcc ,func (_fdgf ,_ecag int )bool {_accca ,_gadb :=_eabcc [_fdgf ],_eabcc [_ecag ];
_eeccf ,_adef :=_accca ._geec ,_gadb ._geec ;if _eeccf !=_adef {return _eeccf < _adef ;};if _accca ._fdfe !=_gadb ._fdfe {return _accca ._fdfe ;};return _fdgf < _ecag ;});_begdb :=make (map[int ]intSet );_dgde :=make (intSet );for _ ,_gegc :=range _eabcc {if _gegc ._fdfe {_begdb [_gegc ._afbc ]=make (intSet );
for _dddgf :=range _dgde {if _dddgf !=_gegc ._afbc {_begdb [_gegc ._afbc ].add (_dddgf );_begdb [_dddgf ].add (_gegc ._afbc );};};_dgde .add (_gegc ._afbc );}else {_dgde .del (_gegc ._afbc );};};_cdgdc :=map[*textPara ][]int {};for _eafc ,_ggcd :=range _begdb {_bfgc :=_cbabg [_eafc ];
if len (_ggcd )==0{_cdgdc [_bfgc ]=nil ;continue ;};_eefae :=make ([]int ,len (_ggcd ));_gfbb :=0;for _cfgc :=range _ggcd {_eefae [_gfbb ]=_cfgc ;_gfbb ++;};_cdgdc [_bfgc ]=_eefae ;};return _cdgdc ;};type imageExtractContext struct{_cde []ImageMark ;_dc int ;
_dab int ;_gcg int ;_abg map[*_fb .PdfObjectStream ]*cachedImage ;_gfg *ImageExtractOptions ;};func (_fabd *shapesState )establishSubpath ()*subpath {_add ,_acf :=_fabd .lastpointEstablished ();if !_acf {_fabd ._bgga =append (_fabd ._bgga ,_bbde (_add ));
};if len (_fabd ._bgga )==0{return nil ;};_fabd ._fbbc =false ;return _fabd ._bgga [len (_fabd ._bgga )-1];};func (_dacdc *textPara )fontsize ()float64 {return _dacdc ._effa [0]._babd };func (_degc compositeCell )parasBBox ()(paraList ,_gf .PdfRectangle ){return _degc .paraList ,_degc .PdfRectangle ;
};

// String returns a string describing `tm`.
func (_edce TextMark )String ()string {_bcef :=_edce .BBox ;var _gggf string ;if _edce .Font !=nil {_gggf =_edce .Font .String ();if len (_gggf )> 50{_gggf =_gggf [:50]+"\u002e\u002e\u002e";};};var _gdd string ;if _edce .Meta {_gdd ="\u0020\u002a\u004d\u002a";
};return _dg .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_edce .Offset ,_edce .Text ,[]rune (_edce .Text ),_bcef .Llx ,_bcef .Lly ,_bcef .Urx ,_bcef .Ury ,_gggf ,_gdd );
};var _fgdbb =map[rulingKind ]string {_ebca :"\u006e\u006f\u006e\u0065",_gbbge :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bcaf :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func (_ecgg *wordBag )pullWord (_gaed *textWord ,_adae int ,_cdb map[int ]map[*textWord ]struct{}){_ecgg .PdfRectangle =_fgge (_ecgg .PdfRectangle ,_gaed .PdfRectangle );
if _gaed ._abcda > _ecgg ._aed {_ecgg ._aed =_gaed ._abcda ;};_ecgg ._dgbad [_adae ]=append (_ecgg ._dgbad [_adae ],_gaed );_cdb [_adae ][_gaed ]=struct{}{};};func (_dagec *textWord )absorb (_dcgfb *textWord ){_dagec .PdfRectangle =_fgge (_dagec .PdfRectangle ,_dcgfb .PdfRectangle );
_dagec ._ebbfbc =append (_dagec ._ebbfbc ,_dcgfb ._ebbfbc ...);};type bounded interface{bbox ()_gf .PdfRectangle };func (_gedc rulingList )toGrids ()[]rulingList {if _gggbb {_gb .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_gedc );
};_faeee :=_gedc .intersections ();if _gggbb {_gb .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_gedc ),len (_faeee ));
for _ ,_bdgbg :=range _dabfa (_faeee ){_dg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_bdgbg ,_faeee [_bdgbg ]);};};_ebbee :=make (map[int ]intSet ,len (_gedc ));for _bdcd :=range _gedc {_dddf :=_gedc .connections (_faeee ,_bdcd );if len (_dddf )> 0{_ebbee [_bdcd ]=_dddf ;
};};if _gggbb {_gb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_ebbee ));for _ ,_efge :=range _dabfa (_ebbee ){_dg .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_efge ,_ebbee [_efge ]);
};};_aeef :=_effga (len (_gedc ),func (_cgae ,_ceeg int )bool {_agaefc ,_bgfd :=len (_ebbee [_cgae ]),len (_ebbee [_ceeg ]);if _agaefc !=_bgfd {return _agaefc > _bgfd ;};return _gedc .comp (_cgae ,_ceeg );});if _gggbb {_gb .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_aeef );
};_fegcd :=[][]int {{_aeef [0]}};_eabcb :for _ ,_baca :=range _aeef [1:]{for _gefg ,_facc :=range _fegcd {for _ ,_cbdaf :=range _facc {if _ebbee [_cbdaf ].has (_baca ){_fegcd [_gefg ]=append (_facc ,_baca );continue _eabcb ;};};};_fegcd =append (_fegcd ,[]int {_baca });
};if _gggbb {_gb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_fegcd );};_afa .SliceStable (_fegcd ,func (_agfgf ,_aegcb int )bool {return len (_fegcd [_agfgf ])> len (_fegcd [_aegcb ])});for _ ,_bgcb :=range _fegcd {_afa .Slice (_bgcb ,func (_aaebg ,_badff int )bool {return _gedc .comp (_bgcb [_aaebg ],_bgcb [_badff ])});
};_cdfc :=make ([]rulingList ,len (_fegcd ));for _aagfc ,_agace :=range _fegcd {_cebf :=make (rulingList ,len (_agace ));for _dacdf ,_gfbg :=range _agace {_cebf [_dacdf ]=_gedc [_gfbg ];};_cdfc [_aagfc ]=_cebf ;};if _gggbb {_gb .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_cdfc );
};var _bfeda []rulingList ;for _ ,_cecc :=range _cdfc {if _daga ,_deae :=_cecc .isActualGrid ();_deae {_cecc =_daga ;_cecc =_cecc .snapToGroups ();_bfeda =append (_bfeda ,_cecc );};};if _gggbb {_gcga ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_bfeda );
_gb .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_cdfc ),len (_bfeda ));};return _bfeda ;};type textLine struct{_gf .PdfRectangle ;
_fcfag float64 ;_dbcg []*textWord ;_babd float64 ;};const (_aaabe =false ;_ecb =false ;_eage =false ;_ccfc =false ;_gbaf =false ;_dge =false ;_aacb =false ;_ccfcc =false ;_fggg =false ;_fecc =_fggg &&true ;_ebba =_fecc &&false ;_eada =_fggg &&true ;_dfad =false ;
_egcda =_dfad &&false ;_cddf =_dfad &&true ;_gggbb =false ;_ebbf =_gggbb &&false ;_gadc =_gggbb &&false ;_ggbf =_gggbb &&true ;_cbaa =_gggbb &&false ;_ffdca =_gggbb &&false ;);func (_acbf *textPara )writeCellText (_cffc _e .Writer ){for _cbgb ,_eadg :=range _acbf ._effa {_bcdd :=_eadg .text ();
_ecfb :=_edaf &&_eadg .endsInHyphen ()&&_cbgb !=len (_acbf ._effa )-1;if _ecfb {_bcdd =_cbd (_bcdd );};_cffc .Write ([]byte (_bcdd ));if !(_ecfb ||_cbgb ==len (_acbf ._effa )-1){_cffc .Write ([]byte (_deba (_eadg ._fcfag ,_acbf ._effa [_cbgb +1]._fcfag )));
};};};func _caca (_eadf _gf .PdfColorspace ,_badcd _gf .PdfColor )_b .Color {if _eadf ==nil ||_badcd ==nil {return _b .Black ;};_cbbbg ,_cfdaf :=_eadf .ColorToRGB (_badcd );if _cfdaf !=nil {_gb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_badcd ,_eadf ,_cfdaf );
return _b .Black ;};_agbd ,_affa :=_cbbbg .(*_gf .PdfColorDeviceRGB );if !_affa {_gb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_cbbbg );
return _b .Black ;};return _b .NRGBA {R :uint8 (_agbd .R ()*255),G :uint8 (_agbd .G ()*255),B :uint8 (_agbd .B ()*255),A :uint8 (255)};};func _cgfda (_ffdbd []pathSection )rulingList {_dacc (_ffdbd );if _gggbb {_gb .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_ffdbd ));
};var _gcfba rulingList ;for _ ,_eeff :=range _ffdbd {for _ ,_dffe :=range _eeff ._afcf {if len (_dffe ._cgf )< 2{continue ;};_abgd :=_dffe ._cgf [0];for _ ,_ccdb :=range _dffe ._cgf [1:]{if _edccd ,_cffa :=_cbfe (_abgd ,_ccdb ,_eeff .Color );_cffa {_gcfba =append (_gcfba ,_edccd );
};_abgd =_ccdb ;};};};if _gggbb {_gb .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_gcfba );};return _gcfba ;};const _ede =20;func (_dffad *textPara )bbox ()_gf .PdfRectangle {return _dffad .PdfRectangle };
func (_cbca rulingList )augmentGrid ()(rulingList ,rulingList ){_acgbc ,_gbdbb :=_cbca .vertsHorzs ();if len (_acgbc )==0||len (_gbdbb )==0{return _acgbc ,_gbdbb ;};_cfaf ,_adf :=_acgbc ,_gbdbb ;_gcfdg :=_acgbc .bbox ();_cbeeb :=_gbdbb .bbox ();if _gggbb {_gb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_gcfdg );
_gb .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_cbeeb );};var _gbee ,_dcgd ,_dagaf ,_cbadb *ruling ;if _cbeeb .Llx < _gcfdg .Llx -_dced {_gbee =&ruling {_fgae :_cdcc ,_ffedb :_bcaf ,_cegc :_cbeeb .Llx ,_fcdfd :_gcfdg .Lly ,_gecf :_gcfdg .Ury };
_acgbc =append (rulingList {_gbee },_acgbc ...);};if _cbeeb .Urx > _gcfdg .Urx +_dced {_dcgd =&ruling {_fgae :_cdcc ,_ffedb :_bcaf ,_cegc :_cbeeb .Urx ,_fcdfd :_gcfdg .Lly ,_gecf :_gcfdg .Ury };_acgbc =append (_acgbc ,_dcgd );};if _gcfdg .Lly < _cbeeb .Lly -_dced {_dagaf =&ruling {_fgae :_cdcc ,_ffedb :_gbbge ,_cegc :_gcfdg .Lly ,_fcdfd :_cbeeb .Llx ,_gecf :_cbeeb .Urx };
_gbdbb =append (rulingList {_dagaf },_gbdbb ...);};if _gcfdg .Ury > _cbeeb .Ury +_dced {_cbadb =&ruling {_fgae :_cdcc ,_ffedb :_gbbge ,_cegc :_gcfdg .Ury ,_fcdfd :_cbeeb .Llx ,_gecf :_cbeeb .Urx };_gbdbb =append (_gbdbb ,_cbadb );};if len (_acgbc )+len (_gbdbb )==len (_cbca ){return _cfaf ,_adf ;
};_ddcc :=append (_acgbc ,_gbdbb ...);_cbca .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_ddcc .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _acgbc ,_gbdbb ;};func _bdcf (_feff ,_fgec _gf .PdfRectangle )bool {return _feff .Llx <=_fgec .Llx &&_fgec .Urx <=_feff .Urx &&_feff .Lly <=_fgec .Lly &&_fgec .Ury <=_feff .Ury ;
};func _febc (_fecgf float64 )int {var _ddgf int ;if _fecgf >=0{_ddgf =int (_fecgf /_gcfb );}else {_ddgf =int (_fecgf /_gcfb )-1;};return _ddgf ;};type pathSection struct{_afcf []*subpath ;_b .Color ;};func (_fag *wordBag )removeWord (_gggbg *textWord ,_debc int ){_gaef :=_fag ._dgbad [_debc ];
_gaef =_edgae (_gaef ,_gggbg );if len (_gaef )==0{delete (_fag ._dgbad ,_debc );}else {_fag ._dgbad [_debc ]=_gaef ;};};func (_gec paraList )toTextMarks ()[]TextMark {_gecc :=0;var _cda []TextMark ;for _efae ,_fead :=range _gec {if _fead ._aged {continue ;
};_cafg :=_fead .toTextMarks (&_gecc );_cda =append (_cda ,_cafg ...);if _efae !=len (_gec )-1{if _deefa (_fead ,_gec [_efae +1]){_cda =_edga (_cda ,&_gecc ,"\u0020");}else {_cda =_edga (_cda ,&_gecc ,"\u000a");_cda =_edga (_cda ,&_gecc ,"\u000a");};};
};_cda =_edga (_cda ,&_gecc ,"\u000a");_cda =_edga (_cda ,&_gecc ,"\u000a");return _cda ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_cca string ;_ab *_gf .PdfPageResources ;_ef _gf .PdfRectangle ;_cb map[string ]fontEntry ;_da map[string ]textResult ;_gd int64 ;_gfa int ;};func (_ccab *subpath )makeRectRuling (_aaeec _b .Color )(*ruling ,bool ){if _cbaa {_gb .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_ccab );
};_fdaf :=_ccab ._cgf [:4];_feffd :=make (map[int ]rulingKind ,len (_fdaf ));for _abfb ,_cgafb :=range _fdaf {_dbfb :=_ccab ._cgf [(_abfb +1)%4];_feffd [_abfb ]=_eaag (_cgafb ,_dbfb );if _cbaa {_dg .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_abfb ,_feffd [_abfb ],_cgafb ,_dbfb );
};};if _cbaa {_dg .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_feffd );};var _egcb ,_baggb []int ;for _acgd ,_gcfd :=range _feffd {switch _gcfd {case _gbbge :_baggb =append (_baggb ,_acgd );case _bcaf :_egcb =append (_egcb ,_acgd );
};};if _cbaa {_dg .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_baggb ),_baggb );_dg .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_egcb ),_egcb );
};_affff :=(len (_baggb )==2&&len (_egcb )==2)||(len (_baggb )==2&&len (_egcb )==0&&_bafe (_fdaf [_baggb [0]],_fdaf [_baggb [1]]))||(len (_egcb )==2&&len (_baggb )==0&&_bcdac (_fdaf [_egcb [0]],_fdaf [_egcb [1]]));if _cbaa {_dg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_baggb ),len (_egcb ),_affff );
};if !_affff {if _cbaa {_gb .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_ccab );_dg .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_baggb ),len (_egcb ),_affff );
};return &ruling {},false ;};if len (_egcb )==0{for _ccacdf ,_ccddg :=range _feffd {if _ccddg !=_gbbge {_egcb =append (_egcb ,_ccacdf );};};};if len (_baggb )==0{for _dbfa ,_cddd :=range _feffd {if _cddd !=_bcaf {_baggb =append (_baggb ,_dbfa );};};};if _cbaa {_gb .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_baggb ),len (_egcb ),len (_fdaf ),_baggb ,_egcb ,_fdaf );
};var _egcbf ,_fdba ,_gbbf ,_gadd _cc .Point ;if _fdaf [_baggb [0]].Y > _fdaf [_baggb [1]].Y {_gbbf ,_gadd =_fdaf [_baggb [0]],_fdaf [_baggb [1]];}else {_gbbf ,_gadd =_fdaf [_baggb [1]],_fdaf [_baggb [0]];};if _fdaf [_egcb [0]].X > _fdaf [_egcb [1]].X {_egcbf ,_fdba =_fdaf [_egcb [0]],_fdaf [_egcb [1]];
}else {_egcbf ,_fdba =_fdaf [_egcb [1]],_fdaf [_egcb [0]];};_gdae :=_gf .PdfRectangle {Llx :_egcbf .X ,Urx :_fdba .X ,Lly :_gadd .Y ,Ury :_gbbf .Y };if _gdae .Llx > _gdae .Urx {_gdae .Llx ,_gdae .Urx =_gdae .Urx ,_gdae .Llx ;};if _gdae .Lly > _gdae .Ury {_gdae .Lly ,_gdae .Ury =_gdae .Ury ,_gdae .Lly ;
};_fecga :=rectRuling {PdfRectangle :_gdae ,_caea :_gecg (_gdae ),Color :_aaeec };if _fecga ._caea ==_ebca {if _cbaa {_gb .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_cdcdd ,_cgfga :=_fecga .asRuling ();if !_cgfga {if _cbaa {_gb .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _gggbb {_dg .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_cdcdd .String ());
};return _cdcdd ,true ;};type rulingKind int ;

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_cf *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_ag :=&imageExtractContext {_gfg :options };_de :=_ag .extractContentStreamImages (_cf ._cca ,_cf ._ab );if _de !=nil {return nil ,_de ;};return &PageImages {Images :_ag ._cde },nil ;
};func (_dd *imageExtractContext )processOperand (_bc *_ff .ContentStreamOperation ,_gdge _ff .GraphicsState ,_ffb *_gf .PdfPageResources )error {if _bc .Operand =="\u0042\u0049"&&len (_bc .Params )==1{_faf ,_gdf :=_bc .Params [0].(*_ff .ContentStreamInlineImage );
if !_gdf {return nil ;};if _cef ,_afd :=_fb .GetBoolVal (_faf .ImageMask );_afd {if _cef &&!_dd ._gfg .IncludeInlineStencilMasks {return nil ;};};return _dd .extractInlineImage (_faf ,_gdge ,_ffb );}else if _bc .Operand =="\u0044\u006f"&&len (_bc .Params )==1{_ffc ,_dfb :=_fb .GetName (_bc .Params [0]);
if !_dfb {_gb .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _fe ;};_ ,_ge :=_ffb .GetXObjectByName (*_ffc );switch _ge {case _gf .XObjectTypeImage :return _dd .extractXObjectImage (_ffc ,_gdge ,_ffb );case _gf .XObjectTypeForm :return _dd .extractFormImages (_ffc ,_gdge ,_ffb );
};};return nil ;};func (_cgadb paraList )xNeighbours (_bgbb float64 )map[*textPara ][]int {_cdgb :=make ([]event ,2*len (_cgadb ));if _bgbb ==0{for _bbagg ,_ggcec :=range _cgadb {_cdgb [2*_bbagg ]=event {_ggcec .Llx ,true ,_bbagg };_cdgb [2*_bbagg +1]=event {_ggcec .Urx ,false ,_bbagg };
};}else {for _ebccd ,_cbga :=range _cgadb {_cdgb [2*_ebccd ]=event {_cbga .Llx -_bgbb *_cbga .fontsize (),true ,_ebccd };_cdgb [2*_ebccd +1]=event {_cbga .Urx +_bgbb *_cbga .fontsize (),false ,_ebccd };};};return _cgadb .eventNeighbours (_cdgb );};func (_dcbcd *textTable )computeBbox ()_gf .PdfRectangle {var _daef _gf .PdfRectangle ;
_gdag :=false ;for _gaec :=0;_gaec < _dcbcd ._debd ;_gaec ++{for _ebfge :=0;_ebfge < _dcbcd ._edbb ;_ebfge ++{_bddd :=_dcbcd .get (_ebfge ,_gaec );if _bddd ==nil {continue ;};if !_gdag {_daef =_bddd .PdfRectangle ;_gdag =true ;}else {_daef =_fgge (_daef ,_bddd .PdfRectangle );
};};};return _daef ;};func _gadg (_fbcfe string )(string ,bool ){_fbce :=[]rune (_fbcfe );if len (_fbce )!=1{return "",false ;};_deccg ,_bgdfe :=_ggffd [_fbce [0]];return _deccg ,_bgdfe ;};

// String returns a human readable description of `ss`.
func (_aac *shapesState )String ()string {return _dg .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_aac ._bgga ),_aac ._fbbc );};type cachedImage struct{_ce *_gf .Image ;
_ee _gf .PdfColorspace ;};func (_cgd *textObject )getCurrentFont ()*_gf .PdfFont {_gfagg :=_cgd ._ffcb ._fac ;if _gfagg ==nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");
return _gf .DefaultFont ();};return _gfagg ;};func (_bage *shapesState )devicePoint (_bfac ,_bccfa float64 )_cc .Point {_bbg :=_bage ._eeab .Mult (_bage ._fdbb );_bfac ,_bccfa =_bbg .Transform (_bfac ,_bccfa );return _cc .NewPoint (_bfac ,_bccfa );};func _ffbg (_gda _gf .PdfRectangle )*ruling {return &ruling {_ffedb :_gbbge ,_cegc :_gda .Ury ,_fcdfd :_gda .Llx ,_gecf :_gda .Urx };
};func (_fegd *shapesState )quadraticTo (_bega ,_dccc ,_bbdd ,_bdec float64 ){if _gbaf {_gb .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_fegd .addPoint (_bbdd ,_bdec );};func (_gfgdc *textTable )log (_abbc string ){if !_dfad {return ;
};_gb .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_abbc ,_gfgdc ._edbb ,_gfgdc ._debd ,_gfgdc ._cgdaa ,_gfgdc .PdfRectangle );
for _bgcba :=0;_bgcba < _gfgdc ._debd ;_bgcba ++{for _cfffd :=0;_cfffd < _gfgdc ._edbb ;_cfffd ++{_abd :=_gfgdc .get (_cfffd ,_bgcba );if _abd ==nil {continue ;};_dg .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_cfffd ,_bgcba ,_abd .PdfRectangle ,_gfcf (_abd .text (),50),_d .RuneCountInString (_abd .text ()));
};};};type compositeCell struct{_gf .PdfRectangle ;paraList ;};func (_egce *textTable )get (_agfb ,_ffcg int )*textPara {return _egce ._bagf [_gbff (_agfb ,_ffcg )]};func (_cbb *Extractor )extractPageText (_gac string ,_bcc *_gf .PdfPageResources ,_bb _cc .Matrix ,_gbd int )(*PageText ,int ,int ,error ){_gb .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_gbd );
_aaea :=&PageText {_efcg :_cbb ._ef };_cgb :=_gbf (_cbb ._ef );var _caa stateStack ;_efb :=_feb (_cbb ,_bcc ,_ff .GraphicsState {},&_cgb ,&_caa );_dca :=shapesState {_eeab :_bb ,_fdbb :_cc .IdentityMatrix (),_ffde :_efb };var _cgg bool ;if _gbd > _ede {_ac :=_af .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");
_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_gbd ,_ac );
return _aaea ,_cgb ._dcca ,_cgb ._dde ,_ac ;};_adba :=_ff .NewContentStreamParser (_gac );_caad ,_caaa :=_adba .Parse ();if _caaa !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_caaa );
return _aaea ,_cgb ._dcca ,_cgb ._dde ,_caaa ;};_dfc :=_ff .NewContentStreamProcessor (*_caad );_dfc .AddHandler (_ff .HandlerConditionEnumAllOperands ,"",func (_gcde *_ff .ContentStreamOperation ,_fd _ff .GraphicsState ,_feg *_gf .PdfPageResources )error {_gceb :=_gcde .Operand ;
if _eage {_gb .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_gcde );};switch _gceb {case "\u0071":if _gbaf {_gb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dca ._fdbb );};_caa .push (&_cgb );case "\u0051":if !_caa .empty (){_cgb =*_caa .pop ();
};_dca ._fdbb =_fd .CTM ;if _gbaf {_gb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dca ._fdbb );};case "\u0042\u0054":if _cgg {_gb .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_aaea ._dfcg =append (_aaea ._dfcg ,_efb ._ddbe ...);};_cgg =true ;_edc :=_fd ;_edc .CTM =_bb .Mult (_edc .CTM );_efb =_feb (_cbb ,_feg ,_edc ,&_cgb ,&_caa );_dca ._ffde =_efb ;case "\u0045\u0054":if !_cgg {_gb .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_cgg =false ;_aaea ._dfcg =append (_aaea ._dfcg ,_efb ._ddbe ...);_efb .reset ();case "\u0054\u002a":_efb .nextLine ();case "\u0054\u0064":if _cff ,_eed :=_efb .checkOp (_gcde ,2,true );!_cff {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eed );
return _eed ;};_gfca ,_ccgc ,_fce :=_abae (_gcde .Params );if _fce !=nil {return _fce ;};_efb .moveText (_gfca ,_ccgc );case "\u0054\u0044":if _gba ,_afdd :=_efb .checkOp (_gcde ,2,true );!_gba {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afdd );
return _afdd ;};_eac ,_fba ,_acd :=_abae (_gcde .Params );if _acd !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acd );return _acd ;};_efb .moveTextSetLeading (_eac ,_fba );case "\u0054\u006a":if _bce ,_eaca :=_efb .checkOp (_gcde ,1,true );
!_bce {_gb .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_gcde ,_eaca );return _eaca ;};_eedb ,_bfb :=_fb .GetStringBytes (_gcde .Params [0]);if !_bfb {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_gcde );
return _fb .ErrTypeError ;};return _efb .showText (_eedb );case "\u0054\u004a":if _dec ,_afgce :=_efb .checkOp (_gcde ,1,true );!_dec {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afgce );return _afgce ;
};_gfd ,_dgc :=_fb .GetArray (_gcde .Params [0]);if !_dgc {_gb .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gcde );
return _caaa ;};return _efb .showTextAdjusted (_gfd );case "\u0027":if _dcf ,_ccgg :=_efb .checkOp (_gcde ,1,true );!_dcf {_gb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ccgg );return _ccgg ;};_ebf ,_efc :=_fb .GetStringBytes (_gcde .Params [0]);
if !_efc {_gb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gcde );return _fb .ErrTypeError ;};_efb .nextLine ();return _efb .showText (_ebf );
case "\u0022":if _ffd ,_ddgd :=_efb .checkOp (_gcde ,3,true );!_ffd {_gb .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ddgd );return _ddgd ;};_gcdg ,_cfe ,_cba :=_abae (_gcde .Params [:2]);if _cba !=nil {return _cba ;
};_fege ,_bbd :=_fb .GetStringBytes (_gcde .Params [2]);if !_bbd {_gb .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_gcde );
return _fb .ErrTypeError ;};_efb .setCharSpacing (_gcdg );_efb .setWordSpacing (_cfe );_efb .nextLine ();return _efb .showText (_fege );case "\u0054\u004c":_fff ,_dfgg :=_gfad (_gcde );if _dfgg !=nil {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfgg );
return _dfgg ;};_efb .setTextLeading (_fff );case "\u0054\u0063":_ggg ,_eag :=_gfad (_gcde );if _eag !=nil {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eag );return _eag ;};_efb .setCharSpacing (_ggg );
case "\u0054\u0066":if _ada ,_cce :=_efb .checkOp (_gcde ,2,true );!_ada {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cce );return _cce ;};_acdg ,_cbcg :=_fb .GetNameVal (_gcde .Params [0]);
if !_cbcg {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_gcde );return _fb .ErrTypeError ;};_bad ,_fegc :=_fb .GetNumberAsFloat (_gcde .Params [1]);
if !_cbcg {_gb .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gcde ,_fegc );
return _fegc ;};_fegc =_efb .setFont (_acdg ,_bad );_efb ._aea =_ae .Is (_fegc ,_fb .ErrNotSupported );if _fegc !=nil &&!_efb ._aea {return _fegc ;};case "\u0054\u006d":if _ddde ,_fgf :=_efb .checkOp (_gcde ,6,true );!_ddde {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgf );
return _fgf ;};_egf ,_dcfd :=_fb .GetNumbersAsFloat (_gcde .Params );if _dcfd !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dcfd );return _dcfd ;};_efb .setTextMatrix (_egf );case "\u0054\u0072":if _gbb ,_afe :=_efb .checkOp (_gcde ,1,true );
!_gbb {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afe );return _afe ;};_efd ,_ddb :=_fb .GetIntVal (_gcde .Params [0]);if !_ddb {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_gcde );
return _fb .ErrTypeError ;};_efb .setTextRenderMode (_efd );case "\u0054\u0073":if _bgg ,_edg :=_efb .checkOp (_gcde ,1,true );!_bgg {_gb .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_edg );return _edg ;
};_fgfa ,_aaa :=_fb .GetNumberAsFloat (_gcde .Params [0]);if _aaa !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aaa );return _aaa ;};_efb .setTextRise (_fgfa );case "\u0054\u0077":if _badd ,_bfg :=_efb .checkOp (_gcde ,1,true );
!_badd {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bfg );return _bfg ;};_fdg ,_gga :=_fb .GetNumberAsFloat (_gcde .Params [0]);if _gga !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gga );
return _gga ;};_efb .setWordSpacing (_fdg );case "\u0054\u007a":if _dee ,_ace :=_efb .checkOp (_gcde ,1,true );!_dee {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ace );return _ace ;};_ffdb ,_cbe :=_fb .GetNumberAsFloat (_gcde .Params [0]);
if _cbe !=nil {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbe );return _cbe ;};_efb .setHorizScaling (_ffdb );case "\u0063\u006d":_dca ._fdbb =_fd .CTM ;if _dca ._fdbb .Singular (){_gcc :=_cc .IdentityMatrix ().Translate (_dca ._fdbb .Translation ());
_gb .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_dca ._fdbb ,_gcc );_dca ._fdbb =_gcc ;};if _gbaf {_gb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dca ._fdbb );};case "\u006d":if len (_gcde .Params )!=2{_gb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_eg );
return nil ;};_fbac ,_cfa :=_fb .GetNumbersAsFloat (_gcde .Params );if _cfa !=nil {return _cfa ;};_dca .moveTo (_fbac [0],_fbac [1]);case "\u006c":if len (_gcde .Params )!=2{_gb .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_eg );
return nil ;};_gee ,_dfgf :=_fb .GetNumbersAsFloat (_gcde .Params );if _dfgf !=nil {return _dfgf ;};_dca .lineTo (_gee [0],_gee [1]);case "\u0063":if len (_gcde .Params )!=6{return _eg ;};_gge ,_cbbb :=_fb .GetNumbersAsFloat (_gcde .Params );if _cbbb !=nil {return _cbbb ;
};_gb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_gge );_dca .cubicTo (_gge [0],_gge [1],_gge [2],_gge [3],_gge [4],_gge [5]);case "\u0076","\u0079":if len (_gcde .Params )!=4{return _eg ;
};_bfe ,_gccd :=_fb .GetNumbersAsFloat (_gcde .Params );if _gccd !=nil {return _gccd ;};_gb .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_bfe );_dca .quadraticTo (_bfe [0],_bfe [1],_bfe [2],_bfe [3]);
case "\u0068":_dca .closePath ();case "\u0072\u0065":if len (_gcde .Params )!=4{return _eg ;};_dadb ,_fgg :=_fb .GetNumbersAsFloat (_gcde .Params );if _fgg !=nil {return _fgg ;};_dca .drawRectangle (_dadb [0],_dadb [1],_dadb [2],_dadb [3]);_dca .closePath ();
case "\u0053":_dca .stroke (&_aaea ._fbg );_dca .clearPath ();case "\u0073":_dca .closePath ();_dca .stroke (&_aaea ._fbg );_dca .clearPath ();case "\u0046":_dca .fill (&_aaea ._cfcc );_dca .clearPath ();case "\u0066","\u0066\u002a":_dca .closePath ();
_dca .fill (&_aaea ._cfcc );_dca .clearPath ();case "\u0042","\u0042\u002a":_dca .fill (&_aaea ._cfcc );_dca .stroke (&_aaea ._fbg );_dca .clearPath ();case "\u0062","\u0062\u002a":_dca .closePath ();_dca .fill (&_aaea ._cfcc );_dca .stroke (&_aaea ._fbg );
_dca .clearPath ();case "\u006e":_dca .clearPath ();case "\u0044\u006f":if len (_gcde .Params )==0{_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_gcde .Params );
return _fb .ErrRangeError ;};_efdd ,_gfgdb :=_fb .GetName (_gcde .Params [0]);if !_gfgdb {_gb .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_gcde .Params [0]);
return _fb .ErrTypeError ;};_ ,_fgbc :=_feg .GetXObjectByName (*_efdd );if _fgbc !=_gf .XObjectTypeForm {break ;};_dabd ,_gfgdb :=_cbb ._da [_efdd .String ()];if !_gfgdb {_agdc ,_bbdf :=_feg .GetXObjectFormByName (*_efdd );if _bbdf !=nil {_gb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bbdf );
return _bbdf ;};_edcc ,_bbdf :=_agdc .GetContentStream ();if _bbdf !=nil {_gb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bbdf );return _bbdf ;};_gab :=_agdc .Resources ;if _gab ==nil {_gab =_feg ;};_afc ,_fecg ,_afed ,_bbdf :=_cbb .extractPageText (string (_edcc ),_gab ,_bb .Mult (_fd .CTM ),_gbd +1);
if _bbdf !=nil {_gb .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bbdf );return _bbdf ;};_dabd =textResult {*_afc ,_fecg ,_afed };_cbb ._da [_efdd .String ()]=_dabd ;};_dca ._fdbb =_fd .CTM ;if _gbaf {_gb .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_dca ._fdbb );
};_aaea ._dfcg =append (_aaea ._dfcg ,_dabd ._dcc ._dfcg ...);_aaea ._fbg =append (_aaea ._fbg ,_dabd ._dcc ._fbg ...);_aaea ._cfcc =append (_aaea ._cfcc ,_dabd ._dcc ._cfcc ...);_cgb ._dcca +=_dabd ._abe ;_cgb ._dde +=_dabd ._cfdc ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_efb ._bca .ColorspaceNonStroking =_fd .ColorspaceNonStroking ;
_efb ._bca .ColorNonStroking =_fd .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_efb ._bca .ColorspaceStroking =_fd .ColorspaceStroking ;_efb ._bca .ColorStroking =_fd .ColorStroking ;};return nil ;
});_caaa =_dfc .Process (_bcc );return _aaea ,_cgb ._dcca ,_cgb ._dde ,_caaa ;};func (_caeb *wordBag )empty (_caf int )bool {_ ,_cbg :=_caeb ._dgbad [_caf ];return !_cbg };func _aggc (_feadf int ,_bebf map[int ][]float64 )([]int ,int ){_ggab :=make ([]int ,_feadf );
_bacb :=0;for _eedga :=0;_eedga < _feadf ;_eedga ++{_ggab [_eedga ]=_bacb ;_bacb +=len (_bebf [_eedga ])+1;};return _ggab ,_bacb ;};func (_ffdaf gridTile )numBorders ()int {_fgacf :=0;if _ffdaf ._gbadg {_fgacf ++;};if _ffdaf ._dfeb {_fgacf ++;};if _ffdaf ._gdeaa {_fgacf ++;
};if _ffdaf ._faab {_fgacf ++;};return _fgacf ;};type ruling struct{_ffedb rulingKind ;_fgae markKind ;_b .Color ;_cegc float64 ;_fcdfd float64 ;_gecf float64 ;_fcdad float64 ;};func (_dcffg rectRuling )checkWidth (_bgcee ,_ggdc float64 )(float64 ,bool ){_bcfc :=_ggdc -_bgcee ;
_agfg :=_bcfc <=_adgc ;return _bcfc ,_agfg ;};func (_fafb *shapesState )lastpointEstablished ()(_cc .Point ,bool ){if _fafb ._fbbc {return _fafb ._fdc ,false ;};_ded :=len (_fafb ._bgga );if _ded > 0&&_fafb ._bgga [_ded -1]._bcee {return _fafb ._bgga [_ded -1].last (),false ;
};return _cc .Point {},true ;};func (_fbbga *wordBag )sort (){for _ ,_gaa :=range _fbbga ._dgbad {_afa .Slice (_gaa ,func (_agaeb ,_cebd int )bool {return _gbfa (_gaa [_agaeb ],_gaa [_cebd ])< 0});};};func (_gcded rulingList )asTiling ()gridTiling {if _ggbf {_gb .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_gcded ));
};for _ffff ,_dfdcc :=range _gcded [1:]{_gdgc :=_gcded [_ffff ];if _gdgc .alignsPrimary (_dfdcc )&&_gdgc .alignsSec (_dfdcc ){_gb .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_dfdcc ,_gdgc );
};};_gcded .sortStrict ();_gcded .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_caee ,_aefbd :=_gcded .vertsHorzs ();_ddgc :=_caee .primaries ();_ebfb :=_aefbd .primaries ();_dcead :=len (_ddgc )-1;_caebf :=len (_ebfb )-1;if _dcead ==0||_caebf ==0{return gridTiling {};
};_acfa :=_gf .PdfRectangle {Llx :_ddgc [0],Urx :_ddgc [_dcead ],Lly :_ebfb [0],Ury :_ebfb [_caebf ]};if _ggbf {_gb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_caee ));
for _aaac ,_adeb :=range _caee {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aaac ,_adeb );};_gb .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_aefbd ));
for _fbcc ,_baff :=range _aefbd {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbcc ,_baff );};_gb .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_dcead ,_caebf ,_ddgc ,_ebfb );
};_ddgdcf :=make ([]gridTile ,_dcead *_caebf );for _cafc :=_caebf -1;_cafc >=0;_cafc --{_bfdg :=_ebfb [_cafc ];_egae :=_ebfb [_cafc +1];for _adff :=0;_adff < _dcead ;_adff ++{_fffd :=_ddgc [_adff ];_cefd :=_ddgc [_adff +1];_gfbf :=_caee .findPrimSec (_fffd ,_bfdg );
_fadg :=_caee .findPrimSec (_cefd ,_bfdg );_cebfd :=_aefbd .findPrimSec (_bfdg ,_fffd );_cbceb :=_aefbd .findPrimSec (_egae ,_fffd );_eaea :=_gf .PdfRectangle {Llx :_fffd ,Urx :_cefd ,Lly :_bfdg ,Ury :_egae };_gaga :=_fbfbd (_eaea ,_gfbf ,_fadg ,_cebfd ,_cbceb );
_ddgdcf [_cafc *_dcead +_adff ]=_gaga ;if _ggbf {_dg .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_adff ,_cafc ,_gaga .String (),_gaga .Width (),_gaga .Height ());
};};};if _ggbf {_gb .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_acfa );
};_addg :=make ([]map[float64 ]gridTile ,_caebf );for _aaff :=_caebf -1;_aaff >=0;_aaff --{if _ggbf {_dg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_aaff );};_addg [_aaff ]=make (map[float64 ]gridTile ,_dcead );for _cefe :=0;_cefe < _dcead ;
_cefe ++{_adbg :=_ddgdcf [_aaff *_dcead +_cefe ];if _ggbf {_dg .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cefe ,_adbg );};if !_adbg ._gbadg {continue ;};_gdda :=_cefe ;for _dbdcd :=_cefe +1;!_adbg ._dfeb &&_dbdcd < _dcead ;
_dbdcd ++{_aaad :=_ddgdcf [_aaff *_dcead +_dbdcd ];_adbg .Urx =_aaad .Urx ;_adbg ._faab =_adbg ._faab ||_aaad ._faab ;_adbg ._gdeaa =_adbg ._gdeaa ||_aaad ._gdeaa ;_adbg ._dfeb =_aaad ._dfeb ;if _ggbf {_dg .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_dbdcd ,_aaad ,_adbg );
};_gdda =_dbdcd ;};if _ggbf {_dg .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_cefe ,_gdda ,_adbg );};_cefe =_gdda ;_addg [_aaff ][_adbg .Llx ]=_adbg ;};};_abed :=make (map[float64 ]map[float64 ]gridTile ,_caebf );
_ccbg :=make (map[float64 ]map[float64 ]struct{},_caebf );for _bfdef :=_caebf -1;_bfdef >=0;_bfdef --{_ggef :=_ddgdcf [_bfdef *_dcead ].Lly ;_abed [_ggef ]=make (map[float64 ]gridTile ,_dcead );_ccbg [_ggef ]=make (map[float64 ]struct{},_dcead );};if _ggbf {_gb .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_acfa );
};for _ageb :=_caebf -1;_ageb >=0;_ageb --{_ffdfg :=_ddgdcf [_ageb *_dcead ].Lly ;_ebac :=_addg [_ageb ];if _ggbf {_dg .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_ageb );};for _ ,_cdgd :=range _fdeg (_ebac ){if _ ,_ebda :=_ccbg [_ffdfg ][_cdgd ];
_ebda {continue ;};_dbea :=_ebac [_cdgd ];if _ggbf {_dg .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_dbea .String ());};for _ccdda :=_ageb -1;_ccdda >=0;_ccdda --{if _dbea ._gdeaa {break ;};_bfag :=_addg [_ccdda ];_fgdg ,_dgec :=_bfag [_cdgd ];
if !_dgec {break ;};if _fgdg .Urx !=_dbea .Urx {break ;};_dbea ._gdeaa =_fgdg ._gdeaa ;_dbea .Lly =_fgdg .Lly ;if _ggbf {_dg .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fgdg .String (),_dbea .String ());
};_ccbg [_fgdg .Lly ][_fgdg .Llx ]=struct{}{};};if _ageb ==0{_dbea ._gdeaa =true ;};if _dbea .complete (){_abed [_ffdfg ][_cdgd ]=_dbea ;};};};_bceea :=gridTiling {PdfRectangle :_acfa ,_ggdf :_egec (_abed ),_ebff :_debf (_abed ),_cebgg :_abed };_bceea .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _bceea ;};func (_fbbab rulingList )snapToGroups ()rulingList {_gebf ,_fccfd :=_fbbab .vertsHorzs ();if len (_gebf )> 0{_gebf =_gebf .snapToGroupsDirection ();};if len (_fccfd )> 0{_fccfd =_fccfd .snapToGroupsDirection ();};_acac :=append (_gebf ,_fccfd ...);
_acac .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _acac ;};func (_afae *textObject )setTextLeading (_bda float64 ){if _afae ==nil {return ;};_afae ._ffcb ._egc =_bda ;};func (_fcdf *wordBag )minDepth ()float64 {return _fcdf ._fbaf -(_fcdf .Ury -_fcdf ._aed )};
func _cgbc (_dcfbb _gf .PdfRectangle ,_aefgc []*textLine )*textPara {return &textPara {PdfRectangle :_dcfbb ,_effa :_aefgc };};func (_ecbg paraList )writeText (_cgad _e .Writer ){for _bade ,_gccg :=range _ecbg {if _gccg ._aged {continue ;};_gccg .writeText (_cgad );
if _bade !=len (_ecbg )-1{if _deefa (_gccg ,_ecbg [_bade +1]){_cgad .Write ([]byte ("\u0020"));}else {_cgad .Write ([]byte ("\u000a"));_cgad .Write ([]byte ("\u000a"));};};};_cgad .Write ([]byte ("\u000a"));_cgad .Write ([]byte ("\u000a"));};func (_aaeeae *ruling )gridIntersecting (_fcffa *ruling )bool {return _ccge (_aaeeae ._fcdfd ,_fcffa ._fcdfd )&&_ccge (_aaeeae ._gecf ,_fcffa ._gecf );
};func (_fffe *textTable )isExportable ()bool {if _fffe ._cgdaa {return true ;};_eaggb :=func (_cefag int )bool {_efcac :=_fffe .get (0,_cefag );if _efcac ==nil {return false ;};_fgca :=_efcac .text ();_eadgg :=_d .RuneCountInString (_fgca );_gffbf :=_ffga .MatchString (_fgca );
return _eadgg <=1||_gffbf ;};for _debfa :=0;_debfa < _fffe ._debd ;_debfa ++{if !_eaggb (_debfa ){return true ;};};return false ;};func (_dcab *textLine )text ()string {var _defd []string ;for _ ,_egcc :=range _dcab ._dbcg {if _egcc ._bdcc {_defd =append (_defd ,"\u0020");
};_defd =append (_defd ,_egcc ._bbgf );};return _g .Join (_defd ,"");};

// String returns a string descibing `i`.
func (_bgcd gridTile )String ()string {_dgfaa :=func (_bebg bool ,_bacf string )string {if _bebg {return _bacf ;};return "\u005f";};return _dg .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_bgcd .PdfRectangle ,_dgfaa (_bgcd ._gbadg ,"\u004c"),_dgfaa (_bgcd ._dfeb ,"\u0052"),_dgfaa (_bgcd ._gdeaa ,"\u0042"),_dgfaa (_bgcd ._faab ,"\u0054"));
};func (_dae *textMark )bbox ()_gf .PdfRectangle {return _dae .PdfRectangle };func _cebge (_gcbg *wordBag ,_edab int )*textLine {_baeb :=_gcbg .firstWord (_edab );_cge :=textLine {PdfRectangle :_baeb .PdfRectangle ,_babd :_baeb ._abcda ,_fcfag :_baeb ._ffbae };
_cge .pullWord (_gcbg ,_baeb ,_edab );return &_cge ;};func _bbde (_fcg _cc .Point )*subpath {return &subpath {_cgf :[]_cc .Point {_fcg }}};func (_gfdff rulingList )splitSec ()[]rulingList {_afa .Slice (_gfdff ,func (_gfeb ,_afdee int )bool {_gafb ,_fcgf :=_gfdff [_gfeb ],_gfdff [_afdee ];
if _gafb ._fcdfd !=_fcgf ._fcdfd {return _gafb ._fcdfd < _fcgf ._fcdfd ;};return _gafb ._gecf < _fcgf ._gecf ;});_efgdc :=make (map[*ruling ]struct{},len (_gfdff ));_bfdgf :=func (_badfb *ruling )rulingList {_cggab :=rulingList {_badfb };_efgdc [_badfb ]=struct{}{};
for _ ,_cfaee :=range _gfdff {if _ ,_aaed :=_efgdc [_cfaee ];_aaed {continue ;};for _ ,_fccfg :=range _cggab {if _cfaee .alignsSec (_fccfg ){_cggab =append (_cggab ,_cfaee );_efgdc [_cfaee ]=struct{}{};break ;};};};return _cggab ;};_fccce :=[]rulingList {_bfdgf (_gfdff [0])};
for _ ,_beed :=range _gfdff [1:]{if _ ,_cbde :=_efgdc [_beed ];_cbde {continue ;};_fccce =append (_fccce ,_bfdgf (_beed ));};return _fccce ;};func _efda (_dgbbb ,_fggf _cc .Point )rulingKind {_ddcbg :=_f .Abs (_dgbbb .X -_fggf .X );_eecc :=_f .Abs (_dgbbb .Y -_fggf .Y );
return _efcd (_ddcbg ,_eecc ,_fede );};func (_bfeb *textTable )compositeColCorridors ()map[int ][]float64 {_agebb :=make (map[int ][]float64 ,_bfeb ._edbb );if _dfad {_gb .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_bfeb ._edbb );
};for _gbcb :=0;_gbcb < _bfeb ._edbb ;_gbcb ++{_agebb [_gbcb ]=nil ;};return _agebb ;};func (_eacf *textTable )newTablePara ()*textPara {_dcaf :=_eacf .computeBbox ();_gggff :=&textPara {PdfRectangle :_dcaf ,_bbbf :_dcaf ,_dgbc :_eacf };if _dfad {_gb .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_gggff );
};return _gggff ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_aaf *TextMarkArray )BBox ()(_gf .PdfRectangle ,bool ){var _cea _gf .PdfRectangle ;_gffg :=false ;for _ ,_afea :=range _aaf ._deff {if _afea .Meta ||_dgcdfc (_afea .Text ){continue ;};if _gffg {_cea =_fgge (_cea ,_afea .BBox );}else {_cea =_afea .BBox ;
_gffg =true ;};};return _cea ,_gffg ;};func _cbd (_acfd string )string {_dddb :=[]rune (_acfd );return string (_dddb [:len (_dddb )-1])};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_fgd *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_eaa ,_gfag ,_fef ,_dadce :=_fgd .extractPageText (_fgd ._cca ,_fgd ._ab ,_cc .IdentityMatrix (),0);if _dadce !=nil {return nil ,0,0,_dadce ;};_eaa .computeViews ();_dadce =_dbbg (_eaa );
if _dadce !=nil {return nil ,0,0,_dadce ;};return _eaa ,_gfag ,_fef ,nil ;};

// ToTextMark returns the public view of `tm`.
func (_dfdcf *textMark )ToTextMark ()TextMark {return TextMark {Text :_dfdcf ._facd ,Original :_dfdcf ._eccgf ,BBox :_dfdcf ._bcgc ,Font :_dfdcf ._cec ,FontSize :_dfdcf ._egca ,FillColor :_dfdcf ._aeeb ,StrokeColor :_dfdcf ._cgbde ,Orientation :_dfdcf ._efadg };
};func (_ggbe paraList )merge ()*textPara {_gb .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_ggbe ));
if len (_ggbe )==0{return nil ;};_ggbe .sortReadingOrder ();_ffce :=_ggbe [0].PdfRectangle ;_cefb :=_ggbe [0]._effa ;for _ ,_dfdad :=range _ggbe [1:]{_ffce =_fgge (_ffce ,_dfdad .PdfRectangle );_cefb =append (_cefb ,_dfdad ._effa ...);};return _cgbc (_ffce ,_cefb );
};type markKind int ;func (_dffda paraList )log (_bcba string ){if !_ccfcc {return ;};_gb .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bcba ,len (_dffda ));
for _dcgb ,_ecbab :=range _dffda {if _ecbab ==nil {continue ;};_fdcb :=_ecbab .text ();_gedg :="\u0020\u0020";if _ecbab ._dgbc !=nil {_gedg =_dg .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_ecbab ._dgbc ._edbb ,_ecbab ._dgbc ._debd );};_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_dcgb ,_ecbab .PdfRectangle ,_gedg ,_gfcf (_fdcb ,50));
};};func (_bfde *textPara )text ()string {_bgbda :=new (_ba .Buffer );_bfde .writeText (_bgbda );return _bgbda .String ();};func (_gfgd *imageExtractContext )extractFormImages (_bg *_fb .PdfObjectName ,_afgc _ff .GraphicsState ,_cbf *_gf .PdfPageResources )error {_adb ,_gca :=_cbf .GetXObjectFormByName (*_bg );
if _gca !=nil {return _gca ;};if _adb ==nil {return nil ;};_daf ,_gca :=_adb .GetContentStream ();if _gca !=nil {return _gca ;};_eb :=_adb .Resources ;if _eb ==nil {_eb =_cbf ;};_gca =_gfgd .extractContentStreamImages (string (_daf ),_eb );if _gca !=nil {return _gca ;
};_gfgd ._gcg ++;return nil ;};func (_eeeg *textTable )subdivide ()*textTable {_eeeg .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_ffbgc :=_eeeg .compositeRowCorridors ();_fbdbf :=_eeeg .compositeColCorridors ();if _dfad {_gb .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_eebc (_ffbgc ),_eebc (_fbdbf ));
};if len (_ffbgc )==0||len (_fbdbf )==0{return _eeeg ;};_cfacc (_ffbgc );_cfacc (_fbdbf );if _dfad {_gb .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_eebc (_ffbgc ),_eebc (_fbdbf ));
};_edcdbe ,_efec :=_aggc (_eeeg ._debd ,_ffbgc );_adfe ,_ddef :=_aggc (_eeeg ._edbb ,_fbdbf );_gedea :=make (map[uint64 ]*textPara ,_ddef *_efec );_fgbfa :=&textTable {PdfRectangle :_eeeg .PdfRectangle ,_cgdaa :_eeeg ._cgdaa ,_debd :_efec ,_edbb :_ddef ,_bagf :_gedea };
if _dfad {_gb .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_eeeg ._edbb ,_eeeg ._debd ,_ddef ,_efec ,_eebc (_ffbgc ),_eebc (_fbdbf ),_edcdbe ,_adfe );
};for _cgddf :=0;_cgddf < _eeeg ._debd ;_cgddf ++{_ccfcb :=_edcdbe [_cgddf ];for _efea :=0;_efea < _eeeg ._edbb ;_efea ++{_gddd :=_adfe [_efea ];if _dfad {_dg .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_efea ,_cgddf ,_gddd ,_ccfcb );
};_ceec ,_fffb :=_eeeg ._cadb [_gbff (_efea ,_cgddf )];if !_fffb {continue ;};_fdfb :=_ceec .split (_ffbgc [_cgddf ],_fbdbf [_efea ]);for _gdde :=0;_gdde < _fdfb ._debd ;_gdde ++{for _egecd :=0;_egecd < _fdfb ._edbb ;_egecd ++{_bddg :=_fdfb .get (_egecd ,_gdde );
_fgbfa .put (_gddd +_egecd ,_ccfcb +_gdde ,_bddg );if _dfad {_dg .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gddd +_egecd ,_ccfcb +_gdde ,_bddg );};};};};};return _fgbfa ;};func (_dbe *textObject )nextLine (){_dbe .moveLP (0,-_dbe ._ffcb ._egc )};


// String returns a description of `k`.
func (_caabf markKind )String ()string {_cefa ,_gcfc :=_gabf [_caabf ];if !_gcfc {return _dg .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_caabf );};return _cefa ;};func (_fbdb rulingList )primMinMax ()(float64 ,float64 ){_dadg ,_afdg :=_fbdb [0]._cegc ,_fbdb [0]._cegc ;
for _ ,_ccde :=range _fbdb [1:]{if _ccde ._cegc < _dadg {_dadg =_ccde ._cegc ;}else if _ccde ._cegc > _afdg {_afdg =_ccde ._cegc ;};};return _dadg ,_afdg ;};func _gfcf (_gfffb string ,_ceed int )string {if len (_gfffb )< _ceed {return _gfffb ;};return _gfffb [:_ceed ];
};func (_fgbg *ruling )encloses (_aagfcc ,_cggeb float64 )bool {return _fgbg ._fcdfd -_dced <=_aagfcc &&_cggeb <=_fgbg ._gecf +_dced ;};func _dacc (_ccegb []pathSection ){if _ffeee < 0.0{return ;};if _gggbb {_gb .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_ccegb ));
};for _efefa ,_aggfb :=range _ccegb {for _gbafd ,_ccgde :=range _aggfb ._afcf {for _bccgg ,_ggbaa :=range _ccgde ._cgf {_ccgde ._cgf [_bccgg ]=_cc .Point {X :_cdac (_ggbaa .X ),Y :_cdac (_ggbaa .Y )};if _gggbb {_dbac :=_ccgde ._cgf [_bccgg ];if !_fadad (_ggbaa ,_dbac ){_becg :=_cc .Point {X :_dbac .X -_ggbaa .X ,Y :_dbac .Y -_ggbaa .Y };
_dg .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_efefa ,_gbafd ,_bccgg ,_ggbaa ,_dbac ,_becg );};};};};};};

// String returns a string describing `pt`.
func (_bab PageText )String ()string {_gbe :=_dg .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_bab ._dfcg ));_bdab :=[]string {"\u002d"+_gbe };for _ ,_cebe :=range _bab ._dfcg {_bdab =append (_bdab ,_cebe .String ());
};_bdab =append (_bdab ,"\u002b"+_gbe );return _g .Join (_bdab ,"\u000a");};const _badg =10;func (_dfef *textTable )growTable (){_fagad :=func (_bbfb paraList ){_dfef ._debd ++;for _aaegg :=0;_aaegg < _dfef ._edbb ;_aaegg ++{_cacfa :=_bbfb [_aaegg ];_dfef .put (_aaegg ,_dfef ._debd -1,_cacfa );
};};_cefdg :=func (_dgbg paraList ){_dfef ._edbb ++;for _dbab :=0;_dbab < _dfef ._debd ;_dbab ++{_abcd :=_dgbg [_dbab ];_dfef .put (_dfef ._edbb -1,_dbab ,_abcd );};};if _egcda {_dfef .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bgea :=0;
;_bgea ++{_dgebd :=false ;_cfafa :=_dfef .getDown ();_aecfd :=_dfef .getRight ();if _egcda {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bgea ,_dfef );_dg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_cfafa );
_dg .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_aecfd );};if _cfafa !=nil &&_aecfd !=nil {_ecbaf :=_cfafa [len (_cfafa )-1];if _ecbaf !=nil &&!_ecbaf ._eacag &&_ecbaf ==_aecfd [len (_aecfd )-1]{_fagad (_cfafa );
if _aecfd =_dfef .getRight ();_aecfd !=nil {_cefdg (_aecfd );_dfef .put (_dfef ._edbb -1,_dfef ._debd -1,_ecbaf );};_dgebd =true ;};};if !_dgebd &&_cfafa !=nil {_fagad (_cfafa );_dgebd =true ;};if !_dgebd &&_aecfd !=nil {_cefdg (_aecfd );_dgebd =true ;
};if !_dgebd {break ;};};};type textPara struct{_gf .PdfRectangle ;_bbbf _gf .PdfRectangle ;_effa []*textLine ;_dgbc *textTable ;_eacag bool ;_aged bool ;_adge *textPara ;_fgfb *textPara ;_dabcd *textPara ;_ebgb *textPara ;};func (_ggc *shapesState )stroke (_efdg *[]pathSection ){_eab :=pathSection {_afcf :_ggc ._bgga ,Color :_ggc ._ffde .getStrokeColor ()};
*_efdg =append (*_efdg ,_eab );if _gggbb {_dg .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_efdg ),_ggc ,_ggc ._ffde .getStrokeColor (),_eab .bbox ());
if _ebbf {for _aaec ,_bggg :=range _ggc ._bgga {_dg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aaec ,_bggg );if _aaec ==10{break ;};};};};};func _dabfa (_acbe map[int ]intSet )[]int {_gefa :=make ([]int ,0,len (_acbe ));for _cbgg :=range _acbe {_gefa =append (_gefa ,_cbgg );
};_afa .Ints (_gefa );return _gefa ;};func (_fbdc *wordBag )getDepthIdx (_agdg float64 )int {_ebc :=_fbdc .depthIndexes ();_aee :=_febc (_agdg );if _aee < _ebc [0]{return _ebc [0];};if _aee > _ebc [len (_ebc )-1]{return _ebc [len (_ebc )-1];};return _aee ;
};type textState struct{_bgd float64 ;_bccc float64 ;_dabf float64 ;_egc float64 ;_fbe float64 ;_eaae RenderMode ;_aabf float64 ;_fac *_gf .PdfFont ;_cae _gf .PdfRectangle ;_dcca int ;_dde int ;};func (_dbgf *textPara )toTextMarks (_afb *int )[]TextMark {if _dbgf ._dgbc ==nil {return _dbgf .toCellTextMarks (_afb );
};var _dfada []TextMark ;for _gdgee :=0;_gdgee < _dbgf ._dgbc ._debd ;_gdgee ++{for _ebbg :=0;_ebbg < _dbgf ._dgbc ._edbb ;_ebbg ++{_dged :=_dbgf ._dgbc .get (_ebbg ,_gdgee );if _dged ==nil {_dfada =_edga (_dfada ,_afb ,"\u0009");}else {_eee :=_dged .toCellTextMarks (_afb );
_dfada =append (_dfada ,_eee ...);};_dfada =_edga (_dfada ,_afb ,"\u0020");};if _gdgee < _dbgf ._dgbc ._debd -1{_dfada =_edga (_dfada ,_afb ,"\u000a");};};return _dfada ;};func (_eafe *textObject )getStrokeColor ()_b .Color {return _caca (_eafe ._bca .ColorspaceStroking ,_eafe ._bca .ColorStroking );
};func _debf (_fffg map[float64 ]map[float64 ]gridTile )[]float64 {_ebee :=make ([]float64 ,0,len (_fffg ));for _eacagd :=range _fffg {_ebee =append (_ebee ,_eacagd );};_afa .Float64s (_ebee );_bgdd :=len (_ebee );for _aecb :=0;_aecb < _bgdd /2;_aecb ++{_ebee [_aecb ],_ebee [_bgdd -1-_aecb ]=_ebee [_bgdd -1-_aecb ],_ebee [_aecb ];
};return _ebee ;};func (_badc *stateStack )top ()*textState {if _badc .empty (){return nil ;};return (*_badc )[_badc .size ()-1];};func (_gaff gridTiling )complete ()bool {for _ ,_fedc :=range _gaff ._cebgg {for _ ,_bcce :=range _fedc {if !_bcce .complete (){return false ;
};};};return true ;};func (_ccbgf *textWord )addDiacritic (_gebg string ){_ccca :=_ccbgf ._ebbfbc [len (_ccbgf ._ebbfbc )-1];_ccca ._facd +=_gebg ;_ccca ._facd =_fc .NFKC .String (_ccca ._facd );};type rulingList []*ruling ;const (_ebca rulingKind =iota ;
_gbbge ;_bcaf ;);func (_ega paraList )llyOrdering ()[]int {_aca :=make ([]int ,len (_ega ));for _bdfc :=range _ega {_aca [_bdfc ]=_bdfc ;};_afa .SliceStable (_aca ,func (_fgda ,_gbeb int )bool {_ebbd ,_dbbb :=_aca [_fgda ],_aca [_gbeb ];return _ega [_ebbd ].Lly < _ega [_dbbb ].Lly ;
});return _aca ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ï¬ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_edae *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _edae ==nil {return nil ,_af .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_dg .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_ebge :=len (_edae ._deff );if _ebge ==0{return _edae ,nil ;};if start < _edae ._deff [0].Offset {start =_edae ._deff [0].Offset ;};if end > _edae ._deff [_ebge -1].Offset +1{end =_edae ._deff [_ebge -1].Offset +1;};_beg :=_afa .Search (_ebge ,func (_egdf int )bool {return _edae ._deff [_egdf ].Offset +len (_edae ._deff [_egdf ].Text )-1>=start });
if !(0<=_beg &&_beg < _ebge ){_fabf :=_dg .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_beg ,_ebge ,_edae ._deff [0],_edae ._deff [_ebge -1]);
return nil ,_fabf ;};_gae :=_afa .Search (_ebge ,func (_bdg int )bool {return _edae ._deff [_bdg ].Offset > end -1});if !(0<=_gae &&_gae < _ebge ){_facg :=_dg .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_gae ,_ebge ,_edae ._deff [0],_edae ._deff [_ebge -1]);
return nil ,_facg ;};if _gae <=_beg {return nil ,_dg .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_beg ,_gae );
};return &TextMarkArray {_deff :_edae ._deff [_beg :_gae ]},nil ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _gf .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_gf .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _b .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _b .Color ;

// Orientation is the text orientation
Orientation int ;};func (_bgcc *textLine )toTextMarks (_eef *int )[]TextMark {var _afebb []TextMark ;for _ ,_gdea :=range _bgcc ._dbcg {if _gdea ._bdcc {_afebb =_edga (_afebb ,_eef ,"\u0020");};_bgdg :=_gdea .toTextMarks (_eef );_afebb =append (_afebb ,_bgdg ...);
};return _afebb ;};func (_bacfc *ruling )alignsSec (_gdgcb *ruling )bool {const _cag =_adgc +1.0;return _bacfc ._fcdfd -_cag <=_gdgcb ._gecf &&_gdgcb ._fcdfd -_cag <=_bacfc ._gecf ;};func _ggedg (_aabg _gf .PdfRectangle )*ruling {return &ruling {_ffedb :_bcaf ,_cegc :_aabg .Llx ,_fcdfd :_aabg .Lly ,_gecf :_aabg .Ury };
};func (_cegcb rulingList )merge ()*ruling {_beabd :=_cegcb [0]._cegc ;_fdafe :=_cegcb [0]._fcdfd ;_dgea :=_cegcb [0]._gecf ;for _ ,_abfa :=range _cegcb [1:]{_beabd +=_abfa ._cegc ;if _abfa ._fcdfd < _fdafe {_fdafe =_abfa ._fcdfd ;};if _abfa ._gecf > _dgea {_dgea =_abfa ._gecf ;
};};_begd :=&ruling {_ffedb :_cegcb [0]._ffedb ,_fgae :_cegcb [0]._fgae ,Color :_cegcb [0].Color ,_cegc :_beabd /float64 (len (_cegcb )),_fcdfd :_fdafe ,_gecf :_dgea };if _gadc {_gb .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_cegcb ),_begd );
for _ddfec ,_egge :=range _cegcb {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddfec ,_egge );};};return _begd ;};func (_eedf *wordBag )arrangeText ()*textPara {_eedf .sort ();if _aage {_eedf .removeDuplicates ();};var _bfab []*textLine ;
for _ ,_gabg :=range _eedf .depthIndexes (){for !_eedf .empty (_gabg ){_gfdgb :=_eedf .firstReadingIndex (_gabg );_degd :=_eedf .firstWord (_gfdgb );_eabc :=_cebge (_eedf ,_gfdgb );_ebbe :=_degd ._abcda ;_abcb :=_degd ._ffbae -_edaa *_ebbe ;_cbadg :=_degd ._ffbae +_edaa *_ebbe ;
_fgga :=_gcfa *_ebbe ;_cgbg :=_cdcd *_ebbe ;_egdb :for {var _bdede *textWord ;_ege :=0;for _ ,_fafa :=range _eedf .depthBand (_abcb ,_cbadg ){_fagc :=_eedf .highestWord (_fafa ,_abcb ,_cbadg );if _fagc ==nil {continue ;};_gbfdd :=_cgcb (_fagc ,_eabc ._dbcg [len (_eabc ._dbcg )-1]);
if _gbfdd < -_cgbg {break _egdb ;};if _gbfdd > _fgga {continue ;};if _bdede !=nil &&_gbfa (_fagc ,_bdede )>=0{continue ;};_bdede =_fagc ;_ege =_fafa ;};if _bdede ==nil {break ;};_eabc .pullWord (_eedf ,_bdede ,_ege );};_eabc .markWordBoundaries ();_bfab =append (_bfab ,_eabc );
};};if len (_bfab )==0{return nil ;};_afa .Slice (_bfab ,func (_acad ,_bbfe int )bool {return _acffg (_bfab [_acad ],_bfab [_bbfe ])< 0});_efddb :=_cgbc (_eedf .PdfRectangle ,_bfab );if _fggg {_gb .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_efddb .String ());
if _fecc {for _degb ,_gfdf :=range _efddb ._effa {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_degb ,_gfdf .String ());if _ebba {for _dgdc ,_ggbed :=range _gfdf ._dbcg {_dg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dgdc ,_ggbed .String ());
for _gcgb ,_cdgf :=range _ggbed ._ebbfbc {_dg .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_gcgb ,_cdgf .String ());};};};};};};return _efddb ;};func _dgbe (_gfgf *textWord ,_ffdf float64 ,_fccc ,_aba rulingList )*wordBag {_eade :=_febc (_gfgf ._ffbae );
_bbfc :=[]*textWord {_gfgf };_fdcg :=wordBag {_dgbad :map[int ][]*textWord {_eade :_bbfc },PdfRectangle :_gfgf .PdfRectangle ,_aed :_gfgf ._abcda ,_fbaf :_ffdf ,_ddgb :_fccc ,_fcee :_aba };return &_fdcg ;};func (_eccb *textObject )newTextMark (_gacg string ,_gdgf _cc .Matrix ,_ddff _cc .Point ,_cacf float64 ,_bbcf *_gf .PdfFont ,_fbc float64 ,_gcef ,_bga _b .Color )(textMark ,bool ){_aeed :=_gdgf .Angle ();
_gfga :=_bded (_aeed ,_dggd );var _gfec float64 ;if _gfga %180!=90{_gfec =_gdgf .ScalingFactorY ();}else {_gfec =_gdgf .ScalingFactorX ();};_ccbc :=_dac (_gdgf );_bcedc :=_gf .PdfRectangle {Llx :_ccbc .X ,Lly :_ccbc .Y ,Urx :_ddff .X ,Ury :_ddff .Y };switch _gfga %360{case 90:_bcedc .Urx -=_gfec ;
case 180:_bcedc .Ury -=_gfec ;case 270:_bcedc .Urx +=_gfec ;case 0:_bcedc .Ury +=_gfec ;default:_gfga =0;_bcedc .Ury +=_gfec ;};if _bcedc .Llx > _bcedc .Urx {_bcedc .Llx ,_bcedc .Urx =_bcedc .Urx ,_bcedc .Llx ;};if _bcedc .Lly > _bcedc .Ury {_bcedc .Lly ,_bcedc .Ury =_bcedc .Ury ,_bcedc .Lly ;
};_dgeb :=true ;if _eccb ._adad ._ef .Width ()> 0{_eccd ,_gdff :=_aaeca (_bcedc ,_eccb ._adad ._ef );if !_gdff {_dgeb =false ;_gb .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_bcedc ,_eccb ._adad ._ef ,_gacg );
};_bcedc =_eccd ;};_cbbba :=_bcedc ;_cdbd :=_eccb ._adad ._ef ;switch _gfga %360{case 90:_cdbd .Urx ,_cdbd .Ury =_cdbd .Ury ,_cdbd .Urx ;_cbbba =_gf .PdfRectangle {Llx :_cdbd .Urx -_bcedc .Ury ,Urx :_cdbd .Urx -_bcedc .Lly ,Lly :_bcedc .Llx ,Ury :_bcedc .Urx };
case 180:_cbbba =_gf .PdfRectangle {Llx :_cdbd .Urx -_bcedc .Llx ,Urx :_cdbd .Urx -_bcedc .Urx ,Lly :_cdbd .Ury -_bcedc .Lly ,Ury :_cdbd .Ury -_bcedc .Ury };case 270:_cdbd .Urx ,_cdbd .Ury =_cdbd .Ury ,_cdbd .Urx ;_cbbba =_gf .PdfRectangle {Llx :_bcedc .Ury ,Urx :_bcedc .Lly ,Lly :_cdbd .Ury -_bcedc .Llx ,Ury :_cdbd .Ury -_bcedc .Urx };
};if _cbbba .Llx > _cbbba .Urx {_cbbba .Llx ,_cbbba .Urx =_cbbba .Urx ,_cbbba .Llx ;};if _cbbba .Lly > _cbbba .Ury {_cbbba .Lly ,_cbbba .Ury =_cbbba .Ury ,_cbbba .Lly ;};_eacb :=textMark {_facd :_gacg ,PdfRectangle :_cbbba ,_bcgc :_bcedc ,_cec :_bbcf ,_egca :_gfec ,_aaeb :_fbc ,_acg :_gdgf ,_dffa :_ddff ,_efadg :_gfga ,_aeeb :_gcef ,_cgbde :_bga };
if _ecb {_gb .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_ccbc ,_ddff ,_eacb .String ());};return _eacb ,_dgeb ;
};func (_ddeag rulingList )intersections ()map[int ]intSet {var _aebga ,_dccf []int ;for _ggedf ,_ffdee :=range _ddeag {switch _ffdee ._ffedb {case _bcaf :_aebga =append (_aebga ,_ggedf );case _gbbge :_dccf =append (_dccf ,_ggedf );};};if len (_aebga )< _caebb +1||len (_dccf )< _bgde +1{return nil ;
};if len (_aebga )+len (_dccf )> _abca {_gb .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_ddeag ),len (_aebga ),len (_dccf ));
return nil ;};_fcdeb :=make (map[int ]intSet ,len (_aebga )+len (_dccf ));for _ ,_fedb :=range _aebga {for _ ,_dbfc :=range _dccf {if _ddeag [_fedb ].intersects (_ddeag [_dbfc ]){if _ ,_feagg :=_fcdeb [_fedb ];!_feagg {_fcdeb [_fedb ]=make (intSet );};
if _ ,_cfga :=_fcdeb [_dbfc ];!_cfga {_fcdeb [_dbfc ]=make (intSet );};_fcdeb [_fedb ].add (_dbfc );_fcdeb [_dbfc ].add (_fedb );};};};return _fcdeb ;};func _gbfa (_dgcd ,_gaf bounded )float64 {return _dgcd .bbox ().Llx -_gaf .bbox ().Llx };

// String returns a description of `tm`.
func (_badaa *textMark )String ()string {return _dg .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_badaa .PdfRectangle ,_badaa ._egca ,_badaa ._facd );};func (_ecfd *wordBag )depthBand (_ddad ,_fcbd float64 )[]int {if len (_ecfd ._dgbad )==0{return nil ;
};return _ecfd .depthRange (_ecfd .getDepthIdx (_ddad ),_ecfd .getDepthIdx (_fcbd ));};func _bgce (_ggcf []TextMark ,_aafc *int )[]TextMark {_deec :=_ggcf [len (_ggcf )-1];_dcef :=[]rune (_deec .Text );if len (_dcef )==1{_ggcf =_ggcf [:len (_ggcf )-1];
_gcebb :=_ggcf [len (_ggcf )-1];*_aafc =_gcebb .Offset +len (_gcebb .Text );}else {_agac :=_cbd (_deec .Text );*_aafc +=len (_agac )-len (_deec .Text );_deec .Text =_agac ;};return _ggcf ;};func _efcd (_cega ,_fdd ,_gbgd float64 )rulingKind {if _cega >=_gbgd &&_eggd (_fdd ,_cega ){return _gbbge ;
};if _fdd >=_gbgd &&_eggd (_cega ,_fdd ){return _bcaf ;};return _ebca ;};func (_effg *wordBag )firstWord (_agb int )*textWord {return _effg ._dgbad [_agb ][0]};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_gf .PdfPage )(*Extractor ,error ){const _gg ="\u0065\u0078\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077";_dad ,_fa :=page .GetAllContentStreams ();if _fa !=nil {return nil ,_fa ;};_gdg ,_fa :=page .GetMediaBox ();if _fa !=nil {return nil ,_dg .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_fa );
};_bf :=&Extractor {_cca :_dad ,_ab :page .Resources ,_ef :*_gdg ,_cb :map[string ]fontEntry {},_da :map[string ]textResult {}};if _bf ._ef .Llx > _bf ._ef .Urx {_gb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_bf ._ef );
_bf ._ef .Llx ,_bf ._ef .Urx =_bf ._ef .Urx ,_bf ._ef .Llx ;};if _bf ._ef .Lly > _bf ._ef .Ury {_gb .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_bf ._ef );
_bf ._ef .Lly ,_bf ._ef .Ury =_bf ._ef .Ury ,_bf ._ef .Lly ;};_bd .TrackUse (_gg );return _bf ,nil ;};

// String returns a description of `state`.
func (_gff *textState )String ()string {_fgc :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _gff ._fac !=nil {_fgc =_gff ._fac .BaseFont ();};return _dg .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_gff ._bgd ,_gff ._bccc ,_gff ._fbe ,_fgc );
};

// String returns a description of `v`.
func (_ecgdb *ruling )String ()string {if _ecgdb ._ffedb ==_ebca {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_adde ,_ecaa :="\u0078","\u0079";if _ecgdb ._ffedb ==_gbbge {_adde ,_ecaa ="\u0079","\u0078";};_caadg :="";if _ecgdb ._fcdad !=0.0{_caadg =_dg .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ecgdb ._fcdad );
};return _dg .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_ecgdb ._ffedb ,_adde ,_ecgdb ._cegc ,_ecaa ,_ecgdb ._fcdfd ,_ecgdb ._gecf ,_ecgdb ._gecf -_ecgdb ._fcdfd ,_ecgdb ._fgae ,_ecgdb .Color ,_caadg );
};func _eebc (_fdcc map[int ][]float64 )string {_aaga :=_caaaa (_fdcc );_cfcbc :=make ([]string ,len (_fdcc ));for _cfce ,_ecbad :=range _aaga {_cfcbc [_cfce ]=_dg .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_ecbad ,_fdcc [_ecbad ]);};
return _dg .Sprintf ("\u007b\u0025\u0073\u007d",_g .Join (_cfcbc ,"\u002c\u0020"));};func _fadad (_aacfce ,_cecgg _cc .Point )bool {return _aacfce .X ==_cecgg .X &&_aacfce .Y ==_cecgg .Y };func (_eadef paraList )findTextTables ()[]*textTable {var _adcf []*textTable ;
for _ ,_ededf :=range _eadef {if _ededf .taken ()||_ededf .Width ()==0{continue ;};_deee :=_ededf .isAtom ();if _deee ==nil {continue ;};_deee .growTable ();if _deee ._edbb *_deee ._debd < _dgbb {continue ;};_deee .markCells ();_deee .log ("\u0067\u0072\u006fw\u006e");
_adcf =append (_adcf ,_deee );};return _adcf ;};func (_accg *ruling )equals (_gggc *ruling )bool {return _accg ._ffedb ==_gggc ._ffedb &&_ccge (_accg ._cegc ,_gggc ._cegc )&&_ccge (_accg ._fcdfd ,_gggc ._fcdfd )&&_ccge (_accg ._gecf ,_gggc ._gecf );};func (_ebbfb lineRuling )asRuling ()(*ruling ,bool ){_afad :=ruling {_ffedb :_ebbfb ._bbcc ,Color :_ebbfb .Color ,_fgae :_dbca };
switch _ebbfb ._bbcc {case _bcaf :_afad ._cegc =_ebbfb .xMean ();_afad ._fcdfd =_f .Min (_ebbfb ._fbfab .Y ,_ebbfb ._eefd .Y );_afad ._gecf =_f .Max (_ebbfb ._fbfab .Y ,_ebbfb ._eefd .Y );case _gbbge :_afad ._cegc =_ebbfb .yMean ();_afad ._fcdfd =_f .Min (_ebbfb ._fbfab .X ,_ebbfb ._eefd .X );
_afad ._gecf =_f .Max (_ebbfb ._fbfab .X ,_ebbfb ._eefd .X );default:_gb .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ebbfb ._bbcc );return nil ,false ;};return &_afad ,true ;};
func (_cfafc *textTable )toTextTable ()TextTable {if _dfad {_gb .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_cfafc ._edbb ,_cfafc ._debd );};_bfcb :=make ([][]TableCell ,_cfafc ._debd );
for _edddg :=0;_edddg < _cfafc ._debd ;_edddg ++{_bfcb [_edddg ]=make ([]TableCell ,_cfafc ._edbb );for _cdeg :=0;_cdeg < _cfafc ._edbb ;_cdeg ++{_dcdf :=_cfafc .get (_cdeg ,_edddg );if _dcdf ==nil {continue ;};if _dfad {_dg .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_cdeg ,_edddg ,_dcdf );
};_bfcb [_edddg ][_cdeg ].Text =_dcdf .text ();_adbcc :=0;_bfcb [_edddg ][_cdeg ].Marks ._deff =_dcdf .toTextMarks (&_adbcc );};};return TextTable {W :_cfafc ._edbb ,H :_cfafc ._debd ,Cells :_bfcb };};func (_eeadae *textWord )appendMark (_cabf *textMark ,_gbcbg _gf .PdfRectangle ){_eeadae ._ebbfbc =append (_eeadae ._ebbfbc ,_cabf );
_eeadae .PdfRectangle =_fgge (_eeadae .PdfRectangle ,_cabf .PdfRectangle );if _cabf ._egca > _eeadae ._abcda {_eeadae ._abcda =_cabf ._egca ;};_eeadae ._ffbae =_gbcbg .Ury -_eeadae .PdfRectangle .Lly ;};func _ccd (_fbge ,_efad _gf .PdfRectangle )bool {return _gegb (_fbge ,_efad )&&_ffbf (_fbge ,_efad )};
func (_cdfcd *textTable )markCells (){for _febb :=0;_febb < _cdfcd ._debd ;_febb ++{for _bdgg :=0;_bdgg < _cdfcd ._edbb ;_bdgg ++{_accb :=_cdfcd .get (_bdgg ,_febb );if _accb !=nil {_accb ._eacag =true ;};};};};const _cbad =1.0/1000.0;const (RenderModeStroke RenderMode =1<<iota ;
RenderModeFill ;RenderModeClip ;);func (_ecgf *shapesState )closePath (){if _ecgf ._fbbc {_ecgf ._bgga =append (_ecgf ._bgga ,_bbde (_ecgf ._fdc ));_ecgf ._fbbc =false ;}else if len (_ecgf ._bgga )==0{if _gbaf {_gb .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");
};_ecgf ._fbbc =false ;return ;};_ecgf ._bgga [len (_ecgf ._bgga )-1].close ();if _gbaf {_gb .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_ecgf );};};func (_cbeac *textTable )emptyRow (_effab int )bool {for _dcag :=0;
_dcag < _cbeac ._edbb ;_dcag ++{_aadec :=_cbeac .get (_dcag ,_effab );if _aadec !=nil &&_aadec .text ()!=""{return false ;};};return true ;};func (_fbba *wordBag )maxDepth ()float64 {return _fbba ._fbaf -_fbba .Lly };func _fbfaa (_edac []compositeCell )[]float64 {var _dbgeb []*textLine ;
_gfba :=0;for _ ,_dbdb :=range _edac {_gfba +=len (_dbdb .paraList );_dbgeb =append (_dbgeb ,_dbdb .lines ()...);};_afa .Slice (_dbgeb ,func (_adaf ,_eccc int )bool {_abba ,_geda :=_dbgeb [_adaf ],_dbgeb [_eccc ];_eeda ,_aecgc :=_abba ._fcfag ,_geda ._fcfag ;
if !_agcc (_eeda -_aecgc ){return _eeda < _aecgc ;};return _abba .Llx < _geda .Llx ;});if _dfad {_dg .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_gfba ,len (_dbgeb ));
for _dbdcf ,_adfc :=range _dbgeb {_dg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dbdcf ,_adfc );};};var _bcaab []float64 ;_cbged :=_dbgeb [0];var _acadd [][]*textLine ;_agc :=[]*textLine {_cbged };for _gea ,_dfdcb :=range _dbgeb [1:]{if _dfdcb .Ury < _cbged .Lly {_ecae :=0.5*(_dfdcb .Ury +_cbged .Lly );
if _dfad {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_gea ,_dfdcb .Ury ,_cbged .Lly ,_ecae ,_cbged ,_dfdcb );
};_bcaab =append (_bcaab ,_ecae );_acadd =append (_acadd ,_agc );_agc =nil ;};_agc =append (_agc ,_dfdcb );if _dfdcb .Lly < _cbged .Lly {_cbged =_dfdcb ;};};if len (_agc )> 0{_acadd =append (_acadd ,_agc );};if _dfad {_dg .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_bcaab );
};if _dfad {_gb .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_edac ));for _fbga ,_ggce :=range _edac {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbga ,_ggce );};_gb .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_acadd ));
for _cgdg ,_edgfb :=range _acadd {_dg .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_cgdg ,len (_edgfb ));for _bffa ,_baee :=range _edgfb {_dg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bffa ,_baee );};};};_gfaf :=true ;
for _ddeb ,_dggb :=range _acadd {_bdda :=true ;for _bbeg ,_fade :=range _edac {if _dfad {_dg .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_ddeb ,len (_acadd ),_bbeg ,len (_edac ),_fade );
};if !_fade .hasLines (_dggb ){if _dfad {_dg .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_ddeb ,len (_acadd ),_bbeg ,len (_edac ));
};_bdda =false ;break ;};};if !_bdda {_gfaf =false ;break ;};};if !_gfaf {if _dfad {_gb .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_bcaab =nil ;};if _dfad &&_bcaab !=nil {_dg .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_bcaab );};return _bcaab ;
};func _affc (_ggae []pathSection )rulingList {_dacc (_ggae );if _gggbb {_gb .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_ggae ));};var _cfdag rulingList ;for _ ,_fdeba :=range _ggae {for _ ,_edef :=range _fdeba ._afcf {if !_edef .isQuadrilateral (){if _gggbb {_gb .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_edef );
};continue ;};if _ffea ,_fgdb :=_edef .makeRectRuling (_fdeba .Color );_fgdb {_cfdag =append (_cfdag ,_ffea );}else {if _cbaa {_gb .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_edef );
};};};};if _gggbb {_gb .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_cfdag .String ());};return _cfdag ;};func (_gfcc *textObject )setHorizScaling (_acee float64 ){if _gfcc ==nil {return ;
};_gfcc ._ffcb ._dabf =_acee ;};func (_cfca *textMark )inDiacriticArea (_aafdb *textMark )bool {_fbeg :=_cfca .Llx -_aafdb .Llx ;_dbg :=_cfca .Urx -_aafdb .Urx ;_ggba :=_cfca .Lly -_aafdb .Lly ;return _f .Abs (_fbeg +_dbg )< _cfca .Width ()*_bdb &&_f .Abs (_ggba )< _cfca .Height ()*_bdb ;
};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_acfbd *textWord )computeText ()string {_cdda :=make ([]string ,len (_acfbd ._ebbfbc ));for _aeege ,_cebfa :=range _acfbd ._ebbfbc {_cdda [_aeege ]=_cebfa ._facd ;};return _g .Join (_cdda ,"");};func _gfcd (_gcf *wordBag ,_ddda *textWord ,_bdc float64 )bool {return _ddda .Llx < _gcf .Urx +_bdc &&_gcf .Llx -_bdc < _ddda .Urx ;
};func (_ecea *wordBag )depthRange (_deb ,_fdgc int )[]int {var _fbaff []int ;for _fae :=range _ecea ._dgbad {if _deb <=_fae &&_fae <=_fdgc {_fbaff =append (_fbaff ,_fae );};};if len (_fbaff )==0{return nil ;};_afa .Ints (_fbaff );return _fbaff ;};func (_fbadf *subpath )close (){if !_fadad (_fbadf ._cgf [0],_fbadf .last ()){_fbadf .add (_fbadf ._cgf [0]);
};_fbadf ._bcee =true ;_fbadf .removeDuplicates ();};func (_dcdg *shapesState )moveTo (_eaaef ,_adab float64 ){_dcdg ._fbbc =true ;_dcdg ._fdc =_dcdg .devicePoint (_eaaef ,_adab );if _gbaf {_gb .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_eaaef ,_adab ,_dcdg ._fdc );
};};func (_aecg gridTiling )log (_ffca string ){if !_ggbf {return ;};_gb .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_aecg ._ggdf ),len (_aecg ._ebff ),_ffca );_dg .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_aecg ._ggdf );
_dg .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_aecg ._ebff );for _ceea ,_cfag :=range _aecg ._ebff {_cfecf ,_edced :=_aecg ._cebgg [_cfag ];if !_edced {continue ;};_dg .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_ceea ,_cfag );
for _fcca ,_aabb :=range _aecg ._ggdf {_eabfc ,_fcaa :=_cfecf [_aabb ];if !_fcaa {continue ;};_dg .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fcca ,_eabfc .String ());};};};func (_bdd *textObject )getFontDict (_eead string )(_aag _fb .PdfObject ,_dfa error ){_baa :=_bdd ._ffe ;
if _baa ==nil {_gb .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_eead );return nil ,nil ;};_aag ,_deaf :=_baa .GetFontByName (_fb .PdfObjectName (_eead ));
if !_deaf {_gb .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_eead );
return nil ,_af .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _aag ,nil ;};func _fdeg (_caadgg map[float64 ]gridTile )[]float64 {_fdcf :=make ([]float64 ,0,len (_caadgg ));for _gcbeg :=range _caadgg {_fdcf =append (_fdcf ,_gcbeg );
};_afa .Float64s (_fdcf );return _fdcf ;};

// String returns a description of `p`.
func (_bcggb *textPara )String ()string {if _bcggb ._aged {return _dg .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_bcggb .PdfRectangle );};_gbce :="";if _bcggb ._dgbc !=nil {_gbce =_dg .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_bcggb ._dgbc ._edbb ,_bcggb ._dgbc ._debd );
};return _dg .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_bcggb .PdfRectangle ,_gbce ,len (_bcggb ._effa ),_gfcf (_bcggb .text (),50));};func (_fcefe *textTable )depth ()float64 {_babe :=1e10;
for _gcbac :=0;_gcbac < _fcefe ._edbb ;_gcbac ++{_cgdd :=_fcefe .get (_gcbac ,0);if _cgdd ==nil ||_cgdd ._aged {continue ;};_babe =_f .Min (_babe ,_cgdd .depth ());};return _babe ;};func (_eefg *textLine )pullWord (_gadcb *wordBag ,_fdca *textWord ,_babb int ){_eefg .appendWord (_fdca );
_gadcb .removeWord (_fdca ,_babb );};func _gfabc (_afcff []*textWord ,_dcfe float64 ,_adcb ,_fdbd rulingList )*wordBag {_bba :=_dgbe (_afcff [0],_dcfe ,_adcb ,_fdbd );for _ ,_dcdge :=range _afcff [1:]{_cgbd :=_febc (_dcdge ._ffbae );_bba ._dgbad [_cgbd ]=append (_bba ._dgbad [_cgbd ],_dcdge );
_bba .PdfRectangle =_fgge (_bba .PdfRectangle ,_dcdge .PdfRectangle );};_bba .sort ();return _bba ;};func _gbff (_gagdc ,_dedcc int )uint64 {return uint64 (_gagdc )*0x1000000+uint64 (_dedcc )};