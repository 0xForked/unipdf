//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_e "bytes";_b "errors";_cd "fmt";_fbe "github.com/unidoc/unipdf/v3/common";_aa "github.com/unidoc/unipdf/v3/contentstream";_ga "github.com/unidoc/unipdf/v3/core";_ae "github.com/unidoc/unipdf/v3/internal/license";_cf "github.com/unidoc/unipdf/v3/internal/textencoding";
_ee "github.com/unidoc/unipdf/v3/internal/transform";_ce "github.com/unidoc/unipdf/v3/model";_fdb "golang.org/x/image/draw";_eg "golang.org/x/text/unicode/norm";_ca "golang.org/x/xerrors";_a "image";_fa "image/color";_fb "io";_c "math";_gg "reflect";_fbc "regexp";
_d "sort";_ff "strings";_fd "unicode";_g "unicode/utf8";);

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_bcb *PageText )ApplyArea (bbox _ce .PdfRectangle ){_bbga :=make ([]*textMark ,0,len (_bcb ._ebed ));for _ ,_eega :=range _bcb ._ebed {if _dfff (_eega .bbox (),bbox ){_bbga =append (_bbga ,_eega );};};var _bgcf paraList ;_dafd :=len (_bbga );for _ged :=0;
_ged < 360&&_dafd > 0;_ged +=90{_baef :=make ([]*textMark ,0,len (_bbga )-_dafd );for _ ,_efdcf :=range _bbga {if _efdcf ._cbfbc ==_ged {_baef =append (_baef ,_efdcf );};};if len (_baef )> 0{_acaf :=_cdfge (_baef ,_bcb ._efdc ,nil ,nil ,_bcb ._gcef ._gadga );
_bgcf =append (_bgcf ,_acaf ...);_dafd -=len (_baef );};};_gaee :=new (_e .Buffer );_bgcf .writeText (_gaee );_bcb ._fdag =_gaee .String ();_bcb ._bbgf =_bgcf .toTextMarks ();_bcb ._bagc =_bgcf .tables ();};

// Len returns the number of TextMarks in `ma`.
func (_deg *TextMarkArray )Len ()int {if _deg ==nil {return 0;};return len (_deg ._cff );};func _dgdabf (_acgec map[int ]intSet )[]int {_fcfae :=make ([]int ,0,len (_acgec ));for _aeged :=range _acgec {_fcfae =append (_fcfae ,_aeged );};_d .Ints (_fcfae );
return _fcfae ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{_ce .PdfRectangle ;W ,H int ;Cells [][]TableCell ;};func (_cfdcd *textPara )writeCellText (_gfdg _fb .Writer ){for _gcbc ,_ffeb :=range _cfdcd ._aebf {_bgdedf :=_ffeb .text ();_ebfd :=_fcba &&_ffeb .endsInHyphen ()&&_gcbc !=len (_cfdcd ._aebf )-1;
if _ebfd {_bgdedf =_gbag (_bgdedf );};_gfdg .Write ([]byte (_bgdedf ));if !(_ebfd ||_gcbc ==len (_cfdcd ._aebf )-1){_gfdg .Write ([]byte (_bbegc (_ffeb ._fdgf ,_cfdcd ._aebf [_gcbc +1]._fdgf )));};};};func (_cccb *textObject )getCurrentFont ()*_ce .PdfFont {_bfac :=_cccb ._geeg ._eggb ;
if _bfac ==nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");return _ce .DefaultFont ();
};return _bfac ;};func _dgfb (_caffbe []pathSection )rulingList {_dbaa (_caffbe );if _ggac {_fbe .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_caffbe ));
};var _dcce rulingList ;for _ ,_caaac :=range _caffbe {for _ ,_fadb :=range _caaac ._accg {if len (_fadb ._baeb )< 2{continue ;};_gefe :=_fadb ._baeb [0];for _ ,_cgeg :=range _fadb ._baeb [1:]{if _bcafg ,_deefa :=_cfage (_gefe ,_cgeg ,_caaac .Color );_deefa {_dcce =append (_dcce ,_bcafg );
};_gefe =_cgeg ;};};};if _ggac {_fbe .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_dcce );};return _dcce ;};func (_dbbf gridTile )complete ()bool {return _dbbf .numBorders ()==4};func (_bcega paraList )merge ()*textPara {_fbe .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_bcega ));
if len (_bcega )==0{return nil ;};_bcega .sortReadingOrder ();_dfgge :=_bcega [0].PdfRectangle ;_acdb :=_bcega [0]._aebf ;for _ ,_cege :=range _bcega [1:]{_dfgge =_fgfbb (_dfgge ,_cege .PdfRectangle );_acdb =append (_acdb ,_cege ._aebf ...);};return _cdcb (_dfgge ,_acdb );
};func (_gdgg *textPara )isAtom ()*textTable {_bdbf :=_gdgg ;_bdga :=_gdgg ._bfgc ;_bagf :=_gdgg ._gabb ;if _bdga .taken ()||_bagf .taken (){return nil ;};_aege :=_bdga ._gabb ;if _aege .taken ()||_aege !=_bagf ._bfgc {return nil ;};return _ebae (_bdbf ,_bdga ,_bagf ,_aege );
};func (_bgc *stateStack )empty ()bool {return len (*_bgc )==0};

// String returns a description of `w`.
func (_bgae *textWord )String ()string {return _cd .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_bgae ._ccfce ,_bgae .PdfRectangle ,_bgae ._fbdaf ,_bgae ._abgea );
};

// String returns a description of `b`.
func (_dccb *wordBag )String ()string {var _gbgb []string ;for _ ,_bceg :=range _dccb .depthIndexes (){_eeece :=_dccb ._effb [_bceg ];for _ ,_ebgf :=range _eeece {_gbgb =append (_gbgb ,_ebgf ._abgea );};};return _cd .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_dccb .PdfRectangle ,_dccb ._effd ,len (_gbgb ),_gbgb );
};const _fcc =10;func (_egea *textObject )getStrokeColor ()_fa .Color {return _fedaa (_egea ._dbf .ColorspaceStroking ,_egea ._dbf .ColorStroking );};func (_dgagg *textTable )putComposite (_edddcd ,_dcdg int ,_gadcb paraList ,_edfa _ce .PdfRectangle ){if len (_gadcb )==0{_fbe .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_gbgg :=compositeCell {PdfRectangle :_edfa ,paraList :_gadcb };if _dgfg {_cd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_edddcd ,_dcdg ,_gbgg .String ());
};_gbgg .updateBBox ();_dgagg ._bbedb [_egdege (_edddcd ,_dcdg )]=_gbgg ;};type gridTile struct{_ce .PdfRectangle ;_dagdb ,_facfe ,_adbg ,_bbdcd bool ;};type textTable struct{_ce .PdfRectangle ;_dbdfe ,_cdgcb int ;_cffg bool ;_acabfd map[uint64 ]*textPara ;
_bbedb map[uint64 ]compositeCell ;};func _agbae (_bcgdg _ce .PdfRectangle )*ruling {return &ruling {_dbeg :_edcaf ,_befa :_bcgdg .Urx ,_fcbf :_bcgdg .Lly ,_ddgdc :_bcgdg .Ury };};func (_aef *TextMarkArray )exists (_ecbe TextMark )bool {for _ ,_def :=range _aef .Elements (){if _gg .DeepEqual (_ecbe .DirectObject ,_def .DirectObject )&&_gg .DeepEqual (_ecbe .BBox ,_def .BBox )&&_def .Text ==_ecbe .Text {return true ;
};};return false ;};func (_cbbfg *textPara )bbox ()_ce .PdfRectangle {return _cbbfg .PdfRectangle };type pathSection struct{_accg []*subpath ;_fa .Color ;};const _gad =20;func (_cdcba *textTable )put (_fdgcd ,_gffd int ,_adadg *textPara ){_cdcba ._acabfd [_egdege (_fdgcd ,_gffd )]=_adadg ;
};func _gbfd (_gdbe *_ce .Image ,_eeeef _fa .Color )_a .Image {_faac ,_bgdfc :=int (_gdbe .Width ),int (_gdbe .Height );_gbedd :=_a .NewRGBA (_a .Rect (0,0,_faac ,_bgdfc ));for _gaba :=0;_gaba < _bgdfc ;_gaba ++{for _dbdbe :=0;_dbdbe < _faac ;_dbdbe ++{_cdbef ,_egcda :=_gdbe .ColorAt (_dbdbe ,_gaba );
if _egcda !=nil {_fbe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_dbdbe ,_gaba );
continue ;};_affg ,_cagcg ,_aacgd ,_ :=_cdbef .RGBA ();var _fcafe _fa .Color ;if _affg +_cagcg +_aacgd ==0{_fcafe =_fa .Transparent ;}else {_fcafe =_eeeef ;};_gbedd .Set (_dbdbe ,_gaba ,_fcafe );};};return _gbedd ;};func _dega (_aaed []TextMark ,_gfad *TextTable )[]TextMark {var _ggde []TextMark ;
for _ ,_fdgfd :=range _aaed {_fdgfd ._deef =true ;_fdgfd ._baf =_gfad ;_ggde =append (_ggde ,_fdgfd );};return _ggde ;};func _ebae (_dadfe ,_cbcgg ,_fbabg ,_egdb *textPara )*textTable {_bcef :=&textTable {_dbdfe :2,_cdgcb :2,_acabfd :make (map[uint64 ]*textPara ,4)};
_bcef .put (0,0,_dadfe );_bcef .put (1,0,_cbcgg );_bcef .put (0,1,_fbabg );_bcef .put (1,1,_egdb );return _bcef ;};func (_fdcd compositeCell )String ()string {_cfdd :="";if len (_fdcd .paraList )> 0{_cfdd =_ggaa (_fdcd .paraList .merge ().text (),50);};
return _cd .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_fdcd .PdfRectangle ,len (_fdcd .paraList ),_cfdd );};func _cgfg (_dgca ,_fdeg bounded )float64 {return _dgca .bbox ().Llx -_fdeg .bbox ().Llx };
func (_cggga *textTable )isExportable ()bool {if _cggga ._cffg {return true ;};_gfdd :=func (_ceddb int )bool {_cbge :=_cggga .get (0,_ceddb );if _cbge ==nil {return false ;};_bcggf :=_cbge .text ();_bcdae :=_g .RuneCountInString (_bcggf );_eebce :=_eaega .MatchString (_bcggf );
return _bcdae <=1||_eebce ;};for _dged :=0;_dged < _cggga ._cdgcb ;_dged ++{if !_gfdd (_dged ){return true ;};};return false ;};func (_abcd *textObject )setFont (_cdef string ,_gdf float64 )error {if _abcd ==nil {return nil ;};_abcd ._geeg ._eab =_gdf ;
_gcbd ,_bffb :=_abcd .getFont (_cdef );if _bffb !=nil {return _bffb ;};_abcd ._geeg ._eggb =_gcbd ;return nil ;};func (_begc *wordBag )highestWord (_gaeb int ,_fce ,_bdbc float64 )*textWord {for _ ,_adec :=range _begc ._effb [_gaeb ]{if _fce <=_adec ._ccfce &&_adec ._ccfce <=_bdbc {return _adec ;
};};return nil ;};func _adad (_cfcf *textLine )bool {_cabe :=true ;_ggffb :=-1;for _ ,_gbccc :=range _cfcf ._gggb {for _ ,_fbegf :=range _gbccc ._dbcbg {_agf :=_fbegf ._aaac ;if _ggffb ==-1{_ggffb =_agf ;}else {if _ggffb !=_agf {_cabe =false ;break ;};
};};};return _cabe ;};func _agfd (_ccgg []*textLine )map[float64 ][]*textLine {_d .Slice (_ccgg ,func (_ecce ,_gdgd int )bool {return _ccgg [_ecce ]._fdgf < _ccgg [_gdgd ]._fdgf });_eada :=map[float64 ][]*textLine {};for _ ,_efff :=range _ccgg {_fggde :=_aefb (_efff );
_fggde =_c .Round (_fggde );_eada [_fggde ]=append (_eada [_fggde ],_efff );};return _eada ;};func _aefb (_aggf *textLine )float64 {return _aggf ._gggb [0].Llx };func (_eedfg rulingList )snapToGroups ()rulingList {_ggeg ,_ccda :=_eedfg .vertsHorzs ();if len (_ggeg )> 0{_ggeg =_ggeg .snapToGroupsDirection ();
};if len (_ccda )> 0{_ccda =_ccda .snapToGroupsDirection ();};_adgd :=append (_ggeg ,_ccda ...);_adgd .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _adgd ;};func (_aagd *structElement )parseStructElement (_cceb _ga .PdfObject ){_aacbe ,_gecd :=_ga .GetDict (_cceb );
if !_gecd {_fbe .Log .Debug ("\u0070\u0061\u0072\u0073\u0065\u0053\u0074\u0072u\u0063\u0074\u0045le\u006d\u0065\u006e\u0074\u003a\u0020d\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075n\u0064\u002e");
return ;};_cecf :=_aacbe .Get ("\u0053");_egaa :=_aacbe .Get ("\u0050\u0067");_agbag :="";if _cecf !=nil {_agbag =_cecf .String ();};_aagc :=_aacbe .Get ("\u004b");_aagd ._edff =_agbag ;_aagd ._facf =_egaa ;switch _fdc :=_aagc .(type ){case *_ga .PdfObjectInteger :_aagd ._edff =_agbag ;
_aagd ._cbfb =int64 (*_fdc );_aagd ._facf =_egaa ;case *_ga .PdfObjectReference :_bffg :=*_ga .MakeArray (_fdc );var _abfd int64 =-1;_aagd ._cbfb =_abfd ;if _bffg .Len ()==1{_ggaca :=_bffg .Elements ()[0];_dcbd ,_bafg :=_ggaca .(*_ga .PdfObjectInteger );
if _bafg {_abfd =int64 (*_dcbd );_aagd ._cbfb =_abfd ;_aagd ._edff =_agbag ;_aagd ._facf =_egaa ;return ;};};_fcgb :=[]structElement {};for _ ,_beec :=range _bffg .Elements (){_cgfa ,_dfgg :=_beec .(*_ga .PdfObjectInteger );if _dfgg {_abfd =int64 (*_cgfa );
_aagd ._cbfb =_abfd ;_aagd ._edff =_agbag ;}else {_efeg :=&structElement {};_efeg .parseStructElement (_beec );_fcgb =append (_fcgb ,*_efeg );};_abfd =-1;};_aagd ._ecae =_fcgb ;case *_ga .PdfObjectArray :_dggf :=_aagc .(*_ga .PdfObjectArray );var _ebdg int64 =-1;
_aagd ._cbfb =_ebdg ;if _dggf .Len ()==1{_ddfa :=_dggf .Elements ()[0];_dgga ,_aacbf :=_ddfa .(*_ga .PdfObjectInteger );if _aacbf {_ebdg =int64 (*_dgga );_aagd ._cbfb =_ebdg ;_aagd ._edff =_agbag ;_aagd ._facf =_egaa ;return ;};};_dbed :=[]structElement {};
for _ ,_gacaf :=range _dggf .Elements (){_bbefe ,_aefa :=_gacaf .(*_ga .PdfObjectInteger );if _aefa {_ebdg =int64 (*_bbefe );_aagd ._cbfb =_ebdg ;_aagd ._edff =_agbag ;_aagd ._facf =_egaa ;}else {_bgge :=&structElement {};_bgge .parseStructElement (_gacaf );
_dbed =append (_dbed ,*_bgge );};_ebdg =-1;};_aagd ._ecae =_dbed ;};};type cachedImage struct{_gfc *_ce .Image ;_cgd _ce .PdfColorspace ;};func (_cgbb rulingList )secMinMax ()(float64 ,float64 ){_cgfgd ,_fbba :=_cgbb [0]._fcbf ,_cgbb [0]._ddgdc ;for _ ,_gaaeb :=range _cgbb [1:]{if _gaaeb ._fcbf < _cgfgd {_cgfgd =_gaaeb ._fcbf ;
};if _gaaeb ._ddgdc > _fbba {_fbba =_gaaeb ._ddgdc ;};};return _cgfgd ,_fbba ;};func _baea (_dcdc []TextMark ,_bcgfb *int ,_abdf string )[]TextMark {_gbfeb :=_bee ;_gbfeb .Text =_abdf ;return _eddd (_dcdc ,_bcgfb ,_gbfeb );};func (_cbgc rulingList )merge ()*ruling {_efbgc :=_cbgc [0]._befa ;
_ecgcg :=_cbgc [0]._fcbf ;_fdcca :=_cbgc [0]._ddgdc ;for _ ,_dabd :=range _cbgc [1:]{_efbgc +=_dabd ._befa ;if _dabd ._fcbf < _ecgcg {_ecgcg =_dabd ._fcbf ;};if _dabd ._ddgdc > _fdcca {_fdcca =_dabd ._ddgdc ;};};_cacfg :=&ruling {_dbeg :_cbgc [0]._dbeg ,_ccga :_cbgc [0]._ccga ,Color :_cbgc [0].Color ,_befa :_efbgc /float64 (len (_cbgc )),_fcbf :_ecgcg ,_ddgdc :_fdcca };
if _dagg {_fbe .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_cbgc ),_cacfg );for _dace ,_gffcc :=range _cbgc {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dace ,_gffcc );
};};return _cacfg ;};

// PageText represents the layout of text on a device page.
type PageText struct{_ebed []*textMark ;_fdag string ;_bbgf []TextMark ;_bagc []TextTable ;_efdc _ce .PdfRectangle ;_eeec []pathSection ;_fafa []pathSection ;_gaca *_ga .PdfObject ;_fdee _ga .PdfObject ;_aab *_aa .ContentStreamOperations ;_gcef PageTextOptions ;
};func _gegf (_gadgab byte )bool {for _ ,_acee :=range _bebg {if []byte (_acee )[0]==_gadgab {return true ;};};return false ;};func _cbce (_begg *wordBag ,_fcde *textWord ,_fdeec float64 )bool {return _begg .Urx <=_fcde .Llx &&_fcde .Llx < _begg .Urx +_fdeec ;
};func (_gcdc *textWord )computeText ()string {_ddcc :=make ([]string ,len (_gcdc ._dbcbg ));for _eeecd ,_cdbe :=range _gcdc ._dbcbg {_ddcc [_eeecd ]=_cdbe ._gbee ;};return _ff .Join (_ddcc ,"");};func (_dbda *textTable )getRight ()paraList {_bbda :=make (paraList ,_dbda ._cdgcb );
for _dddaf :=0;_dddaf < _dbda ._cdgcb ;_dddaf ++{_gegc :=_dbda .get (_dbda ._dbdfe -1,_dddaf )._bfgc ;if _gegc .taken (){return nil ;};_bbda [_dddaf ]=_gegc ;};for _gccbd :=0;_gccbd < _dbda ._cdgcb -1;_gccbd ++{if _bbda [_gccbd ]._gabb !=_bbda [_gccbd +1]{return nil ;
};};return _bbda ;};func (_bbafg paraList )findTables (_cfged []gridTiling )[]*textTable {_bbafg .addNeighbours ();_d .Slice (_bbafg ,func (_ecadc ,_dfcc int )bool {return _fedf (_bbafg [_ecadc ],_bbafg [_dfcc ])< 0});var _bcdd []*textTable ;if _bacdf {_fgfa :=_bbafg .findGridTables (_cfged );
_bcdd =append (_bcdd ,_fgfa ...);};if _bddc {_cfgf :=_bbafg .findTextTables ();_bcdd =append (_bcdd ,_cfgf ...);};return _bcdd ;};func (_age *wordBag )allWords ()[]*textWord {var _bgef []*textWord ;for _ ,_fbec :=range _age ._effb {_bgef =append (_bgef ,_fbec ...);
};return _bgef ;};func _dfggg (_bfaa *wordBag ,_bbff float64 ,_dgcae ,_eea rulingList )[]*wordBag {var _adgc []*wordBag ;for _ ,_aded :=range _bfaa .depthIndexes (){_dgee :=false ;for !_bfaa .empty (_aded ){_eafe :=_bfaa .firstReadingIndex (_aded );_bacf :=_bfaa .firstWord (_eafe );
_daggc :=_caffb (_bacf ,_bbff ,_dgcae ,_eea );_bfaa .removeWord (_bacf ,_eafe );if _cagg {_fbe .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_bacf .String ());};for _dfeb :=true ;_dfeb ;
_dfeb =_dgee {_dgee =false ;_cdgc :=_dfad *_daggc ._effd ;_gcg :=_edgc *_daggc ._effd ;_fgeg :=_aabc *_daggc ._effd ;if _cagg {_fbe .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_daggc .minDepth (),_daggc .maxDepth (),_fgeg ,_gcg );
};if _bfaa .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_daggc ,_edae (_gdae ,0),_daggc .minDepth ()-_fgeg ,_daggc .maxDepth ()+_fgeg ,_gbacg ,false ,false )> 0{_dgee =true ;};if _bfaa .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_daggc ,_edae (_gdae ,_gcg ),_daggc .minDepth (),_daggc .maxDepth (),_ggab ,false ,false )> 0{_dgee =true ;
};if _dgee {continue ;};_ebff :=_bfaa .scanBand ("",_daggc ,_edae (_cbce ,_cdgc ),_daggc .minDepth (),_daggc .maxDepth (),_cdeeg ,true ,false );if _ebff > 0{_cggd :=(_daggc .maxDepth ()-_daggc .minDepth ())/_daggc ._effd ;if (_ebff > 1&&float64 (_ebff )> 0.3*_cggd )||_ebff <=10{if _bfaa .scanBand ("\u006f\u0074\u0068e\u0072",_daggc ,_edae (_cbce ,_cdgc ),_daggc .minDepth (),_daggc .maxDepth (),_cdeeg ,false ,true )> 0{_dgee =true ;
};};};};_adgc =append (_adgc ,_daggc );};};return _adgc ;};func _bdc (_ebgca _ee .Point )*subpath {return &subpath {_baeb :[]_ee .Point {_ebgca }}};func _egdege (_ffeg ,_fggaed int )uint64 {return uint64 (_ffeg )*0x1000000+uint64 (_fggaed )};func (_bfaab *textTable )get (_geffd ,_bdaedf int )*textPara {return _bfaab ._acabfd [_egdege (_geffd ,_bdaedf )];
};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_dgb PageText )ToText ()string {return _dgb .Text ()};func _cgbe (_egafe *paraList )map[int ][]*textLine {_edcdf :=map[int ][]*textLine {};for _ ,_aeec :=range *_egafe {for _ ,_cebea :=range _aeec ._aebf {if !_adad (_cebea ){_fbe .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_feddg :=_cebea ._gggb [0]._dbcbg [0]._aaac ;_edcdf [_feddg ]=append (_edcdf [_feddg ],_cebea );};if _aeec ._ffdf !=nil {_cfge :=_aeec ._ffdf ._acabfd ;for _ ,_edbac :=range _cfge {for _ ,_dfded :=range _edbac ._aebf {if !_adad (_dfded ){_fbe .Log .Debug ("g\u0072\u006f\u0075p\u004c\u0069\u006e\u0065\u0073\u003a\u0020\u0054\u0068\u0065\u0020\u0074\u0065\u0078\u0074\u0020\u006c\u0069\u006e\u0065\u0020\u0063\u006f\u006e\u0074a\u0069\u006e\u0073 \u006d\u006f\u0072\u0065\u0020\u0074\u0068\u0061\u006e\u0020\u006f\u006e\u0065 \u006d\u0063\u0069\u0064 \u006e\u0075\u006d\u0062e\u0072\u002e\u0020\u0049\u0074\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020\u0062\u0065\u0020\u0073p\u006c\u0069\u0074\u002e");
continue ;};_cegd :=_dfded ._gggb [0]._dbcbg [0]._aaac ;_edcdf [_cegd ]=append (_edcdf [_cegd ],_dfded );};};};};return _edcdf ;};func (_dede *shapesState )addPoint (_afbgd ,_fffd float64 ){_agag :=_dede .establishSubpath ();_ddaf :=_dede .devicePoint (_afbgd ,_fffd );
if _agag ==nil {_dede ._gfde =true ;_dede ._ggbb =_ddaf ;}else {_agag .add (_ddaf );};};func _bgab (_gffc []*wordBag )[]*wordBag {if len (_gffc )<=1{return _gffc ;};if _bdcec {_fbe .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");
};_d .Slice (_gffc ,func (_ggec ,_efag int )bool {_aeb ,_cfda :=_gffc [_ggec ],_gffc [_efag ];_gcbad :=_aeb .Width ()*_aeb .Height ();_fbbg :=_cfda .Width ()*_cfda .Height ();if _gcbad !=_fbbg {return _gcbad > _fbbg ;};if _aeb .Height ()!=_cfda .Height (){return _aeb .Height ()> _cfda .Height ();
};return _ggec < _efag ;});var _gbdbd []*wordBag ;_ebbb :=make (intSet );for _dgc :=0;_dgc < len (_gffc );_dgc ++{if _ebbb .has (_dgc ){continue ;};_fead :=_gffc [_dgc ];for _beef :=_dgc +1;_beef < len (_gffc );_beef ++{if _ebbb .has (_dgc ){continue ;
};_bfab :=_gffc [_beef ];_cgecb :=_fead .PdfRectangle ;_cgecb .Llx -=_fead ._effd ;if _dadb (_cgecb ,_bfab .PdfRectangle ){_fead .absorb (_bfab );_ebbb .add (_beef );};};_gbdbd =append (_gbdbd ,_fead );};if len (_gffc )!=len (_gbdbd )+len (_ebbb ){_fbe .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_gffc ),len (_gbdbd ),len (_ebbb ));
};return _gbdbd ;};func (_gfcf *textObject )reset (){_gfcf ._bfa =_ee .IdentityMatrix ();_gfcf ._fgf =_ee .IdentityMatrix ();_gfcf ._gae =nil ;};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_cgc *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _cgc ==nil {return nil ,_b .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_cd .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_addc :=len (_cgc ._cff );if _addc ==0{return _cgc ,nil ;};if start < _cgc ._cff [0].Offset {start =_cgc ._cff [0].Offset ;};if end > _cgc ._cff [_addc -1].Offset +1{end =_cgc ._cff [_addc -1].Offset +1;};_cgb :=_d .Search (_addc ,func (_eaa int )bool {return _cgc ._cff [_eaa ].Offset +len (_cgc ._cff [_eaa ].Text )-1>=start });
if !(0<=_cgb &&_cgb < _addc ){_gadc :=_cd .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_cgb ,_addc ,_cgc ._cff [0],_cgc ._cff [_addc -1]);
return nil ,_gadc ;};_afg :=_d .Search (_addc ,func (_febc int )bool {return _cgc ._cff [_febc ].Offset > end -1});if !(0<=_afg &&_afg < _addc ){_eedc :=_cd .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_afg ,_addc ,_cgc ._cff [0],_cgc ._cff [_addc -1]);
return nil ,_eedc ;};if _afg <=_cgb {return nil ,_cd .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_cgb ,_afg );
};return &TextMarkArray {_cff :_cgc ._cff [_cgb :_afg ]},nil ;};func (_bcdac intSet )has (_ddacc int )bool {_ ,_dcga :=_bcdac [_ddacc ];return _dcga };type textResult struct{_bgde PageText ;_adfb int ;_fbd int ;};var _dc =false ;func (_dbff rulingList )sort (){_d .Slice (_dbff ,_dbff .comp )};
func _agae (_agea string ,_abde []rulingList ){_fbe .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_abde ),_agea );for _bfgb ,_dcddf :=range _abde {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bfgb ,_dcddf .String ());
};};func (_cdedf *ruling )alignsPrimary (_aecg *ruling )bool {return _cdedf ._dbeg ==_aecg ._dbeg &&_c .Abs (_cdedf ._befa -_aecg ._befa )< _gada *0.5;};func (_efc *textObject )setCharSpacing (_feaa float64 ){if _efc ==nil {return ;};_efc ._geeg ._adbb =_feaa ;
if _fcfc {_fbe .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_feaa ,_efc ._geeg .String ());};};func _gffe (_bbg *_aa .ContentStreamOperation )(float64 ,error ){if len (_bbg .Params )!=1{_fga :=_b .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_bbg .Operand ,1,len (_bbg .Params ),_bbg .Params );
return 0.0,_fga ;};return _ga .GetNumberAsFloat (_bbg .Params [0]);};const (_fcba =true ;_fdaga =true ;_cgdgee =true ;_egae =false ;_ecea =false ;_abdd =6;_ecgc =3.0;_dcfd =200;_bacdf =true ;_bddc =true ;_ebd =true ;_bcf =true ;_fagb =false ;);func _bffc (_fagee map[int ][]float64 ){if len (_fagee )<=1{return ;
};_degee :=_begf (_fagee );if _dgfg {_fbe .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_degee );};var _cade ,_fdff int ;for _cade ,_fdff =range _degee {if _fagee [_fdff ]!=nil {break ;};};for _adadb ,_dddgb :=range _degee [_cade :]{_eabdbb :=_fagee [_dddgb ];
if _eabdbb ==nil {continue ;};if _dgfg {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_cade +_adadb ,_fdff ,_dddgb );};_gbbd :=_fagee [_dddgb ];if _gbbd [len (_gbbd )-1]> _eabdbb [0]{_gbbd [len (_gbbd )-1]=_eabdbb [0];
_fagee [_fdff ]=_gbbd ;};_fdff =_dddgb ;};};func (_gacfe rectRuling )checkWidth (_beccf ,_fbda float64 )(float64 ,bool ){_afbe :=_fbda -_beccf ;_eefcg :=_afbe <=_gada ;return _afbe ,_eefcg ;};func _fbbfd (_ccecbd float64 )bool {return _c .Abs (_ccecbd )< _gada };
func (_bgefa gridTiling )complete ()bool {for _ ,_fdeb :=range _bgefa ._dagd {for _ ,_bagb :=range _fdeb {if !_bagb .complete (){return false ;};};};return true ;};func (_aeae lineRuling )yMean ()float64 {return 0.5*(_aeae ._bcfbf .Y +_aeae ._bccb .Y )};
type rulingList []*ruling ;func _cggg (_agaeg map[float64 ]map[float64 ]gridTile )[]float64 {_caeg :=make ([]float64 ,0,len (_agaeg ));for _aagf :=range _agaeg {_caeg =append (_caeg ,_aagf );};_d .Float64s (_caeg );_bgeeb :=len (_caeg );for _fbbcc :=0;
_fbbcc < _bgeeb /2;_fbbcc ++{_caeg [_fbbcc ],_caeg [_bgeeb -1-_fbbcc ]=_caeg [_bgeeb -1-_fbbcc ],_caeg [_fbbcc ];};return _caeg ;};

// Text returns the extracted page text.
func (_dfbc PageText )Text ()string {return _dfbc ._fdag };

// Append appends `mark` to the mark array.
func (_aga *TextMarkArray )Append (mark TextMark ){_aga ._cff =append (_aga ._cff ,mark )};func (_ceabd *textTable )getDown ()paraList {_ggacad :=make (paraList ,_ceabd ._dbdfe );for _dfcg :=0;_dfcg < _ceabd ._dbdfe ;_dfcg ++{_fdcdd :=_ceabd .get (_dfcg ,_ceabd ._cdgcb -1)._gabb ;
if _fdcdd .taken (){return nil ;};_ggacad [_dfcg ]=_fdcdd ;};for _bdbg :=0;_bdbg < _ceabd ._dbdfe -1;_bdbg ++{if _ggacad [_bdbg ]._bfgc !=_ggacad [_bdbg +1]{return nil ;};};return _ggacad ;};func (_ccecb paraList )log (_eddfe string ){if !_abcg {return ;
};_fbe .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_eddfe ,len (_ccecb ));for _afcce ,_dggd :=range _ccecb {if _dggd ==nil {continue ;
};_agaf :=_dggd .text ();_eabd :="\u0020\u0020";if _dggd ._ffdf !=nil {_eabd =_cd .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_dggd ._ffdf ._dbdfe ,_dggd ._ffdf ._cdgcb );};_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_afcce ,_dggd .PdfRectangle ,_eabd ,_ggaa (_agaf ,50));
};};func (_efgd *ruling )encloses (_gdcf ,_dgcf float64 )bool {return _efgd ._fcbf -_gccb <=_gdcf &&_dgcf <=_efgd ._ddgdc +_gccb ;};func (_cdfg *stateStack )pop ()*textState {if _cdfg .empty (){return nil ;};_bec :=*(*_cdfg )[len (*_cdfg )-1];*_cdfg =(*_cdfg )[:len (*_cdfg )-1];
return &_bec ;};func _ffac (_cfadc float64 )bool {return _c .Abs (_cfadc )< _gdab };func _cdfge (_gbdd []*textMark ,_fccf _ce .PdfRectangle ,_ffdcg rulingList ,_fdbd []gridTiling ,_ccab bool )paraList {_fbe .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_gbdd ),_fccf );
if len (_gbdd )==0{return nil ;};_bdaff :=_fbfe (_gbdd ,_fccf );if len (_bdaff )==0{return nil ;};_ffdcg .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_cfdc ,_cbcc :=_ffdcg .vertsHorzs ();_efbgb :=_dacc (_bdaff ,_fccf .Ury ,_cfdc ,_cbcc );
_cecfb :=_dfggg (_efbgb ,_fccf .Ury ,_cfdc ,_cbcc );_cecfb =_bgab (_cecfb );_gcbae :=make (paraList ,0,len (_cecfb ));for _ ,_cedgf :=range _cecfb {_efcb :=_cedgf .arrangeText ();if _efcb !=nil {_gcbae =append (_gcbae ,_efcb );};};if !_ccab &&len (_gcbae )>=_fca {_gcbae =_gcbae .extractTables (_fdbd );
};_gcbae .sortReadingOrder ();if !_ccab {_gcbae .sortTopoOrder ();};_gcbae .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _gcbae ;};func (_cceeb rulingList )primaries ()[]float64 {_abgbb :=make (map[float64 ]struct{},len (_cceeb ));
for _ ,_bedgd :=range _cceeb {_abgbb [_bedgd ._befa ]=struct{}{};};_gfegg :=make ([]float64 ,len (_abgbb ));_bccf :=0;for _gbaed :=range _abgbb {_gfegg [_bccf ]=_gbaed ;_bccf ++;};_d .Float64s (_gfegg );return _gfegg ;};func (_aefd *structTreeRoot )parseStructTreeRoot (_fgccf _ga .PdfObject ){if _fgccf !=nil {_aggb ,_dbbc :=_ga .GetDict (_fgccf );
if !_dbbc {_fbe .Log .Debug ("\u0070\u0061\u0072s\u0065\u0053\u0074\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u003a\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079\u0020\u006eo\u0074\u0020\u0066\u006f\u0075\u006e\u0064\u002e");
};K :=_aggb .Get ("\u004b");_eacb :=_aggb .Get ("\u0054\u0079\u0070\u0065").String ();var _dddd *_ga .PdfObjectArray ;switch _afae :=K .(type ){case *_ga .PdfObjectArray :_dddd =_afae ;case *_ga .PdfObjectReference :_dddd =_ga .MakeArray (K );};_eecb :=[]structElement {};
for _ ,_faa :=range _dddd .Elements (){_eaefa :=&structElement {};_eaefa .parseStructElement (_faa );_eecb =append (_eecb ,*_eaefa );};_aefd ._cffd =_eecb ;_aefd ._bcdb =_eacb ;};};func (_eagc paraList )tables ()[]TextTable {var _gadd []TextTable ;if _dgfg {_fbe .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_ecge :=range _eagc {_agde :=_ecge ._ffdf ;if _agde !=nil &&_agde .isExportable (){_gadd =append (_gadd ,_agde .toTextTable ());};};return _gadd ;};func (_cba *textObject )renderText (_edbef _ga .PdfObject ,_gagb []byte ,_caed int )error {if _cba ._aec {_fbe .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_ebcc :=_cba .getCurrentFont ();_eed :=_ebcc .BytesToCharcodes (_gagb );_fcdd ,_bcca ,_gbcc :=_ebcc .CharcodesToStrings (_eed );if _gbcc > 0{_fbe .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_bcca ,_gbcc );
};_cba ._geeg ._egac +=_bcca ;_cba ._geeg ._bbe +=_gbcc ;_aaea :=_cba ._geeg ;_ddd :=_aaea ._eab ;_bab :=_aaea ._adgf /100.0;_gbfe :=_efda ;if _ebcc .Subtype ()=="\u0054\u0079\u0070e\u0033"{_gbfe =1;};_aeca ,_cfdg :=_ebcc .GetRuneMetrics (' ');if !_cfdg {_aeca ,_cfdg =_ebcc .GetCharMetrics (32);
};if !_cfdg {_aeca ,_ =_ce .DefaultFont ().GetRuneMetrics (' ');};_ceef :=_aeca .Wx *_gbfe ;_fbe .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_ceef ,_fcdd ,_ebcc ,_ddd );
_afca :=_ee .NewMatrix (_ddd *_bab ,0,0,_ddd ,0,_aaea ._gbfa );if _fcfc {_fbe .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_eed ),_eed ,_fcdd );
};_fbe .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_eed ),_eed ,len (_fcdd ));_aede :=_cba .getFillColor ();
_baac :=_cba .getStrokeColor ();for _abab ,_efd :=range _fcdd {_gea :=[]rune (_efd );if len (_gea )==1&&_gea [0]=='\x00'{continue ;};_bcgf :=_eed [_abab ];_fbg :=_cba ._dbf .CTM .Mult (_cba ._bfa ).Mult (_afca );_fge :=0.0;if len (_gea )==1&&_gea [0]==32{_fge =_aaea ._dafg ;
};_ceb ,_gdfb :=_ebcc .GetCharMetrics (_bcgf );if !_gdfb {_fbe .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_bcgf ,_gea ,_gea ,_ebcc );
return _cd .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_ebcc .String (),_bcgf );};_efcg :=_ee .Point {X :_ceb .Wx *_gbfe ,Y :_ceb .Wy *_gbfe };
_bacg :=_ee .Point {X :(_efcg .X *_ddd +_fge )*_bab };_fdf :=_ee .Point {X :(_efcg .X *_ddd +_aaea ._adbb +_fge )*_bab };if _fcfc {_fbe .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_ddd ,_aaea ._adbb ,_aaea ._dafg ,_bab );
_fbe .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_efcg ,_bacg ,_fdf );};_eadd :=_gfe (_bacg );_ddfe :=_gfe (_fdf );_ceae :=_cba ._dbf .CTM .Mult (_cba ._bfa ).Mult (_eadd );
if _cccbg {_fbe .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_cba ._dbf .CTM ,_cba ._bfa ,_ddfe ,_fabc (_cba ._dbf .CTM .Mult (_cba ._bfa ).Mult (_ddfe )),_eadd ,_ceae ,_fabc (_ceae ));
};_abgc ,_cdee :=_cba .newTextMark (_cf .ExpandLigatures (_gea ),_fbg ,_fabc (_ceae ),_c .Abs (_ceef *_fbg .ScalingFactorX ()),_ebcc ,_cba ._geeg ._adbb ,_aede ,_baac ,_edbef ,_fcdd ,_abab ,_caed );if !_cdee {_fbe .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _ebcc ==nil {_fbe .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _ebcc .Encoder ()==nil {_fbe .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_ebcc );
}else {if _becc ,_ddbb :=_ebcc .Encoder ().CharcodeToRune (_bcgf );_ddbb {_abgc ._edgdb =string (_becc );};};_fbe .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_abab ,_bcgf ,_abgc ,_fbg );
_cba ._gae =append (_cba ._gae ,&_abgc );_cba ._bfa .Concat (_ddfe );};return nil ;};func (_fbaf compositeCell )split (_dfce ,_baag []float64 )*textTable {_dfffg :=len (_dfce )+1;_aegf :=len (_baag )+1;if _dgfg {_fbe .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_aegf ,_dfffg ,_fbaf ,_dfce ,_baag );
_cd .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_fbaf .paraList ));for _fgacf ,_cgag :=range _fbaf .paraList {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fgacf ,_cgag .String ());};
_cd .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_fbaf .lines ()));for _fbgf ,_bddd :=range _fbaf .lines (){_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbgf ,_bddd );};};_dfce =_gfbe (_dfce ,_fbaf .Ury ,_fbaf .Lly );
_baag =_gfbe (_baag ,_fbaf .Llx ,_fbaf .Urx );_aefde :=make (map[uint64 ]*textPara ,_aegf *_dfffg );_egdf :=textTable {_dbdfe :_aegf ,_cdgcb :_dfffg ,_acabfd :_aefde };_ggba :=_fbaf .paraList ;_d .Slice (_ggba ,func (_fadc ,_dcee int )bool {_dccf ,_gaad :=_ggba [_fadc ],_ggba [_dcee ];
_fbaff ,_agaa :=_dccf .Lly ,_gaad .Lly ;if _fbaff !=_agaa {return _fbaff < _agaa ;};return _dccf .Llx < _gaad .Llx ;});_eebb :=make (map[uint64 ]_ce .PdfRectangle ,_aegf *_dfffg );for _agafb ,_eaee :=range _dfce [1:]{_aaeb :=_dfce [_agafb ];for _aeafa ,_ecffa :=range _baag [1:]{_dgba :=_baag [_aeafa ];
_eebb [_egdege (_aeafa ,_agafb )]=_ce .PdfRectangle {Llx :_dgba ,Urx :_ecffa ,Lly :_eaee ,Ury :_aaeb };};};if _dgfg {_fbe .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");
_cd .Printf ("\u0020\u0020\u0020\u0020");for _gfdae :=0;_gfdae < _aegf ;_gfdae ++{_cd .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_gfdae );};_cd .Println ();for _gcfb :=0;_gcfb < _dfffg ;_gcfb ++{_cd .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_gcfb );
for _bfgca :=0;_bfgca < _aegf ;_bfgca ++{_cd .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_eebb [_egdege (_bfgca ,_gcfb )]);};_cd .Println ();};};_ebdag :=func (_cfgeg *textLine )(int ,int ){for _adbe :=0;_adbe < _dfffg ;_adbe ++{for _ggbdb :=0;_ggbdb < _aegf ;
_ggbdb ++{if _dadb (_eebb [_egdege (_ggbdb ,_adbe )],_cfgeg .PdfRectangle ){return _ggbdb ,_adbe ;};};};return -1,-1;};_ebcgg :=make (map[uint64 ][]*textLine ,_aegf *_dfffg );for _ ,_gdcd :=range _ggba .lines (){_afea ,_ddab :=_ebdag (_gdcd );if _afea < 0{continue ;
};_ebcgg [_egdege (_afea ,_ddab )]=append (_ebcgg [_egdege (_afea ,_ddab )],_gdcd );};for _dcbg :=0;_dcbg < len (_dfce )-1;_dcbg ++{_gacb :=_dfce [_dcbg ];_gfeg :=_dfce [_dcbg +1];for _gbaee :=0;_gbaee < len (_baag )-1;_gbaee ++{_ceda :=_baag [_gbaee ];
_bfdf :=_baag [_gbaee +1];_cagf :=_ce .PdfRectangle {Llx :_ceda ,Urx :_bfdf ,Lly :_gfeg ,Ury :_gacb };_gcefb :=_ebcgg [_egdege (_gbaee ,_dcbg )];if len (_gcefb )==0{continue ;};_fcabf :=_cdcb (_cagf ,_gcefb );_egdf .put (_gbaee ,_dcbg ,_fcabf );};};return &_egdf ;
};func (_fegb rulingList )comp (_daeaa ,_bdcf int )bool {_fdfab ,_aegca :=_fegb [_daeaa ],_fegb [_bdcf ];_ebbgc ,_dadf :=_fdfab ._dbeg ,_aegca ._dbeg ;if _ebbgc !=_dadf {return _ebbgc > _dadf ;};if _ebbgc ==_feebd {return false ;};_fbed :=func (_ebde bool )bool {if _ebbgc ==_bggf {return _ebde ;
};return !_ebde ;};_fdegc ,_dfed :=_fdfab ._befa ,_aegca ._befa ;if _fdegc !=_dfed {return _fbed (_fdegc > _dfed );};_fdegc ,_dfed =_fdfab ._fcbf ,_aegca ._fcbf ;if _fdegc !=_dfed {return _fbed (_fdegc < _dfed );};return _fbed (_fdfab ._ddgdc < _aegca ._ddgdc );
};

// String returns a description of `l`.
func (_aag *textLine )String ()string {return _cd .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_aag ._fdgf ,_aag .PdfRectangle ,_aag ._cfaa ,_aag .text ());
};func _ebefa (_aecafd ,_dcgcg _ee .Point )bool {_eefe :=_c .Abs (_aecafd .X -_dcgcg .X );_daca :=_c .Abs (_aecafd .Y -_dcgcg .Y );return _adgba (_daca ,_eefe );};func _ccfg (_bbca *list )[]*textLine {for _ ,_dcaf :=range _bbca ._ffc {switch _dcaf ._bdfa {case "\u004c\u0042\u006fd\u0079":if len (_dcaf ._gbacf )!=0{return _dcaf ._gbacf ;
};return _ccfg (_dcaf );case "\u0053\u0070\u0061\u006e":return _dcaf ._gbacf ;case "I\u006e\u006c\u0069\u006e\u0065\u0053\u0068\u0061\u0070\u0065":return _dcaf ._gbacf ;};};return nil ;};func (_cgda *shapesState )lineTo (_gbbag ,_fbf float64 ){if _dbbd {_fbe .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_gbbag ,_fbf ,_cgda .devicePoint (_gbbag ,_fbf ));
};_cgda .addPoint (_gbbag ,_fbf );};type gridTiling struct{_ce .PdfRectangle ;_gebbd []float64 ;_eaae []float64 ;_dagd map[float64 ]map[float64 ]gridTile ;};func _gfe (_eade _ee .Point )_ee .Matrix {return _ee .TranslationMatrix (_eade .X ,_eade .Y )};
func _gbbaga (_bfcd *textLine ,_fdfd []*textLine ,_aacbeb []float64 ,_fggg ,_bagg float64 )[]*textLine {_dade :=[]*textLine {};for _ ,_cdaa :=range _fdfd {if _cdaa ._fdgf >=_fggg {if _bagg !=-1&&_cdaa ._fdgf < _bagg {if _cdaa .text ()!=_bfcd .text (){if _c .Round (_cdaa .Llx )< _c .Round (_bfcd .Llx ){break ;
};_dade =append (_dade ,_cdaa );};}else if _bagg ==-1{if _cdaa ._fdgf ==_bfcd ._fdgf {if _cdaa .text ()!=_bfcd .text (){_dade =append (_dade ,_cdaa );};continue ;};_gcefa :=_dgab (_bfcd ,_fdfd ,_aacbeb );if _gcefa !=-1&&_cdaa ._fdgf <=_gcefa {_dade =append (_dade ,_cdaa );
};};};};return _dade ;};type shapesState struct{_cfcc _ee .Matrix ;_cdd _ee .Matrix ;_ggdf []*subpath ;_gfde bool ;_ggbb _ee .Point ;_edcc *textObject ;};func _dgag (_abba ,_dfeg _ce .PdfRectangle )(_ce .PdfRectangle ,bool ){if !_dfff (_abba ,_dfeg ){return _ce .PdfRectangle {},false ;
};return _ce .PdfRectangle {Llx :_c .Max (_abba .Llx ,_dfeg .Llx ),Urx :_c .Min (_abba .Urx ,_dfeg .Urx ),Lly :_c .Max (_abba .Lly ,_dfeg .Lly ),Ury :_c .Min (_abba .Ury ,_dfeg .Ury )},true ;};const (_cdcc markKind =iota ;_cedaa ;_bddgf ;_aggfg ;);func (_afbf *wordBag )pullWord (_baba *textWord ,_bfec int ,_bdce map[int ]map[*textWord ]struct{}){_afbf .PdfRectangle =_fgfbb (_afbf .PdfRectangle ,_baba .PdfRectangle );
if _baba ._fbdaf > _afbf ._effd {_afbf ._effd =_baba ._fbdaf ;};_afbf ._effb [_bfec ]=append (_afbf ._effb [_bfec ],_baba );_bdce [_bfec ][_baba ]=struct{}{};};func (_fgca *textTable )compositeColCorridors ()map[int ][]float64 {_cdedc :=make (map[int ][]float64 ,_fgca ._dbdfe );
if _dgfg {_fbe .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_fgca ._dbdfe );};for _bfcee :=0;_bfcee < _fgca ._dbdfe ;_bfcee ++{_cdedc [_bfcee ]=nil ;
};return _cdedc ;};func (_gfaf paraList )readBefore (_eeae []int ,_eefg ,_bede int )bool {_afcg ,_gaff :=_gfaf [_eefg ],_gfaf [_bede ];if _dbbdc (_afcg ,_gaff )&&_afcg .Lly > _gaff .Lly {return true ;};if !(_afcg ._bdfg .Urx < _gaff ._bdfg .Llx ){return false ;
};_gfgd ,_baebc :=_afcg .Lly ,_gaff .Lly ;if _gfgd > _baebc {_baebc ,_gfgd =_gfgd ,_baebc ;};_ggcg :=_c .Max (_afcg ._bdfg .Llx ,_gaff ._bdfg .Llx );_bfgg :=_c .Min (_afcg ._bdfg .Urx ,_gaff ._bdfg .Urx );_fage :=_gfaf .llyRange (_eeae ,_gfgd ,_baebc );
for _ ,_dacb :=range _fage {if _dacb ==_eefg ||_dacb ==_bede {continue ;};_acd :=_gfaf [_dacb ];if _acd ._bdfg .Llx <=_bfgg &&_ggcg <=_acd ._bdfg .Urx {return false ;};};return true ;};func (_fbfc rulingList )connections (_cfec map[int ]intSet ,_ffcg int )intSet {_gafd :=make (intSet );
_fbfd :=make (intSet );var _dbfa func (int );_dbfa =func (_fdfa int ){if !_fbfd .has (_fdfa ){_fbfd .add (_fdfa );for _deaec :=range _fbfc {if _cfec [_deaec ].has (_fdfa ){_gafd .add (_deaec );};};for _aaeg :=range _fbfc {if _gafd .has (_aaeg ){_dbfa (_aaeg );
};};};};_dbfa (_ffcg );return _gafd ;};func (_ggffc *textPara )taken ()bool {return _ggffc ==nil ||_ggffc ._ceed };func (_bdaed compositeCell )hasLines (_adecd []*textLine )bool {for _ffba ,_efga :=range _adecd {_gbaea :=_dfff (_bdaed .PdfRectangle ,_efga .PdfRectangle );
if _dgfg {_cd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_gbaea ,_ffba ,len (_adecd ));_cd .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_bdaed );
_cd .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_efga );};if _gbaea {return true ;};};return false ;};func _eddd (_cebec []TextMark ,_aagca *int ,_ebfc TextMark )[]TextMark {_ebfc .Offset =*_aagca ;_cebec =append (_cebec ,_ebfc );
*_aagca +=len (_ebfc .Text );return _cebec ;};func _egad (_eege _ce .PdfRectangle )textState {return textState {_adgf :100,_ecg :RenderModeFill ,_ecab :_eege };};func (_eeee rectRuling )asRuling ()(*ruling ,bool ){_bfbd :=ruling {_dbeg :_eeee ._dgac ,Color :_eeee .Color ,_ccga :_bddgf };
switch _eeee ._dgac {case _edcaf :_bfbd ._befa =0.5*(_eeee .Llx +_eeee .Urx );_bfbd ._fcbf =_eeee .Lly ;_bfbd ._ddgdc =_eeee .Ury ;_acbg ,_ffbaf :=_eeee .checkWidth (_eeee .Llx ,_eeee .Urx );if !_ffbaf {if _fcgf {_fbe .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_eeee );
};return nil ,false ;};_bfbd ._bfade =_acbg ;case _bggf :_bfbd ._befa =0.5*(_eeee .Lly +_eeee .Ury );_bfbd ._fcbf =_eeee .Llx ;_bfbd ._ddgdc =_eeee .Urx ;_eadaa ,_eead :=_eeee .checkWidth (_eeee .Lly ,_eeee .Ury );if !_eead {if _fcgf {_fbe .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_eeee );
};return nil ,false ;};_bfbd ._bfade =_eadaa ;default:_fbe .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_eeee ._dgac );return nil ,false ;};return &_bfbd ,true ;};func (_agce *textObject )showText (_adba _ga .PdfObject ,_ecc []byte ,_dbg int )error {return _agce .renderText (_adba ,_ecc ,_dbg );
};func (_deecg *textTable )toTextTable ()TextTable {if _dgfg {_fbe .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_deecg ._dbdfe ,_deecg ._cdgcb );};_cgca :=make ([][]TableCell ,_deecg ._cdgcb );
for _ecaf :=0;_ecaf < _deecg ._cdgcb ;_ecaf ++{_cgca [_ecaf ]=make ([]TableCell ,_deecg ._dbdfe );for _dacbc :=0;_dacbc < _deecg ._dbdfe ;_dacbc ++{_acde :=_deecg .get (_dacbc ,_ecaf );if _acde ==nil {continue ;};if _dgfg {_cd .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_dacbc ,_ecaf ,_acde );
};_cgca [_ecaf ][_dacbc ].Text =_acde .text ();_badd :=0;_cgca [_ecaf ][_dacbc ].Marks ._cff =_acde .toTextMarks (&_badd );};};_daaeg :=TextTable {W :_deecg ._dbdfe ,H :_deecg ._cdgcb ,Cells :_cgca };_daaeg .PdfRectangle =_deecg .bbox ();return _daaeg ;
};

// String returns a description of `k`.
func (_daee rulingKind )String ()string {_acag ,_caeb :=_fbace [_daee ];if !_caeb {return _cd .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_daee );};return _acag ;};func (_fecd *subpath )clear (){*_fecd =subpath {}};
func (_bcce rulingList )aligned ()bool {if len (_bcce )< 2{return false ;};_affb :=make (map[*ruling ]int );_affb [_bcce [0]]=0;for _ ,_bacc :=range _bcce [1:]{_cdefa :=false ;for _fbef :=range _affb {if _bacc .gridIntersecting (_fbef ){_affb [_fbef ]++;
_cdefa =true ;break ;};};if !_cdefa {_affb [_bacc ]=0;};};_gbbaf :=0;for _ ,_ceaee :=range _affb {if _ceaee ==0{_gbbaf ++;};};_dccd :=float64 (_gbbaf )/float64 (len (_bcce ));_fffdf :=_dccd <=1.0-_bdafa ;if _ggac {_fbe .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_fffdf ,_dccd ,_gbbaf ,len (_bcce ),_bcce .String ());
};return _fffdf ;};

// Text gets the extracted text contained in `l`.
func (_dfffe *list )Text ()string {_ccgfd :=&_ff .Builder {};_eeba :="";_fgabc (_dfffe ,_ccgfd ,&_eeba );return _ccgfd .String ();};

// ExtractFonts returns all font information from the page extractor, including
// font name, font type, the raw data of the embedded font file (if embedded), font descriptor and more.
//
// The argument `previousPageFonts` is used when trying to build a complete font catalog for multiple pages or the entire document.
// The entries from `previousPageFonts` are added to the returned result unless already included in the page, i.e. no duplicate entries.
//
// NOTE: If previousPageFonts is nil, all fonts from the page will be returned. Use it when building up a full list of fonts for a document or page range.
func (_ec *Extractor )ExtractFonts (previousPageFonts *PageFonts )(*PageFonts ,error ){_aae :=PageFonts {};_cfc :=_aae .extractPageResourcesToFont (_ec ._eb );if _cfc !=nil {return nil ,_cfc ;};if previousPageFonts !=nil {for _ ,_cea :=range previousPageFonts .Fonts {if !_gebb (_aae .Fonts ,_cea .FontName ){_aae .Fonts =append (_aae .Fonts ,_cea );
};};};return &PageFonts {Fonts :_aae .Fonts },nil ;};func (_cdga *wordBag )sort (){for _ ,_dceg :=range _cdga ._effb {_d .Slice (_dceg ,func (_fag ,_dbcd int )bool {return _cgfg (_dceg [_fag ],_dceg [_dbcd ])< 0});};};func _dgab (_bfad *textLine ,_afgd []*textLine ,_deac []float64 )float64 {var _bbaca float64 =-1;
for _ ,_gbef :=range _afgd {if _gbef ._fdgf > _bfad ._fdgf {if _c .Round (_gbef .Llx )>=_c .Round (_bfad .Llx ){_bbaca =_gbef ._fdgf ;}else {break ;};};};return _bbaca ;};func (_gbcfe gridTile )numBorders ()int {_egef :=0;if _gbcfe ._facfe {_egef ++;};
if _gbcfe ._bbdcd {_egef ++;};if _gbcfe ._adbg {_egef ++;};if _gbcfe ._dagdb {_egef ++;};return _egef ;};func _cdcb (_dgcc _ce .PdfRectangle ,_acff []*textLine )*textPara {return &textPara {PdfRectangle :_dgcc ,_aebf :_acff };};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_ce .PdfPage )(*Extractor ,error ){return NewWithOptions (page ,nil )};func (_cbgd paraList )inTile (_gbadf gridTile )paraList {var _egabf paraList ;for _ ,_cdfce :=range _cbgd {if _gbadf .contains (_cdfce .PdfRectangle ){_egabf =append (_egabf ,_cdfce );
};};if _dgfg {_cd .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_gbadf ,len (_egabf ));for _cacfbc ,_afbfe :=range _egabf {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cacfbc ,_afbfe );
};_cd .Println ("");};return _egabf ;};func _fabc (_adgb _ee .Matrix )_ee .Point {_fbac ,_baaf :=_adgb .Translation ();return _ee .Point {X :_fbac ,Y :_baaf };};func (_fgdea *structTreeRoot )buildList (_gbad map[int ][]*textLine ,_abbg _ga .PdfObject )[]*list {if _fgdea ==nil {_fbe .Log .Debug ("\u0062\u0075\u0069\u006c\u0064\u004c\u0069\u0073\u0074\u003a\u0020t\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0069\u0073 \u006e\u0069\u006c");
return nil ;};var _fdagd *structElement ;_bcba :=[]structElement {};if len (_fgdea ._cffd )==1{_efcde :=_fgdea ._cffd [0]._edff ;if _efcde =="\u0044\u006f\u0063\u0075\u006d\u0065\u006e\u0074"||_efcde =="\u0053\u0065\u0063\u0074"||_efcde =="\u0050\u0061\u0072\u0074"||_efcde =="\u0044\u0069\u0076"||_efcde =="\u0041\u0072\u0074"{_fdagd =&_fgdea ._cffd [0];
};}else {_fdagd =&structElement {_ecae :_fgdea ._cffd ,_edff :_fgdea ._bcdb };};if _fdagd ==nil {_fbe .Log .Debug ("\u0062\u0075\u0069\u006cd\u004c\u0069\u0073\u0074\u003a\u0020\u0074\u006f\u0070\u0045l\u0065m\u0065\u006e\u0074\u0020\u0069\u0073\u0020n\u0069\u006c");
return nil ;};for _ ,_gadgb :=range _fdagd ._ecae {if _gadgb ._edff =="\u004c"{_bcba =append (_bcba ,_gadgb );}else if _gadgb ._edff =="\u0054\u0061\u0062l\u0065"{_cbe :=_cabga (_gadgb );_bcba =append (_bcba ,_cbe ...);};};_dadc :=_dgce (_bcba ,_gbad ,_abbg );
var _eaaa []*list ;for _ ,_gdff :=range _dadc {_gfea :=_egfe (_gdff );_eaaa =append (_eaaa ,_gfea ...);};return _eaaa ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func (_afda *PageText )computeViews (){_eaga :=_afda .getParagraphs ();
_agcg :=new (_e .Buffer );_eaga .writeText (_agcg );_afda ._fdag =_agcg .String ();_afda ._bbgf =_eaga .toTextMarks ();_afda ._bagc =_eaga .tables ();if _dgfg {_fbe .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_afda ._bagc ));
};};func (_ffdab *textMark )inDiacriticArea (_ecec *textMark )bool {_cdffg :=_ffdab .Llx -_ecec .Llx ;_adea :=_ffdab .Urx -_ecec .Urx ;_fcfd :=_ffdab .Lly -_ecec .Lly ;return _c .Abs (_cdffg +_adea )< _ffdab .Width ()*_dece &&_c .Abs (_fcfd )< _ffdab .Height ()*_dece ;
};var _edec string ="\u0028\u003f\u0069\u0029\u005e\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028?\u003a\u0044\u007cM\u0029\u007c\u0044\u003f\u0043{\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028\u003f\u003a\u004c\u007c\u0043\u0029\u007cL\u003f\u0058\u007b\u0030\u002c\u0033}\u0029\u0028\u0049\u0028\u003f\u003a\u0056\u007c\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u005c\u0029\u007c\u005c\u002e\u0029\u007c\u005e\u005c\u0028\u0028\u004d\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0043\u0028\u003f\u003aD\u007cM\u0029\u007c\u0044\u003f\u0043\u007b\u0030\u002c\u0033\u007d\u0029\u0028\u0058\u0028?\u003a\u004c\u007c\u0043\u0029\u007c\u004c?\u0058\u007b0\u002c\u0033\u007d\u0029(\u0049\u0028\u003f\u003a\u0056|\u0058\u0029\u007c\u0056\u003f\u0049\u007b\u0030\u002c\u0033\u007d\u0029\u005c\u0029";


// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_af string ;_eb *_ce .PdfPageResources ;_ge _ce .PdfRectangle ;_geb *_ce .PdfRectangle ;_aee map[string ]fontEntry ;_gc map[string ]textResult ;_gf int64 ;_aed int ;_df *Options ;_cdb *_ga .PdfObject ;_gbb _ga .PdfObject ;};func (_dcd *imageExtractContext )extractXObjectImage (_cgdg *_ga .PdfObjectName ,_bcg _aa .GraphicsState ,_dca *_ce .PdfPageResources )error {_adc ,_ :=_dca .GetXObjectByName (*_cgdg );
if _adc ==nil {return nil ;};_ebc ,_dbe :=_dcd ._fea [_adc ];if !_dbe {_bffd ,_dg :=_dca .GetXObjectImageByName (*_cgdg );if _dg !=nil {return _dg ;};if _bffd ==nil {return nil ;};_gd ,_dg :=_bffd .ToImage ();if _dg !=nil {return _dg ;};var _cef _a .Image ;
if _bffd .SMask !=nil {_cef ,_dg =_bfdab (_bffd .SMask ,_fa .Opaque );if _dg !=nil {_fbe .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};if _cef !=nil {_fece ,_de :=_gd .ToGoImage ();if _de !=nil {return _de ;};_fece =_bbegg (_fece ,_cef );switch _bffd .ColorSpace .String (){case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0049n\u0064\u0065\u0078\u0065\u0064":_gd ,_de =_ce .ImageHandling .NewGrayImageFromGoImage (_fece );
if _de !=nil {return _de ;};default:_gd ,_de =_ce .ImageHandling .NewImageFromGoImage (_fece );if _de !=nil {return _de ;};};};_ebc =&cachedImage {_gfc :_gd ,_cgd :_bffd .ColorSpace };_dcd ._fea [_adc ]=_ebc ;};_gbd :=_ebc ._gfc ;_cc :=_ebc ._cgd ;_cfa ,_cae :=_cc .ImageToRGB (*_gbd );
if _cae !=nil {return _cae ;};_fbe .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_bcg .CTM .String ());_bfe :=ImageMark {Image :&_cfa ,Width :_bcg .CTM .ScalingFactorX (),Height :_bcg .CTM .ScalingFactorY (),Angle :_bcg .CTM .Angle ()};
_bfe .X ,_bfe .Y =_bcg .CTM .Translation ();_dcd ._cdg =append (_dcd ._cdg ,_bfe );_dcd ._gee ++;return nil ;};func (_fgeb *compositeCell )updateBBox (){for _ ,_cfgb :=range _fgeb .paraList {_fgeb .PdfRectangle =_fgfbb (_fgeb .PdfRectangle ,_cfgb .PdfRectangle );
};};func _dddgg (_gfef ,_cbdgd int )int {if _gfef < _cbdgd {return _gfef ;};return _cbdgd ;};func (_eadc *shapesState )fill (_faba *[]pathSection ){_febd :=pathSection {_accg :_eadc ._ggdf ,Color :_eadc ._edcc .getFillColor ()};*_faba =append (*_faba ,_febd );
if _ggac {_gacea :=_febd .bbox ();_cd .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_faba ),len (_febd ._accg ),_eadc ,_febd .Color ,_gacea ,_gacea .Width (),_gacea .Height ());
if _ecff {for _fcga ,_cffa :=range _febd ._accg {_cd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fcga ,_cffa );if _fcga ==10{break ;};};};};};func (_fcgfa *textLine )pullWord (_gfaee *wordBag ,_becce *textWord ,_cgaa int ){_fcgfa .appendWord (_becce );
_gfaee .removeWord (_becce ,_cgaa );};func _edae (_dag func (*wordBag ,*textWord ,float64 )bool ,_egag float64 )func (*wordBag ,*textWord )bool {return func (_dbdb *wordBag ,_ebbdd *textWord )bool {return _dag (_dbdb ,_ebbdd ,_egag )};};

// Options extractor options.
type Options struct{

// DisableDocumentTags specifies whether to use the document tags during list extraction.
DisableDocumentTags bool ;

// ApplyCropBox will extract page text based on page cropbox if set to `true`.
ApplyCropBox bool ;

// UseSimplerExtractionProcess will skip topological text ordering and table processing.
//
// NOTE: While normally the extra processing is beneficial, it can also lead to problems when it does not work.
// Thus it is a flag to allow the user to control this process.
//
// Skipping some extraction processes would also lead to the reduced processing time.
UseSimplerExtractionProcess bool ;};const (_cdcd =false ;_gdaed =false ;_bbega =false ;_cccbg =false ;_dbbd =false ;_fcfc =false ;_cagg =false ;_abcg =false ;_bdcec =false ;_beeff =_bdcec &&true ;_bbb =_beeff &&false ;_acbab =_bdcec &&true ;_dgfg =false ;
_efdac =_dgfg &&false ;_cbae =_dgfg &&true ;_ggac =false ;_ecff =_ggac &&false ;_dagg =_ggac &&false ;_egc =_ggac &&true ;_fcgf =_ggac &&false ;_dba =_ggac &&false ;);

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_gfd PageText )Marks ()*TextMarkArray {return &TextMarkArray {_cff :_gfd ._bbgf }};func (_faee *wordBag )getDepthIdx (_bbafb float64 )int {_fbcc :=_faee .depthIndexes ();_ffag :=_fcggf (_bbafb );if _ffag < _fbcc [0]{return _fbcc [0];};if _ffag > _fbcc [len (_fbcc )-1]{return _fbcc [len (_fbcc )-1];
};return _ffag ;};func _ddfb (_ccbg _ce .PdfRectangle ,_bcegf bounded )float64 {return _ccbg .Ury -_bcegf .bbox ().Lly };func _ggaa (_gbcg string ,_acfb int )string {if len (_gbcg )< _acfb {return _gbcg ;};return _gbcg [:_acfb ];};func (_cfgegc rulingList )log (_egdc string ){if !_ggac {return ;
};_fbe .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_egdc ,_cfgegc .String ());for _fafb ,_dbedb :=range _cfgegc {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fafb ,_dbedb .String ());
};};

// String returns a human readable description of `ss`.
func (_aeff *shapesState )String ()string {return _cd .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_aeff ._ggdf ),_aeff ._gfde );};func (_cebe *PageText )getParagraphs ()paraList {var _abbe rulingList ;
if _ebd {_efa :=_dgfb (_cebe ._eeec );_abbe =append (_abbe ,_efa ...);};if _bcf {_geca :=_fecc (_cebe ._fafa );_abbe =append (_abbe ,_geca ...);};_abbe ,_egeb :=_abbe .toTilings ();var _ababg paraList ;_ecag :=len (_cebe ._ebed );for _fgbf :=0;_fgbf < 360&&_ecag > 0;
_fgbf +=90{_ccca :=make ([]*textMark ,0,len (_cebe ._ebed )-_ecag );for _ ,_fcbb :=range _cebe ._ebed {if _fcbb ._cbfbc ==_fgbf {_ccca =append (_ccca ,_fcbb );};};if len (_ccca )> 0{_abgb :=_cdfge (_ccca ,_cebe ._efdc ,_abbe ,_egeb ,_cebe ._gcef ._gadga );
_ababg =append (_ababg ,_abgb ...);_ecag -=len (_ccca );};};return _ababg ;};func (_caef rulingList )isActualGrid ()(rulingList ,bool ){_cdaf ,_efec :=_caef .augmentGrid ();if !(len (_cdaf )>=_fdde +1&&len (_efec )>=_fgbff +1){if _ggac {_fbe .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_cdaf ),len (_efec ),_fdde +1,_fgbff +1);
};return nil ,false ;};if _ggac {_fbe .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_caef ,len (_cdaf )>=2,len (_efec )>=2,len (_cdaf )>=2&&len (_efec )>=2);
for _eebc ,_gegfe :=range _caef {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_eebc ,_gegfe );};};if _fagb {_adeag ,_fdfb :=_cdaf [0],_cdaf [len (_cdaf )-1];_fgbc ,_fded :=_efec [0],_efec [len (_efec )-1];if !(_fbbfd (_adeag ._befa -_fgbc ._fcbf )&&_fbbfd (_fdfb ._befa -_fgbc ._ddgdc )&&_fbbfd (_fgbc ._befa -_adeag ._ddgdc )&&_fbbfd (_fded ._befa -_adeag ._fcbf )){if _ggac {_fbe .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_adeag ,_fdfb ,_fgbc ,_fded );
};return nil ,false ;};}else {if !_cdaf .aligned (){if _dagg {_fbe .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_cdaf ));
};return nil ,false ;};if !_efec .aligned (){if _ggac {_fbe .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_efec ));
};return nil ,false ;};};_abddc :=append (_cdaf ,_efec ...);return _abddc ,true ;};

// String returns a string describing `pt`.
func (_efbg PageText )String ()string {_dddg :=_cd .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_efbg ._ebed ));_edfe :=[]string {"\u002d"+_dddg };for _ ,_adcc :=range _efbg ._ebed {_edfe =append (_edfe ,_adcc .String ());
};_edfe =append (_edfe ,"\u002b"+_dddg );return _ff .Join (_edfe ,"\u000a");};func (_bagca *textTable )emptyCompositeColumn (_aaad int )bool {for _befc :=0;_befc < _bagca ._cdgcb ;_befc ++{if _cdbaf ,_gcfbd :=_bagca ._bbedb [_egdege (_aaad ,_befc )];_gcfbd {if len (_cdbaf .paraList )> 0{return false ;
};};};return true ;};func (_egfd *wordBag )blocked (_agcd *textWord )bool {if _agcd .Urx < _egfd .Llx {_feceb :=_agbae (_agcd .PdfRectangle );_cdc :=_baec (_egfd .PdfRectangle );if _egfd ._efadd .blocks (_feceb ,_cdc ){if _dba {_fbe .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_agcd ,_egfd );
};return true ;};}else if _egfd .Urx < _agcd .Llx {_cebd :=_agbae (_egfd .PdfRectangle );_dabg :=_baec (_agcd .PdfRectangle );if _egfd ._efadd .blocks (_cebd ,_dabg ){if _dba {_fbe .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_agcd ,_egfd );
};return true ;};};if _agcd .Ury < _egfd .Lly {_dbb :=_aecad (_agcd .PdfRectangle );_aecf :=_fgdd (_egfd .PdfRectangle );if _egfd ._dfbg .blocks (_dbb ,_aecf ){if _dba {_fbe .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_agcd ,_egfd );
};return true ;};}else if _egfd .Ury < _agcd .Lly {_fgac :=_aecad (_egfd .PdfRectangle );_dbcc :=_fgdd (_agcd .PdfRectangle );if _egfd ._dfbg .blocks (_fgac ,_dbcc ){if _dba {_fbe .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_agcd ,_egfd );
};return true ;};};return false ;};func (_bbdc *textMark )bbox ()_ce .PdfRectangle {return _bbdc .PdfRectangle };var _ccffe =map[markKind ]string {_cedaa :"\u0073\u0074\u0072\u006f\u006b\u0065",_bddgf :"\u0066\u0069\u006c\u006c",_aggfg :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func _begf (_dcgg map[int ][]float64 )[]int {_fgffa :=make ([]int ,len (_dcgg ));_ddacg :=0;for _gcge :=range _dcgg {_fgffa [_ddacg ]=_gcge ;_ddacg ++;};_d .Ints (_fgffa );return _fgffa ;};type compositeCell struct{_ce .PdfRectangle ;paraList ;};func (_ggff *wordBag )firstReadingIndex (_cbdg int )int {_gcc :=_ggff .firstWord (_cbdg )._fbdaf ;
_dbbb :=float64 (_cbdg +1)*_dcba ;_bbafc :=_dbbb +_ebaa *_gcc ;_gbac :=_cbdg ;for _ ,_ace :=range _ggff .depthBand (_dbbb ,_bbafc ){if _cgfg (_ggff .firstWord (_ace ),_ggff .firstWord (_gbac ))< 0{_gbac =_ace ;};};return _gbac ;};func (_fbde *shapesState )cubicTo (_abbc ,_bfee ,_gba ,_fgde ,_edgb ,_bce float64 ){if _dbbd {_fbe .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");
};_fbde .addPoint (_edgb ,_bce );};func _cabga (_gbgd structElement )[]structElement {_cbbc :=[]structElement {};for _ ,_eafa :=range _gbgd ._ecae {for _ ,_cffbc :=range _eafa ._ecae {for _ ,_bfda :=range _cffbc ._ecae {if _bfda ._edff =="\u004c"{_cbbc =append (_cbbc ,_bfda );
};};};};return _cbbc ;};

// String returns a string descibing `i`.
func (_cbbba gridTile )String ()string {_ggdde :=func (_fgccc bool ,_eafae string )string {if _fgccc {return _eafae ;};return "\u005f";};return _cd .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_cbbba .PdfRectangle ,_ggdde (_cbbba ._facfe ,"\u004c"),_ggdde (_cbbba ._bbdcd ,"\u0052"),_ggdde (_cbbba ._adbg ,"\u0042"),_ggdde (_cbbba ._dagdb ,"\u0054"));
};func (_gbde *wordBag )removeDuplicates (){if _acbab {_fbe .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_gbde .text ());};for _ ,_bggb :=range _gbde .depthIndexes (){if len (_gbde ._effb [_bggb ])==0{continue ;
};_edab :=_gbde ._effb [_bggb ][0];_bbcd :=_aafcg *_edab ._fbdaf ;_ddfag :=_edab ._ccfce ;for _ ,_ddac :=range _gbde .depthBand (_ddfag ,_ddfag +_bbcd ){_bbfa :=map[*textWord ]struct{}{};_fddfg :=_gbde ._effb [_ddac ];for _ ,_dfea :=range _fddfg {if _ ,_cdfc :=_bbfa [_dfea ];
_cdfc {continue ;};for _ ,_agdb :=range _fddfg {if _ ,_ggfe :=_bbfa [_agdb ];_ggfe {continue ;};if _agdb !=_dfea &&_agdb ._abgea ==_dfea ._abgea &&_c .Abs (_agdb .Llx -_dfea .Llx )< _bbcd &&_c .Abs (_agdb .Urx -_dfea .Urx )< _bbcd &&_c .Abs (_agdb .Lly -_dfea .Lly )< _bbcd &&_c .Abs (_agdb .Ury -_dfea .Ury )< _bbcd {_bbfa [_agdb ]=struct{}{};
};};};if len (_bbfa )> 0{_beefc :=0;for _ ,_faed :=range _fddfg {if _ ,_gdea :=_bbfa [_faed ];!_gdea {_fddfg [_beefc ]=_faed ;_beefc ++;};};_gbde ._effb [_ddac ]=_fddfg [:len (_fddfg )-len (_bbfa )];if len (_gbde ._effb [_ddac ])==0{delete (_gbde ._effb ,_ddac );
};};};};};func (_bfcaf paraList )topoOrder ()[]int {if _abcg {_fbe .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_aeccc :=len (_bfcaf );_cccf :=make ([]bool ,_aeccc );_eebg :=make ([]int ,0,_aeccc );_dcaec :=_bfcaf .llyOrdering ();
var _agfga func (_dgaba int );_agfga =func (_fdgfe int ){_cccf [_fdgfe ]=true ;for _eggba :=0;_eggba < _aeccc ;_eggba ++{if !_cccf [_eggba ]{if _bfcaf .readBefore (_dcaec ,_fdgfe ,_eggba ){_agfga (_eggba );};};};_eebg =append (_eebg ,_fdgfe );};for _gcde :=0;
_gcde < _aeccc ;_gcde ++{if !_cccf [_gcde ]{_agfga (_gcde );};};return _eeccd (_eebg );};func _dbbdc (_bccd ,_bcgb *textPara )bool {return _dfde (_bccd ._bdfg ,_bcgb ._bdfg )};func _gebb (_fbeb []Font ,_gfg string )bool {for _ ,_ed :=range _fbeb {if _ed .FontName ==_gfg {return true ;
};};return false ;};var _eaega =_fbc .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func (_gadg *textObject )moveText (_cgfb ,_cfg float64 ){_gadg .moveLP (_cgfb ,_cfg )};
func (_gfag *wordBag )depthRange (_ddgd ,_fef int )[]int {var _dcae []int ;for _aeg :=range _gfag ._effb {if _ddgd <=_aeg &&_aeg <=_fef {_dcae =append (_dcae ,_aeg );};};if len (_dcae )==0{return nil ;};_d .Ints (_dcae );return _dcae ;};const (_feebd rulingKind =iota ;
_bggf ;_edcaf ;);type textPara struct{_ce .PdfRectangle ;_bdfg _ce .PdfRectangle ;_aebf []*textLine ;_ffdf *textTable ;_ceed bool ;_bdfb bool ;_dcgd *textPara ;_bfgc *textPara ;_dccbe *textPara ;_gabb *textPara ;_cgbef []list ;};func (_adedc *textPara )fontsize ()float64 {return _adedc ._aebf [0]._cfaa };
func (_bdb *shapesState )drawRectangle (_ccec ,_acae ,_ggcd ,_cabg float64 ){if _dbbd {_dda :=_bdb .devicePoint (_ccec ,_acae );_cgg :=_bdb .devicePoint (_ccec +_ggcd ,_acae +_cabg );_ggg :=_ce .PdfRectangle {Llx :_dda .X ,Lly :_dda .Y ,Urx :_cgg .X ,Ury :_cgg .Y };
_fbe .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_ggg );};_bdb .newSubPath ();_bdb .moveTo (_ccec ,_acae );_bdb .lineTo (_ccec +_ggcd ,_acae );_bdb .lineTo (_ccec +_ggcd ,_acae +_cabg );
_bdb .lineTo (_ccec ,_acae +_cabg );_bdb .closePath ();};func (_bbgfe *wordBag )arrangeText ()*textPara {_bbgfe .sort ();if _fdaga {_bbgfe .removeDuplicates ();};var _abcac []*textLine ;for _ ,_ffaa :=range _bbgfe .depthIndexes (){for !_bbgfe .empty (_ffaa ){_eefb :=_bbgfe .firstReadingIndex (_ffaa );
_ccffb :=_bbgfe .firstWord (_eefb );_aefba :=_ebec (_bbgfe ,_eefb );_cgga :=_ccffb ._fbdaf ;_ecbg :=_ccffb ._ccfce -_aeegf *_cgga ;_effee :=_ccffb ._ccfce +_aeegf *_cgga ;_bega :=_dcde *_cgga ;_effg :=_fefg *_cgga ;_eegg :for {var _cfad *textWord ;_ecbd :=0;
for _ ,_bcbdb :=range _bbgfe .depthBand (_ecbg ,_effee ){_cbac :=_bbgfe .highestWord (_bcbdb ,_ecbg ,_effee );if _cbac ==nil {continue ;};_abgfg :=_dgefa (_cbac ,_aefba ._gggb [len (_aefba ._gggb )-1]);if _abgfg < -_effg {break _eegg ;};if _abgfg > _bega {continue ;
};if _cfad !=nil &&_cgfg (_cbac ,_cfad )>=0{continue ;};_cfad =_cbac ;_ecbd =_bcbdb ;};if _cfad ==nil {break ;};_aefba .pullWord (_bbgfe ,_cfad ,_ecbd );};_aefba .markWordBoundaries ();_abcac =append (_abcac ,_aefba );};};if len (_abcac )==0{return nil ;
};_d .Slice (_abcac ,func (_eccc ,_afgg int )bool {return _bdag (_abcac [_eccc ],_abcac [_afgg ])< 0});_abcc :=_cdcb (_bbgfe .PdfRectangle ,_abcac );if _bdcec {_fbe .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_abcc .String ());
if _beeff {for _abda ,_bgdfa :=range _abcc ._aebf {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abda ,_bgdfa .String ());if _bbb {for _baee ,_efgb :=range _bgdfa ._gggb {_cd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_baee ,_efgb .String ());
for _face ,_dbccb :=range _efgb ._dbcbg {_cd .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_face ,_dbccb .String ());};};};};};};return _abcc ;};func (_cddd paraList )list ()[]*list {var _aad []*textLine ;var _dgge []*textLine ;for _ ,_agcdb :=range _cddd {_gaeg :=_agcdb .getListLines ();
_aad =append (_aad ,_gaeg ...);_dgge =append (_dgge ,_agcdb ._aebf ...);};_cbgb :=_agfd (_aad );_ccbgc :=_aaba (_dgge ,_cbgb );return _ccbgc ;};func _ebfe (_bbgb ,_bfddg _ee .Point )rulingKind {_ecad :=_c .Abs (_bbgb .X -_bfddg .X );_daeg :=_c .Abs (_bbgb .Y -_bfddg .Y );
return _fdea (_ecad ,_daeg ,_fccb );};type textMark struct{_ce .PdfRectangle ;_cbfbc int ;_gbee string ;_edgdb string ;_dadg *_ce .PdfFont ;_faae float64 ;_bgdg float64 ;_dbgg _ee .Matrix ;_efbe _ee .Point ;_ffafb _ce .PdfRectangle ;_deca _fa .Color ;_edbfb _fa .Color ;
_ebdd _ga .PdfObject ;_gfbag []string ;Tw float64 ;Th float64 ;_aaac int ;_eabaf int ;};

// ToTextMark returns the public view of `tm`.
func (_dfba *textMark )ToTextMark ()TextMark {return TextMark {Text :_dfba ._gbee ,Original :_dfba ._edgdb ,BBox :_dfba ._ffafb ,Font :_dfba ._dadg ,FontSize :_dfba ._faae ,FillColor :_dfba ._deca ,StrokeColor :_dfba ._edbfb ,Orientation :_dfba ._cbfbc ,DirectObject :_dfba ._ebdd ,ObjString :_dfba ._gfbag ,Tw :_dfba .Tw ,Th :_dfba .Th ,Tc :_dfba ._bgdg ,Index :_dfba ._eabaf };
};func (_dgdd rulingList )sortStrict (){_d .Slice (_dgdd ,func (_fffad ,_gfdf int )bool {_cfga ,_adbd :=_dgdd [_fffad ],_dgdd [_gfdf ];_gceb ,_abaa :=_cfga ._dbeg ,_adbd ._dbeg ;if _gceb !=_abaa {return _gceb > _abaa ;};_cebc ,_agfe :=_cfga ._befa ,_adbd ._befa ;
if !_ffac (_cebc -_agfe ){return _cebc < _agfe ;};_cebc ,_agfe =_cfga ._fcbf ,_adbd ._fcbf ;if _cebc !=_agfe {return _cebc < _agfe ;};return _cfga ._ddgdc < _adbd ._ddgdc ;});};

// TableInfo gets table information of the textmark `tm`.
func (_gace *TextMark )TableInfo ()(*TextTable ,[][]int ){if !_gace ._deef {return nil ,nil ;};_cbbf :=_gace ._baf ;_dacd :=_cbbf .getCellInfo (*_gace );return _cbbf ,_dacd ;};func _bdadc (_bedb map[int ][]float64 )string {_ddge :=_begf (_bedb );_ggfdd :=make ([]string ,len (_bedb ));
for _eedfc ,_efeb :=range _ddge {_ggfdd [_eedfc ]=_cd .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_efeb ,_bedb [_efeb ]);};return _cd .Sprintf ("\u007b\u0025\u0073\u007d",_ff .Join (_ggfdd ,"\u002c\u0020"));};func (_eagaa paraList )addNeighbours (){_baeg :=func (_dabf []int ,_ffbae *textPara )([]*textPara ,[]*textPara ){_fbege :=make ([]*textPara ,0,len (_dabf )-1);
_gcbbf :=make ([]*textPara ,0,len (_dabf )-1);for _ ,_ebfdc :=range _dabf {_ggbac :=_eagaa [_ebfdc ];if _ggbac .Urx <=_ffbae .Llx {_fbege =append (_fbege ,_ggbac );}else if _ggbac .Llx >=_ffbae .Urx {_gcbbf =append (_gcbbf ,_ggbac );};};return _fbege ,_gcbbf ;
};_edbcg :=func (_cbcd []int ,_edafd *textPara )([]*textPara ,[]*textPara ){_decfb :=make ([]*textPara ,0,len (_cbcd )-1);_dadba :=make ([]*textPara ,0,len (_cbcd )-1);for _ ,_eefca :=range _cbcd {_baeba :=_eagaa [_eefca ];if _baeba .Ury <=_edafd .Lly {_dadba =append (_dadba ,_baeba );
}else if _baeba .Lly >=_edafd .Ury {_decfb =append (_decfb ,_baeba );};};return _decfb ,_dadba ;};_bfdb :=_eagaa .yNeighbours (_bdaf );for _ ,_baaab :=range _eagaa {_dgbae :=_bfdb [_baaab ];if len (_dgbae )==0{continue ;};_cfaeg ,_aaeda :=_baeg (_dgbae ,_baaab );
if len (_cfaeg )==0&&len (_aaeda )==0{continue ;};if len (_cfaeg )> 0{_gbaf :=_cfaeg [0];for _ ,_fefb :=range _cfaeg [1:]{if _fefb .Urx >=_gbaf .Urx {_gbaf =_fefb ;};};for _ ,_cegg :=range _cfaeg {if _cegg !=_gbaf &&_cegg .Urx > _gbaf .Llx {_gbaf =nil ;
break ;};};if _gbaf !=nil &&_gfda (_baaab .PdfRectangle ,_gbaf .PdfRectangle ){_baaab ._dcgd =_gbaf ;};};if len (_aaeda )> 0{_ggda :=_aaeda [0];for _ ,_agge :=range _aaeda [1:]{if _agge .Llx <=_ggda .Llx {_ggda =_agge ;};};for _ ,_gddb :=range _aaeda {if _gddb !=_ggda &&_gddb .Llx < _ggda .Urx {_ggda =nil ;
break ;};};if _ggda !=nil &&_gfda (_baaab .PdfRectangle ,_ggda .PdfRectangle ){_baaab ._bfgc =_ggda ;};};};_bfdb =_eagaa .xNeighbours (_ecbb );for _ ,_cbaa :=range _eagaa {_bfbab :=_bfdb [_cbaa ];if len (_bfbab )==0{continue ;};_efebc ,_bcee :=_edbcg (_bfbab ,_cbaa );
if len (_efebc )==0&&len (_bcee )==0{continue ;};if len (_bcee )> 0{_agcdc :=_bcee [0];for _ ,_beea :=range _bcee [1:]{if _beea .Ury >=_agcdc .Ury {_agcdc =_beea ;};};for _ ,_eedfe :=range _bcee {if _eedfe !=_agcdc &&_eedfe .Ury > _agcdc .Lly {_agcdc =nil ;
break ;};};if _agcdc !=nil &&_dfde (_cbaa .PdfRectangle ,_agcdc .PdfRectangle ){_cbaa ._gabb =_agcdc ;};};if len (_efebc )> 0{_bbad :=_efebc [0];for _ ,_daegd :=range _efebc [1:]{if _daegd .Lly <=_bbad .Lly {_bbad =_daegd ;};};for _ ,_cdfba :=range _efebc {if _cdfba !=_bbad &&_cdfba .Lly < _bbad .Ury {_bbad =nil ;
break ;};};if _bbad !=nil &&_dfde (_cbaa .PdfRectangle ,_bbad .PdfRectangle ){_cbaa ._dccbe =_bbad ;};};};for _ ,_eeeceg :=range _eagaa {if _eeeceg ._dcgd !=nil &&_eeeceg ._dcgd ._bfgc !=_eeeceg {_eeeceg ._dcgd =nil ;};if _eeeceg ._dccbe !=nil &&_eeeceg ._dccbe ._gabb !=_eeeceg {_eeeceg ._dccbe =nil ;
};if _eeeceg ._bfgc !=nil &&_eeeceg ._bfgc ._dcgd !=_eeeceg {_eeeceg ._bfgc =nil ;};if _eeeceg ._gabb !=nil &&_eeeceg ._gabb ._dccbe !=_eeeceg {_eeeceg ._gabb =nil ;};};};func _dggc (_cfef []TextMark ,_ddbe *int )[]TextMark {_ddba :=_cfef [len (_cfef )-1];
_bbfg :=[]rune (_ddba .Text );if len (_bbfg )==1{_cfef =_cfef [:len (_cfef )-1];_abca :=_cfef [len (_cfef )-1];*_ddbe =_abca .Offset +len (_abca .Text );}else {_eedcd :=_gbag (_ddba .Text );*_ddbe +=len (_eedcd )-len (_ddba .Text );_ddba .Text =_eedcd ;
};return _cfef ;};func _feeb (_agd *list ,_bcda *string )string {_cbef :=_ff .Split (_agd ._ddga ,"\u000a");_cfee :=&_ff .Builder {};for _ ,_gacd :=range _cbef {if _gacd !=""{_cfee .WriteString (*_bcda );_cfee .WriteString (_gacd );_cfee .WriteString ("\u000a");
};};return _cfee .String ();};func _cadabb (_gbefd float64 ,_aegg int )int {if _aegg ==0{_aegg =1;};_feddf :=float64 (_aegg );return int (_c .Round (_gbefd /_feddf )*_feddf );};func (_aacf rulingList )augmentGrid ()(rulingList ,rulingList ){_gcab ,_aadc :=_aacf .vertsHorzs ();
if len (_gcab )==0||len (_aadc )==0{return _gcab ,_aadc ;};_gbacc ,_fced :=_gcab ,_aadc ;_afbd :=_gcab .bbox ();_dbdfb :=_aadc .bbox ();if _ggac {_fbe .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_afbd );
_fbe .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_dbdfb );};var _egebb ,_ffcc ,_ecceg ,_gdbc *ruling ;if _dbdfb .Llx < _afbd .Llx -_gccb {_egebb =&ruling {_ccga :_aggfg ,_dbeg :_edcaf ,_befa :_dbdfb .Llx ,_fcbf :_afbd .Lly ,_ddgdc :_afbd .Ury };
_gcab =append (rulingList {_egebb },_gcab ...);};if _dbdfb .Urx > _afbd .Urx +_gccb {_ffcc =&ruling {_ccga :_aggfg ,_dbeg :_edcaf ,_befa :_dbdfb .Urx ,_fcbf :_afbd .Lly ,_ddgdc :_afbd .Ury };_gcab =append (_gcab ,_ffcc );};if _afbd .Lly < _dbdfb .Lly -_gccb {_ecceg =&ruling {_ccga :_aggfg ,_dbeg :_bggf ,_befa :_afbd .Lly ,_fcbf :_dbdfb .Llx ,_ddgdc :_dbdfb .Urx };
_aadc =append (rulingList {_ecceg },_aadc ...);};if _afbd .Ury > _dbdfb .Ury +_gccb {_gdbc =&ruling {_ccga :_aggfg ,_dbeg :_bggf ,_befa :_afbd .Ury ,_fcbf :_dbdfb .Llx ,_ddgdc :_dbdfb .Urx };_aadc =append (_aadc ,_gdbc );};if len (_gcab )+len (_aadc )==len (_aacf ){return _gbacc ,_fced ;
};_daea :=append (_gcab ,_aadc ...);_aacf .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_daea .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _gcab ,_aadc ;};

// String returns a human readable description of `vecs`.
func (_bgeec rulingList )String ()string {if len (_bgeec )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_eggd ,_acge :=_bgeec .vertsHorzs ();_ebba :=len (_eggd );_fdfac :=len (_acge );if _ebba ==0||_fdfac ==0{return _cd .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_ebba ,_fdfac );
};_eebe :=_ce .PdfRectangle {Llx :_eggd [0]._befa ,Urx :_eggd [_ebba -1]._befa ,Lly :_acge [_fdfac -1]._befa ,Ury :_acge [0]._befa };return _cd .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_ebba ,_fdfac ,_eebe );
};func (_eced *wordBag )firstWord (_cbbb int )*textWord {return _eced ._effb [_cbbb ][0]};func (_ccge *subpath )makeRectRuling (_efaf _fa .Color )(*ruling ,bool ){if _fcgf {_fbe .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_ccge );
};_cfea :=_ccge ._baeb [:4];_gccce :=make (map[int ]rulingKind ,len (_cfea ));for _beeg ,_ebef :=range _cfea {_cagac :=_ccge ._baeb [(_beeg +1)%4];_gccce [_beeg ]=_ebfe (_ebef ,_cagac );if _fcgf {_cd .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_beeg ,_gccce [_beeg ],_ebef ,_cagac );
};};if _fcgf {_cd .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_gccce );};var _bcbf ,_gede []int ;for _ebga ,_gfgc :=range _gccce {switch _gfgc {case _bggf :_gede =append (_gede ,_ebga );case _edcaf :_bcbf =append (_bcbf ,_ebga );
};};if _fcgf {_cd .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_gede ),_gede );_cd .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_bcbf ),_bcbf );
};_ggeef :=(len (_gede )==2&&len (_bcbf )==2)||(len (_gede )==2&&len (_bcbf )==0&&_ebefa (_cfea [_gede [0]],_cfea [_gede [1]]))||(len (_bcbf )==2&&len (_gede )==0&&_eeff (_cfea [_bcbf [0]],_cfea [_bcbf [1]]));if _fcgf {_cd .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gede ),len (_bcbf ),_ggeef );
};if !_ggeef {if _fcgf {_fbe .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_ccge );_cd .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_gede ),len (_bcbf ),_ggeef );
};return &ruling {},false ;};if len (_bcbf )==0{for _debb ,_abbad :=range _gccce {if _abbad !=_bggf {_bcbf =append (_bcbf ,_debb );};};};if len (_gede )==0{for _fbbe ,_cafb :=range _gccce {if _cafb !=_edcaf {_gede =append (_gede ,_fbbe );};};};if _fcgf {_fbe .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_gede ),len (_bcbf ),len (_cfea ),_gede ,_bcbf ,_cfea );
};var _edddc ,_cedgb ,_aeab ,_edgbe _ee .Point ;if _cfea [_gede [0]].Y > _cfea [_gede [1]].Y {_aeab ,_edgbe =_cfea [_gede [0]],_cfea [_gede [1]];}else {_aeab ,_edgbe =_cfea [_gede [1]],_cfea [_gede [0]];};if _cfea [_bcbf [0]].X > _cfea [_bcbf [1]].X {_edddc ,_cedgb =_cfea [_bcbf [0]],_cfea [_bcbf [1]];
}else {_edddc ,_cedgb =_cfea [_bcbf [1]],_cfea [_bcbf [0]];};_feea :=_ce .PdfRectangle {Llx :_edddc .X ,Urx :_cedgb .X ,Lly :_edgbe .Y ,Ury :_aeab .Y };if _feea .Llx > _feea .Urx {_feea .Llx ,_feea .Urx =_feea .Urx ,_feea .Llx ;};if _feea .Lly > _feea .Ury {_feea .Lly ,_feea .Ury =_feea .Ury ,_feea .Lly ;
};_egcg :=rectRuling {PdfRectangle :_feea ,_dgac :_dbea (_feea ),Color :_efaf };if _egcg ._dgac ==_feebd {if _fcgf {_fbe .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_edbfc ,_agda :=_egcg .asRuling ();if !_agda {if _fcgf {_fbe .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _ggac {_cd .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_edbfc .String ());
};return _edbfc ,true ;};func (_egd *textObject )getFont (_dgfd string )(*_ce .PdfFont ,error ){if _egd ._bgcd ._aee !=nil {_eba ,_bfca :=_egd .getFontDict (_dgfd );if _bfca !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0067\u0065\u0074\u0046\u006f\u006e\u0074:\u0020n\u0061m\u0065=\u0025\u0073\u002c\u0020\u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0073",_dgfd ,_bfca .Error ());
return nil ,_bfca ;};_egd ._bgcd ._gf ++;_dge ,_adcg :=_egd ._bgcd ._aee [_eba .String ()];if _adcg {_dge ._dae =_egd ._bgcd ._gf ;return _dge ._ebgc ,nil ;};};_deff ,_fgab :=_egd .getFontDict (_dgfd );if _fgab !=nil {return nil ,_fgab ;};_bcgff ,_fgab :=_egd .getFontDirect (_dgfd );
if _fgab !=nil {return nil ,_fgab ;};if _egd ._bgcd ._aee !=nil {_gda :=fontEntry {_bcgff ,_egd ._bgcd ._gf };if len (_egd ._bgcd ._aee )>=_fcc {var _adbba []string ;for _acf :=range _egd ._bgcd ._aee {_adbba =append (_adbba ,_acf );};_d .Slice (_adbba ,func (_edbd ,_bfeg int )bool {return _egd ._bgcd ._aee [_adbba [_edbd ]]._dae < _egd ._bgcd ._aee [_adbba [_bfeg ]]._dae ;
});delete (_egd ._bgcd ._aee ,_adbba [0]);};_egd ._bgcd ._aee [_deff .String ()]=_gda ;};return _bcgff ,nil ;};func (_deec *textPara )text ()string {_eddfd :=new (_e .Buffer );_deec .writeText (_eddfd );return _eddfd .String ();};var (_eebge =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);func (_dbab *textPara )depth ()float64 {if _dbab ._bdfb {return -1.0;};if len (_dbab ._aebf )> 0{return _dbab ._aebf [0]._fdgf ;};return _dbab ._ffdf .depth ();};func (_bbcgc paraList )xNeighbours (_cgaca float64 )map[*textPara ][]int {_dgcee :=make ([]event ,2*len (_bbcgc ));
if _cgaca ==0{for _ddbddc ,_gegg :=range _bbcgc {_dgcee [2*_ddbddc ]=event {_gegg .Llx ,true ,_ddbddc };_dgcee [2*_ddbddc +1]=event {_gegg .Urx ,false ,_ddbddc };};}else {for _ccac ,_gccfe :=range _bbcgc {_dgcee [2*_ccac ]=event {_gccfe .Llx -_cgaca *_gccfe .fontsize (),true ,_ccac };
_dgcee [2*_ccac +1]=event {_gccfe .Urx +_cgaca *_gccfe .fontsize (),false ,_ccac };};};return _bbcgc .eventNeighbours (_dgcee );};func (_dceag paraList )applyTables (_eafg []*textTable )paraList {var _dcgf paraList ;for _ ,_gabecd :=range _eafg {_dcgf =append (_dcgf ,_gabecd .newTablePara ());
};for _ ,_ggefe :=range _dceag {if _ggefe ._ceed {continue ;};_dcgf =append (_dcgf ,_ggefe );};return _dcgf ;};func (_eddbe *textTable )compositeRowCorridors ()map[int ][]float64 {_fcgbd :=make (map[int ][]float64 ,_eddbe ._cdgcb );if _dgfg {_fbe .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_eddbe ._cdgcb );
};for _gdfa :=1;_gdfa < _eddbe ._cdgcb ;_gdfa ++{var _defd []compositeCell ;for _fcbg :=0;_fcbg < _eddbe ._dbdfe ;_fcbg ++{if _abgbd ,_ddgae :=_eddbe ._bbedb [_egdege (_fcbg ,_gdfa )];_ddgae {_defd =append (_defd ,_abgbd );};};if len (_defd )==0{continue ;
};_caadg :=_dgdf (_defd );_fcgbd [_gdfa ]=_caadg ;if _dgfg {_cd .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_gdfa ,_caadg );};};return _fcgbd ;};func (_fffc paraList )sortReadingOrder (){_fbe .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fffc ));
if len (_fffc )<=1{return ;};_fffc .computeEBBoxes ();_d .Slice (_fffc ,func (_agdd ,_eddc int )bool {return _bdag (_fffc [_agdd ],_fffc [_eddc ])<=0});};func _ffb (_agcb ,_feeec bounded )float64 {return _bdae (_agcb )-_bdae (_feeec )};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_ggae *Extractor )ExtractTextWithStats ()(_gce string ,_gac int ,_dcea int ,_gaa error ){_eca ,_gac ,_dcea ,_gaa :=_ggae .ExtractPageText ();if _gaa !=nil {return "",_gac ,_dcea ,_gaa ;};return _eca .Text (),_gac ,_dcea ,nil ;};func (_gcca lineRuling )xMean ()float64 {return 0.5*(_gcca ._bcfbf .X +_gcca ._bccb .X )};
func _gdffbe (_afff *PageText )error {_edfee :=_ae .GetLicenseKey ();if _edfee !=nil &&_edfee .IsLicensed ()||_dc {return nil ;};_cd .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_cd .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _b .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};type rulingKind int ;func (_bcec *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_ggad :=make (map[int ]map[*textWord ]struct{},len (_bcec ._effb ));
for _gfed :=range _bcec ._effb {_ggad [_gfed ]=make (map[*textWord ]struct{});};return _ggad ;};

// String returns a description of `k`.
func (_cbfbe markKind )String ()string {_fbdc ,_aefc :=_ccffe [_cbfbe ];if !_aefc {return _cd .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_cbfbe );};return _fbdc ;};var _bee =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_fa .White ,StrokeColor :_fa .White };
func (_bdcc rulingList )findPrimSec (_eeeb ,_dcgcd float64 )*ruling {for _ ,_bgeg :=range _bdcc {if _ffac (_bgeg ._befa -_eeeb )&&_bgeg ._fcbf -_gccb <=_dcgcd &&_dcgcd <=_bgeg ._ddgdc +_gccb {return _bgeg ;};};return nil ;};func (_bbed rulingList )snapToGroupsDirection ()rulingList {_bbed .sortStrict ();
_aagb :=make (map[*ruling ]rulingList ,len (_bbed ));_ddfab :=_bbed [0];_gaade :=func (_bfdag *ruling ){_ddfab =_bfdag ;_aagb [_ddfab ]=rulingList {_bfdag }};_gaade (_bbed [0]);for _ ,_cbad :=range _bbed [1:]{if _cbad ._befa < _ddfab ._befa -_gdab {_fbe .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_ddfab ,_cbad );
};if _cbad ._befa > _ddfab ._befa +_gada {_gaade (_cbad );}else {_aagb [_ddfab ]=append (_aagb [_ddfab ],_cbad );};};_acfgd :=make (map[*ruling ]float64 ,len (_aagb ));_eegf :=make (map[*ruling ]*ruling ,len (_bbed ));for _adagb ,_egbc :=range _aagb {_acfgd [_adagb ]=_egbc .mergePrimary ();
for _ ,_bfcf :=range _egbc {_eegf [_bfcf ]=_adagb ;};};for _ ,_cddea :=range _bbed {_cddea ._befa =_acfgd [_eegf [_cddea ]];};_gdfc :=make (rulingList ,0,len (_bbed ));for _ ,_fgbga :=range _aagb {_accgf :=_fgbga .splitSec ();for _beeb ,_beee :=range _accgf {_fceb :=_beee .merge ();
if len (_gdfc )> 0{_bdafb :=_gdfc [len (_gdfc )-1];if _bdafb .alignsPrimary (_fceb )&&_bdafb .alignsSec (_fceb ){_fbe .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_beeb ,_bdafb ,_fceb );
continue ;};};_gdfc =append (_gdfc ,_fceb );};};_gdfc .sortStrict ();return _gdfc ;};type textObject struct{_bgcd *Extractor ;_edbe *_ce .PdfPageResources ;_dbf _aa .GraphicsState ;_geeg *textState ;_gdgc *stateStack ;_bfa _ee .Matrix ;_fgf _ee .Matrix ;
_gae []*textMark ;_aec bool ;};type imageExtractContext struct{_cdg []ImageMark ;_fda int ;_gee int ;_acb int ;_fea map[*_ga .PdfObjectStream ]*cachedImage ;_cge *ImageExtractOptions ;_bb bool ;};func (_defaa paraList )findTextTables ()[]*textTable {var _gaea []*textTable ;
for _ ,_cebfc :=range _defaa {if _cebfc .taken ()||_cebfc .Width ()==0{continue ;};_ebccfb :=_cebfc .isAtom ();if _ebccfb ==nil {continue ;};_ebccfb .growTable ();if _ebccfb ._dbdfe *_ebccfb ._cdgcb < _fca {continue ;};_ebccfb .markCells ();_ebccfb .log ("\u0067\u0072\u006fw\u006e");
_gaea =append (_gaea ,_ebccfb );};return _gaea ;};func (_eecc *wordBag )depthIndexes ()[]int {if len (_eecc ._effb )==0{return nil ;};_efbdf :=make ([]int ,len (_eecc ._effb ));_gfbc :=0;for _cebf :=range _eecc ._effb {_efbdf [_gfbc ]=_cebf ;_gfbc ++;};
_d .Ints (_efbdf );return _efbdf ;};func (_ebdga intSet )add (_aadccb int ){_ebdga [_aadccb ]=struct{}{}};func (_ffagde *textTable )reduce ()*textTable {_dcgcdd :=make ([]int ,0,_ffagde ._cdgcb );_fecg :=make ([]int ,0,_ffagde ._dbdfe );for _gfggf :=0;
_gfggf < _ffagde ._cdgcb ;_gfggf ++{if !_ffagde .emptyCompositeRow (_gfggf ){_dcgcdd =append (_dcgcdd ,_gfggf );};};for _acbaf :=0;_acbaf < _ffagde ._dbdfe ;_acbaf ++{if !_ffagde .emptyCompositeColumn (_acbaf ){_fecg =append (_fecg ,_acbaf );};};if len (_dcgcdd )==_ffagde ._cdgcb &&len (_fecg )==_ffagde ._dbdfe {return _ffagde ;
};_abgcd :=textTable {_cffg :_ffagde ._cffg ,_dbdfe :len (_fecg ),_cdgcb :len (_dcgcdd ),_acabfd :make (map[uint64 ]*textPara ,len (_fecg )*len (_dcgcdd ))};if _dgfg {_fbe .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_ffagde ._dbdfe ,_ffagde ._cdgcb ,len (_fecg ),len (_dcgcdd ));
_fbe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fecg );_fbe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_dcgcdd );};for _fcbad ,_abge :=range _dcgcdd {for _dbfg ,_faaf :=range _fecg {_egebd ,_cdbc :=_ffagde .getComposite (_faaf ,_abge );
if _egebd ==nil {continue ;};if _dgfg {_cd .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_dbfg ,_fcbad ,_faaf ,_abge ,_ggaa (_egebd .merge ().text (),50));};_abgcd .putComposite (_dbfg ,_fcbad ,_egebd ,_cdbc );
};};return &_abgcd ;};func (_dccde *textTable )depth ()float64 {_bdacc :=1e10;for _agdg :=0;_agdg < _dccde ._dbdfe ;_agdg ++{_caad :=_dccde .get (_agdg ,0);if _caad ==nil ||_caad ._bdfb {continue ;};_bdacc =_c .Min (_bdacc ,_caad .depth ());};return _bdacc ;
};func _adgba (_ddfef ,_eece float64 )bool {return _ddfef /_c .Max (_fcbe ,_eece )< _fccb };func (_bbef *wordBag )removeWord (_cbff *textWord ,_gccc int ){_gcbb :=_bbef ._effb [_gccc ];_gcbb =_cdae (_gcbb ,_cbff );if len (_gcbb )==0{delete (_bbef ._effb ,_gccc );
}else {_bbef ._effb [_gccc ]=_gcbb ;};};func _fgdd (_ccgc _ce .PdfRectangle )*ruling {return &ruling {_dbeg :_bggf ,_befa :_ccgc .Lly ,_fcbf :_ccgc .Llx ,_ddgdc :_ccgc .Urx };};func _dgce (_gbca []structElement ,_cgae map[int ][]*textLine ,_bbf _ga .PdfObject )[]*list {_decf :=[]*list {};
for _ ,_dgfa :=range _gbca {_gdeba :=_dgfa ._ecae ;_cada :=int (_dgfa ._cbfb );_edbb :=_dgfa ._edff ;_eafc :=[]*textLine {};_gaebgd :=[]*list {};_bead :=_dgfa ._facf ;_ebda ,_ddda :=(_bead .(*_ga .PdfObjectReference ));if !_ddda {_fbe .Log .Debug ("\u0066\u0061\u0069l\u0065\u0064\u0020\u006f\u0074\u0020\u0063\u0061\u0073\u0074\u0020\u0074\u006f\u0020\u002a\u0063\u006f\u0072\u0065\u002e\u0050\u0064\u0066\u004f\u0062\u006a\u0065\u0063\u0074R\u0065\u0066\u0065\u0072\u0065\u006e\u0063\u0065");
};if _cada !=-1&&_ebda !=nil {if _fcdf ,_cefab :=_cgae [_cada ];_cefab {if _aeef ,_gbbg :=_bbf .(*_ga .PdfIndirectObject );_gbbg {_bcfa :=_aeef .PdfObjectReference ;if _gg .DeepEqual (*_ebda ,_bcfa ){_eafc =_fcdf ;};};};};if _gdeba !=nil {_gaebgd =_dgce (_gdeba ,_cgae ,_bbf );
};_cccg :=_ggfd (_eafc ,_edbb ,_gaebgd );_decf =append (_decf ,_cccg );};return _decf ;};func (_efbb *textTable )newTablePara ()*textPara {_cgdd :=_efbb .computeBbox ();_beac :=&textPara {PdfRectangle :_cgdd ,_bdfg :_cgdd ,_ffdf :_efbb };if _dgfg {_fbe .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_beac );
};return _beac ;};func (_aafff rulingList )bbox ()_ce .PdfRectangle {var _abbec _ce .PdfRectangle ;if len (_aafff )==0{_fbe .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _ce .PdfRectangle {};};if _aafff [0]._dbeg ==_bggf {_abbec .Llx ,_abbec .Urx =_aafff .secMinMax ();_abbec .Lly ,_abbec .Ury =_aafff .primMinMax ();}else {_abbec .Llx ,_abbec .Urx =_aafff .primMinMax ();_abbec .Lly ,_abbec .Ury =_aafff .secMinMax ();
};return _abbec ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//	ex, _ := New(page)
//	// handle errors
//	pageText, _, _, err := ex.ExtractPageText()
//	// handle errors
//	text := pageText.Text()
//	textMarks := pageText.Marks()
//
//		start := strings.Index(text, term)
//	 end := start + len(term)
//	 spanMarks, err := textMarks.RangeOffset(start, end)
//	 // handle errors
//	 bbox, ok := spanMarks.BBox()
//	 // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _ce .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_ce .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _fa .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _fa .Color ;

// Orientation is the text orientation
Orientation int ;

// DirectObject is the underlying PdfObject (Text Object) that represents the visible texts. This is introduced to get
// a simple access to the TextObject in case editing or replacment of some text is needed. E.g during redaction.
DirectObject _ga .PdfObject ;

// ObjString is a decoded string operand of a text-showing operator. It has the same value as `Text` attribute except
// when many glyphs are represented with the same Text Object that contains multiple length string operand in which case
// ObjString spans more than one character string that falls in different TextMark objects.
ObjString []string ;Tw float64 ;Th float64 ;Tc float64 ;Index int ;_deef bool ;_baf *TextTable ;};func (_bace *subpath )last ()_ee .Point {return _bace ._baeb [len (_bace ._baeb )-1]};func (_afb *imageExtractContext )extractInlineImage (_bba *_aa .ContentStreamInlineImage ,_abcf _aa .GraphicsState ,_eaef *_ce .PdfPageResources )error {_edg ,_dfaa :=_bba .ToImage (_eaef );
if _dfaa !=nil {return _dfaa ;};_gfa ,_dfaa :=_bba .GetColorSpace (_eaef );if _dfaa !=nil {return _dfaa ;};if _gfa ==nil {_gfa =_ce .NewPdfColorspaceDeviceGray ();};_ega ,_dfaa :=_gfa .ImageToRGB (*_edg );if _dfaa !=nil {return _dfaa ;};_fee :=ImageMark {Image :&_ega ,Width :_abcf .CTM .ScalingFactorX (),Height :_abcf .CTM .ScalingFactorY (),Angle :_abcf .CTM .Angle ()};
_fee .X ,_fee .Y =_abcf .CTM .Translation ();_afb ._cdg =append (_afb ._cdg ,_fee );_afb ._fda ++;return nil ;};func (_dcgae intSet )del (_aefe int ){delete (_dcgae ,_aefe )};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_cff []TextMark };type list struct{_gbacf []*textLine ;_bdfa string ;_ffc []*list ;_ddga string ;};type lists []*list ;

// Tables returns the tables extracted from the page.
func (_fcda PageText )Tables ()[]TextTable {if _dgfg {_fbe .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_fcda ._bagc ));};return _fcda ._bagc ;};func _bedc (_dbgc _ce .PdfRectangle ,_ffef ,_degcc ,_gfdab ,_ggaed *ruling )gridTile {_gdbb :=_dbgc .Llx ;
_fdfe :=_dbgc .Urx ;_caag :=_dbgc .Lly ;_gcgb :=_dbgc .Ury ;return gridTile {PdfRectangle :_dbgc ,_facfe :_ffef !=nil &&_ffef .encloses (_caag ,_gcgb ),_bbdcd :_degcc !=nil &&_degcc .encloses (_caag ,_gcgb ),_adbg :_gfdab !=nil &&_gfdab .encloses (_gdbb ,_fdfe ),_dagdb :_ggaed !=nil &&_ggaed .encloses (_gdbb ,_fdfe )};
};func _gbag (_cddf string )string {_gafca :=[]rune (_cddf );return string (_gafca [:len (_gafca )-1])};func (_bfc TextTable )getCellInfo (_bdg TextMark )[][]int {for _ebbd ,_eegag :=range _bfc .Cells {for _bdac ,_egga :=range _eegag {_eegc :=&_egga .Marks ;
if _eegc .exists (_bdg ){return [][]int {{_ebbd },{_bdac }};};};};return nil ;};func (_cgee *shapesState )establishSubpath ()*subpath {_gacef ,_aacg :=_cgee .lastpointEstablished ();if !_aacg {_cgee ._ggdf =append (_cgee ._ggdf ,_bdc (_gacef ));};if len (_cgee ._ggdf )==0{return nil ;
};_cgee ._gfde =false ;return _cgee ._ggdf [len (_cgee ._ggdf )-1];};func _dgefa (_cdcf ,_abgg bounded )float64 {return _cdcf .bbox ().Llx -_abgg .bbox ().Urx };func (_gbe *textObject )moveTextSetLeading (_dea ,_cce float64 ){_gbe ._geeg ._dff =-_cce ;
_gbe .moveLP (_dea ,_cce );};func _fgfbb (_degf ,_cdag _ce .PdfRectangle )_ce .PdfRectangle {return _ce .PdfRectangle {Llx :_c .Min (_degf .Llx ,_cdag .Llx ),Lly :_c .Min (_degf .Lly ,_cdag .Lly ),Urx :_c .Max (_degf .Urx ,_cdag .Urx ),Ury :_c .Max (_degf .Ury ,_cdag .Ury )};
};func (_badc rulingList )toTilings ()(rulingList ,[]gridTiling ){_badc .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_badc )==0{return nil ,nil ;};_badc =_badc .tidied ("\u0061\u006c\u006c");_badc .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_dfbae :=_badc .toGrids ();_ebdgg :=make ([]gridTiling ,len (_dfbae ));for _fgbd ,_cece :=range _dfbae {_ebdgg [_fgbd ]=_cece .asTiling ();};return _badc ,_ebdgg ;};

// String returns a description of `t`.
func (_ffbea *textTable )String ()string {return _cd .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_ffbea ._dbdfe ,_ffbea ._cdgcb ,_ffbea ._cffg );};func (_eaddc rulingList )asTiling ()gridTiling {if _egc {_fbe .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_eaddc ));
};for _effdd ,_ggdb :=range _eaddc [1:]{_babe :=_eaddc [_effdd ];if _babe .alignsPrimary (_ggdb )&&_babe .alignsSec (_ggdb ){_fbe .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_ggdb ,_babe );
};};_eaddc .sortStrict ();_eaddc .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_acdc ,_dagf :=_eaddc .vertsHorzs ();_ddbc :=_acdc .primaries ();_gecf :=_dagf .primaries ();_bedgg :=len (_ddbc )-1;_cdcg :=len (_gecf )-1;if _bedgg ==0||_cdcg ==0{return gridTiling {};
};_ddeb :=_ce .PdfRectangle {Llx :_ddbc [0],Urx :_ddbc [_bedgg ],Lly :_gecf [0],Ury :_gecf [_cdcg ]};if _egc {_fbe .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_acdc ));
for _ddcd ,_gadgg :=range _acdc {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ddcd ,_gadgg );};_fbe .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_dagf ));
for _fcaf ,_bdbe :=range _dagf {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fcaf ,_bdbe );};_fbe .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_bedgg ,_cdcg ,_ddbc ,_gecf );
};_faeee :=make ([]gridTile ,_bedgg *_cdcg );for _cdbg :=_cdcg -1;_cdbg >=0;_cdbg --{_bbcf :=_gecf [_cdbg ];_adfc :=_gecf [_cdbg +1];for _bdfe :=0;_bdfe < _bedgg ;_bdfe ++{_bceb :=_ddbc [_bdfe ];_aage :=_ddbc [_bdfe +1];_ebdea :=_acdc .findPrimSec (_bceb ,_bbcf );
_eaeg :=_acdc .findPrimSec (_aage ,_bbcf );_dfef :=_dagf .findPrimSec (_bbcf ,_bceb );_edeb :=_dagf .findPrimSec (_adfc ,_bceb );_bcfda :=_ce .PdfRectangle {Llx :_bceb ,Urx :_aage ,Lly :_bbcf ,Ury :_adfc };_fceee :=_bedc (_bcfda ,_ebdea ,_eaeg ,_dfef ,_edeb );
_faeee [_cdbg *_bedgg +_bdfe ]=_fceee ;if _egc {_cd .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_bdfe ,_cdbg ,_fceee .String (),_fceee .Width (),_fceee .Height ());
};};};if _egc {_fbe .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_ddeb );
};_dbeda :=make ([]map[float64 ]gridTile ,_cdcg );for _dccae :=_cdcg -1;_dccae >=0;_dccae --{if _egc {_cd .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_dccae );};_dbeda [_dccae ]=make (map[float64 ]gridTile ,_bedgg );for _ageb :=0;_ageb < _bedgg ;
_ageb ++{_dbegc :=_faeee [_dccae *_bedgg +_ageb ];if _egc {_cd .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ageb ,_dbegc );};if !_dbegc ._facfe {continue ;};_fadf :=_ageb ;for _egadg :=_ageb +1;!_dbegc ._bbdcd &&_egadg < _bedgg ;
_egadg ++{_gccbf :=_faeee [_dccae *_bedgg +_egadg ];_dbegc .Urx =_gccbf .Urx ;_dbegc ._dagdb =_dbegc ._dagdb ||_gccbf ._dagdb ;_dbegc ._adbg =_dbegc ._adbg ||_gccbf ._adbg ;_dbegc ._bbdcd =_gccbf ._bbdcd ;if _egc {_cd .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_egadg ,_gccbf ,_dbegc );
};_fadf =_egadg ;};if _egc {_cd .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_ageb ,_fadf ,_dbegc );};_ageb =_fadf ;_dbeda [_dccae ][_dbegc .Llx ]=_dbegc ;};};_cbbbc :=make (map[float64 ]map[float64 ]gridTile ,_cdcg );
_gebe :=make (map[float64 ]map[float64 ]struct{},_cdcg );for _ddca :=_cdcg -1;_ddca >=0;_ddca --{_gcaae :=_faeee [_ddca *_bedgg ].Lly ;_cbbbc [_gcaae ]=make (map[float64 ]gridTile ,_bedgg );_gebe [_gcaae ]=make (map[float64 ]struct{},_bedgg );};if _egc {_fbe .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_ddeb );
};for _eebd :=_cdcg -1;_eebd >=0;_eebd --{_debgc :=_faeee [_eebd *_bedgg ].Lly ;_bacae :=_dbeda [_eebd ];if _egc {_cd .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_eebd );};for _ ,_bgdbaf :=range _bccac (_bacae ){if _ ,_daec :=_gebe [_debgc ][_bgdbaf ];
_daec {continue ;};_debbc :=_bacae [_bgdbaf ];if _egc {_cd .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_debbc .String ());};for _bcecf :=_eebd -1;_bcecf >=0;_bcecf --{if _debbc ._adbg {break ;};_decfa :=_dbeda [_bcecf ];_ggceb ,_abee :=_decfa [_bgdbaf ];
if !_abee {break ;};if _ggceb .Urx !=_debbc .Urx {break ;};_debbc ._adbg =_ggceb ._adbg ;_debbc .Lly =_ggceb .Lly ;if _egc {_cd .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_ggceb .String (),_debbc .String ());
};_gebe [_ggceb .Lly ][_ggceb .Llx ]=struct{}{};};if _eebd ==0{_debbc ._adbg =true ;};if _debbc .complete (){_cbbbc [_debgc ][_bgdbaf ]=_debbc ;};};};_ceaa :=gridTiling {PdfRectangle :_ddeb ,_gebbd :_abcdd (_cbbbc ),_eaae :_cggg (_cbbbc ),_dagd :_cbbbc };
_ceaa .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _ceaa ;};func (_ebbba *textLine )text ()string {var _gefa []string ;for _ ,_accgc :=range _ebbba ._gggb {if _accgc ._bfgfa {_gefa =append (_gefa ,"\u0020");};_gefa =append (_gefa ,_accgc ._abgea );
};return _ff .Join (_gefa ,"");};func _baec (_gafb _ce .PdfRectangle )*ruling {return &ruling {_dbeg :_edcaf ,_befa :_gafb .Llx ,_fcbf :_gafb .Lly ,_ddgdc :_gafb .Ury };};func _dadfd (_aggba float64 )float64 {return _aabd *_c .Round (_aggba /_aabd )};type textLine struct{_ce .PdfRectangle ;
_fdgf float64 ;_gggb []*textWord ;_cfaa float64 ;};

// NewWithOptions an Extractor instance for extracting content from the input PDF page with options.
func NewWithOptions (page *_ce .PdfPage ,options *Options )(*Extractor ,error ){const _ced ="\u0065x\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077W\u0069\u0074\u0068\u004f\u0070\u0074\u0069\u006f\u006e\u0073";_bf ,_ffd :=page .GetAllContentStreams ();
if _ffd !=nil {return nil ,_ffd ;};_fab ,_cab :=page .GetStructTreeRoot ();if !_cab {_fbe .Log .Info ("T\u0068\u0065\u0020\u0070\u0064\u0066\u0020\u0064\u006f\u0063\u0075\u006d\u0065\u006e\u0074\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020\u0074\u0061\u0067g\u0065d\u002e\u0020\u0053\u0074r\u0075\u0063t\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e\u0027\u0074\u0020\u0065\u0078\u0069\u0073\u0074\u002e");
};_ebb :=page .GetContainingPdfObject ();_ea ,_ffd :=page .GetMediaBox ();if _ffd !=nil {return nil ,_cd .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_ffd );
};_ag :=&Extractor {_af :_bf ,_eb :page .Resources ,_ge :*_ea ,_geb :page .CropBox ,_aee :map[string ]fontEntry {},_gc :map[string ]textResult {},_df :options ,_cdb :_fab ,_gbb :_ebb };if _ag ._ge .Llx > _ag ._ge .Urx {_fbe .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ag ._ge );
_ag ._ge .Llx ,_ag ._ge .Urx =_ag ._ge .Urx ,_ag ._ge .Llx ;};if _ag ._ge .Lly > _ag ._ge .Ury {_fbe .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ag ._ge );
_ag ._ge .Lly ,_ag ._ge .Ury =_ag ._ge .Ury ,_ag ._ge .Lly ;};_ae .TrackUse (_ced );return _ag ,nil ;};func _fedaa (_ggcb _ce .PdfColorspace ,_efega _ce .PdfColor )_fa .Color {if _ggcb ==nil ||_efega ==nil {return _fa .Black ;};_acga ,_aacc :=_ggcb .ColorToRGB (_efega );
if _aacc !=nil {_fbe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_efega ,_ggcb ,_aacc );
return _fa .Black ;};_adaf ,_cfaeac :=_acga .(*_ce .PdfColorDeviceRGB );if !_cfaeac {_fbe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_acga );
return _fa .Black ;};return _fa .NRGBA {R :uint8 (_adaf .R ()*255),G :uint8 (_adaf .G ()*255),B :uint8 (_adaf .B ()*255),A :uint8 (255)};};func (_fgcg *textObject )showTextAdjusted (_cbc *_ga .PdfObjectArray ,_gdbg int )error {_ead :=false ;for _ ,_bgb :=range _cbc .Elements (){switch _bgb .(type ){case *_ga .PdfObjectFloat ,*_ga .PdfObjectInteger :_cfb ,_gacf :=_ga .GetNumberAsFloat (_bgb );
if _gacf !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bgb ,_cbc );
return _gacf ;};_cegc ,_dee :=-_cfb *0.001*_fgcg ._geeg ._eab ,0.0;if _ead {_dee ,_cegc =_cegc ,_dee ;};_fgcf :=_gfe (_ee .Point {X :_cegc ,Y :_dee });_fgcg ._bfa .Concat (_fgcf );case *_ga .PdfObjectString :_efbd :=_ga .TraceToDirectObject (_bgb );_fedd ,_cdff :=_ga .GetStringBytes (_efbd );
if !_cdff {_fbe .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bgb ,_cbc );
return _ga .ErrTypeError ;};_fgcg .renderText (_efbd ,_fedd ,_gdbg );default:_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_bgb ,_cbc );
return _ga .ErrTypeError ;};};return nil ;};func (_dbega rulingList )tidied (_bddf string )rulingList {_egda :=_dbega .removeDuplicates ();_egda .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_eagcd :=_egda .snapToGroups ();if _eagcd ==nil {return nil ;
};_eagcd .sort ();if _ggac {_fbe .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_bddf ,len (_dbega ),len (_egda ),len (_eagcd ));
};_eagcd .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _eagcd ;};func _fgabc (_ggbc *list ,_fcab *_ff .Builder ,_bgcde *string ){_bdbb :=_feeb (_ggbc ,_bgcde );_fcab .WriteString (_bdbb );for _ ,_edee :=range _ggbc ._ffc {_gfff :=*_bgcde +"\u0020\u0020\u0020";
_fgabc (_edee ,_fcab ,&_gfff );};};func (_bdccb rulingList )mergePrimary ()float64 {_bgefd :=_bdccb [0]._befa ;for _ ,_cdcfd :=range _bdccb [1:]{_bgefd +=_cdcfd ._befa ;};return _bgefd /float64 (len (_bdccb ));};func (_bedd *wordBag )absorb (_efbc *wordBag ){_fbbf :=_efbc .makeRemovals ();
for _afeg ,_cbcad :=range _efbc ._effb {for _ ,_cefa :=range _cbcad {_bedd .pullWord (_cefa ,_afeg ,_fbbf );};};_efbc .applyRemovals (_fbbf );};func (_gdffb *textTable )markCells (){for _fdcf :=0;_fdcf < _gdffb ._cdgcb ;_fdcf ++{for _cbee :=0;_cbee < _gdffb ._dbdfe ;
_cbee ++{_ddgdf :=_gdffb .get (_cbee ,_fdcf );if _ddgdf !=nil {_ddgdf ._ceed =true ;};};};};type event struct{_bbfde float64 ;_gedc bool ;_eabda int ;};func (_fdg *textObject )setTextLeading (_ccb float64 ){if _fdg ==nil {return ;};_fdg ._geeg ._dff =_ccb ;
};func (_fbacf *wordBag )maxDepth ()float64 {return _fbacf ._cgbc -_fbacf .Lly };func _ggdd (_dgbb []*textLine ,_ceeb map[float64 ][]*textLine ,_cabf []float64 ,_cadab int ,_fcca ,_agfdf float64 )[]*list {_ebcb :=[]*list {};_cgea :=_cadab ;_cadab =_cadab +1;
_bcfb :=_cabf [_cgea ];_ggbd :=_ceeb [_bcfb ];_bcegd :=_dddc (_ggbd ,_agfdf ,_fcca );for _eabc ,_aebe :=range _bcegd {var _ddde float64 ;_cfaea :=[]*list {};_cfag :=_aebe ._fdgf ;_fdae :=_agfdf ;if _eabc < len (_bcegd )-1{_fdae =_bcegd [_eabc +1]._fdgf ;
};if _cadab < len (_cabf ){_cfaea =_ggdd (_dgbb ,_ceeb ,_cabf ,_cadab ,_cfag ,_fdae );};_ddde =_fdae ;if len (_cfaea )> 0{_ddbd :=_cfaea [0];if len (_ddbd ._gbacf )> 0{_ddde =_ddbd ._gbacf [0]._fdgf ;};};_gaac :=[]*textLine {_aebe };_dgbe :=_gbbaga (_aebe ,_dgbb ,_cabf ,_cfag ,_ddde );
_gaac =append (_gaac ,_dgbe ...);_cdgab :=_ggfd (_gaac ,"\u0062\u0075\u006c\u006c\u0065\u0074",_cfaea );_cdgab ._ddga =_deeb (_gaac ,"");_ebcb =append (_ebcb ,_cdgab );};return _ebcb ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_edcd *TextMarkArray )BBox ()(_ce .PdfRectangle ,bool ){var _ebbc _ce .PdfRectangle ;_efea :=false ;for _ ,_gbcfa :=range _edcd ._cff {if _gbcfa .Meta ||_bafca (_gbcfa .Text ){continue ;};if _efea {_ebbc =_fgfbb (_ebbc ,_gbcfa .BBox );}else {_ebbc =_gbcfa .BBox ;
_efea =true ;};};return _ebbc ,_efea ;};func (_fcggg *textTable )growTable (){_fegd :=func (_eace paraList ){_fcggg ._cdgcb ++;for _fddfb :=0;_fddfb < _fcggg ._dbdfe ;_fddfb ++{_gfedf :=_eace [_fddfb ];_fcggg .put (_fddfb ,_fcggg ._cdgcb -1,_gfedf );};
};_defgd :=func (_dcbe paraList ){_fcggg ._dbdfe ++;for _bdagc :=0;_bdagc < _fcggg ._cdgcb ;_bdagc ++{_aacd :=_dcbe [_bdagc ];_fcggg .put (_fcggg ._dbdfe -1,_bdagc ,_aacd );};};if _efdac {_fcggg .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _cbga :=0;
;_cbga ++{_adaa :=false ;_cadg :=_fcggg .getDown ();_cfaab :=_fcggg .getRight ();if _efdac {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cbga ,_fcggg );_cd .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_cadg );
_cd .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_cfaab );};if _cadg !=nil &&_cfaab !=nil {_cdafa :=_cadg [len (_cadg )-1];if !_cdafa .taken ()&&_cdafa ==_cfaab [len (_cfaab )-1]{_fegd (_cadg );if _cfaab =_fcggg .getRight ();
_cfaab !=nil {_defgd (_cfaab );_fcggg .put (_fcggg ._dbdfe -1,_fcggg ._cdgcb -1,_cdafa );};_adaa =true ;};};if !_adaa &&_cadg !=nil {_fegd (_cadg );_adaa =true ;};if !_adaa &&_cfaab !=nil {_defgd (_cfaab );_adaa =true ;};if !_adaa {break ;};};};func _dfff (_bfdg ,_eaba _ce .PdfRectangle )bool {return _dfde (_bfdg ,_eaba )&&_gfda (_bfdg ,_eaba )};


// String returns a string describing `tm`.
func (_efce TextMark )String ()string {_eabf :=_efce .BBox ;var _ccgb string ;if _efce .Font !=nil {_ccgb =_efce .Font .String ();if len (_ccgb )> 50{_ccgb =_ccgb [:50]+"\u002e\u002e\u002e";};};var _bdf string ;if _efce .Meta {_bdf ="\u0020\u002a\u004d\u002a";
};return _cd .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_efce .Offset ,_efce .Text ,[]rune (_efce .Text ),_eabf .Llx ,_eabf .Lly ,_eabf .Urx ,_eabf .Ury ,_ccgb ,_bdf );
};type fontEntry struct{_ebgc *_ce .PdfFont ;_dae int64 ;};type paraList []*textPara ;func (_ebf *textObject )getFontDirect (_dacdb string )(*_ce .PdfFont ,error ){_bbae ,_fcg :=_ebf .getFontDict (_dacdb );if _fcg !=nil {return nil ,_fcg ;};_dgad ,_fcg :=_ce .NewPdfFontFromPdfObject (_bbae );
if _fcg !=nil {_fbe .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dacdb ,_fcg );
};return _dgad ,_fcg ;};func (_cead *textObject )getFillColor ()_fa .Color {return _fedaa (_cead ._dbf .ColorspaceNonStroking ,_cead ._dbf .ColorNonStroking );};const (_agb ="\u0045\u0052R\u004f\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074\u002c\u0020\u0069\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";
_ac ="\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0043a\u006e\u0027\u0074 g\u0065\u0074\u0020\u0066\u006f\u006et\u0020\u0070\u0072\u006f\u0070\u0065\u0072\u0074\u0069\u0065\u0073\u002c\u0020\u0066\u006fn\u0074\u0020\u006e\u006f\u0074\u0020\u0066\u006fu\u006e\u0064";
_dd ="\u0045\u0052\u0052O\u0052\u003a\u0020\u0043\u0061\u006e\u0027\u0074\u0020\u0067\u0065\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0074\u0072\u0065\u0061\u006d\u002c\u0020\u0069\u006e\u0076a\u006c\u0069\u0064\u0020\u0074\u0079\u0070\u0065";);
func (_gbbc paraList )yNeighbours (_edgbb float64 )map[*textPara ][]int {_cdedb :=make ([]event ,2*len (_gbbc ));if _edgbb ==0{for _ebbae ,_babc :=range _gbbc {_cdedb [2*_ebbae ]=event {_babc .Lly ,true ,_ebbae };_cdedb [2*_ebbae +1]=event {_babc .Ury ,false ,_ebbae };
};}else {for _gdaee ,_cecg :=range _gbbc {_cdedb [2*_gdaee ]=event {_cecg .Lly -_edgbb *_cecg .fontsize (),true ,_gdaee };_cdedb [2*_gdaee +1]=event {_cecg .Ury +_edgbb *_cecg .fontsize (),false ,_gdaee };};};return _gbbc .eventNeighbours (_cdedb );};func (_gage *textObject )setTextMatrix (_ecd []float64 ){if len (_ecd )!=6{_fbe .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_ecd ));
return ;};_ccgf ,_dcfg ,_cced ,_gdg ,_ccfa ,_eag :=_ecd [0],_ecd [1],_ecd [2],_ecd [3],_ecd [4],_ecd [5];_gage ._bfa =_ee .NewMatrix (_ccgf ,_dcfg ,_cced ,_gdg ,_ccfa ,_eag );_gage ._fgf =_gage ._bfa ;};func (_dggad rulingList )intersections ()map[int ]intSet {var _fcdc ,_dedb []int ;
for _ebgfb ,_fafbf :=range _dggad {switch _fafbf ._dbeg {case _edcaf :_fcdc =append (_fcdc ,_ebgfb );case _bggf :_dedb =append (_dedb ,_ebgfb );};};if len (_fcdc )< _fdde +1||len (_dedb )< _fgbff +1{return nil ;};if len (_fcdc )+len (_dedb )> _bad {_fbe .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_dggad ),len (_fcdc ),len (_dedb ));
return nil ;};_dgged :=make (map[int ]intSet ,len (_fcdc )+len (_dedb ));for _ ,_gbcab :=range _fcdc {for _ ,_dgcaef :=range _dedb {if _dggad [_gbcab ].intersects (_dggad [_dgcaef ]){if _ ,_dbec :=_dgged [_gbcab ];!_dbec {_dgged [_gbcab ]=make (intSet );
};if _ ,_fgbg :=_dgged [_dgcaef ];!_fgbg {_dgged [_dgcaef ]=make (intSet );};_dgged [_gbcab ].add (_dgcaef );_dgged [_dgcaef ].add (_gbcab );};};};return _dgged ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_ce .PdfPageResources )(*Extractor ,error ){const _gec ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_ege :=&Extractor {_af :contents ,_eb :resources ,_aee :map[string ]fontEntry {},_gc :map[string ]textResult {}};
_ae .TrackUse (_gec );return _ege ,nil ;};func (_dbfbb *textTable )getComposite (_bfag ,_dgaaa int )(paraList ,_ce .PdfRectangle ){_fcdg ,_aaab :=_dbfbb ._bbedb [_egdege (_bfag ,_dgaaa )];if _dgfg {_cd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_bfag ,_dgaaa ,_fcdg .String ());
};if !_aaab {return nil ,_ce .PdfRectangle {};};return _fcdg .parasBBox ();};

// List returns all the list objects detected on the page.
// It detects all the bullet point Lists from a given pdf page and builds a slice of bullet list objects.
// A given bullet list object has a tree structure.
// Each bullet point list is extracted with the text content it contains and all the sub lists found under it as children in the tree.
// The rest content of the pdf is ignored and only text in the bullet point lists are extracted.
// The list extraction is done in two ways.
// 1. If the document is tagged then the lists are extracted using the tags provided in the document.
// 2. Otherwise the bullet lists are extracted from the raw text using regex matching.
// By default the document tag is used if available.
// However this can be disabled using `DisableDocumentTags` in the `Options` object.
// Sometimes disabling document tags option might give a better bullet list extraction if the document was tagged incorrectly.
//     options := &Options{
//	     DisableDocumentTags: false, // this means use document tag if available
//     }
//     ex, err := NewWithOptions(page, options)
//     // handle error
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle error
//     lists := pageText.List()
//     txt := lists.Text()
func (_cbfa PageText )List ()lists {_eabg :=!_cbfa ._gcef ._afcc ;_feggc :=_cbfa .getParagraphs ();_baad :=true ;if _cbfa ._gaca ==nil ||*_cbfa ._gaca ==nil {_baad =false ;};_eggc :=_feggc .list ();if _baad &&_eabg {_gcefc :=_cgbe (&_feggc );_fefa :=&structTreeRoot {};
_fefa .parseStructTreeRoot (*_cbfa ._gaca );if _fefa ._cffd ==nil {_fbe .Log .Debug ("\u004c\u0069\u0073\u0074\u003a\u0020\u0073t\u0072\u0075\u0063\u0074\u0054\u0072\u0065\u0065\u0052\u006f\u006f\u0074\u0020\u0064\u006f\u0065\u0073\u006e'\u0074\u0020\u0068\u0061\u0076e\u0020\u0061\u006e\u0079\u0020\u0063\u006f\u006e\u0074e\u006e\u0074\u002c\u0020\u0075\u0073\u0069\u006e\u0067\u0020\u0074\u0065\u0078\u0074\u0020\u006d\u0061\u0074\u0063\u0068\u0069\u006e\u0067\u0020\u006d\u0065\u0074\u0068\u006f\u0064\u0020\u0069\u006e\u0073\u0074\u0065\u0061\u0064\u002e");
return _eggc ;};_eggc =_fefa .buildList (_gcefc ,_cbfa ._fdee );};return _eggc ;};func _bbegc (_dfcd ,_gfbg float64 )string {_gabg :=!_ffac (_dfcd -_gfbg );if _gabg {return "\u000a";};return "\u0020";};func (_bage rulingList )vertsHorzs ()(rulingList ,rulingList ){var _gabgd ,_cggc rulingList ;
for _ ,_cgce :=range _bage {switch _cgce ._dbeg {case _edcaf :_gabgd =append (_gabgd ,_cgce );case _bggf :_cggc =append (_cggc ,_cgce );};};return _gabgd ,_cggc ;};

// String returns a human readable description of `path`.
func (_cda *subpath )String ()string {_gdded :=_cda ._baeb ;_gbea :=len (_gdded );if _gbea <=5{return _cd .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_gbea ,_gdded );};return _cd .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_gbea ,_gdded [0],_gdded [1],_gdded [_gbea -1]);
};func _ebec (_aceb *wordBag ,_ecee int )*textLine {_ffdc :=_aceb .firstWord (_ecee );_eaded :=textLine {PdfRectangle :_ffdc .PdfRectangle ,_cfaa :_ffdc ._fbdaf ,_fdgf :_ffdc ._ccfce };_eaded .pullWord (_aceb ,_ffdc ,_ecee );return &_eaded ;};var _cgdgef *_fbc .Regexp =_fbc .MustCompile (_edec +"\u007c"+_fdgdf );
func (_edf *textObject )setTextRenderMode (_feb int ){if _edf ==nil {return ;};_edf ._geeg ._ecg =RenderMode (_feb );};func (_acgdd *textWord )addDiacritic (_efbgf string ){_ccadg :=_acgdd ._dbcbg [len (_acgdd ._dbcbg )-1];_ccadg ._gbee +=_efbgf ;_ccadg ._gbee =_eg .NFKC .String (_ccadg ._gbee );
};func _agacf (_dbdda string )(string ,bool ){_cfeeg :=[]rune (_dbdda );if len (_cfeeg )!=1{return "",false ;};_ddbgb ,_feec :=_eebge [_cfeeg [0]];return _ddbgb ,_feec ;};func _dbea (_adff _ce .PdfRectangle )rulingKind {_accde :=_adff .Width ();_cccfd :=_adff .Height ();
if _accde > _cccfd {if _accde >=_egbd {return _bggf ;};}else {if _cccfd >=_egbd {return _edcaf ;};};return _feebd ;};func _fedf (_gdaf ,_gabeg bounded )float64 {_gbed :=_cgfg (_gdaf ,_gabeg );if !_ffac (_gbed ){return _gbed ;};return _ffb (_gdaf ,_gabeg );
};type structTreeRoot struct{_cffd []structElement ;_bcdb string ;};func (_eddf paraList )llyOrdering ()[]int {_eefc :=make ([]int ,len (_eddf ));for _abgfb :=range _eddf {_eefc [_abgfb ]=_abgfb ;};_d .SliceStable (_eefc ,func (_ecacf ,_afge int )bool {_aecfc ,_cbbg :=_eefc [_ecacf ],_eefc [_afge ];
return _eddf [_aecfc ].Lly < _eddf [_cbbg ].Lly ;});return _eefc ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_ce .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_gab *imageExtractContext )extractFormImages (_fc *_ga .PdfObjectName ,_beb _aa .GraphicsState ,_gga *_ce .PdfPageResources )error {_ebca ,_accf :=_gga .GetXObjectFormByName (*_fc );if _accf !=nil {return _accf ;};if _ebca ==nil {return nil ;
};_bfgf ,_accf :=_ebca .GetContentStream ();if _accf !=nil {return _accf ;};_ffa :=_ebca .Resources ;if _ffa ==nil {_ffa =_gga ;};_accf =_gab .extractContentStreamImages (string (_bfgf ),_ffa );if _accf !=nil {return _accf ;};_gab ._acb ++;return nil ;
};func (_ebcaa *textPara )getListLines ()[]*textLine {var _aeba []*textLine ;_aggg :=_ceefg (_ebcaa ._aebf );for _ ,_eecga :=range _ebcaa ._aebf {_ggaf :=_eecga ._gggb [0]._abgea [0];if _gegf (_ggaf ){_aeba =append (_aeba ,_eecga );};};_aeba =append (_aeba ,_aggg ...);
return _aeba ;};func (_adef *textLine )markWordBoundaries (){_bgba :=_bcfe *_adef ._cfaa ;for _adcf ,_fagd :=range _adef ._gggb [1:]{if _dgefa (_fagd ,_adef ._gggb [_adcf ])>=_bgba {_fagd ._bfgfa =true ;};};};func _bafca (_abgfge string )bool {for _ ,_bagcg :=range _abgfge {if !_fd .IsSpace (_bagcg ){return false ;
};};return true ;};func (_bbac *wordBag )text ()string {_debg :=_bbac .allWords ();_bbc :=make ([]string ,len (_debg ));for _bbeg ,_ggag :=range _debg {_bbc [_bbeg ]=_ggag ._abgea ;};return _ff .Join (_bbc ,"\u0020");};func _eeff (_abeb ,_ddff _ee .Point )bool {_fcfbc :=_c .Abs (_abeb .X -_ddff .X );
_feaea :=_c .Abs (_abeb .Y -_ddff .Y );return _adgba (_fcfbc ,_feaea );};

// String returns a description of `state`.
func (_ffg *textState )String ()string {_edde :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _ffg ._eggb !=nil {_edde =_ffg ._eggb .BaseFont ();};return _cd .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_ffg ._adbb ,_ffg ._dafg ,_ffg ._eab ,_edde );
};

// Font represents the font properties on a PDF page.
type Font struct{PdfFont *_ce .PdfFont ;

// FontName represents Font Name from font properties.
FontName string ;

// FontType represents Font Subtype entry in the font dictionary inside page resources.
// Examples : type0, Type1, MMType1, Type3, TrueType, CIDFont.
FontType string ;

// ToUnicode is true if font provides a `ToUnicode` mapping.
ToUnicode bool ;

// IsCID is true if underlying font is a composite font.
// Composite font is represented by a font dictionary whose Subtype is `Type0`
IsCID bool ;

// IsSimple is true if font is simple font.
// A simple font is limited to only 8 bit (255) character codes.
IsSimple bool ;

// FontData represents the raw data of the embedded font file.
// It can have format TrueType (TTF), PostScript Font (PFB) or Compact Font Format (CCF).
// FontData value can be indicates from `FontFile`, `FontFile2` or `FontFile3` inside Font Descriptor.
// At most, only one of `FontFile`, `FontFile2` or `FontFile3` will be FontData value.
FontData []byte ;

// FontFileName is a name representing the font. it has format:
// (Font Name) + (Font Type Extension), example: helvetica.ttf.
FontFileName string ;

// FontDescriptor represents metrics and other attributes inside font properties from PDF Structure (Font Descriptor).
FontDescriptor *_ce .PdfFontDescriptor ;};func _bggff (_cegeb ,_dedc _ee .Point )bool {return _cegeb .X ==_dedc .X &&_cegeb .Y ==_dedc .Y };func _fdfc (_fdbg int ,_edac map[int ][]float64 )([]int ,int ){_dbbac :=make ([]int ,_fdbg );_acac :=0;for _efee :=0;
_efee < _fdbg ;_efee ++{_dbbac [_efee ]=_acac ;_acac +=len (_edac [_efee ])+1;};return _dbbac ,_acac ;};func _fecc (_beag []pathSection )rulingList {_dbaa (_beag );if _ggac {_fbe .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_beag ));
};var _fedc rulingList ;for _ ,_cdgce :=range _beag {for _ ,_ggee :=range _cdgce ._accg {if !_ggee .isQuadrilateral (){if _ggac {_fbe .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_ggee );
};continue ;};if _aebc ,_gebdc :=_ggee .makeRectRuling (_cdgce .Color );_gebdc {_fedc =append (_fedc ,_aebc );}else {if _fcgf {_fbe .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_ggee );
};};};};if _ggac {_fbe .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_fedc .String ());};return _fedc ;};func (_bccfa *textTable )subdivide ()*textTable {_bccfa .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_abgda :=_bccfa .compositeRowCorridors ();_ggadg :=_bccfa .compositeColCorridors ();if _dgfg {_fbe .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_bdadc (_abgda ),_bdadc (_ggadg ));
};if len (_abgda )==0||len (_ggadg )==0{return _bccfa ;};_bffc (_abgda );_bffc (_ggadg );if _dgfg {_fbe .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_bdadc (_abgda ),_bdadc (_ggadg ));
};_dgdab ,_ffbd :=_fdfc (_bccfa ._cdgcb ,_abgda );_bfce ,_cgcb :=_fdfc (_bccfa ._dbdfe ,_ggadg );_eaefc :=make (map[uint64 ]*textPara ,_cgcb *_ffbd );_gccf :=&textTable {PdfRectangle :_bccfa .PdfRectangle ,_cffg :_bccfa ._cffg ,_cdgcb :_ffbd ,_dbdfe :_cgcb ,_acabfd :_eaefc };
if _dgfg {_fbe .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_bccfa ._dbdfe ,_bccfa ._cdgcb ,_cgcb ,_ffbd ,_bdadc (_abgda ),_bdadc (_ggadg ),_dgdab ,_bfce );
};for _aadcc :=0;_aadcc < _bccfa ._cdgcb ;_aadcc ++{_cdcfc :=_dgdab [_aadcc ];for _adaab :=0;_adaab < _bccfa ._dbdfe ;_adaab ++{_afcab :=_bfce [_adaab ];if _dgfg {_cd .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_adaab ,_aadcc ,_afcab ,_cdcfc );
};_bgda ,_efeab :=_bccfa ._bbedb [_egdege (_adaab ,_aadcc )];if !_efeab {continue ;};_bdad :=_bgda .split (_abgda [_aadcc ],_ggadg [_adaab ]);for _cbgg :=0;_cbgg < _bdad ._cdgcb ;_cbgg ++{for _acdcf :=0;_acdcf < _bdad ._dbdfe ;_acdcf ++{_ddad :=_bdad .get (_acdcf ,_cbgg );
_gccf .put (_afcab +_acdcf ,_cdcfc +_cbgg ,_ddad );if _dgfg {_cd .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_afcab +_acdcf ,_cdcfc +_cbgg ,_ddad );};};};};};return _gccf ;};func _dbcb (_gbge map[float64 ][]*textLine )[]float64 {_afgc :=[]float64 {};
for _daae :=range _gbge {_afgc =append (_afgc ,_daae );};_d .Float64s (_afgc );return _afgc ;};

// PageTextOptions holds various options available in extraction process.
type PageTextOptions struct{_afcc bool ;_gadga bool ;};func (_dde *textObject )checkOp (_gbcf *_aa .ContentStreamOperation ,_fcfa int ,_feda bool )(_bacd bool ,_fcb error ){if _dde ==nil {var _eagb []_ga .PdfObject ;if _fcfa > 0{_eagb =_gbcf .Params ;if len (_eagb )> _fcfa {_eagb =_eagb [:_fcfa ];
};};_fbe .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_gbcf .Operand ,_eagb );};if _fcfa >=0{if len (_gbcf .Params )!=_fcfa {if _feda {_fcb =_b .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");
};_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_gbcf .Operand ,_fcfa ,len (_gbcf .Params ),_gbcf .Params );
return false ,_fcb ;};};return true ,nil ;};func (_bcc *imageExtractContext )extractContentStreamImages (_gbc string ,_gfcc *_ce .PdfPageResources )error {_fec :=_aa .NewContentStreamParser (_gbc );_db ,_ada :=_fec .Parse ();if _ada !=nil {return _ada ;
};if _bcc ._fea ==nil {_bcc ._fea =map[*_ga .PdfObjectStream ]*cachedImage {};};if _bcc ._cge ==nil {_bcc ._cge =&ImageExtractOptions {};};_cfd :=_aa .NewContentStreamProcessor (*_db );_cfd .AddHandler (_aa .HandlerConditionEnumAllOperands ,"",_bcc .processOperand );
return _cfd .Process (_gfcc );};func _ddec (_bgdfg ,_bagd *textPara )bool {if _bgdfg ._bdfb ||_bagd ._bdfb {return true ;};return _ffac (_bgdfg .depth ()-_bagd .depth ());};func (_dabb *ruling )gridIntersecting (_ebeb *ruling )bool {return _dcec (_dabb ._fcbf ,_ebeb ._fcbf )&&_dcec (_dabb ._ddgdc ,_ebeb ._ddgdc );
};

// String returns a description of `v`.
func (_cbbe *ruling )String ()string {if _cbbe ._dbeg ==_feebd {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_dgff ,_abef :="\u0078","\u0079";if _cbbe ._dbeg ==_bggf {_dgff ,_abef ="\u0079","\u0078";};_ffagd :="";if _cbbe ._bfade !=0.0{_ffagd =_cd .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_cbbe ._bfade );
};return _cd .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_cbbe ._dbeg ,_dgff ,_cbbe ._befa ,_abef ,_cbbe ._fcbf ,_cbbe ._ddgdc ,_cbbe ._ddgdc -_cbbe ._fcbf ,_cbbe ._ccga ,_cbbe .Color ,_ffagd );
};func _gdae (_fecdb *wordBag ,_eacg *textWord ,_ffdd float64 )bool {return _eacg .Llx < _fecdb .Urx +_ffdd &&_fecdb .Llx -_ffdd < _eacg .Urx ;};type textState struct{_adbb float64 ;_dafg float64 ;_adgf float64 ;_dff float64 ;_eab float64 ;_ecg RenderMode ;
_gbfa float64 ;_eggb *_ce .PdfFont ;_ecab _ce .PdfRectangle ;_egac int ;_bbe int ;};func (_bcbe *wordBag )minDepth ()float64 {return _bcbe ._cgbc -(_bcbe .Ury -_bcbe ._effd )};func (_ccbd lineRuling )asRuling ()(*ruling ,bool ){_acab :=ruling {_dbeg :_ccbd ._bcbdg ,Color :_ccbd .Color ,_ccga :_cedaa };
switch _ccbd ._bcbdg {case _edcaf :_acab ._befa =_ccbd .xMean ();_acab ._fcbf =_c .Min (_ccbd ._bcfbf .Y ,_ccbd ._bccb .Y );_acab ._ddgdc =_c .Max (_ccbd ._bcfbf .Y ,_ccbd ._bccb .Y );case _bggf :_acab ._befa =_ccbd .yMean ();_acab ._fcbf =_c .Min (_ccbd ._bcfbf .X ,_ccbd ._bccb .X );
_acab ._ddgdc =_c .Max (_ccbd ._bcfbf .X ,_ccbd ._bccb .X );default:_fbe .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ccbd ._bcbdg );return nil ,false ;};return &_acab ,true ;};
func (_agagf *subpath )add (_fgff ..._ee .Point ){_agagf ._baeb =append (_agagf ._baeb ,_fgff ...)};func _caffb (_gfbd *textWord ,_dcb float64 ,_feee ,_cffb rulingList )*wordBag {_eaeb :=_fcggf (_gfbd ._ccfce );_fcgg :=[]*textWord {_gfbd };_gebd :=wordBag {_effb :map[int ][]*textWord {_eaeb :_fcgg },PdfRectangle :_gfbd .PdfRectangle ,_effd :_gfbd ._fbdaf ,_cgbc :_dcb ,_efadd :_feee ,_dfbg :_cffb };
return &_gebd ;};func (_adag *ruling )intersects (_bbefd *ruling )bool {_caab :=(_adag ._dbeg ==_edcaf &&_bbefd ._dbeg ==_bggf )||(_bbefd ._dbeg ==_edcaf &&_adag ._dbeg ==_bggf );_edfc :=func (_cbag ,_abbef *ruling )bool {return _cbag ._fcbf -_gccb <=_abbef ._befa &&_abbef ._befa <=_cbag ._ddgdc +_gccb ;
};_efdcb :=_edfc (_adag ,_bbefd );_bbfca :=_edfc (_bbefd ,_adag );if _ggac {_cd .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_caab ,_efdcb ,_bbfca ,_caab &&_efdcb &&_bbfca ,_adag ,_bbefd );
};return _caab &&_efdcb &&_bbfca ;};func (_eddba paraList )extractTables (_egee []gridTiling )paraList {if _dgfg {_fbe .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eddba ));
};if len (_eddba )< _fca {return _eddba ;};_gbab :=_eddba .findTables (_egee );if _dgfg {_fbe .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_gbab ));
for _eegb ,_gdeae :=range _gbab {_gdeae .log (_cd .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_eegb ));};};return _eddba .applyTables (_gbab );};

// Elements returns the TextMarks in `ma`.
func (_fgaa *TextMarkArray )Elements ()[]TextMark {return _fgaa ._cff };func (_ddfc rulingList )primMinMax ()(float64 ,float64 ){_cgcf ,_dbddb :=_ddfc [0]._befa ,_ddfc [0]._befa ;for _ ,_dggg :=range _ddfc [1:]{if _dggg ._befa < _cgcf {_cgcf =_dggg ._befa ;
}else if _dggg ._befa > _dbddb {_dbddb =_dggg ._befa ;};};return _cgcf ,_dbddb ;};func (_bc *PageFonts )extractPageResourcesToFont (_cfe *_ce .PdfPageResources )error {_ba ,_cb :=_ga .GetDict (_cfe .Font );if !_cb {return _b .New (_agb );};for _ ,_fe :=range _ba .Keys (){var (_gecc =true ;
_eef []byte ;_afe string ;);_dfa ,_cg :=_cfe .GetFontByName (_fe );if !_cg {return _b .New (_ac );};_bfg ,_cdf :=_ce .NewPdfFontFromPdfObject (_dfa );if _cdf !=nil {return _cdf ;};_gef :=_bfg .FontDescriptor ();_abb :=_bfg .FontDescriptor ().FontName .String ();
_dcf :=_bfg .Subtype ();if _gebb (_bc .Fonts ,_abb ){continue ;};if len (_bfg .ToUnicode ())==0{_gecc =false ;};if _gef .FontFile !=nil {if _be ,_aaef :=_ga .GetStream (_gef .FontFile );_aaef {_eef ,_cdf =_ga .DecodeStream (_be );if _cdf !=nil {return _cdf ;
};_afe =_abb +"\u002e\u0070\u0066\u0062";};}else if _gef .FontFile2 !=nil {if _acc ,_fg :=_ga .GetStream (_gef .FontFile2 );_fg {_eef ,_cdf =_ga .DecodeStream (_acc );if _cdf !=nil {return _cdf ;};_afe =_abb +"\u002e\u0074\u0074\u0066";};}else if _gef .FontFile3 !=nil {if _dfe ,_bff :=_ga .GetStream (_gef .FontFile3 );
_bff {_eef ,_cdf =_ga .DecodeStream (_dfe );if _cdf !=nil {return _cdf ;};_afe =_abb +"\u002e\u0063\u0066\u0066";};};if len (_afe )< 1{_fbe .Log .Debug (_dd );};_ad :=Font {FontName :_abb ,PdfFont :_bfg ,IsCID :_bfg .IsCID (),IsSimple :_bfg .IsSimple (),ToUnicode :_gecc ,FontType :_dcf ,FontData :_eef ,FontFileName :_afe ,FontDescriptor :_gef };
_bc .Fonts =append (_bc .Fonts ,_ad );};return nil ;};func (_faf *imageExtractContext )processOperand (_bag *_aa .ContentStreamOperation ,_ef _aa .GraphicsState ,_gfce *_ce .PdfPageResources )error {if _bag .Operand =="\u0042\u0049"&&len (_bag .Params )==1{_fgc ,_abc :=_bag .Params [0].(*_aa .ContentStreamInlineImage );
if !_abc {return nil ;};if _fafe ,_abg :=_ga .GetBoolVal (_fgc .ImageMask );_abg {if _fafe &&!_faf ._cge .IncludeInlineStencilMasks {return nil ;};};return _faf .extractInlineImage (_fgc ,_ef ,_gfce );}else if _bag .Operand =="\u0044\u006f"&&len (_bag .Params )==1{_dce ,_gbg :=_ga .GetName (_bag .Params [0]);
if !_gbg {_fbe .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _gb ;};_ ,_adg :=_gfce .GetXObjectByName (*_dce );switch _adg {case _ce .XObjectTypeImage :return _faf .extractXObjectImage (_dce ,_ef ,_gfce );case _ce .XObjectTypeForm :return _faf .extractFormImages (_dce ,_ef ,_gfce );
};}else if _faf ._bb &&(_bag .Operand =="\u0073\u0063\u006e"||_bag .Operand =="\u0053\u0043\u004e")&&len (_bag .Params )==1{_eae ,_agba :=_ga .GetName (_bag .Params [0]);if !_agba {_fbe .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");
return _gb ;};_bg ,_agba :=_gfce .GetPatternByName (*_eae );if !_agba {_fbe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0050\u0061\u0074\u0074\u0065\u0072n\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064");return nil ;};if _bg .IsTiling (){_dfae :=_bg .GetAsTilingPattern ();
_adb ,_aaf :=_dfae .GetContentStream ();if _aaf !=nil {return _aaf ;};_aaf =_faf .extractContentStreamImages (string (_adb ),_dfae .Resources );if _aaf !=nil {return _aaf ;};};}else if (_bag .Operand =="\u0063\u0073"||_bag .Operand =="\u0043\u0053")&&len (_bag .Params )>=1{_faf ._bb =_bag .Params [0].String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e";
};return nil ;};func (_gece *shapesState )lastpointEstablished ()(_ee .Point ,bool ){if _gece ._gfde {return _gece ._ggbb ,false ;};_bcgd :=len (_gece ._ggdf );if _bcgd > 0&&_gece ._ggdf [_bcgd -1]._gadge {return _gece ._ggdf [_bcgd -1].last (),false ;
};return _ee .Point {},true ;};func (_fgfb *shapesState )clearPath (){_fgfb ._ggdf =nil ;_fgfb ._gfde =false ;if _dbbd {_fbe .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_fgfb );};};func (_caff *shapesState )stroke (_cac *[]pathSection ){_dfdf :=pathSection {_accg :_caff ._ggdf ,Color :_caff ._edcc .getStrokeColor ()};
*_cac =append (*_cac ,_dfdf );if _ggac {_cd .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_cac ),_caff ,_caff ._edcc .getStrokeColor (),_dfdf .bbox ());
if _ecff {for _aaec ,_bea :=range _caff ._ggdf {_cd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aaec ,_bea );if _aaec ==10{break ;};};};};};func (_fffe *subpath )removeDuplicates (){if len (_fffe ._baeb )==0{return ;};_bge :=[]_ee .Point {_fffe ._baeb [0]};
for _ ,_ebea :=range _fffe ._baeb [1:]{if !_bggff (_ebea ,_bge [len (_bge )-1]){_bge =append (_bge ,_ebea );};};_fffe ._baeb =_bge ;};func (_begcg paraList )writeText (_aff _fb .Writer ){for _bgfc ,_gfbf :=range _begcg {if _gfbf ._bdfb {continue ;};_gfbf .writeText (_aff );
if _bgfc !=len (_begcg )-1{if _ddec (_gfbf ,_begcg [_bgfc +1]){_aff .Write ([]byte ("\u0020"));}else {_aff .Write ([]byte ("\u000a"));_aff .Write ([]byte ("\u000a"));};};};_aff .Write ([]byte ("\u000a"));_aff .Write ([]byte ("\u000a"));};func (_egaf *shapesState )quadraticTo (_geac ,_abdb ,_bdgf ,_gca float64 ){if _dbbd {_fbe .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_egaf .addPoint (_bdgf ,_gca );};func (_gbfg *ruling )alignsSec (_edbdd *ruling )bool {const _acabf =_gada +1.0;return _gbfg ._fcbf -_acabf <=_edbdd ._ddgdc &&_edbdd ._fcbf -_acabf <=_gbfg ._ddgdc ;};func (_bddg *shapesState )devicePoint (_cgdge ,_dcc float64 )_ee .Point {_ddbf :=_bddg ._cdd .Mult (_bddg ._cfcc );
_cgdge ,_dcc =_ddbf .Transform (_cgdge ,_dcc );return _ee .NewPoint (_cgdge ,_dcc );};func (_fgfg *textPara )toCellTextMarks (_gdfbg *int )[]TextMark {var _defg []TextMark ;for _bcab ,_dffff :=range _fgfg ._aebf {_ffdcge :=_dffff .toTextMarks (_gdfbg );
_abeg :=_fcba &&_dffff .endsInHyphen ()&&_bcab !=len (_fgfg ._aebf )-1;if _abeg {_ffdcge =_dggc (_ffdcge ,_gdfbg );};_defg =append (_defg ,_ffdcge ...);if !(_abeg ||_bcab ==len (_fgfg ._aebf )-1){_defg =_baea (_defg ,_gdfbg ,_bbegc (_dffff ._fdgf ,_fgfg ._aebf [_bcab +1]._fdgf ));
};};return _defg ;};func (_gdeg *textObject )setWordSpacing (_bae float64 ){if _gdeg ==nil {return ;};_gdeg ._geeg ._dafg =_bae ;};func (_dfbb *textLine )bbox ()_ce .PdfRectangle {return _dfbb .PdfRectangle };func _dcec (_ddgf ,_abcb float64 )bool {return _c .Abs (_ddgf -_abcb )<=_gccb };
func (_acg paraList )lines ()[]*textLine {var _feeg []*textLine ;for _ ,_dcdb :=range _acg {_feeg =append (_feeg ,_dcdb ._aebf ...);};return _feeg ;};func _fbfe (_aaag []*textMark ,_gagae _ce .PdfRectangle )[]*textWord {var _gafdc []*textWord ;var _fabd *textWord ;
if _gdaed {_fbe .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_aaag ));};_gcac :=func (){if _fabd !=nil {_edbcc :=_fabd .computeText ();if !_bafca (_edbcc ){_fabd ._abgea =_edbcc ;
_gafdc =append (_gafdc ,_fabd );if _gdaed {_fbe .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_gafdc )-1,_fabd .String ());for _cageg ,_debdc :=range _fabd ._dbcbg {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cageg ,_debdc .String ());
};};};_fabd =nil ;};};for _ ,_adde :=range _aaag {if _cgdgee &&_fabd !=nil &&len (_fabd ._dbcbg )> 0{_aefcf :=_fabd ._dbcbg [len (_fabd ._dbcbg )-1];_cgbgd ,_edcaa :=_agacf (_adde ._gbee );_bbdb ,_fgcab :=_agacf (_aefcf ._gbee );if _edcaa &&!_fgcab &&_aefcf .inDiacriticArea (_adde ){_fabd .addDiacritic (_cgbgd );
continue ;};if _fgcab &&!_edcaa &&_adde .inDiacriticArea (_aefcf ){_fabd ._dbcbg =_fabd ._dbcbg [:len (_fabd ._dbcbg )-1];_fabd .appendMark (_adde ,_gagae );_fabd .addDiacritic (_bbdb );continue ;};};_ddag :=_bafca (_adde ._gbee );if _ddag {_gcac ();continue ;
};if _fabd ==nil &&!_ddag {_fabd =_dbabb ([]*textMark {_adde },_gagae );continue ;};_dadd :=_fabd ._fbdaf ;_gege :=_c .Abs (_ddfb (_gagae ,_adde )-_fabd ._ccfce )/_dadd ;_fagef :=_dgefa (_adde ,_fabd )/_dadd ;if _fagef >=_fbbc ||!(-_gdbf <=_fagef &&_gege <=_bbde ){_gcac ();
_fabd =_dbabb ([]*textMark {_adde },_gagae );continue ;};_fabd .appendMark (_adde ,_gagae );};_gcac ();return _gafdc ;};func (_edaf gridTiling )log (_deab string ){if !_egc {return ;};_fbe .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_edaf ._gebbd ),len (_edaf ._eaae ),_deab );
_cd .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_edaf ._gebbd );_cd .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_edaf ._eaae );for _bbbg ,_adae :=range _edaf ._eaae {_agaaf ,_cgdec :=_edaf ._dagd [_adae ];
if !_cgdec {continue ;};_cd .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_bbbg ,_adae );for _eeeg ,_ccce :=range _edaf ._gebbd {_bbab ,_agfc :=_agaaf [_ccce ];if !_agfc {continue ;};_cd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_eeeg ,_bbab .String ());
};};};func _aafec (_egaeb []_ga .PdfObject )(_gcfbdb ,_effdb float64 ,_fafc error ){if len (_egaeb )!=2{return 0,0,_cd .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_egaeb ));
};_ccgcf ,_fafc :=_ga .GetNumbersAsFloat (_egaeb );if _fafc !=nil {return 0,0,_fafc ;};return _ccgcf [0],_ccgcf [1],nil ;};func (_gddeg rulingList )splitSec ()[]rulingList {_d .Slice (_gddeg ,func (_fdga ,_gaga int )bool {_ffbc ,_befeg :=_gddeg [_fdga ],_gddeg [_gaga ];
if _ffbc ._fcbf !=_befeg ._fcbf {return _ffbc ._fcbf < _befeg ._fcbf ;};return _ffbc ._ddgdc < _befeg ._ddgdc ;});_efdda :=make (map[*ruling ]struct{},len (_gddeg ));_eccf :=func (_dbedab *ruling )rulingList {_beggd :=rulingList {_dbedab };_efdda [_dbedab ]=struct{}{};
for _ ,_cedf :=range _gddeg {if _ ,_gdfba :=_efdda [_cedf ];_gdfba {continue ;};for _ ,_ccgff :=range _beggd {if _cedf .alignsSec (_ccgff ){_beggd =append (_beggd ,_cedf );_efdda [_cedf ]=struct{}{};break ;};};};return _beggd ;};_egfed :=[]rulingList {_eccf (_gddeg [0])};
for _ ,_bfef :=range _gddeg [1:]{if _ ,_afef :=_efdda [_bfef ];_afef {continue ;};_egfed =append (_egfed ,_eccf (_bfef ));};return _egfed ;};func _dbdc (_gfbff ,_fdef int )int {if _gfbff > _fdef {return _gfbff ;};return _fdef ;};

// String returns a description of `p`.
func (_dadbc *textPara )String ()string {if _dadbc ._bdfb {return _cd .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_dadbc .PdfRectangle );};_fbcce :="";if _dadbc ._ffdf !=nil {_fbcce =_cd .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_dadbc ._ffdf ._dbdfe ,_dadbc ._ffdf ._cdgcb );
};return _cd .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_dadbc .PdfRectangle ,_fbcce ,len (_dadbc ._aebf ),_ggaa (_dadbc .text (),50));};type rectRuling struct{_dgac rulingKind ;
_fbbfa markKind ;_fa .Color ;_ce .PdfRectangle ;};func _dgdf (_eadf []compositeCell )[]float64 {var _aaeac []*textLine ;_aebb :=0;for _ ,_bfcb :=range _eadf {_aebb +=len (_bfcb .paraList );_aaeac =append (_aaeac ,_bfcb .lines ()...);};_d .Slice (_aaeac ,func (_bdbfg ,_dacec int )bool {_gagg ,_acaegc :=_aaeac [_bdbfg ],_aaeac [_dacec ];
_eeceb ,_fegge :=_gagg ._fdgf ,_acaegc ._fdgf ;if !_ffac (_eeceb -_fegge ){return _eeceb < _fegge ;};return _gagg .Llx < _acaegc .Llx ;});if _dgfg {_cd .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_aebb ,len (_aaeac ));
for _agfeg ,_bdgb :=range _aaeac {_cd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_agfeg ,_bdgb );};};var _fccg []float64 ;_baagf :=_aaeac [0];var _fdfcg [][]*textLine ;_caadb :=[]*textLine {_baagf };for _efbfd ,_ebecd :=range _aaeac [1:]{if _ebecd .Ury < _baagf .Lly {_bfadf :=0.5*(_ebecd .Ury +_baagf .Lly );
if _dgfg {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_efbfd ,_ebecd .Ury ,_baagf .Lly ,_bfadf ,_baagf ,_ebecd );
};_fccg =append (_fccg ,_bfadf );_fdfcg =append (_fdfcg ,_caadb );_caadb =nil ;};_caadb =append (_caadb ,_ebecd );if _ebecd .Lly < _baagf .Lly {_baagf =_ebecd ;};};if len (_caadb )> 0{_fdfcg =append (_fdfcg ,_caadb );};if _dgfg {_cd .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_fccg );
};if _dgfg {_fbe .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_eadf ));for _cedgff ,_befee :=range _eadf {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cedgff ,_befee );};_fbe .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_fdfcg ));
for _deece ,_acaa :=range _fdfcg {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_deece ,len (_acaa ));for _baab ,_fbff :=range _acaa {_cd .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_baab ,_fbff );};};};_fbffb :=true ;
for _fcef ,_gcda :=range _fdfcg {_ababa :=true ;for _agbe ,_geegb :=range _eadf {if _dgfg {_cd .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_fcef ,len (_fdfcg ),_agbe ,len (_eadf ),_geegb );
};if !_geegb .hasLines (_gcda ){if _dgfg {_cd .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_fcef ,len (_fdfcg ),_agbe ,len (_eadf ));
};_ababa =false ;break ;};};if !_ababa {_fbffb =false ;break ;};};if !_fbffb {if _dgfg {_fbe .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_fccg =nil ;};if _dgfg &&_fccg !=nil {_cd .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_fccg );};return _fccg ;};


// Text returns the text content of the `bulletLists`.
func (_efg *lists )Text ()string {_ebcg :=&_ff .Builder {};for _ ,_aacb :=range *_efg {_gcbba :=_aacb .Text ();_ebcg .WriteString (_gcbba );};return _ebcg .String ();};func _dddc (_bcdc []*textLine ,_defa ,_ebbf float64 )[]*textLine {var _fdbe []*textLine ;
for _ ,_dgaa :=range _bcdc {if _defa ==-1{if _dgaa ._fdgf > _ebbf {_fdbe =append (_fdbe ,_dgaa );};}else {if _dgaa ._fdgf > _ebbf &&_dgaa ._fdgf < _defa {_fdbe =append (_fdbe ,_dgaa );};};};return _fdbe ;};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//
//	Replace with a function like Extract() (*PageText, error)
func (_abf *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_fcd ,_dgd ,_eff ,_efb :=_abf .extractPageText (_abf ._af ,_abf ._eb ,_ee .IdentityMatrix (),0);if _efb !=nil &&_efb !=_ce .ErrColorOutOfRange {return nil ,0,0,_efb ;};if _abf ._df !=nil {_fcd ._gcef ._gadga =_abf ._df .UseSimplerExtractionProcess ;
};_fcd .computeViews ();_efb =_gdffbe (_fcd );if _efb !=nil {return nil ,0,0,_efb ;};if _abf ._df !=nil {if _abf ._df .ApplyCropBox &&_abf ._geb !=nil {_fcd .ApplyArea (*_abf ._geb );};_fcd ._gcef ._afcc =_abf ._df .DisableDocumentTags ;};return _fcd ,_dgd ,_eff ,nil ;
};func (_bcea *textWord )toTextMarks (_dfbba *int )[]TextMark {var _bgeca []TextMark ;for _ ,_ebac :=range _bcea ._dbcbg {_bgeca =_eddd (_bgeca ,_dfbba ,_ebac .ToTextMark ());};return _bgeca ;};func (_ccgfa paraList )sortTopoOrder (){_cegdb :=_ccgfa .topoOrder ();
_ccgfa .reorder (_cegdb )};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_aedg *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_ggb :=&imageExtractContext {_cge :options };_caa :=_ggb .extractContentStreamImages (_aedg ._af ,_aedg ._eb );if _caa !=nil {return nil ,_caa ;};return &PageImages {Images :_ggb ._cdg },nil ;
};func (_ebgb *textTable )logComposite (_faef string ){if !_dgfg {return ;};_fbe .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ebgb ._dbdfe ,_ebgb ._cdgcb ,_faef );_cd .Printf ("\u0025\u0035\u0073 \u007c","");
for _edddf :=0;_edddf < _ebgb ._dbdfe ;_edddf ++{_cd .Printf ("\u0025\u0033\u0064 \u007c",_edddf );};_cd .Println ("");_cd .Printf ("\u0025\u0035\u0073 \u002b","");for _afdf :=0;_afdf < _ebgb ._dbdfe ;_afdf ++{_cd .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_cd .Println ("");for _fgae :=0;_fgae < _ebgb ._cdgcb ;_fgae ++{_cd .Printf ("\u0025\u0035\u0064 \u007c",_fgae );for _dbcda :=0;_dbcda < _ebgb ._dbdfe ;_dbcda ++{_febf ,_ :=_ebgb ._bbedb [_egdege (_dbcda ,_fgae )].parasBBox ();_cd .Printf ("\u0025\u0033\u0064 \u007c",len (_febf ));
};_cd .Println ("");};_fbe .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ebgb ._dbdfe ,_ebgb ._cdgcb ,_faef );_cd .Printf ("\u0025\u0035\u0073 \u007c","");for _gegfb :=0;_gegfb < _ebgb ._dbdfe ;
_gegfb ++{_cd .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_gegfb );};_cd .Println ("");_cd .Printf ("\u0025\u0035\u0073 \u002b","");for _cagd :=0;_cagd < _ebgb ._dbdfe ;_cagd ++{_cd .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");
};_cd .Println ("");for _fdgda :=0;_fdgda < _ebgb ._cdgcb ;_fdgda ++{_cd .Printf ("\u0025\u0035\u0064 \u007c",_fdgda );for _fcgbb :=0;_fcgbb < _ebgb ._dbdfe ;_fcgbb ++{_feaac ,_ :=_ebgb ._bbedb [_egdege (_fcgbb ,_fdgda )].parasBBox ();_egdec :="";_edbee :=_feaac .merge ();
if _edbee !=nil {_egdec =_edbee .text ();};_egdec =_cd .Sprintf ("\u0025\u0071",_ggaa (_egdec ,12));_egdec =_egdec [1:len (_egdec )-1];_cd .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_egdec );};_cd .Println ("");};};func (_efad *shapesState )closePath (){if _efad ._gfde {_efad ._ggdf =append (_efad ._ggdf ,_bdc (_efad ._ggbb ));
_efad ._gfde =false ;}else if len (_efad ._ggdf )==0{if _dbbd {_fbe .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_efad ._gfde =false ;return ;};_efad ._ggdf [len (_efad ._ggdf )-1].close ();
if _dbbd {_fbe .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_efad );};};func (_dcca *textObject )newTextMark (_dfgde string ,_eegd _ee .Matrix ,_gdba _ee .Point ,_baca float64 ,_bcaf *_ce .PdfFont ,_ebbbf float64 ,_febcc ,_eedf _fa .Color ,_ffad _ga .PdfObject ,_edca []string ,_cabc int ,_gabec int )(textMark ,bool ){_dgcac :=_eegd .Angle ();
_geab :=_cadabb (_dgcac ,_eagac );var _caga float64 ;if _geab %180!=90{_caga =_eegd .ScalingFactorY ();}else {_caga =_eegd .ScalingFactorX ();};_edef :=_fabc (_eegd );_egbf :=_ce .PdfRectangle {Llx :_edef .X ,Lly :_edef .Y ,Urx :_gdba .X ,Ury :_gdba .Y };
switch _geab %360{case 90:_egbf .Urx -=_caga ;case 180:_egbf .Ury -=_caga ;case 270:_egbf .Urx +=_caga ;case 0:_egbf .Ury +=_caga ;default:_geab =0;_egbf .Ury +=_caga ;};if _egbf .Llx > _egbf .Urx {_egbf .Llx ,_egbf .Urx =_egbf .Urx ,_egbf .Llx ;};if _egbf .Lly > _egbf .Ury {_egbf .Lly ,_egbf .Ury =_egbf .Ury ,_egbf .Lly ;
};_dddae :=true ;if _dcca ._bgcd ._ge .Width ()> 0{_bbfc ,_aegc :=_dgag (_egbf ,_dcca ._bgcd ._ge );if !_aegc {_dddae =false ;_fbe .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_egbf ,_dcca ._bgcd ._ge ,_dfgde );
};_egbf =_bbfc ;};_gcaa :=_egbf ;_gafc :=_dcca ._bgcd ._ge ;switch _geab %360{case 90:_gafc .Urx ,_gafc .Ury =_gafc .Ury ,_gafc .Urx ;_gcaa =_ce .PdfRectangle {Llx :_gafc .Urx -_egbf .Ury ,Urx :_gafc .Urx -_egbf .Lly ,Lly :_egbf .Llx ,Ury :_egbf .Urx };
case 180:_gcaa =_ce .PdfRectangle {Llx :_gafc .Urx -_egbf .Llx ,Urx :_gafc .Urx -_egbf .Urx ,Lly :_gafc .Ury -_egbf .Lly ,Ury :_gafc .Ury -_egbf .Ury };case 270:_gafc .Urx ,_gafc .Ury =_gafc .Ury ,_gafc .Urx ;_gcaa =_ce .PdfRectangle {Llx :_egbf .Ury ,Urx :_egbf .Lly ,Lly :_gafc .Ury -_egbf .Llx ,Ury :_gafc .Ury -_egbf .Urx };
};if _gcaa .Llx > _gcaa .Urx {_gcaa .Llx ,_gcaa .Urx =_gcaa .Urx ,_gcaa .Llx ;};if _gcaa .Lly > _gcaa .Ury {_gcaa .Lly ,_gcaa .Ury =_gcaa .Ury ,_gcaa .Lly ;};_dafe :=textMark {_gbee :_dfgde ,PdfRectangle :_gcaa ,_ffafb :_egbf ,_dadg :_bcaf ,_faae :_caga ,_bgdg :_ebbbf ,_dbgg :_eegd ,_efbe :_gdba ,_cbfbc :_geab ,_deca :_febcc ,_edbfb :_eedf ,_ebdd :_ffad ,_gfbag :_edca ,Th :_dcca ._geeg ._adgf ,Tw :_dcca ._geeg ._dafg ,_aaac :_gabec ,_eabaf :_cabc };
if _gdaed {_fbe .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_edef ,_gdba ,_dafe .String ());};return _dafe ,_dddae ;
};func _dfde (_bbcg ,_dbfb _ce .PdfRectangle )bool {return _dbfb .Llx <=_bbcg .Urx &&_bbcg .Llx <=_dbfb .Urx ;};func (_aaged *textTable )log (_adddc string ){if !_dgfg {return ;};_fbe .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_adddc ,_aaged ._dbdfe ,_aaged ._cdgcb ,_aaged ._cffg ,_aaged .PdfRectangle );
for _fbafd :=0;_fbafd < _aaged ._cdgcb ;_fbafd ++{for _bbdd :=0;_bbdd < _aaged ._dbdfe ;_bbdd ++{_dgdef :=_aaged .get (_bbdd ,_fbafd );if _dgdef ==nil {continue ;};_cd .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_bbdd ,_fbafd ,_dgdef .PdfRectangle ,_ggaa (_dgdef .text (),50),_g .RuneCountInString (_dgdef .text ()));
};};};

// String returns a description of `tm`.
func (_fffg *textMark )String ()string {return _cd .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_fffg .PdfRectangle ,_fffg ._faae ,_fffg ._gbee );};func (_fcae *textPara )toTextMarks (_cgge *int )[]TextMark {if _fcae ._ffdf ==nil {return _fcae .toCellTextMarks (_cgge );
};var _bbfd []TextMark ;for _edecd :=0;_edecd < _fcae ._ffdf ._cdgcb ;_edecd ++{for _fggbe :=0;_fggbe < _fcae ._ffdf ._dbdfe ;_fggbe ++{_adfg :=_fcae ._ffdf .get (_fggbe ,_edecd );if _adfg ==nil {_bbfd =_baea (_bbfd ,_cgge ,"\u0009");}else {_cfgc :=_adfg .toCellTextMarks (_cgge );
_bbfd =append (_bbfd ,_cfgc ...);};_bbfd =_baea (_bbfd ,_cgge ,"\u0020");};if _edecd < _fcae ._ffdf ._cdgcb -1{_bbfd =_baea (_bbfd ,_cgge ,"\u000a");};};_acfg :=_fcae ._ffdf ;if _acfg .isExportable (){_fdbef :=_acfg .toTextTable ();_bbfd =_dega (_bbfd ,&_fdbef );
};return _bbfd ;};const _efda =1.0/1000.0;func (_fddff compositeCell )parasBBox ()(paraList ,_ce .PdfRectangle ){return _fddff .paraList ,_fddff .PdfRectangle ;};func _cdae (_bafcd []*textWord ,_dbege *textWord )[]*textWord {for _gggab ,_dggdd :=range _bafcd {if _dggdd ==_dbege {return _dffg (_bafcd ,_gggab );
};};_fbe .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_dbege );
return nil ;};func _gfbe (_gafff []float64 ,_acfgf ,_ababf float64 )[]float64 {_adfgd ,_agccc :=_acfgf ,_ababf ;if _agccc < _adfgd {_adfgd ,_agccc =_agccc ,_adfgd ;};_faff :=make ([]float64 ,0,len (_gafff )+2);_faff =append (_faff ,_acfgf );for _ ,_begfb :=range _gafff {if _begfb <=_adfgd {continue ;
}else if _begfb >=_agccc {break ;};_faff =append (_faff ,_begfb );};_faff =append (_faff ,_ababf );return _faff ;};func (_dbfba paraList )toTextMarks ()[]TextMark {_gffg :=0;var _aecc []TextMark ;for _eggad ,_baaa :=range _dbfba {if _baaa ._bdfb {continue ;
};_fffa :=_baaa .toTextMarks (&_gffg );_aecc =append (_aecc ,_fffa ...);if _eggad !=len (_dbfba )-1{if _ddec (_baaa ,_dbfba [_eggad +1]){_aecc =_baea (_aecc ,&_gffg ,"\u0020");}else {_aecc =_baea (_aecc ,&_gffg ,"\u000a");_aecc =_baea (_aecc ,&_gffg ,"\u000a");
};};};_aecc =_baea (_aecc ,&_gffg ,"\u000a");_aecc =_baea (_aecc ,&_gffg ,"\u000a");return _aecc ;};func (_gcf *stateStack )size ()int {return len (*_gcf )};func (_dgagb *textLine )endsInHyphen ()bool {_egde :=_dgagb ._gggb [len (_dgagb ._gggb )-1];_dccc :=_egde ._abgea ;
_gfgg ,_gcaf :=_g .DecodeLastRuneInString (_dccc );if _gcaf <=0||!_fd .Is (_fd .Hyphen ,_gfgg ){return false ;};if _egde ._bfgfa &&_ffgg (_dccc ){return true ;};return _ffgg (_dgagb .text ());};type ruling struct{_dbeg rulingKind ;_ccga markKind ;_fa .Color ;
_befa float64 ;_fcbf float64 ;_ddgdc float64 ;_bfade float64 ;};func (_cegee *textWord )absorb (_bbeda *textWord ){_cegee .PdfRectangle =_fgfbb (_cegee .PdfRectangle ,_bbeda .PdfRectangle );_cegee ._dbcbg =append (_cegee ._dbcbg ,_bbeda ._dbcbg ...);};


// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func (_abffe *shapesState )newSubPath (){_abffe .clearPath ();if _dbbd {_fbe .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_abffe );};};func _geg (_fgb *Extractor ,_eaf *_ce .PdfPageResources ,_dac _aa .GraphicsState ,_gecb *textState ,_bed *stateStack )*textObject {return &textObject {_bgcd :_fgb ,_edbe :_eaf ,_dbf :_dac ,_gdgc :_bed ,_geeg :_gecb ,_bfa :_ee .IdentityMatrix (),_fgf :_ee .IdentityMatrix ()};
};func (_fega *wordBag )depthBand (_edba ,_ccfc float64 )[]int {if len (_fega ._effb )==0{return nil ;};return _fega .depthRange (_fega .getDepthIdx (_edba ),_fega .getDepthIdx (_ccfc ));};

// PageFonts represents extracted fonts on a PDF page.
type PageFonts struct{Fonts []Font ;};func (_cedd *wordBag )applyRemovals (_fgffd map[int ]map[*textWord ]struct{}){for _gaged ,_ddea :=range _fgffd {if len (_ddea )==0{continue ;};_edbf :=_cedd ._effb [_gaged ];_gaf :=len (_edbf )-len (_ddea );if _gaf ==0{delete (_cedd ._effb ,_gaged );
continue ;};_cbbfd :=make ([]*textWord ,_gaf );_aace :=0;for _ ,_efcd :=range _edbf {if _ ,_dad :=_ddea [_efcd ];!_dad {_cbbfd [_aace ]=_efcd ;_aace ++;};};_cedd ._effb [_gaged ]=_cbbfd ;};};func (_bgdd *textTable )computeBbox ()_ce .PdfRectangle {var _bccaa _ce .PdfRectangle ;
_bdfd :=false ;for _bbdad :=0;_bbdad < _bgdd ._cdgcb ;_bbdad ++{for _cdacc :=0;_cdacc < _bgdd ._dbdfe ;_cdacc ++{_afbeg :=_bgdd .get (_cdacc ,_bbdad );if _afbeg ==nil {continue ;};if !_bdfd {_bccaa =_afbeg .PdfRectangle ;_bdfd =true ;}else {_bccaa =_fgfbb (_bccaa ,_afbeg .PdfRectangle );
};};};return _bccaa ;};func (_cefc paraList )findTableGrid (_cbacg gridTiling )(*textTable ,map[*textPara ]struct{}){_fcgag :=len (_cbacg ._gebbd );_cdfag :=len (_cbacg ._eaae );_daff :=textTable {_cffg :true ,_dbdfe :_fcgag ,_cdgcb :_cdfag ,_acabfd :make (map[uint64 ]*textPara ,_fcgag *_cdfag ),_bbedb :make (map[uint64 ]compositeCell ,_fcgag *_cdfag )};
_daff .PdfRectangle =_cbacg .PdfRectangle ;_gffed :=make (map[*textPara ]struct{});_ggea :=int ((1.0-_ccaa )*float64 (_fcgag *_cdfag ));_fege :=0;if _egc {_fbe .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_fcgag ,_cdfag );
};for _cbfc ,_cfgfa :=range _cbacg ._eaae {_bfbdf ,_ebggc :=_cbacg ._dagd [_cfgfa ];if !_ebggc {continue ;};for _bcafb ,_ddgfd :=range _cbacg ._gebbd {_bagef ,_dfga :=_bfbdf [_ddgfd ];if !_dfga {continue ;};_edccf :=_cefc .inTile (_bagef );if len (_edccf )==0{_fege ++;
if _fege > _ggea {if _egc {_fbe .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_fege );};return nil ,nil ;};}else {_daff .putComposite (_bcafb ,_cbfc ,_edccf ,_bagef .PdfRectangle );for _ ,_cgbf :=range _edccf {_gffed [_cgbf ]=struct{}{};
};};};};_bgdeg :=0;for _aceg :=0;_aceg < _fcgag ;_aceg ++{_egebf :=_daff .get (_aceg ,0);if _egebf ==nil ||!_egebf ._bdfb {_bgdeg ++;};};if _bgdeg ==0{if _egc {_fbe .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_dcccb :=_daff .reduceTiling (_cbacg ,_aecaf );_dcccb =_dcccb .subdivide ();return _dcccb ,_gffed ;};func (_abec paraList )eventNeighbours (_eadef []event )map[*textPara ][]int {_d .Slice (_eadef ,func (_gced ,_agfb int )bool {_fagc ,_fcfggd :=_eadef [_gced ],_eadef [_agfb ];
_eaad ,_cfcb :=_fagc ._bbfde ,_fcfggd ._bbfde ;if _eaad !=_cfcb {return _eaad < _cfcb ;};if _fagc ._gedc !=_fcfggd ._gedc {return _fagc ._gedc ;};return _gced < _agfb ;});_bagfa :=make (map[int ]intSet );_bafc :=make (intSet );for _ ,_beab :=range _eadef {if _beab ._gedc {_bagfa [_beab ._eabda ]=make (intSet );
for _gbff :=range _bafc {if _gbff !=_beab ._eabda {_bagfa [_beab ._eabda ].add (_gbff );_bagfa [_gbff ].add (_beab ._eabda );};};_bafc .add (_beab ._eabda );}else {_bafc .del (_beab ._eabda );};};_ggcec :=map[*textPara ][]int {};for _gaceb ,_ccage :=range _bagfa {_acgd :=_abec [_gaceb ];
if len (_ccage )==0{_ggcec [_acgd ]=nil ;continue ;};_cfab :=make ([]int ,len (_ccage ));_fgbfa :=0;for _afcaba :=range _ccage {_cfab [_fgbfa ]=_afcaba ;_fgbfa ++;};_ggcec [_acgd ]=_cfab ;};return _ggcec ;};

// String returns a human readable description of `s`.
func (_bdbd intSet )String ()string {var _afdg []int ;for _cfgcd :=range _bdbd {if _bdbd .has (_cfgcd ){_afdg =append (_afdg ,_cfgcd );};};_d .Ints (_afdg );return _cd .Sprintf ("\u0025\u002b\u0076",_afdg );};func _aaba (_dcbac []*textLine ,_aaff map[float64 ][]*textLine )[]*list {_baff :=_dbcb (_aaff );
_agcde :=[]*list {};if len (_baff )==0{return _agcde ;};_edfd :=_baff [0];_daac :=1;_bddcb :=_aaff [_edfd ];for _bgdb ,_afce :=range _bddcb {var _addbd float64 ;_efab :=[]*list {};_ffaf :=_afce ._fdgf ;_gccd :=-1.0;if _bgdb < len (_bddcb )-1{_gccd =_bddcb [_bgdb +1]._fdgf ;
};if _daac < len (_baff ){_efab =_ggdd (_dcbac ,_aaff ,_baff ,_daac ,_ffaf ,_gccd );};_addbd =_gccd ;if len (_efab )> 0{_fggad :=_efab [0];if len (_fggad ._gbacf )> 0{_addbd =_fggad ._gbacf [0]._fdgf ;};};_fdgc :=[]*textLine {_afce };_fbdb :=_gbbaga (_afce ,_dcbac ,_baff ,_ffaf ,_addbd );
_fdgc =append (_fdgc ,_fbdb ...);_bfbc :=_ggfd (_fdgc ,"\u0062\u0075\u006c\u006c\u0065\u0074",_efab );_bfbc ._ddga =_deeb (_fdgc ,"");_agcde =append (_agcde ,_bfbc );};return _agcde ;};func (_eabgf paraList )llyRange (_gadgaa []int ,_eddb ,_bgbaf float64 )[]int {_adbf :=len (_eabgf );
if _bgbaf < _eabgf [_gadgaa [0]].Lly ||_eddb > _eabgf [_gadgaa [_adbf -1]].Lly {return nil ;};_cagc :=_d .Search (_adbf ,func (_ggce int )bool {return _eabgf [_gadgaa [_ggce ]].Lly >=_eddb });_dcgc :=_d .Search (_adbf ,func (_fade int )bool {return _eabgf [_gadgaa [_fade ]].Lly > _bgbaf });
return _gadgaa [_cagc :_dcgc ];};func _aecad (_babg _ce .PdfRectangle )*ruling {return &ruling {_dbeg :_bggf ,_befa :_babg .Ury ,_fcbf :_babg .Llx ,_ddgdc :_babg .Urx };};func (_bebe *textObject )getFontDict (_bfd string )(_effe _ga .PdfObject ,_afbg error ){_gfae :=_bebe ._edbe ;
if _gfae ==nil {_fbe .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_bfd );return nil ,nil ;};_effe ,_bdd :=_gfae .GetFontByName (_ga .PdfObjectName (_bfd ));
if !_bdd {_fbe .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_bfd );
return nil ,_b .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _effe ,nil ;};func (_ceg *textObject )nextLine (){_ceg .moveLP (0,-_ceg ._geeg ._dff )};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_gfegc rulingList )blocks (_gfbfg ,_feaag *ruling )bool {if _gfbfg ._fcbf > _feaag ._ddgdc ||_feaag ._fcbf > _gfbfg ._ddgdc {return false ;};_agdad :=_c .Max (_gfbfg ._fcbf ,_feaag ._fcbf );_cgbg :=_c .Min (_gfbfg ._ddgdc ,_feaag ._ddgdc );
if _gfbfg ._befa > _feaag ._befa {_gfbfg ,_feaag =_feaag ,_gfbfg ;};for _ ,_dggdg :=range _gfegc {if _gfbfg ._befa <=_dggdg ._befa +_gada &&_dggdg ._befa <=_feaag ._befa +_gada &&_dggdg ._fcbf <=_cgbg &&_agdad <=_dggdg ._ddgdc {return true ;};};return false ;
};func (_cag *TextMarkArray )getTextMarkAtOffset (_cebed int )*TextMark {for _ ,_fdge :=range _cag ._cff {if _fdge .Offset ==_cebed {return &_fdge ;};};return nil ;};type bounded interface{bbox ()_ce .PdfRectangle };func _bggfg (_bcfd []rulingList )(rulingList ,rulingList ){var _afaf rulingList ;
for _ ,_cgde :=range _bcfd {_afaf =append (_afaf ,_cgde ...);};return _afaf .vertsHorzs ();};func (_ffde *textLine )toTextMarks (_bgf *int )[]TextMark {var _aeeb []TextMark ;for _ ,_fcee :=range _ffde ._gggb {if _fcee ._bfgfa {_aeeb =_baea (_aeeb ,_bgf ,"\u0020");
};_deae :=_fcee .toTextMarks (_bgf );_aeeb =append (_aeeb ,_deae ...);};return _aeeb ;};func (_gdeb *textLine )appendWord (_ccad *textWord ){_gdeb ._gggb =append (_gdeb ._gggb ,_ccad );_gdeb .PdfRectangle =_fgfbb (_gdeb .PdfRectangle ,_ccad .PdfRectangle );
if _ccad ._fbdaf > _gdeb ._cfaa {_gdeb ._cfaa =_ccad ._fbdaf ;};if _ccad ._ccfce > _gdeb ._fdgf {_gdeb ._fdgf =_ccad ._ccfce ;};};func (_cgacf *textWord )appendMark (_efbca *textMark ,_efgg _ce .PdfRectangle ){_cgacf ._dbcbg =append (_cgacf ._dbcbg ,_efbca );
_cgacf .PdfRectangle =_fgfbb (_cgacf .PdfRectangle ,_efbca .PdfRectangle );if _efbca ._faae > _cgacf ._fbdaf {_cgacf ._fbdaf =_efbca ._faae ;};_cgacf ._ccfce =_efgg .Ury -_cgacf .PdfRectangle .Lly ;};func (_ecgdg rulingList )removeDuplicates ()rulingList {if len (_ecgdg )==0{return nil ;
};_ecgdg .sort ();_cdcbd :=rulingList {_ecgdg [0]};for _ ,_fgege :=range _ecgdg [1:]{if _fgege .equals (_cdcbd [len (_cdcbd )-1]){continue ;};_cdcbd =append (_cdcbd ,_fgege );};return _cdcbd ;};

// GetContentStreamOps returns the contentStreamOps field of `pt`.
func (_daa *PageText )GetContentStreamOps ()*_aa .ContentStreamOperations {return _daa ._aab };func (_fbad *subpath )close (){if !_bggff (_fbad ._baeb [0],_fbad .last ()){_fbad .add (_fbad ._baeb [0]);};_fbad ._gadge =true ;_fbad .removeDuplicates ();};


// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_fed *Extractor )ExtractText ()(string ,error ){_fdd ,_ ,_ ,_gag :=_fed .ExtractTextWithStats ();return _fdd ,_gag ;};func _dffg (_faafa []*textWord ,_gfbgb int )[]*textWord {_bcafc :=len (_faafa );copy (_faafa [_gfbgb :],_faafa [_gfbgb +1:]);return _faafa [:_bcafc -1];
};func (_dadbg *subpath )isQuadrilateral ()bool {if len (_dadbg ._baeb )< 4||len (_dadbg ._baeb )> 5{return false ;};if len (_dadbg ._baeb )==5{_fdbb :=_dadbg ._baeb [0];_fdgcc :=_dadbg ._baeb [4];if _fdbb .X !=_fdgcc .X ||_fdbb .Y !=_fdgcc .Y {return false ;
};};return true ;};func _ggfd (_dfgd []*textLine ,_gccg string ,_gdbd []*list )*list {return &list {_gbacf :_dfgd ,_bdfa :_gccg ,_ffc :_gdbd };};type stateStack []*textState ;func (_edgd *Extractor )extractPageText (_feae string ,_ddb *_ce .PdfPageResources ,_gbf _ee .Matrix ,_ccf int )(*PageText ,int ,int ,error ){_fbe .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_ccf );
_fgd :=&PageText {_efdc :_edgd ._ge ,_gaca :_edgd ._cdb ,_fdee :_edgd ._gbb };_gcd :=_egad (_edgd ._ge );var _abe stateStack ;_fcf :=_geg (_edgd ,_ddb ,_aa .GraphicsState {},&_gcd ,&_abe );_agg :=shapesState {_cdd :_gbf ,_cfcc :_ee .IdentityMatrix (),_edcc :_fcf };
var _fff bool ;_feg :=-1;if _ccf > _gad {_dcdd :=_b .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_ccf ,_dcdd );
return _fgd ,_gcd ._egac ,_gcd ._bbe ,_dcdd ;};_cbg :=_aa .NewContentStreamParser (_feae );_dgg ,_gbdb :=_cbg .Parse ();if _gbdb !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gbdb );
return _fgd ,_gcd ._egac ,_gcd ._bbe ,_gbdb ;};_fgd ._aab =_dgg ;_abd :=_aa .NewContentStreamProcessor (*_dgg );_abd .AddHandler (_aa .HandlerConditionEnumAllOperands ,"",func (_fbb *_aa .ContentStreamOperation ,_eeg _aa .GraphicsState ,_gagf *_ce .PdfPageResources )error {_dfaeb :=_fbb .Operand ;
if _bbega {_fbe .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_fbb );};switch _dfaeb {case "\u0071":if _dbbd {_fbe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_agg ._cfcc );};_abe .push (&_gcd );case "\u0051":if !_abe .empty (){_gcd =*_abe .pop ();
};_agg ._cfcc =_eeg .CTM ;if _dbbd {_fbe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_agg ._cfcc );};case "\u0042\u0044\u0043":_ccd ,_gdd :=_ga .GetDict (_fbb .Params [1]);if !_gdd {_fbe .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0042D\u0043\u0020\u006f\u0070\u003d\u0025\u0073 \u0047\u0065\u0074\u0044\u0069\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fbb );
return _gbdb ;};_accd :=_ccd .Get ("\u004d\u0043\u0049\u0044");if _accd !=nil {_bbaf ,_cgf :=_ga .GetIntVal (_accd );if !_cgf {_fbe .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0042\u0044C\u0020\u006f\u0070=\u0025\u0073\u002e\u0020\u0042\u0061\u0064\u0020\u006eum\u0065\u0072\u0069c\u0061\u006c \u006f\u0062\u006a\u0065\u0063\u0074.\u0020\u006f=\u0025\u0073",_fbb ,_accd );
};_feg =_bbaf ;}else {_feg =-1;};case "\u0045\u004d\u0043":_feg =-1;case "\u0042\u0054":if _fff {_fbe .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_fgd ._ebed =append (_fgd ._ebed ,_fcf ._gae ...);};_fff =true ;_afc :=_eeg ;_afc .CTM =_gbf .Mult (_afc .CTM );_fcf =_geg (_edgd ,_gagf ,_afc ,&_gcd ,&_abe );_agg ._edcc =_fcf ;case "\u0045\u0054":if !_fff {_fbe .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_fff =false ;_fgd ._ebed =append (_fgd ._ebed ,_fcf ._gae ...);_fcf .reset ();case "\u0054\u002a":_fcf .nextLine ();case "\u0054\u0064":if _ccc ,_fgdb :=_fcf .checkOp (_fbb ,2,true );!_ccc {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgdb );
return _fgdb ;};_fad ,_gfca ,_egb :=_aafec (_fbb .Params );if _egb !=nil {return _egb ;};_fcf .moveText (_fad ,_gfca );case "\u0054\u0044":if _egab ,_fedg :=_fcf .checkOp (_fbb ,2,true );!_egab {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fedg );
return _fedg ;};_aaa ,_fgga ,_efe :=_aafec (_fbb .Params );if _efe !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_efe );return _efe ;};_fcf .moveTextSetLeading (_aaa ,_fgga );case "\u0054\u006a":if _fba ,_gfb :=_fcf .checkOp (_fbb ,1,true );
!_fba {_fbe .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_fbb ,_gfb );return _gfb ;};_gdc :=_ga .TraceToDirectObject (_fbb .Params [0]);_feab ,_adgg :=_ga .GetStringBytes (_gdc );
if !_adgg {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_fbb );return _ga .ErrTypeError ;
};return _fcf .showText (_gdc ,_feab ,_feg );case "\u0054\u004a":if _gcb ,_dgf :=_fcf .checkOp (_fbb ,1,true );!_gcb {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dgf );return _dgf ;};_fegg ,_ebe :=_ga .GetArray (_fbb .Params [0]);
if !_ebe {_fbe .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fbb );return _gbdb ;};return _fcf .showTextAdjusted (_fegg ,_feg );
case "\u0027":if _dbd ,_cedg :=_fcf .checkOp (_fbb ,1,true );!_dbd {_fbe .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cedg );return _cedg ;};_adf :=_ga .TraceToDirectObject (_fbb .Params [0]);_bbd ,_dga :=_ga .GetStringBytes (_adf );
if !_dga {_fbe .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_fbb );return _ga .ErrTypeError ;};_fcf .nextLine ();return _fcf .showText (_adf ,_bbd ,_feg );
case "\u0022":if _bd ,_eeb :=_fcf .checkOp (_fbb ,3,true );!_bd {_fbe .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eeb );return _eeb ;};_edd ,_ggef ,_bef :=_aafec (_fbb .Params [:2]);if _bef !=nil {return _bef ;
};_ebg :=_ga .TraceToDirectObject (_fbb .Params [2]);_gff ,_bac :=_ga .GetStringBytes (_ebg );if !_bac {_fbe .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_fbb );
return _ga .ErrTypeError ;};_fcf .setCharSpacing (_edd );_fcf .setWordSpacing (_ggef );_fcf .nextLine ();return _fcf .showText (_ebg ,_gff ,_feg );case "\u0054\u004c":_afa ,_aafe :=_gffe (_fbb );if _aafe !=nil {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aafe );
return _aafe ;};_fcf .setTextLeading (_afa );case "\u0054\u0063":_ecac ,_abed :=_gffe (_fbb );if _abed !=nil {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abed );return _abed ;};_fcf .setCharSpacing (_ecac );
case "\u0054\u0066":if _abfc ,_ade :=_fcf .checkOp (_fbb ,2,true );!_abfc {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ade );return _ade ;};_gdb ,_gaaa :=_ga .GetNameVal (_fbb .Params [0]);
if !_gaaa {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_fbb );return _ga .ErrTypeError ;};_abea ,_dcg :=_ga .GetNumberAsFloat (_fbb .Params [1]);
if !_gaaa {_fbe .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fbb ,_dcg );
return _dcg ;};_dcg =_fcf .setFont (_gdb ,_abea );_fcf ._aec =_ca .Is (_dcg ,_ga .ErrNotSupported );if _dcg !=nil &&!_fcf ._aec {return _dcg ;};case "\u0054\u006d":if _fcfb ,_bcgg :=_fcf .checkOp (_fbb ,6,true );!_fcfb {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcgg );
return _bcgg ;};_dcag ,_cee :=_ga .GetNumbersAsFloat (_fbb .Params );if _cee !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cee );return _cee ;};_fcf .setTextMatrix (_dcag );case "\u0054\u0072":if _cec ,_ded :=_fcf .checkOp (_fbb ,1,true );
!_cec {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ded );return _ded ;};_efbf ,_egf :=_ga .GetIntVal (_fbb .Params [0]);if !_egf {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_fbb );
return _ga .ErrTypeError ;};_fcf .setTextRenderMode (_efbf );case "\u0054\u0073":if _cbb ,_edb :=_fcf .checkOp (_fbb ,1,true );!_cbb {_fbe .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_edb );return _edb ;
};_bda ,_cbf :=_ga .GetNumberAsFloat (_fbb .Params [0]);if _cbf !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cbf );return _cbf ;};_fcf .setTextRise (_bda );case "\u0054\u0077":if _dfb ,_bgg :=_fcf .checkOp (_fbb ,1,true );
!_dfb {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bgg );return _bgg ;};_dfg ,_cga :=_ga .GetNumberAsFloat (_fbb .Params [0]);if _cga !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cga );
return _cga ;};_fcf .setWordSpacing (_dfg );case "\u0054\u007a":if _fggd ,_abfa :=_fcf .checkOp (_fbb ,1,true );!_fggd {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abfa );return _abfa ;};_ggf ,_abgd :=_ga .GetNumberAsFloat (_fbb .Params [0]);
if _abgd !=nil {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_abgd );return _abgd ;};_fcf .setHorizScaling (_ggf );case "\u0063\u006d":_agg ._cfcc =_eeg .CTM ;if _agg ._cfcc .Singular (){_cde :=_ee .IdentityMatrix ().Translate (_agg ._cfcc .Translation ());
_fbe .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_agg ._cfcc ,_cde );_agg ._cfcc =_cde ;};if _dbbd {_fbe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_agg ._cfcc );};case "\u006d":if len (_fbb .Params )!=2{_fbe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ab );
return nil ;};_bgd ,_bbag :=_ga .GetNumbersAsFloat (_fbb .Params );if _bbag !=nil {return _bbag ;};_agg .moveTo (_bgd [0],_bgd [1]);case "\u006c":if len (_fbb .Params )!=2{_fbe .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ab );
return nil ;};_ece ,_aba :=_ga .GetNumbersAsFloat (_fbb .Params );if _aba !=nil {return _aba ;};_agg .lineTo (_ece [0],_ece [1]);case "\u0063":if len (_fbb .Params )!=6{return _ab ;};_eee ,_fafed :=_ga .GetNumbersAsFloat (_fbb .Params );if _fafed !=nil {return _fafed ;
};_fbe .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_eee );_agg .cubicTo (_eee [0],_eee [1],_eee [2],_eee [3],_eee [4],_eee [5]);case "\u0076","\u0079":if len (_fbb .Params )!=4{return _ab ;
};_fdac ,_cgac :=_ga .GetNumbersAsFloat (_fbb .Params );if _cgac !=nil {return _cgac ;};_fbe .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_fdac );_agg .quadraticTo (_fdac [0],_fdac [1],_fdac [2],_fdac [3]);
case "\u0068":_agg .closePath ();case "\u0072\u0065":if len (_fbb .Params )!=4{return _ab ;};_fac ,_egg :=_ga .GetNumbersAsFloat (_fbb .Params );if _egg !=nil {return _egg ;};_agg .drawRectangle (_fac [0],_fac [1],_fac [2],_fac [3]);_agg .closePath ();
case "\u0053":_agg .stroke (&_fgd ._eeec );_agg .clearPath ();case "\u0073":_agg .closePath ();_agg .stroke (&_fgd ._eeec );_agg .clearPath ();case "\u0046":_agg .fill (&_fgd ._fafa );_agg .clearPath ();case "\u0066","\u0066\u002a":_agg .closePath ();_agg .fill (&_fgd ._fafa );
_agg .clearPath ();case "\u0042","\u0042\u002a":_agg .fill (&_fgd ._fafa );_agg .stroke (&_fgd ._eeec );_agg .clearPath ();case "\u0062","\u0062\u002a":_agg .closePath ();_agg .fill (&_fgd ._fafa );_agg .stroke (&_fgd ._eeec );_agg .clearPath ();case "\u006e":_agg .clearPath ();
case "\u0044\u006f":if len (_fbb .Params )==0{_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_fbb .Params );
return _ga .ErrRangeError ;};_bgdf ,_ccff :=_ga .GetName (_fbb .Params [0]);if !_ccff {_fbe .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_fbb .Params [0]);
return _ga .ErrTypeError ;};_ ,_dcda :=_gagf .GetXObjectByName (*_bgdf );if _dcda !=_ce .XObjectTypeForm {break ;};_gabe ,_ccff :=_edgd ._gc [_bgdf .String ()];if !_ccff {_beg ,_deb :=_gagf .GetXObjectFormByName (*_bgdf );if _deb !=nil {_fbe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_deb );
return _deb ;};_cbd ,_deb :=_beg .GetContentStream ();if _deb !=nil {_fbe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_deb );return _deb ;};_dfac :=_beg .Resources ;if _dfac ==nil {_dfac =_gagf ;};_bga :=_eeg .CTM ;if _agbg ,_da :=_ga .GetArray (_beg .Matrix );
_da {_cdfb ,_gde :=_agbg .GetAsFloat64Slice ();if _gde !=nil {return _gde ;};if len (_cdfb )!=6{return _ab ;};_abff :=_ee .NewMatrix (_cdfb [0],_cdfb [1],_cdfb [2],_cdfb [3],_cdfb [4],_cdfb [5]);_bga =_eeg .CTM .Mult (_abff );};_agc ,_ddf ,_baa ,_deb :=_edgd .extractPageText (string (_cbd ),_dfac ,_gbf .Mult (_bga ),_ccf +1);
if _deb !=nil {_fbe .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_deb );return _deb ;};_gabe =textResult {*_agc ,_ddf ,_baa };_edgd ._gc [_bgdf .String ()]=_gabe ;};_agg ._cfcc =_eeg .CTM ;if _dbbd {_fbe .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_agg ._cfcc );
};_fgd ._ebed =append (_fgd ._ebed ,_gabe ._bgde ._ebed ...);_fgd ._eeec =append (_fgd ._eeec ,_gabe ._bgde ._eeec ...);_fgd ._fafa =append (_fgd ._fafa ,_gabe ._bgde ._fafa ...);_gcd ._egac +=_gabe ._adfb ;_gcd ._bbe +=_gabe ._fbd ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_fcf ._dbf .ColorspaceNonStroking =_eeg .ColorspaceNonStroking ;
_fcf ._dbf .ColorNonStroking =_eeg .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_fcf ._dbf .ColorspaceStroking =_eeg .ColorspaceStroking ;_fcf ._dbf .ColorStroking =_eeg .ColorStroking ;};return nil ;
});_gbdb =_abd .Process (_ddb );return _fgd ,_gcd ._egac ,_gcd ._bbe ,_gbdb ;};func _deeb (_gadf []*textLine ,_eadg string )string {var _egca _ff .Builder ;_fggae :=0.0;for _cacfb ,_eaaab :=range _gadf {_bcff :=_eaaab .text ();_fbebg :=_eaaab ._fdgf ;if _cacfb < len (_gadf )-1{_fggae =_gadf [_cacfb +1]._fdgf ;
}else {_fggae =0.0;};_egca .WriteString (_eadg );_egca .WriteString (_bcff );if _fggae !=_fbebg {_egca .WriteString ("\u000a");}else {_egca .WriteString ("\u0020");};};return _egca .String ();};

// String returns a string describing the current state of the textState stack.
func (_edc *stateStack )String ()string {_dfd :=[]string {_cd .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_edc ))};for _fae ,_caaa :=range *_edc {_cbca :="\u003c\u006e\u0069l\u003e";
if _caaa !=nil {_cbca =_caaa .String ();};_dfd =append (_dfd ,_cd .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_fae ,_cbca ));};return _ff .Join (_dfd ,"\u000a");};func (_cbdb *textTable )emptyCompositeRow (_bfefb int )bool {for _efdag :=0;
_efdag < _cbdb ._dbdfe ;_efdag ++{if _faec ,_eadgf :=_cbdb ._bbedb [_egdege (_efdag ,_bfefb )];_eadgf {if len (_faec .paraList )> 0{return false ;};};};return true ;};func (_ede *shapesState )moveTo (_agac ,_dgbc float64 ){_ede ._gfde =true ;_ede ._ggbb =_ede .devicePoint (_agac ,_dgbc );
if _dbbd {_fbe .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_agac ,_dgbc ,_ede ._ggbb );};};const (_gdab =1.0e-6;_aabd =1.0e-4;
_eagac =10;_dcba =6;_aeegf =0.5;_fbbc =0.12;_gdbf =0.19;_bbde =0.04;_dddgd =0.04;_aabc =1.0;_gbacg =0.04;_edgc =0.4;_ggab =0.7;_dfad =1.0;_cdeeg =0.1;_dcde =1.4;_fefg =0.46;_bcfe =0.02;_aafcg =0.2;_dece =0.5;_aaeag =4;_ebaa =4.0;_fca =6;_ccaa =0.3;_ecbb =0.01;
_bdaf =0.02;_fdde =2;_fgbff =2;_bad =500;_egbd =4.0;_cfcg =4.0;_fccb =0.05;_fcbe =0.1;_gccb =2.0;_gada =2.0;_egfb =1.5;_aecaf =3.0;_bdafa =0.25;);func (_ceee *textPara )writeText (_ffbec _fb .Writer ){if _ceee ._ffdf ==nil {_ceee .writeCellText (_ffbec );
return ;};for _dbdf :=0;_dbdf < _ceee ._ffdf ._cdgcb ;_dbdf ++{for _cgbcf :=0;_cgbcf < _ceee ._ffdf ._dbdfe ;_cgbcf ++{_fedge :=_ceee ._ffdf .get (_cgbcf ,_dbdf );if _fedge ==nil {_ffbec .Write ([]byte ("\u0009"));}else {_fedge .writeCellText (_ffbec );
};_ffbec .Write ([]byte ("\u0020"));};if _dbdf < _ceee ._ffdf ._cdgcb -1{_ffbec .Write ([]byte ("\u000a"));};};};type textWord struct{_ce .PdfRectangle ;_ccfce float64 ;_abgea string ;_dbcbg []*textMark ;_fbdaf float64 ;_bfgfa bool ;};var _fdgdf string ="\u005e\u005b\u0061\u002d\u007a\u0041\u002dZ\u005d\u0028\u005c)\u007c\u005c\u002e)\u007c\u005e[\u005c\u0064\u005d\u002b\u0028\u005c)\u007c\\.\u0029\u007c\u005e\u005c\u0028\u005b\u0061\u002d\u007a\u0041\u002d\u005a\u005d\u005c\u0029\u007c\u005e\u005c\u0028\u005b\u005c\u0064\u005d\u002b\u005c\u0029";
func _bbegg (_abcacd ,_cfca _a .Image )_a .Image {_eaec ,_ecgdc :=_cfca .Bounds ().Size (),_abcacd .Bounds ().Size ();_bcgc ,_afcb :=_eaec .X ,_eaec .Y ;if _ecgdc .X > _bcgc {_bcgc =_ecgdc .X ;};if _ecgdc .Y > _afcb {_afcb =_ecgdc .Y ;};_cbfg :=_a .Rect (0,0,_bcgc ,_afcb );
if _eaec .X !=_bcgc ||_eaec .Y !=_afcb {_aagcd :=_a .NewRGBA (_cbfg );_fdb .BiLinear .Scale (_aagcd ,_cbfg ,_abcacd ,_cfca .Bounds (),_fdb .Over ,nil );_cfca =_aagcd ;};if _ecgdc .X !=_bcgc ||_ecgdc .Y !=_afcb {_abdfe :=_a .NewRGBA (_cbfg );_fdb .BiLinear .Scale (_abdfe ,_cbfg ,_abcacd ,_abcacd .Bounds (),_fdb .Over ,nil );
_abcacd =_abdfe ;};_adfgb :=_a .NewRGBA (_cbfg );_fdb .DrawMask (_adfgb ,_cbfg ,_abcacd ,_a .Point {},_cfca ,_a .Point {},_fdb .Over );return _adfgb ;};func (_daggg *textWord )bbox ()_ce .PdfRectangle {return _daggg .PdfRectangle };func (_egbe *textTable )bbox ()_ce .PdfRectangle {return _egbe .PdfRectangle };
func _fcggf (_egbg float64 )int {var _ggfc int ;if _egbg >=0{_ggfc =int (_egbg /_dcba );}else {_ggfc =int (_egbg /_dcba )-1;};return _ggfc ;};var _fbace =map[rulingKind ]string {_feebd :"\u006e\u006f\u006e\u0065",_bggf :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_edcaf :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func _eeccd (_dbdd []int )[]int {_fggb :=make ([]int ,len (_dbdd ));for _becd ,_bfea :=range _dbdd {_fggb [len (_dbdd )-1-_becd ]=_bfea ;};return _fggb ;};func _egfe (_eadcg *list )[]*list {var _fccbb []*list ;for _ ,_daad :=range _eadcg ._ffc {switch _daad ._bdfa {case "\u004c\u0049":_bbded :=_ccfg (_daad );
_afed :=_egfe (_daad );_dggb :=_ggfd (_bbded ,"\u0062\u0075\u006c\u006c\u0065\u0074",_afed );_becf :=_deeb (_bbded ,"");_dggb ._ddga =_becf ;_fccbb =append (_fccbb ,_dggb );case "\u004c\u0042\u006fd\u0079":return _egfe (_daad );case "\u004c":_efed :=_egfe (_daad );
_fccbb =append (_fccbb ,_efed ...);return _fccbb ;};};return _fccbb ;};

// String returns a string describing `ma`.
func (_agcc TextMarkArray )String ()string {_acba :=len (_agcc ._cff );if _acba ==0{return "\u0045\u004d\u0050T\u0059";};_aac :=_agcc ._cff [0];_abgf :=_agcc ._cff [_acba -1];return _cd .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_acba ,_aac ,_abgf );
};type wordBag struct{_ce .PdfRectangle ;_effd float64 ;_efadd ,_dfbg rulingList ;_cgbc float64 ;_effb map[int ][]*textWord ;};func _ffgg (_abbag string )bool {if _g .RuneCountInString (_abbag )< _aaeag {return false ;};_adeff ,_cbfe :=_g .DecodeLastRuneInString (_abbag );
if _cbfe <=0||!_fd .Is (_fd .Hyphen ,_adeff ){return false ;};_adeff ,_cbfe =_g .DecodeLastRuneInString (_abbag [:len (_abbag )-_cbfe ]);return _cbfe > 0&&!_fd .IsSpace (_adeff );};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};

// TableCell is a cell in a TextTable.
type TableCell struct{_ce .PdfRectangle ;

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};type structElement struct{_edff string ;_ecae []structElement ;_cbfb int64 ;_facf _ga .PdfObject ;};func _dbaa (_ebffb []pathSection ){if _aabd < 0.0{return ;};if _ggac {_fbe .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_ebffb ));
};for _dcdf ,_egaaf :=range _ebffb {for _cceeg ,_agab :=range _egaaf ._accg {for _fadd ,_dddca :=range _agab ._baeb {_agab ._baeb [_fadd ]=_ee .Point {X :_dadfd (_dddca .X ),Y :_dadfd (_dddca .Y )};if _ggac {_bdda :=_agab ._baeb [_fadd ];if !_bggff (_dddca ,_bdda ){_afggd :=_ee .Point {X :_bdda .X -_dddca .X ,Y :_bdda .Y -_dddca .Y };
_cd .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_dcdf ,_cceeg ,_fadd ,_dddca ,_bdda ,_afggd );};};};};};};func _ebcf (_gcefd ,_febg _ee .Point )rulingKind {_bfba :=_c .Abs (_gcefd .X -_febg .X );
_bffe :=_c .Abs (_gcefd .Y -_febg .Y );return _fdea (_bfba ,_bffe ,_egbd );};func (_eaeea *textTable )reduceTiling (_fbdca gridTiling ,_gdffc float64 )*textTable {_gbddc :=make ([]int ,0,_eaeea ._cdgcb );_efabc :=make ([]int ,0,_eaeea ._dbdfe );_bdca :=_fbdca ._gebbd ;
_eaeed :=_fbdca ._eaae ;for _bcfg :=0;_bcfg < _eaeea ._cdgcb ;_bcfg ++{_geaa :=_bcfg > 0&&_c .Abs (_eaeed [_bcfg -1]-_eaeed [_bcfg ])< _gdffc &&_eaeea .emptyCompositeRow (_bcfg );if !_geaa {_gbddc =append (_gbddc ,_bcfg );};};for _geff :=0;_geff < _eaeea ._dbdfe ;
_geff ++{_dcfb :=_geff < _eaeea ._dbdfe -1&&_c .Abs (_bdca [_geff +1]-_bdca [_geff ])< _gdffc &&_eaeea .emptyCompositeColumn (_geff );if !_dcfb {_efabc =append (_efabc ,_geff );};};if len (_gbddc )==_eaeea ._cdgcb &&len (_efabc )==_eaeea ._dbdfe {return _eaeea ;
};_gdce :=textTable {_cffg :_eaeea ._cffg ,_dbdfe :len (_efabc ),_cdgcb :len (_gbddc ),_bbedb :make (map[uint64 ]compositeCell ,len (_efabc )*len (_gbddc ))};if _dgfg {_fbe .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_eaeea ._dbdfe ,_eaeea ._cdgcb ,len (_efabc ),len (_gbddc ));
_fbe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_efabc );_fbe .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_gbddc );};for _acbb ,_addd :=range _gbddc {for _bdgc ,_ccag :=range _efabc {_fcfbf ,_bbabe :=_eaeea .getComposite (_ccag ,_addd );
if len (_fcfbf )==0{continue ;};if _dgfg {_cd .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_bdgc ,_acbb ,_ccag ,_addd ,_ggaa (_fcfbf .merge ().text (),50));};_gdce .putComposite (_bdgc ,_acbb ,_fcfbf ,_bbabe );
};};return &_gdce ;};type subpath struct{_baeb []_ee .Point ;_gadge bool ;};func (_efbfb *textObject )moveLP (_ecb ,_geag float64 ){_efbfb ._fgf .Concat (_ee .NewMatrix (1,0,0,1,_ecb ,_geag ));_efbfb ._bfa =_efbfb ._fgf ;};func _gddd (_dgbfa int ,_geaf func (int ,int )bool )[]int {_feaagd :=make ([]int ,_dgbfa );
for _bbedd :=range _feaagd {_feaagd [_bbedd ]=_bbedd ;};_d .Slice (_feaagd ,func (_ccbge ,_ccbbe int )bool {return _geaf (_feaagd [_ccbge ],_feaagd [_ccbbe ])});return _feaagd ;};func (_beagf *ruling )equals (_fbab *ruling )bool {return _beagf ._dbeg ==_fbab ._dbeg &&_dcec (_beagf ._befa ,_fbab ._befa )&&_dcec (_beagf ._fcbf ,_fbab ._fcbf )&&_dcec (_beagf ._ddgdc ,_fbab ._ddgdc );
};func (_ccee rulingList )toGrids ()[]rulingList {if _ggac {_fbe .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_ccee );};_gbgc :=_ccee .intersections ();if _ggac {_fbe .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_ccee ),len (_gbgc ));
for _ ,_dgda :=range _dgdabf (_gbgc ){_cd .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_dgda ,_gbgc [_dgda ]);};};_efcdb :=make (map[int ]intSet ,len (_ccee ));for _eggg :=range _ccee {_dgdac :=_ccee .connections (_gbgc ,_eggg );if len (_dgdac )> 0{_efcdb [_eggg ]=_dgdac ;
};};if _ggac {_fbe .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_efcdb ));for _ ,_fdad :=range _dgdabf (_efcdb ){_cd .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_fdad ,_efcdb [_fdad ]);
};};_gfaa :=_gddd (len (_ccee ),func (_bgec ,_eabdb int )bool {_ddc ,_acda :=len (_efcdb [_bgec ]),len (_efcdb [_eabdb ]);if _ddc !=_acda {return _ddc > _acda ;};return _ccee .comp (_bgec ,_eabdb );});if _ggac {_fbe .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_gfaa );
};_gfdb :=[][]int {{_gfaa [0]}};_dbfc :for _ ,_baagd :=range _gfaa [1:]{for _bbbc ,_gfeea :=range _gfdb {for _ ,_egggf :=range _gfeea {if _efcdb [_egggf ].has (_baagd ){_gfdb [_bbbc ]=append (_gfeea ,_baagd );continue _dbfc ;};};};_gfdb =append (_gfdb ,[]int {_baagd });
};if _ggac {_fbe .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_gfdb );};_d .SliceStable (_gfdb ,func (_ceeee ,_cdad int )bool {return len (_gfdb [_ceeee ])> len (_gfdb [_cdad ])});for _ ,_eccb :=range _gfdb {_d .Slice (_eccb ,func (_dedee ,_afagd int )bool {return _ccee .comp (_eccb [_dedee ],_eccb [_afagd ])});
};_edgdd :=make ([]rulingList ,len (_gfdb ));for _fecfb ,_dbdbd :=range _gfdb {_dgbf :=make (rulingList ,len (_dbdbd ));for _ggfg ,_cdba :=range _dbdbd {_dgbf [_ggfg ]=_ccee [_cdba ];};_edgdd [_fecfb ]=_dgbf ;};if _ggac {_fbe .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_edgdd );
};var _egdeg []rulingList ;for _ ,_dfceg :=range _edgdd {if _gcdg ,_edge :=_dfceg .isActualGrid ();_edge {_dfceg =_gcdg ;_dfceg =_dfceg .snapToGroups ();_egdeg =append (_egdeg ,_dfceg );};};if _ggac {_agae ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_egdeg );
_fbe .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_edgdd ),len (_egdeg ));};return _egdeg ;};func (_fggf *textObject )setTextRise (_abfe float64 ){if _fggf ==nil {return ;
};_fggf ._geeg ._gbfa =_abfe ;};func (_gbage paraList )findGridTables (_edbc []gridTiling )[]*textTable {if _dgfg {_fbe .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_gbage ));
for _cega ,_cbbff :=range _gbage {_cd .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cega ,_cbbff );};};var _fggc []*textTable ;for _fecab ,_ageg :=range _edbc {_ggadb ,_cfaef :=_gbage .findTableGrid (_ageg );if _ggadb !=nil {_ggadb .log (_cd .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_fecab ));
_fggc =append (_fggc ,_ggadb );_ggadb .markCells ();};for _ffbf :=range _cfaef {_ffbf ._ceed =true ;};};if _dgfg {_fbe .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_fggc ));
};return _fggc ;};func _abcdd (_eegdd map[float64 ]map[float64 ]gridTile )[]float64 {_bgege :=make ([]float64 ,0,len (_eegdd ));_dfdc :=make (map[float64 ]struct{},len (_eegdd ));for _ ,_ffga :=range _eegdd {for _dbba :=range _ffga {if _ ,_eadde :=_dfdc [_dbba ];
_eadde {continue ;};_bgege =append (_bgege ,_dbba );_dfdc [_dbba ]=struct{}{};};};_d .Float64s (_bgege );return _bgege ;};func (_ceab gridTile )contains (_ccbb _ce .PdfRectangle )bool {if _ceab .numBorders ()< 3{return false ;};if _ceab ._facfe &&_ccbb .Llx < _ceab .Llx -_egfb {return false ;
};if _ceab ._bbdcd &&_ccbb .Urx > _ceab .Urx +_egfb {return false ;};if _ceab ._adbg &&_ccbb .Lly < _ceab .Lly -_egfb {return false ;};if _ceab ._dagdb &&_ccbb .Ury > _ceab .Ury +_egfb {return false ;};return true ;};func (_eda pathSection )bbox ()_ce .PdfRectangle {_fdgd :=_eda ._accg [0]._baeb [0];
_debd :=_ce .PdfRectangle {Llx :_fdgd .X ,Urx :_fdgd .X ,Lly :_fdgd .Y ,Ury :_fdgd .Y };_dbc :=func (_ddg _ee .Point ){if _ddg .X < _debd .Llx {_debd .Llx =_ddg .X ;}else if _ddg .X > _debd .Urx {_debd .Urx =_ddg .X ;};if _ddg .Y < _debd .Lly {_debd .Lly =_ddg .Y ;
}else if _ddg .Y > _debd .Ury {_debd .Ury =_ddg .Y ;};};for _ ,_geceb :=range _eda ._accg [0]._baeb [1:]{_dbc (_geceb );};for _ ,_cffe :=range _eda ._accg [1:]{for _ ,_afga :=range _cffe ._baeb {_dbc (_afga );};};return _debd ;};func (_bgdc *wordBag )empty (_baga int )bool {_ ,_bgce :=_bgdc ._effb [_baga ];
return !_bgce };func _bdae (_adgbf bounded )float64 {return -_adgbf .bbox ().Lly };var (_gb =_b .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ab =_b .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func _bfdab (_aadb _ga .PdfObject ,_aaefe _fa .Color )(_a .Image ,error ){_efeeb ,_edefe :=_ga .GetStream (_aadb );if !_edefe {return nil ,nil ;};_gdbca ,_aadba :=_ce .NewXObjectImageFromStream (_efeeb );if _aadba !=nil {return nil ,_aadba ;};_ddccg ,_aadba :=_gdbca .ToImage ();
if _aadba !=nil {return nil ,_aadba ;};return _gbfd (_ddccg ,_aaefe ),nil ;};var _bebg =[]string {"\u2756","\u27a2","\u2713","\u2022","\uf0a7","\u25a1","\u2212","\u25a0","\u25aa","\u006f"};func _fdea (_daga ,_gdbfc ,_edeg float64 )rulingKind {if _daga >=_edeg &&_adgba (_gdbfc ,_daga ){return _bggf ;
};if _gdbfc >=_edeg &&_adgba (_daga ,_gdbfc ){return _edcaf ;};return _feebd ;};func _gfda (_ebbg ,_befe _ce .PdfRectangle )bool {return _ebbg .Lly <=_befe .Ury &&_befe .Lly <=_ebbg .Ury ;};func _cfage (_efdd ,_eefa _ee .Point ,_ffdae _fa .Color )(*ruling ,bool ){_ggbba :=lineRuling {_bcfbf :_efdd ,_bccb :_eefa ,_bcbdg :_ebcf (_efdd ,_eefa ),Color :_ffdae };
if _ggbba ._bcbdg ==_feebd {return nil ,false ;};return _ggbba .asRuling ();};type markKind int ;func (_bfdd paraList )reorder (_edda []int ){_bcegda :=make (paraList ,len (_bfdd ));for _eedcf ,_cbcg :=range _edda {_bcegda [_eedcf ]=_bfdd [_cbcg ];};copy (_bfdd ,_bcegda );
};type lineRuling struct{_bcbdg rulingKind ;_dcfga markKind ;_fa .Color ;_bcfbf ,_bccb _ee .Point ;};func _ceefg (_gafg []*textLine )[]*textLine {_dgfe :=[]*textLine {};for _ ,_gdgf :=range _gafg {_egcc :=_gdgf .text ();_ddfg :=_cgdgef .Find ([]byte (_egcc ));
if _ddfg !=nil {_dgfe =append (_dgfe ,_gdgf );};};return _dgfe ;};func _dadb (_eecgg ,_cacf _ce .PdfRectangle )bool {return _eecgg .Llx <=_cacf .Llx &&_cacf .Urx <=_eecgg .Urx &&_eecgg .Lly <=_cacf .Lly &&_cacf .Ury <=_eecgg .Ury ;};func _dacc (_cfbd []*textWord ,_edce float64 ,_ebfa ,_gfba rulingList )*wordBag {_afag :=_caffb (_cfbd [0],_edce ,_ebfa ,_gfba );
for _ ,_aafc :=range _cfbd [1:]{_ebad :=_fcggf (_aafc ._ccfce );_afag ._effb [_ebad ]=append (_afag ._effb [_ebad ],_aafc );_afag .PdfRectangle =_fgfbb (_afag .PdfRectangle ,_aafc .PdfRectangle );};_afag .sort ();return _afag ;};type intSet map[int ]struct{};
func (_gaae *textObject )setHorizScaling (_eac float64 ){if _gaae ==nil {return ;};_gaae ._geeg ._adgf =_eac ;};func (_bcd *stateStack )push (_ggd *textState ){_eec :=*_ggd ;*_bcd =append (*_bcd ,&_eec )};func (_ecfe paraList )computeEBBoxes (){if _cdcd {_fbe .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_bfcdf :=range _ecfe {_bfcdf ._bdfg =_bfcdf .PdfRectangle ;};_fgfd :=_ecfe .yNeighbours (0);for _ffe ,_cebg :=range _ecfe {_cdded :=_cebg ._bdfg ;_bgefe ,_fcfgg :=-1.0e9,+1.0e9;for _ ,_baafa :=range _fgfd [_cebg ]{_bggc :=_ecfe [_baafa ]._bdfg ;
if _bggc .Urx < _cdded .Llx {_bgefe =_c .Max (_bgefe ,_bggc .Urx );}else if _cdded .Urx < _bggc .Llx {_fcfgg =_c .Min (_fcfgg ,_bggc .Llx );};};for _ffgf ,_degc :=range _ecfe {_cdfa :=_degc ._bdfg ;if _ffe ==_ffgf ||_cdfa .Ury > _cdded .Lly {continue ;
};if _bgefe <=_cdfa .Llx &&_cdfa .Llx < _cdded .Llx {_cdded .Llx =_cdfa .Llx ;}else if _cdfa .Urx <=_fcfgg &&_cdded .Urx < _cdfa .Urx {_cdded .Urx =_cdfa .Urx ;};};if _cdcd {_cd .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_ffe ,_cebg ._bdfg ,_cdded ,_ggaa (_cebg .text (),50));
};_cebg ._bdfg =_cdded ;};if _egae {for _ ,_feebe :=range _ecfe {_feebe .PdfRectangle =_feebe ._bdfg ;};};};func (_aeaf *wordBag )scanBand (_bca string ,_dgec *wordBag ,_fddf func (_cffbe *wordBag ,_beae *textWord )bool ,_ecf ,_bcbd ,_cad float64 ,_cfae ,_cbdf bool )int {_fegc :=_dgec ._effd ;
var _dec map[int ]map[*textWord ]struct{};if !_cfae {_dec =_aeaf .makeRemovals ();};_eeef :=_aeegf *_fegc ;_dcac :=0;for _ ,_bgee :=range _aeaf .depthBand (_ecf -_eeef ,_bcbd +_eeef ){if len (_aeaf ._effb [_bgee ])==0{continue ;};for _ ,_addb :=range _aeaf ._effb [_bgee ]{if !(_ecf -_eeef <=_addb ._ccfce &&_addb ._ccfce <=_bcbd +_eeef ){continue ;
};if !_fddf (_dgec ,_addb ){continue ;};_efcef :=2.0*_c .Abs (_addb ._fbdaf -_dgec ._effd )/(_addb ._fbdaf +_dgec ._effd );_gdac :=_c .Max (_addb ._fbdaf /_dgec ._effd ,_dgec ._effd /_addb ._fbdaf );_bcge :=_c .Min (_efcef ,_gdac );if _cad > 0&&_bcge > _cad {continue ;
};if _dgec .blocked (_addb ){continue ;};if !_cfae {_dgec .pullWord (_addb ,_bgee ,_dec );};_dcac ++;if !_cbdf {if _addb ._ccfce < _ecf {_ecf =_addb ._ccfce ;};if _addb ._ccfce > _bcbd {_bcbd =_addb ._ccfce ;};};if _cfae {break ;};};};if !_cfae {_aeaf .applyRemovals (_dec );
};return _dcac ;};func _bccac (_ffgc map[float64 ]gridTile )[]float64 {_ccdf :=make ([]float64 ,0,len (_ffgc ));for _afbfa :=range _ffgc {_ccdf =append (_ccdf ,_afbfa );};_d .Float64s (_ccdf );return _ccdf ;};func (_add *stateStack )top ()*textState {if _add .empty (){return nil ;
};return (*_add )[_add .size ()-1];};func _dbabb (_bebgg []*textMark ,_bfadfe _ce .PdfRectangle )*textWord {_egcd :=_bebgg [0].PdfRectangle ;_abcgf :=_bebgg [0]._faae ;for _ ,_gcbcd :=range _bebgg [1:]{_egcd =_fgfbb (_egcd ,_gcbcd .PdfRectangle );if _gcbcd ._faae > _abcgf {_abcgf =_gcbcd ._faae ;
};};return &textWord {PdfRectangle :_egcd ,_dbcbg :_bebgg ,_ccfce :_bfadfe .Ury -_egcd .Lly ,_fbdaf :_abcgf };};func _bdag (_agec ,_edgdf bounded )float64 {_bfb :=_ffb (_agec ,_edgdf );if !_ffac (_bfb ){return _bfb ;};return _cgfg (_agec ,_edgdf );};