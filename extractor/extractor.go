//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_gf "bytes";_d "errors";_a "fmt";_ec "github.com/unidoc/unipdf/v3/common";_ee "github.com/unidoc/unipdf/v3/common/license";_ea "github.com/unidoc/unipdf/v3/contentstream";_cc "github.com/unidoc/unipdf/v3/core";_af "github.com/unidoc/unipdf/v3/internal/textencoding";_bd "github.com/unidoc/unipdf/v3/internal/transform";_eea "github.com/unidoc/unipdf/v3/model";_ca "golang.org/x/text/unicode/norm";_cf "golang.org/x/xerrors";_eb "image/color";_cg "io";_fe "math";_c "regexp";_b "sort";_dg "strings";_g "unicode";_f "unicode/utf8";);

// String returns a human readable description of `path`.
func (_dcg *subpath )String ()string {_fdae :=_dcg ._cbf ;_fdcg :=len (_fdae );if _fdcg <=5{return _a .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_fdcg ,_fdae );};return _a .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_fdcg ,_fdae [0],_fdae [1],_fdae [_fdcg -1]);};type lineRuling struct{_bagaf rulingKind ;_fdgda markKind ;_eb .Color ;_cadgg ,_eeebg _bd .Point ;};func (_abf *textPara )writeCellText (_afadb _cg .Writer ){for _bced ,_bcda :=range _abf ._gdfg {_gccf :=_bcda .text ();_degff :=_cebb &&_bcda .endsInHyphen ()&&_bced !=len (_abf ._gdfg )-1;if _degff {_gccf =_aceb (_gccf );};_afadb .Write ([]byte (_gccf ));if !(_degff ||_bced ==len (_abf ._gdfg )-1){_afadb .Write ([]byte (_gdce (_bcda ._fbae ,_abf ._gdfg [_bced +1]._fbae )));};};};func _ebdc (_bcbge map[float64 ]map[float64 ]gridTile )[]float64 {_dgfa :=make ([]float64 ,0,len (_bcbge ));_ecad :=make (map[float64 ]struct{},len (_bcbge ));for _ ,_eadb :=range _bcbge {for _ecdf :=range _eadb {if _ ,_gcgf :=_ecad [_ecdf ];_gcgf {continue ;};_dgfa =append (_dgfa ,_ecdf );_ecad [_ecdf ]=struct{}{};};};_b .Float64s (_dgfa );return _dgfa ;};

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};func (_ecada *ruling )alignsPrimary (_bdcca *ruling )bool {return _ecada ._accad ==_bdcca ._accad &&_fe .Abs (_ecada ._ffeg -_bdcca ._ffeg )< _cebd *0.5;};func (_gebe *textTable )isExportable ()bool {if _gebe ._cgfg {return true ;};_eeag :=func (_ccdcf int )bool {_bbgdf :=_gebe .get (0,_ccdcf );if _bbgdf ==nil {return false ;};_gdfgf :=_bbgdf .text ();_bedg :=_f .RuneCountInString (_gdfgf );_ddff :=_cdbg .MatchString (_gdfgf );return _bedg <=1||_ddff ;};for _fggee :=0;_fggee < _gebe ._fcge ;_fggee ++{if !_eeag (_fggee ){return true ;};};return false ;};

// String returns a string descibing `i`.
func (_dbdbf gridTile )String ()string {_bcbga :=func (_eaec bool ,_dbda string )string {if _eaec {return _dbda ;};return "\u005f";};return _a .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_dbdbf .PdfRectangle ,_bcbga (_dbdbf ._ddbc ,"\u004c"),_bcbga (_dbdbf ._cece ,"\u0052"),_bcbga (_dbdbf ._bbbc ,"\u0042"),_bcbga (_dbdbf ._cddd ,"\u0054"));};func (_cgdb *wordBag )firstWord (_dbgc int )*textWord {return _cgdb ._dfb [_dbgc ][0]};func (_adcc paraList )llyRange (_eega []int ,_cffg ,_dbbb float64 )[]int {_cagc :=len (_adcc );if _dbbb < _adcc [_eega [0]].Lly ||_cffg > _adcc [_eega [_cagc -1]].Lly {return nil ;};_adee :=_b .Search (_cagc ,func (_ccaf int )bool {return _adcc [_eega [_ccaf ]].Lly >=_cffg });_efcb :=_b .Search (_cagc ,func (_dbdc int )bool {return _adcc [_eega [_dbdc ]].Lly > _dbbb });return _eega [_adee :_efcb ];};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_aaf PageText )Marks ()*TextMarkArray {return &TextMarkArray {_bcff :_aaf ._fbb }};func _acdb (_gdbae *PageText )error {_fbadf :=_ee .GetLicenseKey ();if _fbadf !=nil &&_fbadf .IsLicensed ()||_cce {return nil ;};_a .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");_a .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");return _d .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_cee *imageExtractContext )extractFormImages (_ae *_cc .PdfObjectName ,_bc _ea .GraphicsState ,_cae *_eea .PdfPageResources )error {_agd ,_cgc :=_cae .GetXObjectFormByName (*_ae );if _cgc !=nil {return _cgc ;};if _agd ==nil {return nil ;};_gdb ,_cgc :=_agd .GetContentStream ();if _cgc !=nil {return _cgc ;};_fga :=_agd .Resources ;if _fga ==nil {_fga =_cae ;};_cgc =_cee .extractContentStreamImages (string (_gdb ),_fga );if _cgc !=nil {return _cgc ;};_cee ._gd ++;return nil ;};func (_eagb paraList )log (_efec string ){if !_gbeba {return ;};_ec .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_efec ,len (_eagb ));for _ccda ,_gaac :=range _eagb {if _gaac ==nil {continue ;};_bbbfa :=_gaac .text ();_bbfd :="\u0020\u0020";if _gaac ._dcdg !=nil {_bbfd =_a .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_gaac ._dcdg ._gaed ,_gaac ._dcdg ._fcge );};_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_ccda ,_gaac .PdfRectangle ,_bbfd ,_ecdd (_bbbfa ,50));};};func _eaef (_ecee ,_edde bounded )float64 {return _feg (_ecee )-_feg (_edde )};

// String returns a string describing `tm`.
func (_dggef TextMark )String ()string {_cff :=_dggef .BBox ;var _edgde string ;if _dggef .Font !=nil {_edgde =_dggef .Font .String ();if len (_edgde )> 50{_edgde =_edgde [:50]+"\u002e\u002e\u002e";};};var _dbgeb string ;if _dggef .Meta {_dbgeb ="\u0020\u002a\u004d\u002a";};return _a .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_dggef .Offset ,_dggef .Text ,[]rune (_dggef .Text ),_cff .Llx ,_cff .Lly ,_cff .Urx ,_cff .Ury ,_edgde ,_dbgeb );};func (_edccb rulingList )toTilings ()(rulingList ,[]gridTiling ){_edccb .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_edccb )==0{return nil ,nil ;};_edccb =_edccb .tidied ("\u0061\u006c\u006c");_edccb .log ("\u0074\u0069\u0064\u0069\u0065\u0064");_bdgf :=_edccb .toGrids ();_dgga :=make ([]gridTiling ,len (_bdgf ));for _badd ,_dfdcb :=range _bdgf {_dgga [_badd ]=_dfdcb .asTiling ();};return _edccb ,_dgga ;};func (_bbfae lineRuling )xMean ()float64 {return 0.5*(_bbfae ._cadgg .X +_bbfae ._eeebg .X )};func (_bdbdg *ruling )alignsSec (_febe *ruling )bool {const _gdcf =_cebd +1.0;return _bdbdg ._adfg -_gdcf <=_febe ._gcge &&_febe ._adfg -_gdcf <=_bdbdg ._gcge ;};func (_bfg *imageExtractContext )processOperand (_gag *_ea .ContentStreamOperation ,_fed _ea .GraphicsState ,_cfc *_eea .PdfPageResources )error {if _gag .Operand =="\u0042\u0049"&&len (_gag .Params )==1{_fcc ,_bfe :=_gag .Params [0].(*_ea .ContentStreamInlineImage );if !_bfe {return nil ;};if _dba ,_feb :=_cc .GetBoolVal (_fcc .ImageMask );_feb {if _dba &&!_bfg ._afg .IncludeInlineStencilMasks {return nil ;};};return _bfg .extractInlineImage (_fcc ,_fed ,_cfc );}else if _gag .Operand =="\u0044\u006f"&&len (_gag .Params )==1{_ada ,_gda :=_cc .GetName (_gag .Params [0]);if !_gda {_ec .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _fc ;};_ ,_agf :=_cfc .GetXObjectByName (*_ada );switch _agf {case _eea .XObjectTypeImage :return _bfg .extractXObjectImage (_ada ,_fed ,_cfc );case _eea .XObjectTypeForm :return _bfg .extractFormImages (_ada ,_fed ,_cfc );};};return nil ;};func (_gbfg lineRuling )yDelta ()float64 {return _fe .Abs (_gbfg ._eeebg .Y -_gbfg ._eeebg .Y )};func _dbcc (_decgd *wordBag ,_ddb int )*textLine {_faeg :=_decgd .firstWord (_ddb );_acfg :=textLine {PdfRectangle :_faeg .PdfRectangle ,_cdbc :_faeg ._cagfe ,_fbae :_faeg ._bbegf };_acfg .pullWord (_decgd ,_faeg ,_ddb );return &_acfg ;};type textState struct{_eegb float64 ;_ggfb float64 ;_bdg float64 ;_edc float64 ;_bba float64 ;_fad RenderMode ;_bage float64 ;_bgdd *_eea .PdfFont ;_acad _eea .PdfRectangle ;_bbab int ;_gdeb int ;};func (_gfc *textObject )getFontDict (_dge string )(_cade _cc .PdfObject ,_dgdb error ){_eee :=_gfc ._edg ;if _eee ==nil {_ec .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_dge );return nil ,nil ;};_cade ,_aaea :=_eee .GetFontByName (_cc .PdfObjectName (_dge ));if !_aaea {_ec .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_dge );return nil ,_d .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _cade ,nil ;};func (_ffegf lineRuling )xDelta ()float64 {return _fe .Abs (_ffegf ._cadgg .X -_ffegf ._eeebg .X )};

// String returns a description of `k`.
func (_geca rulingKind )String ()string {_eacaa ,_bbbe :=_fdaed [_geca ];if !_bbbe {return _a .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_geca );};return _eacaa ;};

// String returns a human readable description of `ss`.
func (_cedc *shapesState )String ()string {return _a .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_cedc ._fbef ),_cedc ._gfg );};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_agae PageText )ToText ()string {return _agae .Text ()};func _degf (_caed []TextMark ,_gaec *int ,_gbde TextMark )[]TextMark {_gbde .Offset =*_gaec ;_caed =append (_caed ,_gbde );*_gaec +=len (_gbde .Text );return _caed ;};func _gdfa (_afac ,_cbdf bounded )float64 {return _afac .bbox ().Llx -_cbdf .bbox ().Llx };

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_fcce *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_gff ,_eec ,_gb ,_ebc :=_fcce .extractPageText (_fcce ._fg ,_fcce ._be ,_bd .IdentityMatrix (),0);if _ebc !=nil {return nil ,0,0,_ebc ;};_gff .computeViews ();_ebc =_acdb (_gff );if _ebc !=nil {return nil ,0,0,_ebc ;};return _gff ,_eec ,_gb ,nil ;};func (_aceff paraList )addNeighbours (){_gdcb :=func (_eefc []int ,_faffa *textPara )([]*textPara ,[]*textPara ){_efged :=make ([]*textPara ,0,len (_eefc )-1);_baea :=make ([]*textPara ,0,len (_eefc )-1);for _ ,_faage :=range _eefc {_gcddc :=_aceff [_faage ];if _gcddc .Urx <=_faffa .Llx {_efged =append (_efged ,_gcddc );}else if _gcddc .Llx >=_faffa .Urx {_baea =append (_baea ,_gcddc );};};return _efged ,_baea ;};_dgaab :=func (_ecgcd []int ,_ecde *textPara )([]*textPara ,[]*textPara ){_feaag :=make ([]*textPara ,0,len (_ecgcd )-1);_bdabb :=make ([]*textPara ,0,len (_ecgcd )-1);for _ ,_dgdef :=range _ecgcd {_facb :=_aceff [_dgdef ];if _facb .Ury <=_ecde .Lly {_bdabb =append (_bdabb ,_facb );}else if _facb .Lly >=_ecde .Ury {_feaag =append (_feaag ,_facb );};};return _feaag ,_bdabb ;};_degda :=_aceff .yNeighbours (_addcb );for _ ,_bfeac :=range _aceff {_feee :=_degda [_bfeac ];if len (_feee )==0{continue ;};_eedfd ,_gafg :=_gdcb (_feee ,_bfeac );if len (_eedfd )==0&&len (_gafg )==0{continue ;};if len (_eedfd )> 0{_ggge :=_eedfd [0];for _ ,_aagg :=range _eedfd [1:]{if _aagg .Urx >=_ggge .Urx {_ggge =_aagg ;};};for _ ,_aeegg :=range _eedfd {if _aeegg !=_ggge &&_aeegg .Urx > _ggge .Llx {_ggge =nil ;break ;};};if _ggge !=nil &&_bagc (_bfeac .PdfRectangle ,_ggge .PdfRectangle ){_bfeac ._adbeg =_ggge ;};};if len (_gafg )> 0{_bebf :=_gafg [0];for _ ,_cbffb :=range _gafg [1:]{if _cbffb .Llx <=_bebf .Llx {_bebf =_cbffb ;};};for _ ,_dfde :=range _gafg {if _dfde !=_bebf &&_dfde .Llx < _bebf .Urx {_bebf =nil ;break ;};};if _bebf !=nil &&_bagc (_bfeac .PdfRectangle ,_bebf .PdfRectangle ){_bfeac ._fcfb =_bebf ;};};};_degda =_aceff .xNeighbours (_cgaec );for _ ,_bfga :=range _aceff {_debbf :=_degda [_bfga ];if len (_debbf )==0{continue ;};_dgeac ,_bcba :=_dgaab (_debbf ,_bfga );if len (_dgeac )==0&&len (_bcba )==0{continue ;};if len (_bcba )> 0{_dggag :=_bcba [0];for _ ,_baaad :=range _bcba [1:]{if _baaad .Ury >=_dggag .Ury {_dggag =_baaad ;};};for _ ,_adgd :=range _bcba {if _adgd !=_dggag &&_adgd .Ury > _dggag .Lly {_dggag =nil ;break ;};};if _dggag !=nil &&_gcdc (_bfga .PdfRectangle ,_dggag .PdfRectangle ){_bfga ._baac =_dggag ;};};if len (_dgeac )> 0{_dbbbd :=_dgeac [0];for _ ,_bdbeg :=range _dgeac [1:]{if _bdbeg .Lly <=_dbbbd .Lly {_dbbbd =_bdbeg ;};};for _ ,_dadc :=range _dgeac {if _dadc !=_dbbbd &&_dadc .Lly < _dbbbd .Ury {_dbbbd =nil ;break ;};};if _dbbbd !=nil &&_gcdc (_bfga .PdfRectangle ,_dbbbd .PdfRectangle ){_bfga ._cef =_dbbbd ;};};};for _ ,_acacf :=range _aceff {if _acacf ._adbeg !=nil &&_acacf ._adbeg ._fcfb !=_acacf {_acacf ._adbeg =nil ;};if _acacf ._cef !=nil &&_acacf ._cef ._baac !=_acacf {_acacf ._cef =nil ;};if _acacf ._fcfb !=nil &&_acacf ._fcfb ._adbeg !=_acacf {_acacf ._fcfb =nil ;};if _acacf ._baac !=nil &&_acacf ._baac ._cef !=_acacf {_acacf ._baac =nil ;};};};func (_edfc *subpath )makeRectRuling (_gbaf _eb .Color )(*ruling ,bool ){if _fea {_ec .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_edfc );};_aebf :=_edfc ._cbf [:4];_cdaf :=make (map[int ]rulingKind ,len (_aebf ));for _ddce ,_eaeaf :=range _aebf {_gcdcd :=_edfc ._cbf [(_ddce +1)%4];_cdaf [_ddce ]=_bdec (_eaeaf ,_gcdcd );if _fea {_a .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_ddce ,_cdaf [_ddce ],_eaeaf ,_gcdcd );};};if _fea {_a .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_cdaf );};var _fdba ,_eeeef []int ;for _dgaa ,_gedgb :=range _cdaf {switch _gedgb {case _dbfe :_eeeef =append (_eeeef ,_dgaa );case _bedb :_fdba =append (_fdba ,_dgaa );};};if _fea {_a .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_eeeef ),_eeeef );_a .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_fdba ),_fdba );};_aafb :=(len (_eeeef )==2&&len (_fdba )==2)||(len (_eeeef )==2&&len (_fdba )==0&&_ebef (_aebf [_eeeef [0]],_aebf [_eeeef [1]]))||(len (_fdba )==2&&len (_eeeef )==0&&_cegbf (_aebf [_fdba [0]],_aebf [_fdba [1]]));if _fea {_a .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_eeeef ),len (_fdba ),_aafb );};if !_aafb {if _fea {_ec .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_edfc );_a .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_eeeef ),len (_fdba ),_aafb );};return &ruling {},false ;};if len (_fdba )==0{for _beefg ,_gdedg :=range _cdaf {if _gdedg !=_dbfe {_fdba =append (_fdba ,_beefg );};};};if len (_eeeef )==0{for _gcad ,_dfed :=range _cdaf {if _dfed !=_bedb {_eeeef =append (_eeeef ,_gcad );};};};if _fea {_ec .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_eeeef ),len (_fdba ),len (_aebf ),_eeeef ,_fdba ,_aebf );};var _fbgd ,_ddafd ,_bgea ,_cbdca _bd .Point ;if _aebf [_eeeef [0]].Y > _aebf [_eeeef [1]].Y {_bgea ,_cbdca =_aebf [_eeeef [0]],_aebf [_eeeef [1]];}else {_bgea ,_cbdca =_aebf [_eeeef [1]],_aebf [_eeeef [0]];};if _aebf [_fdba [0]].X > _aebf [_fdba [1]].X {_fbgd ,_ddafd =_aebf [_fdba [0]],_aebf [_fdba [1]];}else {_fbgd ,_ddafd =_aebf [_fdba [1]],_aebf [_fdba [0]];};_bgeag :=_eea .PdfRectangle {Llx :_fbgd .X ,Urx :_ddafd .X ,Lly :_cbdca .Y ,Ury :_bgea .Y };if _bgeag .Llx > _bgeag .Urx {_bgeag .Llx ,_bgeag .Urx =_bgeag .Urx ,_bgeag .Llx ;};if _bgeag .Lly > _bgeag .Ury {_bgeag .Lly ,_bgeag .Ury =_bgeag .Ury ,_bgeag .Lly ;};_ffec :=rectRuling {PdfRectangle :_bgeag ,_agdf :_aeab (_bgeag ),Color :_gbaf };if _ffec ._agdf ==_ffce {if _fea {_ec .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");};return nil ,false ;};_fcbd ,_dbbf :=_ffec .asRuling ();if !_dbbf {if _fea {_ec .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _cfad {_a .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_fcbd .String ());};return _fcbd ,true ;};type rulingKind int ;func (_gac *wordBag )absorb (_gbce *wordBag ){_eacd :=_gbce .makeRemovals ();for _cdb ,_afce :=range _gbce ._dfb {for _ ,_fddc :=range _afce {_gac .pullWord (_fddc ,_cdb ,_eacd );};};_gbce .applyRemovals (_eacd );};func (_gdbg rulingList )log (_agag string ){if !_cfad {return ;};_ec .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_agag ,_gdbg .String ());for _caaee ,_ccgg :=range _gdbg {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_caaee ,_ccgg .String ());};};func (_ebfd *textPara )fontsize ()float64 {return _ebfd ._gdfg [0]._cdbc };func (_ddgga rulingList )primMinMax ()(float64 ,float64 ){_gbge ,_beeea :=_ddgga [0]._ffeg ,_ddgga [0]._ffeg ;for _ ,_fbcf :=range _ddgga [1:]{if _fbcf ._ffeg < _gbge {_gbge =_fbcf ._ffeg ;}else if _fbcf ._ffeg > _beeea {_beeea =_fbcf ._ffeg ;};};return _gbge ,_beeea ;};func (_gfe *textObject )reset (){_gfe ._bfee =_bd .IdentityMatrix ();_gfe ._gcf =_bd .IdentityMatrix ();_gfe ._eaab =nil ;};type fontEntry struct{_gdad *_eea .PdfFont ;_dbaf int64 ;};type textObject struct{_eegd *Extractor ;_edg *_eea .PdfPageResources ;_edaa _ea .GraphicsState ;_eafd *textState ;_agba *stateStack ;_bfee _bd .Matrix ;_gcf _bd .Matrix ;_eaab []*textMark ;_bfec bool ;};

// Len returns the number of TextMarks in `ma`.
func (_bee *TextMarkArray )Len ()int {if _bee ==nil {return 0;};return len (_bee ._bcff );};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_bcff []TextMark };func (_gbab paraList )writeText (_cgcg _cg .Writer ){for _deef ,_ecg :=range _gbab {if _ecg ._dcge {continue ;};_ecg .writeText (_cgcg );if _deef !=len (_gbab )-1{if _acdg (_ecg ,_gbab [_deef +1]){_cgcg .Write ([]byte ("\u0020"));}else {_cgcg .Write ([]byte ("\u000a"));_cgcg .Write ([]byte ("\u000a"));};};};_cgcg .Write ([]byte ("\u000a"));_cgcg .Write ([]byte ("\u000a"));};func _efgeb (_fgab ,_cgfb int )uint64 {return uint64 (_fgab )*0x1000000+uint64 (_cgfb )};func (_dfgc intSet )del (_ddfce int ){delete (_dfgc ,_ddfce )};func _ecdd (_agbd string ,_cacbc int )string {if len (_agbd )< _cacbc {return _agbd ;};return _agbd [:_cacbc ];};func (_ccea *shapesState )stroke (_becf *[]pathSection ){_bgddb :=pathSection {_bbe :_ccea ._fbef ,Color :_ccea ._dbf .getStrokeColor ()};*_becf =append (*_becf ,_bgddb );if _cfad {_a .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_becf ),_ccea ,_ccea ._dbf .getStrokeColor (),_bgddb .bbox ());if _eeacg {for _gcba ,_bcag :=range _ccea ._fbef {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gcba ,_bcag );if _gcba ==10{break ;};};};};};func (_egcc *shapesState )lastpointEstablished ()(_bd .Point ,bool ){if _egcc ._gfg {return _egcc ._fdgb ,false ;};_bcde :=len (_egcc ._fbef );if _bcde > 0&&_egcc ._fbef [_bcde -1]._acbg {return _egcc ._fbef [_bcde -1].last (),false ;};return _bd .Point {},true ;};var _bfdf =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_eb .White ,StrokeColor :_eb .White };func (_deda *textTable )reduce ()*textTable {_bgfd :=make ([]int ,0,_deda ._fcge );_fbee :=make ([]int ,0,_deda ._gaed );for _eegbad :=0;_eegbad < _deda ._fcge ;_eegbad ++{if !_deda .emptyRow (_eegbad ){_bgfd =append (_bgfd ,_eegbad );};};for _ebgg :=0;_ebgg < _deda ._gaed ;_ebgg ++{if !_deda .emptyColumn (_ebgg ){_fbee =append (_fbee ,_ebgg );};};if len (_bgfd )==_deda ._fcge &&len (_fbee )==_deda ._gaed {return _deda ;};_fffag :=textTable {_cgfg :_deda ._cgfg ,_gaed :len (_fbee ),_fcge :len (_bgfd ),_beaaa :make (map[uint64 ]*textPara ,len (_fbee )*len (_bgfd ))};if _egbb {_ec .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_deda ._gaed ,_deda ._fcge ,len (_fbee ),len (_bgfd ));_ec .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_fbee );_ec .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_bgfd );};for _ddaa ,_cafed :=range _bgfd {for _adgbg ,_eafc :=range _fbee {_egddd :=_deda .get (_eafc ,_cafed );if _egddd ==nil {continue ;};if _egbb {_a .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_adgbg ,_ddaa ,_eafc ,_cafed ,_ecdd (_egddd .text (),50));};_fffag .put (_adgbg ,_ddaa ,_egddd );};};return &_fffag ;};func (_gagfd *wordBag )removeWord (_adfe *textWord ,_efda int ){_gcdf :=_gagfd ._dfb [_efda ];_gcdf =_cagdg (_gcdf ,_adfe );if len (_gcdf )==0{delete (_gagfd ._dfb ,_efda );}else {_gagfd ._dfb [_efda ]=_gcdf ;};};func _bdbf (_acgg _bd .Point )*subpath {return &subpath {_cbf :[]_bd .Point {_acgg }}};func (_daagc rulingList )snapToGroups ()rulingList {_aegad ,_fcebf :=_daagc .vertsHorzs ();if len (_aegad )> 0{_aegad =_aegad .snapToGroupsDirection ();};if len (_fcebf )> 0{_fcebf =_fcebf .snapToGroupsDirection ();};_caecg :=append (_aegad ,_fcebf ...);_caecg .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _caecg ;};func (_fedb *shapesState )moveTo (_febd ,_gegeb float64 ){_fedb ._gfg =true ;_fedb ._fdgb =_fedb .devicePoint (_febd ,_gegeb );if _dbbd {_ec .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_febd ,_gegeb ,_fedb ._fdgb );};};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_aec *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _aec ==nil {return nil ,_d .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_a .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );};_dbcgb :=len (_aec ._bcff );if _dbcgb ==0{return _aec ,nil ;};if start < _aec ._bcff [0].Offset {start =_aec ._bcff [0].Offset ;};if end > _aec ._bcff [_dbcgb -1].Offset +1{end =_aec ._bcff [_dbcgb -1].Offset +1;};_add :=_b .Search (_dbcgb ,func (_eeaa int )bool {return _aec ._bcff [_eeaa ].Offset +len (_aec ._bcff [_eeaa ].Text )-1>=start });if !(0<=_add &&_add < _dbcgb ){_dac :=_a .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_add ,_dbcgb ,_aec ._bcff [0],_aec ._bcff [_dbcgb -1]);return nil ,_dac ;};_gcda :=_b .Search (_dbcgb ,func (_gdfd int )bool {return _aec ._bcff [_gdfd ].Offset > end -1});if !(0<=_gcda &&_gcda < _dbcgb ){_bgb :=_a .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_gcda ,_dbcgb ,_aec ._bcff [0],_aec ._bcff [_dbcgb -1]);return nil ,_bgb ;};if _gcda <=_add {return nil ,_a .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_add ,_gcda );};return &TextMarkArray {_bcff :_aec ._bcff [_add :_gcda ]},nil ;};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func _gcfe (_bdce *wordBag ,_fedbe *textWord ,_ggec float64 )bool {return _bdce .Urx <=_fedbe .Llx &&_fedbe .Llx < _bdce .Urx +_ggec ;};func (_dedc *textLine )pullWord (_fccd *wordBag ,_fdcga *textWord ,_bgced int ){_dedc .appendWord (_fdcga );_fccd .removeWord (_fdcga ,_bgced );};func (_dfgd rulingList )bbox ()_eea .PdfRectangle {var _bfab _eea .PdfRectangle ;if len (_dfgd )==0{_ec .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");return _eea .PdfRectangle {};};if _dfgd [0]._accad ==_dbfe {_bfab .Llx ,_bfab .Urx =_dfgd .secMinMax ();_bfab .Lly ,_bfab .Ury =_dfgd .primMinMax ();}else {_bfab .Llx ,_bfab .Urx =_dfgd .primMinMax ();_bfab .Lly ,_bfab .Ury =_dfgd .secMinMax ();};return _bfab ;};func (_ecfc *stateStack )pop ()*textState {if _ecfc .empty (){return nil ;};_dgdg :=*(*_ecfc )[len (*_ecfc )-1];*_ecfc =(*_ecfc )[:len (*_ecfc )-1];return &_dgdg ;};func (_cgff *textObject )showText (_dbc []byte )error {return _cgff .renderText (_dbc )};const (_cdaa markKind =iota ;_eagg ;_fcdf ;_abed ;);func _dgdeg (_gcfd string )bool {for _ ,_eefa :=range _gcfd {if !_g .IsSpace (_eefa ){return false ;};};return true ;};func (_bb *imageExtractContext )extractInlineImage (_bbc *_ea .ContentStreamInlineImage ,_gaa _ea .GraphicsState ,_cbg *_eea .PdfPageResources )error {_bdb ,_ab :=_bbc .ToImage (_cbg );if _ab !=nil {return _ab ;};_ebe ,_ab :=_bbc .GetColorSpace (_cbg );if _ab !=nil {return _ab ;};if _ebe ==nil {_ebe =_eea .NewPdfColorspaceDeviceGray ();};_fba ,_ab :=_ebe .ImageToRGB (*_bdb );if _ab !=nil {return _ab ;};_eeg :=ImageMark {Image :&_fba ,Width :_gaa .CTM .ScalingFactorX (),Height :_gaa .CTM .ScalingFactorY (),Angle :_gaa .CTM .Angle ()};_eeg .X ,_eeg .Y =_gaa .CTM .Translation ();_bb ._db =append (_bb ._db ,_eeg );_bb ._fb ++;return nil ;};func (_aeed *textWord )toTextMarks (_aecf *int )[]TextMark {var _ggcde []TextMark ;for _ ,_bdbcg :=range _aeed ._dfgdg {_ggcde =_degf (_ggcde ,_aecf ,_bdbcg .ToTextMark ());};return _ggcde ;};func (_bcedg rulingList )toGrids ()[]rulingList {if _cfad {_ec .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_bcedg );};_gbgc :=_bcedg .intersections ();if _cfad {_ec .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_bcedg ),len (_gbgc ));for _ ,_fcbg :=range _bfagc (_gbgc ){_a .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_fcbg ,_gbgc [_fcbg ]);};};_fbaa :=make (map[int ]intSet ,len (_bcedg ));for _ecbcd :=range _bcedg {_fagcg :=_bcedg .connections (_gbgc ,_ecbcd );if len (_fagcg )> 0{_fbaa [_ecbcd ]=_fagcg ;};};if _cfad {_ec .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_fbaa ));for _ ,_gbae :=range _bfagc (_fbaa ){_a .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_gbae ,_fbaa [_gbae ]);};};_abge :=_edada (len (_bcedg ),func (_adge ,_face int )bool {_baee ,_aead :=len (_fbaa [_adge ]),len (_fbaa [_face ]);if _baee !=_aead {return _baee > _aead ;};return _bcedg .comp (_adge ,_face );});if _cfad {_ec .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_abge );};_ebg :=[][]int {{_abge [0]}};_efcad :for _ ,_afba :=range _abge [1:]{for _acba ,_baca :=range _ebg {for _ ,_ffaa :=range _baca {if _fbaa [_ffaa ].has (_afba ){_ebg [_acba ]=append (_baca ,_afba );continue _efcad ;};};};_ebg =append (_ebg ,[]int {_afba });};if _cfad {_ec .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_ebg );};_b .SliceStable (_ebg ,func (_beba ,_eced int )bool {return len (_ebg [_beba ])> len (_ebg [_eced ])});for _ ,_aeff :=range _ebg {_b .Slice (_aeff ,func (_aacf ,_fagce int )bool {return _bcedg .comp (_aeff [_aacf ],_aeff [_fagce ])});};_cabe :=make ([]rulingList ,len (_ebg ));for _gdfdc ,_ebca :=range _ebg {_bdgdf :=make (rulingList ,len (_ebca ));for _agfg ,_efb :=range _ebca {_bdgdf [_agfg ]=_bcedg [_efb ];};_cabe [_gdfdc ]=_bdgdf ;};if _cfad {_ec .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_cabe );};var _ecag []rulingList ;for _ ,_ebfb :=range _cabe {if _cdgd ,_dddg :=_ebfb .isActualGrid ();_dddg {_ebfb =_cdgd ;_ebfb =_ebfb .snapToGroups ();_ecag =append (_ecag ,_ebfb );};};if _cfad {_fbfe ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_ecag );_ec .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_cabe ),len (_ecag ));};return _ecag ;};func _bgdfg (_agcg *wordBag ,_bcbg float64 ,_cbce ,_fddb rulingList )[]*wordBag {var _gacg []*wordBag ;for _ ,_affa :=range _agcg .depthIndexes (){_dcb :=false ;for !_agcg .empty (_affa ){_egdf :=_agcg .firstReadingIndex (_affa );_fcbbe :=_agcg .firstWord (_egdf );_fgdb :=_efd (_fcbbe ,_bcbg ,_cbce ,_fddb );_agcg .removeWord (_fcbbe ,_egdf );if _becfa {_ec .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_fcbbe .String ());};for _baeb :=true ;_baeb ;_baeb =_dcb {_dcb =false ;_bfaab :=_cbdc *_fgdb ._egdd ;_gfcf :=_adbe *_fgdb ._egdd ;_afbd :=_ccdd *_fgdb ._egdd ;if _becfa {_ec .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_fgdb .minDepth (),_fgdb .maxDepth (),_afbd ,_gfcf );};if _agcg .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_fgdb ,_dgf (_ecef ,0),_fgdb .minDepth ()-_afbd ,_fgdb .maxDepth ()+_afbd ,_egcge ,false ,false )> 0{_dcb =true ;};if _agcg .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_fgdb ,_dgf (_ecef ,_gfcf ),_fgdb .minDepth (),_fgdb .maxDepth (),_bbfe ,false ,false )> 0{_dcb =true ;};if _dcb {continue ;};_ebde :=_agcg .scanBand ("",_fgdb ,_dgf (_gcfe ,_bfaab ),_fgdb .minDepth (),_fgdb .maxDepth (),_bgdf ,true ,false );if _ebde > 0{_eaff :=(_fgdb .maxDepth ()-_fgdb .minDepth ())/_fgdb ._egdd ;if (_ebde > 1&&float64 (_ebde )> 0.3*_eaff )||_ebde <=10{if _agcg .scanBand ("\u006f\u0074\u0068e\u0072",_fgdb ,_dgf (_gcfe ,_bfaab ),_fgdb .minDepth (),_fgdb .maxDepth (),_bgdf ,false ,true )> 0{_dcb =true ;};};};};_gacg =append (_gacg ,_fgdb );};};return _gacg ;};func (_dcaa *textPara )depth ()float64 {if _dcaa ._dcge {return -1.0;};if len (_dcaa ._gdfg )> 0{return _dcaa ._gdfg [0]._fbae ;};return _dcaa ._dcdg .depth ();};func (_ddgb *shapesState )clearPath (){_ddgb ._fbef =nil ;_ddgb ._gfg =false ;if _dbbd {_ec .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_ddgb );};};func (_ffa *textLine )toTextMarks (_cdeac *int )[]TextMark {var _caba []TextMark ;for _ ,_baaa :=range _ffa ._aafd {if _baaa ._fdcc {_caba =_dgde (_caba ,_cdeac ,"\u0020");};_fcbb :=_baaa .toTextMarks (_cdeac );_caba =append (_caba ,_fcbb ...);};return _caba ;};func _bfdd (_fgga _eea .PdfColorspace ,_fdbde _eea .PdfColor )_eb .Color {if _fgga ==nil ||_fdbde ==nil {return _eb .Black ;};_egac ,_gfag :=_fgga .ColorToRGB (_fdbde );if _gfag !=nil {_ec .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_fdbde ,_fgga ,_gfag );return _eb .Black ;};_eadff ,_bfcc :=_egac .(*_eea .PdfColorDeviceRGB );if !_bfcc {_ec .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_egac );return _eb .Black ;};return _eb .NRGBA {R :uint8 (_eadff .R ()*255),G :uint8 (_eadff .G ()*255),B :uint8 (_eadff .B ()*255),A :uint8 (255)};};func (_cdbb compositeCell )parasBBox ()(paraList ,_eea .PdfRectangle ){return _cdbb .paraList ,_cdbb .PdfRectangle ;};func _dcdfa (_bbfde map[int ][]float64 )string {_bfae :=_cccgg (_bbfde );_feae :=make ([]string ,len (_bbfde ));for _defae ,_gcdd :=range _bfae {_feae [_defae ]=_a .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_gcdd ,_bbfde [_gcdd ]);};return _a .Sprintf ("\u007b\u0025\u0073\u007d",_dg .Join (_feae ,"\u002c\u0020"));};func (_dgee *subpath )clear (){*_dgee =subpath {}};type textResult struct{_bec PageText ;_eef int ;_cgd int ;};func (_fcdca rulingList )secMinMax ()(float64 ,float64 ){_bcbf ,_edag :=_fcdca [0]._adfg ,_fcdca [0]._gcge ;for _ ,_dbbaa :=range _fcdca [1:]{if _dbbaa ._adfg < _bcbf {_bcbf =_dbbaa ._adfg ;};if _dbbaa ._gcge > _edag {_edag =_dbbaa ._gcge ;};};return _bcbf ,_edag ;};func (_aafe *wordBag )depthBand (_ece ,_gbf float64 )[]int {if len (_aafe ._dfb )==0{return nil ;};return _aafe .depthRange (_aafe .getDepthIdx (_ece ),_aafe .getDepthIdx (_gbf ));};

// Tables returns the tables extracted from the page.
func (_efc PageText )Tables ()[]TextTable {if _egbb {_ec .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_efc ._bea ));};return _efc ._bea ;};func (_gab *textObject )setFont (_ffd string ,_agde float64 )error {if _gab ==nil {return nil ;};_gab ._eafd ._bba =_agde ;_adb ,_eaag :=_gab .getFont (_ffd );if _eaag !=nil {return _eaag ;};_gab ._eafd ._bgdd =_adb ;if _gab ._agba .empty (){_gab ._agba .push (_gab ._eafd );}else {_gab ._agba .top ()._bgdd =_gab ._eafd ._bgdd ;};return nil ;};func (_cacb *textLine )appendWord (_dcee *textWord ){_cacb ._aafd =append (_cacb ._aafd ,_dcee );_cacb .PdfRectangle =_gca (_cacb .PdfRectangle ,_dcee .PdfRectangle );if _dcee ._cagfe > _cacb ._cdbc {_cacb ._cdbc =_dcee ._cagfe ;};if _dcee ._bbegf > _cacb ._fbae {_cacb ._fbae =_dcee ._bbegf ;};};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_fdb *Extractor )ExtractTextWithStats ()(_gef string ,_bdc int ,_gdf int ,_bgd error ){_eaf ,_bdc ,_gdf ,_bgd :=_fdb .ExtractPageText ();if _bgd !=nil {return "",_bdc ,_gdf ,_bgd ;};return _eaf .Text (),_bdc ,_gdf ,nil ;};func (_bbbf *textObject )newTextMark (_afbc string ,_ggag _bd .Matrix ,_ddace _bd .Point ,_bge float64 ,_fgge *_eea .PdfFont ,_aebc float64 ,_dfafbc ,_ceegf _eb .Color )(textMark ,bool ){_cedcg :=_ggag .Angle ();_dfge :=_cbc (_cedcg ,_badfe );var _beee float64 ;if _dfge %180!=90{_beee =_ggag .ScalingFactorY ();}else {_beee =_ggag .ScalingFactorX ();};_bbaa :=_bdge (_ggag );_dafg :=_eea .PdfRectangle {Llx :_bbaa .X ,Lly :_bbaa .Y ,Urx :_ddace .X ,Ury :_ddace .Y };switch _dfge %360{case 90:_dafg .Urx -=_beee ;case 180:_dafg .Ury -=_beee ;case 270:_dafg .Urx +=_beee ;case 0:_dafg .Ury +=_beee ;default:_dfge =0;_dafg .Ury +=_beee ;};if _dafg .Llx > _dafg .Urx {_dafg .Llx ,_dafg .Urx =_dafg .Urx ,_dafg .Llx ;};if _dafg .Lly > _dafg .Ury {_dafg .Lly ,_dafg .Ury =_dafg .Ury ,_dafg .Lly ;};_cdcd ,_gabb :=_cfca (_dafg ,_bbbf ._eegd ._cfd );if !_gabb {_ec .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_dafg ,_bbbf ._eegd ._cfd ,_afbc );};_dafg =_cdcd ;_affe :=_dafg ;_ceef :=_bbbf ._eegd ._cfd ;switch _dfge %360{case 90:_ceef .Urx ,_ceef .Ury =_ceef .Ury ,_ceef .Urx ;_affe =_eea .PdfRectangle {Llx :_ceef .Urx -_dafg .Ury ,Urx :_ceef .Urx -_dafg .Lly ,Lly :_dafg .Llx ,Ury :_dafg .Urx };case 180:_affe =_eea .PdfRectangle {Llx :_ceef .Urx -_dafg .Llx ,Urx :_ceef .Urx -_dafg .Urx ,Lly :_ceef .Ury -_dafg .Lly ,Ury :_ceef .Ury -_dafg .Ury };case 270:_ceef .Urx ,_ceef .Ury =_ceef .Ury ,_ceef .Urx ;_affe =_eea .PdfRectangle {Llx :_dafg .Ury ,Urx :_dafg .Lly ,Lly :_ceef .Ury -_dafg .Llx ,Ury :_ceef .Ury -_dafg .Urx };};if _affe .Llx > _affe .Urx {_affe .Llx ,_affe .Urx =_affe .Urx ,_affe .Llx ;};if _affe .Lly > _affe .Ury {_affe .Lly ,_affe .Ury =_affe .Ury ,_affe .Lly ;};_eebe :=textMark {_cdca :_afbc ,PdfRectangle :_affe ,_afaeb :_dafg ,_eaeg :_fgge ,_cbab :_beee ,_gggc :_aebc ,_ddac :_ggag ,_fdbf :_ddace ,_fgcd :_dfge ,_cgcec :_dfafbc ,_dbce :_ceegf };if _bdgea {_ec .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_bbaa ,_ddace ,_eebe .String ());};return _eebe ,_gabb ;};func _eaad (_agce []compositeCell )[]float64 {var _gcce []*textLine ;_cecec :=0;for _ ,_acge :=range _agce {_cecec +=len (_acge .paraList );_gcce =append (_gcce ,_acge .lines ()...);};_b .Slice (_gcce ,func (_fbbe ,_bgfa int )bool {_edcff ,_fcabaa :=_gcce [_fbbe ],_gcce [_bgfa ];_ggbd ,_ecbcc :=_edcff ._fbae ,_fcabaa ._fbae ;if !_caeg (_ggbd -_ecbcc ){return _ggbd < _ecbcc ;};return _edcff .Llx < _fcabaa .Llx ;});if _egbb {_a .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_cecec ,len (_gcce ));for _afbg ,_caaec :=range _gcce {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_afbg ,_caaec );};};var _ccceb []float64 ;_cdbcg :=_gcce [0];var _aeagb [][]*textLine ;_bgdb :=[]*textLine {_cdbcg };for _cdef ,_eabce :=range _gcce [1:]{if _eabce .Ury < _cdbcg .Lly {_eaeae :=0.5*(_eabce .Ury +_cdbcg .Lly );if _egbb {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_cdef ,_eabce .Ury ,_cdbcg .Lly ,_eaeae ,_cdbcg ,_eabce );};_ccceb =append (_ccceb ,_eaeae );_aeagb =append (_aeagb ,_bgdb );_bgdb =nil ;};_bgdb =append (_bgdb ,_eabce );if _eabce .Lly < _cdbcg .Lly {_cdbcg =_eabce ;};};if len (_bgdb )> 0{_aeagb =append (_aeagb ,_bgdb );};if _egbb {_a .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_ccceb );};if _egbb {_ec .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_agce ));for _feefb ,_abbg :=range _agce {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_feefb ,_abbg );};_ec .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_aeagb ));for _fdce ,_dbgcg :=range _aeagb {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_fdce ,len (_dbgcg ));for _bddga ,_ccab :=range _dbgcg {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_bddga ,_ccab );};};};_dbab :=true ;for _baegg ,_gefcf :=range _aeagb {_gbfb :=true ;for _gbgec ,_bdgcd :=range _agce {if _egbb {_a .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_baegg ,len (_aeagb ),_gbgec ,len (_agce ),_bdgcd );};if !_bdgcd .hasLines (_gefcf ){if _egbb {_a .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_baegg ,len (_aeagb ),_gbgec ,len (_agce ));};_gbfb =false ;break ;};};if !_gbfb {_dbab =false ;break ;};};if !_dbab {if _egbb {_ec .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");};_ccceb =nil ;};if _egbb &&_ccceb !=nil {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_ccceb );};return _ccceb ;};func (_ecgg *textPara )writeText (_deegc _cg .Writer ){if _ecgg ._dcdg ==nil {_ecgg .writeCellText (_deegc );return ;};for _gdbb :=0;_gdbb < _ecgg ._dcdg ._fcge ;_gdbb ++{for _gbee :=0;_gbee < _ecgg ._dcdg ._gaed ;_gbee ++{_aegf :=_ecgg ._dcdg .get (_gbee ,_gdbb );if _aegf ==nil {_deegc .Write ([]byte ("\u0009"));}else {_aegf .writeCellText (_deegc );};_deegc .Write ([]byte ("\u0020"));};if _gdbb < _ecgg ._dcdg ._fcge -1{_deegc .Write ([]byte ("\u000a"));};};};func (_cadab *textWord )computeText ()string {_gbgcf :=make ([]string ,len (_cadab ._dfgdg ));for _cabcb ,_dbeb :=range _cadab ._dfgdg {_gbgcf [_cabcb ]=_dbeb ._cdca ;};return _dg .Join (_gbgcf ,"");};func _ggbe (_adfd float64 )int {var _bgcb int ;if _adfd >=0{_bgcb =int (_adfd /_eeab );}else {_bgcb =int (_adfd /_eeab )-1;};return _bgcb ;};func _cbd (_eac *Extractor ,_dab *_eea .PdfPageResources ,_gee _ea .GraphicsState ,_gfdc *textState ,_afeed *stateStack )*textObject {return &textObject {_eegd :_eac ,_edg :_dab ,_edaa :_gee ,_agba :_afeed ,_eafd :_gfdc ,_bfee :_bd .IdentityMatrix (),_gcf :_bd .IdentityMatrix ()};};type intSet map[int ]struct{};func (_ebad *wordBag )text ()string {_gbdfb :=_ebad .allWords ();_cgdf :=make ([]string ,len (_gbdfb ));for _fcde ,_ede :=range _gbdfb {_cgdf [_fcde ]=_ede ._fcgd ;};return _dg .Join (_cgdf ,"\u0020");};func _dbdgg (_gdgd int ,_cfbf map[int ][]float64 )([]int ,int ){_bfad :=make ([]int ,_gdgd );_aeaee :=0;for _cbdfg :=0;_cbdfg < _gdgd ;_cbdfg ++{_bfad [_cbdfg ]=_aeaee ;_aeaee +=len (_cfbf [_cbdfg ])+1;};return _bfad ,_aeaee ;};func (_fafg *textLine )markWordBoundaries (){_gfdg :=_gfbd *_fafg ._cdbc ;for _efcg ,_ggegd :=range _fafg ._aafd [1:]{if _caf (_ggegd ,_fafg ._aafd [_efcg ])>=_gfdg {_ggegd ._fdcc =true ;};};};func _caeg (_abee float64 )bool {return _fe .Abs (_abee )< _daf };func (_ebaf *textTable )markCells (){for _ggfad :=0;_ggfad < _ebaf ._fcge ;_ggfad ++{for _ebcfc :=0;_ebcfc < _ebaf ._gaed ;_ebcfc ++{_eggb :=_ebaf .get (_ebcfc ,_ggfad );if _eggb !=nil {_eggb ._dfcb =true ;};};};};func _efd (_cgad *textWord ,_bcded float64 ,_dce ,_efgb rulingList )*wordBag {_gbcd :=_ggbe (_cgad ._bbegf );_gabg :=[]*textWord {_cgad };_gdg :=wordBag {_dfb :map[int ][]*textWord {_gbcd :_gabg },PdfRectangle :_cgad .PdfRectangle ,_egdd :_cgad ._cagfe ,_ggcb :_bcded ,_afdb :_dce ,_acgb :_efgb };return &_gdg ;};var (_fc =_d .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_gc =_d .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func (_fgdac *textTable )reduceTiling (_bcgc gridTiling ,_bccfa float64 )*textTable {_eagae :=make ([]int ,0,_fgdac ._fcge );_ceab :=make ([]int ,0,_fgdac ._gaed );_ebbf :=_bcgc ._gdaac ;_egdcd :=_bcgc ._fdga ;for _fdcgc :=0;_fdcgc < _fgdac ._fcge ;_fdcgc ++{_fbbcb :=_fdcgc > 0&&_fe .Abs (_egdcd [_fdcgc -1]-_egdcd [_fdcgc ])< _bccfa &&_fgdac .emptyRow (_fdcgc );if !_fbbcb {_eagae =append (_eagae ,_fdcgc );};};for _bcacg :=0;_bcacg < _fgdac ._gaed ;_bcacg ++{_aegg :=_bcacg < _fgdac ._gaed -1&&_fe .Abs (_ebbf [_bcacg +1]-_ebbf [_bcacg ])< _bccfa &&_fgdac .emptyColumn (_bcacg );if !_aegg {_ceab =append (_ceab ,_bcacg );};};if len (_eagae )==_fgdac ._fcge &&len (_ceab )==_fgdac ._gaed {return _fgdac ;};_fccf :=textTable {_cgfg :_fgdac ._cgfg ,_gaed :len (_ceab ),_fcge :len (_eagae ),_adea :make (map[uint64 ]compositeCell ,len (_ceab )*len (_eagae ))};if _egbb {_ec .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_fgdac ._gaed ,_fgdac ._fcge ,len (_ceab ),len (_eagae ));_ec .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_ceab );_ec .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_eagae );};for _bggbf ,_badc :=range _eagae {for _fccb ,_faaf :=range _ceab {_ddfcg ,_dfdd :=_fgdac .getComposite (_faaf ,_badc );if len (_ddfcg )==0{continue ;};if _egbb {_a .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_fccb ,_bggbf ,_faaf ,_badc ,_ecdd (_ddfcg .merge ().text (),50));};_fccf .putComposite (_fccb ,_bggbf ,_ddfcg ,_dfdd );};};return &_fccf ;};func (_gaef *shapesState )establishSubpath ()*subpath {_fdab ,_ecbb :=_gaef .lastpointEstablished ();if !_ecbb {_gaef ._fbef =append (_gaef ._fbef ,_bdbf (_fdab ));};if len (_gaef ._fbef )==0{return nil ;};_gaef ._gfg =false ;return _gaef ._fbef [len (_gaef ._fbef )-1];};func (_gce *subpath )last ()_bd .Point {return _gce ._cbf [len (_gce ._cbf )-1]};func _faeb (_fadb []*wordBag )[]*wordBag {if len (_fadb )<=1{return _fadb ;};if _ccdc {_ec .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_b .Slice (_fadb ,func (_ecfe ,_ccdf int )bool {_ecff ,_eeaab :=_fadb [_ecfe ],_fadb [_ccdf ];_feeb :=_ecff .Width ()*_ecff .Height ();_bdbg :=_eeaab .Width ()*_eeaab .Height ();if _feeb !=_bdbg {return _feeb > _bdbg ;};if _ecff .Height ()!=_eeaab .Height (){return _ecff .Height ()> _eeaab .Height ();};return _ecfe < _ccdf ;});var _cdcb []*wordBag ;_caef :=make (intSet );for _gcdb :=0;_gcdb < len (_fadb );_gcdb ++{if _caef .has (_gcdb ){continue ;};_adbf :=_fadb [_gcdb ];for _dgbb :=_gcdb +1;_dgbb < len (_fadb );_dgbb ++{if _caef .has (_gcdb ){continue ;};_adafe :=_fadb [_dgbb ];_adab :=_adbf .PdfRectangle ;_adab .Llx -=_adbf ._egdd ;if _ceba (_adab ,_adafe .PdfRectangle ){_adbf .absorb (_adafe );_caef .add (_dgbb );};};_cdcb =append (_cdcb ,_adbf );};if len (_fadb )!=len (_cdcb )+len (_caef ){_ec .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_fadb ),len (_cdcb ),len (_caef ));};return _cdcb ;};func (_gfba *textPara )toTextMarks (_dgged *int )[]TextMark {if _gfba ._dcdg ==nil {return _gfba .toCellTextMarks (_dgged );};var _bdbe []TextMark ;for _dgda :=0;_dgda < _gfba ._dcdg ._fcge ;_dgda ++{for _addg :=0;_addg < _gfba ._dcdg ._gaed ;_addg ++{_agcf :=_gfba ._dcdg .get (_addg ,_dgda );if _agcf ==nil {_bdbe =_dgde (_bdbe ,_dgged ,"\u0009");}else {_dgea :=_agcf .toCellTextMarks (_dgged );_bdbe =append (_bdbe ,_dgea ...);};_bdbe =_dgde (_bdbe ,_dgged ,"\u0020");};if _dgda < _gfba ._dcdg ._fcge -1{_bdbe =_dgde (_bdbe ,_dgged ,"\u000a");};};return _bdbe ;};func (_edef rulingList )sortStrict (){_b .Slice (_edef ,func (_cadggf ,_cffa int )bool {_bbgd ,_dbdb :=_edef [_cadggf ],_edef [_cffa ];_aggcg ,_fdfg :=_bbgd ._accad ,_dbdb ._accad ;if _aggcg !=_fdfg {return _aggcg > _fdfg ;};_bafa ,_ecage :=_bbgd ._ffeg ,_dbdb ._ffeg ;if !_caeg (_bafa -_ecage ){return _bafa < _ecage ;};_bafa ,_ecage =_bbgd ._adfg ,_dbdb ._adfg ;if _bafa !=_ecage {return _bafa < _ecage ;};return _bbgd ._gcge < _dbdb ._gcge ;});};type event struct{_gggg float64 ;_bdbfd bool ;_bdeca int ;};func _gfac (_ccdac map[float64 ]gridTile )[]float64 {_cdgee :=make ([]float64 ,0,len (_ccdac ));for _ffae :=range _ccdac {_cdgee =append (_cdgee ,_ffae );};_b .Float64s (_cdgee );return _cdgee ;};func (_cccc *textObject )getFillColor ()_eb .Color {return _bfdd (_cccc ._edaa .ColorspaceNonStroking ,_cccc ._edaa .ColorNonStroking );};func (_bded *compositeCell )updateBBox (){for _ ,_fbge :=range _bded .paraList {_bded .PdfRectangle =_gca (_bded .PdfRectangle ,_fbge .PdfRectangle );};};type rectRuling struct{_agdf rulingKind ;_efeg markKind ;_eb .Color ;_eea .PdfRectangle ;};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _eea .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_eea .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _eb .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _eb .Color ;};func (_fgbb *wordBag )empty (_eaea int )bool {_ ,_gagfa :=_fgbb ._dfb [_eaea ];return !_gagfa };func _egfdc (_ecfcb ,_agafg int )int {if _ecfcb < _agafg {return _ecfcb ;};return _agafg ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_eea .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func _cccgg (_efge map[int ][]float64 )[]int {_bdeea :=make ([]int ,len (_efge ));_gggb :=0;for _fgca :=range _efge {_bdeea [_gggb ]=_fgca ;_gggb ++;};_b .Ints (_bdeea );return _bdeea ;};func (_eafb paraList )extractTables (_gbacb []gridTiling )paraList {if _egbb {_ec .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eafb ));};if len (_eafb )< _fbf {return _eafb ;};_afggg :=_eafb .findTables (_gbacb );if _egbb {_ec .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_afggg ));for _bgbg ,_gbfab :=range _afggg {_gbfab .log (_a .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_bgbg ));};};return _eafb .applyTables (_afggg );};func (_bdd *textObject )getCurrentFont ()*_eea .PdfFont {var _aba *_eea .PdfFont ;if !_bdd ._agba .empty (){_aba =_bdd ._agba .top ()._bgdd ;};if _aba ==nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");return _eea .DefaultFont ();};return _aba ;};func (_ceac lineRuling )yMean ()float64 {return 0.5*(_ceac ._cadgg .Y +_ceac ._eeebg .Y )};func _cced (_cdcbf []pathSection ){if _daag < 0.0{return ;};if _cfad {_ec .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_cdcbf ));};for _deag ,_fdbb :=range _cdcbf {for _fgcfe ,_edffa :=range _fdbb ._bbe {for _gfaa ,_cdeafg :=range _edffa ._cbf {_edffa ._cbf [_gfaa ]=_bd .Point {X :_dffeg (_cdeafg .X ),Y :_dffeg (_cdeafg .Y )};if _cfad {_cacc :=_edffa ._cbf [_gfaa ];if !_cadag (_cdeafg ,_cacc ){_egaed :=_bd .Point {X :_cacc .X -_cdeafg .X ,Y :_cacc .Y -_cdeafg .Y };_a .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_deag ,_fgcfe ,_gfaa ,_cdeafg ,_cacc ,_egaed );};};};};};};type textWord struct{_eea .PdfRectangle ;_bbegf float64 ;_fcgd string ;_dfgdg []*textMark ;_cagfe float64 ;_fdcc bool ;};func (_bbdc rulingList )intersections ()map[int ]intSet {var _ceee ,_cbdde []int ;for _bgbd ,_fbefg :=range _bbdc {switch _fbefg ._accad {case _bedb :_ceee =append (_ceee ,_bgbd );case _dbfe :_cbdde =append (_cbdde ,_bgbd );};};if len (_ceee )< _bade +1||len (_cbdde )< _bbd +1{return nil ;};if len (_ceee )+len (_cbdde )> _fdbg {_ec .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_bbdc ),len (_ceee ),len (_cbdde ));return nil ;};_gegb :=make (map[int ]intSet ,len (_ceee )+len (_cbdde ));for _ ,_afda :=range _ceee {for _ ,_fgfeb :=range _cbdde {if _bbdc [_afda ].intersects (_bbdc [_fgfeb ]){if _ ,_adccb :=_gegb [_afda ];!_adccb {_gegb [_afda ]=make (intSet );};if _ ,_cfadc :=_gegb [_fgfeb ];!_cfadc {_gegb [_fgfeb ]=make (intSet );};_gegb [_afda ].add (_fgfeb );_gegb [_fgfeb ].add (_afda );};};};return _gegb ;};

// String returns a description of `p`.
func (_bcdf *textPara )String ()string {if _bcdf ._dcge {return _a .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_bcdf .PdfRectangle );};_cefe :="";if _bcdf ._dcdg !=nil {_cefe =_a .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_bcdf ._dcdg ._gaed ,_bcdf ._dcdg ._fcge );};return _a .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_bcdf .PdfRectangle ,_cefe ,len (_bcdf ._gdfg ),_ecdd (_bcdf .text (),50));};func (_gdcd *wordBag )blocked (_gbea *textWord )bool {if _gbea .Urx < _gdcd .Llx {_edf :=_acefe (_gbea .PdfRectangle );_ead :=_ddba (_gdcd .PdfRectangle );if _gdcd ._afdb .blocks (_edf ,_ead ){if _deaf {_ec .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gbea ,_gdcd );};return true ;};}else if _gdcd .Urx < _gbea .Llx {_egb :=_acefe (_gdcd .PdfRectangle );_bde :=_ddba (_gbea .PdfRectangle );if _gdcd ._afdb .blocks (_egb ,_bde ){if _deaf {_ec .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gbea ,_gdcd );};return true ;};};if _gbea .Ury < _gdcd .Lly {_edd :=_abag (_gbea .PdfRectangle );_acdd :=_gcdfd (_gdcd .PdfRectangle );if _gdcd ._acgb .blocks (_edd ,_acdd ){if _deaf {_ec .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_gbea ,_gdcd );};return true ;};}else if _gdcd .Ury < _gbea .Lly {_egae :=_abag (_gdcd .PdfRectangle );_bdeg :=_gcdfd (_gbea .PdfRectangle );if _gdcd ._acgb .blocks (_egae ,_bdeg ){if _deaf {_ec .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_gbea ,_gdcd );};return true ;};};return false ;};func _gcdc (_eebd ,_bgca _eea .PdfRectangle )bool {return _bgca .Llx <=_eebd .Urx &&_eebd .Llx <=_bgca .Urx ;};func _cfbc (_edagd []compositeCell )[]float64 {var _edee []float64 ;for _ ,_ddgbbf :=range _edagd {_gede :=[]float64 {_ddgbbf .Ury };for _ddcg ,_fbde :=range _ddgbbf .paraList [1:]{_aaeae :=_ddgbbf .paraList [_ddcg ];if _fbde .Llx < _aaeae .Urx {return nil ;};_gede =append (_gede ,0.5*(_fbde .Llx +_aaeae .Urx ));};};return _edee ;};type gridTile struct{_eea .PdfRectangle ;_cddd ,_ddbc ,_bbbc ,_cece bool ;};func _caf (_cfeg ,_caae bounded )float64 {return _cfeg .bbox ().Llx -_caae .bbox ().Urx };type markKind int ;const (_ffce rulingKind =iota ;_dbfe ;_bedb ;);func (_acfeg *subpath )isQuadrilateral ()bool {if len (_acfeg ._cbf )< 4||len (_acfeg ._cbf )> 5{return false ;};if len (_acfeg ._cbf )==5{_ceeb :=_acfeg ._cbf [0];_gcbc :=_acfeg ._cbf [4];if _ceeb .X !=_gcbc .X ||_ceeb .Y !=_gcbc .Y {return false ;};};return true ;};func (_cgbf *textTable )compositeColCorridors ()map[int ][]float64 {_edfca :=make (map[int ][]float64 ,_cgbf ._gaed );if _egbb {_ec .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_cgbf ._gaed );};for _efdd :=0;_efdd < _cgbf ._gaed ;_efdd ++{var _cdfg []compositeCell ;for _dgdec :=0;_dgdec < _cgbf ._fcge ;_dgdec ++{if _afcce ,_ggagb :=_cgbf ._adea [_efgeb (_efdd ,_dgdec )];_ggagb {_cdfg =append (_cdfg ,_afcce );};};_cfddd :=_cfbc (_cdfg );_edfca [_efdd ]=_cfddd ;if _egbb {_a .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_efdd ,_cfddd );};};return _edfca ;};func (_ade *textObject )getFont (_baff string )(*_eea .PdfFont ,error ){if _ade ._eegd ._eg !=nil {_ade ._eegd ._ff ++;_ggdd ,_cfag :=_ade ._eegd ._eg [_baff ];if _cfag {_ggdd ._dbaf =_ade ._eegd ._ff ;return _ggdd ._gdad ,nil ;};};_eaaa ,_fdbd :=_ade .getFontDirect (_baff );if _fdbd !=nil {return nil ,_fdbd ;};if _ade ._eegd ._eg !=nil {_bbcbg :=fontEntry {_eaaa ,_ade ._eegd ._ff };if len (_ade ._eegd ._eg )>=_beeg {var _ccfd []string ;for _bcee :=range _ade ._eegd ._eg {_ccfd =append (_ccfd ,_bcee );};_b .Slice (_ccfd ,func (_egcg ,_cfde int )bool {return _ade ._eegd ._eg [_ccfd [_egcg ]]._dbaf < _ade ._eegd ._eg [_ccfd [_cfde ]]._dbaf ;});delete (_ade ._eegd ._eg ,_ccfd [0]);};_ade ._eegd ._eg [_baff ]=_bbcbg ;};return _eaaa ,nil ;};func _fagb (_fbff []rulingList )(rulingList ,rulingList ){var _bcea rulingList ;for _ ,_dgeda :=range _fbff {_bcea =append (_bcea ,_dgeda ...);};return _bcea .vertsHorzs ();};func _dbbgd (_bdab []int )[]int {_efdcf :=make ([]int ,len (_bdab ));for _dcf ,_adbg :=range _bdab {_efdcf [len (_bdab )-1-_dcf ]=_adbg ;};return _efdcf ;};func (_dgfe *textLine )bbox ()_eea .PdfRectangle {return _dgfe .PdfRectangle };func (_dcegc rulingList )tidied (_eded string )rulingList {_cfbb :=_dcegc .removeDuplicates ();_cfbb .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_bfaac :=_cfbb .snapToGroups ();if _bfaac ==nil {return nil ;};_bfaac .sort ();if _cfad {_ec .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_eded ,len (_dcegc ),len (_cfbb ),len (_bfaac ));};_bfaac .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _bfaac ;};func _gcdfd (_abff _eea .PdfRectangle )*ruling {return &ruling {_accad :_dbfe ,_ffeg :_abff .Lly ,_adfg :_abff .Llx ,_gcge :_abff .Urx };};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_fbe *Extractor )ExtractText ()(string ,error ){_bbcb ,_ ,_ ,_cdc :=_fbe .ExtractTextWithStats ();return _bbcb ,_cdc ;};func (_bbfb *subpath )close (){if !_cadag (_bbfb ._cbf [0],_bbfb .last ()){_bbfb .add (_bbfb ._cbf [0]);};_bbfb ._acbg =true ;_bbfb .removeDuplicates ();};func (_afgg compositeCell )String ()string {_bbgc :="";if len (_afgg .paraList )> 0{_bbgc =_ecdd (_afgg .paraList .merge ().text (),50);};return _a .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_afgg .PdfRectangle ,len (_afgg .paraList ),_bbgc );};func _dbgf (_bfcf string )(string ,bool ){_bcaab :=[]rune (_bfcf );if len (_bcaab )!=1{return "",false ;};_gead ,_dcbag :=_fcbe [_bcaab [0]];return _gead ,_dcbag ;};func (_eddeb *textTable )depth ()float64 {_ccgc :=1e10;for _edefe :=0;_edefe < _eddeb ._gaed ;_edefe ++{_dbfg :=_eddeb .get (_edefe ,0);if _dbfg ==nil ||_dbfg ._dcge {continue ;};_ccgc =_fe .Min (_ccgc ,_dbfg .depth ());};return _ccgc ;};func (_ccfc *wordBag )firstReadingIndex (_acgge int )int {_gdd :=_ccfc .firstWord (_acgge )._cagfe ;_bagea :=float64 (_acgge +1)*_eeab ;_bbfba :=_bagea +_dfe *_gdd ;_bcaa :=_acgge ;for _ ,_abaa :=range _ccfc .depthBand (_bagea ,_bbfba ){if _gdfa (_ccfc .firstWord (_abaa ),_ccfc .firstWord (_bcaa ))< 0{_bcaa =_abaa ;};};return _bcaa ;};const _dgg =20;func (_cea pathSection )bbox ()_eea .PdfRectangle {_ffc :=_cea ._bbe [0]._cbf [0];_gfdb :=_eea .PdfRectangle {Llx :_ffc .X ,Urx :_ffc .X ,Lly :_ffc .Y ,Ury :_ffc .Y };_eegf :=func (_ffca _bd .Point ){if _ffca .X < _gfdb .Llx {_gfdb .Llx =_ffca .X ;}else if _ffca .X > _gfdb .Urx {_gfdb .Urx =_ffca .X ;};if _ffca .Y < _gfdb .Lly {_gfdb .Lly =_ffca .Y ;}else if _ffca .Y > _gfdb .Ury {_gfdb .Ury =_ffca .Y ;};};for _ ,_gfdcb :=range _cea ._bbe [0]._cbf [1:]{_eegf (_gfdcb );};for _ ,_def :=range _cea ._bbe [1:]{for _ ,_bcfg :=range _def ._cbf {_eegf (_bcfg );};};return _gfdb ;};func (_aeda *textPara )toCellTextMarks (_dcbe *int )[]TextMark {var _dabb []TextMark ;for _fgegg ,_edcc :=range _aeda ._gdfg {_gcfaf :=_edcc .toTextMarks (_dcbe );_ebee :=_cebb &&_edcc .endsInHyphen ()&&_fgegg !=len (_aeda ._gdfg )-1;if _ebee {_gcfaf =_aaec (_gcfaf ,_dcbe );};_dabb =append (_dabb ,_gcfaf ...);if !(_ebee ||_fgegg ==len (_aeda ._gdfg )-1){_dabb =_dgde (_dabb ,_dcbe ,_gdce (_edcc ._fbae ,_aeda ._gdfg [_fgegg +1]._fbae ));};};return _dabb ;};func (_ebadg paraList )reorder (_cebde []int ){_dad :=make (paraList ,len (_ebadg ));for _agcgb ,_ffaf :=range _cebde {_dad [_agcgb ]=_ebadg [_ffaf ];};copy (_ebadg ,_dad );};func _bfagc (_fbfad map[int ]intSet )[]int {_bdde :=make ([]int ,0,len (_fbfad ));for _gbfc :=range _fbfad {_bdde =append (_bdde ,_gbfc );};_b .Ints (_bdde );return _bdde ;};

// String returns a string describing `pt`.
func (_gffd PageText )String ()string {_edgd :=_a .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_gffd ._fgd ));_bgga :=[]string {"\u002d"+_edgd };for _ ,_gffg :=range _gffd ._fgd {_bgga =append (_bgga ,_gffg .String ());};_bgga =append (_bgga ,"\u002b"+_edgd );return _dg .Join (_bgga ,"\u000a");};func (_cgdd *stateStack )push (_acf *textState ){_gfdd :=*_acf ;*_cgdd =append (*_cgdd ,&_gfdd )};

// String returns a string describing `ma`.
func (_ega TextMarkArray )String ()string {_aag :=len (_ega ._bcff );if _aag ==0{return "\u0045\u004d\u0050T\u0059";};_ceb :=_ega ._bcff [0];_gfdf :=_ega ._bcff [_aag -1];return _a .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_aag ,_ceb ,_gfdf );};func (_bffg *textMark )bbox ()_eea .PdfRectangle {return _bffg .PdfRectangle };func (_dcegcc rulingList )snapToGroupsDirection ()rulingList {_dcegcc .sortStrict ();_befb :=make (map[*ruling ]rulingList ,len (_dcegcc ));_ebgf :=_dcegcc [0];_gcbd :=func (_ccdab *ruling ){_ebgf =_ccdab ;_befb [_ebgf ]=rulingList {_ccdab }};_gcbd (_dcegcc [0]);for _ ,_bdfe :=range _dcegcc [1:]{if _bdfe ._ffeg < _ebgf ._ffeg -_daf {_ec .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_ebgf ,_bdfe );};if _bdfe ._ffeg > _ebgf ._ffeg +_cebd {_gcbd (_bdfe );}else {_befb [_ebgf ]=append (_befb [_ebgf ],_bdfe );};};_gfdbc :=make (map[*ruling ]float64 ,len (_befb ));_edbg :=make (map[*ruling ]*ruling ,len (_dcegcc ));for _ecaf ,_fdgc :=range _befb {_gfdbc [_ecaf ]=_fdgc .mergePrimary ();for _ ,_acgc :=range _fdgc {_edbg [_acgc ]=_ecaf ;};};for _ ,_fffb :=range _dcegcc {_fffb ._ffeg =_gfdbc [_edbg [_fffb ]];};_aaecd :=make (rulingList ,0,len (_dcegcc ));for _ ,_efdgf :=range _befb {_afgb :=_efdgf .splitSec ();for _dggf ,_gdac :=range _afgb {_cfbd :=_gdac .merge ();if len (_aaecd )> 0{_dbefb :=_aaecd [len (_aaecd )-1];if _dbefb .alignsPrimary (_cfbd )&&_dbefb .alignsSec (_cfbd ){_ec .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_dggf ,_dbefb ,_cfbd );continue ;};};_aaecd =append (_aaecd ,_cfbd );};};_aaecd .sortStrict ();return _aaecd ;};type imageExtractContext struct{_db []ImageMark ;_fb int ;_ad int ;_gd int ;_bfb map[*_cc .PdfObjectStream ]*cachedImage ;_afg *ImageExtractOptions ;};func (_dadb compositeCell )hasLines (_bgecf []*textLine )bool {for _egag ,_fdf :=range _bgecf {_agdd :=_badf (_dadb .PdfRectangle ,_fdf .PdfRectangle );if _egbb {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_agdd ,_egag ,len (_bgecf ));_a .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_dadb );_a .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_fdf );};if _agdd {return true ;};};return false ;};func (_ebbe *textObject )checkOp (_dbag *_ea .ContentStreamOperation ,_dgd int ,_gge bool )(_bdba bool ,_bcg error ){if _ebbe ==nil {var _cabc []_cc .PdfObject ;if _dgd > 0{_cabc =_dbag .Params ;if len (_cabc )> _dgd {_cabc =_cabc [:_dgd ];};};_ec .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_dbag .Operand ,_cabc );};if _dgd >=0{if len (_dbag .Params )!=_dgd {if _gge {_bcg =_d .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_dbag .Operand ,_dgd ,len (_dbag .Params ),_dbag .Params );return false ,_bcg ;};};return true ,nil ;};func (_cagd *wordBag )sort (){for _ ,_bef :=range _cagd ._dfb {_b .Slice (_bef ,func (_gedg ,_dbbgc int )bool {return _gdfa (_bef [_gedg ],_bef [_dbbgc ])< 0});};};func _dgdab (_bcacc []pathSection )rulingList {_cced (_bcacc );if _cfad {_ec .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_bcacc ));};var _gebg rulingList ;for _ ,_agbae :=range _bcacc {for _ ,_dbedg :=range _agbae ._bbe {if len (_dbedg ._cbf )< 2{continue ;};_dceg :=_dbedg ._cbf [0];for _ ,_cada :=range _dbedg ._cbf [1:]{if _eeef ,_gbaa :=_geda (_dceg ,_cada ,_agbae .Color );_gbaa {_gebg =append (_gebg ,_eeef );};_dceg =_cada ;};};};if _cfad {_ec .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_gebg );};return _gebg ;};func (_fead intSet )add (_caad int ){_fead [_caad ]=struct{}{}};func _cfca (_gfae ,_dca _eea .PdfRectangle )(_eea .PdfRectangle ,bool ){if !_badf (_gfae ,_dca ){return _eea .PdfRectangle {},false ;};return _eea .PdfRectangle {Llx :_fe .Max (_gfae .Llx ,_dca .Llx ),Urx :_fe .Min (_gfae .Urx ,_dca .Urx ),Lly :_fe .Max (_gfae .Lly ,_dca .Lly ),Ury :_fe .Min (_gfae .Ury ,_dca .Ury )},true ;};func (_bbed *textPara )taken ()bool {return _bbed ==nil ||_bbed ._dfcb };

// ToTextMark returns the public view of `tm`.
func (_ggfa *textMark )ToTextMark ()TextMark {return TextMark {Text :_ggfa ._cdca ,Original :_ggfa ._ecec ,BBox :_ggfa ._afaeb ,Font :_ggfa ._eaeg ,FontSize :_ggfa ._cbab ,FillColor :_ggfa ._cgcec ,StrokeColor :_ggfa ._dbce };};func _cdea (_fgc _eea .PdfRectangle )textState {return textState {_bdg :100,_fad :RenderModeFill ,_acad :_fgc };};func (_dfdc *wordBag )highestWord (_cac int ,_dbba ,_aedf float64 )*textWord {for _ ,_ceg :=range _dfdc ._dfb [_cac ]{if _dbba <=_ceg ._bbegf &&_ceg ._bbegf <=_aedf {return _ceg ;};};return nil ;};func (_bcedf *textTable )computeBbox ()_eea .PdfRectangle {var _ceae _eea .PdfRectangle ;_fgdge :=false ;for _bdfb :=0;_bdfb < _bcedf ._fcge ;_bdfb ++{for _ebae :=0;_ebae < _bcedf ._gaed ;_ebae ++{_gdcee :=_bcedf .get (_ebae ,_bdfb );if _gdcee ==nil {continue ;};if !_fgdge {_ceae =_gdcee .PdfRectangle ;_fgdge =true ;}else {_ceae =_gca (_ceae ,_gdcee .PdfRectangle );};};};return _ceae ;};func _dfcfd (_cfed []pathSection )rulingList {_cced (_cfed );if _cfad {_ec .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_cfed ));};var _ebdf rulingList ;for _ ,_gbac :=range _cfed {for _ ,_bbaab :=range _gbac ._bbe {if !_bbaab .isQuadrilateral (){if _cfad {_ec .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_bbaab );};continue ;};if _abfg ,_edae :=_bbaab .makeRectRuling (_gbac .Color );_edae {_ebdf =append (_ebdf ,_abfg );}else {if _fea {_ec .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_bbaab );};};};};if _cfad {_ec .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_ebdf .String ());};return _ebdf ;};

// String returns a human readable description of `s`.
func (_gdgae intSet )String ()string {var _bcga []int ;for _cccd :=range _gdgae {if _gdgae .has (_cccd ){_bcga =append (_bcga ,_cccd );};};_b .Ints (_bcga );return _a .Sprintf ("\u0025\u002b\u0076",_bcga );};func (_gcfg *shapesState )closePath (){if _gcfg ._gfg {_gcfg ._fbef =append (_gcfg ._fbef ,_bdbf (_gcfg ._fdgb ));_gcfg ._gfg =false ;}else if len (_gcfg ._fbef )==0{if _dbbd {_ec .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_gcfg ._gfg =false ;return ;};_gcfg ._fbef [len (_gcfg ._fbef )-1].close ();if _dbbd {_ec .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_gcfg );};};

// String returns a string describing the current state of the textState stack.
func (_cfdf *stateStack )String ()string {_aefa :=[]string {_a .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_cfdf ))};for _beca ,_agfa :=range *_cfdf {_gdc :="\u003c\u006e\u0069l\u003e";if _agfa !=nil {_gdc =_agfa .String ();};_aefa =append (_aefa ,_a .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_beca ,_gdc ));};return _dg .Join (_aefa ,"\u000a");};func _acea (_gdaa *_ea .ContentStreamOperation )(float64 ,error ){if len (_gdaa .Params )!=1{_dae :=_d .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_gdaa .Operand ,1,len (_gdaa .Params ),_gdaa .Params );return 0.0,_dae ;};return _cc .GetNumberAsFloat (_gdaa .Params [0]);};func (_cgfeg *textTable )newTablePara ()*textPara {_eacdg :=_cgfeg .computeBbox ();_bfgb :=&textPara {PdfRectangle :_eacdg ,_cgee :_eacdg ,_dcdg :_cgfeg };if _egbb {_ec .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_bfgb );};return _bfgb ;};func (_egcd lineRuling )asRuling ()(*ruling ,bool ){_fecc :=ruling {_accad :_egcd ._bagaf ,Color :_egcd .Color ,_bfgg :_eagg };switch _egcd ._bagaf {case _bedb :_fecc ._ffeg =_egcd .xMean ();_fecc ._adfg =_fe .Min (_egcd ._cadgg .Y ,_egcd ._eeebg .Y );_fecc ._gcge =_fe .Max (_egcd ._cadgg .Y ,_egcd ._eeebg .Y );case _dbfe :_fecc ._ffeg =_egcd .yMean ();_fecc ._adfg =_fe .Min (_egcd ._cadgg .X ,_egcd ._eeebg .X );_fecc ._gcge =_fe .Max (_egcd ._cadgg .X ,_egcd ._eeebg .X );default:_ec .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_egcd ._bagaf );return nil ,false ;};return &_fecc ,true ;};func (_bdcb *textTable )getComposite (_bgcd ,_cgcaa int )(paraList ,_eea .PdfRectangle ){_gbca ,_ggda :=_bdcb ._adea [_efgeb (_bgcd ,_cgcaa )];if _egbb {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_bgcd ,_cgcaa ,_gbca .String ());};if !_ggda {return nil ,_eea .PdfRectangle {};};return _gbca .parasBBox ();};func _afaed (_ebfe ,_adgb *textPara )bool {return _gcdc (_ebfe ._cgee ,_adgb ._cgee )};func _deeb (_ddeg ,_debb float64 )bool {return _fe .Abs (_ddeg -_debb )<=_cgab };type compositeCell struct{_eea .PdfRectangle ;paraList ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_fg string ;_be *_eea .PdfPageResources ;_cfd _eea .PdfRectangle ;_eg map[string ]fontEntry ;_dd map[string ]textResult ;_ff int64 ;_bf int ;};func _fadg (_aefea ,_bdbea int )int {if _aefea > _bdbea {return _aefea ;};return _bdbea ;};func _gdce (_ffba ,_eeeb float64 )string {_cccg :=!_caeg (_ffba -_eeeb );if _cccg {return "\u000a";};return "\u0020";};func _bagc (_accf ,_efaa _eea .PdfRectangle )bool {return _accf .Lly <=_efaa .Ury &&_efaa .Lly <=_accf .Ury ;};func _geeg (_cceef ,_gfgdc bounded )float64 {_begg :=_gdfa (_cceef ,_gfgdc );if !_caeg (_begg ){return _begg ;};return _eaef (_cceef ,_gfgdc );};func (_afad *wordBag )getDepthIdx (_acdfe float64 )int {_bfef :=_afad .depthIndexes ();_egee :=_ggbe (_acdfe );if _egee < _bfef [0]{return _bfef [0];};if _egee > _bfef [len (_bfef )-1]{return _bfef [len (_bfef )-1];};return _egee ;};func _cdde (_bccf _eea .PdfRectangle ,_dcda []*textLine )*textPara {return &textPara {PdfRectangle :_bccf ,_gdfg :_dcda };};func _dcdf (_cffe []*textWord ,_ggae float64 ,_eadfg ,_dfaf rulingList )*wordBag {_acdf :=_efd (_cffe [0],_ggae ,_eadfg ,_dfaf );for _ ,_ceeg :=range _cffe [1:]{_adfa :=_ggbe (_ceeg ._bbegf );_acdf ._dfb [_adfa ]=append (_acdf ._dfb [_adfa ],_ceeg );_acdf .PdfRectangle =_gca (_acdf .PdfRectangle ,_ceeg .PdfRectangle );};_acdf .sort ();return _acdf ;};

// String returns a description of `b`.
func (_fbea *wordBag )String ()string {var _baag []string ;for _ ,_cbdac :=range _fbea .depthIndexes (){_afc ,_ :=_fbea ._dfb [_cbdac ];for _ ,_feff :=range _afc {_baag =append (_baag ,_feff ._fcgd );};};return _a .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_fbea .PdfRectangle ,_fbea ._egdd ,len (_baag ),_baag );};func (_fcdbd paraList )computeEBBoxes (){if _cdbd {_ec .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");};for _ ,_acdde :=range _fcdbd {_acdde ._cgee =_acdde .PdfRectangle ;};_bdbc :=_fcdbd .yNeighbours (0);for _gbcef ,_gefe :=range _fcdbd {_agef :=_gefe ._cgee ;_bgec ,_ffgc :=-1.0e9,+1.0e9;for _ ,_gabd :=range _bdbc [_gefe ]{_ggfba :=_fcdbd [_gabd ]._cgee ;if _ggfba .Urx < _agef .Llx {_bgec =_fe .Max (_bgec ,_ggfba .Urx );}else if _agef .Urx < _ggfba .Llx {_ffgc =_fe .Min (_ffgc ,_ggfba .Llx );};};for _gfbc ,_agg :=range _fcdbd {_aggb :=_agg ._cgee ;if _gbcef ==_gfbc ||_aggb .Ury > _agef .Lly {continue ;};if _bgec <=_aggb .Llx &&_aggb .Llx < _agef .Llx {_agef .Llx =_aggb .Llx ;}else if _aggb .Urx <=_ffgc &&_agef .Urx < _aggb .Urx {_agef .Urx =_aggb .Urx ;};};if _cdbd {_a .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_gbcef ,_gefe ._cgee ,_agef ,_ecdd (_gefe .text (),50));};_gefe ._cgee =_agef ;};if _bgcea {for _ ,_dcbf :=range _fcdbd {_dcbf .PdfRectangle =_dcbf ._cgee ;};};};func (_ggg *wordBag )applyRemovals (_ccee map[int ]map[*textWord ]struct{}){for _dfdg ,_ebba :=range _ccee {if len (_ebba )==0{continue ;};_ggde :=_ggg ._dfb [_dfdg ];_gdfe :=len (_ggde )-len (_ebba );if _gdfe ==0{delete (_ggg ._dfb ,_dfdg );continue ;};_gba :=make ([]*textWord ,_gdfe );_efe :=0;for _ ,_egdc :=range _ggde {if _ ,_cag :=_ebba [_egdc ];!_cag {_gba [_efe ]=_egdc ;_efe ++;};};_ggg ._dfb [_dfdg ]=_gba ;};};func _eggf (_bccg ,_cbdag float64 )bool {return _bccg /_fe .Max (_bbfa ,_cbdag )< _dfafb };func (_ggce *textTable )getDown ()paraList {_abbd :=make (paraList ,_ggce ._gaed );for _adead :=0;_adead < _ggce ._gaed ;_adead ++{_agdde :=_ggce .get (_adead ,_ggce ._fcge -1)._baac ;if _agdde ==nil ||_agdde ._dfcb {return nil ;};_abbd [_adead ]=_agdde ;};for _abdb :=0;_abdb < _ggce ._gaed -1;_abdb ++{if _abbd [_abdb ]._fcfb !=_abbd [_abdb +1]{return nil ;};};return _abbd ;};func (_eggg paraList )merge ()*textPara {_ec .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_eggg ));if len (_eggg )==0{return nil ;};_eggg .sortReadingOrder ();_ecga :=_eggg [0].PdfRectangle ;_gedc :=_eggg [0]._gdfg ;for _ ,_gfee :=range _eggg [1:]{_ecga =_gca (_ecga ,_gfee .PdfRectangle );_gedc =append (_gedc ,_gfee ._gdfg ...);};return _cdde (_ecga ,_gedc );};func _dggg (_ddde string )bool {if _f .RuneCountInString (_ddde )< _ded {return false ;};_edb ,_aabd :=_f .DecodeLastRuneInString (_ddde );if _aabd <=0||!_g .Is (_g .Hyphen ,_edb ){return false ;};_edb ,_aabd =_f .DecodeLastRuneInString (_ddde [:len (_ddde )-_aabd ]);return _aabd > 0&&!_g .IsSpace (_edb );};

// String returns a description of `t`.
func (_gbgg *textTable )String ()string {return _a .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_gbgg ._gaed ,_gbgg ._fcge ,_gbgg ._cgfg );};func _cagdg (_gbad []*textWord ,_geaa *textWord )[]*textWord {for _adgde ,_cacfd :=range _gbad {if _cacfd ==_geaa {return _bbbb (_gbad ,_adgde );};};_ec .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_geaa );return nil ;};func (_cfcde *textObject )setWordSpacing (_bbccb float64 ){if _cfcde ==nil {return ;};_cfcde ._eafd ._ggfb =_bbccb ;};func (_cfaa *subpath )add (_gcef ..._bd .Point ){_cfaa ._cbf =append (_cfaa ._cbf ,_gcef ...)};func _bgef (_ebdd ,_abaf ,_fgcdc float64 )rulingKind {if _ebdd >=_fgcdc &&_eggf (_abaf ,_ebdd ){return _dbfe ;};if _abaf >=_fgcdc &&_eggf (_ebdd ,_abaf ){return _bedb ;};return _ffce ;};func (_dbee paraList )tables ()[]TextTable {var _ggfd []TextTable ;if _egbb {_ec .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");};for _ ,_fagc :=range _dbee {_fcbc :=_fagc ._dcdg ;if _fcbc !=nil &&_fcbc .isExportable (){_ggfd =append (_ggfd ,_fcbc .toTextTable ());};};return _ggfd ;};func (_cfeeg rulingList )asTiling ()gridTiling {if _dddd {_ec .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_cfeeg ));};for _abafd ,_cadb :=range _cfeeg [1:]{_dacf :=_cfeeg [_abafd ];if _dacf .alignsPrimary (_cadb )&&_dacf .alignsSec (_cadb ){_ec .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_cadb ,_dacf );};};_cfeeg .sortStrict ();_cfeeg .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_dcdge ,_edge :=_cfeeg .vertsHorzs ();_efcbf :=_dcdge .primaries ();_bbdcg :=_edge .primaries ();_ggeb :=len (_efcbf )-1;_bfed :=len (_bbdcg )-1;if _ggeb ==0||_bfed ==0{return gridTiling {};};_debc :=_eea .PdfRectangle {Llx :_efcbf [0],Urx :_efcbf [_ggeb ],Lly :_bbdcg [0],Ury :_bbdcg [_bfed ]};if _dddd {_ec .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_dcdge ));for _gbgd ,_egca :=range _dcdge {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gbgd ,_egca );};_ec .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_edge ));for _fagg ,_cggg :=range _edge {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fagg ,_cggg );};_ec .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_ggeb ,_bfed ,_efcbf ,_bbdcg );};_eaga :=make ([]gridTile ,_ggeb *_bfed );for _ddfc :=_bfed -1;_ddfc >=0;_ddfc --{_gade :=_bbdcg [_ddfc ];_cafe :=_bbdcg [_ddfc +1];for _gcaa :=0;_gcaa < _ggeb ;_gcaa ++{_fgfa :=_efcbf [_gcaa ];_fbfg :=_efcbf [_gcaa +1];_cagf :=_dcdge .findPrimSec (_fgfa ,_gade );_dfabe :=_dcdge .findPrimSec (_fbfg ,_gade );_afdce :=_edge .findPrimSec (_gade ,_fgfa );_bafg :=_edge .findPrimSec (_cafe ,_fgfa );_cdab :=_eea .PdfRectangle {Llx :_fgfa ,Urx :_fbfg ,Lly :_gade ,Ury :_cafe };_efbg :=_gbgb (_cdab ,_cagf ,_dfabe ,_afdce ,_bafg );_eaga [_ddfc *_ggeb +_gcaa ]=_efbg ;if _dddd {_a .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_gcaa ,_ddfc ,_efbg .String (),_efbg .Width (),_efbg .Height ());};};};if _dddd {_ec .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_debc );};_ebcd :=make ([]map[float64 ]gridTile ,_bfed );for _bbad :=_bfed -1;_bbad >=0;_bbad --{if _dddd {_a .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bbad );};_ebcd [_bbad ]=make (map[float64 ]gridTile ,_ggeb );for _ccae :=0;_ccae < _ggeb ;_ccae ++{_adcba :=_eaga [_bbad *_ggeb +_ccae ];if _dddd {_a .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_ccae ,_adcba );};if !_adcba ._ddbc {continue ;};_fbgdb :=_ccae ;for _aaff :=_ccae +1;!_adcba ._cece &&_aaff < _ggeb ;_aaff ++{_beec :=_eaga [_bbad *_ggeb +_aaff ];_adcba .Urx =_beec .Urx ;_adcba ._cddd =_adcba ._cddd ||_beec ._cddd ;_adcba ._bbbc =_adcba ._bbbc ||_beec ._bbbc ;_adcba ._cece =_beec ._cece ;if _dddd {_a .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_aaff ,_beec ,_adcba );};_fbgdb =_aaff ;};if _dddd {_a .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_ccae ,_fbgdb ,_adcba );};_ccae =_fbgdb ;_ebcd [_bbad ][_adcba .Llx ]=_adcba ;};};_bbcg :=make (map[float64 ]map[float64 ]gridTile ,_bfed );_efegd :=make (map[float64 ]map[float64 ]struct{},_bfed );for _begde :=_bfed -1;_begde >=0;_begde --{_eacc :=_eaga [_begde *_ggeb ].Lly ;_bbcg [_eacc ]=make (map[float64 ]gridTile ,_ggeb );_efegd [_eacc ]=make (map[float64 ]struct{},_ggeb );};if _dddd {_ec .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_debc );};for _gacb :=_bfed -1;_gacb >=0;_gacb --{_fcae :=_eaga [_gacb *_ggeb ].Lly ;_eabc :=_ebcd [_gacb ];if _dddd {_a .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_gacb );};for _ ,_dedcc :=range _gfac (_eabc ){if _ ,_bbcgb :=_efegd [_fcae ][_dedcc ];_bbcgb {continue ;};_fceb :=_eabc [_dedcc ];if _dddd {_a .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fceb .String ());};for _bgcf :=_gacb -1;_bgcf >=0;_bgcf --{if _fceb ._bbbc {break ;};_deac :=_ebcd [_bgcf ];_fcafa ,_edbb :=_deac [_dedcc ];if !_edbb {break ;};if _fcafa .Urx !=_fceb .Urx {break ;};_fceb ._bbbc =_fcafa ._bbbc ;_fceb .Lly =_fcafa .Lly ;if _dddd {_a .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_fcafa .String (),_fceb .String ());};_efegd [_fcafa .Lly ][_fcafa .Llx ]=struct{}{};};if _gacb ==0{_fceb ._bbbc =true ;};if _fceb .complete (){_bbcg [_fcae ][_dedcc ]=_fceb ;};};};_ccgb :=gridTiling {PdfRectangle :_debc ,_gdaac :_ebdc (_bbcg ),_fdga :_gbgdf (_bbcg ),_efecc :_bbcg };_ccgb .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");return _ccgb ;};

// String returns a description of `tm`.
func (_dbccf *textMark )String ()string {return _a .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_dbccf .PdfRectangle ,_dbccf ._cbab ,_dbccf ._cdca );};func (_cba *Extractor )extractPageText (_afa string ,_bdf *_eea .PdfPageResources ,_ba _bd .Matrix ,_bdbd int )(*PageText ,int ,int ,error ){_ec .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_bdbd );_gfa :=&PageText {_bfd :_cba ._cfd };_eed :=_cdea (_cba ._cfd );var _eca stateStack ;_fbgc :=_cbd (_cba ,_bdf ,_ea .GraphicsState {},&_eed ,&_eca );_bag :=shapesState {_bfag :_ba ,_acd :_bd .IdentityMatrix (),_dbf :_fbgc };var _aga bool ;if _bdbd > _dgg {_gcd :=_d .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_bdbd ,_gcd );return _gfa ,_eed ._bbab ,_eed ._gdeb ,_gcd ;};_ccec :=_ea .NewContentStreamParser (_afa );_gg ,_bcd :=_ccec .Parse ();if _bcd !=nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bcd );return _gfa ,_eed ._bbab ,_eed ._gdeb ,_bcd ;};_acb :=_ea .NewContentStreamProcessor (*_gg );_acb .AddHandler (_ea .HandlerConditionEnumAllOperands ,"",func (_bbcc *_ea .ContentStreamOperation ,_eba _ea .GraphicsState ,_bgde *_eea .PdfPageResources )error {_eda :=_bbcc .Operand ;if _abde {_ec .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_bbcc );};switch _eda {case "\u0071":if _dbbd {_ec .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bag ._acd );};_eca .push (&_eed );case "\u0051":if !_eca .empty (){_eed =*_eca .top ();if len (_eca )>=2{_eca .pop ();};};_bag ._acd =_eba .CTM ;if _dbbd {_ec .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bag ._acd );};case "\u0042\u0054":if _aga {_ec .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");_gfa ._fgd =append (_gfa ._fgd ,_fbgc ._eaab ...);};_aga =true ;_acec :=_eba ;_acec .CTM =_ba .Mult (_acec .CTM );_fbgc =_cbd (_cba ,_bgde ,_acec ,&_eed ,&_eca );_bag ._dbf =_fbgc ;case "\u0045\u0054":if !_aga {_ec .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");};_aga =false ;_gfa ._fgd =append (_gfa ._fgd ,_fbgc ._eaab ...);_fbgc .reset ();case "\u0054\u002a":_fbgc .nextLine ();case "\u0054\u0064":if _dgc ,_eab :=_fbgc .checkOp (_bbcc ,2,true );!_dgc {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eab );return _eab ;};_cga ,_ccf ,_fdd :=_egccfb (_bbcc .Params );if _fdd !=nil {return _fdd ;};_fbgc .moveText (_cga ,_ccf );case "\u0054\u0044":if _fff ,_fgg :=_fbgc .checkOp (_bbcc ,2,true );!_fff {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fgg );return _fgg ;};_gad ,_gbd ,_bdcc :=_egccfb (_bbcc .Params );if _bdcc !=nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bdcc );return _bdcc ;};_fbgc .moveTextSetLeading (_gad ,_gbd );case "\u0054\u006a":if _df ,_bca :=_fbgc .checkOp (_bbcc ,1,true );!_df {_ec .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_bbcc ,_bca );return _bca ;};_eeac ,_gde :=_cc .GetStringBytes (_bbcc .Params [0]);if !_gde {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_bbcc );return _cc .ErrTypeError ;};return _fbgc .showText (_eeac );case "\u0054\u004a":if _ccd ,_fee :=_fbgc .checkOp (_bbcc ,1,true );!_ccd {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fee );return _fee ;};_aef ,_ddgf :=_cc .GetArray (_bbcc .Params [0]);if !_ddgf {_ec .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bbcc );return _bcd ;};return _fbgc .showTextAdjusted (_aef );case "\u0027":if _ddd ,_baa :=_fbgc .checkOp (_bbcc ,1,true );!_ddd {_ec .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_baa );return _baa ;};_fef ,_bcc :=_cc .GetStringBytes (_bbcc .Params [0]);if !_bcc {_ec .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bbcc );return _cc .ErrTypeError ;};_fbgc .nextLine ();return _fbgc .showText (_fef );case "\u0022":if _ebb ,_dbe :=_fbgc .checkOp (_bbcc ,3,true );!_ebb {_ec .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dbe );return _dbe ;};_bcb ,_ecf ,_fcca :=_egccfb (_bbcc .Params [:2]);if _fcca !=nil {return _fcca ;};_fda ,_aeb :=_cc .GetStringBytes (_bbcc .Params [2]);if !_aeb {_ec .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_bbcc );return _cc .ErrTypeError ;};_fbgc .setCharSpacing (_bcb );_fbgc .setWordSpacing (_ecf );_fbgc .nextLine ();return _fbgc .showText (_fda );case "\u0054\u004c":_ecb ,_fcg :=_acea (_bbcc );if _fcg !=nil {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fcg );return _fcg ;};_fbgc .setTextLeading (_ecb );case "\u0054\u0063":_beb ,_geb :=_acea (_bbcc );if _geb !=nil {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_geb );return _geb ;};_fbgc .setCharSpacing (_beb );case "\u0054\u0066":if _efg ,_cdg :=_fbgc .checkOp (_bbcc ,2,true );!_efg {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cdg );return _cdg ;};_afd ,_cgf :=_cc .GetNameVal (_bbcc .Params [0]);if !_cgf {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_bbcc );return _cc .ErrTypeError ;};_feef ,_baga :=_cc .GetNumberAsFloat (_bbcc .Params [1]);if !_cgf {_ec .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bbcc ,_baga );return _baga ;};_baga =_fbgc .setFont (_afd ,_feef );_fbgc ._bfec =_cf .Is (_baga ,_cc .ErrNotSupported );if _baga !=nil &&!_fbgc ._bfec {return _baga ;};case "\u0054\u006d":if _fgae ,_bdff :=_fbgc .checkOp (_bbcc ,6,true );!_fgae {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bdff );return _bdff ;};_dee ,_aca :=_cc .GetNumbersAsFloat (_bbcc .Params );if _aca !=nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aca );return _aca ;};_fbgc .setTextMatrix (_dee );case "\u0054\u0072":if _dgaf ,_dec :=_fbgc .checkOp (_bbcc ,1,true );!_dgaf {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dec );return _dec ;};_gdec ,_ddc :=_cc .GetIntVal (_bbcc .Params [0]);if !_ddc {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_bbcc );return _cc .ErrTypeError ;};_fbgc .setTextRenderMode (_gdec );case "\u0054\u0073":if _bbb ,_bbf :=_fbgc .checkOp (_bbcc ,1,true );!_bbb {_ec .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bbf );return _bbf ;};_acaa ,_afae :=_cc .GetNumberAsFloat (_bbcc .Params [0]);if _afae !=nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afae );return _afae ;};_fbgc .setTextRise (_acaa );case "\u0054\u0077":if _gea ,_dfa :=_fbgc .checkOp (_bbcc ,1,true );!_gea {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dfa );return _dfa ;};_gcde ,_bab :=_cc .GetNumberAsFloat (_bbcc .Params [0]);if _bab !=nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bab );return _bab ;};_fbgc .setWordSpacing (_gcde );case "\u0054\u007a":if _cbgd ,_gebb :=_fbgc .checkOp (_bbcc ,1,true );!_cbgd {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gebb );return _gebb ;};_bga ,_aff :=_cc .GetNumberAsFloat (_bbcc .Params [0]);if _aff !=nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aff );return _aff ;};_fbgc .setHorizScaling (_bga );case "\u0063\u006d":_bag ._acd =_eba .CTM ;if _bag ._acd .Singular (){_fggf :=_bd .IdentityMatrix ().Translate (_bag ._acd .Translation ());_ec .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_bag ._acd ,_fggf );_bag ._acd =_fggf ;};if _dbbd {_ec .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bag ._acd );};case "\u006d":if len (_bbcc .Params )!=2{_ec .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gc );return nil ;};_afff ,_fbed :=_cc .GetNumbersAsFloat (_bbcc .Params );if _fbed !=nil {return _fbed ;};_ec .Log .Debug ("\u004d\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u002e\u0032\u0066",_afff );_bag .moveTo (_afff [0],_afff [1]);case "\u006c":if len (_bbcc .Params )!=2{_ec .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_gc );return nil ;};_cfdd ,_gfd :=_cc .GetNumbersAsFloat (_bbcc .Params );if _gfd !=nil {return _gfd ;};_bag .lineTo (_cfdd [0],_cfdd [1]);case "\u0063":if len (_bbcc .Params )!=6{return _gc ;};_aae ,_cfcd :=_cc .GetNumbersAsFloat (_bbcc .Params );if _cfcd !=nil {return _cfcd ;};_ec .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_aae );_bag .cubicTo (_aae [0],_aae [1],_aae [2],_aae [3],_aae [4],_aae [5]);case "\u0076","\u0079":if len (_bbcc .Params )!=4{return _gc ;};_ced ,_eeb :=_cc .GetNumbersAsFloat (_bbcc .Params );if _eeb !=nil {return _eeb ;};_ec .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_ced );_bag .quadraticTo (_ced [0],_ced [1],_ced [2],_ced [3]);case "\u0068":_bag .closePath ();case "\u0072\u0065":if len (_bbcc .Params )!=4{return _gc ;};_dfaa ,_bgc :=_cc .GetNumbersAsFloat (_bbcc .Params );if _bgc !=nil {return _bgc ;};_bag .drawRectangle (_dfaa [0],_dfaa [1],_dfaa [2],_dfaa [3]);_bag .closePath ();case "\u0053":_bag .stroke (&_gfa ._fgf );_bag .clearPath ();case "\u0073":_bag .closePath ();_bag .stroke (&_gfa ._fgf );_bag .clearPath ();case "\u0046":_bag .fill (&_gfa ._fdcf );_bag .clearPath ();case "\u0066","\u0066\u002a":_bag .closePath ();_bag .fill (&_gfa ._fdcf );_bag .clearPath ();case "\u0042","\u0042\u002a":_bag .fill (&_gfa ._fdcf );_bag .stroke (&_gfa ._fgf );_bag .clearPath ();case "\u0062","\u0062\u002a":_bag .closePath ();_bag .fill (&_gfa ._fdcf );_bag .stroke (&_gfa ._fgf );_bag .clearPath ();case "\u006e":_bag .clearPath ();case "\u0044\u006f":if len (_bbcc .Params )==0{_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_bbcc .Params );return _cc .ErrRangeError ;};_gcg ,_cfg :=_cc .GetName (_bbcc .Params [0]);if !_cfg {_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_bbcc .Params [0]);return _cc .ErrTypeError ;};_ ,_gbdf :=_bgde .GetXObjectByName (*_gcg );if _gbdf !=_eea .XObjectTypeForm {break ;};_age ,_cfg :=_cba ._dd [_gcg .String ()];if !_cfg {_caec ,_bgg :=_bgde .GetXObjectFormByName (*_gcg );if _bgg !=nil {_ec .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bgg );return _bgg ;};_acaae ,_bgg :=_caec .GetContentStream ();if _bgg !=nil {_ec .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bgg );return _bgg ;};_gbe :=_caec .Resources ;if _gbe ==nil {_gbe =_bgde ;};_geg ,_cbe ,_gadf ,_bgg :=_cba .extractPageText (string (_acaae ),_gbe ,_ba .Mult (_eba .CTM ),_bdbd +1);if _bgg !=nil {_ec .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_bgg );return _bgg ;};_age =textResult {*_geg ,_cbe ,_gadf };_cba ._dd [_gcg .String ()]=_age ;};_bag ._acd =_eba .CTM ;if _dbbd {_ec .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bag ._acd );};_gfa ._fgd =append (_gfa ._fgd ,_age ._bec ._fgd ...);_gfa ._fgf =append (_gfa ._fgf ,_age ._bec ._fgf ...);_gfa ._fdcf =append (_gfa ._fdcf ,_age ._bec ._fdcf ...);_eed ._bbab +=_age ._eef ;_eed ._gdeb +=_age ._cgd ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_fbgc ._edaa .ColorspaceNonStroking =_eba .ColorspaceNonStroking ;_fbgc ._edaa .ColorNonStroking =_eba .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_fbgc ._edaa .ColorspaceStroking =_eba .ColorspaceStroking ;_fbgc ._edaa .ColorStroking =_eba .ColorStroking ;};return nil ;});_bcd =_acb .Process (_bdf );return _gfa ,_eed ._bbab ,_eed ._gdeb ,_bcd ;};func (_agaa *wordBag )removeDuplicates (){if _efff {_ec .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_agaa .text ());};for _ ,_fcgg :=range _agaa .depthIndexes (){if len (_agaa ._dfb [_fcgg ])==0{continue ;};_daff :=_agaa ._dfb [_fcgg ][0];_fgfc :=_gcdbb *_daff ._cagfe ;_affg :=_daff ._bbegf ;for _ ,_gbg :=range _agaa .depthBand (_affg ,_affg +_fgfc ){_dggd :=map[*textWord ]struct{}{};_agfe :=_agaa ._dfb [_gbg ];for _ ,_baed :=range _agfe {if _ ,_eecd :=_dggd [_baed ];_eecd {continue ;};for _ ,_fddg :=range _agfe {if _ ,_gcaf :=_dggd [_fddg ];_gcaf {continue ;};if _fddg !=_baed &&_fddg ._fcgd ==_baed ._fcgd &&_fe .Abs (_fddg .Llx -_baed .Llx )< _fgfc &&_fe .Abs (_fddg .Urx -_baed .Urx )< _fgfc &&_fe .Abs (_fddg .Lly -_baed .Lly )< _fgfc &&_fe .Abs (_fddg .Ury -_baed .Ury )< _fgfc {_dggd [_fddg ]=struct{}{};};};};if len (_dggd )> 0{_ebeea :=0;for _ ,_ffgg :=range _agfe {if _ ,_afdc :=_dggd [_ffgg ];!_afdc {_agfe [_ebeea ]=_ffgg ;_ebeea ++;};};_agaa ._dfb [_gbg ]=_agfe [:len (_agfe )-len (_dggd )];if len (_agaa ._dfb [_gbg ])==0{delete (_agaa ._dfb ,_gbg );};};};};};func (_gffc *textObject )moveLP (_agc ,_gae float64 ){_gffc ._gcf .Concat (_bd .NewMatrix (1,0,0,1,_agc ,_gae ));_gffc ._bfee =_gffc ._gcf ;};func (_aefd rulingList )comp (_egbc ,_gfbba int )bool {_afaa ,_ggdfa :=_aefd [_egbc ],_aefd [_gfbba ];_fdbge ,_fgba :=_afaa ._accad ,_ggdfa ._accad ;if _fdbge !=_fgba {return _fdbge > _fgba ;};if _fdbge ==_ffce {return false ;};_fcbde :=func (_deeca bool )bool {if _fdbge ==_dbfe {return _deeca ;};return !_deeca ;};_acebg ,_fgef :=_afaa ._ffeg ,_ggdfa ._ffeg ;if _acebg !=_fgef {return _fcbde (_acebg > _fgef );};_acebg ,_fgef =_afaa ._adfg ,_ggdfa ._adfg ;if _acebg !=_fgef {return _fcbde (_acebg < _fgef );};return _fcbde (_afaa ._gcge < _ggdfa ._gcge );};func (_dace *textObject )getFontDirect (_dea string )(*_eea .PdfFont ,error ){_bcfd ,_ggbf :=_dace .getFontDict (_dea );if _ggbf !=nil {return nil ,_ggbf ;};_dcd ,_ggbf :=_eea .NewPdfFontFromPdfObject (_bcfd );if _ggbf !=nil {_ec .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_dea ,_ggbf );};return _dcd ,_ggbf ;};type cachedImage struct{_ag *_eea .Image ;_adc _eea .PdfColorspace ;};func _gbgb (_bgdgg _eea .PdfRectangle ,_beac ,_fefa ,_cgfc ,_deea *ruling )gridTile {_abad :=_bgdgg .Llx ;_cbbb :=_bgdgg .Urx ;_dedf :=_bgdgg .Lly ;_agdg :=_bgdgg .Ury ;return gridTile {PdfRectangle :_bgdgg ,_ddbc :_beac !=nil &&_beac .encloses (_dedf ,_agdg ),_cece :_fefa !=nil &&_fefa .encloses (_dedf ,_agdg ),_bbbc :_cgfc !=nil &&_cgfc .encloses (_abad ,_cbbb ),_cddd :_deea !=nil &&_deea .encloses (_abad ,_cbbb )};};func (_ecgc *textTable )getRight ()paraList {_fgegf :=make (paraList ,_ecgc ._fcge );for _fcdcc :=0;_fcdcc < _ecgc ._fcge ;_fcdcc ++{_cgfd :=_ecgc .get (_ecgc ._gaed -1,_fcdcc )._fcfb ;if _cgfd ==nil ||_cgfd ._dfcb {return nil ;};_fgegf [_fcdcc ]=_cgfd ;};for _gccc :=0;_gccc < _ecgc ._fcge -1;_gccc ++{if _fgegf [_gccc ]._baac !=_fgegf [_gccc +1]{return nil ;};};return _fgegf ;};func (_bbccbf paraList )findGridTables (_caceb []gridTiling )[]*textTable {if _egbb {_ec .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_bbccbf ));for _gadbb ,_abcf :=range _bbccbf {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gadbb ,_abcf );};};var _fadd []*textTable ;for _fcga ,_eabe :=range _caceb {_dbcba ,_fgbg :=_bbccbf .findTableGrid (_eabe );if _dbcba !=nil {_dbcba .log (_a .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_fcga ));_fadd =append (_fadd ,_dbcba );_dbcba .markCells ();};if _fgbg !=nil {for _babac :=range _fgbg {_babac ._dfcb =true ;};};};if _egbb {_ec .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_fadd ));};return _fadd ;};func (_abgc *stateStack )size ()int {return len (*_abgc )};func _geda (_cfb ,_adcbc _bd .Point ,_fdbdc _eb .Color )(*ruling ,bool ){_fbbc :=lineRuling {_cadgg :_cfb ,_eeebg :_adcbc ,_bagaf :_begd (_cfb ,_adcbc ),Color :_fdbdc };if _fbbc ._bagaf ==_ffce {return nil ,false ;};return _fbbc .asRuling ();};type rulingList []*ruling ;func (_beegb *textTable )emptyRow (_ggcd int )bool {for _cdfge :=0;_cdfge < _beegb ._gaed ;_cdfge ++{_bagd :=_beegb .get (_cdfge ,_ggcd );if _bagd !=nil &&_bagd .text ()!=""{return false ;};};return true ;};func (_dag *textWord )appendMark (_fgbe *textMark ,_eebf _eea .PdfRectangle ){_dag ._dfgdg =append (_dag ._dfgdg ,_fgbe );_dag .PdfRectangle =_gca (_dag .PdfRectangle ,_fgbe .PdfRectangle );if _fgbe ._cbab > _dag ._cagfe {_dag ._cagfe =_fgbe ._cbab ;};_dag ._bbegf =_eebf .Ury -_dag .PdfRectangle .Lly ;};func _ddba (_eegff _eea .PdfRectangle )*ruling {return &ruling {_accad :_bedb ,_ffeg :_eegff .Llx ,_adfg :_eegff .Lly ,_gcge :_eegff .Ury };};func (_cfafb *textLine )text ()string {var _eceg []string ;for _ ,_acfd :=range _cfafb ._aafd {if _acfd ._fdcc {_eceg =append (_eceg ,"\u0020");};_eceg =append (_eceg ,_acfd ._fcgd );};return _dg .Join (_eceg ,"");};func (_defda gridTiling )log (_faag string ){if !_dddd {return ;};_ec .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_defda ._gdaac ),len (_defda ._fdga ),_faag );_a .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_defda ._gdaac );_a .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_defda ._fdga );for _bgbb ,_aacfe :=range _defda ._fdga {_fdbc ,_bgaa :=_defda ._efecc [_aacfe ];if !_bgaa {continue ;};_a .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_bgbb ,_aacfe );for _ggdfd ,_aagb :=range _defda ._gdaac {_fcfef ,_edbe :=_fdbc [_aagb ];if !_edbe {continue ;};_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_ggdfd ,_fcfef .String ());};};};func _ceba (_gbb ,_fcag _eea .PdfRectangle )bool {return _gbb .Llx <=_fcag .Llx &&_fcag .Urx <=_gbb .Urx &&_gbb .Lly <=_fcag .Lly &&_fcag .Ury <=_gbb .Ury ;};

// Elements returns the TextMarks in `ma`.
func (_afb *TextMarkArray )Elements ()[]TextMark {return _afb ._bcff };func _bdec (_ffea ,_faga _bd .Point )rulingKind {_bfeg :=_fe .Abs (_ffea .X -_faga .X );_adabc :=_fe .Abs (_ffea .Y -_faga .Y );return _bgef (_bfeg ,_adabc ,_dfafb );};func (_eecaa rulingList )aligned ()bool {if len (_eecaa )< 2{return false ;};_cace :=make (map[*ruling ]int );_cace [_eecaa [0]]=0;for _ ,_afcb :=range _eecaa [1:]{_eegfd :=false ;for _cacbd :=range _cace {if _afcb .gridIntersecting (_cacbd ){_cace [_cacbd ]++;_eegfd =true ;break ;};};if !_eegfd {_cace [_afcb ]=0;};};_gdbbc :=0;for _ ,_cebbg :=range _cace {if _cebbg ==0{_gdbbc ++;};};_bbeg :=float64 (_gdbbc )/float64 (len (_eecaa ));_bacb :=_bbeg <=1.0-_cda ;if _cfad {_ec .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_bacb ,_bbeg ,_gdbbc ,len (_eecaa ),_eecaa .String ());};return _bacb ;};func _bdge (_daea _bd .Matrix )_bd .Point {_bfbe ,_acbf :=_daea .Translation ();return _bd .Point {X :_bfbe ,Y :_acbf };};func (_babf *textPara )isAtom ()*textTable {_degdb :=_babf ;_cccea :=_babf ._fcfb ;_abbb :=_babf ._baac ;if !(_cccea !=nil &&!_cccea ._dfcb &&_abbb !=nil &&!_abbb ._dfcb ){return nil ;};_daffb :=_cccea ._baac ;if !(_daffb !=nil &&!_daffb ._dfcb &&_daffb ==_abbb ._fcfb ){return nil ;};return _gega (_degdb ,_cccea ,_abbb ,_daffb );};func (_ddaf *wordBag )depthRange (_dfcf ,_ggeg int )[]int {var _eecba []int ;for _fec :=range _ddaf ._dfb {if _dfcf <=_fec &&_fec <=_ggeg {_eecba =append (_eecba ,_fec );};};if len (_eecba )==0{return nil ;};_b .Ints (_eecba );return _eecba ;};func (_edbbb *textTable )subdivide ()*textTable {_edbbb .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");_ddfge :=_edbbb .compositeRowCorridors ();_ccggb :=_edbbb .compositeColCorridors ();if _egbb {_ec .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_dcdfa (_ddfge ),_dcdfa (_ccggb ));};if len (_ddfge )==0||len (_ccggb )==0{return _edbbb ;};_gbbg (_ddfge );_gbbg (_ccggb );if _egbb {_ec .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_dcdfa (_ddfge ),_dcdfa (_ccggb ));};_cagdd ,_dgeee :=_dbdgg (_edbbb ._fcge ,_ddfge );_acagc ,_ccaeb :=_dbdgg (_edbbb ._gaed ,_ccggb );_fbbb :=make (map[uint64 ]*textPara ,_ccaeb *_dgeee );_bfbd :=&textTable {PdfRectangle :_edbbb .PdfRectangle ,_cgfg :_edbbb ._cgfg ,_fcge :_dgeee ,_gaed :_ccaeb ,_beaaa :_fbbb };if _egbb {_ec .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_edbbb ._gaed ,_edbbb ._fcge ,_ccaeb ,_dgeee ,_dcdfa (_ddfge ),_dcdfa (_ccggb ),_cagdd ,_acagc );};for _cegd :=0;_cegd < _edbbb ._fcge ;_cegd ++{_becb :=_cagdd [_cegd ];for _ceag :=0;_ceag < _edbbb ._gaed ;_ceag ++{_gccb :=_acagc [_ceag ];if _egbb {_a .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_ceag ,_cegd ,_gccb ,_becb );};_cgfae ,_ccdaca :=_edbbb ._adea [_efgeb (_ceag ,_cegd )];if !_ccdaca {continue ;};_fgfd :=_cgfae .split (_ddfge [_cegd ],_ccggb [_ceag ]);for _adbb :=0;_adbb < _fgfd ._fcge ;_adbb ++{for _cfaaf :=0;_cfaaf < _fgfd ._gaed ;_cfaaf ++{_babg :=_fgfd .get (_cfaaf ,_adbb );_bfbd .put (_gccb +_cfaaf ,_becb +_adbb ,_babg );if _egbb {_a .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gccb +_cfaaf ,_becb +_adbb ,_babg );};};};};};return _bfbd ;};var _fdaed =map[rulingKind ]string {_ffce :"\u006e\u006f\u006e\u0065",_dbfe :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bedb :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};func _acefe (_bcdc _eea .PdfRectangle )*ruling {return &ruling {_accad :_bedb ,_ffeg :_bcdc .Urx ,_adfg :_bcdc .Lly ,_gcge :_bcdc .Ury };};func (_fefg *textObject )getStrokeColor ()_eb .Color {return _bfdd (_fefg ._edaa .ColorspaceStroking ,_fefg ._edaa .ColorStroking );};func _gca (_fbefc ,_afea _eea .PdfRectangle )_eea .PdfRectangle {return _eea .PdfRectangle {Llx :_fe .Min (_fbefc .Llx ,_afea .Llx ),Lly :_fe .Min (_fbefc .Lly ,_afea .Lly ),Urx :_fe .Max (_fbefc .Urx ,_afea .Urx ),Ury :_fe .Max (_fbefc .Ury ,_afea .Ury )};};func (_facc *textTable )log (_bbbca string ){if !_egbb {return ;};_ec .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_bbbca ,_facc ._gaed ,_facc ._fcge ,_facc ._cgfg ,_facc .PdfRectangle );for _cgbcf :=0;_cgbcf < _facc ._fcge ;_cgbcf ++{for _dedd :=0;_dedd < _facc ._gaed ;_dedd ++{_bgaf :=_facc .get (_dedd ,_cgbcf );if _bgaf ==nil {continue ;};_a .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_dedd ,_cgbcf ,_bgaf .PdfRectangle ,_ecdd (_bgaf .text (),50),_f .RuneCountInString (_bgaf .text ()));};};};func _ebef (_gfdgb ,_bagb _bd .Point )bool {_abb :=_fe .Abs (_gfdgb .X -_bagb .X );_fffa :=_fe .Abs (_gfdgb .Y -_bagb .Y );return _eggf (_fffa ,_abb );};func _gbgdf (_gbbe map[float64 ]map[float64 ]gridTile )[]float64 {_aefed :=make ([]float64 ,0,len (_gbbe ));for _acdfb :=range _gbbe {_aefed =append (_aefed ,_acdfb );};_b .Float64s (_aefed );_bcccd :=len (_aefed );for _gefc :=0;_gefc < _bcccd /2;_gefc ++{_aefed [_gefc ],_aefed [_bcccd -1-_gefc ]=_aefed [_bcccd -1-_gefc ],_aefed [_gefc ];};return _aefed ;};func (_cfcc rulingList )isActualGrid ()(rulingList ,bool ){_efege ,_cdeaf :=_cfcc .augmentGrid ();if !(len (_efege )>=_bade +1&&len (_cdeaf )>=_bbd +1){if _cfad {_ec .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_efege ),len (_cdeaf ),_bade +1,_bbd +1);};return nil ,false ;};if _cfad {_ec .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_cfcc ,len (_efege )>=2,len (_cdeaf )>=2,len (_efege )>=2&&len (_cdeaf )>=2);for _geged ,_ecae :=range _cfcc {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_geged ,_ecae );};};if _gec {_gaeg ,_gceb :=_efege [0],_efege [len (_efege )-1];_bcffb ,_cfgc :=_cdeaf [0],_cdeaf [len (_cdeaf )-1];if !(_aaed (_gaeg ._ffeg -_bcffb ._adfg )&&_aaed (_gceb ._ffeg -_bcffb ._gcge )&&_aaed (_bcffb ._ffeg -_gaeg ._gcge )&&_aaed (_cfgc ._ffeg -_gaeg ._adfg )){if _cfad {_ec .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_gaeg ,_gceb ,_bcffb ,_cfgc );};return nil ,false ;};}else {if !_efege .aligned (){if _cdf {_ec .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_efege ));};return nil ,false ;};if !_cdeaf .aligned (){if _cfad {_ec .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_cdeaf ));};return nil ,false ;};};_afgcg :=append (_efege ,_cdeaf ...);return _afgcg ,true ;};func (_befc gridTile )complete ()bool {return _befc .numBorders ()==4};func _aaed (_edeg float64 )bool {return _fe .Abs (_edeg )< _cebd };const _beeg =10;func (_gfea rulingList )primaries ()[]float64 {_cgde :=make (map[float64 ]struct{},len (_gfea ));for _ ,_dfcd :=range _gfea {_cgde [_dfcd ._ffeg ]=struct{}{};};_bdaa :=make ([]float64 ,len (_cgde ));_beab :=0;for _bbgb :=range _cgde {_bdaa [_beab ]=_bbgb ;_beab ++;};_b .Float64s (_bdaa );return _bdaa ;};func _cbc (_ffg float64 ,_bbdb int )int {if _bbdb ==0{_bbdb =1;};_cdd :=float64 (_bbdb );return int (_fe .Round (_ffg /_cdd )*_cdd );};func (_ged *subpath )removeDuplicates (){if len (_ged ._cbf )==0{return ;};_fbd :=[]_bd .Point {_ged ._cbf [0]};for _ ,_dbca :=range _ged ._cbf [1:]{if !_cadag (_dbca ,_fbd [len (_fbd )-1]){_fbd =append (_fbd ,_dbca );};};_ged ._cbf =_fbd ;};func (_cbcd paraList )topoOrder ()[]int {if _gbeba {_ec .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_geaba :=len (_cbcd );_dabg :=make ([]bool ,_geaba );_fbgcf :=make ([]int ,0,_geaba );_abgcf :=_cbcd .llyOrdering ();var _bbbd func (_cedg int );_bbbd =func (_eeed int ){_dabg [_eeed ]=true ;for _edgc :=0;_edgc < _geaba ;_edgc ++{if !_dabg [_edgc ]{if _cbcd .readBefore (_abgcf ,_eeed ,_edgc ){_bbbd (_edgc );};};};_fbgcf =append (_fbgcf ,_eeed );};for _beaa :=0;_beaa < _geaba ;_beaa ++{if !_dabg [_beaa ]{_bbbd (_beaa );};};return _dbbgd (_fbgcf );};func (_fdea rulingList )findPrimSec (_efeb ,_defd float64 )*ruling {for _ ,_gcfag :=range _fdea {if _caeg (_gcfag ._ffeg -_efeb )&&_gcfag ._adfg -_cgab <=_defd &&_defd <=_gcfag ._gcge +_cgab {return _gcfag ;};};return nil ;};func (_acaf *textObject )moveTextSetLeading (_bff ,_eae float64 ){_acaf ._eafd ._edc =-_eae ;_acaf .moveLP (_bff ,_eae );};func (_ffgb rulingList )splitSec ()[]rulingList {_b .Slice (_ffgb ,func (_afdfd ,_aeadc int )bool {_aegb ,_acbb :=_ffgb [_afdfd ],_ffgb [_aeadc ];if _aegb ._adfg !=_acbb ._adfg {return _aegb ._adfg < _acbb ._adfg ;};return _aegb ._gcge < _acbb ._gcge ;});_defa :=make (map[*ruling ]struct{},len (_ffgb ));_cgddd :=func (_abdcd *ruling )rulingList {_fdcfa :=rulingList {_abdcd };_defa [_abdcd ]=struct{}{};for _ ,_bgag :=range _ffgb {if _ ,_gdga :=_defa [_bgag ];_gdga {continue ;};for _ ,_gaf :=range _fdcfa {if _bgag .alignsSec (_gaf ){_fdcfa =append (_fdcfa ,_bgag );_defa [_bgag ]=struct{}{};break ;};};};return _fdcfa ;};_dccf :=[]rulingList {_cgddd (_ffgb [0])};for _ ,_edcg :=range _ffgb [1:]{if _ ,_gfce :=_defa [_edcg ];_gfce {continue ;};_dccf =append (_dccf ,_cgddd (_edcg ));};return _dccf ;};const _ecbc =1.0/1000.0;func (_gaae *textTable )growTable (){_bfc :=func (_eecf paraList ){_gaae ._fcge ++;for _ecea :=0;_ecea < _gaae ._gaed ;_ecea ++{_ddgbf :=_eecf [_ecea ];_gaae .put (_ecea ,_gaae ._fcge -1,_ddgbf );};};_geega :=func (_fcdab paraList ){_gaae ._gaed ++;for _egeg :=0;_egeg < _gaae ._fcge ;_egeg ++{_cgcf :=_fcdab [_egeg ];_gaae .put (_gaae ._gaed -1,_egeg ,_cgcf );};};if _ecfcc {_gaae .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bebc :=0;;_bebc ++{_bafe :=false ;_dgdc :=_gaae .getDown ();_gfccb :=_gaae .getRight ();if _ecfcc {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bebc ,_gaae );_a .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_dgdc );_a .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_gfccb );};if _dgdc !=nil &&_gfccb !=nil {_ebecc :=_dgdc [len (_dgdc )-1];if _ebecc !=nil &&!_ebecc ._dfcb &&_ebecc ==_gfccb [len (_gfccb )-1]{_bfc (_dgdc );if _gfccb =_gaae .getRight ();_gfccb !=nil {_geega (_gfccb );_gaae .put (_gaae ._gaed -1,_gaae ._fcge -1,_ebecc );};_bafe =true ;};};if !_bafe &&_dgdc !=nil {_bfc (_dgdc );_bafe =true ;};if !_bafe &&_gfccb !=nil {_geega (_gfccb );_bafe =true ;};if !_bafe {break ;};};};type pathSection struct{_bbe []*subpath ;_eb .Color ;};type gridTiling struct{_eea .PdfRectangle ;_gdaac []float64 ;_fdga []float64 ;_efecc map[float64 ]map[float64 ]gridTile ;};func _gega (_cabad ,_ddef ,_adgec ,_cffae *textPara )*textTable {_bbcbc :=&textTable {_gaed :2,_fcge :2,_beaaa :make (map[uint64 ]*textPara ,4)};_bbcbc .put (0,0,_cabad );_bbcbc .put (1,0,_ddef );_bbcbc .put (0,1,_adgec );_bbcbc .put (1,1,_cffae );return _bbcbc ;};func _aeab (_bbgce _eea .PdfRectangle )rulingKind {_bddb :=_bbgce .Width ();_cegb :=_bbgce .Height ();if _bddb > _cegb {if _bddb >=_ebcf {return _dbfe ;};}else {if _cegb >=_ebcf {return _bedb ;};};return _ffce ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_fade *TextMarkArray )BBox ()(_eea .PdfRectangle ,bool ){var _ccb _eea .PdfRectangle ;_efgd :=false ;for _ ,_geae :=range _fade ._bcff {if _geae .Meta ||_dgdeg (_geae .Text ){continue ;};if _efgd {_ccb =_gca (_ccb ,_geae .BBox );}else {_ccb =_geae .BBox ;_efgd =true ;};};return _ccb ,_efgd ;};func (_ggdf *wordBag )arrangeText ()*textPara {_ggdf .sort ();if _fega {_ggdf .removeDuplicates ();};var _agbf []*textLine ;for _ ,_abfe :=range _ggdf .depthIndexes (){for !_ggdf .empty (_abfe ){_daeg :=_ggdf .firstReadingIndex (_abfe );_eeedb :=_ggdf .firstWord (_daeg );_dcba :=_dbcc (_ggdf ,_daeg );_afde :=_eeedb ._cagfe ;_deec :=_eeedb ._bbegf -_fgdc *_afde ;_abdcg :=_eeedb ._bbegf +_fgdc *_afde ;_adac :=_gaba *_afde ;_cfdb :=_fedg *_afde ;_fbbg :for {var _aefbf *textWord ;_ddfg :=0;for _ ,_gedgd :=range _ggdf .depthBand (_deec ,_abdcg ){_gccd :=_ggdf .highestWord (_gedgd ,_deec ,_abdcg );if _gccd ==nil {continue ;};_ggca :=_caf (_gccd ,_dcba ._aafd [len (_dcba ._aafd )-1]);if _ggca < -_cfdb {break _fbbg ;};if _ggca > _adac {continue ;};if _aefbf !=nil &&_gdfa (_gccd ,_aefbf )>=0{continue ;};_aefbf =_gccd ;_ddfg =_gedgd ;};if _aefbf ==nil {break ;};_dcba .pullWord (_ggdf ,_aefbf ,_ddfg );};_dcba .markWordBoundaries ();_agbf =append (_agbf ,_dcba );};};if len (_agbf )==0{return nil ;};_b .Slice (_agbf ,func (_eabd ,_cbdd int )bool {return _ebag (_agbf [_eabd ],_agbf [_cbdd ])< 0});_fabg :=_cdde (_ggdf .PdfRectangle ,_agbf );if _ccdc {_ec .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_fabg .String ());if _ebbg {for _accgd ,_eeae :=range _fabg ._gdfg {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_accgd ,_eeae .String ());if _gcfa {for _edgfd ,_eeaac :=range _eeae ._aafd {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_edgfd ,_eeaac .String ());for _ebagb ,_bbggg :=range _eeaac ._dfgdg {_a .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_ebagb ,_bbggg .String ());};};};};};};return _fabg ;};func (_dbcg *stateStack )empty ()bool {return len (*_dbcg )==0};func (_gbeg rulingList )vertsHorzs ()(rulingList ,rulingList ){var _degdf ,_acfe rulingList ;for _ ,_caefe :=range _gbeg {switch _caefe ._accad {case _bedb :_degdf =append (_degdf ,_caefe );case _dbfe :_acfe =append (_acfe ,_caefe );};};return _degdf ,_acfe ;};func (_agfgc rulingList )connections (_effg map[int ]intSet ,_accfc int )intSet {_eddea :=make (intSet );_agfad :=make (intSet );var _faca func (int );_faca =func (_cbad int ){if !_agfad .has (_cbad ){_agfad .add (_cbad );for _cdad :=range _agfgc {if _effg [_cdad ].has (_cbad ){_eddea .add (_cdad );};};for _fbfd :=range _agfgc {if _eddea .has (_fbfd ){_faca (_fbfd );};};};};_faca (_accfc );return _eddea ;};func (_afee *stateStack )top ()*textState {if _afee .empty (){return nil ;};return (*_afee )[_afee .size ()-1];};

// String returns a description of `l`.
func (_fcdc *textLine )String ()string {return _a .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_fcdc ._fbae ,_fcdc .PdfRectangle ,_fcdc ._cdbc ,_fcdc .text ());};

// String returns a description of `v`.
func (_aeae *ruling )String ()string {if _aeae ._accad ==_ffce {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_ggfbe ,_bfece :="\u0078","\u0079";if _aeae ._accad ==_dbfe {_ggfbe ,_bfece ="\u0079","\u0078";};_daaa :="";if _aeae ._cdcbb !=0.0{_daaa =_a .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_aeae ._cdcbb );};return _a .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_aeae ._accad ,_ggfbe ,_aeae ._ffeg ,_bfece ,_aeae ._adfg ,_aeae ._gcge ,_aeae ._gcge -_aeae ._adfg ,_aeae ._bfgg ,_aeae .Color ,_daaa );};func (_gddf compositeCell )split (_eedc ,_cagg []float64 )*textTable {_gdca :=len (_eedc )+1;_cggd :=len (_cagg )+1;if _egbb {_ec .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_cggd ,_gdca ,_gddf ,_eedc ,_cagg );_a .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_gddf .paraList ));for _dfaaf ,_cecb :=range _gddf .paraList {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dfaaf ,_cecb .String ());};_a .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_gddf .lines ()));for _bdgd ,_geaf :=range _gddf .lines (){_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bdgd ,_geaf );};};_eedc =_edgdd (_eedc ,_gddf .Ury ,_gddf .Lly );_cagg =_edgdd (_cagg ,_gddf .Llx ,_gddf .Urx );_gcfbd :=make (map[uint64 ]*textPara ,_cggd *_gdca );_ccecb :=textTable {_gaed :_cggd ,_fcge :_gdca ,_beaaa :_gcfbd };_gefbb :=_gddf .paraList ;_b .Slice (_gefbb ,func (_eddb ,_ggac int )bool {_gadg ,_aggbb :=_gefbb [_eddb ],_gefbb [_ggac ];_gbefb ,_gbfe :=_gadg .Lly ,_aggbb .Lly ;if _gbefb !=_gbfe {return _gbefb < _gbfe ;};return _gadg .Llx < _aggbb .Llx ;});_efgfd :=make (map[uint64 ]_eea .PdfRectangle ,_cggd *_gdca );for _cceg ,_fagcc :=range _eedc [1:]{_acca :=_eedc [_cceg ];for _geec ,_ecc :=range _cagg [1:]{_fbcc :=_cagg [_geec ];_efgfd [_efgeb (_geec ,_cceg )]=_eea .PdfRectangle {Llx :_fbcc ,Urx :_ecc ,Lly :_fagcc ,Ury :_acca };};};if _egbb {_ec .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_a .Printf ("\u0020\u0020\u0020\u0020");for _cgb :=0;_cgb < _cggd ;_cgb ++{_a .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_cgb );};_a .Println ();for _fgfe :=0;_fgfe < _gdca ;_fgfe ++{_a .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_fgfe );for _bggb :=0;_bggb < _cggd ;_bggb ++{_a .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_efgfd [_efgeb (_bggb ,_fgfe )]);};_a .Println ();};};_cdcg :=func (_efca *textLine )(int ,int ){for _dbbbc :=0;_dbbbc < _gdca ;_dbbbc ++{for _dfab :=0;_dfab < _cggd ;_dfab ++{if _ceba (_efgfd [_efgeb (_dfab ,_dbbbc )],_efca .PdfRectangle ){return _dfab ,_dbbbc ;};};};return -1,-1;};_fgda :=make (map[uint64 ][]*textLine ,_cggd *_gdca );for _ ,_edaf :=range _gefbb .lines (){_fdge ,_gfbb :=_cdcg (_edaf );if _fdge < 0{continue ;};_fgda [_efgeb (_fdge ,_gfbb )]=append (_fgda [_efgeb (_fdge ,_gfbb )],_edaf );};for _eefg :=0;_eefg < len (_eedc )-1;_eefg ++{_fgff :=_eedc [_eefg ];_bdee :=_eedc [_eefg +1];for _baeg :=0;_baeg < len (_cagg )-1;_baeg ++{_ddfe :=_cagg [_baeg ];_abdeg :=_cagg [_baeg +1];_bffaa :=_eea .PdfRectangle {Llx :_ddfe ,Urx :_abdeg ,Lly :_bdee ,Ury :_fgff };_afcc :=_fgda [_efgeb (_baeg ,_eefg )];if len (_afcc )==0{continue ;};_dbbge :=_cdde (_bffaa ,_afcc );_ccecb .put (_baeg ,_eefg ,_dbbge );};};return &_ccecb ;};var _cdbg =_c .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");func (_gaccf rulingList )removeDuplicates ()rulingList {if len (_gaccf )==0{return nil ;};_gaccf .sort ();_bfaf :=rulingList {_gaccf [0]};for _ ,_egdb :=range _gaccf [1:]{if _egdb .equals (_bfaf [len (_bfaf )-1]){continue ;};_bfaf =append (_bfaf ,_egdb );};return _bfaf ;};func (_egc *imageExtractContext )extractContentStreamImages (_fbg string ,_ddf *_eea .PdfPageResources )error {_ccg :=_ea .NewContentStreamParser (_fbg );_bg ,_ed :=_ccg .Parse ();if _ed !=nil {return _ed ;};if _egc ._bfb ==nil {_egc ._bfb =map[*_cc .PdfObjectStream ]*cachedImage {};};if _egc ._afg ==nil {_egc ._afg =&ImageExtractOptions {};};_ac :=_ea .NewContentStreamProcessor (*_bg );_ac .AddHandler (_ea .HandlerConditionEnumAllOperands ,"",_egc .processOperand );return _ac .Process (_ddf );};func (_bffa *textObject )setTextRenderMode (_ggf int ){if _bffa ==nil {return ;};_bffa ._eafd ._fad =RenderMode (_ggf );};func _fac (_gdge []*textMark ,_fgcf _eea .PdfRectangle ,_aega rulingList ,_faee []gridTiling )paraList {_ec .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_gdge ),_fgcf );if len (_gdge )==0{return nil ;};_fced :=_cbcea (_gdge ,_fgcf );if len (_fced )==0{return nil ;};_aega .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_ebecg ,_edba :=_aega .vertsHorzs ();_accg :=_dcdf (_fced ,_fgcf .Ury ,_ebecg ,_edba );_fcccbd :=_bgdfg (_accg ,_fgcf .Ury ,_ebecg ,_edba );_fcccbd =_faeb (_fcccbd );_cgg :=make (paraList ,0,len (_fcccbd ));for _ ,_cbb :=range _fcccbd {_addd :=_cbb .arrangeText ();if _addd !=nil {_cgg =append (_cgg ,_addd );};};if len (_cgg )>=_fbf {_cgg =_cgg .extractTables (_faee );};_cgg .sortReadingOrder ();_cgg .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _cgg ;};type wordBag struct{_eea .PdfRectangle ;_egdd float64 ;_afdb ,_acgb rulingList ;_ggcb float64 ;_dfb map[int ][]*textWord ;};func (_cgec *ruling )intersects (_cacg *ruling )bool {_cdbf :=(_cgec ._accad ==_bedb &&_cacg ._accad ==_dbfe )||(_cacg ._accad ==_bedb &&_cgec ._accad ==_dbfe );_feaae :=func (_fefc ,_cfdc *ruling )bool {return _fefc ._adfg -_cgab <=_cfdc ._ffeg &&_cfdc ._ffeg <=_fefc ._gcge +_cgab ;};_cddf :=_feaae (_cgec ,_cacg );_cbgg :=_feaae (_cacg ,_cgec );if _cfad {_a .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_cdbf ,_cddf ,_cbgg ,_cdbf &&_cddf &&_cbgg ,_cgec ,_cacg );};return _cdbf &&_cddf &&_cbgg ;};

// String returns a human readable description of `vecs`.
func (_dccd rulingList )String ()string {if len (_dccd )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_eeea ,_cdafg :=_dccd .vertsHorzs ();_bgdfd :=len (_eeea );_acae :=len (_cdafg );if _bgdfd ==0||_acae ==0{return _a .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_bgdfd ,_acae );};_babad :=_eea .PdfRectangle {Llx :_eeea [0]._ffeg ,Urx :_eeea [_bgdfd -1]._ffeg ,Lly :_cdafg [_acae -1]._ffeg ,Ury :_cdafg [0]._ffeg };return _a .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_bgdfd ,_acae ,_babad );};func (_bfecg *shapesState )addPoint (_ddgg ,_edad float64 ){_eeee :=_bfecg .establishSubpath ();_fccc :=_bfecg .devicePoint (_ddgg ,_edad );if _eeee ==nil {_bfecg ._gfg =true ;_bfecg ._fdgb =_fccc ;}else {_eeee .add (_fccc );};};func (_dbef gridTile )contains (_fcac _eea .PdfRectangle )bool {if _dbef .numBorders ()< 3{return false ;};if _dbef ._ddbc &&_fcac .Llx < _dbef .Llx -_dcdca {return false ;};if _dbef ._cece &&_fcac .Urx > _dbef .Urx +_dcdca {return false ;};if _dbef ._bbbc &&_fcac .Lly < _dbef .Lly -_dcdca {return false ;};if _dbef ._cddd &&_fcac .Ury > _dbef .Ury +_dcdca {return false ;};return true ;};func (_dbaaa *textWord )addDiacritic (_egfeg string ){_aaedcg :=_dbaaa ._dfgdg [len (_dbaaa ._dfgdg )-1];_aaedcg ._cdca +=_egfeg ;_aaedcg ._cdca =_ca .NFKC .String (_aaedcg ._cdca );};

// Text returns the extracted page text.
func (_ebbb PageText )Text ()string {return _ebbb ._cfe };func (_affba paraList )readBefore (_abded []int ,_acef ,_bggag int )bool {_dcag ,_dgcae :=_affba [_acef ],_affba [_bggag ];if _afaed (_dcag ,_dgcae )&&_dcag .Lly > _dgcae .Lly {return true ;};if !(_dcag ._cgee .Urx < _dgcae ._cgee .Llx ){return false ;};_febdc ,_gddg :=_dcag .Lly ,_dgcae .Lly ;if _febdc > _gddg {_gddg ,_febdc =_febdc ,_gddg ;};_feag :=_fe .Max (_dcag ._cgee .Llx ,_dgcae ._cgee .Llx );_cgac :=_fe .Min (_dcag ._cgee .Urx ,_dgcae ._cgee .Urx );_dddec :=_affba .llyRange (_abded ,_febdc ,_gddg );for _ ,_aafa :=range _dddec {if _aafa ==_acef ||_aafa ==_bggag {continue ;};_bdgc :=_affba [_aafa ];if _bdgc ._cgee .Llx <=_cgac &&_feag <=_bdgc ._cgee .Urx {return false ;};};return true ;};func (_dcbg *ruling )equals (_fada *ruling )bool {return _dcbg ._accad ==_fada ._accad &&_deeb (_dcbg ._ffeg ,_fada ._ffeg )&&_deeb (_dcbg ._adfg ,_fada ._adfg )&&_deeb (_dcbg ._gcge ,_fada ._gcge );};func (_adf *textObject )setTextRise (_egf float64 ){if _adf ==nil {return ;};_adf ._eafd ._bage =_egf ;};func (_cbed *PageText )computeViews (){var _abdc rulingList ;if _fgbc {_agaf :=_dgdab (_cbed ._fgf );_abdc =append (_abdc ,_agaf ...);};if _aacd {_ffe :=_dfcfd (_cbed ._fdcf );_abdc =append (_abdc ,_ffe ...);};_abdc ,_aed :=_abdc .toTilings ();var _decg paraList ;_daa :=len (_cbed ._fgd );for _dfg :=0;_dfg < 360&&_daa > 0;_dfg +=90{_fcd :=make ([]*textMark ,0,len (_cbed ._fgd )-_daa );for _ ,_dgge :=range _cbed ._fgd {if _dgge ._fgcd ==_dfg {_fcd =append (_fcd ,_dgge );};};if len (_fcd )> 0{_bad :=_fac (_fcd ,_cbed ._bfd ,_abdc ,_aed );_decg =append (_decg ,_bad ...);_daa -=len (_fcd );};};_bfgdd :=new (_gf .Buffer );_decg .writeText (_bfgdd );_cbed ._cfe =_bfgdd .String ();_cbed ._fbb =_decg .toTextMarks ();_cbed ._bea =_decg .tables ();if _egbb {_ec .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_cbed ._bea ));};};func (_gddc rulingList )mergePrimary ()float64 {_fffaa :=_gddc [0]._ffeg ;for _ ,_cfdbb :=range _gddc [1:]{_fffaa +=_cfdbb ._ffeg ;};return _fffaa /float64 (len (_gddc ));};func (_abbga paraList )inTile (_gdgdc gridTile )paraList {var _aedc paraList ;for _ ,_beeda :=range _abbga {if _gdgdc .contains (_beeda .PdfRectangle ){_aedc =append (_aedc ,_beeda );};};if _egbb {_a .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_gdgdc ,len (_aedc ));for _cdbde ,_dcdb :=range _aedc {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cdbde ,_dcdb );};_a .Println ("");};return _aedc ;};func (_cbfc paraList )toTextMarks ()[]TextMark {_bccb :=0;var _bccca []TextMark ;for _bfac ,_efgf :=range _cbfc {if _efgf ._dcge {continue ;};_fbgf :=_efgf .toTextMarks (&_bccb );_bccca =append (_bccca ,_fbgf ...);if _bfac !=len (_cbfc )-1{if _acdg (_efgf ,_cbfc [_bfac +1]){_bccca =_dgde (_bccca ,&_bccb ,"\u0020");}else {_bccca =_dgde (_bccca ,&_bccb ,"\u000a");_bccca =_dgde (_bccca ,&_bccb ,"\u000a");};};};_bccca =_dgde (_bccca ,&_bccb ,"\u000a");_bccca =_dgde (_bccca ,&_bccb ,"\u000a");return _bccca ;};var (_fcbe =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};);func _aaec (_bbgg []TextMark ,_afgc *int )[]TextMark {_eggga :=_bbgg [len (_bbgg )-1];_cdee :=[]rune (_eggga .Text );if len (_cdee )==1{_bbgg =_bbgg [:len (_bbgg )-1];_cgdc :=_bbgg [len (_bbgg )-1];*_afgc =_cgdc .Offset +len (_cgdc .Text );}else {_gcae :=_aceb (_eggga .Text );*_afgc +=len (_gcae )-len (_eggga .Text );_eggga .Text =_gcae ;};return _bbgg ;};func _dgde (_aaa []TextMark ,_bgab *int ,_dbac string )[]TextMark {_ddgae :=_bfdf ;_ddgae .Text =_dbac ;return _degf (_aaa ,_bgab ,_ddgae );};const (_cebb =true ;_fega =true ;_ebd =true ;_bgcea =false ;_efdg =false ;_cgag =6;_ebec =3.0;_gbef =200;_aea =true ;_egdg =true ;_fgbc =true ;_aacd =true ;_gec =false ;);func (_ccc *imageExtractContext )extractXObjectImage (_ccge *_cc .PdfObjectName ,_egd _ea .GraphicsState ,_ce *_eea .PdfPageResources )error {_dga ,_ :=_ce .GetXObjectByName (*_ccge );if _dga ==nil {return nil ;};_cab ,_afe :=_ccc ._bfb [_dga ];if !_afe {_eaa ,_de :=_ce .GetXObjectImageByName (*_ccge );if _de !=nil {return _de ;};if _eaa ==nil {return nil ;};_ace ,_de :=_eaa .ToImage ();if _de !=nil {return _de ;};_cab =&cachedImage {_ag :_ace ,_adc :_eaa .ColorSpace };_ccc ._bfb [_dga ]=_cab ;};_abd :=_cab ._ag ;_fd :=_cab ._adc ;_agb ,_aa :=_fd .ImageToRGB (*_abd );if _aa !=nil {return _aa ;};_ec .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_egd .CTM .String ());_cad :=ImageMark {Image :&_agb ,Width :_egd .CTM .ScalingFactorX (),Height :_egd .CTM .ScalingFactorY (),Angle :_egd .CTM .Angle ()};_cad .X ,_cad .Y =_egd .CTM .Translation ();_ccc ._db =append (_ccc ._db ,_cad );_ccc ._ad ++;return nil ;};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_egef *PageText )ApplyArea (bbox _eea .PdfRectangle ){_gabc :=make ([]*textMark ,0,len (_egef ._fgd ));for _ ,_abe :=range _egef ._fgd {if _badf (_abe .bbox (),bbox ){_gabc =append (_gabc ,_abe );};};var _eefe paraList ;_edgf :=len (_gabc );for _fgb :=0;_fgb < 360&&_edgf > 0;_fgb +=90{_dbge :=make ([]*textMark ,0,len (_gabc )-_edgf );for _ ,_cbda :=range _gabc {if _cbda ._fgcd ==_fgb {_dbge =append (_dbge ,_cbda );};};if len (_dbge )> 0{_fab :=_fac (_dbge ,_egef ._bfd ,nil ,nil );_eefe =append (_eefe ,_fab ...);_edgf -=len (_dbge );};};_bgff :=new (_gf .Buffer );_eefe .writeText (_bgff );_egef ._cfe =_bgff .String ();_egef ._fbb =_eefe .toTextMarks ();_egef ._bea =_eefe .tables ();};func (_gfcc paraList )llyOrdering ()[]int {_ddeb :=make ([]int ,len (_gfcc ));for _fcdb :=range _gfcc {_ddeb [_fcdb ]=_fcdb ;};_b .SliceStable (_ddeb ,func (_fdgd ,_dcef int )bool {_gadb ,_baaf :=_ddeb [_fdgd ],_ddeb [_dcef ];return _gfcc [_gadb ].Lly < _gfcc [_baaf ].Lly ;});return _ddeb ;};type textTable struct{_eea .PdfRectangle ;_gaed ,_fcge int ;_cgfg bool ;_beaaa map[uint64 ]*textPara ;_adea map[uint64 ]compositeCell ;};

// PageText represents the layout of text on a device page.
type PageText struct{_fgd []*textMark ;_cfe string ;_fbb []TextMark ;_bea []TextTable ;_bfd _eea .PdfRectangle ;_fgf []pathSection ;_fdcf []pathSection ;};func (_fddbb gridTiling )complete ()bool {for _ ,_gaga :=range _fddbb ._efecc {for _ ,_gcab :=range _gaga {if !_gcab .complete (){return false ;};};};return true ;};const (_daf =1.0e-6;_daag =1.0e-4;_badfe =10;_eeab =6;_fgdc =0.5;_gcgb =0.11;_bbfbaa =0.19;_cdga =0.04;_aceca =0.04;_ccdd =1.0;_egcge =0.04;_adbe =0.4;_bbfe =0.7;_cbdc =1.0;_bgdf =0.1;_gaba =1.4;_fedg =0.46;_gfbd =0.02;_gcdbb =0.2;_fbbf =0.5;_ded =4;_dfe =4.0;_fbf =6;_gfad =0.3;_cgaec =0.01;_addcb =0.02;_bade =2;_bbd =2;_fdbg =500;_ebcf =4.0;_eefdc =4.0;_dfafb =0.05;_bbfa =0.1;_cgab =2.0;_cebd =2.0;_dcdca =1.5;_fcb =3.0;_cda =0.25;);func (_adaca paraList )findTables (_eagc []gridTiling )[]*textTable {_adaca .addNeighbours ();_b .Slice (_adaca ,func (_bddg ,_bdffb int )bool {return _geeg (_adaca [_bddg ],_adaca [_bdffb ])< 0});var _bggg []*textTable ;if _aea {_dcga :=_adaca .findGridTables (_eagc );_bggg =append (_bggg ,_dcga ...);};if _egdg {_ffef :=_adaca .findTextTables ();_bggg =append (_bggg ,_ffef ...);};return _bggg ;};func _edada (_egfe int ,_gfbaf func (int ,int )bool )[]int {_gcgec :=make ([]int ,_egfe );for _cdgf :=range _gcgec {_gcgec [_cdgf ]=_cdgf ;};_b .Slice (_gcgec ,func (_gdeg ,_gaacb int )bool {return _gfbaf (_gcgec [_gdeg ],_gcgec [_gaacb ])});return _gcgec ;};func (_gbgea paraList )xNeighbours (_ecgcf float64 )map[*textPara ][]int {_eabda :=make ([]event ,2*len (_gbgea ));if _ecgcf ==0{for _daegg ,_acfgg :=range _gbgea {_eabda [2*_daegg ]=event {_acfgg .Llx ,true ,_daegg };_eabda [2*_daegg +1]=event {_acfgg .Urx ,false ,_daegg };};}else {for _daefa ,_ceda :=range _gbgea {_eabda [2*_daefa ]=event {_ceda .Llx -_ecgcf *_ceda .fontsize (),true ,_daefa };_eabda [2*_daefa +1]=event {_ceda .Urx +_ecgcf *_ceda .fontsize (),false ,_daefa };};};return _gbgea .eventNeighbours (_eabda );};func (_eaae *textPara )bbox ()_eea .PdfRectangle {return _eaae .PdfRectangle };func (_dbgee *textTable )logComposite (_egfca string ){if !_egbb {return ;};_ec .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_dbgee ._gaed ,_dbgee ._fcge ,_egfca );_a .Printf ("\u0025\u0035\u0073 \u007c","");for _aecb :=0;_aecb < _dbgee ._gaed ;_aecb ++{_a .Printf ("\u0025\u0033\u0064 \u007c",_aecb );};_a .Println ("");_a .Printf ("\u0025\u0035\u0073 \u002b","");for _daec :=0;_daec < _dbgee ._gaed ;_daec ++{_a .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");};_a .Println ("");for _fbfa :=0;_fbfa < _dbgee ._fcge ;_fbfa ++{_a .Printf ("\u0025\u0035\u0064 \u007c",_fbfa );for _ffbeb :=0;_ffbeb < _dbgee ._gaed ;_ffbeb ++{_gagd ,_ :=_dbgee ._adea [_efgeb (_ffbeb ,_fbfa )].parasBBox ();_a .Printf ("\u0025\u0033\u0064 \u007c",len (_gagd ));};_a .Println ("");};_ec .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_dbgee ._gaed ,_dbgee ._fcge ,_egfca );_a .Printf ("\u0025\u0035\u0073 \u007c","");for _acbfb :=0;_acbfb < _dbgee ._gaed ;_acbfb ++{_a .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_acbfb );};_a .Println ("");_a .Printf ("\u0025\u0035\u0073 \u002b","");for _defc :=0;_defc < _dbgee ._gaed ;_defc ++{_a .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_a .Println ("");for _cddg :=0;_cddg < _dbgee ._fcge ;_cddg ++{_a .Printf ("\u0025\u0035\u0064 \u007c",_cddg );for _cgdcf :=0;_cgdcf < _dbgee ._gaed ;_cgdcf ++{_becc ,_ :=_dbgee ._adea [_efgeb (_cgdcf ,_cddg )].parasBBox ();_dceag :="";_bcfa :=_becc .merge ();if _bcfa !=nil {_dceag =_bcfa .text ();};_dceag =_a .Sprintf ("\u0025\u0071",_ecdd (_dceag ,12));_dceag =_dceag [1:len (_dceag )-1];_a .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_dceag );};_a .Println ("");};};func (_ggb *textObject )setTextLeading (_cfa float64 ){if _ggb ==nil {return ;};_ggb ._eafd ._edc =_cfa ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_eea .PdfPageResources )(*Extractor ,error ){_ddg :=&Extractor {_fg :contents ,_be :resources ,_eg :map[string ]fontEntry {},_dd :map[string ]textResult {}};return _ddg ,nil ;};func (_cfab *ruling )gridIntersecting (_efba *ruling )bool {return _deeb (_cfab ._adfg ,_efba ._adfg )&&_deeb (_cfab ._gcge ,_efba ._gcge );};type textMark struct{_eea .PdfRectangle ;_fgcd int ;_cdca string ;_ecec string ;_eaeg *_eea .PdfFont ;_cbab float64 ;_gggc float64 ;_ddac _bd .Matrix ;_fdbf _bd .Point ;_afaeb _eea .PdfRectangle ;_cgcec _eb .Color ;_dbce _eb .Color ;};type stateStack []*textState ;type textPara struct{_eea .PdfRectangle ;_cgee _eea .PdfRectangle ;_gdfg []*textLine ;_dcdg *textTable ;_dfcb bool ;_dcge bool ;_adbeg *textPara ;_fcfb *textPara ;_cef *textPara ;_baac *textPara ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func (_egeb rulingList )merge ()*ruling {_ddggf :=_egeb [0]._ffeg ;_agcdd :=_egeb [0]._adfg ;_abdd :=_egeb [0]._gcge ;for _ ,_aebb :=range _egeb [1:]{_ddggf +=_aebb ._ffeg ;if _aebb ._adfg < _agcdd {_agcdd =_aebb ._adfg ;};if _aebb ._gcge > _abdd {_abdd =_aebb ._gcge ;};};_gagaa :=&ruling {_accad :_egeb [0]._accad ,_bfgg :_egeb [0]._bfgg ,Color :_egeb [0].Color ,_ffeg :_ddggf /float64 (len (_egeb )),_adfg :_agcdd ,_gcge :_abdd };if _cdf {_ec .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_egeb ),_gagaa );for _afaaa ,_bcdb :=range _egeb {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_afaaa ,_bcdb );};};return _gagaa ;};func _dffeg (_badb float64 )float64 {return _daag *_fe .Round (_badb /_daag )};func (_daeaca *textTable )get (_adga ,_cceb int )*textPara {return _daeaca ._beaaa [_efgeb (_adga ,_cceb )];};func _bbbb (_bdffd []*textWord ,_gfca int )[]*textWord {_bcaf :=len (_bdffd );copy (_bdffd [_gfca :],_bdffd [_gfca +1:]);return _bdffd [:_bcaf -1];};func (_ccce *wordBag )scanBand (_adcd string ,_gcc *wordBag ,_dde func (_dgca *wordBag ,_cgca *textWord )bool ,_efdc ,_fce ,_daeac float64 ,_eeeea ,_cffec bool )int {_dgba :=_gcc ._egdd ;var _dda map[int ]map[*textWord ]struct{};if !_eeeea {_dda =_ccce .makeRemovals ();};_geab :=_fgdc *_dgba ;_fae :=0;var _defg []*textWord ;for _ ,_dcdc :=range _ccce .depthBand (_efdc -_geab ,_fce +_geab ){if len (_ccce ._dfb [_dcdc ])==0{continue ;};for _ ,_fadf :=range _ccce ._dfb [_dcdc ]{if !(_efdc -_geab <=_fadf ._bbegf &&_fadf ._bbegf <=_fce +_geab ){continue ;};if !_dde (_gcc ,_fadf ){continue ;};_dgcc :=2.0*_fe .Abs (_fadf ._cagfe -_gcc ._egdd )/(_fadf ._cagfe +_gcc ._egdd );_ddcd :=_fe .Max (_fadf ._cagfe /_gcc ._egdd ,_gcc ._egdd /_fadf ._cagfe );_ffbd :=_fe .Min (_dgcc ,_ddcd );if _daeac > 0&&_ffbd > _daeac {continue ;};if _gcc .blocked (_fadf ){continue ;};if !_eeeea {_gcc .pullWord (_fadf ,_dcdc ,_dda );};_defg =append (_defg ,_fadf );_fae ++;if !_cffec {if _fadf ._bbegf < _efdc {_efdc =_fadf ._bbegf ;};if _fadf ._bbegf > _fce {_fce =_fadf ._bbegf ;};};if _eeeea {break ;};};};if !_eeeea {_ccce .applyRemovals (_dda );};return _fae ;};func (_cccga rectRuling )asRuling ()(*ruling ,bool ){_ffag :=ruling {_accad :_cccga ._agdf ,Color :_cccga .Color ,_bfgg :_fcdf };switch _cccga ._agdf {case _bedb :_ffag ._ffeg =0.5*(_cccga .Llx +_cccga .Urx );_ffag ._adfg =_cccga .Lly ;_ffag ._gcge =_cccga .Ury ;_fggef ,_dfgf :=_cccga .checkWidth (_cccga .Llx ,_cccga .Urx );if !_dfgf {if _fea {_ec .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_cccga );};return nil ,false ;};_ffag ._cdcbb =_fggef ;case _dbfe :_ffag ._ffeg =0.5*(_cccga .Lly +_cccga .Ury );_ffag ._adfg =_cccga .Llx ;_ffag ._gcge =_cccga .Urx ;_cddb ,_dcc :=_cccga .checkWidth (_cccga .Lly ,_cccga .Ury );if !_dcc {if _fea {_ec .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_cccga );};return nil ,false ;};_ffag ._cdcbb =_cddb ;default:_ec .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_cccga ._agdf );return nil ,false ;};return &_ffag ,true ;};func (_adg *textObject )setTextMatrix (_aac []float64 ){if len (_aac )!=6{_ec .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_aac ));return ;};_ceed ,_gagf ,_bfgd ,_abg ,_aefe ,_cabf :=_aac [0],_aac [1],_aac [2],_aac [3],_aac [4],_aac [5];_adg ._bfee =_bd .NewMatrix (_ceed ,_gagf ,_bfgd ,_abg ,_aefe ,_cabf );_adg ._gcf =_adg ._bfee ;};func (_gbgeg *textTable )emptyColumn (_acff int )bool {for _dfba :=0;_dfba < _gbgeg ._fcge ;_dfba ++{_bcgb :=_gbgeg .get (_acff ,_dfba );if _bcgb !=nil &&_bcgb .text ()!=""{return false ;};};return true ;};func _edgdd (_fggd []float64 ,_fggff ,_dbgb float64 )[]float64 {_gecb ,_ccdce :=_fggff ,_dbgb ;if _ccdce < _gecb {_gecb ,_ccdce =_ccdce ,_gecb ;};_aeeg :=make ([]float64 ,0,len (_fggd )+2);_aeeg =append (_aeeg ,_fggff );for _ ,_dggfg :=range _fggd {if _dggfg <=_gecb {continue ;}else if _dggfg >=_ccdce {break ;};_aeeg =append (_aeeg ,_dggfg );};_aeeg =append (_aeeg ,_dbgb );return _aeeg ;};func _bedc (_bgbcb []*textMark ,_egab _eea .PdfRectangle )*textWord {_fdbcd :=_bgbcb [0].PdfRectangle ;_abbgb :=_bgbcb [0]._cbab ;for _ ,_beeed :=range _bgbcb [1:]{_fdbcd =_gca (_fdbcd ,_beeed .PdfRectangle );if _beeed ._cbab > _abbgb {_abbgb =_beeed ._cbab ;};};return &textWord {PdfRectangle :_fdbcd ,_dfgdg :_bgbcb ,_bbegf :_egab .Ury -_fdbcd .Lly ,_cagfe :_abbgb };};func (_abga *textObject )setCharSpacing (_cec float64 ){if _abga ==nil {return ;};_abga ._eafd ._eegb =_cec ;if _eefd {_ec .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_cec ,_abga ._eafd .String ());};};func (_ffdd *textTable )compositeRowCorridors ()map[int ][]float64 {_bfeceb :=make (map[int ][]float64 ,_ffdd ._fcge );if _egbb {_ec .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_ffdd ._fcge );};for _egccf :=1;_egccf < _ffdd ._fcge ;_egccf ++{var _bdedg []compositeCell ;for _bdbdd :=0;_bdbdd < _ffdd ._gaed ;_bdbdd ++{if _aeag ,_gdceb :=_ffdd ._adea [_efgeb (_bdbdd ,_egccf )];_gdceb {_bdedg =append (_bdedg ,_aeag );};};if len (_bdedg )==0{continue ;};_cgbc :=_eaad (_bdedg );_bfeceb [_egccf ]=_cgbc ;if _egbb {_a .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_egccf ,_cgbc );};};return _bfeceb ;};func (_dfd *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_dcgf :=make (map[int ]map[*textWord ]struct{},len (_dfd ._dfb ));for _gfcg :=range _dfd ._dfb {_dcgf [_gfcg ]=make (map[*textWord ]struct{});};return _dcgf ;};

// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_eea .PdfPage )(*Extractor ,error ){_ef ,_efa :=page .GetAllContentStreams ();if _efa !=nil {return nil ,_efa ;};_eag ,_efa :=page .GetMediaBox ();if _efa !=nil {return nil ,_a .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_efa );};_cd :=&Extractor {_fg :_ef ,_be :page .Resources ,_cfd :*_eag ,_eg :map[string ]fontEntry {},_dd :map[string ]textResult {}};if _cd ._cfd .Llx > _cd ._cfd .Urx {_ec .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cd ._cfd );_cd ._cfd .Llx ,_cd ._cfd .Urx =_cd ._cfd .Urx ,_cd ._cfd .Llx ;};if _cd ._cfd .Lly > _cd ._cfd .Ury {_ec .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_cd ._cfd );_cd ._cfd .Lly ,_cd ._cfd .Ury =_cd ._cfd .Ury ,_cd ._cfd .Lly ;};return _cd ,nil ;};

// String returns a description of `state`.
func (_deeg *textState )String ()string {_cgce :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _deeg ._bgdd !=nil {_cgce =_deeg ._bgdd .BaseFont ();};return _a .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_deeg ._eegb ,_deeg ._ggfb ,_deeg ._bba ,_cgce );};type paraList []*textPara ;func _begd (_ggbg ,_ecd _bd .Point )rulingKind {_gcgbg :=_fe .Abs (_ggbg .X -_ecd .X );_faa :=_fe .Abs (_ggbg .Y -_ecd .Y );return _bgef (_gcgbg ,_faa ,_ebcf );};func _cegbf (_eedcf ,_bgbc _bd .Point )bool {_facef :=_fe .Abs (_eedcf .X -_bgbc .X );_agdc :=_fe .Abs (_eedcf .Y -_bgbc .Y );return _eggf (_facef ,_agdc );};func (_gefa *shapesState )quadraticTo (_deg ,_agcd ,_ccbe ,_cffb float64 ){if _dbbd {_ec .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");};_gefa .addPoint (_ccbe ,_cffb );};func (_begge paraList )findTextTables ()[]*textTable {var _edcf []*textTable ;for _ ,_bedba :=range _begge {if _bedba .taken ()||_bedba .Width ()==0{continue ;};_aedaa :=_bedba .isAtom ();if _aedaa ==nil {continue ;};_aedaa .growTable ();if _aedaa ._gaed *_aedaa ._fcge < _fbf {continue ;};_aedaa .markCells ();_aedaa .log ("\u0067\u0072\u006fw\u006e");_edcf =append (_edcf ,_aedaa );};return _edcf ;};func (_fcaba rectRuling )checkWidth (_gffb ,_deege float64 )(float64 ,bool ){_agbc :=_deege -_gffb ;_cddee :=_agbc <=_cebd ;return _agbc ,_cddee ;};func (_begdb *textTable )bbox ()_eea .PdfRectangle {return _begdb .PdfRectangle };func _cadag (_edegf ,_fbdec _bd .Point )bool {return _edegf .X ==_fbdec .X &&_edegf .Y ==_fbdec .Y };func (_degd *wordBag )allWords ()[]*textWord {var _aaeg []*textWord ;for _ ,_fag :=range _degd ._dfb {_aaeg =append (_aaeg ,_fag ...);};return _aaeg ;};func (_begb paraList )findTableGrid (_fdde gridTiling )(*textTable ,map[*textPara ]struct{}){_ceage :=len (_fdde ._gdaac );_cdddf :=len (_fdde ._fdga );_dbaa :=textTable {_cgfg :true ,_gaed :_ceage ,_fcge :_cdddf ,_beaaa :make (map[uint64 ]*textPara ,_ceage *_cdddf ),_adea :make (map[uint64 ]compositeCell ,_ceage *_cdddf )};_ccbg :=make (map[*textPara ]struct{});_dbfed :=int ((1.0-_gfad )*float64 (_ceage *_cdddf ));_aebee :=0;if _dddd {_ec .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_ceage ,_cdddf );};for _gbed ,_gcee :=range _fdde ._fdga {_ffgd ,_bbgf :=_fdde ._efecc [_gcee ];if !_bbgf {continue ;};for _feec ,_cccb :=range _fdde ._gdaac {_fagcf ,_gegg :=_ffgd [_cccb ];if !_gegg {continue ;};_dcgc :=_begb .inTile (_fagcf );if len (_dcgc )==0{_aebee ++;if _aebee > _dbfed {if _dddd {_ec .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_aebee );};return nil ,nil ;};}else {_dbaa .putComposite (_feec ,_gbed ,_dcgc ,_fagcf .PdfRectangle );for _ ,_fbfdd :=range _dcgc {_ccbg [_fbfdd ]=struct{}{};};};};};_bbac :=0;for _bdaab :=0;_bdaab < _ceage ;_bdaab ++{_dbgeef :=_dbaa .get (_bdaab ,0);if _dbgeef ==nil ||!_dbgeef ._dcge {_bbac ++;};};if _bbac ==0{if _dddd {_ec .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;};_acebd :=_dbaa .reduceTiling (_fdde ,_fcb );_acebd =_acebd .subdivide ();return _acebd ,_ccbg ;};func (_feagg paraList )applyTables (_efdcc []*textTable )paraList {_gffda :=make (map[*textPara ]struct{});var _aacb paraList ;for _ ,_gfed :=range _efdcc {for _ ,_egcag :=range _gfed ._beaaa {_gffda [_egcag ]=struct{}{};};_aacb =append (_aacb ,_gfed .newTablePara ());};for _ ,_cbddd :=range _feagg {if _ ,_dbdg :=_gffda [_cbddd ];!_dbdg {_aacb =append (_aacb ,_cbddd );};};return _aacb ;};func _ebag (_bffe ,_fcab bounded )float64 {_gcfb :=_eaef (_bffe ,_fcab );if !_caeg (_gcfb ){return _gcfb ;};return _gdfa (_bffe ,_fcab );};func _feg (_bcdg bounded )float64 {return -_bcdg .bbox ().Lly };func (_acg *shapesState )lineTo (_bbg ,_baba float64 ){if _dbbd {_ec .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_bbg ,_baba ,_acg .devicePoint (_bbg ,_baba ));};_acg .addPoint (_bbg ,_baba );};func _cbcea (_edgda []*textMark ,_caca _eea .PdfRectangle )[]*textWord {var _eaaf []*textWord ;var _fbad *textWord ;_fffe :=func (){if _fbad !=nil {_fgeff :=_fbad .computeText ();if !_dgdeg (_fgeff ){_fbad ._fcgd =_fgeff ;_eaaf =append (_eaaf ,_fbad );if _cdbd {_ec .Log .Info ("\u0077o\u0072\u0064\u003d\u0025\u0073",_fbad .String ());for _efcd ,_ddbg :=range _fbad ._dfgdg {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_efcd ,_ddbg .String ());};};};_fbad =nil ;};};for _ ,_cecbg :=range _edgda {if _ebd &&_fbad !=nil &&len (_fbad ._dfgdg )> 0{_bccba :=_fbad ._dfgdg [len (_fbad ._dfgdg )-1];_bffea ,_fefcc :=_dbgf (_cecbg ._cdca );_cadd ,_egge :=_dbgf (_bccba ._cdca );if _fefcc &&!_egge &&_bccba .inDiacriticArea (_cecbg ){_fbad .addDiacritic (_bffea );continue ;};if _egge &&!_fefcc &&_cecbg .inDiacriticArea (_bccba ){_fbad ._dfgdg =_fbad ._dfgdg [:len (_fbad ._dfgdg )-1];_fbad .appendMark (_cecbg ,_caca );_fbad .addDiacritic (_cadd );continue ;};};_gadge :=_dgdeg (_cecbg ._cdca );if _gadge {_fffe ();continue ;};if _fbad ==nil &&!_gadge {_fbad =_bedc ([]*textMark {_cecbg },_caca );continue ;};_gdab :=_fbad ._cagfe ;_fgdga :=_fe .Abs (_ffed (_caca ,_cecbg )-_fbad ._bbegf )/_gdab ;_egff :=_caf (_cecbg ,_fbad )/_gdab ;if _egff >=_gcgb ||!(-_bbfbaa <=_egff &&_fgdga <=_cdga ){_fffe ();_fbad =_bedc ([]*textMark {_cecbg },_caca );continue ;};_fbad .appendMark (_cecbg ,_caca );};_fffe ();return _eaaf ;};func (_beed *wordBag )minDepth ()float64 {return _beed ._ggcb -(_beed .Ury -_beed ._egdd )};func (_ddga *wordBag )depthIndexes ()[]int {if len (_ddga ._dfb )==0{return nil ;};_bdcg :=make ([]int ,len (_ddga ._dfb ));_aedd :=0;for _gfgd :=range _ddga ._dfb {_bdcg [_aedd ]=_gfgd ;_aedd ++;};_b .Ints (_bdcg );return _bdcg ;};func (_eaeb *textTable )put (_ggbfc ,_fbac int ,_aegfg *textPara ){_eaeb ._beaaa [_efgeb (_ggbfc ,_fbac )]=_aegfg ;};type bounded interface{bbox ()_eea .PdfRectangle };func _badf (_agfba ,_aee _eea .PdfRectangle )bool {return _gcdc (_agfba ,_aee )&&_bagc (_agfba ,_aee )};func (_ddda *shapesState )devicePoint (_bgce ,_ebfc float64 )_bd .Point {_cadg :=_ddda ._bfag .Mult (_ddda ._acd );_bgce ,_ebfc =_cadg .Transform (_bgce ,_ebfc );return _bd .NewPoint (_bgce ,_ebfc );};func (_febf *textPara )text ()string {_gfcga :=new (_gf .Buffer );_febf .writeText (_gfcga );return _gfcga .String ();};func (_ebddd intSet )has (_edcce int )bool {_ ,_bdae :=_ebddd [_edcce ];return _bdae };func (_fge *textObject )renderText (_bcac []byte )error {if _fge ._bfec {_ec .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");return nil ;};_agfb :=_fge .getCurrentFont ();_acac :=_agfb .BytesToCharcodes (_bcac );_ecbe ,_dbd ,_gga :=_agfb .CharcodesToStrings (_acac );if _gga > 0{_ec .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_dbd ,_gga );};_fge ._eafd ._bbab +=_dbd ;_fge ._eafd ._gdeb +=_gga ;_eeca :=_fge ._eafd ;_dfc :=_eeca ._bba ;_fdc :=_eeca ._bdg /100.0;_cbaa ,_dbed :=_agfb .GetRuneMetrics (' ');if !_dbed {_cbaa ,_dbed =_agfb .GetCharMetrics (32);};if !_dbed {_cbaa ,_ =_eea .DefaultFont ().GetRuneMetrics (' ');};_dgb :=_cbaa .Wx *_ecbc ;_ec .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_dgb ,_ecbe ,_agfb ,_dfc );_cdge :=_bd .NewMatrix (_dfc *_fdc ,0,0,_dfc ,0,_eeca ._bage );if _eefd {_ec .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_acac ),_acac ,_ecbe );};_ec .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_acac ),_acac ,len (_ecbe ));_aefad :=_fge .getFillColor ();_gdee :=_fge .getStrokeColor ();for _ggc ,_gcgg :=range _ecbe {_gcb :=[]rune (_gcgg );if len (_gcb )==1&&_gcb [0]=='\x00'{continue ;};_bdfd :=_acac [_ggc ];_bfa :=_fge ._edaa .CTM .Mult (_fge ._bfee ).Mult (_cdge );_dbb :=0.0;if len (_gcb )==1&&_gcb [0]==32{_dbb =_eeca ._ggfb ;};_bfaa ,_gbc :=_agfb .GetCharMetrics (_bdfd );if !_gbc {_ec .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_bdfd ,_gcb ,_gcb ,_agfb );return _a .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_agfb .String (),_bdfd );};_cfaf :=_bd .Point {X :_bfaa .Wx *_ecbc ,Y :_bfaa .Wy *_ecbc };_faf :=_bd .Point {X :(_cfaf .X *_dfc +_dbb )*_fdc };_eegba :=_bd .Point {X :(_cfaf .X *_dfc +_eeca ._eegb +_dbb )*_fdc };if _eefd {_ec .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_dfc ,_eeca ._eegb ,_eeca ._ggfb ,_fdc );_ec .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_cfaf ,_faf ,_eegba );};_gcfc :=_eagf (_faf );_cbgc :=_eagf (_eegba );_eecb :=_fge ._edaa .CTM .Mult (_fge ._bfee ).Mult (_gcfc );if _bdgea {_ec .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_fge ._edaa .CTM ,_fge ._bfee ,_cbgc ,_bdge (_fge ._edaa .CTM .Mult (_fge ._bfee ).Mult (_cbgc )),_gcfc ,_eecb ,_bdge (_eecb ));};_bae ,_egfd :=_fge .newTextMark (_af .ExpandLigatures (_gcb ),_bfa ,_bdge (_eecb ),_fe .Abs (_dgb *_bfa .ScalingFactorX ()),_agfb ,_fge ._eafd ._eegb ,_aefad ,_gdee );if !_egfd {_ec .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");continue ;};if _agfb ==nil {_ec .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _agfb .Encoder ()==nil {_ec .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_agfb );}else {if _deb ,_edgb :=_agfb .Encoder ().CharcodeToRune (_bdfd );_edgb {_bae ._ecec =string (_deb );};};_ec .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_ggc ,_bdfd ,_bae ,_bfa );_fge ._eaab =append (_fge ._eaab ,&_bae );_fge ._bfee .Concat (_cbgc );};return nil ;};

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_cdeab paraList )lines ()[]*textLine {var _edff []*textLine ;for _ ,_bgfb :=range _cdeab {_edff =append (_edff ,_bgfb ._gdfg ...);};return _edff ;};func _fbfe (_cfee string ,_bggc []rulingList ){_ec .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_bggc ),_cfee );for _cebfb ,_ddbd :=range _bggc {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_cebfb ,_ddbd .String ());};};func _egccfb (_gcgggg []_cc .PdfObject )(_aagbc ,_bgeb float64 ,_cfac error ){if len (_gcgggg )!=2{return 0,0,_a .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_gcgggg ));};_edac ,_cfac :=_cc .GetNumbersAsFloat (_gcgggg );if _cfac !=nil {return 0,0,_cfac ;};return _edac [0],_edac [1],nil ;};func (_gaad *shapesState )drawRectangle (_eff ,_gcgc ,_eedff ,_agcb float64 ){if _dbbd {_fgeg :=_gaad .devicePoint (_eff ,_gcgc );_efce :=_gaad .devicePoint (_eff +_eedff ,_gcgc +_agcb );_dgdf :=_eea .PdfRectangle {Llx :_fgeg .X ,Lly :_fgeg .Y ,Urx :_efce .X ,Ury :_efce .Y };_ec .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_dgdf );};_gaad .newSubPath ();_gaad .moveTo (_eff ,_gcgc );_gaad .lineTo (_eff +_eedff ,_gcgc );_gaad .lineTo (_eff +_eedff ,_gcgc +_agcb );_gaad .lineTo (_eff ,_gcgc +_agcb );_gaad .closePath ();};var _fcaf =map[markKind ]string {_eagg :"\u0073\u0074\u0072\u006f\u006b\u0065",_fcdf :"\u0066\u0069\u006c\u006c",_abed :"\u0061u\u0067\u006d\u0065\u006e\u0074"};func _eagf (_dbg _bd .Point )_bd .Matrix {return _bd .TranslationMatrix (_dbg .X ,_dbg .Y )};func (_gcggg rulingList )blocks (_fcgge ,_cgda *ruling )bool {if _fcgge ._adfg > _cgda ._gcge ||_cgda ._adfg > _fcgge ._gcge {return false ;};_fgdba :=_fe .Max (_fcgge ._adfg ,_cgda ._adfg );_aeddc :=_fe .Min (_fcgge ._gcge ,_cgda ._gcge );if _fcgge ._ffeg > _cgda ._ffeg {_fcgge ,_cgda =_cgda ,_fcgge ;};for _ ,_gaace :=range _gcggg {if _fcgge ._ffeg <=_gaace ._ffeg +_cebd &&_gaace ._ffeg <=_cgda ._ffeg +_cebd &&_gaace ._adfg <=_aeddc &&_fgdba <=_gaace ._gcge {return true ;};};return false ;};func (_cfcb rulingList )sort (){_b .Slice (_cfcb ,_cfcb .comp )};type shapesState struct{_acd _bd .Matrix ;_bfag _bd .Matrix ;_fbef []*subpath ;_gfg bool ;_fdgb _bd .Point ;_dbf *textObject ;};func (_agefb *textWord )bbox ()_eea .PdfRectangle {return _agefb .PdfRectangle };func (_fabgg gridTile )numBorders ()int {_ffbe :=0;if _fabgg ._ddbc {_ffbe ++;};if _fabgg ._cece {_ffbe ++;};if _fabgg ._bbbc {_ffbe ++;};if _fabgg ._cddd {_ffbe ++;};return _ffbe ;};type ruling struct{_accad rulingKind ;_bfgg markKind ;_eb .Color ;_ffeg float64 ;_adfg float64 ;_gcge float64 ;_cdcbb float64 ;};func (_ffcg *textTable )putComposite (_dgedf ,_eafbc int ,_deed paraList ,_afga _eea .PdfRectangle ){if len (_deed )==0{_ec .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");return ;};_fddd :=compositeCell {_afga ,_deed };if _egbb {_a .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_dgedf ,_eafbc ,_fddd .String ());};_fddd .updateBBox ();_ffcg ._adea [_efgeb (_dgedf ,_eafbc )]=_fddd ;};type subpath struct{_cbf []_bd .Point ;_acbg bool ;};func _ffed (_cegc _eea .PdfRectangle ,_bfea bounded )float64 {return _cegc .Ury -_bfea .bbox ().Lly };func (_dbgcd *wordBag )pullWord (_fecd *textWord ,_dfdgf int ,_addc map[int ]map[*textWord ]struct{}){_dbgcd .PdfRectangle =_gca (_dbgcd .PdfRectangle ,_fecd .PdfRectangle );if _fecd ._cagfe > _dbgcd ._egdd {_dbgcd ._egdd =_fecd ._cagfe ;};_dbgcd ._dfb [_dfdgf ]=append (_dbgcd ._dfb [_dfdgf ],_fecd );_addc [_dfdgf ][_fecd ]=struct{}{};};func (_bcf *textObject )showTextAdjusted (_da *_cc .PdfObjectArray )error {_gege :=false ;for _ ,_baf :=range _da .Elements (){switch _baf .(type ){case *_cc .PdfObjectFloat ,*_cc .PdfObjectInteger :_cge ,_fdg :=_cc .GetNumberAsFloat (_baf );if _fdg !=nil {_ec .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_baf ,_da );return _fdg ;};_acc ,_aad :=-_cge *0.001*_bcf ._eafd ._bba ,0.0;if _gege {_aad ,_acc =_acc ,_aad ;};_cde :=_eagf (_bd .Point {X :_acc ,Y :_aad });_bcf ._bfee .Concat (_cde );case *_cc .PdfObjectString :_aefg ,_gaag :=_cc .GetStringBytes (_baf );if !_gaag {_ec .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_baf ,_da );return _cc .ErrTypeError ;};_bcf .renderText (_aefg );default:_ec .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_baf ,_da );return _cc .ErrTypeError ;};};return nil ;};func (_fbda paraList )sortReadingOrder (){_ec .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_fbda ));if len (_fbda )<=1{return ;};_fbda .computeEBBoxes ();_b .Slice (_fbda ,func (_bfbf ,_bffgg int )bool {return _ebag (_fbda [_bfbf ],_fbda [_bffgg ])<=0});_eebc :=_fbda .topoOrder ();_fbda .reorder (_eebc );};const (_cdbd =false ;_abde =false ;_bdgea =false ;_dbbd =false ;_eefd =false ;_becfa =false ;_gbeba =false ;_ccdc =false ;_ebbg =_ccdc &&true ;_gcfa =_ebbg &&false ;_efff =_ccdc &&true ;_egbb =false ;_ecfcc =_egbb &&false ;_feffc =_egbb &&true ;_cfad =false ;_eeacg =_cfad &&false ;_cdf =_cfad &&false ;_dddd =_cfad &&true ;_fea =_cfad &&false ;_deaf =_cfad &&false ;);func (_abdbf paraList )yNeighbours (_ddgbe float64 )map[*textPara ][]int {_ddca :=make ([]event ,2*len (_abdbf ));if _ddgbe ==0{for _dgcb ,_cffgd :=range _abdbf {_ddca [2*_dgcb ]=event {_cffgd .Lly ,true ,_dgcb };_ddca [2*_dgcb +1]=event {_cffgd .Ury ,false ,_dgcb };};}else {for _ecaeb ,_dcff :=range _abdbf {_ddca [2*_ecaeb ]=event {_dcff .Lly -_ddgbe *_dcff .fontsize (),true ,_ecaeb };_ddca [2*_ecaeb +1]=event {_dcff .Ury +_ddgbe *_dcff .fontsize (),false ,_ecaeb };};};return _abdbf .eventNeighbours (_ddca );};func (_bdgeab *textWord )absorb (_bfefg *textWord ){_bdgeab .PdfRectangle =_gca (_bdgeab .PdfRectangle ,_bfefg .PdfRectangle );_bdgeab ._dfgdg =append (_bdgeab ._dfgdg ,_bfefg ._dfgdg ...);};func _ecef (_dcec *wordBag ,_fcccb *textWord ,_gdfee float64 )bool {return _fcccb .Llx < _dcec .Urx +_gdfee &&_dcec .Llx -_gdfee < _fcccb .Urx ;};func (_cebf *shapesState )cubicTo (_affb ,_gfb ,_caa ,_bebd ,_fca ,_fgeb float64 ){if _dbbd {_ec .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_cebf .addPoint (_fca ,_fgeb );};func (_ebf *textObject )setHorizScaling (_afdg float64 ){if _ebf ==nil {return ;};_ebf ._eafd ._bdg =_afdg ;};func (_gded *textObject )moveText (_eedf ,_dc float64 ){_gded .moveLP (_eedf ,_dc )};

// String returns a description of `w`.
func (_gcdbg *textWord )String ()string {return _a .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_gcdbg ._bbegf ,_gcdbg .PdfRectangle ,_gcdbg ._cagfe ,_gcdbg ._fcgd );};func (_bgfe *textMark )inDiacriticArea (_gbbd *textMark )bool {_aeg :=_bgfe .Llx -_gbbd .Llx ;_ffcd :=_bgfe .Urx -_gbbd .Urx ;_gbfa :=_bgfe .Lly -_gbbd .Lly ;return _fe .Abs (_aeg +_ffcd )< _bgfe .Width ()*_fbbf &&_fe .Abs (_gbfa )< _bgfe .Height ()*_fbbf ;};func _aceb (_gdba string )string {_gdfga :=[]rune (_gdba );return string (_gdfga [:len (_gdfga )-1])};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_efad *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_fa :=&imageExtractContext {_afg :options };_ga :=_fa .extractContentStreamImages (_efad ._fg ,_efad ._be );if _ga !=nil {return nil ,_ga ;};return &PageImages {Images :_fa ._db },nil ;};func _abag (_fcec _eea .PdfRectangle )*ruling {return &ruling {_accad :_dbfe ,_ffeg :_fcec .Ury ,_adfg :_fcec .Llx ,_gcge :_fcec .Urx };};func (_ffb *shapesState )fill (_dbbg *[]pathSection ){_gcdg :=pathSection {_bbe :_ffb ._fbef ,Color :_ffb ._dbf .getFillColor ()};*_dbbg =append (*_dbbg ,_gcdg );if _cfad {_bac :=_gcdg .bbox ();_a .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_dbbg ),len (_gcdg ._bbe ),_ffb ,_gcdg .Color ,_bac ,_bac .Width (),_bac .Height ());if _eeacg {for _adaf ,_aab :=range _gcdg ._bbe {_a .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_adaf ,_aab );if _adaf ==10{break ;};};};};};func (_ebfac paraList )eventNeighbours (_gffa []event )map[*textPara ][]int {_b .Slice (_gffa ,func (_gbaab ,_acgga int )bool {_afgbg ,_fffbb :=_gffa [_gbaab ],_gffa [_acgga ];_gebc ,_eedd :=_afgbg ._gggg ,_fffbb ._gggg ;if _gebc !=_eedd {return _gebc < _eedd ;};if _afgbg ._bdbfd !=_fffbb ._bdbfd {return _afgbg ._bdbfd ;};return _gbaab < _acgga ;});_beaad :=make (map[int ]intSet );_fcff :=make (intSet );for _ ,_baacg :=range _gffa {if _baacg ._bdbfd {_beaad [_baacg ._bdeca ]=make (intSet );for _fgegc :=range _fcff {if _fgegc !=_baacg ._bdeca {_beaad [_baacg ._bdeca ].add (_fgegc );_beaad [_fgegc ].add (_baacg ._bdeca );};};_fcff .add (_baacg ._bdeca );}else {_fcff .del (_baacg ._bdeca );};};_cecg :=map[*textPara ][]int {};for _cfec ,_edec :=range _beaad {_gedd :=_ebfac [_cfec ];if len (_edec )==0{_cecg [_gedd ]=nil ;continue ;};_feecc :=make ([]int ,len (_edec ));_gdeaa :=0;for _gfbf :=range _edec {_feecc [_gdeaa ]=_gfbf ;_gdeaa ++;};_cecg [_gedd ]=_feecc ;};return _cecg ;};func _acdg (_gagb ,_dff *textPara )bool {if _gagb ._dcge ||_dff ._dcge {return true ;};return _caeg (_gagb .depth ()-_dff .depth ());};type textLine struct{_eea .PdfRectangle ;_fbae float64 ;_aafd []*textWord ;_cdbc float64 ;};func (_bda *textObject )nextLine (){_bda .moveLP (0,-_bda ._eafd ._edc )};func (_egfc *textLine )endsInHyphen ()bool {_bageb :=_egfc ._aafd [len (_egfc ._aafd )-1];_dfdgb :=_bageb ._fcgd ;_dgbae ,_gaca :=_f .DecodeLastRuneInString (_dfdgb );if _gaca <=0||!_g .Is (_g .Hyphen ,_dgbae ){return false ;};if _bageb ._fdcc &&_dggg (_dfdgb ){return true ;};return _dggg (_egfc .text ());};func _gbbg (_baddc map[int ][]float64 ){if len (_baddc )<=1{return ;};_ggga :=_cccgg (_baddc );if _egbb {_ec .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_ggga );};var _aaedc ,_egfg int ;for _aaedc ,_egfg =range _ggga {if _baddc [_egfg ]!=nil {break ;};};for _eaaef ,_aebe :=range _ggga [_aaedc :]{_egaa :=_baddc [_aebe ];if _egaa ==nil {continue ;};if _egbb {_a .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_aaedc +_eaaef ,_egfg ,_aebe );};_egea :=_baddc [_aebe ];if _egea [len (_egea )-1]> _egaa [0]{_egea [len (_egea )-1]=_egaa [0];_baddc [_egfg ]=_egea ;};_egfg =_aebe ;};};func (_affab *textTable )toTextTable ()TextTable {if _egbb {_ec .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_affab ._gaed ,_affab ._fcge );};_efgc :=make ([][]TableCell ,_affab ._fcge );for _dffe :=0;_dffe < _affab ._fcge ;_dffe ++{_efgc [_dffe ]=make ([]TableCell ,_affab ._gaed );for _adae :=0;_adae < _affab ._gaed ;_adae ++{_gbdfe :=_affab .get (_adae ,_dffe );if _gbdfe ==nil {continue ;};if _egbb {_a .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_adae ,_dffe ,_gbdfe );};_efgc [_dffe ][_adae ].Text =_gbdfe .text ();_cgfa :=0;_efgc [_dffe ][_adae ].Marks ._bcff =_gbdfe .toTextMarks (&_cgfa );};};return TextTable {W :_affab ._gaed ,H :_affab ._fcge ,Cells :_efgc };};func (_beef *shapesState )newSubPath (){_beef .clearPath ();if _dbbd {_ec .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_beef );};};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_bcad *ruling )encloses (_acdgf ,_gefd float64 )bool {return _bcad ._adfg -_cgab <=_acdgf &&_gefd <=_bcad ._gcge +_cgab ;};

// String returns a description of `k`.
func (_ddgbb markKind )String ()string {_fgdg ,_ccga :=_fcaf [_ddgbb ];if !_ccga {return _a .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_ddgbb );};return _fgdg ;};func (_fgaa *wordBag )maxDepth ()float64 {return _fgaa ._ggcb -_fgaa .Lly };func (_acag rulingList )augmentGrid ()(rulingList ,rulingList ){_dfea ,_gefg :=_acag .vertsHorzs ();if len (_dfea )==0||len (_gefg )==0{return _dfea ,_gefg ;};_afdf ,_dcfb :=_dfea ,_gefg ;_gdgf :=_dfea .bbox ();_ccbf :=_gefg .bbox ();if _cfad {_ec .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_gdgf );_ec .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_ccbf );};var _gdfaa ,_dbbc ,_ddcee ,_gegc *ruling ;if _ccbf .Llx < _gdgf .Llx -_cgab {_gdfaa =&ruling {_bfgg :_abed ,_accad :_bedb ,_ffeg :_ccbf .Llx ,_adfg :_gdgf .Lly ,_gcge :_gdgf .Ury };_dfea =append (rulingList {_gdfaa },_dfea ...);};if _ccbf .Urx > _gdgf .Urx +_cgab {_dbbc =&ruling {_bfgg :_abed ,_accad :_bedb ,_ffeg :_ccbf .Urx ,_adfg :_gdgf .Lly ,_gcge :_gdgf .Ury };_dfea =append (_dfea ,_dbbc );};if _gdgf .Lly < _ccbf .Lly -_cgab {_ddcee =&ruling {_bfgg :_abed ,_accad :_dbfe ,_ffeg :_gdgf .Lly ,_adfg :_ccbf .Llx ,_gcge :_ccbf .Urx };_gefg =append (rulingList {_ddcee },_gefg ...);};if _gdgf .Ury > _ccbf .Ury +_cgab {_gegc =&ruling {_bfgg :_abed ,_accad :_dbfe ,_ffeg :_gdgf .Ury ,_adfg :_ccbf .Llx ,_gcge :_ccbf .Urx };_gefg =append (_gefg ,_gegc );};if len (_dfea )+len (_gefg )==len (_acag ){return _afdf ,_dcfb ;};_cbff :=append (_dfea ,_gefg ...);_acag .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_cbff .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");return _dfea ,_gefg ;};

// Append appends `mark` to the mark array.
func (_cgfe *TextMarkArray )Append (mark TextMark ){_cgfe ._bcff =append (_cgfe ._bcff ,mark )};var _cce =false ;func _dgf (_ccfa func (*wordBag ,*textWord ,float64 )bool ,_gacc float64 )func (*wordBag ,*textWord )bool {return func (_fcda *wordBag ,_cca *textWord )bool {return _ccfa (_fcda ,_cca ,_gacc )};};