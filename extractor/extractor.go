//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

//
// Package extractor is used for quickly extracting PDF content through a simple interface.
// Currently offers functionality for extracting textual content.
//
package extractor ;import (_ff "bytes";_de "errors";_bf "fmt";_dc "github.com/unidoc/unipdf/v3/common";_a "github.com/unidoc/unipdf/v3/contentstream";_cc "github.com/unidoc/unipdf/v3/core";_ec "github.com/unidoc/unipdf/v3/internal/license";_ef "github.com/unidoc/unipdf/v3/internal/textencoding";
_gd "github.com/unidoc/unipdf/v3/internal/transform";_fa "github.com/unidoc/unipdf/v3/model";_fg "golang.org/x/text/unicode/norm";_dcf "golang.org/x/xerrors";_b "image/color";_fc "io";_gf "math";_f "regexp";_g "sort";_ce "strings";_c "unicode";_e "unicode/utf8";
);func (_accda *textTable )isExportable ()bool {if _accda ._dfgeg {return true ;};_gcdef :=func (_ddbfg int )bool {_ggeb :=_accda .get (0,_ddbfg );if _ggeb ==nil {return false ;};_cgag :=_ggeb .text ();_cbfgd :=_e .RuneCountInString (_cgag );_ffgf :=_aefc .MatchString (_cgag );
return _cbfgd <=1||_ffgf ;};for _acgbf :=0;_acgbf < _accda ._fcga ;_acgbf ++{if !_gcdef (_acgbf ){return true ;};};return false ;};func (_bffb paraList )writeText (_fgb _fc .Writer ){for _fagg ,_bgad :=range _bffb {if _bgad ._cedecf {continue ;};_bgad .writeText (_fgb );
if _fagg !=len (_bffb )-1{if _afgg (_bgad ,_bffb [_fagg +1]){_fgb .Write ([]byte ("\u0020"));}else {_fgb .Write ([]byte ("\u000a"));_fgb .Write ([]byte ("\u000a"));};};};_fgb .Write ([]byte ("\u000a"));_fgb .Write ([]byte ("\u000a"));};func (_bbafd *wordBag )firstReadingIndex (_fdag int )int {_gged :=_bbafd .firstWord (_fdag )._fggb ;
_daag :=float64 (_fdag +1)*_gff ;_dgfg :=_daag +_bgeg *_gged ;_agfa :=_fdag ;for _ ,_dede :=range _bbafd .depthBand (_daag ,_dgfg ){if _gccf (_bbafd .firstWord (_dede ),_bbafd .firstWord (_agfa ))< 0{_agfa =_dede ;};};return _agfa ;};func (_ccfbc *textTable )depth ()float64 {_gfad :=1e10;
for _egcd :=0;_egcd < _ccfbc ._dffbb ;_egcd ++{_edff :=_ccfbc .get (_egcd ,0);if _edff ==nil ||_edff ._cedecf {continue ;};_gfad =_gf .Min (_gfad ,_edff .depth ());};return _gfad ;};func _gbcd (_dabe []*wordBag )[]*wordBag {if len (_dabe )<=1{return _dabe ;
};if _aefb {_dc .Log .Info ("\u006d\u0065\u0072\u0067\u0065\u0057\u006f\u0072\u0064B\u0061\u0067\u0073\u003a");};_g .Slice (_dabe ,func (_gege ,_fggfa int )bool {_dcfg ,_degc :=_dabe [_gege ],_dabe [_fggfa ];_cadd :=_dcfg .Width ()*_dcfg .Height ();_aecb :=_degc .Width ()*_degc .Height ();
if _cadd !=_aecb {return _cadd > _aecb ;};if _dcfg .Height ()!=_degc .Height (){return _dcfg .Height ()> _degc .Height ();};return _gege < _fggfa ;});var _cefdd []*wordBag ;_afce :=make (intSet );for _bdcg :=0;_bdcg < len (_dabe );_bdcg ++{if _afce .has (_bdcg ){continue ;
};_fddf :=_dabe [_bdcg ];for _bgbd :=_bdcg +1;_bgbd < len (_dabe );_bgbd ++{if _afce .has (_bdcg ){continue ;};_fbab :=_dabe [_bgbd ];_bafe :=_fddf .PdfRectangle ;_bafe .Llx -=_fddf ._cabe ;if _cgab (_bafe ,_fbab .PdfRectangle ){_fddf .absorb (_fbab );
_afce .add (_bgbd );};};_cefdd =append (_cefdd ,_fddf );};if len (_dabe )!=len (_cefdd )+len (_afce ){_dc .Log .Error ("\u006d\u0065\u0072ge\u0057\u006f\u0072\u0064\u0042\u0061\u0067\u0073\u003a \u0025d\u2192%\u0064 \u0061\u0062\u0073\u006f\u0072\u0062\u0065\u0064\u003d\u0025\u0064",len (_dabe ),len (_cefdd ),len (_afce ));
};return _cefdd ;};func (_edfbg *textTable )getComposite (_dbcad ,_bbbfd int )(paraList ,_fa .PdfRectangle ){_eeadc ,_egfab :=_edfbg ._eagcd [_bfbbab (_dbcad ,_bbbfd )];if _cgee {_bf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0067\u0065\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u002d\u003e\u0025\u0073\u000a",_dbcad ,_bbbfd ,_eeadc .String ());
};if !_egfab {return nil ,_fa .PdfRectangle {};};return _eeadc .parasBBox ();};func (_gaegb rulingList )snapToGroups ()rulingList {_ggabg ,_eafge :=_gaegb .vertsHorzs ();if len (_ggabg )> 0{_ggabg =_ggabg .snapToGroupsDirection ();};if len (_eafge )> 0{_eafge =_eafge .snapToGroupsDirection ();
};_ccbe :=append (_ggabg ,_eafge ...);_ccbe .log ("\u0073\u006e\u0061p\u0054\u006f\u0047\u0072\u006f\u0075\u0070\u0073");return _ccbe ;};func (_cceg *textObject )getStrokeColor ()_b .Color {return _afccc (_cceg ._cdd .ColorspaceStroking ,_cceg ._cdd .ColorStroking );
};func (_dbaaa paraList )log (_bfca string ){if !_ebcc {return ;};_dc .Log .Info ("%\u0038\u0073\u003a\u0020\u0025\u0064 \u0070\u0061\u0072\u0061\u0073\u0020=\u003d\u003d\u003d\u003d\u003d\u003d\u002d-\u002d\u002d\u002d\u002d\u002d\u003d\u003d\u003d\u003d\u003d=\u003d",_bfca ,len (_dbaaa ));
for _gcgg ,_gfed :=range _dbaaa {if _gfed ==nil {continue ;};_bfaeg :=_gfed .text ();_ffdd :="\u0020\u0020";if _gfed ._afcc !=nil {_ffdd =_bf .Sprintf ("\u005b%\u0064\u0078\u0025\u0064\u005d",_gfed ._afcc ._dffbb ,_gfed ._afcc ._fcga );};_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0025s\u0020\u0025\u0071\u000a",_gcgg ,_gfed .PdfRectangle ,_ffdd ,_ababa (_bfaeg ,50));
};};type textObject struct{_bccg *Extractor ;_cbdg *_fa .PdfPageResources ;_cdd _a .GraphicsState ;_cde *textState ;_becd *stateStack ;_gfgc _gd .Matrix ;_gcd _gd .Matrix ;_abgbf []*textMark ;_cggc bool ;};

// BBox returns the smallest axis-aligned rectangle that encloses all the TextMarks in `ma`.
func (_adfe *TextMarkArray )BBox ()(_fa .PdfRectangle ,bool ){var _egbe _fa .PdfRectangle ;_aebec :=false ;for _ ,_edag :=range _adfe ._gaea {if _edag .Meta ||_eaba (_edag .Text ){continue ;};if _aebec {_egbe =_bfbbb (_egbe ,_edag .BBox );}else {_egbe =_edag .BBox ;
_aebec =true ;};};return _egbe ,_aebec ;};func (_cacfd paraList )findTextTables ()[]*textTable {var _dcgf []*textTable ;for _ ,_eegbe :=range _cacfd {if _eegbe .taken ()||_eegbe .Width ()==0{continue ;};_gbde :=_eegbe .isAtom ();if _gbde ==nil {continue ;
};_gbde .growTable ();if _gbde ._dffbb *_gbde ._fcga < _aggf {continue ;};_gbde .markCells ();_gbde .log ("\u0067\u0072\u006fw\u006e");_dcgf =append (_dcgf ,_gbde );};return _dcgf ;};func (_ecbec *textTable )get (_edcfd ,_fgaaa int )*textPara {return _ecbec ._bfab [_bfbbab (_edcfd ,_fgaaa )];
};func (_fcb *textObject )showTextAdjusted (_degbg *_cc .PdfObjectArray )error {_dae :=false ;for _ ,_ggg :=range _degbg .Elements (){switch _ggg .(type ){case *_cc .PdfObjectFloat ,*_cc .PdfObjectInteger :_afe ,_edc :=_cc .GetNumberAsFloat (_ggg );if _edc !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004fR\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078t\u0041\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0042\u0061\u0064\u0020\u006e\u0075\u006d\u0065r\u0069\u0063\u0061\u006c\u0020a\u0072\u0067\u002e\u0020\u006f\u003d\u0025\u0073\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggg ,_degbg );
return _edc ;};_ddba ,_edb :=-_afe *0.001*_fcb ._cde ._gae ,0.0;if _dae {_edb ,_ddba =_ddba ,_edb ;};_abgb :=_adgc (_gd .Point {X :_ddba ,Y :_edb });_fcb ._gfgc .Concat (_abgb );case *_cc .PdfObjectString :_ffba ,_dgee :=_cc .GetStringBytes (_ggg );if !_dgee {_dc .Log .Trace ("s\u0068\u006f\u0077\u0054\u0065\u0078\u0074\u0041\u0064j\u0075\u0073\u0074\u0065\u0064\u003a\u0020Ba\u0064\u0020\u0073\u0074r\u0069\u006e\u0067\u0020\u0061\u0072\u0067\u002e\u0020o=\u0025\u0073 \u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggg ,_degbg );
return _cc .ErrTypeError ;};_fcb .renderText (_ffba );default:_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0073\u0068\u006f\u0077\u0054\u0065\u0078\u0074A\u0064\u006a\u0075\u0073\u0074\u0065\u0064\u002e\u0020\u0055\u006e\u0065\u0078p\u0065\u0063\u0074\u0065\u0064\u0020\u0074\u0079\u0070\u0065\u0020\u0028%T\u0029\u0020\u0061\u0072\u0067\u0073\u003d\u0025\u002b\u0076",_ggg ,_degbg );
return _cc .ErrTypeError ;};};return nil ;};func _bdfee (_bffd ,_ffga _fa .PdfRectangle )bool {return _ffga .Llx <=_bffd .Urx &&_bffd .Llx <=_ffga .Urx ;};

// String returns a human readable description of `vecs`.
func (_effc rulingList )String ()string {if len (_effc )==0{return "\u007b \u0045\u004d\u0050\u0054\u0059\u0020}";};_ccfaa ,_addec :=_effc .vertsHorzs ();_ecd :=len (_ccfaa );_cebee :=len (_addec );if _ecd ==0||_cebee ==0{return _bf .Sprintf ("\u007b%\u0064\u0020\u0078\u0020\u0025\u0064}",_ecd ,_cebee );
};_dbcd :=_fa .PdfRectangle {Llx :_ccfaa [0]._edga ,Urx :_ccfaa [_ecd -1]._edga ,Lly :_addec [_cebee -1]._edga ,Ury :_addec [0]._edga };return _bf .Sprintf ("\u007b\u0025d\u0020\u0078\u0020%\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u007d",_ecd ,_cebee ,_dbcd );
};func (_gaef paraList )topoOrder ()[]int {if _ebcc {_dc .Log .Info ("\u0074\u006f\u0070\u006f\u004f\u0072\u0064\u0065\u0072\u003a");};_efeba :=len (_gaef );_febf :=make ([]bool ,_efeba );_badae :=make ([]int ,0,_efeba );_gedbe :=_gaef .llyOrdering ();
var _edad func (_bebe int );_edad =func (_afaf int ){_febf [_afaf ]=true ;for _fgfd :=0;_fgfd < _efeba ;_fgfd ++{if !_febf [_fgfd ]{if _gaef .readBefore (_gedbe ,_afaf ,_fgfd ){_edad (_fgfd );};};};_badae =append (_badae ,_afaf );};for _efcg :=0;_efcg < _efeba ;
_efcg ++{if !_febf [_efcg ]{_edad (_efcg );};};return _beef (_badae );};

// Elements returns the TextMarks in `ma`.
func (_cage *TextMarkArray )Elements ()[]TextMark {return _cage ._gaea };func (_cfee *stateStack )top ()*textState {if _cfee .empty (){return nil ;};return (*_cfee )[_cfee .size ()-1];};func _aedf (_eabb map[int ][]float64 ){if len (_eabb )<=1{return ;
};_aecac :=_bafae (_eabb );if _cgee {_dc .Log .Info ("\u0066i\u0078C\u0065\u006c\u006c\u0073\u003a \u006b\u0065y\u0073\u003d\u0025\u002b\u0076",_aecac );};var _fdcf ,_dgcee int ;for _fdcf ,_dgcee =range _aecac {if _eabb [_dgcee ]!=nil {break ;};};for _gcfg ,_fadf :=range _aecac [_fdcf :]{_fefcf :=_eabb [_fadf ];
if _fefcf ==nil {continue ;};if _cgee {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u006b\u0030\u003d\u0025\u0064\u0020\u006b1\u003d\u0025\u0064\u000a",_fdcf +_gcfg ,_dgcee ,_fadf );};_bffe :=_eabb [_fadf ];if _bffe [len (_bffe )-1]> _fefcf [0]{_bffe [len (_bffe )-1]=_fefcf [0];
_eabb [_dgcee ]=_bffe ;};_dgcee =_fadf ;};};func (_bedf rulingList )sortStrict (){_g .Slice (_bedf ,func (_dcfada ,_ddabc int )bool {_gefe ,_cedc :=_bedf [_dcfada ],_bedf [_ddabc ];_ffaf ,_dffec :=_gefe ._bbac ,_cedc ._bbac ;if _ffaf !=_dffec {return _ffaf > _dffec ;
};_egcbd ,_ceafa :=_gefe ._edga ,_cedc ._edga ;if !_bffed (_egcbd -_ceafa ){return _egcbd < _ceafa ;};_egcbd ,_ceafa =_gefe ._cbedg ,_cedc ._cbedg ;if _egcbd !=_ceafa {return _egcbd < _ceafa ;};return _gefe ._egcbb < _cedc ._egcbb ;});};func _bade (_gbac _fa .PdfRectangle )*ruling {return &ruling {_bbac :_bffc ,_edga :_gbac .Urx ,_cbedg :_gbac .Lly ,_egcbb :_gbac .Ury };
};func _gdg (_dfag []pathSection )rulingList {_gfbaf (_dfag );if _bbde {_dc .Log .Info ("\u006da\u006b\u0065\u0046\u0069l\u006c\u0052\u0075\u006c\u0069n\u0067s\u003a \u0025\u0064\u0020\u0066\u0069\u006c\u006cs",len (_dfag ));};var _bbbf rulingList ;for _ ,_bbeb :=range _dfag {for _ ,_ebbbg :=range _bbeb ._ffda {if !_ebbbg .isQuadrilateral (){if _bbde {_dc .Log .Error ("!\u0069s\u0051\u0075\u0061\u0064\u0072\u0069\u006c\u0061t\u0065\u0072\u0061\u006c: \u0025\u0073",_ebbbg );
};continue ;};if _ebag ,_dcge :=_ebbbg .makeRectRuling (_bbeb .Color );_dcge {_bbbf =append (_bbbf ,_ebag );}else {if _badac {_dc .Log .Error ("\u0021\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0073",_ebbbg );
};};};};if _bbde {_dc .Log .Info ("\u006d\u0061\u006b\u0065Fi\u006c\u006c\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0073",_bbbf .String ());};return _bbbf ;};func (_fcdg *textTable )computeBbox ()_fa .PdfRectangle {var _gfcb _fa .PdfRectangle ;
_dgaf :=false ;for _fgebc :=0;_fgebc < _fcdg ._fcga ;_fgebc ++{for _fdbdec :=0;_fdbdec < _fcdg ._dffbb ;_fdbdec ++{_fgfb :=_fcdg .get (_fdbdec ,_fgebc );if _fgfb ==nil {continue ;};if !_dgaf {_gfcb =_fgfb .PdfRectangle ;_dgaf =true ;}else {_gfcb =_bfbbb (_gfcb ,_fgfb .PdfRectangle );
};};};return _gfcb ;};func _gbg (_gbgd []TextMark ,_cafg *int ,_dfba string )[]TextMark {_cedec :=_bace ;_cedec .Text =_dfba ;return _gfff (_gbgd ,_cafg ,_cedec );};func (_ccde rulingList )tidied (_gcbfe string )rulingList {_fbfc :=_ccde .removeDuplicates ();
_fbfc .log ("\u0075n\u0069\u0071\u0075\u0065\u0073");_bbbe :=_fbfc .snapToGroups ();if _bbbe ==nil {return nil ;};_bbbe .sort ();if _bbde {_dc .Log .Info ("\u0074\u0069\u0064i\u0065\u0064\u003a\u0020\u0025\u0071\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u0075\u006e\u0069\u0071\u0075\u0065\u0073\u003d\u0025\u0064\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0064\u003d\u0025\u0064",_gcbfe ,len (_ccde ),len (_fbfc ),len (_bbbe ));
};_bbbe .log ("\u0063o\u0061\u006c\u0065\u0073\u0063\u0065d");return _bbbe ;};

// String returns a string describing the current state of the textState stack.
func (_ddab *stateStack )String ()string {_dabc :=[]string {_bf .Sprintf ("\u002d\u002d\u002d\u002d f\u006f\u006e\u0074\u0020\u0073\u0074\u0061\u0063\u006b\u003a\u0020\u0025\u0064",len (*_ddab ))};for _dbe ,_bbb :=range *_ddab {_eca :="\u003c\u006e\u0069l\u003e";
if _bbb !=nil {_eca =_bbb .String ();};_dabc =append (_dabc ,_bf .Sprintf ("\u0009\u0025\u0032\u0064\u003a\u0020\u0025\u0073",_dbe ,_eca ));};return _ce .Join (_dabc ,"\u000a");};func _agbb (_gecd _gd .Point )*subpath {return &subpath {_bdea :[]_gd .Point {_gecd }}};
type textState struct{_ecad float64 ;_egg float64 ;_cfc float64 ;_gfb float64 ;_gae float64 ;_ddbd RenderMode ;_bbfc float64 ;_accb *_fa .PdfFont ;_eac _fa .PdfRectangle ;_ggc int ;_ebeb int ;};func _affff (_egfae ,_ddefb int )int {if _egfae > _ddefb {return _egfae ;
};return _ddefb ;};func (_bfag *wordBag )pullWord (_egea *textWord ,_ddeg int ,_bdda map[int ]map[*textWord ]struct{}){_bfag .PdfRectangle =_bfbbb (_bfag .PdfRectangle ,_egea .PdfRectangle );if _egea ._fggb > _bfag ._cabe {_bfag ._cabe =_egea ._fggb ;};
_bfag ._cfcc [_ddeg ]=append (_bfag ._cfcc [_ddeg ],_egea );_bdda [_ddeg ][_egea ]=struct{}{};};func _gaab (_dffe bounded )float64 {return -_dffe .bbox ().Lly };func _fccf (_cdcfe *wordBag ,_aabe int )*textLine {_egcc :=_cdcfe .firstWord (_aabe );_befd :=textLine {PdfRectangle :_egcc .PdfRectangle ,_adad :_egcc ._fggb ,_bgac :_egcc ._aabad };
_befd .pullWord (_cdcfe ,_egcc ,_aabe );return &_befd ;};func (_ggbf rulingList )findPrimSec (_dbga ,_affe float64 )*ruling {for _ ,_cacb :=range _ggbf {if _bffed (_cacb ._edga -_dbga )&&_cacb ._cbedg -_degbe <=_affe &&_affe <=_cacb ._egcbb +_degbe {return _cacb ;
};};return nil ;};func (_egee *textPara )writeText (_becgg _fc .Writer ){if _egee ._afcc ==nil {_egee .writeCellText (_becgg );return ;};for _dffcg :=0;_dffcg < _egee ._afcc ._fcga ;_dffcg ++{for _cdaf :=0;_cdaf < _egee ._afcc ._dffbb ;_cdaf ++{_fbce :=_egee ._afcc .get (_cdaf ,_dffcg );
if _fbce ==nil {_becgg .Write ([]byte ("\u0009"));}else {_fbce .writeCellText (_becgg );};_becgg .Write ([]byte ("\u0020"));};if _dffcg < _egee ._afcc ._fcga -1{_becgg .Write ([]byte ("\u000a"));};};};func _bafae (_bfba map[int ][]float64 )[]int {_bdaf :=make ([]int ,len (_bfba ));
_afbf :=0;for _faad :=range _bfba {_bdaf [_afbf ]=_faad ;_afbf ++;};_g .Ints (_bdaf );return _bdaf ;};func (_ceeec rectRuling )checkWidth (_fdgec ,_deecf float64 )(float64 ,bool ){_dfee :=_deecf -_fdgec ;_gaeb :=_dfee <=_eaab ;return _dfee ,_gaeb ;};func (_adfef *shapesState )drawRectangle (_bee ,_ddc ,_dde ,_dcda float64 ){if _ffde {_bfed :=_adfef .devicePoint (_bee ,_ddc );
_fed :=_adfef .devicePoint (_bee +_dde ,_ddc +_dcda );_aeaa :=_fa .PdfRectangle {Llx :_bfed .X ,Lly :_bfed .Y ,Urx :_fed .X ,Ury :_fed .Y };_dc .Log .Info ("d\u0072a\u0077\u0052\u0065\u0063\u0074\u0061\u006e\u0067l\u0065\u003a\u0020\u00256.\u0032\u0066",_aeaa );
};_adfef .newSubPath ();_adfef .moveTo (_bee ,_ddc );_adfef .lineTo (_bee +_dde ,_ddc );_adfef .lineTo (_bee +_dde ,_ddc +_dcda );_adfef .lineTo (_bee ,_ddc +_dcda );_adfef .closePath ();};func (_dfg *textObject )setHorizScaling (_ffae float64 ){if _dfg ==nil {return ;
};_dfg ._cde ._cfc =_ffae ;};func (_efbb *textTable )log (_fdcc string ){if !_cgee {return ;};_dc .Log .Info ("~\u007e\u007e\u0020\u0025\u0073\u003a \u0025\u0064\u0020\u0078\u0020\u0025d\u0020\u0067\u0072\u0069\u0064\u003d\u0025t\u000a\u0020\u0020\u0020\u0020\u0020\u0020\u0025\u0036\u002e2\u0066",_fdcc ,_efbb ._dffbb ,_efbb ._fcga ,_efbb ._dfgeg ,_efbb .PdfRectangle );
for _fbdc :=0;_fbdc < _efbb ._fcga ;_fbdc ++{for _ffebc :=0;_ffebc < _efbb ._dffbb ;_ffebc ++{_cbgfa :=_efbb .get (_ffebc ,_fbdc );if _cbgfa ==nil {continue ;};_bf .Printf ("%\u0034\u0064\u0020\u00252d\u003a \u0025\u0036\u002e\u0032\u0066 \u0025\u0071\u0020\u0025\u0064\u000a",_ffebc ,_fbdc ,_cbgfa .PdfRectangle ,_ababa (_cbgfa .text (),50),_e .RuneCountInString (_cbgfa .text ()));
};};};func (_daea *wordBag )sort (){for _ ,_edce :=range _daea ._cfcc {_g .Slice (_edce ,func (_bcca ,_gfea int )bool {return _gccf (_edce [_bcca ],_edce [_gfea ])< 0});};};func _bfbbb (_ffc ,_cfg _fa .PdfRectangle )_fa .PdfRectangle {return _fa .PdfRectangle {Llx :_gf .Min (_ffc .Llx ,_cfg .Llx ),Lly :_gf .Min (_ffc .Lly ,_cfg .Lly ),Urx :_gf .Max (_ffc .Urx ,_cfg .Urx ),Ury :_gf .Max (_ffc .Ury ,_cfg .Ury )};
};func _fbfdd (_befdf _fa .PdfRectangle )*ruling {return &ruling {_bbac :_cbaaf ,_edga :_befdf .Ury ,_cbedg :_befdf .Llx ,_egcbb :_befdf .Urx };};func (_bad *textObject )setCharSpacing (_egc float64 ){if _bad ==nil {return ;};_bad ._cde ._ecad =_egc ;if _adca {_dc .Log .Info ("\u0073\u0065t\u0043\u0068\u0061\u0072\u0053\u0070\u0061\u0063\u0069\u006e\u0067\u003a\u0020\u0025\u002e\u0032\u0066\u0020\u0073\u0074\u0061\u0074e=\u0025\u0073",_egc ,_bad ._cde .String ());
};};func _bfbbab (_ffaed ,_fdgg int )uint64 {return uint64 (_ffaed )*0x1000000+uint64 (_fdgg )};func _fdbd (_gdde ,_efab _gd .Point )rulingKind {_ccfb :=_gf .Abs (_gdde .X -_efab .X );_dgdb :=_gf .Abs (_gdde .Y -_efab .Y );return _bfcd (_ccfb ,_dgdb ,_bbfg );
};

// String returns a human readable description of `ss`.
func (_fcdf *shapesState )String ()string {return _bf .Sprintf ("\u007b\u0025\u0064\u0020su\u0062\u0070\u0061\u0074\u0068\u0073\u0020\u0066\u0072\u0065\u0073\u0068\u003d\u0025t\u007d",len (_fcdf ._cafd ),_fcdf ._ebeg );};type rulingKind int ;func _efcc (_cadg ,_cgfd _gd .Point )rulingKind {_gebc :=_gf .Abs (_cadg .X -_cgfd .X );
_gcaa :=_gf .Abs (_cadg .Y -_cgfd .Y );return _bfcd (_gebc ,_gcaa ,_gdddd );};var (_dee =_de .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");_ea =_de .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072");
);func (_bbed *textPara )writeCellText (_ecbf _fc .Writer ){for _cbfe ,_dcee :=range _bbed ._dcdd {_eefdc :=_dcee .text ();_dbdf :=_age &&_dcee .endsInHyphen ()&&_cbfe !=len (_bbed ._dcdd )-1;if _dbdf {_eefdc =_edbfa (_eefdc );};_ecbf .Write ([]byte (_eefdc ));
if !(_dbdf ||_cbfe ==len (_bbed ._dcdd )-1){_ecbf .Write ([]byte (_ddbgg (_dcee ._bgac ,_bbed ._dcdd [_cbfe +1]._bgac )));};};};

// ToTextMark returns the public view of `tm`.
func (_cac *textMark )ToTextMark ()TextMark {return TextMark {Text :_cac ._bfea ,Original :_cac ._cgf ,BBox :_cac ._gecf ,Font :_cac ._abd ,FontSize :_cac ._eadc ,FillColor :_cac ._gecfa ,StrokeColor :_cac ._dabgd ,Orientation :_cac ._dedf };};func (_ebdeg rectRuling )asRuling ()(*ruling ,bool ){_abgbd :=ruling {_bbac :_ebdeg ._bfbba ,Color :_ebdeg .Color ,_dfbg :_eafg };
switch _ebdeg ._bfbba {case _bffc :_abgbd ._edga =0.5*(_ebdeg .Llx +_ebdeg .Urx );_abgbd ._cbedg =_ebdeg .Lly ;_abgbd ._egcbb =_ebdeg .Ury ;_gdcf ,_abbc :=_ebdeg .checkWidth (_ebdeg .Llx ,_ebdeg .Urx );if !_abbc {if _badac {_dc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067V\u0065\u0072\u0074\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_ebdeg );
};return nil ,false ;};_abgbd ._gfbdd =_gdcf ;case _cbaaf :_abgbd ._edga =0.5*(_ebdeg .Lly +_ebdeg .Ury );_abgbd ._cbedg =_ebdeg .Llx ;_abgbd ._egcbb =_ebdeg .Urx ;_gdge ,_abeb :=_ebdeg .checkWidth (_ebdeg .Lly ,_ebdeg .Ury );if !_abeb {if _badac {_dc .Log .Error ("\u0072\u0065\u0063\u0074\u0052\u0075l\u0069\u006e\u0067\u002e\u0061\u0073\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0072\u0075\u006c\u0069\u006e\u0067H\u006f\u0072\u007a\u0020\u0021\u0063\u0068\u0065\u0063\u006b\u0057\u0069\u0064\u0074h\u0020v\u003d\u0025\u002b\u0076",_ebdeg );
};return nil ,false ;};_abgbd ._gfbdd =_gdge ;default:_dc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_ebdeg ._bfbba );return nil ,false ;};return &_abgbd ,true ;};

// String returns a string describing `pt`.
func (_bbfb PageText )String ()string {_deb :=_bf .Sprintf ("P\u0061\u0067\u0065\u0054ex\u0074:\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073",len (_bbfb ._aefg ));_gbfa :=[]string {"\u002d"+_deb };for _ ,_fce :=range _bbfb ._aefg {_gbfa =append (_gbfa ,_fce .String ());
};_gbfa =append (_gbfa ,"\u002b"+_deb );return _ce .Join (_gbfa ,"\u000a");};func (_defb *shapesState )lastpointEstablished ()(_gd .Point ,bool ){if _defb ._ebeg {return _defb ._aeca ,false ;};_dega :=len (_defb ._cafd );if _dega > 0&&_defb ._cafd [_dega -1]._efd {return _defb ._cafd [_dega -1].last (),false ;
};return _gd .Point {},true ;};func (_feeb intSet )has (_bfcf int )bool {_ ,_cbggf :=_feeb [_bfcf ];return _cbggf };func _agbgc (_ecgef string ,_gdae []rulingList ){_dc .Log .Info ("\u0024\u0024 \u0025\u0064\u0020g\u0072\u0069\u0064\u0073\u0020\u002d\u0020\u0025\u0073",len (_gdae ),_ecgef );
for _geec ,_ddbf :=range _gdae {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_geec ,_ddbf .String ());};};func (_eag *textObject )nextLine (){_eag .moveLP (0,-_eag ._cde ._gfb )};func (_cbgca paraList )merge ()*textPara {_dc .Log .Trace ("\u006d\u0065\u0072\u0067\u0065:\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_cbgca ));
if len (_cbgca )==0{return nil ;};_cbgca .sortReadingOrder ();_bdeb :=_cbgca [0].PdfRectangle ;_ebdag :=_cbgca [0]._dcdd ;for _ ,_agcd :=range _cbgca [1:]{_bdeb =_bfbbb (_bdeb ,_agcd .PdfRectangle );_ebdag =append (_ebdag ,_agcd ._dcdd ...);};return _gbcdb (_bdeb ,_ebdag );
};func (_dffad *textMark )inDiacriticArea (_gad *textMark )bool {_gfcd :=_dffad .Llx -_gad .Llx ;_abgd :=_dffad .Urx -_gad .Urx ;_dbef :=_dffad .Lly -_gad .Lly ;return _gf .Abs (_gfcd +_abgd )< _dffad .Width ()*_egfd &&_gf .Abs (_dbef )< _dffad .Height ()*_egfd ;
};func (_bgbg rulingList )primMinMax ()(float64 ,float64 ){_cacf ,_fcfee :=_bgbg [0]._edga ,_bgbg [0]._edga ;for _ ,_ebccb :=range _bgbg [1:]{if _ebccb ._edga < _cacf {_cacf =_ebccb ._edga ;}else if _ebccb ._edga > _fcfee {_fcfee =_ebccb ._edga ;};};return _cacf ,_fcfee ;
};func _acbg (_cfdaf map[float64 ]gridTile )[]float64 {_dcgc :=make ([]float64 ,0,len (_cfdaf ));for _abaf :=range _cfdaf {_dcgc =append (_dcgc ,_abaf );};_g .Float64s (_dcgc );return _dcgc ;};func _edbfa (_degg string )string {_abc :=[]rune (_degg );return string (_abc [:len (_abc )-1])};
func _cfbg (_edfb []TextMark ,_cgcd *int )[]TextMark {_afdg :=_edfb [len (_edfb )-1];_afeeb :=[]rune (_afdg .Text );if len (_afeeb )==1{_edfb =_edfb [:len (_edfb )-1];_cdec :=_edfb [len (_edfb )-1];*_cgcd =_cdec .Offset +len (_cdec .Text );}else {_gadd :=_edbfa (_afdg .Text );
*_cgcd +=len (_gadd )-len (_afdg .Text );_afdg .Text =_gadd ;};return _edfb ;};func _cfbgf (_aabdb ,_cebd int )int {if _aabdb < _cebd {return _aabdb ;};return _cebd ;};func (_adbab paraList )findGridTables (_agfb []gridTiling )[]*textTable {if _cgee {_dc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072\u0069\u0064\u0054\u0061\u0062\u006c\u0065s\u003a\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073",len (_adbab ));
for _gaebf ,_efggb :=range _adbab {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gaebf ,_efggb );};};var _bcef []*textTable ;for _ccfcd ,_cged :=range _agfb {_ggaa ,_eadfg :=_adbab .findTableGrid (_cged );if _ggaa !=nil {_ggaa .log (_bf .Sprintf ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0057\u0069\u0074\u0068\u0047\u0072\u0069\u0064\u0073\u003a\u0020%\u0064",_ccfcd ));
_bcef =append (_bcef ,_ggaa );_ggaa .markCells ();};for _gcga :=range _eadfg {_gcga ._ebgdf =true ;};};if _cgee {_dc .Log .Info ("\u0066i\u006e\u0064\u0047\u0072i\u0064\u0054\u0061\u0062\u006ce\u0073:\u0020%\u0064\u0020\u0074\u0061\u0062\u006c\u0065s",len (_bcef ));
};return _bcef ;};func (_gddbgb *textTable )compositeRowCorridors ()map[int ][]float64 {_degcb :=make (map[int ][]float64 ,_gddbgb ._fcga );if _cgee {_dc .Log .Info ("c\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0052\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073:\u0020h\u003d\u0025\u0064",_gddbgb ._fcga );
};for _ffgd :=1;_ffgd < _gddbgb ._fcga ;_ffgd ++{var _efaed []compositeCell ;for _fbcaf :=0;_fbcaf < _gddbgb ._dffbb ;_fbcaf ++{if _dfbf ,_gbbg :=_gddbgb ._eagcd [_bfbbab (_fbcaf ,_ffgd )];_gbbg {_efaed =append (_efaed ,_dfbf );};};if len (_efaed )==0{continue ;
};_bgefg :=_efbd (_efaed );_degcb [_ffgd ]=_bgefg ;if _cgee {_bf .Printf ("\u0020\u0020\u0020\u0025\u0032\u0064\u003a\u0020\u00256\u002e\u0032\u0066\u000a",_ffgd ,_bgefg );};};return _degcb ;};func (_dgba *textObject )setTextRise (_ccb float64 ){if _dgba ==nil {return ;
};_dgba ._cde ._bbfc =_ccb ;};

// Len returns the number of TextMarks in `ma`.
func (_fcf *TextMarkArray )Len ()int {if _fcf ==nil {return 0;};return len (_fcf ._gaea );};

// String returns a human readable description of `path`.
func (_bgbc *subpath )String ()string {_cgac :=_bgbc ._bdea ;_gecdg :=len (_cgac );if _gecdg <=5{return _bf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036\u002e\u0032f",_gecdg ,_cgac );};return _bf .Sprintf ("\u0025d\u003a\u0020\u0025\u0036.\u0032\u0066\u0020\u0025\u0036.\u0032f\u0020.\u002e\u002e\u0020\u0025\u0036\u002e\u0032f",_gecdg ,_cgac [0],_cgac [1],_cgac [_gecdg -1]);
};func (_dfcf rulingList )toTilings ()(rulingList ,[]gridTiling ){_dfcf .log ("\u0074o\u0054\u0069\u006c\u0069\u006e\u0067s");if len (_dfcf )==0{return nil ,nil ;};_dfcf =_dfcf .tidied ("\u0061\u006c\u006c");_dfcf .log ("\u0074\u0069\u0064\u0069\u0065\u0064");
_ggec :=_dfcf .toGrids ();_cfec :=make ([]gridTiling ,len (_ggec ));for _edeaf ,_ageb :=range _ggec {_cfec [_edeaf ]=_ageb .asTiling ();};return _dfcf ,_cfec ;};func (_bdf *textObject )setTextRenderMode (_gde int ){if _bdf ==nil {return ;};_bdf ._cde ._ddbd =RenderMode (_gde );
};func _bfcda (_becef int ,_abbfd func (int ,int )bool )[]int {_gbcdg :=make ([]int ,_becef );for _ggaff :=range _gbcdg {_gbcdg [_ggaff ]=_ggaff ;};_g .Slice (_gbcdg ,func (_fdefb ,_agga int )bool {return _abbfd (_gbcdg [_fdefb ],_gbcdg [_agga ])});return _gbcdg ;
};func (_caga rulingList )removeDuplicates ()rulingList {if len (_caga )==0{return nil ;};_caga .sort ();_fcef :=rulingList {_caga [0]};for _ ,_dfad :=range _caga [1:]{if _dfad .equals (_fcef [len (_fcef )-1]){continue ;};_fcef =append (_fcef ,_dfad );
};return _fcef ;};func (_gcdfg *wordBag )scanBand (_fbca string ,_deca *wordBag ,_ggcd func (_gedd *wordBag ,_faae *textWord )bool ,_cdcfc ,_eaga ,_dgg float64 ,_fac ,_ffg bool )int {_dfb :=_deca ._cabe ;var _acce map[int ]map[*textWord ]struct{};if !_fac {_acce =_gcdfg .makeRemovals ();
};_fgd :=_eefac *_dfb ;_dfff :=0;for _ ,_bbab :=range _gcdfg .depthBand (_cdcfc -_fgd ,_eaga +_fgd ){if len (_gcdfg ._cfcc [_bbab ])==0{continue ;};for _ ,_ebebb :=range _gcdfg ._cfcc [_bbab ]{if !(_cdcfc -_fgd <=_ebebb ._aabad &&_ebebb ._aabad <=_eaga +_fgd ){continue ;
};if !_ggcd (_deca ,_ebebb ){continue ;};_dfbc :=2.0*_gf .Abs (_ebebb ._fggb -_deca ._cabe )/(_ebebb ._fggb +_deca ._cabe );_daaf :=_gf .Max (_ebebb ._fggb /_deca ._cabe ,_deca ._cabe /_ebebb ._fggb );_fee :=_gf .Min (_dfbc ,_daaf );if _dgg > 0&&_fee > _dgg {continue ;
};if _deca .blocked (_ebebb ){continue ;};if !_fac {_deca .pullWord (_ebebb ,_bbab ,_acce );};_dfff ++;if !_ffg {if _ebebb ._aabad < _cdcfc {_cdcfc =_ebebb ._aabad ;};if _ebebb ._aabad > _eaga {_eaga =_ebebb ._aabad ;};};if _fac {break ;};};};if !_fac {_gcdfg .applyRemovals (_acce );
};return _dfff ;};func (_ecdc *textTable )logComposite (_bbec string ){if !_cgee {return ;};_dc .Log .Info ("\u007e~\u007eP\u0061\u0072\u0061\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ecdc ._dffbb ,_ecdc ._fcga ,_bbec );_bf .Printf ("\u0025\u0035\u0073 \u007c","");
for _cabg :=0;_cabg < _ecdc ._dffbb ;_cabg ++{_bf .Printf ("\u0025\u0033\u0064 \u007c",_cabg );};_bf .Println ("");_bf .Printf ("\u0025\u0035\u0073 \u002b","");for _ggfa :=0;_ggfa < _ecdc ._dffbb ;_ggfa ++{_bf .Printf ("\u0025\u0033\u0073 \u002b","\u002d\u002d\u002d");
};_bf .Println ("");for _cgbc :=0;_cgbc < _ecdc ._fcga ;_cgbc ++{_bf .Printf ("\u0025\u0035\u0064 \u007c",_cgbc );for _bcde :=0;_bcde < _ecdc ._dffbb ;_bcde ++{_dedd ,_ :=_ecdc ._eagcd [_bfbbab (_bcde ,_cgbc )].parasBBox ();_bf .Printf ("\u0025\u0033\u0064 \u007c",len (_dedd ));
};_bf .Println ("");};_dc .Log .Info ("\u007e~\u007eT\u0065\u0078\u0074\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0073",_ecdc ._dffbb ,_ecdc ._fcga ,_bbec );_bf .Printf ("\u0025\u0035\u0073 \u007c","");for _agebf :=0;_agebf < _ecdc ._dffbb ;_agebf ++{_bf .Printf ("\u0025\u0031\u0032\u0064\u0020\u007c",_agebf );
};_bf .Println ("");_bf .Printf ("\u0025\u0035\u0073 \u002b","");for _bbbcc :=0;_bbbcc < _ecdc ._dffbb ;_bbbcc ++{_bf .Print ("\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d\u002d-\u002d\u002d\u002d\u002b");};_bf .Println ("");for _gggbb :=0;_gggbb < _ecdc ._fcga ;
_gggbb ++{_bf .Printf ("\u0025\u0035\u0064 \u007c",_gggbb );for _eddb :=0;_eddb < _ecdc ._dffbb ;_eddb ++{_bccgg ,_ :=_ecdc ._eagcd [_bfbbab (_eddb ,_gggbb )].parasBBox ();_cagdg :="";_defd :=_bccgg .merge ();if _defd !=nil {_cagdg =_defd .text ();};_cagdg =_bf .Sprintf ("\u0025\u0071",_ababa (_cagdg ,12));
_cagdg =_cagdg [1:len (_cagdg )-1];_bf .Printf ("\u0025\u0031\u0032\u0073\u0020\u007c",_cagdg );};_bf .Println ("");};};type gridTiling struct{_fa .PdfRectangle ;_cfdd []float64 ;_fbfcc []float64 ;_afeb map[float64 ]map[float64 ]gridTile ;};func (_fag *wordBag )absorb (_aad *wordBag ){_bfc :=_aad .makeRemovals ();
for _geae ,_ggaf :=range _aad ._cfcc {for _ ,_bgbbgf :=range _ggaf {_fag .pullWord (_bgbbgf ,_geae ,_bfc );};};_aad .applyRemovals (_bfc );};type pathSection struct{_ffda []*subpath ;_b .Color ;};func (_acf *shapesState )stroke (_cebcb *[]pathSection ){_cba :=pathSection {_ffda :_acf ._cafd ,Color :_acf ._gace .getStrokeColor ()};
*_cebcb =append (*_cebcb ,_cba );if _bbde {_bf .Printf ("\u0020 \u0020\u0020S\u0054\u0052\u004fK\u0045\u003a\u0020\u0025\u0064\u0020\u0073t\u0072\u006f\u006b\u0065\u0073\u0020s\u0073\u003d\u0025\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d%\u002b\u0076\u0020\u0025\u0036\u002e\u0032\u0066\u000a",len (*_cebcb ),_acf ,_acf ._gace .getStrokeColor (),_cba .bbox ());
if _bggc {for _gegd ,_acgg :=range _acf ._cafd {_bf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gegd ,_acgg );if _gegd ==10{break ;};};};};};func (_fgff *textLine )text ()string {var _egef []string ;for _ ,_agda :=range _fgff ._efce {if _agda ._bdfcc {_egef =append (_egef ,"\u0020");
};_egef =append (_egef ,_agda ._cbbb );};return _ce .Join (_egef ,"");};func (_geee *wordBag )maxDepth ()float64 {return _geee ._defe -_geee .Lly };func _cggad (_dfed _fa .PdfRectangle )*ruling {return &ruling {_bbac :_cbaaf ,_edga :_dfed .Lly ,_cbedg :_dfed .Llx ,_egcbb :_dfed .Urx };
};func _cecb (_gcfe string )bool {if _e .RuneCountInString (_gcfe )< _fagf {return false ;};_fgaf ,_eebd :=_e .DecodeLastRuneInString (_gcfe );if _eebd <=0||!_c .Is (_c .Hyphen ,_fgaf ){return false ;};_fgaf ,_eebd =_e .DecodeLastRuneInString (_gcfe [:len (_gcfe )-_eebd ]);
return _eebd > 0&&!_c .IsSpace (_fgaf );};func (_eeag *shapesState )clearPath (){_eeag ._cafd =nil ;_eeag ._ebeg =false ;if _ffde {_dc .Log .Info ("\u0043\u004c\u0045A\u0052\u003a\u0020\u0073\u0073\u003d\u0025\u0073",_eeag );};};type rulingList []*ruling ;
func _ddbaa (_afgefa _fa .PdfRectangle )rulingKind {_ecge :=_afgefa .Width ();_fdad :=_afgefa .Height ();if _ecge > _fdad {if _ecge >=_bbfg {return _cbaaf ;};}else {if _fdad >=_bbfg {return _bffc ;};};return _fdgf ;};func (_cadc *textPara )taken ()bool {return _cadc ==nil ||_cadc ._ebgdf };
func (_bed *stateStack )pop ()*textState {if _bed .empty (){return nil ;};_fggf :=*(*_bed )[len (*_bed )-1];*_bed =(*_bed )[:len (*_bed )-1];return &_fggf ;};func _aegb (_aadg *wordBag ,_eebc float64 ,_fcde ,_ebbb rulingList )[]*wordBag {var _ebabe []*wordBag ;
for _ ,_aabd :=range _aadg .depthIndexes (){_agdc :=false ;for !_aadg .empty (_aabd ){_cedb :=_aadg .firstReadingIndex (_aabd );_dfgga :=_aadg .firstWord (_cedb );_fbcb :=_debe (_dfgga ,_eebc ,_fcde ,_ebbb );_aadg .removeWord (_dfgga ,_cedb );if _faec {_dc .Log .Info ("\u0066\u0069\u0072\u0073\u0074\u0057\u006f\u0072\u0064\u0020\u005e\u005e^\u005e\u0020\u0025\u0073",_dfgga .String ());
};for _bce :=true ;_bce ;_bce =_agdc {_agdc =false ;_faef :=_feea *_fbcb ._cabe ;_aafb :=_eagc *_fbcb ._cabe ;_cgeg :=_bccf *_fbcb ._cabe ;if _faec {_dc .Log .Info ("\u0070a\u0072a\u0057\u006f\u0072\u0064\u0073\u0020\u0064\u0065\u0070\u0074\u0068 \u0025\u002e\u0032\u0066 \u002d\u0020\u0025\u002e\u0032f\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061\u0044\u0065\u0070\u0074\u0068\u0047\u0061\u0070\u003d\u0025\u002e\u0032\u0066\u0020\u006d\u0061\u0078\u0049\u006e\u0074\u0072\u0061R\u0065\u0061\u0064\u0069\u006e\u0067\u0047\u0061p\u003d\u0025\u002e\u0032\u0066",_fbcb .minDepth (),_fbcb .maxDepth (),_cgeg ,_aafb );
};if _aadg .scanBand ("\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c",_fbcb ,_afefg (_bdg ,0),_fbcb .minDepth ()-_cgeg ,_fbcb .maxDepth ()+_cgeg ,_gcab ,false ,false )> 0{_agdc =true ;};if _aadg .scanBand ("\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_fbcb ,_afefg (_bdg ,_aafb ),_fbcb .minDepth (),_fbcb .maxDepth (),_feg ,false ,false )> 0{_agdc =true ;
};if _agdc {continue ;};_bddcg :=_aadg .scanBand ("",_fbcb ,_afefg (_cgcb ,_faef ),_fbcb .minDepth (),_fbcb .maxDepth (),_gcbf ,true ,false );if _bddcg > 0{_badd :=(_fbcb .maxDepth ()-_fbcb .minDepth ())/_fbcb ._cabe ;if (_bddcg > 1&&float64 (_bddcg )> 0.3*_badd )||_bddcg <=10{if _aadg .scanBand ("\u006f\u0074\u0068e\u0072",_fbcb ,_afefg (_cgcb ,_faef ),_fbcb .minDepth (),_fbcb .maxDepth (),_gcbf ,false ,true )> 0{_agdc =true ;
};};};};_ebabe =append (_ebabe ,_fbcb );};};return _ebabe ;};type bounded interface{bbox ()_fa .PdfRectangle };func _ddda (_aeae float64 )int {var _bbfe int ;if _aeae >=0{_bbfe =int (_aeae /_gff );}else {_bbfe =int (_aeae /_gff )-1;};return _bbfe ;};func (_aeee *textObject )getCurrentFont ()*_fa .PdfFont {_gcdf :=_aeee ._cde ._accb ;
if _gcdf ==nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020U\u0073\u0069\u006e\u0067\u0020d\u0065\u0066a\u0075\u006c\u0074\u002e");return _fa .DefaultFont ();
};return _gcdf ;};type event struct{_eaddf float64 ;_fffc bool ;_adgdg int ;};func (_adeg *stateStack )push (_eefe *textState ){_ead :=*_eefe ;*_adeg =append (*_adeg ,&_ead )};func _ebdb (_bacc float64 )bool {return _gf .Abs (_bacc )< _eaab };func (_cfed paraList )applyTables (_becf []*textTable )paraList {var _gcdaa paraList ;
for _ ,_accd :=range _becf {_gcdaa =append (_gcdaa ,_accd .newTablePara ());};for _ ,_fgec :=range _cfed {if _fgec ._ebgdf {continue ;};_gcdaa =append (_gcdaa ,_fgec );};return _gcdaa ;};func (_efad paraList )eventNeighbours (_bbbca []event )map[*textPara ][]int {_g .Slice (_bbbca ,func (_dcagc ,_ebcdb int )bool {_fegg ,_fccd :=_bbbca [_dcagc ],_bbbca [_ebcdb ];
_cecdc ,_feeca :=_fegg ._eaddf ,_fccd ._eaddf ;if _cecdc !=_feeca {return _cecdc < _feeca ;};if _fegg ._fffc !=_fccd ._fffc {return _fegg ._fffc ;};return _dcagc < _ebcdb ;});_gbfda :=make (map[int ]intSet );_cgbgb :=make (intSet );for _ ,_ccbcf :=range _bbbca {if _ccbcf ._fffc {_gbfda [_ccbcf ._adgdg ]=make (intSet );
for _abec :=range _cgbgb {if _abec !=_ccbcf ._adgdg {_gbfda [_ccbcf ._adgdg ].add (_abec );_gbfda [_abec ].add (_ccbcf ._adgdg );};};_cgbgb .add (_ccbcf ._adgdg );}else {_cgbgb .del (_ccbcf ._adgdg );};};_eadcf :=map[*textPara ][]int {};for _agcc ,_cgca :=range _gbfda {_edcec :=_efad [_agcc ];
if len (_cgca )==0{_eadcf [_edcec ]=nil ;continue ;};_afggf :=make ([]int ,len (_cgca ));_edbb :=0;for _bcaf :=range _cgca {_afggf [_edbb ]=_bcaf ;_edbb ++;};_eadcf [_edcec ]=_afggf ;};return _eadcf ;};

// ImageMark represents an image drawn on a page and its position in device coordinates.
// All coordinates are in device coordinates.
type ImageMark struct{Image *_fa .Image ;

// Dimensions of the image as displayed in the PDF.
Width float64 ;Height float64 ;

// Position of the image in PDF coordinates (lower left corner).
X float64 ;Y float64 ;

// Angle in degrees, if rotated.
Angle float64 ;};func (_dgce paraList )llyOrdering ()[]int {_aacb :=make ([]int ,len (_dgce ));for _bca :=range _dgce {_aacb [_bca ]=_bca ;};_g .SliceStable (_aacb ,func (_debea ,_eaec int )bool {_bcbc ,_gedf :=_aacb [_debea ],_aacb [_eaec ];return _dgce [_bcbc ].Lly < _dgce [_gedf ].Lly ;
});return _aacb ;};type textPara struct{_fa .PdfRectangle ;_gedc _fa .PdfRectangle ;_dcdd []*textLine ;_afcc *textTable ;_ebgdf bool ;_cedecf bool ;_gebe *textPara ;_fagc *textPara ;_abbe *textPara ;_cdedb *textPara ;};func (_gdfg *textLine )toTextMarks (_gefd *int )[]TextMark {var _bddc []TextMark ;
for _ ,_fgfa :=range _gdfg ._efce {if _fgfa ._bdfcc {_bddc =_gbg (_bddc ,_gefd ,"\u0020");};_abgbc :=_fgfa .toTextMarks (_gefd );_bddc =append (_bddc ,_abgbc ...);};return _bddc ;};type intSet map[int ]struct{};func (_dade *wordBag )empty (_ceec int )bool {_ ,_dag :=_dade ._cfcc [_ceec ];
return !_dag };func (_dagc *textWord )absorb (_acab *textWord ){_dagc .PdfRectangle =_bfbbb (_dagc .PdfRectangle ,_acab .PdfRectangle );_dagc ._bffcd =append (_dagc ._bffcd ,_acab ._bffcd ...);};

// TableCell is a cell in a TextTable.
type TableCell struct{

// Text is the extracted text.
Text string ;

// Marks returns the TextMarks corresponding to the text in Text.
Marks TextMarkArray ;};

// Marks returns the TextMark collection for a page. It represents all the text on the page.
func (_gfege PageText )Marks ()*TextMarkArray {return &TextMarkArray {_gaea :_gfege ._bedc }};func (_gegb rulingList )asTiling ()gridTiling {if _bbca {_dc .Log .Info ("r\u0075\u006ci\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0063s\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u002b\u002b\u002b\u0020\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_gegb ));
};for _eeadg ,_fgbdc :=range _gegb [1:]{_bffa :=_gegb [_eeadg ];if _bffa .alignsPrimary (_fgbdc )&&_bffa .alignsSec (_fgbdc ){_dc .Log .Error ("a\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0044\u0075\u0070\u006c\u0069\u0063\u0061\u0074\u0065 \u0072\u0075\u006c\u0069\u006e\u0067\u0073\u002e\u000a\u0009v=\u0025\u0073\u000a\t\u0077=\u0025\u0073",_fgbdc ,_bffa );
};};_gegb .sortStrict ();_gegb .log ("\u0073n\u0061\u0070\u0070\u0065\u0064");_bfdg ,_bggcf :=_gegb .vertsHorzs ();_fgee :=_bfdg .primaries ();_ccec :=_bggcf .primaries ();_fgag :=len (_fgee )-1;_dcbce :=len (_ccec )-1;if _fgag ==0||_dcbce ==0{return gridTiling {};
};_feed :=_fa .PdfRectangle {Llx :_fgee [0],Urx :_fgee [_fgag ],Lly :_ccec [0],Ury :_ccec [_dcbce ]};if _bbca {_dc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0076\u0065\u0072\u0074s=\u0025\u0064",len (_bfdg ));
for _gebed ,_dcae :=range _bfdg {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_gebed ,_dcae );};_dc .Log .Info ("\u0072\u0075l\u0069\u006e\u0067\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0068\u006f\u0072\u007as=\u0025\u0064",len (_bggcf ));
for _abcf ,_gegda :=range _bggcf {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_abcf ,_gegda );};_dc .Log .Info ("\u0072\u0075\u006c\u0069\u006eg\u004c\u0069\u0073\u0074\u002e\u0061\u0073\u0054\u0069\u006c\u0069\u006e\u0067:\u0020\u0020\u0077\u0078\u0068\u003d\u0025\u0064\u0078\u0025\u0064\u000a\u0009\u006c\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a\u0009\u006c\u006c\u0079\u003d\u0025\u002e\u0032f",_fgag ,_dcbce ,_fgee ,_ccec );
};_dgecb :=make ([]gridTile ,_fgag *_dcbce );for _aedac :=_dcbce -1;_aedac >=0;_aedac --{_aebc :=_ccec [_aedac ];_beeg :=_ccec [_aedac +1];for _dccf :=0;_dccf < _fgag ;_dccf ++{_eegbg :=_fgee [_dccf ];_aged :=_fgee [_dccf +1];_cefdc :=_bfdg .findPrimSec (_eegbg ,_aebc );
_gfba :=_bfdg .findPrimSec (_aged ,_aebc );_gffg :=_bggcf .findPrimSec (_aebc ,_eegbg );_bgdc :=_bggcf .findPrimSec (_beeg ,_eegbg );_dbbe :=_fa .PdfRectangle {Llx :_eegbg ,Urx :_aged ,Lly :_aebc ,Ury :_beeg };_acdb :=_acad (_dbbe ,_cefdc ,_gfba ,_gffg ,_bgdc );
_dgecb [_aedac *_fgag +_dccf ]=_acdb ;if _bbca {_bf .Printf ("\u0020\u0020\u0078\u003d\u0025\u0032\u0064\u0020\u0079\u003d\u0025\u0032\u0064\u003a\u0020%\u0073 \u0025\u0036\u002e\u0032\u0066\u0020\u0078\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_dccf ,_aedac ,_acdb .String (),_acdb .Width (),_acdb .Height ());
};};};if _bbca {_dc .Log .Info ("r\u0075\u006c\u0069\u006e\u0067\u004c\u0069\u0073\u0074.\u0061\u0073\u0054\u0069\u006c\u0069\u006eg:\u0020\u0063\u006f\u0061l\u0065\u0073\u0063\u0065\u0020\u0068\u006f\u0072\u0069zo\u006e\u0074a\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_feed );
};_bgddd :=make ([]map[float64 ]gridTile ,_dcbce );for _bgba :=_dcbce -1;_bgba >=0;_bgba --{if _bbca {_bf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_bgba );};_bgddd [_bgba ]=make (map[float64 ]gridTile ,_fgag );for _dbbad :=0;_dbbad < _fgag ;
_dbbad ++{_bcbcg :=_dgecb [_bgba *_fgag +_dbbad ];if _bbca {_bf .Printf ("\u0020\u0020\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dbbad ,_bcbcg );};if !_bcbcg ._bbddf {continue ;};_abdcb :=_dbbad ;for _cfddg :=_dbbad +1;!_bcbcg ._egdd &&_cfddg < _fgag ;
_cfddg ++{_cdgg :=_dgecb [_bgba *_fgag +_cfddg ];_bcbcg .Urx =_cdgg .Urx ;_bcbcg ._gcde =_bcbcg ._gcde ||_cdgg ._gcde ;_bcbcg ._egad =_bcbcg ._egad ||_cdgg ._egad ;_bcbcg ._egdd =_cdgg ._egdd ;if _bbca {_bf .Printf ("\u0020 \u0020%\u0034\u0064\u003a\u0020\u0025s\u0020\u2192 \u0025\u0073\u000a",_cfddg ,_cdgg ,_bcbcg );
};_abdcb =_cfddg ;};if _bbca {_bf .Printf (" \u0020 \u0025\u0032\u0064\u0020\u002d\u0020\u0025\u0032d\u0020\u2192\u0020\u0025s\n",_dbbad ,_abdcb ,_bcbcg );};_dbbad =_abdcb ;_bgddd [_bgba ][_bcbcg .Llx ]=_bcbcg ;};};_cgegf :=make (map[float64 ]map[float64 ]gridTile ,_dcbce );
_abef :=make (map[float64 ]map[float64 ]struct{},_dcbce );for _bcfg :=_dcbce -1;_bcfg >=0;_bcfg --{_dabeda :=_dgecb [_bcfg *_fgag ].Lly ;_cgegf [_dabeda ]=make (map[float64 ]gridTile ,_fgag );_abef [_dabeda ]=make (map[float64 ]struct{},_fgag );};if _bbca {_dc .Log .Info ("\u0072u\u006c\u0069n\u0067\u004c\u0069s\u0074\u002e\u0061\u0073\u0054\u0069\u006ci\u006e\u0067\u003a\u0020\u0063\u006fa\u006c\u0065\u0073\u0063\u0065\u0020\u0076\u0065\u0072\u0074\u0069c\u0061\u006c\u002e\u0020\u0025\u0036\u002e\u0032\u0066",_feed );
};for _ccfc :=_dcbce -1;_ccfc >=0;_ccfc --{_dgfa :=_dgecb [_ccfc *_fgag ].Lly ;_dbccd :=_bgddd [_ccfc ];if _bbca {_bf .Printf ("\u0020\u0020\u0079\u003d\u0025\u0032\u0064\u000a",_ccfc );};for _ ,_eabff :=range _acbg (_dbccd ){if _ ,_ffed :=_abef [_dgfa ][_eabff ];
_ffed {continue ;};_dfaa :=_dbccd [_eabff ];if _bbca {_bf .Printf (" \u0020\u0020\u0020\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_dfaa .String ());};for _bafc :=_ccfc -1;_bafc >=0;_bafc --{if _dfaa ._egad {break ;};_egdf :=_bgddd [_bafc ];_cbgg ,_fcdbd :=_egdf [_eabff ];
if !_fcdbd {break ;};if _cbgg .Urx !=_dfaa .Urx {break ;};_dfaa ._egad =_cbgg ._egad ;_dfaa .Lly =_cbgg .Lly ;if _bbca {_bf .Printf ("\u0020\u0020\u0020\u0020  \u0020\u0020\u0076\u003d\u0025\u0073\u0020\u0076\u0030\u003d\u0025\u0073\u000a",_cbgg .String (),_dfaa .String ());
};_abef [_cbgg .Lly ][_cbgg .Llx ]=struct{}{};};if _ccfc ==0{_dfaa ._egad =true ;};if _dfaa .complete (){_cgegf [_dgfa ][_eabff ]=_dfaa ;};};};_aaabc :=gridTiling {PdfRectangle :_feed ,_cfdd :_baag (_cgegf ),_fbfcc :_dfbb (_cgegf ),_afeb :_cgegf };_aaabc .log ("\u0043r\u0065\u0061\u0074\u0065\u0064");
return _aaabc ;};func (_ebcb *textObject )getFillColor ()_b .Color {return _afccc (_ebcb ._cdd .ColorspaceNonStroking ,_ebcb ._cdd .ColorNonStroking );};func _cgab (_fcge ,_fbcc _fa .PdfRectangle )bool {return _fcge .Llx <=_fbcc .Llx &&_fbcc .Urx <=_fcge .Urx &&_fcge .Lly <=_fbcc .Lly &&_fbcc .Ury <=_fcge .Ury ;
};func _aegc (_daagf float64 ,_ggead int )int {if _ggead ==0{_ggead =1;};_faaf :=float64 (_ggead );return int (_gf .Round (_daagf /_faaf )*_faaf );};func (_aecf rulingList )toGrids ()[]rulingList {if _bbde {_dc .Log .Info ("t\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0025\u0073",_aecf );
};_aacf :=_aecf .intersections ();if _bbde {_dc .Log .Info ("\u0074\u006f\u0047r\u0069\u0064\u0073\u003a \u0076\u0065\u0063\u0073\u003d\u0025\u0064 \u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003d\u0025\u0064\u0020",len (_aecf ),len (_aacf ));
for _ ,_adcd :=range _cegf (_aacf ){_bf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_adcd ,_aacf [_adcd ]);};};_adde :=make (map[int ]intSet ,len (_aecf ));for _gffa :=range _aecf {_gbdg :=_aecf .connections (_aacf ,_gffa );if len (_gbdg )> 0{_adde [_gffa ]=_gbdg ;
};};if _bbde {_dc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0063\u006fn\u006e\u0065\u0063\u0074s=\u0025\u0064",len (_adde ));for _ ,_dbee :=range _cegf (_adde ){_bf .Printf ("\u00254\u0064\u003a\u0020\u0025\u002b\u0076\n",_dbee ,_adde [_dbee ]);
};};_bdbcf :=_bfcda (len (_aecf ),func (_fgac ,_eacc int )bool {_dgfe ,_aegcg :=len (_adde [_fgac ]),len (_adde [_eacc ]);if _dgfe !=_aegcg {return _dgfe > _aegcg ;};return _aecf .comp (_fgac ,_eacc );});if _bbde {_dc .Log .Info ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u006f\u0072d\u0065\u0072\u0069\u006eg=\u0025\u0076",_bdbcf );
};_efgg :=[][]int {{_bdbcf [0]}};_edfg :for _ ,_dadga :=range _bdbcf [1:]{for _dgbc ,_ecbg :=range _efgg {for _ ,_aeaf :=range _ecbg {if _adde [_aeaf ].has (_dadga ){_efgg [_dgbc ]=append (_ecbg ,_dadga );continue _edfg ;};};};_efgg =append (_efgg ,[]int {_dadga });
};if _bbde {_dc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020i\u0067\u0072i\u0064\u0073\u003d\u0025\u0076",_efgg );};_g .SliceStable (_efgg ,func (_dcdfc ,_fabgb int )bool {return len (_efgg [_dcdfc ])> len (_efgg [_fabgb ])});for _ ,_bfbc :=range _efgg {_g .Slice (_bfbc ,func (_fabgd ,_dfec int )bool {return _aecf .comp (_bfbc [_fabgd ],_bfbc [_dfec ])});
};_bfeb :=make ([]rulingList ,len (_efgg ));for _dbcf ,_gddbf :=range _efgg {_deee :=make (rulingList ,len (_gddbf ));for _bbddb ,_cgeec :=range _gddbf {_deee [_bbddb ]=_aecf [_cgeec ];};_bfeb [_dbcf ]=_deee ;};if _bbde {_dc .Log .Info ("\u0074o\u0047r\u0069\u0064\u0073\u003a\u0020g\u0072\u0069d\u0073\u003d\u0025\u002b\u0076",_bfeb );
};var _gdfa []rulingList ;for _ ,_cbgb :=range _bfeb {if _fccg ,_dfge :=_cbgb .isActualGrid ();_dfge {_cbgb =_fccg ;_cbgb =_cbgb .snapToGroups ();_gdfa =append (_gdfa ,_cbgb );};};if _bbde {_agbgc ("t\u006fG\u0072\u0069\u0064\u0073\u003a\u0020\u0061\u0063t\u0075\u0061\u006c\u0047ri\u0064\u0073",_gdfa );
_dc .Log .Info ("\u0074\u006f\u0047\u0072\u0069\u0064\u0073\u003a\u0020\u0067\u0072\u0069\u0064\u0073\u003d%\u0064 \u0061\u0063\u0074\u0075\u0061\u006c\u0047\u0072\u0069\u0064\u0073\u003d\u0025\u0064",len (_bfeb ),len (_gdfa ));};return _gdfa ;};

// TextMarkArray is a collection of TextMarks.
type TextMarkArray struct{_gaea []TextMark };func _aeaec (_acfd ,_cdac *textPara )bool {return _bdfee (_acfd ._gedc ,_cdac ._gedc )};func _cebbc (_cdb ,_ffbca _fa .PdfRectangle )bool {return _bdfee (_cdb ,_ffbca )&&_gfbb (_cdb ,_ffbca )};const (_dcfad =false ;
_bbe =false ;_bdbc =false ;_dgcd =false ;_ffde =false ;_adca =false ;_faec =false ;_ebcc =false ;_aefb =false ;_bcdd =_aefb &&true ;_dabg =_bcdd &&false ;_addb =_aefb &&true ;_cgee =false ;_aegd =_cgee &&false ;_fcbd =_cgee &&true ;_bbde =false ;_bggc =_bbde &&false ;
_dbadf =_bbde &&false ;_bbca =_bbde &&true ;_badac =_bbde &&false ;_gcce =_bbde &&false ;);func (_ddfa rulingList )primaries ()[]float64 {_badge :=make (map[float64 ]struct{},len (_ddfa ));for _ ,_caddc :=range _ddfa {_badge [_caddc ._edga ]=struct{}{};
};_cddg :=make ([]float64 ,len (_badge ));_fcee :=0;for _dbfeg :=range _badge {_cddg [_fcee ]=_dbfeg ;_fcee ++;};_g .Float64s (_cddg );return _cddg ;};func (_ffbgd rulingList )bbox ()_fa .PdfRectangle {var _ddaa _fa .PdfRectangle ;if len (_ffbgd )==0{_dc .Log .Error ("r\u0075\u006c\u0069\u006e\u0067\u004ci\u0073\u0074\u002e\u0062\u0062\u006f\u0078\u003a\u0020n\u006f\u0020\u0072u\u006ci\u006e\u0067\u0073");
return _fa .PdfRectangle {};};if _ffbgd [0]._bbac ==_cbaaf {_ddaa .Llx ,_ddaa .Urx =_ffbgd .secMinMax ();_ddaa .Lly ,_ddaa .Ury =_ffbgd .primMinMax ();}else {_ddaa .Llx ,_ddaa .Urx =_ffbgd .primMinMax ();_ddaa .Lly ,_ddaa .Ury =_ffbgd .secMinMax ();};return _ddaa ;
};const (_fdgf rulingKind =iota ;_cbaaf ;_bffc ;);func (_cade *ruling )gridIntersecting (_cbbg *ruling )bool {return _ggee (_cade ._cbedg ,_cbbg ._cbedg )&&_ggee (_cade ._egcbb ,_cbbg ._egcbb );};func _dfcg (_bbdg ,_fbbd ,_fffg ,_begea *textPara )*textTable {_agece :=&textTable {_dffbb :2,_fcga :2,_bfab :make (map[uint64 ]*textPara ,4)};
_agece .put (0,0,_bbdg );_agece .put (1,0,_fbbd );_agece .put (0,1,_fffg );_agece .put (1,1,_begea );return _agece ;};func _cdbb (_cdbd float64 )float64 {return _beggf *_gf .Round (_cdbd /_beggf )};func (_cagd *textPara )depth ()float64 {if _cagd ._cedecf {return -1.0;
};if len (_cagd ._dcdd )> 0{return _cagd ._dcdd [0]._bgac ;};return _cagd ._afcc .depth ();};func (_fdcd *ruling )alignsSec (_ccba *ruling )bool {const _fadbe =_eaab +1.0;return _fdcd ._cbedg -_fadbe <=_ccba ._egcbb &&_ccba ._cbedg -_fadbe <=_fdcd ._egcbb ;
};func _gfbaf (_aefd []pathSection ){if _beggf < 0.0{return ;};if _bbde {_dc .Log .Info ("\u0067\u0072\u0061\u006e\u0075\u006c\u0061\u0072\u0069\u007a\u0065\u003a\u0020\u0025\u0064 \u0073u\u0062\u0070\u0061\u0074\u0068\u0020\u0073\u0065\u0063\u0074\u0069\u006f\u006e\u0073",len (_aefd ));
};for _edgba ,_cfcg :=range _aefd {for _agdab ,_febea :=range _cfcg ._ffda {for _dfea ,_bdge :=range _febea ._bdea {_febea ._bdea [_dfea ]=_gd .Point {X :_cdbb (_bdge .X ),Y :_cdbb (_bdge .Y )};if _bbde {_dcgcg :=_febea ._bdea [_dfea ];if !_bcaa (_bdge ,_dcgcg ){_fgdgb :=_gd .Point {X :_dcgcg .X -_bdge .X ,Y :_dcgcg .Y -_bdge .Y };
_bf .Printf ("\u0025\u0034d \u002d\u0020\u00254\u0064\u0020\u002d\u0020%4d\u003a %\u002e\u0032\u0066\u0020\u2192\u0020\u0025.2\u0066\u0020\u0028\u0025\u0067\u0029\u000a",_edgba ,_agdab ,_dfea ,_bdge ,_dcgcg ,_fgdgb );};};};};};};func (_gbfdg *shapesState )fill (_fdc *[]pathSection ){_feadf :=pathSection {_ffda :_gbfdg ._cafd ,Color :_gbfdg ._gace .getFillColor ()};
*_fdc =append (*_fdc ,_feadf );if _bbde {_bbaf :=_feadf .bbox ();_bf .Printf ("\u0020 \u0020\u0020\u0046\u0049\u004c\u004c\u003a %\u0032\u0064\u0020\u0066\u0069\u006c\u006c\u0073\u0020\u0028\u0025\u0064\u0020\u006ee\u0077\u0029 \u0073\u0073\u003d%\u0073\u0020\u0063\u006f\u006c\u006f\u0072\u003d\u0025\u0033\u0076\u0020\u0025\u0036\u002e\u0032f\u003d\u00256.\u0032\u0066\u0078%\u0036\u002e\u0032\u0066\u000a",len (*_fdc ),len (_feadf ._ffda ),_gbfdg ,_feadf .Color ,_bbaf ,_bbaf .Width (),_bbaf .Height ());
if _bggc {for _gbeg ,_edagg :=range _feadf ._ffda {_bf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_gbeg ,_edagg );if _gbeg ==10{break ;};};};};};func (_ge *imageExtractContext )extractContentStreamImages (_cf string ,_da *_fa .PdfPageResources )error {_ddb :=_a .NewContentStreamParser (_cf );
_efg ,_dcd :=_ddb .Parse ();if _dcd !=nil {return _dcd ;};if _ge ._ae ==nil {_ge ._ae =map[*_cc .PdfObjectStream ]*cachedImage {};};if _ge ._fgc ==nil {_ge ._fgc =&ImageExtractOptions {};};_adc :=_a .NewContentStreamProcessor (*_efg );_adc .AddHandler (_a .HandlerConditionEnumAllOperands ,"",_ge .processOperand );
return _adc .Process (_da );};type ruling struct{_bbac rulingKind ;_dfbg markKind ;_b .Color ;_edga float64 ;_cbedg float64 ;_egcbb float64 ;_gfbdd float64 ;};

// String returns a description of `k`.
func (_bece markKind )String ()string {_dabd ,_dddg :=_bfac [_bece ];if !_dddg {return _bf .Sprintf ("\u004e\u006f\u0074\u0020\u0061\u0020\u006d\u0061\u0072k\u003a\u0020\u0025\u0064",_bece );};return _dabd ;};func (_ebbd *subpath )removeDuplicates (){if len (_ebbd ._bdea )==0{return ;
};_fdf :=[]_gd .Point {_ebbd ._bdea [0]};for _ ,_ffag :=range _ebbd ._bdea [1:]{if !_bcaa (_ffag ,_fdf [len (_fdf )-1]){_fdf =append (_fdf ,_ffag );};};_ebbd ._bdea =_fdf ;};

// ExtractText processes and extracts all text data in content streams and returns as a string.
// It takes into account character encodings in the PDF file, which are decoded by
// CharcodeBytesToUnicode.
// Characters that can't be decoded are replaced with MissingCodeRune ('\ufffd' = �).
func (_bdc *Extractor )ExtractText ()(string ,error ){_eeg ,_ ,_ ,_dgb :=_bdc .ExtractTextWithStats ();return _eeg ,_dgb ;};

// String returns a description of `k`.
func (_bggfb rulingKind )String ()string {_faecd ,_bfcb :=_ccge [_bggfb ];if !_bfcb {return _bf .Sprintf ("\u004e\u006ft\u0020\u0061\u0020r\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0025\u0064",_bggfb );};return _faecd ;};func (_dcdf *subpath )clear (){*_dcdf =subpath {}};
func (_gggf *wordBag )applyRemovals (_fgf map[int ]map[*textWord ]struct{}){for _bdbb ,_aacg :=range _fgf {if len (_aacg )==0{continue ;};_egcb :=_gggf ._cfcc [_bdbb ];_dfgc :=len (_egcb )-len (_aacg );if _dfgc ==0{delete (_gggf ._cfcc ,_bdbb );continue ;
};_cbfb :=make ([]*textWord ,_dfgc );_cedg :=0;for _ ,_aae :=range _egcb {if _ ,_bagc :=_aacg [_aae ];!_bagc {_cbfb [_cedg ]=_aae ;_cedg ++;};};_gggf ._cfcc [_bdbb ]=_cbfb ;};};

// String returns a description of `t`.
func (_ddgg *textTable )String ()string {return _bf .Sprintf ("\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0025\u0074",_ddgg ._dffbb ,_ddgg ._fcga ,_ddgg ._dfgeg );};func (_cgfg *textTable )growTable (){_daff :=func (_cbgf paraList ){_cgfg ._fcga ++;
for _gdef :=0;_gdef < _cgfg ._dffbb ;_gdef ++{_fdgef :=_cbgf [_gdef ];_cgfg .put (_gdef ,_cgfg ._fcga -1,_fdgef );};};_adaf :=func (_fadaf paraList ){_cgfg ._dffbb ++;for _gcbc :=0;_gcbc < _cgfg ._fcga ;_gcbc ++{_ffaff :=_fadaf [_gcbc ];_cgfg .put (_cgfg ._dffbb -1,_gcbc ,_ffaff );
};};if _aegd {_cgfg .log ("\u0067r\u006f\u0077\u0054\u0061\u0062\u006ce");};for _bcgg :=0;;_bcgg ++{_agbgg :=false ;_dffd :=_cgfg .getDown ();_fccec :=_cgfg .getRight ();if _aegd {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bcgg ,_cgfg );
_bf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0020\u0064\u006f\u0077\u006e\u003d\u0025\u0073\u000a",_dffd );_bf .Printf ("\u0020\u0020 \u0020\u0020\u0020 \u0072\u0069\u0067\u0068\u0074\u003d\u0025\u0073\u000a",_fccec );};if _dffd !=nil &&_fccec !=nil {_ccfe :=_dffd [len (_dffd )-1];
if _ccfe !=nil &&!_ccfe ._ebgdf &&_ccfe ==_fccec [len (_fccec )-1]{_daff (_dffd );if _fccec =_cgfg .getRight ();_fccec !=nil {_adaf (_fccec );_cgfg .put (_cgfg ._dffbb -1,_cgfg ._fcga -1,_ccfe );};_agbgg =true ;};};if !_agbgg &&_dffd !=nil {_daff (_dffd );
_agbgg =true ;};if !_agbgg &&_fccec !=nil {_adaf (_fccec );_agbgg =true ;};if !_agbgg {break ;};};};func (_cbdb rulingList )mergePrimary ()float64 {_eadfc :=_cbdb [0]._edga ;for _ ,_afcfe :=range _cbdb [1:]{_eadfc +=_afcfe ._edga ;};return _eadfc /float64 (len (_cbdb ));
};func (_ebb pathSection )bbox ()_fa .PdfRectangle {_gbab :=_ebb ._ffda [0]._bdea [0];_bdfe :=_fa .PdfRectangle {Llx :_gbab .X ,Urx :_gbab .X ,Lly :_gbab .Y ,Ury :_gbab .Y };_ege :=func (_dbba _gd .Point ){if _dbba .X < _bdfe .Llx {_bdfe .Llx =_dbba .X ;
}else if _dbba .X > _bdfe .Urx {_bdfe .Urx =_dbba .X ;};if _dbba .Y < _bdfe .Lly {_bdfe .Lly =_dbba .Y ;}else if _dbba .Y > _bdfe .Ury {_bdfe .Ury =_dbba .Y ;};};for _ ,_febaa :=range _ebb ._ffda [0]._bdea [1:]{_ege (_febaa );};for _ ,_fcfe :=range _ebb ._ffda [1:]{for _ ,_cga :=range _fcfe ._bdea {_ege (_cga );
};};return _bdfe ;};

// String returns a description of `w`.
func (_cggbb *textWord )String ()string {return _bf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_cggbb ._aabad ,_cggbb .PdfRectangle ,_cggbb ._fggb ,_cggbb ._cbbb );
};func (_gecgc paraList )extractTables (_eefafe []gridTiling )paraList {if _cgee {_dc .Log .Debug ("\u0065\u0078\u0074r\u0061\u0063\u0074\u0054\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_gecgc ));
};if len (_gecgc )< _aggf {return _gecgc ;};_eegab :=_gecgc .findTables (_eefafe );if _cgee {_dc .Log .Info ("c\u006f\u006d\u0062\u0069\u006e\u0065d\u0020\u0074\u0061\u0062\u006c\u0065s\u0020\u0025\u0064\u0020\u003d\u003d\u003d=\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d=\u003d",len (_eegab ));
for _agedd ,_ecgb :=range _eegab {_ecgb .log (_bf .Sprintf ("c\u006f\u006d\u0062\u0069\u006e\u0065\u0064\u0020\u0025\u0064",_agedd ));};};return _gecgc .applyTables (_eegab );};func (_ddaf *shapesState )quadraticTo (_bcd ,_geag ,_cecc ,_gefgg float64 ){if _ffde {_dc .Log .Info ("\u0071\u0075\u0061d\u0072\u0061\u0074\u0069\u0063\u0054\u006f\u003a");
};_ddaf .addPoint (_cecc ,_gefgg );};func _edg (_gagd ,_afa bounded )float64 {_agd :=_gccf (_gagd ,_afa );if !_bffed (_agd ){return _agd ;};return _gcdb (_gagd ,_afa );};func (_aedg *shapesState )addPoint (_ebcf ,_abfa float64 ){_ddd :=_aedg .establishSubpath ();
_ceed :=_aedg .devicePoint (_ebcf ,_abfa );if _ddd ==nil {_aedg ._ebeg =true ;_aedg ._aeca =_ceed ;}else {_ddd .add (_ceed );};};func (_gcagc *subpath )makeRectRuling (_dgdg _b .Color )(*ruling ,bool ){if _badac {_dc .Log .Info ("\u006d\u0061\u006beR\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006e\u0067\u003a\u0020\u0070\u0061\u0074\u0068\u003d\u0025\u0076",_gcagc );
};_befda :=_gcagc ._bdea [:4];_dfggg :=make (map[int ]rulingKind ,len (_befda ));for _fefc ,_gbgb :=range _befda {_ggab :=_gcagc ._bdea [(_fefc +1)%4];_dfggg [_fefc ]=_efcc (_gbgb ,_ggab );if _badac {_bf .Printf ("\u0025\u0034\u0064: \u0025\u0073\u0020\u003d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066",_fefc ,_dfggg [_fefc ],_gbgb ,_ggab );
};};if _badac {_bf .Printf ("\u0020\u0020\u0020\u006b\u0069\u006e\u0064\u0073\u003d\u0025\u002b\u0076\u000a",_dfggg );};var _agbg ,_fedg []int ;for _ceccc ,_dbadfg :=range _dfggg {switch _dbadfg {case _cbaaf :_fedg =append (_fedg ,_ceccc );case _bffc :_agbg =append (_agbg ,_ceccc );
};};if _badac {_bf .Printf ("\u0020\u0020 \u0068\u006f\u0072z\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_fedg ),_fedg );_bf .Printf ("\u0020\u0020 \u0076\u0065\u0072t\u0073\u003d\u0025\u0064\u0020\u0025\u002b\u0076\u000a",len (_agbg ),_agbg );
};_efgf :=(len (_fedg )==2&&len (_agbg )==2)||(len (_fedg )==2&&len (_agbg )==0&&_fafcc (_befda [_fedg [0]],_befda [_fedg [1]]))||(len (_agbg )==2&&len (_fedg )==0&&_bdce (_befda [_agbg [0]],_befda [_agbg [1]]));if _badac {_bf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_fedg ),len (_agbg ),_efgf );
};if !_efgf {if _badac {_dc .Log .Error ("\u0021!\u006d\u0061\u006b\u0065R\u0065\u0063\u0074\u0052\u0075l\u0069n\u0067:\u0020\u0070\u0061\u0074\u0068\u003d\u0025v",_gcagc );_bf .Printf (" \u0020\u0020\u0068\u006f\u0072\u007as\u003d\u0025\u0064\u0020\u0076\u0065\u0072\u0074\u0073=\u0025\u0064\u0020o\u006b=\u0025\u0074\u000a",len (_fedg ),len (_agbg ),_efgf );
};return &ruling {},false ;};if len (_agbg )==0{for _bgdd ,_feadg :=range _dfggg {if _feadg !=_cbaaf {_agbg =append (_agbg ,_bgdd );};};};if len (_fedg )==0{for _edbd ,_cgcf :=range _dfggg {if _cgcf !=_bffc {_fedg =append (_fedg ,_edbd );};};};if _badac {_dc .Log .Info ("\u006da\u006b\u0065R\u0065\u0063\u0074\u0052u\u006c\u0069\u006eg\u003a\u0020\u0068\u006f\u0072\u007a\u0073\u003d\u0025d \u0076\u0065\u0072t\u0073\u003d%\u0064\u0020\u0070\u006f\u0069\u006et\u0073\u003d%\u0064\u000a"+"\u0009\u0020\u0068o\u0072\u007a\u0073\u003d\u0025\u002b\u0076\u000a"+"\u0009\u0020\u0076e\u0072\u0074\u0073\u003d\u0025\u002b\u0076\u000a"+"\t\u0070\u006f\u0069\u006e\u0074\u0073\u003d\u0025\u002b\u0076",len (_fedg ),len (_agbg ),len (_befda ),_fedg ,_agbg ,_befda );
};var _aadbf ,_ccef ,_gdbc ,_bfbbgc _gd .Point ;if _befda [_fedg [0]].Y > _befda [_fedg [1]].Y {_gdbc ,_bfbbgc =_befda [_fedg [0]],_befda [_fedg [1]];}else {_gdbc ,_bfbbgc =_befda [_fedg [1]],_befda [_fedg [0]];};if _befda [_agbg [0]].X > _befda [_agbg [1]].X {_aadbf ,_ccef =_befda [_agbg [0]],_befda [_agbg [1]];
}else {_aadbf ,_ccef =_befda [_agbg [1]],_befda [_agbg [0]];};_agfde :=_fa .PdfRectangle {Llx :_aadbf .X ,Urx :_ccef .X ,Lly :_bfbbgc .Y ,Ury :_gdbc .Y };if _agfde .Llx > _agfde .Urx {_agfde .Llx ,_agfde .Urx =_agfde .Urx ,_agfde .Llx ;};if _agfde .Lly > _agfde .Ury {_agfde .Lly ,_agfde .Ury =_agfde .Ury ,_agfde .Lly ;
};_cdcaf :=rectRuling {PdfRectangle :_agfde ,_bfbba :_ddbaa (_agfde ),Color :_dgdg };if _cdcaf ._bfbba ==_fdgf {if _badac {_dc .Log .Error ("\u006da\u006b\u0065\u0052\u0065\u0063\u0074\u0052\u0075\u006c\u0069\u006eg\u003a\u0020\u006b\u0069\u006e\u0064\u003d\u006e\u0069\u006c");
};return nil ,false ;};_fada ,_ddbdd :=_cdcaf .asRuling ();if !_ddbdd {if _badac {_dc .Log .Error ("\u006da\u006b\u0065\u0052\u0065c\u0074\u0052\u0075\u006c\u0069n\u0067:\u0020!\u0069\u0073\u0052\u0075\u006c\u0069\u006eg");};return nil ,false ;};if _bbde {_bf .Printf ("\u0020\u0020\u0020\u0072\u003d\u0025\u0073\u000a",_fada .String ());
};return _fada ,true ;};func (_bdd *textObject )setWordSpacing (_gbfd float64 ){if _bdd ==nil {return ;};_bdd ._cde ._egg =_gbfd ;};type fontEntry struct{_beg *_fa .PdfFont ;_efeb int64 ;};func _acad (_aeag _fa .PdfRectangle ,_baea ,_afggc ,_eebg ,_eaffe *ruling )gridTile {_cegd :=_aeag .Llx ;
_fbee :=_aeag .Urx ;_ecdg :=_aeag .Lly ;_cebff :=_aeag .Ury ;return gridTile {PdfRectangle :_aeag ,_bbddf :_baea !=nil &&_baea .encloses (_ecdg ,_cebff ),_egdd :_afggc !=nil &&_afggc .encloses (_ecdg ,_cebff ),_egad :_eebg !=nil &&_eebg .encloses (_cegd ,_fbee ),_gcde :_eaffe !=nil &&_eaffe .encloses (_cegd ,_fbee )};
};func (_gfbddc *textTable )compositeColCorridors ()map[int ][]float64 {_cebg :=make (map[int ][]float64 ,_gfbddc ._dffbb );if _cgee {_dc .Log .Info ("\u0063\u006f\u006d\u0070o\u0073\u0069\u0074\u0065\u0043\u006f\u006c\u0043\u006f\u0072r\u0069d\u006f\u0072\u0073\u003a\u0020\u0077\u003d%\u0064\u0020",_gfbddc ._dffbb );
};for _deafd :=0;_deafd < _gfbddc ._dffbb ;_deafd ++{_cebg [_deafd ]=nil ;};return _cebg ;};func (_cae *wordBag )makeRemovals ()map[int ]map[*textWord ]struct{}{_dbd :=make (map[int ]map[*textWord ]struct{},len (_cae ._cfcc ));for _gddb :=range _cae ._cfcc {_dbd [_gddb ]=make (map[*textWord ]struct{});
};return _dbd ;};func (_bdgd paraList )addNeighbours (){_ffdg :=func (_ebfd []int ,_efed *textPara )([]*textPara ,[]*textPara ){_feafge :=make ([]*textPara ,0,len (_ebfd )-1);_bedd :=make ([]*textPara ,0,len (_ebfd )-1);for _ ,_bacd :=range _ebfd {_fdgecc :=_bdgd [_bacd ];
if _fdgecc .Urx <=_efed .Llx {_feafge =append (_feafge ,_fdgecc );}else if _fdgecc .Llx >=_efed .Urx {_bedd =append (_bedd ,_fdgecc );};};return _feafge ,_bedd ;};_gdbb :=func (_dffdf []int ,_ggce *textPara )([]*textPara ,[]*textPara ){_egbc :=make ([]*textPara ,0,len (_dffdf )-1);
_ddga :=make ([]*textPara ,0,len (_dffdf )-1);for _ ,_bbafc :=range _dffdf {_efebb :=_bdgd [_bbafc ];if _efebb .Ury <=_ggce .Lly {_ddga =append (_ddga ,_efebb );}else if _efebb .Lly >=_ggce .Ury {_egbc =append (_egbc ,_efebb );};};return _egbc ,_ddga ;
};_bcff :=_bdgd .yNeighbours (_affd );for _ ,_cgaf :=range _bdgd {_abge :=_bcff [_cgaf ];if len (_abge )==0{continue ;};_cdbe ,_adbb :=_ffdg (_abge ,_cgaf );if len (_cdbe )==0&&len (_adbb )==0{continue ;};if len (_cdbe )> 0{_adgf :=_cdbe [0];for _ ,_cgggf :=range _cdbe [1:]{if _cgggf .Urx >=_adgf .Urx {_adgf =_cgggf ;
};};for _ ,_ccfge :=range _cdbe {if _ccfge !=_adgf &&_ccfge .Urx > _adgf .Llx {_adgf =nil ;break ;};};if _adgf !=nil &&_gfbb (_cgaf .PdfRectangle ,_adgf .PdfRectangle ){_cgaf ._gebe =_adgf ;};};if len (_adbb )> 0{_bfbgf :=_adbb [0];for _ ,_cfgf :=range _adbb [1:]{if _cfgf .Llx <=_bfbgf .Llx {_bfbgf =_cfgf ;
};};for _ ,_ccbc :=range _adbb {if _ccbc !=_bfbgf &&_ccbc .Llx < _bfbgf .Urx {_bfbgf =nil ;break ;};};if _bfbgf !=nil &&_gfbb (_cgaf .PdfRectangle ,_bfbgf .PdfRectangle ){_cgaf ._fagc =_bfbgf ;};};};_bcff =_bdgd .xNeighbours (_bccag );for _ ,_dfeea :=range _bdgd {_efga :=_bcff [_dfeea ];
if len (_efga )==0{continue ;};_cgaea ,_dbgbg :=_gdbb (_efga ,_dfeea );if len (_cgaea )==0&&len (_dbgbg )==0{continue ;};if len (_dbgbg )> 0{_cbbd :=_dbgbg [0];for _ ,_fabgc :=range _dbgbg [1:]{if _fabgc .Ury >=_cbbd .Ury {_cbbd =_fabgc ;};};for _ ,_aagde :=range _dbgbg {if _aagde !=_cbbd &&_aagde .Ury > _cbbd .Lly {_cbbd =nil ;
break ;};};if _cbbd !=nil &&_bdfee (_dfeea .PdfRectangle ,_cbbd .PdfRectangle ){_dfeea ._cdedb =_cbbd ;};};if len (_cgaea )> 0{_ffafa :=_cgaea [0];for _ ,_bfbag :=range _cgaea [1:]{if _bfbag .Lly <=_ffafa .Lly {_ffafa =_bfbag ;};};for _ ,_dgbcf :=range _cgaea {if _dgbcf !=_ffafa &&_dgbcf .Lly < _ffafa .Ury {_ffafa =nil ;
break ;};};if _ffafa !=nil &&_bdfee (_dfeea .PdfRectangle ,_ffafa .PdfRectangle ){_dfeea ._abbe =_ffafa ;};};};for _ ,_abbed :=range _bdgd {if _abbed ._gebe !=nil &&_abbed ._gebe ._fagc !=_abbed {_abbed ._gebe =nil ;};if _abbed ._abbe !=nil &&_abbed ._abbe ._cdedb !=_abbed {_abbed ._abbe =nil ;
};if _abbed ._fagc !=nil &&_abbed ._fagc ._gebe !=_abbed {_abbed ._fagc =nil ;};if _abbed ._cdedb !=nil &&_abbed ._cdedb ._abbe !=_abbed {_abbed ._cdedb =nil ;};};};

// RangeOffset returns the TextMarks in `ma` that overlap text[start:end] in the extracted text.
// These are tm: `start` <= tm.Offset + len(tm.Text) && tm.Offset < `end` where
// `start` and `end` are offsets in the extracted text.
// NOTE: TextMarks can contain multiple characters. e.g. "ffi" for the ﬃ ligature so the first and
// last elements of the returned TextMarkArray may only partially overlap text[start:end].
func (_bae *TextMarkArray )RangeOffset (start ,end int )(*TextMarkArray ,error ){if _bae ==nil {return nil ,_de .New ("\u006da\u003d\u003d\u006e\u0069\u006c");};if end < start {return nil ,_bf .Errorf ("\u0065\u006e\u0064\u0020\u003c\u0020\u0073\u0074\u0061\u0072\u0074\u002e\u0020\u0052\u0061n\u0067\u0065\u004f\u0066\u0066\u0073\u0065\u0074\u0020\u006e\u006f\u0074\u0020d\u0065\u0066\u0069\u006e\u0065\u0064\u002e\u0020\u0073\u0074\u0061\u0072t=\u0025\u0064\u0020\u0065\u006e\u0064\u003d\u0025\u0064\u0020",start ,end );
};_agcb :=len (_bae ._gaea );if _agcb ==0{return _bae ,nil ;};if start < _bae ._gaea [0].Offset {start =_bae ._gaea [0].Offset ;};if end > _bae ._gaea [_agcb -1].Offset +1{end =_bae ._gaea [_agcb -1].Offset +1;};_aebb :=_g .Search (_agcb ,func (_abbf int )bool {return _bae ._gaea [_abbf ].Offset +len (_bae ._gaea [_abbf ].Text )-1>=start });
if !(0<=_aebb &&_aebb < _agcb ){_fcdd :=_bf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020\u0072\u0061\u006e\u0067\u0065\u002e\u0020\u0073\u0074\u0061\u0072\u0074\u003d%\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009 \u006c\u0061\u0073\u0074\u003d%\u0076",start ,_aebb ,_agcb ,_bae ._gaea [0],_bae ._gaea [_agcb -1]);
return nil ,_fcdd ;};_bbc :=_g .Search (_agcb ,func (_fae int )bool {return _bae ._gaea [_fae ].Offset > end -1});if !(0<=_bbc &&_bbc < _agcb ){_fcbe :=_bf .Errorf ("\u004f\u0075\u0074\u0020\u006f\u0066\u0020r\u0061\u006e\u0067e\u002e\u0020\u0065n\u0064\u003d%\u0064\u0020\u0069\u0045\u006e\u0064=\u0025d \u006c\u0065\u006e\u003d\u0025\u0064\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025\u0076\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d\u0025\u0076",end ,_bbc ,_agcb ,_bae ._gaea [0],_bae ._gaea [_agcb -1]);
return nil ,_fcbe ;};if _bbc <=_aebb {return nil ,_bf .Errorf ("\u0069\u0045\u006e\u0064\u0020\u003c=\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003a\u0020\u0073\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020\u0065\u006ed\u003d\u0025\u0064\u0020\u0069\u0053\u0074\u0061\u0072\u0074\u003d\u0025\u0064\u0020i\u0045n\u0064\u003d\u0025\u0064",start ,end ,_aebb ,_bbc );
};return &TextMarkArray {_gaea :_bae ._gaea [_aebb :_bbc ]},nil ;};func _afgg (_ccbf ,_gfffc *textPara )bool {if _ccbf ._cedecf ||_gfffc ._cedecf {return true ;};return _bffed (_ccbf .depth ()-_gfffc .depth ());};type textLine struct{_fa .PdfRectangle ;
_bgac float64 ;_efce []*textWord ;_adad float64 ;};func (_cbbf *wordBag )removeWord (_efdc *textWord ,_bcbb int ){_ecae :=_cbbf ._cfcc [_bcbb ];_ecae =_edfc (_ecae ,_efdc );if len (_ecae )==0{delete (_cbbf ._cfcc ,_bcbb );}else {_cbbf ._cfcc [_bcbb ]=_ecae ;
};};func _baag (_gfeab map[float64 ]map[float64 ]gridTile )[]float64 {_fdbg :=make ([]float64 ,0,len (_gfeab ));_dgega :=make (map[float64 ]struct{},len (_gfeab ));for _ ,_ffac :=range _gfeab {for _cgfe :=range _ffac {if _ ,_gafc :=_dgega [_cgfe ];_gafc {continue ;
};_fdbg =append (_fdbg ,_cgfe );_dgega [_cgfe ]=struct{}{};};};_g .Float64s (_fdbg );return _fdbg ;};func (_fefe *textLine )markWordBoundaries (){_feef :=_bggf *_fefe ._adad ;for _aabef ,_acea :=range _fefe ._efce [1:]{if _befg (_acea ,_fefe ._efce [_aabef ])>=_feef {_acea ._bdfcc =true ;
};};};type compositeCell struct{_fa .PdfRectangle ;paraList ;};func (_dgc *wordBag )firstWord (_fcaa int )*textWord {return _dgc ._cfcc [_fcaa ][0]};func _eeaf (_gcfa map[int ][]float64 )string {_cdad :=_bafae (_gcfa );_cdba :=make ([]string ,len (_gcfa ));
for _gbbb ,_afbcc :=range _cdad {_cdba [_gbbb ]=_bf .Sprintf ("\u0025\u0064\u003a\u0020\u0025\u002e\u0032\u0066",_afbcc ,_gcfa [_afbcc ]);};return _bf .Sprintf ("\u007b\u0025\u0073\u007d",_ce .Join (_cdba ,"\u002c\u0020"));};func (_cefb *textObject )reset (){_cefb ._gfgc =_gd .IdentityMatrix ();
_cefb ._gcd =_gd .IdentityMatrix ();_cefb ._abgbf =nil ;};func (_cecbb *textPara )toTextMarks (_bege *int )[]TextMark {if _cecbb ._afcc ==nil {return _cecbb .toCellTextMarks (_bege );};var _edbf []TextMark ;for _eddd :=0;_eddd < _cecbb ._afcc ._fcga ;_eddd ++{for _aga :=0;
_aga < _cecbb ._afcc ._dffbb ;_aga ++{_gfce :=_cecbb ._afcc .get (_aga ,_eddd );if _gfce ==nil {_edbf =_gbg (_edbf ,_bege ,"\u0009");}else {_gaeg :=_gfce .toCellTextMarks (_bege );_edbf =append (_edbf ,_gaeg ...);};_edbf =_gbg (_edbf ,_bege ,"\u0020");
};if _eddd < _cecbb ._afcc ._fcga -1{_edbf =_gbg (_edbf ,_bege ,"\u000a");};};return _edbf ;};

// Text returns the extracted page text.
func (_ffbc PageText )Text ()string {return _ffbc ._bef };func (_gda *ruling )equals (_egcfg *ruling )bool {return _gda ._bbac ==_egcfg ._bbac &&_ggee (_gda ._edga ,_egcfg ._edga )&&_ggee (_gda ._cbedg ,_egcfg ._cbedg )&&_ggee (_gda ._egcbb ,_egcfg ._egcbb );
};func (_aaec gridTile )complete ()bool {return _aaec .numBorders ()==4};

// String returns a description of `v`.
func (_aegce *ruling )String ()string {if _aegce ._bbac ==_fdgf {return "\u004e\u004f\u0054\u0020\u0052\u0055\u004c\u0049\u004e\u0047";};_bdcc ,_cefgf :="\u0078","\u0079";if _aegce ._bbac ==_cbaaf {_bdcc ,_cefgf ="\u0079","\u0078";};_cebf :="";if _aegce ._gfbdd !=0.0{_cebf =_bf .Sprintf (" \u0077\u0069\u0064\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_aegce ._gfbdd );
};return _bf .Sprintf ("\u0025\u00310\u0073\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u0020\u002d\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0020\u0025\u0076\u0025\u0073",_aegce ._bbac ,_bdcc ,_aegce ._edga ,_cefgf ,_aegce ._cbedg ,_aegce ._egcbb ,_aegce ._egcbb -_aegce ._cbedg ,_aegce ._dfbg ,_aegce .Color ,_cebf );
};func (_cabc *textPara )fontsize ()float64 {return _cabc ._dcdd [0]._adad };func _gbcdb (_edea _fa .PdfRectangle ,_aafc []*textLine )*textPara {return &textPara {PdfRectangle :_edea ,_dcdd :_aafc };};func (_gcbbf *textWord )addDiacritic (_dgab string ){_caceg :=_gcbbf ._bffcd [len (_gcbbf ._bffcd )-1];
_caceg ._bfea +=_dgab ;_caceg ._bfea =_fg .NFKC .String (_caceg ._bfea );};func (_cgddg paraList )findTables (_bagg []gridTiling )[]*textTable {_cgddg .addNeighbours ();_g .Slice (_cgddg ,func (_faag ,_dbgb int )bool {return _edg (_cgddg [_faag ],_cgddg [_dbgb ])< 0});
var _bbdfd []*textTable ;if _eeee {_cfcb :=_cgddg .findGridTables (_bagg );_bbdfd =append (_bbdfd ,_cfcb ...);};if _ggf {_dcbfb :=_cgddg .findTextTables ();_bbdfd =append (_bbdfd ,_dcbfb ...);};return _bbdfd ;};func (_gcag lineRuling )asRuling ()(*ruling ,bool ){_aceb :=ruling {_bbac :_gcag ._cefgc ,Color :_gcag .Color ,_dfbg :_dbcee };
switch _gcag ._cefgc {case _bffc :_aceb ._edga =_gcag .xMean ();_aceb ._cbedg =_gf .Min (_gcag ._defeb .Y ,_gcag ._bccgd .Y );_aceb ._egcbb =_gf .Max (_gcag ._defeb .Y ,_gcag ._bccgd .Y );case _cbaaf :_aceb ._edga =_gcag .yMean ();_aceb ._cbedg =_gf .Min (_gcag ._defeb .X ,_gcag ._bccgd .X );
_aceb ._egcbb =_gf .Max (_gcag ._defeb .X ,_gcag ._bccgd .X );default:_dc .Log .Error ("\u0062\u0061\u0064\u0020pr\u0069\u006d\u0061\u0072\u0079\u0020\u006b\u0069\u006e\u0064\u003d\u0025\u0064",_gcag ._cefgc );return nil ,false ;};return &_aceb ,true ;
};func (_efaa *shapesState )devicePoint (_gdc ,_afc float64 )_gd .Point {_bbgf :=_efaa ._gbcb .Mult (_efaa ._bbga );_gdc ,_afc =_bbgf .Transform (_gdc ,_afc );return _gd .NewPoint (_gdc ,_afc );};func _ffeb (_febg []*textMark ,_fffde _fa .PdfRectangle ,_ggac rulingList ,_aag []gridTiling )paraList {_dc .Log .Trace ("\u006d\u0061\u006b\u0065\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065\u003a \u0025\u0064\u0020\u0065\u006c\u0065m\u0065\u006e\u0074\u0073\u0020\u0070\u0061\u0067\u0065\u0053\u0069\u007a\u0065=\u0025\u002e\u0032\u0066",len (_febg ),_fffde );
if len (_febg )==0{return nil ;};_cgea :=_agea (_febg ,_fffde );if len (_cgea )==0{return nil ;};_ggac .log ("\u006d\u0061\u006be\u0054\u0065\u0078\u0074\u0050\u0061\u0067\u0065");_befb ,_geeb :=_ggac .vertsHorzs ();_afddc :=_acgf (_cgea ,_fffde .Ury ,_befb ,_geeb );
_caab :=_aegb (_afddc ,_fffde .Ury ,_befb ,_geeb );_caab =_gbcd (_caab );_gade :=make (paraList ,0,len (_caab ));for _ ,_gedb :=range _caab {_cfcd :=_gedb .arrangeText ();if _cfcd !=nil {_gade =append (_gade ,_cfcd );};};if len (_gade )>=_aggf {_gade =_gade .extractTables (_aag );
};_gade .sortReadingOrder ();_gade .log ("\u0073\u006f\u0072te\u0064\u0020\u0069\u006e\u0020\u0072\u0065\u0061\u0064\u0069\u006e\u0067\u0020\u006f\u0072\u0064\u0065\u0072");return _gade ;};func (_ddbbc *textObject )getFont (_dcfa string )(*_fa .PdfFont ,error ){if _ddbbc ._bccg ._gfe !=nil {_ddbbc ._bccg ._dd ++;
_dcab ,_cfdf :=_ddbbc ._bccg ._gfe [_dcfa ];if _cfdf {_dcab ._efeb =_ddbbc ._bccg ._dd ;return _dcab ._beg ,nil ;};};_bfe ,_dgfd :=_ddbbc .getFontDirect (_dcfa );if _dgfd !=nil {return nil ,_dgfd ;};if _ddbbc ._bccg ._gfe !=nil {_cddc :=fontEntry {_bfe ,_ddbbc ._bccg ._dd };
if len (_ddbbc ._bccg ._gfe )>=_fab {var _efee []string ;for _becg :=range _ddbbc ._bccg ._gfe {_efee =append (_efee ,_becg );};_g .Slice (_efee ,func (_cefc ,_cgeb int )bool {return _ddbbc ._bccg ._gfe [_efee [_cefc ]]._efeb < _ddbbc ._bccg ._gfe [_efee [_cgeb ]]._efeb ;
});delete (_ddbbc ._bccg ._gfe ,_efee [0]);};_ddbbc ._bccg ._gfe [_dcfa ]=_cddc ;};return _bfe ,nil ;};func (_bcdb *wordBag )depthRange (_gcc ,_dfc int )[]int {var _debeb []int ;for _aedb :=range _bcdb ._cfcc {if _gcc <=_aedb &&_aedb <=_dfc {_debeb =append (_debeb ,_aedb );
};};if len (_debeb )==0{return nil ;};_g .Ints (_debeb );return _debeb ;};

// String returns a string describing `ma`.
func (_dbg TextMarkArray )String ()string {_bgbbg :=len (_dbg ._gaea );if _bgbbg ==0{return "\u0045\u004d\u0050T\u0059";};_feac :=_dbg ._gaea [0];_cafa :=_dbg ._gaea [_bgbbg -1];return _bf .Sprintf ("\u007b\u0054\u0045\u0058\u0054\u004d\u0041\u0052K\u0041\u0052\u0052AY\u003a\u0020\u0025\u0064\u0020\u0065l\u0065\u006d\u0065\u006e\u0074\u0073\u000a\u0009\u0066\u0069\u0072\u0073\u0074\u003d\u0025s\u000a\u0009\u0020\u006c\u0061\u0073\u0074\u003d%\u0073\u007d",_bgbbg ,_feac ,_cafa );
};func (_ddbc *Extractor )extractPageText (_gbc string ,_eef *_fa .PdfPageResources ,_daa _gd .Matrix ,_efa int )(*PageText ,int ,int ,error ){_dc .Log .Trace ("\u0065x\u0074\u0072\u0061\u0063t\u0050\u0061\u0067\u0065\u0054e\u0078t\u003a \u006c\u0065\u0076\u0065\u006c\u003d\u0025d",_efa );
_aea :=&PageText {_ccfa :_ddbc ._ba };_efe :=_dbaf (_ddbc ._ba );var _ebg stateStack ;_cdc :=_cdgd (_ddbc ,_eef ,_a .GraphicsState {},&_efe ,&_ebg );_bgg :=shapesState {_gbcb :_daa ,_bbga :_gd .IdentityMatrix (),_gace :_cdc };var _cad bool ;if _efa > _adbd {_bbg :=_de .New ("\u0066\u006f\u0072\u006d s\u0074\u0061\u0063\u006b\u0020\u006f\u0076\u0065\u0072\u0066\u006c\u006f\u0077");
_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0065\u0078\u0074\u0072\u0061\u0063\u0074\u0050\u0061\u0067\u0065\u0054\u0065\u0078\u0074\u002e\u0020\u0072\u0065\u0063u\u0072\u0073\u0069\u006f\u006e\u0020\u006c\u0065\u0076\u0065\u006c\u003d\u0025\u0064 \u0065r\u0072\u003d\u0025\u0076",_efa ,_bbg );
return _aea ,_efe ._ggc ,_efe ._ebeb ,_bbg ;};_def :=_a .NewContentStreamParser (_gbc );_ecf ,_cee :=_def .Parse ();if _cee !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020e\u0078\u0074\u0072a\u0063\u0074\u0050\u0061g\u0065\u0054\u0065\u0078\u0074\u0020\u0070\u0061\u0072\u0073\u0065\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cee );
return _aea ,_efe ._ggc ,_efe ._ebeb ,_cee ;};_acd :=_a .NewContentStreamProcessor (*_ecf );_acd .AddHandler (_a .HandlerConditionEnumAllOperands ,"",func (_cce *_a .ContentStreamOperation ,_ecg _a .GraphicsState ,_gddd *_fa .PdfPageResources )error {_gef :=_cce .Operand ;
if _bdbc {_dc .Log .Info ("\u0026&\u0026\u0020\u006f\u0070\u003d\u0025s",_cce );};switch _gef {case "\u0071":if _ffde {_dc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgg ._bbga );};_ebg .push (&_efe );case "\u0051":if !_ebg .empty (){_efe =*_ebg .pop ();
};_bgg ._bbga =_ecg .CTM ;if _ffde {_dc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgg ._bbga );};case "\u0042\u0054":if _cad {_dc .Log .Debug ("\u0042\u0054\u0020\u0063\u0061\u006c\u006c\u0065\u0064\u0020\u0077\u0068\u0069\u006c\u0065 \u0069n\u0020\u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
_aea ._aefg =append (_aea ._aefg ,_cdc ._abgbf ...);};_cad =true ;_ega :=_ecg ;_ega .CTM =_daa .Mult (_ega .CTM );_cdc =_cdgd (_ddbc ,_gddd ,_ega ,&_efe ,&_ebg );_bgg ._gace =_cdc ;case "\u0045\u0054":if !_cad {_dc .Log .Debug ("\u0045\u0054\u0020ca\u006c\u006c\u0065\u0064\u0020\u006f\u0075\u0074\u0073i\u0064e\u0020o\u0066 \u0061\u0020\u0074\u0065\u0078\u0074\u0020\u006f\u0062\u006a\u0065\u0063\u0074");
};_cad =false ;_aea ._aefg =append (_aea ._aefg ,_cdc ._abgbf ...);_cdc .reset ();case "\u0054\u002a":_cdc .nextLine ();case "\u0054\u0064":if _cef ,_bda :=_cdc .checkOp (_cce ,2,true );!_cef {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bda );
return _bda ;};_adg ,_egf ,_ccff :=_fbccc (_cce .Params );if _ccff !=nil {return _ccff ;};_cdc .moveText (_adg ,_egf );case "\u0054\u0044":if _gba ,_bec :=_cdc .checkOp (_cce ,2,true );!_gba {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bec );
return _bec ;};_dea ,_cgd ,_bgb :=_fbccc (_cce .Params );if _bgb !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bgb );return _bgb ;};_cdc .moveTextSetLeading (_dea ,_cgd );case "\u0054\u006a":if _ceg ,_bge :=_cdc .checkOp (_cce ,1,true );
!_ceg {_dc .Log .Debug ("\u0045\u0052\u0052\u004fR:\u0020\u0054\u006a\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0065\u0072\u0072\u003d%\u0076",_cce ,_bge );return _bge ;};_dcbg ,_bbf :=_cc .GetStringBytes (_cce .Params [0]);if !_bbf {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a\u0020T\u006a\u0020o\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074S\u0074\u0072\u0069\u006e\u0067\u0042\u0079\u0074\u0065\u0073\u0020\u0066a\u0069\u006c\u0065\u0064",_cce );
return _cc .ErrTypeError ;};return _cdc .showText (_dcbg );case "\u0054\u004a":if _ed ,_cfe :=_cdc .checkOp (_cce ,1,true );!_ed {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cfe );return _cfe ;
};_gdb ,_cec :=_cc .GetArray (_cce .Params [0]);if !_cec {_dc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0054\u004a\u0020\u006f\u0070\u003d\u0025s\u0020G\u0065t\u0041r\u0072\u0061\u0079\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cce );
return _cee ;};return _cdc .showTextAdjusted (_gdb );case "\u0027":if _ebc ,_acb :=_cdc .checkOp (_cce ,1,true );!_ebc {_dc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0027\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_acb );return _acb ;};_ggd ,_gbe :=_cc .GetStringBytes (_cce .Params [0]);
if !_gbe {_dc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020'\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_cce );return _cc .ErrTypeError ;};_cdc .nextLine ();return _cdc .showText (_ggd );
case "\u0022":if _aa ,_gdf :=_cdc .checkOp (_cce ,3,true );!_aa {_dc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u0022\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gdf );return _gdf ;};_gge ,_dgbb ,_gcf :=_fbccc (_cce .Params [:2]);if _gcf !=nil {return _gcf ;
};_fde ,_fdd :=_cc .GetStringBytes (_cce .Params [2]);if !_fdd {_dc .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020\"\u0020\u006f\u0070\u003d%s \u0047et\u0053\u0074\u0072\u0069\u006e\u0067\u0042yt\u0065\u0073\u0020\u0066\u0061\u0069\u006ce\u0064",_cce );
return _cc .ErrTypeError ;};_cdc .setCharSpacing (_gge );_cdc .setWordSpacing (_dgbb );_cdc .nextLine ();return _cdc .showText (_fde );case "\u0054\u004c":_eegf ,_cgg :=_eced (_cce );if _cgg !=nil {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u004c\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cgg );
return _cgg ;};_cdc .setTextLeading (_eegf );case "\u0054\u0063":_cadb ,_fad :=_eced (_cce );if _fad !=nil {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0063\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_fad );return _fad ;};_cdc .setCharSpacing (_cadb );
case "\u0054\u0066":if _cfb ,_degb :=_cdc .checkOp (_cce ,2,true );!_cfb {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0066\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_degb );return _degb ;};_gfeg ,_ccfg :=_cc .GetNameVal (_cce .Params [0]);
if !_ccfg {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a \u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u004ea\u006d\u0065\u0056\u0061\u006c\u0020\u0066a\u0069\u006c\u0065\u0064",_cce );return _cc .ErrTypeError ;};_deff ,_abb :=_cc .GetNumberAsFloat (_cce .Params [1]);
if !_ccfg {_dc .Log .Debug ("\u0045\u0052\u0052O\u0052\u003a\u0020\u0054\u0066\u0020\u006f\u0070\u003d\u0025\u0073\u0020\u0047\u0065\u0074\u0046\u006c\u006f\u0061\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065d\u002e\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_cce ,_abb );
return _abb ;};_abb =_cdc .setFont (_gfeg ,_deff );_cdc ._cggc =_dcf .Is (_abb ,_cc .ErrNotSupported );if _abb !=nil &&!_cdc ._cggc {return _abb ;};case "\u0054\u006d":if _cfbc ,_edf :=_cdc .checkOp (_cce ,6,true );!_cfbc {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u006d\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_edf );
return _edf ;};_gacb ,_gca :=_cc .GetNumbersAsFloat (_cce .Params );if _gca !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gca );return _gca ;};_cdc .setTextMatrix (_gacb );case "\u0054\u0072":if _fbc ,_gee :=_cdc .checkOp (_cce ,1,true );
!_fbc {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0072\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_gee );return _gee ;};_aba ,_fca :=_cc .GetIntVal (_cce .Params [0]);if !_fca {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0072\u0020\u006f\u0070\u003d\u0025\u0073 \u0047e\u0074\u0049\u006e\u0074\u0056\u0061\u006c\u0020\u0066\u0061\u0069\u006c\u0065\u0064",_cce );
return _cc .ErrTypeError ;};_cdc .setTextRenderMode (_aba );case "\u0054\u0073":if _gacc ,_eeb :=_cdc .checkOp (_cce ,1,true );!_gacc {_dc .Log .Debug ("\u0045\u0052R\u004f\u0052\u003a \u0054\u0073\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_eeb );return _eeb ;
};_ced ,_bbd :=_cc .GetNumberAsFloat (_cce .Params [0]);if _bbd !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_bbd );return _bbd ;};_cdc .setTextRise (_ced );case "\u0054\u0077":if _eda ,_aeb :=_cdc .checkOp (_cce ,1,true );
!_eda {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_aeb );return _aeb ;};_bcc ,_agc :=_cc .GetNumberAsFloat (_cce .Params [0]);if _agc !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_agc );
return _agc ;};_cdc .setWordSpacing (_bcc );case "\u0054\u007a":if _agf ,_ade :=_cdc .checkOp (_cce ,1,true );!_agf {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_ade );return _ade ;};_dcg ,_af :=_cc .GetNumberAsFloat (_cce .Params [0]);
if _af !=nil {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_af );return _af ;};_cdc .setHorizScaling (_dcg );case "\u0063\u006d":_bgg ._bbga =_ecg .CTM ;if _bgg ._bbga .Singular (){_eeff :=_gd .IdentityMatrix ().Translate (_bgg ._bbga .Translation ());
_dc .Log .Debug ("S\u0069n\u0067\u0075\u006c\u0061\u0072\u0020\u0063\u0074m\u003d\u0025\u0073\u2192%s",_bgg ._bbga ,_eeff );_bgg ._bbga =_eeff ;};if _ffde {_dc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgg ._bbga );};case "\u006d":if len (_cce .Params )!=2{_dc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ea );
return nil ;};_bba ,_dcgb :=_cc .GetNumbersAsFloat (_cce .Params );if _dcgb !=nil {return _dcgb ;};_bgg .moveTo (_bba [0],_bba [1]);case "\u006c":if len (_cce .Params )!=2{_dc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0076\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_ea );
return nil ;};_afg ,_cbf :=_cc .GetNumbersAsFloat (_cce .Params );if _cbf !=nil {return _cbf ;};_bgg .lineTo (_afg [0],_afg [1]);case "\u0063":if len (_cce .Params )!=6{return _ea ;};_febe ,_fbf :=_cc .GetNumbersAsFloat (_cce .Params );if _fbf !=nil {return _fbf ;
};_dc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_febe );_bgg .cubicTo (_febe [0],_febe [1],_febe [2],_febe [3],_febe [4],_febe [5]);case "\u0076","\u0079":if len (_cce .Params )!=4{return _ea ;
};_eaa ,_fec :=_cc .GetNumbersAsFloat (_cce .Params );if _fec !=nil {return _fec ;};_dc .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020b\u0065\u007a\u0069\u0065\u0072 \u0070a\u0072a\u006d\u0073\u003a\u0020\u0025\u002e\u0032f",_eaa );_bgg .quadraticTo (_eaa [0],_eaa [1],_eaa [2],_eaa [3]);
case "\u0068":_bgg .closePath ();case "\u0072\u0065":if len (_cce .Params )!=4{return _ea ;};_ebe ,_abg :=_cc .GetNumbersAsFloat (_cce .Params );if _abg !=nil {return _abg ;};_bgg .drawRectangle (_ebe [0],_ebe [1],_ebe [2],_ebe [3]);_bgg .closePath ();
case "\u0053":_bgg .stroke (&_aea ._ebab );_bgg .clearPath ();case "\u0073":_bgg .closePath ();_bgg .stroke (&_aea ._ebab );_bgg .clearPath ();case "\u0046":_bgg .fill (&_aea ._dadg );_bgg .clearPath ();case "\u0066","\u0066\u002a":_bgg .closePath ();_bgg .fill (&_aea ._dadg );
_bgg .clearPath ();case "\u0042","\u0042\u002a":_bgg .fill (&_aea ._dadg );_bgg .stroke (&_aea ._ebab );_bgg .clearPath ();case "\u0062","\u0062\u002a":_bgg .closePath ();_bgg .fill (&_aea ._dadg );_bgg .stroke (&_aea ._ebab );_bgg .clearPath ();case "\u006e":_bgg .clearPath ();
case "\u0044\u006f":if len (_cce .Params )==0{_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0065\u0078\u0070\u0065\u0063\u0074\u0065\u0064\u0020\u0058\u004fbj\u0065c\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006f\u0070\u0065\u0072\u0061n\u0064\u0020\u0066\u006f\u0072\u0020\u0044\u006f\u0020\u006f\u0070\u0065\u0072\u0061\u0074\u006f\u0072.\u0020\u0047\u006f\u0074\u0020\u0025\u002b\u0076\u002e",_cce .Params );
return _cc .ErrRangeError ;};_bcbe ,_dcdg :=_cc .GetName (_cce .Params [0]);if !_dcdg {_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0044\u006f\u0020\u006f\u0070e\u0072a\u0074\u006f\u0072\u0020\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u006e\u0061\u006d\u0065\u0020\u006fp\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u002b\u0076\u002e",_cce .Params [0]);
return _cc .ErrTypeError ;};_ ,_gfee :=_gddd .GetXObjectByName (*_bcbe );if _gfee !=_fa .XObjectTypeForm {break ;};_dge ,_dcdg :=_ddbc ._dcb [_bcbe .String ()];if !_dcdg {_dgf ,_ddg :=_gddd .GetXObjectFormByName (*_bcbe );if _ddg !=nil {_dc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ddg );
return _ddg ;};_abe ,_ddg :=_dgf .GetContentStream ();if _ddg !=nil {_dc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ddg );return _ddg ;};_gbf :=_dgf .Resources ;if _gbf ==nil {_gbf =_gddd ;};_cdg ,_bdb ,_fga ,_ddg :=_ddbc .extractPageText (string (_abe ),_gbf ,_daa .Mult (_ecg .CTM ),_efa +1);
if _ddg !=nil {_dc .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_ddg );return _ddg ;};_dge =textResult {*_cdg ,_bdb ,_fga };_ddbc ._dcb [_bcbe .String ()]=_dge ;};_bgg ._bbga =_ecg .CTM ;if _ffde {_dc .Log .Info ("\u0063\u0074\u006d\u003d\u0025\u0073",_bgg ._bbga );
};_aea ._aefg =append (_aea ._aefg ,_dge ._dba ._aefg ...);_aea ._ebab =append (_aea ._ebab ,_dge ._dba ._ebab ...);_aea ._dadg =append (_aea ._dadg ,_dge ._dba ._dadg ...);_efe ._ggc +=_dge ._dab ;_efe ._ebeb +=_dge ._eafd ;case "\u0072\u0067","\u0067","\u006b","\u0063\u0073","\u0073\u0063","\u0073\u0063\u006e":_cdc ._cdd .ColorspaceNonStroking =_ecg .ColorspaceNonStroking ;
_cdc ._cdd .ColorNonStroking =_ecg .ColorNonStroking ;case "\u0052\u0047","\u0047","\u004b","\u0043\u0053","\u0053\u0043","\u0053\u0043\u004e":_cdc ._cdd .ColorspaceStroking =_ecg .ColorspaceStroking ;_cdc ._cdd .ColorStroking =_ecg .ColorStroking ;};return nil ;
});_cee =_acd .Process (_eef );return _aea ,_efe ._ggc ,_efe ._ebeb ,_cee ;};func (_adcae *ruling )encloses (_ccbd ,_caeb float64 )bool {return _adcae ._cbedg -_degbe <=_ccbd &&_caeb <=_adcae ._egcbb +_degbe ;};type imageExtractContext struct{_gaa []ImageMark ;
_deg int ;_ee int ;_gg int ;_ae map[*_cc .PdfObjectStream ]*cachedImage ;_fgc *ImageExtractOptions ;};func (_bgce *wordBag )depthBand (_ebea ,_eebb float64 )[]int {if len (_bgce ._cfcc )==0{return nil ;};return _bgce .depthRange (_bgce .getDepthIdx (_ebea ),_bgce .getDepthIdx (_eebb ));
};func _gbfg (_egcg []rulingList )(rulingList ,rulingList ){var _bfcdc rulingList ;for _ ,_efae :=range _egcg {_bfcdc =append (_bfcdc ,_efae ...);};return _bfcdc .vertsHorzs ();};func (_ceb *imageExtractContext )extractFormImages (_gbd *_cc .PdfObjectName ,_bg _a .GraphicsState ,_bff *_fa .PdfPageResources )error {_bd ,_ece :=_bff .GetXObjectFormByName (*_gbd );
if _ece !=nil {return _ece ;};if _bd ==nil {return nil ;};_cbe ,_ece :=_bd .GetContentStream ();if _ece !=nil {return _ece ;};_acc :=_bd .Resources ;if _acc ==nil {_acc =_bff ;};_ece =_ceb .extractContentStreamImages (string (_cbe ),_acc );if _ece !=nil {return _ece ;
};_ceb ._gg ++;return nil ;};func (_cdca *wordBag )arrangeText ()*textPara {_cdca .sort ();if _ecbd {_cdca .removeDuplicates ();};var _dcbbg []*textLine ;for _ ,_fbafc :=range _cdca .depthIndexes (){for !_cdca .empty (_fbafc ){_fgdb :=_cdca .firstReadingIndex (_fbafc );
_cgbg :=_cdca .firstWord (_fgdb );_acbd :=_fccf (_cdca ,_fgdb );_fdfa :=_cgbg ._fggb ;_bagd :=_cgbg ._aabad -_eefac *_fdfa ;_fafc :=_cgbg ._aabad +_eefac *_fdfa ;_fdda :=_ceda *_fdfa ;_faaab :=_ada *_fdfa ;_bcce :for {var _aadb *textWord ;_ccg :=0;for _ ,_acdc :=range _cdca .depthBand (_bagd ,_fafc ){_cfbe :=_cdca .highestWord (_acdc ,_bagd ,_fafc );
if _cfbe ==nil {continue ;};_gaege :=_befg (_cfbe ,_acbd ._efce [len (_acbd ._efce )-1]);if _gaege < -_faaab {break _bcce ;};if _gaege > _fdda {continue ;};if _aadb !=nil &&_gccf (_cfbe ,_aadb )>=0{continue ;};_aadb =_cfbe ;_ccg =_acdc ;};if _aadb ==nil {break ;
};_acbd .pullWord (_cdca ,_aadb ,_ccg );};_acbd .markWordBoundaries ();_dcbbg =append (_dcbbg ,_acbd );};};if len (_dcbbg )==0{return nil ;};_g .Slice (_dcbbg ,func (_aacc ,_gaaf int )bool {return _efb (_dcbbg [_aacc ],_dcbbg [_gaaf ])< 0});_eaeg :=_gbcdb (_cdca .PdfRectangle ,_dcbbg );
if _aefb {_dc .Log .Info ("\u0061\u0072\u0072an\u0067\u0065\u0054\u0065\u0078\u0074\u0020\u0021\u0021\u0021\u0020\u0070\u0061\u0072\u0061\u003d\u0025\u0073",_eaeg .String ());if _bcdd {for _fefea ,_fgddb :=range _eaeg ._dcdd {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fefea ,_fgddb .String ());
if _dabg {for _cced ,_ceaf :=range _fgddb ._efce {_bf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_cced ,_ceaf .String ());for _fdge ,_eefaf :=range _ceaf ._bffcd {_bf .Printf ("\u00251\u0032\u0064\u003a\u0020\u0025\u0073\n",_fdge ,_eefaf .String ());
};};};};};};return _eaeg ;};func _cegf (_fcaac map[int ]intSet )[]int {_bdcga :=make ([]int ,0,len (_fcaac ));for _edagf :=range _fcaac {_bdcga =append (_bdcga ,_edagf );};_g .Ints (_bdcga );return _bdcga ;};func _befg (_geeef ,_ebdf bounded )float64 {return _geeef .bbox ().Llx -_ebdf .bbox ().Urx };
func (_dadbb *textObject )newTextMark (_bded string ,_afgf _gd .Matrix ,_efdce _gd .Point ,_bcgf float64 ,_edfdd *_fa .PdfFont ,_ffbg float64 ,_eeec ,_ddef _b .Color )(textMark ,bool ){_acge :=_afgf .Angle ();_eadb :=_aegc (_acge ,_ecef );var _fddb float64 ;
if _eadb %180!=90{_fddb =_afgf .ScalingFactorY ();}else {_fddb =_afgf .ScalingFactorX ();};_bcge :=_fcce (_afgf );_feee :=_fa .PdfRectangle {Llx :_bcge .X ,Lly :_bcge .Y ,Urx :_efdce .X ,Ury :_efdce .Y };switch _eadb %360{case 90:_feee .Urx -=_fddb ;case 180:_feee .Ury -=_fddb ;
case 270:_feee .Urx +=_fddb ;case 0:_feee .Ury +=_fddb ;default:_eadb =0;_feee .Ury +=_fddb ;};if _feee .Llx > _feee .Urx {_feee .Llx ,_feee .Urx =_feee .Urx ,_feee .Llx ;};if _feee .Lly > _feee .Ury {_feee .Lly ,_feee .Ury =_feee .Ury ,_feee .Lly ;};_ecaa :=true ;
if _dadbb ._bccg ._ba .Width ()> 0{_fgdd ,_ebde :=_caba (_feee ,_dadbb ._bccg ._ba );if !_ebde {_ecaa =false ;_dc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020m\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069\u0064\u0065\u0020\u0070a\u0067\u0065\u002e\u0020\u0062\u0062\u006f\u0078\u003d\u0025\u0067\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u003d\u0025\u0067\u0020\u0074\u0065\u0078\u0074\u003d\u0025q",_feee ,_dadbb ._bccg ._ba ,_bded );
};_feee =_fgdd ;};_abgg :=_feee ;_bgacb :=_dadbb ._bccg ._ba ;switch _eadb %360{case 90:_bgacb .Urx ,_bgacb .Ury =_bgacb .Ury ,_bgacb .Urx ;_abgg =_fa .PdfRectangle {Llx :_bgacb .Urx -_feee .Ury ,Urx :_bgacb .Urx -_feee .Lly ,Lly :_feee .Llx ,Ury :_feee .Urx };
case 180:_abgg =_fa .PdfRectangle {Llx :_bgacb .Urx -_feee .Llx ,Urx :_bgacb .Urx -_feee .Urx ,Lly :_bgacb .Ury -_feee .Lly ,Ury :_bgacb .Ury -_feee .Ury };case 270:_bgacb .Urx ,_bgacb .Ury =_bgacb .Ury ,_bgacb .Urx ;_abgg =_fa .PdfRectangle {Llx :_feee .Ury ,Urx :_feee .Lly ,Lly :_bgacb .Ury -_feee .Llx ,Ury :_bgacb .Ury -_feee .Urx };
};if _abgg .Llx > _abgg .Urx {_abgg .Llx ,_abgg .Urx =_abgg .Urx ,_abgg .Llx ;};if _abgg .Lly > _abgg .Ury {_abgg .Lly ,_abgg .Ury =_abgg .Ury ,_abgg .Lly ;};_afdd :=textMark {_bfea :_bded ,PdfRectangle :_abgg ,_gecf :_feee ,_abd :_edfdd ,_eadc :_fddb ,_fdcb :_ffbg ,_cege :_afgf ,_bbff :_efdce ,_dedf :_eadb ,_gecfa :_eeec ,_dabgd :_ddef };
if _bbe {_dc .Log .Info ("n\u0065\u0077\u0054\u0065\u0078\u0074M\u0061\u0072\u006b\u003a\u0020\u0073t\u0061\u0072\u0074\u003d\u0025\u002e\u0032f\u0020\u0065\u006e\u0064\u003d\u0025\u002e\u0032\u0066\u0020%\u0073",_bcge ,_efdce ,_afdd .String ());};return _afdd ,_ecaa ;
};func _bffed (_bacbf float64 )bool {return _gf .Abs (_bacbf )< _fbea };func _gcdb (_acac ,_acaf bounded )float64 {return _gaab (_acac )-_gaab (_acaf )};func (_bagce paraList )lines ()[]*textLine {var _cfbd []*textLine ;for _ ,_caaf :=range _bagce {_cfbd =append (_cfbd ,_caaf ._dcdd ...);
};return _cfbd ;};type textMark struct{_fa .PdfRectangle ;_dedf int ;_bfea string ;_cgf string ;_abd *_fa .PdfFont ;_eadc float64 ;_fdcb float64 ;_cege _gd .Matrix ;_bbff _gd .Point ;_gecf _fa .PdfRectangle ;_gecfa _b .Color ;_dabgd _b .Color ;};

// NewFromContents creates a new extractor from contents and page resources.
func NewFromContents (contents string ,resources *_fa .PdfPageResources )(*Extractor ,error ){const _ddf ="\u0065x\u0074\u0072\u0061\u0063t\u006f\u0072\u002e\u004e\u0065w\u0046r\u006fm\u0043\u006f\u006e\u0074\u0065\u006e\u0074s";_gb :=&Extractor {_ccd :contents ,_ccf :resources ,_gfe :map[string ]fontEntry {},_dcb :map[string ]textResult {}};
_ec .TrackUse (_ddf );return _gb ,nil ;};

// PageText represents the layout of text on a device page.
type PageText struct{_aefg []*textMark ;_bef string ;_bedc []TextMark ;_gcdc []TextTable ;_ccfa _fa .PdfRectangle ;_ebab []pathSection ;_dadg []pathSection ;};func (_fbfd *wordBag )removeDuplicates (){if _addb {_dc .Log .Info ("r\u0065m\u006f\u0076\u0065\u0044\u0075\u0070\u006c\u0069c\u0061\u0074\u0065\u0073: \u0025\u0071",_fbfd .text ());
};for _ ,_gbfb :=range _fbfd .depthIndexes (){if len (_fbfd ._cfcc [_gbfb ])==0{continue ;};_efdg :=_fbfd ._cfcc [_gbfb ][0];_abea :=_egac *_efdg ._fggb ;_bgdg :=_efdg ._aabad ;for _ ,_deec :=range _fbfd .depthBand (_bgdg ,_bgdg +_abea ){_eggg :=map[*textWord ]struct{}{};
_agef :=_fbfd ._cfcc [_deec ];for _ ,_ebgf :=range _agef {if _ ,_eeae :=_eggg [_ebgf ];_eeae {continue ;};for _ ,_ebegb :=range _agef {if _ ,_aegdd :=_eggg [_ebegb ];_aegdd {continue ;};if _ebegb !=_ebgf &&_ebegb ._cbbb ==_ebgf ._cbbb &&_gf .Abs (_ebegb .Llx -_ebgf .Llx )< _abea &&_gf .Abs (_ebegb .Urx -_ebgf .Urx )< _abea &&_gf .Abs (_ebegb .Lly -_ebgf .Lly )< _abea &&_gf .Abs (_ebegb .Ury -_ebgf .Ury )< _abea {_eggg [_ebegb ]=struct{}{};
};};};if len (_eggg )> 0{_cfcf :=0;for _ ,_cgggd :=range _agef {if _ ,_bddb :=_eggg [_cgggd ];!_bddb {_agef [_cfcf ]=_cgggd ;_cfcf ++;};};_fbfd ._cfcc [_deec ]=_agef [:len (_agef )-len (_eggg )];if len (_fbfd ._cfcc [_deec ])==0{delete (_fbfd ._cfcc ,_deec );
};};};};};func (_gacf *textTable )toTextTable ()TextTable {if _cgee {_dc .Log .Info ("t\u006fT\u0065\u0078\u0074\u0054\u0061\u0062\u006c\u0065:\u0020\u0025\u0064\u0020x \u0025\u0064",_gacf ._dffbb ,_gacf ._fcga );};_ccegd :=make ([][]TableCell ,_gacf ._fcga );
for _daee :=0;_daee < _gacf ._fcga ;_daee ++{_ccegd [_daee ]=make ([]TableCell ,_gacf ._dffbb );for _gdgeg :=0;_gdgeg < _gacf ._dffbb ;_gdgeg ++{_ccfaaf :=_gacf .get (_gdgeg ,_daee );if _ccfaaf ==nil {continue ;};if _cgee {_bf .Printf ("\u0025\u0034\u0064 \u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_gdgeg ,_daee ,_ccfaaf );
};_ccegd [_daee ][_gdgeg ].Text =_ccfaaf .text ();_ebfb :=0;_ccegd [_daee ][_gdgeg ].Marks ._gaea =_ccfaaf .toTextMarks (&_ebfb );};};return TextTable {W :_gacf ._dffbb ,H :_gacf ._fcga ,Cells :_ccegd };};type textTable struct{_fa .PdfRectangle ;_dffbb ,_fcga int ;
_dfgeg bool ;_bfab map[uint64 ]*textPara ;_eagcd map[uint64 ]compositeCell ;};func (_cgbb gridTile )contains (_efgfa _fa .PdfRectangle )bool {if _cgbb .numBorders ()< 3{return false ;};if _cgbb ._bbddf &&_efgfa .Llx < _cgbb .Llx -_abgbg {return false ;
};if _cgbb ._egdd &&_efgfa .Urx > _cgbb .Urx +_abgbg {return false ;};if _cgbb ._egad &&_efgfa .Lly < _cgbb .Lly -_abgbg {return false ;};if _cgbb ._gcde &&_efgfa .Ury > _cgbb .Ury +_abgbg {return false ;};return true ;};func (_dbgg *wordBag )highestWord (_dffb int ,_bfae ,_bgd float64 )*textWord {for _ ,_ggga :=range _dbgg ._cfcc [_dffb ]{if _bfae <=_ggga ._aabad &&_ggga ._aabad <=_bgd {return _ggga ;
};};return nil ;};func (_degag paraList )sortReadingOrder (){_dc .Log .Trace ("\u0073\u006fr\u0074\u0052\u0065\u0061\u0064i\u006e\u0067\u004f\u0072\u0064e\u0072\u003a\u0020\u0070\u0061\u0072\u0061\u0073\u003d\u0025\u0064\u0020\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u0078\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d",len (_degag ));
if len (_degag )<=1{return ;};_degag .computeEBBoxes ();_g .Slice (_degag ,func (_cbg ,_ebgc int )bool {return _efb (_degag [_cbg ],_degag [_ebgc ])<=0});_cbcg :=_degag .topoOrder ();_degag .reorder (_cbcg );};

// ApplyArea processes the page text only within the specified area `bbox`.
// Each time ApplyArea is called, it updates the result set in `pt`.
// Can be called multiple times in a row with different bounding boxes.
func (_ded *PageText )ApplyArea (bbox _fa .PdfRectangle ){_eefa :=make ([]*textMark ,0,len (_ded ._aefg ));for _ ,_dcc :=range _ded ._aefg {if _cebbc (_dcc .bbox (),bbox ){_eefa =append (_eefa ,_dcc );};};var _caf paraList ;_dfgg :=len (_eefa );for _adba :=0;
_adba < 360&&_dfgg > 0;_adba +=90{_dec :=make ([]*textMark ,0,len (_eefa )-_dfgg );for _ ,_cgc :=range _eefa {if _cgc ._dedf ==_adba {_dec =append (_dec ,_cgc );};};if len (_dec )> 0{_feaf :=_ffeb (_dec ,_ded ._ccfa ,nil ,nil );_caf =append (_caf ,_feaf ...);
_dfgg -=len (_dec );};};_afga :=new (_ff .Buffer );_caf .writeText (_afga );_ded ._bef =_afga .String ();_ded ._bedc =_caf .toTextMarks ();_ded ._gcdc =_caf .tables ();};func (_eaf *imageExtractContext )extractXObjectImage (_dff *_cc .PdfObjectName ,_cfa _a .GraphicsState ,_bcb *_fa .PdfPageResources )error {_eab ,_ :=_bcb .GetXObjectByName (*_dff );
if _eab ==nil {return nil ;};_gac ,_cfac :=_eaf ._ae [_eab ];if !_cfac {_acg ,_eabf :=_bcb .GetXObjectImageByName (*_dff );if _eabf !=nil {return _eabf ;};if _acg ==nil {return nil ;};_dbf ,_eabf :=_acg .ToImage ();if _eabf !=nil {return _eabf ;};_gac =&cachedImage {_ab :_dbf ,_adb :_acg .ColorSpace };
_eaf ._ae [_eab ]=_gac ;};_aeg :=_gac ._ab ;_egb :=_gac ._adb ;_cea ,_dg :=_egb .ImageToRGB (*_aeg );if _dg !=nil {return _dg ;};_dc .Log .Debug ("@\u0044\u006f\u0020\u0043\u0054\u004d\u003a\u0020\u0025\u0073",_cfa .CTM .String ());_dca :=ImageMark {Image :&_cea ,Width :_cfa .CTM .ScalingFactorX (),Height :_cfa .CTM .ScalingFactorY (),Angle :_cfa .CTM .Angle ()};
_dca .X ,_dca .Y =_cfa .CTM .Translation ();_eaf ._gaa =append (_eaf ._gaa ,_dca );_eaf ._ee ++;return nil ;};

// Extractor stores and offers functionality for extracting content from PDF pages.
type Extractor struct{_ccd string ;_ccf *_fa .PdfPageResources ;_ba _fa .PdfRectangle ;_gfe map[string ]fontEntry ;_dcb map[string ]textResult ;_dd int64 ;_fd int ;};func (_ffaeg *textObject )renderText (_eaff []byte )error {if _ffaeg ._cggc {_dc .Log .Debug ("\u0072\u0065\u006e\u0064\u0065r\u0054\u0065\u0078\u0074\u003a\u0020\u0049\u006e\u0076\u0061\u006c\u0069\u0064 \u0066\u006f\u006e\u0074\u002e\u0020\u004e\u006f\u0074\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u002e");
return nil ;};_cag :=_ffaeg .getCurrentFont ();_gga :=_cag .BytesToCharcodes (_eaff );_fcc ,_cdgf ,_dbeg :=_cag .CharcodesToStrings (_gga );if _dbeg > 0{_dc .Log .Debug ("\u0072\u0065nd\u0065\u0072\u0054e\u0078\u0074\u003a\u0020num\u0043ha\u0072\u0073\u003d\u0025\u0064\u0020\u006eum\u004d\u0069\u0073\u0073\u0065\u0073\u003d%\u0064",_cdgf ,_dbeg );
};_ffaeg ._cde ._ggc +=_cdgf ;_ffaeg ._cde ._ebeb +=_dbeg ;_bdec :=_ffaeg ._cde ;_gea :=_bdec ._gae ;_fcda :=_bdec ._cfc /100.0;_aff :=_eae ;if _cag .Subtype ()=="\u0054\u0079\u0070e\u0033"{_aff =1;};_cgda ,_dbb :=_cag .GetRuneMetrics (' ');if !_dbb {_cgda ,_dbb =_cag .GetCharMetrics (32);
};if !_dbb {_cgda ,_ =_fa .DefaultFont ().GetRuneMetrics (' ');};_dgbaa :=_cgda .Wx *_aff ;_dc .Log .Trace ("\u0073p\u0061\u0063e\u0057\u0069\u0064t\u0068\u003d\u0025\u002e\u0032\u0066\u0020t\u0065\u0078\u0074\u003d\u0025\u0071 \u0066\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0066\u006f\u006et\u0053\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066",_dgbaa ,_fcc ,_cag ,_gea );
_fef :=_gd .NewMatrix (_gea *_fcda ,0,0,_gea ,0,_bdec ._bbfc );if _adca {_dc .Log .Info ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0074\u0065\u0078t\u0073\u003d\u0025\u0071",len (_gga ),_gga ,_fcc );
};_dc .Log .Trace ("\u0072\u0065\u006e\u0064\u0065\u0072T\u0065\u0078\u0074\u003a\u0020\u0025\u0064\u0020\u0063\u006f\u0064\u0065\u0073=\u0025\u002b\u0076\u0020\u0072\u0075\u006ee\u0073\u003d\u0025\u0071",len (_gga ),_gga ,len (_fcc ));_ggb :=_ffaeg .getFillColor ();
_cebb :=_ffaeg .getStrokeColor ();for _fea ,_baf :=range _fcc {_fcg :=[]rune (_baf );if len (_fcg )==1&&_fcg [0]=='\x00'{continue ;};_fcbb :=_gga [_fea ];_bfd :=_ffaeg ._cdd .CTM .Mult (_ffaeg ._gfgc ).Mult (_fef );_fdef :=0.0;if len (_fcg )==1&&_fcg [0]==32{_fdef =_bdec ._egg ;
};_ecade ,_eea :=_cag .GetCharMetrics (_fcbb );if !_eea {_dc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u004e\u006f \u006d\u0065\u0074r\u0069\u0063\u0020\u0066\u006f\u0072\u0020\u0063\u006fde\u003d\u0025\u0064 \u0072\u003d0\u0078\u0025\u0030\u0034\u0078\u003d%\u002b\u0071 \u0025\u0073",_fcbb ,_fcg ,_fcg ,_cag );
return _bf .Errorf ("\u006e\u006f\u0020\u0063\u0068\u0061\u0072\u0020\u006d\u0065\u0074\u0072\u0069\u0063\u0073:\u0020f\u006f\u006e\u0074\u003d\u0025\u0073\u0020\u0063\u006f\u0064\u0065\u003d\u0025\u0064",_cag .String (),_fcbb );};_ggde :=_gd .Point {X :_ecade .Wx *_aff ,Y :_ecade .Wy *_aff };
_fead :=_gd .Point {X :(_ggde .X *_gea +_fdef )*_fcda };_aab :=_gd .Point {X :(_ggde .X *_gea +_bdec ._ecad +_fdef )*_fcda };if _adca {_dc .Log .Info ("\u0074\u0066\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0063\u003d\u0025\u002e\u0032f\u0020t\u0077\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0068\u003d\u0025\u002e\u0032\u0066",_gea ,_bdec ._ecad ,_bdec ._egg ,_fcda );
_dc .Log .Info ("\u0064x\u002c\u0064\u0079\u003d%\u002e\u0033\u0066\u0020\u00740\u003d%\u002e3\u0066\u0020\u0074\u003d\u0025\u002e\u0033f",_ggde ,_fead ,_aab );};_eggf :=_adgc (_fead );_dgec :=_adgc (_aab );_egcf :=_ffaeg ._cdd .CTM .Mult (_ffaeg ._gfgc ).Mult (_eggf );
if _dgcd {_dc .Log .Info ("e\u006e\u0064\u003a\u000a\tC\u0054M\u003d\u0025\u0073\u000a\u0009 \u0074\u006d\u003d\u0025\u0073\u000a"+"\u0009\u0020t\u0064\u003d\u0025s\u0020\u0078\u006c\u0061\u0074\u003d\u0025\u0073\u000a"+"\u0009t\u0064\u0030\u003d\u0025s\u000a\u0009\u0020\u0020\u2192 \u0025s\u0020x\u006c\u0061\u0074\u003d\u0025\u0073",_ffaeg ._cdd .CTM ,_ffaeg ._gfgc ,_dgec ,_fcce (_ffaeg ._cdd .CTM .Mult (_ffaeg ._gfgc ).Mult (_dgec )),_eggf ,_egcf ,_fcce (_egcf ));
};_ccdg ,_baaf :=_ffaeg .newTextMark (_ef .ExpandLigatures (_fcg ),_bfd ,_fcce (_egcf ),_gf .Abs (_dgbaa *_bfd .ScalingFactorX ()),_cag ,_ffaeg ._cde ._ecad ,_ggb ,_cebb );if !_baaf {_dc .Log .Debug ("\u0054\u0065\u0078\u0074\u0020\u006d\u0061\u0072\u006b\u0020\u006f\u0075\u0074\u0073\u0069d\u0065 \u0070\u0061\u0067\u0065\u002e\u0020\u0053\u006b\u0069\u0070\u0070\u0069\u006e\u0067");
continue ;};if _cag ==nil {_dc .Log .Debug ("\u0045R\u0052O\u0052\u003a\u0020\u004e\u006f\u0020\u0066\u006f\u006e\u0074\u002e");}else if _cag .Encoder ()==nil {_dc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020N\u006f\u0020\u0065\u006e\u0063\u006f\u0064\u0069\u006eg\u002e\u0020\u0066o\u006et\u003d\u0025\u0073",_cag );
}else {if _bgbb ,_dfd :=_cag .Encoder ().CharcodeToRune (_fcbb );_dfd {_ccdg ._cgf =string (_bgbb );};};_dc .Log .Trace ("i\u003d\u0025\u0064\u0020\u0063\u006fd\u0065\u003d\u0025\u0064\u0020\u006d\u0061\u0072\u006b=\u0025\u0073\u0020t\u0072m\u003d\u0025\u0073",_fea ,_fcbb ,_ccdg ,_bfd );
_ffaeg ._abgbf =append (_ffaeg ._abgbf ,&_ccdg );_ffaeg ._gfgc .Concat (_dgec );};return nil ;};func (_bgee *textTable )reduce ()*textTable {_gada :=make ([]int ,0,_bgee ._fcga );_efeg :=make ([]int ,0,_bgee ._dffbb );for _fbgc :=0;_fbgc < _bgee ._fcga ;
_fbgc ++{if !_bgee .emptyRow (_fbgc ){_gada =append (_gada ,_fbgc );};};for _ccagf :=0;_ccagf < _bgee ._dffbb ;_ccagf ++{if !_bgee .emptyColumn (_ccagf ){_efeg =append (_efeg ,_ccagf );};};if len (_gada )==_bgee ._fcga &&len (_efeg )==_bgee ._dffbb {return _bgee ;
};_ebbag :=textTable {_dfgeg :_bgee ._dfgeg ,_dffbb :len (_efeg ),_fcga :len (_gada ),_bfab :make (map[uint64 ]*textPara ,len (_efeg )*len (_gada ))};if _cgee {_dc .Log .Info ("\u0072\u0065\u0064\u0075ce\u003a\u0020\u0025\u0064\u0078\u0025\u0064\u0020\u002d\u003e\u0020\u0025\u0064\u0078%\u0064",_bgee ._dffbb ,_bgee ._fcga ,len (_efeg ),len (_gada ));
_dc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_efeg );_dc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_gada );};for _bgdf ,_abgf :=range _gada {for _bcggb ,_bgaca :=range _efeg {_agac :=_bgee .get (_bgaca ,_abgf );
if _agac ==nil {continue ;};if _cgee {_bf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_bcggb ,_bgdf ,_bgaca ,_abgf ,_ababa (_agac .text (),50));};_ebbag .put (_bcggb ,_bgdf ,_agac );
};};return &_ebbag ;};func _gfbb (_bfgc ,_dgcf _fa .PdfRectangle )bool {return _bfgc .Lly <=_dgcf .Ury &&_dgcf .Lly <=_bfgc .Ury ;};func (_dfac compositeCell )hasLines (_bgdgf []*textLine )bool {for _egdg ,_ebccf :=range _bgdgf {_afb :=_cebbc (_dfac .PdfRectangle ,_ebccf .PdfRectangle );
if _cgee {_bf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u005e\u005e\u005e\u0069\u006e\u0074\u0065\u0072\u0073e\u0063t\u0073\u003d\u0025\u0074\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u000a",_afb ,_egdg ,len (_bgdgf ));_bf .Printf ("\u0020\u0020\u0020\u0020  \u005e\u005e\u005e\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025s\u000a",_dfac );
_bf .Printf ("\u0020 \u0020 \u0020\u0020\u0020\u006c\u0069\u006e\u0065\u003d\u0025\u0073\u000a",_ebccf );};if _afb {return true ;};};return false ;};type gridTile struct{_fa .PdfRectangle ;_gcde ,_bbddf ,_egad ,_egdd bool ;};func (_gcdbd rulingList )log (_gfgb string ){if !_bbde {return ;
};_dc .Log .Info ("\u0023\u0023\u0023\u0020\u0025\u0031\u0030\u0073\u003a\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_gfgb ,_gcdbd .String ());for _bgbe ,_abab :=range _gcdbd {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_bgbe ,_abab .String ());
};};func (_fbaf *textObject )moveLP (_dbaa ,_agb float64 ){_fbaf ._gcd .Concat (_gd .NewMatrix (1,0,0,1,_dbaa ,_agb ));_fbaf ._gfgc =_fbaf ._gcd ;};var _aefc =_f .MustCompile ("\u005e\u005c\u0073\u002a\u0028\u005c\u0064\u002b\u005c\u002e\u003f|\u005b\u0049\u0069\u0076\u005d\u002b\u0029\u005c\u0073\u002a\\\u0029\u003f\u0024");


// String returns a string describing `tm`.
func (_bab TextMark )String ()string {_bafa :=_bab .BBox ;var _fggd string ;if _bab .Font !=nil {_fggd =_bab .Font .String ();if len (_fggd )> 50{_fggd =_fggd [:50]+"\u002e\u002e\u002e";};};var _dgbd string ;if _bab .Meta {_dgbd ="\u0020\u002a\u004d\u002a";
};return _bf .Sprintf ("\u007b\u0054\u0065\u0078t\u004d\u0061\u0072\u006b\u003a\u0020\u0025\u0064\u0020%\u0071\u003d\u0025\u0030\u0032\u0078\u0020\u0028\u0025\u0036\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e2\u0066\u0029\u0020\u0028\u00256\u002e\u0032\u0066\u002c\u0020\u0025\u0036\u002e\u0032\u0066\u0029\u0020\u0025\u0073\u0025\u0073\u007d",_bab .Offset ,_bab .Text ,[]rune (_bab .Text ),_bafa .Llx ,_bafa .Lly ,_bafa .Urx ,_bafa .Ury ,_fggd ,_dgbd );
};

// ExtractPageText returns the text contents of `e` (an Extractor for a page) as a PageText.
// TODO(peterwilliams97): The stats complicate this function signature and aren't very useful.
//                        Replace with a function like Extract() (*PageText, error)
func (_gfc *Extractor )ExtractPageText ()(*PageText ,int ,int ,error ){_bb ,_cg ,_gc ,_baa :=_gfc .extractPageText (_gfc ._ccd ,_gfc ._ccf ,_gd .IdentityMatrix (),0);if _baa !=nil &&_baa !=_fa .ErrColorOutOfRange {return nil ,0,0,_baa ;};_bb .computeViews ();
_baa =_aagded (_bb );if _baa !=nil {return nil ,0,0,_baa ;};return _bb ,_cg ,_gc ,nil ;};func (_dcbc *textObject )showText (_agg []byte )error {return _dcbc .renderText (_agg )};func (_cabd *textWord )computeText ()string {_bdgfc :=make ([]string ,len (_cabd ._bffcd ));
for _ggbfc ,_dgeca :=range _cabd ._bffcd {_bdgfc [_ggbfc ]=_dgeca ._bfea ;};return _ce .Join (_bdgfc ,"");};type markKind int ;func _dbaf (_dbad _fa .PdfRectangle )textState {return textState {_cfc :100,_ddbd :RenderModeFill ,_eac :_dbad };};func (_gbee *stateStack )size ()int {return len (*_gbee )};


// New returns an Extractor instance for extracting content from the input PDF page.
func New (page *_fa .PdfPage )(*Extractor ,error ){const _ffe ="\u0065\u0078\u0074\u0072\u0061\u0063\u0074\u006f\u0072\u002e\u004e\u0065\u0077";_faa ,_ca :=page .GetAllContentStreams ();if _ca !=nil {return nil ,_ca ;};_gdd ,_ca :=page .GetMediaBox ();
if _ca !=nil {return nil ,_bf .Errorf ("\u0065\u0078\u0074r\u0061\u0063\u0074\u006fr\u0020\u0072\u0065\u0071\u0075\u0069\u0072e\u0073\u0020\u006d\u0065\u0064\u0069\u0061\u0042\u006f\u0078\u002e\u0020\u0025\u0076",_ca );};_ga :=&Extractor {_ccd :_faa ,_ccf :page .Resources ,_ba :*_gdd ,_gfe :map[string ]fontEntry {},_dcb :map[string ]textResult {}};
if _ga ._ba .Llx > _ga ._ba .Urx {_dc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0058\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ga ._ba );
_ga ._ba .Llx ,_ga ._ba .Urx =_ga ._ba .Urx ,_ga ._ba .Llx ;};if _ga ._ba .Lly > _ga ._ba .Ury {_dc .Log .Info ("\u004d\u0065\u0064\u0069\u0061\u0042o\u0078\u0020\u0068\u0061\u0073\u0020\u0059\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073\u0020r\u0065\u0076\u0065\u0072\u0073\u0065\u0064\u002e\u0020\u0025\u002e\u0032\u0066\u0020F\u0069x\u0069\u006e\u0067\u002e",_ga ._ba );
_ga ._ba .Lly ,_ga ._ba .Ury =_ga ._ba .Ury ,_ga ._ba .Lly ;};_ec .TrackUse (_ffe );return _ga ,nil ;};func (_fbafa paraList )inTile (_baddd gridTile )paraList {var _befa paraList ;for _ ,_efcf :=range _fbafa {if _baddd .contains (_efcf .PdfRectangle ){_befa =append (_befa ,_efcf );
};};if _cgee {_bf .Printf ("\u0020 \u0020\u0069\u006e\u0054i\u006c\u0065\u003a\u0020\u0020%\u0073 \u0069n\u0073\u0069\u0064\u0065\u003d\u0025\u0064\n",_baddd ,len (_befa ));for _fdeag ,_ddfcb :=range _befa {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fdeag ,_ddfcb );
};_bf .Println ("");};return _befa ;};func (_cacg lineRuling )yMean ()float64 {return 0.5*(_cacg ._defeb .Y +_cacg ._bccgd .Y )};func (_dfeab paraList )yNeighbours (_abdb float64 )map[*textPara ][]int {_deffa :=make ([]event ,2*len (_dfeab ));if _abdb ==0{for _gcba ,_aeced :=range _dfeab {_deffa [2*_gcba ]=event {_aeced .Lly ,true ,_gcba };
_deffa [2*_gcba +1]=event {_aeced .Ury ,false ,_gcba };};}else {for _dfbe ,_bgbeb :=range _dfeab {_deffa [2*_dfbe ]=event {_bgbeb .Lly -_abdb *_bgbeb .fontsize (),true ,_dfbe };_deffa [2*_dfbe +1]=event {_bgbeb .Ury +_abdb *_bgbeb .fontsize (),false ,_dfbe };
};};return _dfeab .eventNeighbours (_deffa );};func _gccb (_aafe _fa .PdfRectangle ,_abad bounded )float64 {return _aafe .Ury -_abad .bbox ().Lly };func _beef (_ffdb []int )[]int {_dbce :=make ([]int ,len (_ffdb ));for _cedecc ,_efaaa :=range _ffdb {_dbce [len (_ffdb )-1-_cedecc ]=_efaaa ;
};return _dbce ;};func (_gecdd paraList )reorder (_ffab []int ){_dbbge :=make (paraList ,len (_gecdd ));for _cdbf ,_fdbc :=range _ffab {_dbbge [_cdbf ]=_gecdd [_fdbc ];};copy (_gecdd ,_dbbge );};func (_dddagd gridTiling )log (_fdbde string ){if !_bbca {return ;
};_dc .Log .Info ("\u0074i\u006ci\u006e\u0067\u003a\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u0025\u0071",len (_dddagd ._cfdd ),len (_dddagd ._fbfcc ),_fdbde );_bf .Printf ("\u0020\u0020\u0020l\u006c\u0078\u003d\u0025\u002e\u0032\u0066\u000a",_dddagd ._cfdd );
_bf .Printf ("\u0020\u0020\u0020l\u006c\u0079\u003d\u0025\u002e\u0032\u0066\u000a",_dddagd ._fbfcc );for _bfdf ,_eggc :=range _dddagd ._fbfcc {_dabb ,_ceag :=_dddagd ._afeb [_eggc ];if !_ceag {continue ;};_bf .Printf ("%\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u000a",_bfdf ,_eggc );
for _dacb ,_acgbb :=range _dddagd ._cfdd {_ccdae ,_faab :=_dabb [_acgbb ];if !_faab {continue ;};_bf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_dacb ,_ccdae .String ());};};};func (_dgda *textLine )appendWord (_aaab *textWord ){_dgda ._efce =append (_dgda ._efce ,_aaab );
_dgda .PdfRectangle =_bfbbb (_dgda .PdfRectangle ,_aaab .PdfRectangle );if _aaab ._fggb > _dgda ._adad {_dgda ._adad =_aaab ._fggb ;};if _aaab ._aabad > _dgda ._bgac {_dgda ._bgac =_aaab ._aabad ;};};func (_dda *textObject )setFont (_gddf string ,_fff float64 )error {if _dda ==nil {return nil ;
};_dda ._cde ._gae =_fff ;_gfd ,_ede :=_dda .getFont (_gddf );if _ede !=nil {return _ede ;};_dda ._cde ._accb =_gfd ;return nil ;};func (_bfbg rulingList )sort (){_g .Slice (_bfbg ,_bfbg .comp )};func _bdg (_dce *wordBag ,_faaag *textWord ,_efdf float64 )bool {return _faaag .Llx < _dce .Urx +_efdf &&_dce .Llx -_efdf < _faaag .Urx ;
};

// ToText returns the page text as a single string.
// Deprecated: This function is deprecated and will be removed in a future major version. Please use
// Text() instead.
func (_ddbde PageText )ToText ()string {return _ddbde .Text ()};func (_cfdc rulingList )snapToGroupsDirection ()rulingList {_cfdc .sortStrict ();_geece :=make (map[*ruling ]rulingList ,len (_cfdc ));_dadgg :=_cfdc [0];_bdfd :=func (_bbfbe *ruling ){_dadgg =_bbfbe ;
_geece [_dadgg ]=rulingList {_bbfbe }};_bdfd (_cfdc [0]);for _ ,_cagbf :=range _cfdc [1:]{if _cagbf ._edga < _dadgg ._edga -_fbea {_dc .Log .Error ("\u0073\u006e\u0061\u0070T\u006f\u0047\u0072\u006f\u0075\u0070\u0073\u0044\u0069r\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0057\u0072\u006f\u006e\u0067\u0020\u0070\u0072\u0069\u006da\u0072\u0079\u0020\u006f\u0072d\u0065\u0072\u002e\u000a\u0009\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0020\u0076\u003d\u0025\u0073",_dadgg ,_cagbf );
};if _cagbf ._edga > _dadgg ._edga +_eaab {_bdfd (_cagbf );}else {_geece [_dadgg ]=append (_geece [_dadgg ],_cagbf );};};_agec :=make (map[*ruling ]float64 ,len (_geece ));_bfdd :=make (map[*ruling ]*ruling ,len (_cfdc ));for _fedd ,_aggda :=range _geece {_agec [_fedd ]=_aggda .mergePrimary ();
for _ ,_ceabf :=range _aggda {_bfdd [_ceabf ]=_fedd ;};};for _ ,_gebb :=range _cfdc {_gebb ._edga =_agec [_bfdd [_gebb ]];};_bcddc :=make (rulingList ,0,len (_cfdc ));for _ ,_cace :=range _geece {_fbcd :=_cace .splitSec ();for _agbba ,_defee :=range _fbcd {_fded :=_defee .merge ();
if len (_bcddc )> 0{_dcce :=_bcddc [len (_bcddc )-1];if _dcce .alignsPrimary (_fded )&&_dcce .alignsSec (_fded ){_dc .Log .Error ("\u0073\u006e\u0061\u0070\u0054\u006fG\u0072\u006f\u0075\u0070\u0073\u0044\u0069\u0072\u0065\u0063\u0074\u0069\u006f\u006e\u003a\u0020\u0044\u0075\u0070\u006ci\u0063\u0061\u0074\u0065\u0020\u0069\u003d\u0025\u0064\u000a\u0009\u0077\u003d\u0025s\u000a\t\u0076\u003d\u0025\u0073",_agbba ,_dcce ,_fded );
continue ;};};_bcddc =append (_bcddc ,_fded );};};_bcddc .sortStrict ();return _bcddc ;};func (_cbb *textObject )getFontDict (_ggdd string )(_bacf _cc .PdfObject ,_bcf error ){_ebda :=_cbb ._cbdg ;if _ebda ==nil {_dc .Log .Debug ("g\u0065\u0074\u0046\u006f\u006e\u0074D\u0069\u0063\u0074\u002e\u0020\u004eo\u0020\u0072\u0065\u0073\u006f\u0075\u0072c\u0065\u0073\u002e\u0020\u006e\u0061\u006d\u0065\u003d\u0025#\u0071",_ggdd );
return nil ,nil ;};_bacf ,_gab :=_ebda .GetFontByName (_cc .PdfObjectName (_ggdd ));if !_gab {_dc .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0067\u0065t\u0046\u006f\u006et\u0044\u0069\u0063\u0074\u003a\u0020\u0046\u006f\u006et \u006e\u006f\u0074 \u0066\u006fu\u006e\u0064\u003a\u0020\u006e\u0061m\u0065\u003d%\u0023\u0071",_ggdd );
return nil ,_de .New ("f\u006f\u006e\u0074\u0020no\u0074 \u0069\u006e\u0020\u0072\u0065s\u006f\u0075\u0072\u0063\u0065\u0073");};return _bacf ,nil ;};

// ExtractTextWithStats works like ExtractText but returns the number of characters in the output
// (`numChars`) and the number of characters that were not decoded (`numMisses`).
func (_gaaa *Extractor )ExtractTextWithStats ()(_abf string ,_bde int ,_fge int ,_ffd error ){_eec ,_bde ,_fge ,_ffd :=_gaaa .ExtractPageText ();if _ffd !=nil {return "",_bde ,_fge ,_ffd ;};return _eec .Text (),_bde ,_fge ,nil ;};func (_ag *imageExtractContext )extractInlineImage (_ffb *_a .ContentStreamInlineImage ,_fb _a .GraphicsState ,_fgg *_fa .PdfPageResources )error {_aec ,_bc :=_ffb .ToImage (_fgg );
if _bc !=nil {return _bc ;};_eg ,_bc :=_ffb .GetColorSpace (_fgg );if _bc !=nil {return _bc ;};if _eg ==nil {_eg =_fa .NewPdfColorspaceDeviceGray ();};_dad ,_bc :=_eg .ImageToRGB (*_aec );if _bc !=nil {return _bc ;};_ac :=ImageMark {Image :&_dad ,Width :_fb .CTM .ScalingFactorX (),Height :_fb .CTM .ScalingFactorY (),Angle :_fb .CTM .Angle ()};
_ac .X ,_ac .Y =_fb .CTM .Translation ();_ag ._gaa =append (_ag ._gaa ,_ac );_ag ._deg ++;return nil ;};func (_ggfe rulingList )aligned ()bool {if len (_ggfe )< 2{return false ;};_aced :=make (map[*ruling ]int );_aced [_ggfe [0]]=0;for _ ,_geddg :=range _ggfe [1:]{_degd :=false ;
for _ebcd :=range _aced {if _geddg .gridIntersecting (_ebcd ){_aced [_ebcd ]++;_degd =true ;break ;};};if !_degd {_aced [_geddg ]=0;};};_agdca :=0;for _ ,_decd :=range _aced {if _decd ==0{_agdca ++;};};_fbff :=float64 (_agdca )/float64 (len (_ggfe ));_ggcf :=_fbff <=1.0-_face ;
if _bbde {_dc .Log .Info ("\u0061\u006c\u0069\u0067\u006e\u0065\u0064\u003d\u0025\u0074\u0020\u0075\u006em\u0061\u0074\u0063\u0068\u0065\u0064=\u0025\u002e\u0032\u0066\u003d\u0025\u0064\u002f\u0025\u0064\u0020\u0076\u0065c\u0073\u003d\u0025\u0073",_ggcf ,_fbff ,_agdca ,len (_ggfe ),_ggfe .String ());
};return _ggcf ;};func (_efbc compositeCell )String ()string {_gabe :="";if len (_efbc .paraList )> 0{_gabe =_ababa (_efbc .paraList .merge ().text (),50);};return _bf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0070\u0061\u0072a\u0073\u0020\u0025\u0071",_efbc .PdfRectangle ,len (_efbc .paraList ),_gabe );
};func (_dfbag intSet )add (_bfcfc int ){_dfbag [_bfcfc ]=struct{}{}};func (_agfg *textPara )text ()string {_acfg :=new (_ff .Buffer );_agfg .writeText (_acfg );return _acfg .String ();};

// String returns a string descibing `i`.
func (_bdcd gridTile )String ()string {_eafcc :=func (_abed bool ,_fbba string )string {if _abed {return _fbba ;};return "\u005f";};return _bf .Sprintf ("\u00256\u002e2\u0066\u0020\u0025\u0031\u0073%\u0031\u0073%\u0031\u0073\u0025\u0031\u0073",_bdcd .PdfRectangle ,_eafcc (_bdcd ._bbddf ,"\u004c"),_eafcc (_bdcd ._egdd ,"\u0052"),_eafcc (_bdcd ._egad ,"\u0042"),_eafcc (_bdcd ._gcde ,"\u0054"));
};func (_fbe *textObject )checkOp (_faaa *_a .ContentStreamOperation ,_dgeec int ,_cge bool )(_aee bool ,_ecea error ){if _fbe ==nil {var _aebe []_cc .PdfObject ;if _dgeec > 0{_aebe =_faaa .Params ;if len (_aebe )> _dgeec {_aebe =_aebe [:_dgeec ];};};_dc .Log .Debug ("\u0025\u0023q \u006f\u0070\u0065r\u0061\u006e\u0064\u0020out\u0073id\u0065\u0020\u0074\u0065\u0078\u0074\u002e p\u0061\u0072\u0061\u006d\u0073\u003d\u0025+\u0076",_faaa .Operand ,_aebe );
};if _dgeec >=0{if len (_faaa .Params )!=_dgeec {if _cge {_ecea =_de .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");};_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_faaa .Operand ,_dgeec ,len (_faaa .Params ),_faaa .Params );
return false ,_ecea ;};};return true ,nil ;};func (_fgde paraList )findTableGrid (_eeagf gridTiling )(*textTable ,map[*textPara ]struct{}){_ceeg :=len (_eeagf ._cfdd );_dggb :=len (_eeagf ._fbfcc );_bgbbd :=textTable {_dfgeg :true ,_dffbb :_ceeg ,_fcga :_dggb ,_bfab :make (map[uint64 ]*textPara ,_ceeg *_dggb ),_eagcd :make (map[uint64 ]compositeCell ,_ceeg *_dggb )};
_egfb :=make (map[*textPara ]struct{});_gceba :=int ((1.0-_dfgdd )*float64 (_ceeg *_dggb ));_cagac :=0;if _bbca {_dc .Log .Info ("\u0066\u0069\u006e\u0064Ta\u0062\u006c\u0065\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0064\u0020\u0078\u0020%\u0064",_ceeg ,_dggb );
};for _dbae ,_gaae :=range _eeagf ._fbfcc {_badgb ,_eebec :=_eeagf ._afeb [_gaae ];if !_eebec {continue ;};for _fdaa ,_eegff :=range _eeagf ._cfdd {_ebceb ,_bcac :=_badgb [_eegff ];if !_bcac {continue ;};_cgbf :=_fgde .inTile (_ebceb );if len (_cgbf )==0{_cagac ++;
if _cagac > _gceba {if _bbca {_dc .Log .Info ("\u0021\u006e\u0075m\u0045\u006d\u0070\u0074\u0079\u003d\u0025\u0064",_cagac );};return nil ,nil ;};}else {_bgbbd .putComposite (_fdaa ,_dbae ,_cgbf ,_ebceb .PdfRectangle );for _ ,_caafb :=range _cgbf {_egfb [_caafb ]=struct{}{};
};};};};_ceea :=0;for _bcfe :=0;_bcfe < _ceeg ;_bcfe ++{_dgcc :=_bgbbd .get (_bcfe ,0);if _dgcc ==nil ||!_dgcc ._cedecf {_ceea ++;};};if _ceea ==0{if _bbca {_dc .Log .Info ("\u0021\u006e\u0075m\u0048\u0065\u0061\u0064\u0065\u0072\u003d\u0030");};return nil ,nil ;
};_edcc :=_bgbbd .reduceTiling (_eeagf ,_gddbg );_edcc =_edcc .subdivide ();return _edcc ,_egfb ;};func (_eaaf compositeCell )parasBBox ()(paraList ,_fa .PdfRectangle ){return _eaaf .paraList ,_eaaf .PdfRectangle ;};

// String returns a description of `state`.
func (_dfgd *textState )String ()string {_bga :="\u005bN\u004f\u0054\u0020\u0053\u0045\u0054]";if _dfgd ._accb !=nil {_bga =_dfgd ._accb .BaseFont ();};return _bf .Sprintf ("\u0074\u0063\u003d\u0025\u002e\u0032\u0066\u0020\u0074\u0077\u003d\u0025\u002e\u0032\u0066 \u0074f\u0073\u003d\u0025\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u003d\u0025\u0071",_dfgd ._ecad ,_dfgd ._egg ,_dfgd ._gae ,_bga );
};func (_agfd *shapesState )newSubPath (){_agfd .clearPath ();if _ffde {_dc .Log .Info ("\u006e\u0065\u0077\u0053\u0075\u0062\u0050\u0061\u0074h\u003a\u0020\u0025\u0073",_agfd );};};func (_cgdd *subpath )close (){if !_bcaa (_cgdd ._bdea [0],_cgdd .last ()){_cgdd .add (_cgdd ._bdea [0]);
};_cgdd ._efd =true ;_cgdd .removeDuplicates ();};

// Append appends `mark` to the mark array.
func (_cfeg *TextMarkArray )Append (mark TextMark ){_cfeg ._gaea =append (_cfeg ._gaea ,mark )};func (_cbcgd rulingList )merge ()*ruling {_ggae :=_cbcgd [0]._edga ;_dffadf :=_cbcgd [0]._cbedg ;_deaf :=_cbcgd [0]._egcbb ;for _ ,_aagd :=range _cbcgd [1:]{_ggae +=_aagd ._edga ;
if _aagd ._cbedg < _dffadf {_dffadf =_aagd ._cbedg ;};if _aagd ._egcbb > _deaf {_deaf =_aagd ._egcbb ;};};_cegca :=&ruling {_bbac :_cbcgd [0]._bbac ,_dfbg :_cbcgd [0]._dfbg ,Color :_cbcgd [0].Color ,_edga :_ggae /float64 (len (_cbcgd )),_cbedg :_dffadf ,_egcbb :_deaf };
if _dbadf {_dc .Log .Info ("\u006de\u0072g\u0065\u003a\u0020\u0025\u0032d\u0020\u0076e\u0063\u0073\u0020\u0025\u0073",len (_cbcgd ),_cegca );for _aaac ,_ebba :=range _cbcgd {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_aaac ,_ebba );
};};return _cegca ;};

// ExtractPageImages returns the image contents of the page extractor, including data
// and position, size information for each image.
// A set of options to control page image extraction can be passed in. The options
// parameter can be nil for the default options. By default, inline stencil masks
// are not extracted.
func (_efc *Extractor )ExtractPageImages (options *ImageExtractOptions )(*PageImages ,error ){_ad :=&imageExtractContext {_fgc :options };_fe :=_ad .extractContentStreamImages (_efc ._ccd ,_efc ._ccf );if _fe !=nil {return nil ,_fe ;};return &PageImages {Images :_ad ._gaa },nil ;
};func (_dbac *wordBag )blocked (_dcga *textWord )bool {if _dcga .Urx < _dbac .Llx {_eee :=_bade (_dcga .PdfRectangle );_cdgc :=_dcgg (_dbac .PdfRectangle );if _dbac ._beb .blocks (_eee ,_cdgc ){if _gcce {_dc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0078\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_dcga ,_dbac );
};return true ;};}else if _dbac .Urx < _dcga .Llx {_ceef :=_bade (_dbac .PdfRectangle );_egga :=_dcgg (_dcga .PdfRectangle );if _dbac ._beb .blocks (_ceef ,_egga ){if _gcce {_dc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0078\u2192\u0020:\u0020\u0025\u0073\u0020%s",_dcga ,_dbac );
};return true ;};};if _dcga .Ury < _dbac .Lly {_cbc :=_fbfdd (_dcga .PdfRectangle );_fbgb :=_cggad (_dbac .PdfRectangle );if _dbac ._aac .blocks (_cbc ,_fbgb ){if _gcce {_dc .Log .Info ("\u0062\u006c\u006f\u0063ke\u0064\u0020\u2190\u0079\u003a\u0020\u0025\u0073\u0020\u0025\u0073",_dcga ,_dbac );
};return true ;};}else if _dbac .Ury < _dcga .Lly {_ceedb :=_fbfdd (_dbac .PdfRectangle );_cede :=_cggad (_dcga .PdfRectangle );if _dbac ._aac .blocks (_ceedb ,_cede ){if _gcce {_dc .Log .Info ("b\u006co\u0063\u006b\u0065\u0064\u0020\u0079\u2192\u0020:\u0020\u0025\u0073\u0020%s",_dcga ,_dbac );
};return true ;};};return false ;};func (_effa *textTable )emptyRow (_bbfa int )bool {for _dgfb :=0;_dgfb < _effa ._dffbb ;_dgfb ++{_gdcc :=_effa .get (_dgfb ,_bbfa );if _gdcc !=nil &&_gdcc .text ()!=""{return false ;};};return true ;};func (_gbbf *textTable )subdivide ()*textTable {_gbbf .logComposite ("\u0073u\u0062\u0064\u0069\u0076\u0069\u0064e");
_cgcdb :=_gbbf .compositeRowCorridors ();_ddfb :=_gbbf .compositeColCorridors ();if _cgee {_dc .Log .Info ("\u0073u\u0062\u0064i\u0076\u0069\u0064\u0065:\u000a\u0009\u0072o\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s=\u0025\u0073\u000a\t\u0063\u006fl\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073=\u0025\u0073",_eeaf (_cgcdb ),_eeaf (_ddfb ));
};if len (_cgcdb )==0||len (_ddfb )==0{return _gbbf ;};_aedf (_cgcdb );_aedf (_ddfb );if _cgee {_dc .Log .Info ("\u0073\u0075\u0062\u0064\u0069\u0076\u0069\u0064\u0065\u0020\u0066\u0069\u0078\u0065\u0064\u003a\u000a\u0009r\u006f\u0077\u0043\u006f\u0072\u0072\u0069d\u006f\u0072\u0073\u003d\u0025\u0073\u000a\u0009\u0063\u006f\u006cC\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d\u0025\u0073",_eeaf (_cgcdb ),_eeaf (_ddfb ));
};_ebcdd ,_cbfa :=_fbda (_gbbf ._fcga ,_cgcdb );_efca ,_dgede :=_fbda (_gbbf ._dffbb ,_ddfb );_fcdgb :=make (map[uint64 ]*textPara ,_dgede *_cbfa );_ccag :=&textTable {PdfRectangle :_gbbf .PdfRectangle ,_dfgeg :_gbbf ._dfgeg ,_fcga :_cbfa ,_dffbb :_dgede ,_bfab :_fcdgb };
if _cgee {_dc .Log .Info ("\u0073\u0075b\u0064\u0069\u0076\u0069\u0064\u0065\u003a\u0020\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0020\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u0020\u0063\u0065\u006c\u006c\u0073\u003d\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072s\u003d\u0025\u0073\u000a"+"\u0009\u0079\u004f\u0066\u0066\u0073\u0065\u0074\u0073=\u0025\u002b\u0076\u000a"+"\u0009\u0078\u004f\u0066\u0066\u0073\u0065\u0074\u0073\u003d\u0025\u002b\u0076",_gbbf ._dffbb ,_gbbf ._fcga ,_dgede ,_cbfa ,_eeaf (_cgcdb ),_eeaf (_ddfb ),_ebcdd ,_efca );
};for _egae :=0;_egae < _gbbf ._fcga ;_egae ++{_edaf :=_ebcdd [_egae ];for _cfdg :=0;_cfdg < _gbbf ._dffbb ;_cfdg ++{_abbb :=_efca [_cfdg ];if _cgee {_bf .Printf ("\u0025\u0036\u0064\u002c %\u0032\u0064\u003a\u0020\u0078\u0030\u003d\u0025\u0064\u0020\u0079\u0030\u003d\u0025d\u000a",_cfdg ,_egae ,_abbb ,_edaf );
};_eeab ,_geff :=_gbbf ._eagcd [_bfbbab (_cfdg ,_egae )];if !_geff {continue ;};_cbfab :=_eeab .split (_cgcdb [_egae ],_ddfb [_cfdg ]);for _cdbff :=0;_cdbff < _cbfab ._fcga ;_cdbff ++{for _cbde :=0;_cbde < _cbfab ._dffbb ;_cbde ++{_bgcf :=_cbfab .get (_cbde ,_cdbff );
_ccag .put (_abbb +_cbde ,_edaf +_cdbff ,_bgcf );if _cgee {_bf .Printf ("\u0025\u0038\u0064\u002c\u0020\u0025\u0032\u0064\u003a\u0020\u0025\u0073\u000a",_abbb +_cbde ,_edaf +_cdbff ,_bgcf );};};};};};return _ccag ;};func (_caae *textTable )reduceTiling (_bfebb gridTiling ,_eegd float64 )*textTable {_agbbf :=make ([]int ,0,_caae ._fcga );
_aaag :=make ([]int ,0,_caae ._dffbb );_eafgg :=_bfebb ._cfdd ;_dgdgb :=_bfebb ._fbfcc ;for _caaag :=0;_caaag < _caae ._fcga ;_caaag ++{_dbegg :=_caaag > 0&&_gf .Abs (_dgdgb [_caaag -1]-_dgdgb [_caaag ])< _eegd &&_caae .emptyRow (_caaag );if !_dbegg {_agbbf =append (_agbbf ,_caaag );
};};for _egdc :=0;_egdc < _caae ._dffbb ;_egdc ++{_fegc :=_egdc < _caae ._dffbb -1&&_gf .Abs (_eafgg [_egdc +1]-_eafgg [_egdc ])< _eegd &&_caae .emptyColumn (_egdc );if !_fegc {_aaag =append (_aaag ,_egdc );};};if len (_agbbf )==_caae ._fcga &&len (_aaag )==_caae ._dffbb {return _caae ;
};_bafcf :=textTable {_dfgeg :_caae ._dfgeg ,_dffbb :len (_aaag ),_fcga :len (_agbbf ),_eagcd :make (map[uint64 ]compositeCell ,len (_aaag )*len (_agbbf ))};if _cgee {_dc .Log .Info ("\u0072\u0065\u0064\u0075c\u0065\u0054\u0069\u006c\u0069\u006e\u0067\u003a\u0020\u0025d\u0078%\u0064\u0020\u002d\u003e\u0020\u0025\u0064x\u0025\u0064",_caae ._dffbb ,_caae ._fcga ,len (_aaag ),len (_agbbf ));
_dc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0043\u006f\u006c\u0073\u003a\u0020\u0025\u002b\u0076",_aaag );_dc .Log .Info ("\u0072\u0065d\u0075\u0063\u0065d\u0052\u006f\u0077\u0073\u003a\u0020\u0025\u002b\u0076",_agbbf );};for _dcef ,_acdca :=range _agbbf {for _geed ,_fdbdece :=range _aaag {_efcae ,_bfdaf :=_caae .getComposite (_fdbdece ,_acdca );
if len (_efcae )==0{continue ;};if _cgee {_bf .Printf ("\u0020 \u0025\u0032\u0064\u002c \u0025\u0032\u0064\u0020\u0028%\u0032d\u002c \u0025\u0032\u0064\u0029\u0020\u0025\u0071\n",_geed ,_dcef ,_fdbdece ,_acdca ,_ababa (_efcae .merge ().text (),50));};_bafcf .putComposite (_geed ,_dcef ,_efcae ,_bfdaf );
};};return &_bafcf ;};type textWord struct{_fa .PdfRectangle ;_aabad float64 ;_cbbb string ;_bffcd []*textMark ;_fggb float64 ;_bdfcc bool ;};func _ababa (_gbeae string ,_ceedd int )string {if len (_gbeae )< _ceedd {return _gbeae ;};return _gbeae [:_ceedd ];
};func (_faea *textTable )newTablePara ()*textPara {_ceabg :=_faea .computeBbox ();_acdd :=&textPara {PdfRectangle :_ceabg ,_gedc :_ceabg ,_afcc :_faea };if _cgee {_dc .Log .Info ("\u006e\u0065w\u0054\u0061\u0062l\u0065\u0050\u0061\u0072\u0061\u003a\u0020\u0025\u0073",_acdd );
};return _acdd ;};func _dfbb (_aaeb map[float64 ]map[float64 ]gridTile )[]float64 {_dbegc :=make ([]float64 ,0,len (_aaeb ));for _ccaa :=range _aaeb {_dbegc =append (_dbegc ,_ccaa );};_g .Float64s (_dbegc );_daf :=len (_dbegc );for _bdff :=0;_bdff < _daf /2;
_bdff ++{_dbegc [_bdff ],_dbegc [_daf -1-_bdff ]=_dbegc [_daf -1-_bdff ],_dbegc [_bdff ];};return _dbegc ;};

// TextTable represents a table.
// Cells are ordered top-to-bottom, left-to-right.
// Cells[y] is the (0-offset) y'th row in the table.
// Cells[y][x] is the (0-offset) x'th column in the table.
type TextTable struct{W ,H int ;Cells [][]TableCell ;};func (_fgfc paraList )readBefore (_dfggad []int ,_bdbg ,_cca int )bool {_cda ,_ceab :=_fgfc [_bdbg ],_fgfc [_cca ];if _aeaec (_cda ,_ceab )&&_cda .Lly > _ceab .Lly {return true ;};if !(_cda ._gedc .Urx < _ceab ._gedc .Llx ){return false ;
};_egbeg ,_eefd :=_cda .Lly ,_ceab .Lly ;if _egbeg > _eefd {_eefd ,_egbeg =_egbeg ,_eefd ;};_geca :=_gf .Max (_cda ._gedc .Llx ,_ceab ._gedc .Llx );_dbfa :=_gf .Min (_cda ._gedc .Urx ,_ceab ._gedc .Urx );_dfeba :=_fgfc .llyRange (_dfggad ,_egbeg ,_eefd );
for _ ,_cfcdb :=range _dfeba {if _cfcdb ==_bdbg ||_cfcdb ==_cca {continue ;};_aeefe :=_fgfc [_cfcdb ];if _aeefe ._gedc .Llx <=_dbfa &&_geca <=_aeefe ._gedc .Urx {return false ;};};return true ;};func (_bgc *textObject )getFontDirect (_afef string )(*_fa .PdfFont ,error ){_dcdc ,_fdeg :=_bgc .getFontDict (_afef );
if _fdeg !=nil {return nil ,_fdeg ;};_fcgd ,_fdeg :=_fa .NewPdfFontFromPdfObject (_dcdc );if _fdeg !=nil {_dc .Log .Debug ("\u0067\u0065\u0074\u0046\u006f\u006e\u0074\u0044\u0069\u0072\u0065\u0063\u0074\u003a\u0020\u004e\u0065\u0077Pd\u0066F\u006f\u006e\u0074\u0046\u0072\u006f\u006d\u0050\u0064\u0066\u004f\u0062j\u0065\u0063\u0074\u0020\u0066\u0061\u0069\u006c\u0065\u0064\u002e\u0020\u006e\u0061\u006d\u0065\u003d%\u0023\u0071\u0020\u0065\u0072\u0072\u003d\u0025\u0076",_afef ,_fdeg );
};return _fcgd ,_fdeg ;};func (_cab *textObject )moveTextSetLeading (_fba ,_cbed float64 ){_cab ._cde ._gfb =-_cbed ;_cab .moveLP (_fba ,_cbed );};func (_bcbbe *wordBag )text ()string {_acgb :=_bcbbe .allWords ();_bdfc :=make ([]string ,len (_acgb ));for _gbed ,_begd :=range _acgb {_bdfc [_gbed ]=_begd ._cbbb ;
};return _ce .Join (_bdfc ,"\u0020");};func (_fgdgbe paraList )xNeighbours (_gebce float64 )map[*textPara ][]int {_abfb :=make ([]event ,2*len (_fgdgbe ));if _gebce ==0{for _beged ,_aede :=range _fgdgbe {_abfb [2*_beged ]=event {_aede .Llx ,true ,_beged };
_abfb [2*_beged +1]=event {_aede .Urx ,false ,_beged };};}else {for _fcegb ,_dgaa :=range _fgdgbe {_abfb [2*_fcegb ]=event {_dgaa .Llx -_gebce *_dgaa .fontsize (),true ,_fcegb };_abfb [2*_fcegb +1]=event {_dgaa .Urx +_gebce *_dgaa .fontsize (),false ,_fcegb };
};};return _fgdgbe .eventNeighbours (_abfb );};func (_daga *textTable )bbox ()_fa .PdfRectangle {return _daga .PdfRectangle };func _dadeb (_bdcef ,_agff float64 )bool {return _bdcef /_gf .Max (_cggf ,_agff )< _gdddd };func (_ccgeb intSet )del (_cffc int ){delete (_ccgeb ,_cffc )};
func (_ebee gridTiling )complete ()bool {for _ ,_caaa :=range _ebee ._afeb {for _ ,_gabg :=range _caaa {if !_gabg .complete (){return false ;};};};return true ;};func (_ccgb *textTable )markCells (){for _ccce :=0;_ccce < _ccgb ._fcga ;_ccce ++{for _fgacg :=0;
_fgacg < _ccgb ._dffbb ;_fgacg ++{_aeff :=_ccgb .get (_fgacg ,_ccce );if _aeff !=nil {_aeff ._ebgdf =true ;};};};};func (_efabd rulingList )comp (_dbgc ,_ccee int )bool {_fgdf ,_fdgfa :=_efabd [_dbgc ],_efabd [_ccee ];_gbacf ,_dadca :=_fgdf ._bbac ,_fdgfa ._bbac ;
if _gbacf !=_dadca {return _gbacf > _dadca ;};if _gbacf ==_fdgf {return false ;};_gedg :=func (_ffccc bool )bool {if _gbacf ==_cbaaf {return _ffccc ;};return !_ffccc ;};_gafb ,_bdfcb :=_fgdf ._edga ,_fdgfa ._edga ;if _gafb !=_bdfcb {return _gedg (_gafb > _bdfcb );
};_gafb ,_bdfcb =_fgdf ._cbedg ,_fdgfa ._cbedg ;if _gafb !=_bdfcb {return _gedg (_gafb < _bdfcb );};return _gedg (_fgdf ._egcbb < _fdgfa ._egcbb );};func (_cebe *shapesState )closePath (){if _cebe ._ebeg {_cebe ._cafd =append (_cebe ._cafd ,_agbb (_cebe ._aeca ));
_cebe ._ebeg =false ;}else if len (_cebe ._cafd )==0{if _ffde {_dc .Log .Debug ("\u0063\u006c\u006f\u0073eP\u0061\u0074\u0068\u0020\u0077\u0069\u0074\u0068\u0020\u006e\u006f\u0020\u0070\u0061t\u0068");};_cebe ._ebeg =false ;return ;};_cebe ._cafd [len (_cebe ._cafd )-1].close ();
if _ffde {_dc .Log .Info ("\u0063\u006c\u006f\u0073\u0065\u0050\u0061\u0074\u0068\u003a\u0020\u0025\u0073",_cebe );};};const (RenderModeStroke RenderMode =1<<iota ;RenderModeFill ;RenderModeClip ;);func (_ffbf *textLine )endsInHyphen ()bool {_edfe :=_ffbf ._efce [len (_ffbf ._efce )-1];
_adfed :=_edfe ._cbbb ;_fdfe ,_gaf :=_e .DecodeLastRuneInString (_adfed );if _gaf <=0||!_c .Is (_c .Hyphen ,_fdfe ){return false ;};if _edfe ._bdfcc &&_cecb (_adfed ){return true ;};return _cecb (_ffbf .text ());};func _debe (_dffc *textWord ,_dfeb float64 ,_dfgcd ,_gag rulingList )*wordBag {_dbc :=_ddda (_dffc ._aabad );
_bggd :=[]*textWord {_dffc };_fbd :=wordBag {_cfcc :map[int ][]*textWord {_dbc :_bggd },PdfRectangle :_dffc .PdfRectangle ,_cabe :_dffc ._fggb ,_defe :_dfeb ,_beb :_dfgcd ,_aac :_gag };return &_fbd ;};func (_bdac compositeCell )split (_bafd ,_gbce []float64 )*textTable {_ffcd :=len (_bafd )+1;
_ggff :=len (_gbce )+1;if _cgee {_dc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069t\u0065\u0043\u0065l\u006c\u002e\u0073\u0070l\u0069\u0074\u003a\u0020\u0025\u0064\u0020\u0078\u0020\u0025\u0064\u000a\u0009\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u003d\u0025\u0073\u000a"+"\u0009\u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073=\u0025\u0036\u002e\u0032\u0066\u000a\t\u0063\u006f\u006c\u0043\u006f\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u003d%\u0036\u002e\u0032\u0066",_ggff ,_ffcd ,_bdac ,_bafd ,_gbce );
_bf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u0070\u0061\u0072\u0061\u0073\u000a",len (_bdac .paraList ));for _fbb ,_badc :=range _bdac .paraList {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_fbb ,_badc .String ());};_bf .Printf ("\u0020\u0020\u0020\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",len (_bdac .lines ()));
for _dadbf ,_fgbe :=range _bdac .lines (){_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_dadbf ,_fgbe );};};_bafd =_fgdg (_bafd ,_bdac .Ury ,_bdac .Lly );_gbce =_fgdg (_gbce ,_bdac .Llx ,_bdac .Urx );_bdgc :=make (map[uint64 ]*textPara ,_ggff *_ffcd );
_bffbb :=textTable {_dffbb :_ggff ,_fcga :_ffcd ,_bfab :_bdgc };_edcb :=_bdac .paraList ;_g .Slice (_edcb ,func (_edcf ,_ceee int )bool {_ffdef ,_badca :=_edcb [_edcf ],_edcb [_ceee ];_bggg ,_bedg :=_ffdef .Lly ,_badca .Lly ;if _bggg !=_bedg {return _bggg < _bedg ;
};return _ffdef .Llx < _badca .Llx ;});_fgbd :=make (map[uint64 ]_fa .PdfRectangle ,_ggff *_ffcd );for _cfea ,_ccdb :=range _bafd [1:]{_bced :=_bafd [_cfea ];for _dddag ,_ggcg :=range _gbce [1:]{_cdcg :=_gbce [_dddag ];_fgbd [_bfbbab (_dddag ,_cfea )]=_fa .PdfRectangle {Llx :_cdcg ,Urx :_ggcg ,Lly :_ccdb ,Ury :_bced };
};};if _cgee {_dc .Log .Info ("\u0063\u006f\u006d\u0070\u006f\u0073\u0069\u0074\u0065\u0043\u0065l\u006c\u002e\u0073\u0070\u006c\u0069\u0074\u003a\u0020\u0072e\u0063\u0074\u0073");_bf .Printf ("\u0020\u0020\u0020\u0020");for _gefde :=0;_gefde < _ggff ;
_gefde ++{_bf .Printf ("\u0025\u0033\u0030\u0064\u002c\u0020",_gefde );};_bf .Println ();for _fabg :=0;_fabg < _ffcd ;_fabg ++{_bf .Printf ("\u0020\u0020\u0025\u0032\u0064\u003a",_fabg );for _fcdc :=0;_fcdc < _ggff ;_fcdc ++{_bf .Printf ("\u00256\u002e\u0032\u0066\u002c\u0020",_fgbd [_bfbbab (_fcdc ,_fabg )]);
};_bf .Println ();};};_cgead :=func (_dbdfg *textLine )(int ,int ){for _acfb :=0;_acfb < _ffcd ;_acfb ++{for _cggab :=0;_cggab < _ggff ;_cggab ++{if _cgab (_fgbd [_bfbbab (_cggab ,_acfb )],_dbdfg .PdfRectangle ){return _cggab ,_acfb ;};};};return -1,-1;
};_ggdg :=make (map[uint64 ][]*textLine ,_ggff *_ffcd );for _ ,_dged :=range _edcb .lines (){_bddaf ,_cfccg :=_cgead (_dged );if _bddaf < 0{continue ;};_ggdg [_bfbbab (_bddaf ,_cfccg )]=append (_ggdg [_bfbbab (_bddaf ,_cfccg )],_dged );};for _bgace :=0;
_bgace < len (_bafd )-1;_bgace ++{_gefdg :=_bafd [_bgace ];_ccffc :=_bafd [_bgace +1];for _fdff :=0;_fdff < len (_gbce )-1;_fdff ++{_gfgce :=_gbce [_fdff ];_gcgb :=_gbce [_fdff +1];_ebfc :=_fa .PdfRectangle {Llx :_gfgce ,Urx :_gcgb ,Lly :_ccffc ,Ury :_gefdg };
_bbbd :=_ggdg [_bfbbab (_fdff ,_bgace )];if len (_bbbd )==0{continue ;};_gdbd :=_gbcdb (_ebfc ,_bbbd );_bffbb .put (_fdff ,_bgace ,_gdbd );};};return &_bffbb ;};func (_eccg rulingList )isActualGrid ()(rulingList ,bool ){_gega ,_cdcad :=_eccg .augmentGrid ();
if !(len (_gega )>=_ggfd +1&&len (_cdcad )>=_bgef +1){if _bbde {_dc .Log .Info ("\u0069s\u0041\u0063t\u0075\u0061\u006c\u0047r\u0069\u0064\u003a \u004e\u006f\u0074\u0020\u0061\u006c\u0069\u0067\u006eed\u002e\u0020\u0025d\u0020\u0078 \u0025\u0064\u0020\u003c\u0020\u0025d\u0020\u0078 \u0025\u0064",len (_gega ),len (_cdcad ),_ggfd +1,_bgef +1);
};return nil ,false ;};if _bbde {_dc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075a\u006c\u0047\u0072\u0069\u0064\u003a\u0020\u0025\u0073\u0020\u003a\u0020\u0025t\u0020\u0026\u0020\u0025\u0074\u0020\u2192 \u0025\u0074",_eccg ,len (_gega )>=2,len (_cdcad )>=2,len (_gega )>=2&&len (_cdcad )>=2);
for _gcad ,_eefafd :=range _eccg {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0076\u000a",_gcad ,_eefafd );};};if _fcgec {_bgaf ,_ecfe :=_gega [0],_gega [len (_gega )-1];_ffad ,_gbea :=_cdcad [0],_cdcad [len (_cdcad )-1];if !(_ebdb (_bgaf ._edga -_ffad ._cbedg )&&_ebdb (_ecfe ._edga -_ffad ._egcbb )&&_ebdb (_ffad ._edga -_bgaf ._egcbb )&&_ebdb (_gbea ._edga -_bgaf ._cbedg )){if _bbde {_dc .Log .Info ("\u0069\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069d\u003a\u0020\u0020N\u006f\u0074 \u0061\u006c\u0069\u0067\u006e\u0065d\u002e\n\t\u0076\u0030\u003d\u0025\u0073\u000a\u0009\u0076\u0031\u003d\u0025\u0073\u000a\u0009\u0068\u0030\u003d\u0025\u0073\u000a\u0009\u0068\u0031\u003d\u0025\u0073",_bgaf ,_ecfe ,_ffad ,_gbea );
};return nil ,false ;};}else {if !_gega .aligned (){if _dbadf {_dc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0076\u0065\u0072\u0074\u0073\u002e\u0020%\u0064",len (_gega ));
};return nil ,false ;};if !_cdcad .aligned (){if _bbde {_dc .Log .Info ("i\u0073\u0041\u0063\u0074\u0075\u0061l\u0047\u0072\u0069\u0064\u003a\u0020N\u006f\u0074\u0020\u0061\u006c\u0069\u0067n\u0065\u0064\u0020\u0068\u006f\u0072\u007a\u0073\u002e\u0020%\u0064",len (_cdcad ));
};return nil ,false ;};};_bfce :=append (_gega ,_cdcad ...);return _bfce ,true ;};type wordBag struct{_fa .PdfRectangle ;_cabe float64 ;_beb ,_aac rulingList ;_defe float64 ;_cfcc map[int ][]*textWord ;};

// ImageExtractOptions contains options for controlling image extraction from
// PDF pages.
type ImageExtractOptions struct{IncludeInlineStencilMasks bool ;};func _cedaa (_ccac []*textWord ,_gcgd int )[]*textWord {_fcecd :=len (_ccac );copy (_ccac [_gcgd :],_ccac [_gcgd +1:]);return _ccac [:_fcecd -1];};func _agea (_cbac []*textMark ,_agbfd _fa .PdfRectangle )[]*textWord {var _gced []*textWord ;
var _fcddc *textWord ;if _bbe {_dc .Log .Info ("\u006d\u0061\u006beT\u0065\u0078\u0074\u0057\u006f\u0072\u0064\u0073\u003a\u0020\u0025\u0064\u0020\u006d\u0061\u0072\u006b\u0073",len (_cbac ));};_gcfd :=func (){if _fcddc !=nil {_edbba :=_fcddc .computeText ();
if !_eaba (_edbba ){_fcddc ._cbbb =_edbba ;_gced =append (_gced ,_fcddc );if _bbe {_dc .Log .Info ("\u0061\u0064\u0064Ne\u0077\u0057\u006f\u0072\u0064\u003a\u0020\u0025\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",len (_gced )-1,_fcddc .String ());
for _deab ,_bbea :=range _fcddc ._bffcd {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_deab ,_bbea .String ());};};};_fcddc =nil ;};};for _ ,_gfeee :=range _cbac {if _ccegf &&_fcddc !=nil &&len (_fcddc ._bffcd )> 0{_dgced :=_fcddc ._bffcd [len (_fcddc ._bffcd )-1];
_bfde ,_fade :=_cffe (_gfeee ._bfea );_babd ,_fddg :=_cffe (_dgced ._bfea );if _fade &&!_fddg &&_dgced .inDiacriticArea (_gfeee ){_fcddc .addDiacritic (_bfde );continue ;};if _fddg &&!_fade &&_gfeee .inDiacriticArea (_dgced ){_fcddc ._bffcd =_fcddc ._bffcd [:len (_fcddc ._bffcd )-1];
_fcddc .appendMark (_gfeee ,_agbfd );_fcddc .addDiacritic (_babd );continue ;};};_efeeb :=_eaba (_gfeee ._bfea );if _efeeb {_gcfd ();continue ;};if _fcddc ==nil &&!_efeeb {_fcddc =_eefff ([]*textMark {_gfeee },_agbfd );continue ;};_aeaeb :=_fcddc ._fggb ;
_cgbd :=_gf .Abs (_gccb (_agbfd ,_gfeee )-_fcddc ._aabad )/_aeaeb ;_ccad :=_befg (_gfeee ,_fcddc )/_aeaeb ;if _ccad >=_aggd ||!(-_ddgc <=_ccad &&_cgbd <=_acaa ){_gcfd ();_fcddc =_eefff ([]*textMark {_gfeee },_agbfd );continue ;};_fcddc .appendMark (_gfeee ,_agbfd );
};_gcfd ();return _gced ;};func _eaba (_dcbfc string )bool {for _ ,_bcec :=range _dcbfc {if !_c .IsSpace (_bcec ){return false ;};};return true ;};func _gccf (_bbge ,_bddg bounded )float64 {return _bbge .bbox ().Llx -_bddg .bbox ().Llx };type rectRuling struct{_bfbba rulingKind ;
_dfdf markKind ;_b .Color ;_fa .PdfRectangle ;};func _acgf (_gcee []*textWord ,_gabd float64 ,_geb ,_ggbd rulingList )*wordBag {_ged :=_debe (_gcee [0],_gabd ,_geb ,_ggbd );for _ ,_bfa :=range _gcee [1:]{_eadf :=_ddda (_bfa ._aabad );_ged ._cfcc [_eadf ]=append (_ged ._cfcc [_eadf ],_bfa );
_ged .PdfRectangle =_bfbbb (_ged .PdfRectangle ,_bfa .PdfRectangle );};_ged .sort ();return _ged ;};func (_gbcf *wordBag )depthIndexes ()[]int {if len (_gbcf ._cfcc )==0{return nil ;};_egbf :=make ([]int ,len (_gbcf ._cfcc ));_adfb :=0;for _ggef :=range _gbcf ._cfcc {_egbf [_adfb ]=_ggef ;
_adfb ++;};_g .Ints (_egbf );return _egbf ;};type textResult struct{_dba PageText ;_dab int ;_eafd int ;};func _dcgg (_eafc _fa .PdfRectangle )*ruling {return &ruling {_bbac :_bffc ,_edga :_eafc .Llx ,_cbedg :_eafc .Lly ,_egcbb :_eafc .Ury };};func (_eed *shapesState )lineTo (_bcg ,_gceb float64 ){if _ffde {_dc .Log .Info ("\u006c\u0069\u006eeT\u006f\u0028\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0070\u003d\u0025\u002e\u0032\u0066",_bcg ,_gceb ,_eed .devicePoint (_bcg ,_gceb ));
};_eed .addPoint (_bcg ,_gceb );};func (_cggg *PageText )computeViews (){var _aaba rulingList ;if _bacb {_cded :=_efdfg (_cggg ._ebab );_aaba =append (_aaba ,_cded ...);};if _eeeb {_cgb :=_gdg (_cggg ._dadg );_aaba =append (_aaba ,_cgb ...);};_aaba ,_cegc :=_aaba .toTilings ();
var _bada paraList ;_deed :=len (_cggg ._aefg );for _cagb :=0;_cagb < 360&&_deed > 0;_cagb +=90{_aeef :=make ([]*textMark ,0,len (_cggg ._aefg )-_deed );for _ ,_eega :=range _cggg ._aefg {if _eega ._dedf ==_cagb {_aeef =append (_aeef ,_eega );};};if len (_aeef )> 0{_ebd :=_ffeb (_aeef ,_cggg ._ccfa ,_aaba ,_cegc );
_bada =append (_bada ,_ebd ...);_deed -=len (_aeef );};};_afgc :=new (_ff .Buffer );_bada .writeText (_afgc );_cggg ._bef =_afgc .String ();_cggg ._bedc =_bada .toTextMarks ();_cggg ._gcdc =_bada .tables ();if _cgee {_dc .Log .Info ("\u0063\u006f\u006dpu\u0074\u0065\u0056\u0069\u0065\u0077\u0073\u003a\u0020\u0074\u0061\u0062\u006c\u0065\u0073\u003d\u0025\u0064",len (_cggg ._gcdc ));
};};

// String returns a description of `b`.
func (_gcac *wordBag )String ()string {var _fdb []string ;for _ ,_fecd :=range _gcac .depthIndexes (){_cefd :=_gcac ._cfcc [_fecd ];for _ ,_ddbg :=range _cefd {_fdb =append (_fdb ,_ddbg ._cbbb );};};return _bf .Sprintf ("\u0025.\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065=\u0025\u002e\u0032\u0066\u0020\u0025\u0064\u0020\u0025\u0071",_gcac .PdfRectangle ,_gcac ._cabe ,len (_fdb ),_fdb );
};func _efb (_afee ,_dfgdg bounded )float64 {_cbaa :=_gcdb (_afee ,_dfgdg );if !_bffed (_cbaa ){return _cbaa ;};return _gccf (_afee ,_dfgdg );};type shapesState struct{_bbga _gd .Matrix ;_gbcb _gd .Matrix ;_cafd []*subpath ;_ebeg bool ;_aeca _gd .Point ;
_gace *textObject ;};func _adgc (_gefg _gd .Point )_gd .Matrix {return _gd .TranslationMatrix (_gefg .X ,_gefg .Y )};func (_ccda *textObject )setTextMatrix (_ace []float64 ){if len (_ace )!=6{_dc .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u006c\u0065\u006e\u0028\u0066\u0029\u0020\u0021\u003d\u0020\u0036\u0020\u0028\u0025\u0064\u0029",len (_ace ));
return ;};_dgd ,_caa ,_dfa ,_faf ,_feba ,_aed :=_ace [0],_ace [1],_ace [2],_ace [3],_ace [4],_ace [5];_ccda ._gfgc =_gd .NewMatrix (_dgd ,_caa ,_dfa ,_faf ,_feba ,_aed );_ccda ._gcd =_ccda ._gfgc ;};const _eae =1.0/1000.0;type stateStack []*textState ;
func _fbccc (_fcdca []_cc .PdfObject )(_dcdac ,_dggbf float64 ,_bfbgd error ){if len (_fcdca )!=2{return 0,0,_bf .Errorf ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u006e\u0075\u006d\u0062\u0065\u0072\u0020o\u0066 \u0070\u0061\u0072\u0061\u006d\u0073\u003a \u0025\u0064",len (_fcdca ));
};_gcceb ,_bfbgd :=_cc .GetNumbersAsFloat (_fcdca );if _bfbgd !=nil {return 0,0,_bfbgd ;};return _gcceb [0],_gcceb [1],nil ;};var (_geedc =map[rune ]string {0x0060:"\u0300",0x02CB:"\u0300",0x0027:"\u0301",0x00B4:"\u0301",0x02B9:"\u0301",0x02CA:"\u0301",0x005E:"\u0302",0x02C6:"\u0302",0x007E:"\u0303",0x02DC:"\u0303",0x00AF:"\u0304",0x02C9:"\u0304",0x02D8:"\u0306",0x02D9:"\u0307",0x00A8:"\u0308",0x00B0:"\u030a",0x02DA:"\u030a",0x02BA:"\u030b",0x02DD:"\u030b",0x02C7:"\u030c",0x02C8:"\u030d",0x0022:"\u030e",0x02BB:"\u0312",0x02BC:"\u0313",0x0486:"\u0313",0x055A:"\u0313",0x02BD:"\u0314",0x0485:"\u0314",0x0559:"\u0314",0x02D4:"\u031d",0x02D5:"\u031e",0x02D6:"\u031f",0x02D7:"\u0320",0x02B2:"\u0321",0x00B8:"\u0327",0x02CC:"\u0329",0x02B7:"\u032b",0x02CD:"\u0331",0x005F:"\u0332",0x204E:"\u0359"};
);

// String returns a human readable description of `s`.
func (_aafce intSet )String ()string {var _gece []int ;for _bdee :=range _aafce {if _aafce .has (_bdee ){_gece =append (_gece ,_bdee );};};_g .Ints (_gece );return _bf .Sprintf ("\u0025\u002b\u0076",_gece );};var _ccge =map[rulingKind ]string {_fdgf :"\u006e\u006f\u006e\u0065",_cbaaf :"\u0068\u006f\u0072\u0069\u007a\u006f\u006e\u0074\u0061\u006c",_bffc :"\u0076\u0065\u0072\u0074\u0069\u0063\u0061\u006c"};
func _efbd (_ceagd []compositeCell )[]float64 {var _eaac []*textLine ;_fabc :=0;for _ ,_agdb :=range _ceagd {_fabc +=len (_agdb .paraList );_eaac =append (_eaac ,_agdb .lines ()...);};_g .Slice (_eaac ,func (_efgb ,_gdbe int )bool {_afdf ,_ddge :=_eaac [_efgb ],_eaac [_gdbe ];
_deaa ,_baee :=_afdf ._bgac ,_ddge ._bgac ;if !_bffed (_deaa -_baee ){return _deaa < _baee ;};return _afdf .Llx < _ddge .Llx ;});if _cgee {_bf .Printf ("\u0020\u0020\u0020 r\u006f\u0077\u0042\u006f\u0072\u0064\u0065\u0072\u0073:\u0020%\u0064 \u0070a\u0072\u0061\u0073\u0020\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u000a",_fabc ,len (_eaac ));
for _aafa ,_bfgg :=range _eaac {_bf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_aafa ,_bfgg );};};var _dcbd []float64 ;_edeb :=_eaac [0];var _ebge [][]*textLine ;_fbgba :=[]*textLine {_edeb };for _eeaga ,_bacfg :=range _eaac [1:]{if _bacfg .Ury < _edeb .Lly {_gfdd :=0.5*(_bacfg .Ury +_edeb .Lly );
if _cgee {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u003c\u0020\u0025\u0036.\u0032f\u0020\u0062\u006f\u0072\u0064\u0065\u0072\u003d\u0025\u0036\u002e\u0032\u0066\u000a"+"\u0009\u0020\u0071\u003d\u0025\u0073\u000a\u0009\u0020p\u003d\u0025\u0073\u000a",_eeaga ,_bacfg .Ury ,_edeb .Lly ,_gfdd ,_edeb ,_bacfg );
};_dcbd =append (_dcbd ,_gfdd );_ebge =append (_ebge ,_fbgba );_fbgba =nil ;};_fbgba =append (_fbgba ,_bacfg );if _bacfg .Lly < _edeb .Lly {_edeb =_bacfg ;};};if len (_fbgba )> 0{_ebge =append (_ebge ,_fbgba );};if _cgee {_bf .Printf (" \u0020\u0020\u0020\u0020\u0020\u0020 \u0072\u006f\u0077\u0043\u006f\u0072\u0072\u0069\u0064o\u0072\u0073\u003d%\u0036.\u0032\u0066\u000a",_dcbd );
};if _cgee {_dc .Log .Info ("\u0072\u006f\u0077\u003d\u0025\u0064",len (_ceagd ));for _addee ,_ecgbe :=range _ceagd {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0073\u000a",_addee ,_ecgbe );};_dc .Log .Info ("\u0067r\u006f\u0075\u0070\u0073\u003d\u0025d",len (_ebge ));
for _dbbc ,_abdd :=range _ebge {_bf .Printf ("\u0025\u0034\u0064\u003a\u0020\u0025\u0064\u000a",_dbbc ,len (_abdd ));for _fccc ,_fceab :=range _abdd {_bf .Printf ("\u0025\u0038\u0064\u003a\u0020\u0025\u0073\u000a",_fccc ,_fceab );};};};_gbcff :=true ;for _bbabc ,_aedae :=range _ebge {_cbge :=true ;
for _bgbcb ,_dccd :=range _ceagd {if _cgee {_bf .Printf ("\u0020\u0020\u0020\u007e\u007e\u007e\u0067\u0072\u006f\u0075\u0070\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064\u0020\u0063\u0065\u006cl\u0020\u0025\u0064\u0020\u006ff\u0020\u0025d\u0020\u0025\u0073\u000a",_bbabc ,len (_ebge ),_bgbcb ,len (_ceagd ),_dccd );
};if !_dccd .hasLines (_aedae ){if _cgee {_bf .Printf ("\u0020\u0020\u0020\u0021\u0021\u0021\u0067\u0072\u006f\u0075\u0070\u0020\u0025d\u0020\u006f\u0066\u0020\u0025\u0064 \u0063\u0065\u006c\u006c\u0020\u0025\u0064\u0020\u006f\u0066\u0020\u0025\u0064 \u004f\u0055\u0054\u000a",_bbabc ,len (_ebge ),_bgbcb ,len (_ceagd ));
};_cbge =false ;break ;};};if !_cbge {_gbcff =false ;break ;};};if !_gbcff {if _cgee {_dc .Log .Info ("\u0072\u006f\u0077\u0020\u0063o\u0072\u0072\u0069\u0064\u006f\u0072\u0073\u0020\u0064\u006f\u006e\u0027\u0074 \u0073\u0070\u0061\u006e\u0020\u0061\u006c\u006c\u0020\u0063\u0065\u006c\u006c\u0073\u0020\u0069\u006e\u0020\u0072\u006f\u0077\u002e\u0020\u0069\u0067\u006e\u006f\u0072\u0069\u006eg");
};_dcbd =nil ;};if _cgee &&_dcbd !=nil {_bf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u002a\u002a*\u0072\u006f\u0077\u0043\u006f\u0072\u0072i\u0064\u006f\u0072\u0073\u003d\u0025\u0036\u002e\u0032\u0066\u000a",_dcbd );};return _dcbd ;};
func _eced (_cdcf *_a .ContentStreamOperation )(float64 ,error ){if len (_cdcf .Params )!=1{_fbg :=_de .New ("\u0069n\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0070\u0061r\u0061m\u0065t\u0065\u0072\u0020\u0063\u006f\u0075\u006et");_dc .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0025\u0023\u0071\u0020\u0073\u0068\u006f\u0075\u006c\u0064\u0020h\u0061\u0076\u0065\u0020\u0025\u0064\u0020i\u006e\u0070\u0075\u0074\u0020\u0070\u0061\u0072\u0061\u006d\u0073,\u0020\u0067\u006f\u0074\u0020\u0025\u0064\u0020\u0025\u002b\u0076",_cdcf .Operand ,1,len (_cdcf .Params ),_cdcf .Params );
return 0.0,_fbg ;};return _cc .GetNumberAsFloat (_cdcf .Params [0]);};func _afefg (_cgga func (*wordBag ,*textWord ,float64 )bool ,_eabg float64 )func (*wordBag ,*textWord )bool {return func (_dead *wordBag ,_ddbe *textWord )bool {return _cgga (_dead ,_ddbe ,_eabg )};
};func (_gcg *stateStack )empty ()bool {return len (*_gcg )==0};func _ddbgg (_acae ,_aagaf float64 )string {_ebabf :=!_bffed (_acae -_aagaf );if _ebabf {return "\u000a";};return "\u0020";};func (_aabc paraList )computeEBBoxes (){if _dcfad {_dc .Log .Info ("\u0063o\u006dp\u0075\u0074\u0065\u0045\u0042\u0042\u006f\u0078\u0065\u0073\u003a");
};for _ ,_ddec :=range _aabc {_ddec ._gedc =_ddec .PdfRectangle ;};_bfbbg :=_aabc .yNeighbours (0);for _bdbeb ,_cbgc :=range _aabc {_fdee :=_cbgc ._gedc ;_efaf ,_bbffg :=-1.0e9,+1.0e9;for _ ,_bagb :=range _bfbbg [_cbgc ]{_adfc :=_aabc [_bagb ]._gedc ;if _adfc .Urx < _fdee .Llx {_efaf =_gf .Max (_efaf ,_adfc .Urx );
}else if _fdee .Urx < _adfc .Llx {_bbffg =_gf .Min (_bbffg ,_adfc .Llx );};};for _fcea ,_cfccd :=range _aabc {_fdde :=_cfccd ._gedc ;if _bdbeb ==_fcea ||_fdde .Ury > _fdee .Lly {continue ;};if _efaf <=_fdde .Llx &&_fdde .Llx < _fdee .Llx {_fdee .Llx =_fdde .Llx ;
}else if _fdde .Urx <=_bbffg &&_fdee .Urx < _fdde .Urx {_fdee .Urx =_fdde .Urx ;};};if _dcfad {_bf .Printf ("\u0025\u0034\u0064\u003a %\u0036\u002e\u0032\u0066\u2192\u0025\u0036\u002e\u0032\u0066\u0020\u0025\u0071\u000a",_bdbeb ,_cbgc ._gedc ,_fdee ,_ababa (_cbgc .text (),50));
};_cbgc ._gedc =_fdee ;};if _gfdf {for _ ,_cff :=range _aabc {_cff .PdfRectangle =_cff ._gedc ;};};};func _bdce (_fdfg ,_beff _gd .Point )bool {_afbc :=_gf .Abs (_fdfg .X -_beff .X );_bgde :=_gf .Abs (_fdfg .Y -_beff .Y );return _dadeb (_afbc ,_bgde );
};const _adbd =20;func (_afba rulingList )splitSec ()[]rulingList {_g .Slice (_afba ,func (_fcbee ,_geaf int )bool {_abff ,_gbec :=_afba [_fcbee ],_afba [_geaf ];if _abff ._cbedg !=_gbec ._cbedg {return _abff ._cbedg < _gbec ._cbedg ;};return _abff ._egcbb < _gbec ._egcbb ;
});_cbdc :=make (map[*ruling ]struct{},len (_afba ));_gafbf :=func (_fcdef *ruling )rulingList {_adfa :=rulingList {_fcdef };_cbdc [_fcdef ]=struct{}{};for _ ,_cdacc :=range _afba {if _ ,_cecd :=_cbdc [_cdacc ];_cecd {continue ;};for _ ,_ggeaa :=range _adfa {if _cdacc .alignsSec (_ggeaa ){_adfa =append (_adfa ,_cdacc );
_cbdc [_cdacc ]=struct{}{};break ;};};};return _adfa ;};_abdf :=[]rulingList {_gafbf (_afba [0])};for _ ,_cbeec :=range _afba [1:]{if _ ,_acedg :=_cbdc [_cbeec ];_acedg {continue ;};_abdf =append (_abdf ,_gafbf (_cbeec ));};return _abdf ;};func (_cfeag *ruling )intersects (_bcdda *ruling )bool {_abca :=(_cfeag ._bbac ==_bffc &&_bcdda ._bbac ==_cbaaf )||(_bcdda ._bbac ==_bffc &&_cfeag ._bbac ==_cbaaf );
_fdaf :=func (_daagg ,_aaade *ruling )bool {return _daagg ._cbedg -_degbe <=_aaade ._edga &&_aaade ._edga <=_daagg ._egcbb +_degbe ;};_ffdad :=_fdaf (_cfeag ,_bcdda );_ffaee :=_fdaf (_bcdda ,_cfeag );if _bbde {_bf .Printf ("\u0020\u0020\u0020\u0020\u0069\u006e\u0074\u0065\u0072\u0073\u0065\u0063\u0074\u0073\u003a\u0020\u0020\u006fr\u0074\u0068\u006f\u0067\u006f\u006e\u0061l\u003d\u0025\u0074\u0020\u006f\u0031\u003d\u0025\u0074\u0020\u006f2\u003d\u0025\u0074\u0020\u2192\u0020\u0025\u0074\u000a"+"\u0020\u0020\u0020 \u0020\u0020\u0020\u0076\u003d\u0025\u0073\u000a"+" \u0020\u0020\u0020\u0020\u0020\u0077\u003d\u0025\u0073\u000a",_abca ,_ffdad ,_ffaee ,_abca &&_ffdad &&_ffaee ,_cfeag ,_bcdda );
};return _abca &&_ffdad &&_ffaee ;};

// String returns a description of `tm`.
func (_aaad *textMark )String ()string {return _bf .Sprintf ("\u0025\u002e\u0032f \u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\u0022\u0025\u0073\u0022",_aaad .PdfRectangle ,_aaad ._eadc ,_aaad ._bfea );};type lineRuling struct{_cefgc rulingKind ;
_cece markKind ;_b .Color ;_defeb ,_bccgd _gd .Point ;};func (_eaag *textObject )setTextLeading (_fdea float64 ){if _eaag ==nil {return ;};_eaag ._cde ._gfb =_fdea ;};func _fbda (_gfgcef int ,_adae map[int ][]float64 )([]int ,int ){_dbada :=make ([]int ,_gfgcef );
_efcdb :=0;for _afddg :=0;_afddg < _gfgcef ;_afddg ++{_dbada [_afddg ]=_efcdb ;_efcdb +=len (_adae [_afddg ])+1;};return _dbada ,_efcdb ;};func (_dadc rulingList )augmentGrid ()(rulingList ,rulingList ){_ccab ,_fabd :=_dadc .vertsHorzs ();if len (_ccab )==0||len (_fabd )==0{return _ccab ,_fabd ;
};_bceg ,_badg :=_ccab ,_fabd ;_dbcc :=_ccab .bbox ();_eggd :=_fabd .bbox ();if _bbde {_dc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0056\u003d\u0025\u0036\u002e\u0032\u0066",_dbcc );_dc .Log .Info ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0047\u0072\u0069\u0064\u003a\u0020b\u0062\u006f\u0078\u0048\u003d\u0025\u0036\u002e\u0032\u0066",_eggd );
};var _eccb ,_fbec ,_dcff ,_dfdd *ruling ;if _eggd .Llx < _dbcc .Llx -_degbe {_eccb =&ruling {_dfbg :_gfda ,_bbac :_bffc ,_edga :_eggd .Llx ,_cbedg :_dbcc .Lly ,_egcbb :_dbcc .Ury };_ccab =append (rulingList {_eccb },_ccab ...);};if _eggd .Urx > _dbcc .Urx +_degbe {_fbec =&ruling {_dfbg :_gfda ,_bbac :_bffc ,_edga :_eggd .Urx ,_cbedg :_dbcc .Lly ,_egcbb :_dbcc .Ury };
_ccab =append (_ccab ,_fbec );};if _dbcc .Lly < _eggd .Lly -_degbe {_dcff =&ruling {_dfbg :_gfda ,_bbac :_cbaaf ,_edga :_dbcc .Lly ,_cbedg :_eggd .Llx ,_egcbb :_eggd .Urx };_fabd =append (rulingList {_dcff },_fabd ...);};if _dbcc .Ury > _eggd .Ury +_degbe {_dfdd =&ruling {_dfbg :_gfda ,_bbac :_cbaaf ,_edga :_dbcc .Ury ,_cbedg :_eggd .Llx ,_egcbb :_eggd .Urx };
_fabd =append (_fabd ,_dfdd );};if len (_ccab )+len (_fabd )==len (_dadc ){return _bceg ,_badg ;};_aabcb :=append (_ccab ,_fabd ...);_dadc .log ("u\u006e\u0061\u0075\u0067\u006d\u0065\u006e\u0074\u0065\u0064");_aabcb .log ("\u0061u\u0067\u006d\u0065\u006e\u0074\u0065d");
return _ccab ,_fabd ;};type cachedImage struct{_ab *_fa .Image ;_adb _fa .PdfColorspace ;};

// PageImages represents extracted images on a PDF page with spatial information:
// display position and size.
type PageImages struct{Images []ImageMark ;};func (_bgae paraList )toTextMarks ()[]TextMark {_fdg :=0;var _ebad []TextMark ;for _aeda ,_dcfe :=range _bgae {if _dcfe ._cedecf {continue ;};_aedgg :=_dcfe .toTextMarks (&_fdg );_ebad =append (_ebad ,_aedgg ...);
if _aeda !=len (_bgae )-1{if _afgg (_dcfe ,_bgae [_aeda +1]){_ebad =_gbg (_ebad ,&_fdg ,"\u0020");}else {_ebad =_gbg (_ebad ,&_fdg ,"\u000a");_ebad =_gbg (_ebad ,&_fdg ,"\u000a");};};};_ebad =_gbg (_ebad ,&_fdg ,"\u000a");_ebad =_gbg (_ebad ,&_fdg ,"\u000a");
return _ebad ;};func (_bfda *textPara )toCellTextMarks (_eagcf *int )[]TextMark {var _fgfaf []TextMark ;for _egge ,_fbdg :=range _bfda ._dcdd {_afad :=_fbdg .toTextMarks (_eagcf );_ccbfc :=_age &&_fbdg .endsInHyphen ()&&_egge !=len (_bfda ._dcdd )-1;if _ccbfc {_afad =_cfbg (_afad ,_eagcf );
};_fgfaf =append (_fgfaf ,_afad ...);if !(_ccbfc ||_egge ==len (_bfda ._dcdd )-1){_fgfaf =_gbg (_fgfaf ,_eagcf ,_ddbgg (_fbdg ._bgac ,_bfda ._dcdd [_egge +1]._bgac ));};};return _fgfaf ;};const (_fbea =1.0e-6;_beggf =1.0e-4;_ecef =10;_gff =6;_eefac =0.5;
_aggd =0.12;_ddgc =0.19;_acaa =0.04;_gggb =0.04;_bccf =1.0;_gcab =0.04;_eagc =0.4;_feg =0.7;_feea =1.0;_gcbf =0.1;_ceda =1.4;_ada =0.46;_bggf =0.02;_egac =0.2;_egfd =0.5;_fagf =4;_bgeg =4.0;_aggf =6;_dfgdd =0.3;_bccag =0.01;_affd =0.02;_ggfd =2;_bgef =2;
_ebdd =500;_bbfg =4.0;_dgeg =4.0;_gdddd =0.05;_cggf =0.1;_degbe =2.0;_eaab =2.0;_abgbg =1.5;_gddbg =3.0;_face =0.25;);func _gfbg (_fccb ,_ffec _gd .Point ,_ffbd _b .Color )(*ruling ,bool ){_eabc :=lineRuling {_defeb :_fccb ,_bccgd :_ffec ,_cefgc :_fdbd (_fccb ,_ffec ),Color :_ffbd };
if _eabc ._cefgc ==_fdgf {return nil ,false ;};return _eabc .asRuling ();};func _fcce (_dfeg _gd .Matrix )_gd .Point {_eba ,_ecac :=_dfeg .Translation ();return _gd .Point {X :_eba ,Y :_ecac };};func (_adf *imageExtractContext )processOperand (_ddbb *_a .ContentStreamOperation ,_df _a .GraphicsState ,_gec *_fa .PdfPageResources )error {if _ddbb .Operand =="\u0042\u0049"&&len (_ddbb .Params )==1{_feb ,_db :=_ddbb .Params [0].(*_a .ContentStreamInlineImage );
if !_db {return nil ;};if _cfd ,_be :=_cc .GetBoolVal (_feb .ImageMask );_be {if _cfd &&!_adf ._fgc .IncludeInlineStencilMasks {return nil ;};};return _adf .extractInlineImage (_feb ,_df ,_gec );}else if _ddbb .Operand =="\u0044\u006f"&&len (_ddbb .Params )==1{_cb ,_bac :=_cc .GetName (_ddbb .Params [0]);
if !_bac {_dc .Log .Debug ("E\u0052\u0052\u004f\u0052\u003a\u0020\u0054\u0079\u0070\u0065");return _dee ;};_ ,_dfe :=_gec .GetXObjectByName (*_cb );switch _dfe {case _fa .XObjectTypeImage :return _adf .extractXObjectImage (_cb ,_df ,_gec );case _fa .XObjectTypeForm :return _adf .extractFormImages (_cb ,_df ,_gec );
};};return nil ;};const _fab =10;

// String returns a description of `p`.
func (_fcec *textPara )String ()string {if _fcec ._cedecf {return _bf .Sprintf ("\u0025\u0036\u002e\u0032\u0066\u0020\u005b\u0045\u004d\u0050\u0054\u0059\u005d",_fcec .PdfRectangle );};_fgeb :="";if _fcec ._afcc !=nil {_fgeb =_bf .Sprintf ("\u005b\u0025\u0064\u0078\u0025\u0064\u005d\u0020",_fcec ._afcc ._dffbb ,_fcec ._afcc ._fcga );
};return _bf .Sprintf ("\u0025\u0036\u002e\u0032f \u0025\u0073\u0025\u0064\u0020\u006c\u0069\u006e\u0065\u0073\u0020\u0025\u0071",_fcec .PdfRectangle ,_fgeb ,len (_fcec ._dcdd ),_ababa (_fcec .text (),50));};func _bcaa (_bdcbef ,_eggb _gd .Point )bool {return _bdcbef .X ==_eggb .X &&_bdcbef .Y ==_eggb .Y };


// String returns a description of `l`.
func (_bbcg *textLine )String ()string {return _bf .Sprintf ("\u0025\u002e2\u0066\u0020\u0025\u0036\u002e\u0032\u0066\u0020\u0066\u006f\u006e\u0074\u0073\u0069\u007a\u0065\u003d\u0025\u002e\u0032\u0066\u0020\"%\u0073\u0022",_bbcg ._bgac ,_bbcg .PdfRectangle ,_bbcg ._adad ,_bbcg .text ());
};

// TextMark represents extracted text on a page with information regarding both textual content,
// formatting (font and size) and positioning.
// It is the smallest unit of text on a PDF page, typically a single character.
//
// getBBox() in test_text.go shows how to compute bounding boxes of substrings of extracted text.
// The following code extracts the text on PDF page `page` into `text` then finds the bounding box
// `bbox` of substring `term` in `text`.
//
//     ex, _ := New(page)
//     // handle errors
//     pageText, _, _, err := ex.ExtractPageText()
//     // handle errors
//     text := pageText.Text()
//     textMarks := pageText.Marks()
//
//     	start := strings.Index(text, term)
//      end := start + len(term)
//      spanMarks, err := textMarks.RangeOffset(start, end)
//      // handle errors
//      bbox, ok := spanMarks.BBox()
//      // handle errors
type TextMark struct{

// Text is the extracted text.
Text string ;

// Original is the text in the PDF. It has not been decoded like `Text`.
Original string ;

// BBox is the bounding box of the text.
BBox _fa .PdfRectangle ;

// Font is the font the text was drawn with.
Font *_fa .PdfFont ;

// FontSize is the font size the text was drawn with.
FontSize float64 ;

// Offset is the offset of the start of TextMark.Text in the extracted text. If you do this
//   text, textMarks := pageText.Text(), pageText.Marks()
//   marks := textMarks.Elements()
// then marks[i].Offset is the offset of marks[i].Text in text.
Offset int ;

// Meta is set true for spaces and line breaks that we insert in the extracted text. We insert
// spaces (line breaks) when we see characters that are over a threshold horizontal (vertical)
//  distance  apart. See wordJoiner (lineJoiner) in PageText.computeViews().
Meta bool ;

// FillColor is the fill color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
FillColor _b .Color ;

// StrokeColor is the stroke color of the text.
// The color is nil for spaces and line breaks (i.e. the Meta field is true).
StrokeColor _b .Color ;

// Orientation is the text orientation
Orientation int ;};func (_abde rulingList )intersections ()map[int ]intSet {var _feec ,_bdgf []int ;for _gded ,_daed :=range _abde {switch _daed ._bbac {case _bffc :_feec =append (_feec ,_gded );case _cbaaf :_bdgf =append (_bdgf ,_gded );};};if len (_feec )< _ggfd +1||len (_bdgf )< _bgef +1{return nil ;
};if len (_feec )+len (_bdgf )> _ebdd {_dc .Log .Debug ("\u0069\u006e\u0074\u0065\u0072\u0073e\u0063\u0074\u0069\u006f\u006e\u0073\u003a\u0020\u0054\u004f\u004f\u0020\u004d\u0041\u004e\u0059\u0020\u0072\u0075\u006ci\u006e\u0067\u0073\u0020\u0076\u0065\u0063\u0073\u003d\u0025\u0064\u0020\u003d\u0020%\u0064 \u0078\u0020\u0025\u0064",len (_abde ),len (_feec ),len (_bdgf ));
return nil ;};_bcfd :=make (map[int ]intSet ,len (_feec )+len (_bdgf ));for _ ,_cedd :=range _feec {for _ ,_gbcc :=range _bdgf {if _abde [_cedd ].intersects (_abde [_gbcc ]){if _ ,_aggc :=_bcfd [_cedd ];!_aggc {_bcfd [_cedd ]=make (intSet );};if _ ,_gbb :=_bcfd [_gbcc ];
!_gbb {_bcfd [_gbcc ]=make (intSet );};_bcfd [_cedd ].add (_gbcc );_bcfd [_gbcc ].add (_cedd );};};};return _bcfd ;};func (_fadad rulingList )secMinMax ()(float64 ,float64 ){_afff ,_ddgd :=_fadad [0]._cbedg ,_fadad [0]._egcbb ;for _ ,_gegc :=range _fadad [1:]{if _gegc ._cbedg < _afff {_afff =_gegc ._cbedg ;
};if _gegc ._egcbb > _ddgd {_ddgd =_gegc ._egcbb ;};};return _afff ,_ddgd ;};func _cffe (_afafc string )(string ,bool ){_fdfaf :=[]rune (_afafc );if len (_fdfaf )!=1{return "",false ;};_gfaf ,_eade :=_geedc [_fdfaf [0]];return _gfaf ,_eade ;};func _cgcb (_ebcg *wordBag ,_bfbb *textWord ,_dcbb float64 )bool {return _ebcg .Urx <=_bfbb .Llx &&_bfbb .Llx < _ebcg .Urx +_dcbb ;
};func (_ffdde *textWord )bbox ()_fa .PdfRectangle {return _ffdde .PdfRectangle };func (_gcb *shapesState )cubicTo (_eegb ,_ggca ,_ggbg ,_cebc ,_cadf ,_bbdd float64 ){if _ffde {_dc .Log .Info ("\u0063\u0075\u0062\u0069\u0063\u0054\u006f\u003a");};_gcb .addPoint (_cadf ,_bbdd );
};func _bfcd (_eeaa ,_aacbb ,_abdc float64 )rulingKind {if _eeaa >=_abdc &&_dadeb (_aacbb ,_eeaa ){return _cbaaf ;};if _aacbb >=_abdc &&_dadeb (_eeaa ,_aacbb ){return _bffc ;};return _fdgf ;};func (_gddfa paraList )llyRange (_afefe []int ,_dga ,_dbfe float64 )[]int {_abae :=len (_gddfa );
if _dbfe < _gddfa [_afefe [0]].Lly ||_dga > _gddfa [_afefe [_abae -1]].Lly {return nil ;};_ddcg :=_g .Search (_abae ,func (_gdfd int )bool {return _gddfa [_afefe [_gdfd ]].Lly >=_dga });_dbefa :=_g .Search (_abae ,func (_ffcc int )bool {return _gddfa [_afefe [_ffcc ]].Lly > _dbfe });
return _afefe [_ddcg :_dbefa ];};const (_age =true ;_ecbd =true ;_ccegf =true ;_gfdf =false ;_gaec =false ;_bdddd =6;_baceg =3.0;_ffcf =200;_eeee =true ;_ggf =true ;_bacb =true ;_eeeb =true ;_fcgec =false ;);func _afccc (_gbcg _fa .PdfColorspace ,_geba _fa .PdfColor )_b .Color {if _gbcg ==nil ||_geba ==nil {return _b .Black ;
};_adefd ,_egdb :=_gbcg .ColorToRGB (_geba );if _egdb !=nil {_dc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006fu\u006c\u0064\u0020no\u0074\u0020\u0063\u006f\u006e\u0076e\u0072\u0074\u0020\u0063\u006f\u006c\u006f\u0072\u0020\u0025\u0076\u0020\u0028\u0025\u0076)\u0020\u0074\u006f\u0020\u0052\u0047\u0042\u003a \u0025\u0073",_geba ,_gbcg ,_egdb );
return _b .Black ;};_bgfd ,_acgc :=_adefd .(*_fa .PdfColorDeviceRGB );if !_acgc {_dc .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0065\u0064 \u0063\u006f\u006c\u006f\u0072\u0020\u0069\u0073\u0020\u006e\u006f\u0074\u0020i\u006e\u0020\u0074\u0068\u0065\u0020\u0052\u0047\u0042\u0020\u0063\u006flo\u0072\u0073\u0070\u0061\u0063\u0065\u003a\u0020\u0025\u0076",_adefd );
return _b .Black ;};return _b .NRGBA {R :uint8 (_bgfd .R ()*255),G :uint8 (_bgfd .G ()*255),B :uint8 (_bgfd .B ()*255),A :uint8 (255)};};func (_fabdd *textWord )appendMark (_cagda *textMark ,_efega _fa .PdfRectangle ){_fabdd ._bffcd =append (_fabdd ._bffcd ,_cagda );
_fabdd .PdfRectangle =_bfbbb (_fabdd .PdfRectangle ,_cagda .PdfRectangle );if _cagda ._eadc > _fabdd ._fggb {_fabdd ._fggb =_cagda ._eadc ;};_fabdd ._aabad =_efega .Ury -_fabdd .PdfRectangle .Lly ;};func (_eeaec *subpath )isQuadrilateral ()bool {if len (_eeaec ._bdea )< 4||len (_eeaec ._bdea )> 5{return false ;
};if len (_eeaec ._bdea )==5{_feeag :=_eeaec ._bdea [0];_eagaa :=_eeaec ._bdea [4];if _feeag .X !=_eagaa .X ||_feeag .Y !=_eagaa .Y {return false ;};};return true ;};func (_bbdf *wordBag )minDepth ()float64 {return _bbdf ._defe -(_bbdf .Ury -_bbdf ._cabe )};
func _aagded (_dggf *PageText )error {_dfcc :=_ec .GetLicenseKey ();if _dfcc !=nil &&_dfcc .IsLicensed ()||_eb {return nil ;};_bf .Printf ("\u0055\u006e\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0064\u0020c\u006f\u0070\u0079\u0020\u006f\u0066\u0020\u0055\u006e\u0069P\u0044\u0046\u000a");
_bf .Println ("-\u0020\u0047\u0065\u0074\u0020\u0061\u0020\u0066\u0072e\u0065\u0020\u0074\u0072\u0069\u0061\u006c l\u0069\u0063\u0065\u006es\u0065\u0020\u006f\u006e\u0020\u0068\u0074\u0074\u0070s:\u002f\u002fu\u006e\u0069\u0064\u006f\u0063\u002e\u0069\u006f");
return _de .New ("\u0075\u006e\u0069\u0070d\u0066\u0020\u006c\u0069\u0063\u0065\u006e\u0073\u0065\u0020c\u006fd\u0065\u0020\u0072\u0065\u0071\u0075\u0069r\u0065\u0064");};func (_eff *textLine )bbox ()_fa .PdfRectangle {return _eff .PdfRectangle };type subpath struct{_bdea []_gd .Point ;
_efd bool ;};func _fafcc (_fefd ,_ecbe _gd .Point )bool {_bcba :=_gf .Abs (_fefd .X -_ecbe .X );_ffdae :=_gf .Abs (_fefd .Y -_ecbe .Y );return _dadeb (_ffdae ,_bcba );};func (_bbgb *textPara )bbox ()_fa .PdfRectangle {return _bbgb .PdfRectangle };func (_gabc rulingList )connections (_dcbf map[int ]intSet ,_cbea int )intSet {_dac :=make (intSet );
_gaabf :=make (intSet );var _caee func (int );_caee =func (_fcfc int ){if !_gaabf .has (_fcfc ){_gaabf .add (_fcfc );for _eaagd :=range _gabc {if _dcbf [_eaagd ].has (_fcfc ){_dac .add (_eaagd );};};for _adbdd :=range _gabc {if _dac .has (_adbdd ){_caee (_adbdd );
};};};};_caee (_cbea );return _dac ;};func (_fgfdf lineRuling )xMean ()float64 {return 0.5*(_fgfdf ._defeb .X +_fgfdf ._bccgd .X )};func (_cbfg *textMark )bbox ()_fa .PdfRectangle {return _cbfg .PdfRectangle };func (_cdecg *textTable )putComposite (_ffaa ,_cggb int ,_beab paraList ,_cgcde _fa .PdfRectangle ){if len (_beab )==0{_dc .Log .Error ("\u0074\u0065xt\u0054\u0061\u0062l\u0065\u0029\u0020\u0070utC\u006fmp\u006f\u0073\u0069\u0074\u0065\u003a\u0020em\u0070\u0074\u0079\u0020\u0070\u0061\u0072a\u0073");
return ;};_dgad :=compositeCell {_cgcde ,_beab };if _cgee {_bf .Printf ("\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0020\u0070\u0075\u0074\u0043\u006f\u006d\u0070o\u0073i\u0074\u0065\u0028\u0025\u0064\u002c\u0025\u0064\u0029\u003c\u002d\u0025\u0073\u000a",_ffaa ,_cggb ,_dgad .String ());
};_dgad .updateBBox ();_cdecg ._eagcd [_bfbbab (_ffaa ,_cggb )]=_dgad ;};func (_dbde *ruling )alignsPrimary (_bbfea *ruling )bool {return _dbde ._bbac ==_bbfea ._bbac &&_gf .Abs (_dbde ._edga -_bbfea ._edga )< _eaab *0.5;};func (_ecc *wordBag )allWords ()[]*textWord {var _fgaa []*textWord ;
for _ ,_afd :=range _ecc ._cfcc {_fgaa =append (_fgaa ,_afd ...);};return _fgaa ;};func (_fcdb *subpath )last ()_gd .Point {return _fcdb ._bdea [len (_fcdb ._bdea )-1]};func (_fcab *textLine )pullWord (_eacd *wordBag ,_fceg *textWord ,_fffd int ){_fcab .appendWord (_fceg );
_eacd .removeWord (_fceg ,_fffd );};func (_aeaab *textTable )getRight ()paraList {_eaegg :=make (paraList ,_aeaab ._fcga );for _cgeadg :=0;_cgeadg < _aeaab ._fcga ;_cgeadg ++{_edcbg :=_aeaab .get (_aeaab ._dffbb -1,_cgeadg )._fagc ;if _edcbg ==nil ||_edcbg ._ebgdf {return nil ;
};_eaegg [_cgeadg ]=_edcbg ;};for _aagc :=0;_aagc < _aeaab ._fcga -1;_aagc ++{if _eaegg [_aagc ]._cdedb !=_eaegg [_aagc +1]{return nil ;};};return _eaegg ;};func _fgdg (_bdab []float64 ,_ggag ,_ccaac float64 )[]float64 {_fdbe ,_eaecb :=_ggag ,_ccaac ;if _eaecb < _fdbe {_fdbe ,_eaecb =_eaecb ,_fdbe ;
};_cccc :=make ([]float64 ,0,len (_bdab )+2);_cccc =append (_cccc ,_ggag );for _ ,_gbca :=range _bdab {if _gbca <=_fdbe {continue ;}else if _gbca >=_eaecb {break ;};_cccc =append (_cccc ,_gbca );};_cccc =append (_cccc ,_ccaac );return _cccc ;};func (_febae *textPara )isAtom ()*textTable {_efdfa :=_febae ;
_cefgcg :=_febae ._fagc ;_gabed :=_febae ._cdedb ;if !(_cefgcg !=nil &&!_cefgcg ._ebgdf &&_gabed !=nil &&!_gabed ._ebgdf ){return nil ;};_befbc :=_cefgcg ._cdedb ;if !(_befbc !=nil &&!_befbc ._ebgdf &&_befbc ==_gabed ._fagc ){return nil ;};return _dfcg (_efdfa ,_cefgcg ,_gabed ,_befbc );
};func (_fddc *shapesState )establishSubpath ()*subpath {_ebce ,_dbbg :=_fddc .lastpointEstablished ();if !_dbbg {_fddc ._cafd =append (_fddc ._cafd ,_agbb (_ebce ));};if len (_fddc ._cafd )==0{return nil ;};_fddc ._ebeg =false ;return _fddc ._cafd [len (_fddc ._cafd )-1];
};var _eb =false ;

// RenderMode specifies the text rendering mode (Tmode), which determines whether showing text shall cause
// glyph outlines to be  stroked, filled, used as a clipping boundary, or some combination of the three.
// Stroking, filling, and clipping shall have the same effects for a text object as they do for a path object
// (see 8.5.3, "Path-Painting Operators" and 8.5.4, "Clipping Path Operators").
type RenderMode int ;func (_fbcbb *compositeCell )updateBBox (){for _ ,_cfca :=range _fbcbb .paraList {_fbcbb .PdfRectangle =_bfbbb (_fbcbb .PdfRectangle ,_cfca .PdfRectangle );};};const (_aeaeg markKind =iota ;_dbcee ;_eafg ;_gfda ;);type paraList []*textPara ;
func (_feaad *textTable )put (_gdee ,_bdcbe int ,_ebddf *textPara ){_feaad ._bfab [_bfbbab (_gdee ,_bdcbe )]=_ebddf ;};func (_ggda rulingList )vertsHorzs ()(rulingList ,rulingList ){var _cfbca ,_bea rulingList ;for _ ,_ddbed :=range _ggda {switch _ddbed ._bbac {case _bffc :_cfbca =append (_cfbca ,_ddbed );
case _cbaaf :_bea =append (_bea ,_ddbed );};};return _cfbca ,_bea ;};func _cdgd (_gdddg *Extractor ,_gce *_fa .PdfPageResources ,_cfda _a .GraphicsState ,_fcd *textState ,_dadb *stateStack )*textObject {return &textObject {_bccg :_gdddg ,_cbdg :_gce ,_cdd :_cfda ,_becd :_dadb ,_cde :_fcd ,_gfgc :_gd .IdentityMatrix (),_gcd :_gd .IdentityMatrix ()};
};

// Tables returns the tables extracted from the page.
func (_ebf PageText )Tables ()[]TextTable {if _cgee {_dc .Log .Info ("\u0054\u0061\u0062\u006c\u0065\u0073\u003a\u0020\u0025\u0064",len (_ebf ._gcdc ));};return _ebf ._gcdc ;};func _eefff (_bccae []*textMark ,_gggbbc _fa .PdfRectangle )*textWord {_gcabg :=_bccae [0].PdfRectangle ;
_deda :=_bccae [0]._eadc ;for _ ,_cccea :=range _bccae [1:]{_gcabg =_bfbbb (_gcabg ,_cccea .PdfRectangle );if _cccea ._eadc > _deda {_deda =_cccea ._eadc ;};};return &textWord {PdfRectangle :_gcabg ,_bffcd :_bccae ,_aabad :_gggbbc .Ury -_gcabg .Lly ,_fggb :_deda };
};func (_dgbe rulingList )blocks (_ddfc ,_egfa *ruling )bool {if _ddfc ._cbedg > _egfa ._egcbb ||_egfa ._cbedg > _ddfc ._egcbb {return false ;};_caabc :=_gf .Max (_ddfc ._cbedg ,_egfa ._cbedg );_feag :=_gf .Min (_ddfc ._egcbb ,_egfa ._egcbb );if _ddfc ._edga > _egfa ._edga {_ddfc ,_egfa =_egfa ,_ddfc ;
};for _ ,_abcg :=range _dgbe {if _ddfc ._edga <=_abcg ._edga +_eaab &&_abcg ._edga <=_egfa ._edga +_eaab &&_abcg ._cbedg <=_feag &&_caabc <=_abcg ._egcbb {return true ;};};return false ;};func _efdfg (_fege []pathSection )rulingList {_gfbaf (_fege );if _bbde {_dc .Log .Info ("\u006d\u0061k\u0065\u0053\u0074\u0072\u006f\u006b\u0065\u0052\u0075\u006c\u0069\u006e\u0067\u0073\u003a\u0020\u0025\u0064\u0020\u0073\u0074\u0072ok\u0065\u0073",len (_fege ));
};var _abfc rulingList ;for _ ,_gffc :=range _fege {for _ ,_cdcgd :=range _gffc ._ffda {if len (_cdcgd ._bdea )< 2{continue ;};_cagf :=_cdcgd ._bdea [0];for _ ,_agde :=range _cdcgd ._bdea [1:]{if _baca ,_gcda :=_gfbg (_cagf ,_agde ,_gffc .Color );_gcda {_abfc =append (_abfc ,_baca );
};_cagf =_agde ;};};};if _bbde {_dc .Log .Info ("m\u0061\u006b\u0065\u0053tr\u006fk\u0065\u0052\u0075\u006c\u0069n\u0067\u0073\u003a\u0020\u0025\u0073",_abfc );};return _abfc ;};func _edfc (_dbaca []*textWord ,_ccgc *textWord )[]*textWord {for _gaceg ,_faabe :=range _dbaca {if _faabe ==_ccgc {return _cedaa (_dbaca ,_gaceg );
};};_dc .Log .Error ("\u0072\u0065\u006d\u006f\u0076e\u0057\u006f\u0072\u0064\u003a\u0020\u0077\u006f\u0072\u0064\u0073\u0020\u0064o\u0065\u0073\u006e\u0027\u0074\u0020\u0063\u006f\u006e\u0074\u0061\u0069\u006e\u0020\u0077\u006f\u0072\u0064\u003d\u0025\u0073",_ccgc );
return nil ;};func _caba (_cgae ,_efcd _fa .PdfRectangle )(_fa .PdfRectangle ,bool ){if !_cebbc (_cgae ,_efcd ){return _fa .PdfRectangle {},false ;};return _fa .PdfRectangle {Llx :_gf .Max (_cgae .Llx ,_efcd .Llx ),Urx :_gf .Min (_cgae .Urx ,_efcd .Urx ),Lly :_gf .Max (_cgae .Lly ,_efcd .Lly ),Ury :_gf .Min (_cgae .Ury ,_efcd .Ury )},true ;
};func (_bbfd gridTile )numBorders ()int {_dbca :=0;if _bbfd ._bbddf {_dbca ++;};if _bbfd ._egdd {_dbca ++;};if _bbfd ._egad {_dbca ++;};if _bbfd ._gcde {_dbca ++;};return _dbca ;};var _bfac =map[markKind ]string {_dbcee :"\u0073\u0074\u0072\u006f\u006b\u0065",_eafg :"\u0066\u0069\u006c\u006c",_gfda :"\u0061u\u0067\u006d\u0065\u006e\u0074"};
func (_aegg *textWord )toTextMarks (_eece *int )[]TextMark {var _abaeg []TextMark ;for _ ,_egff :=range _aegg ._bffcd {_abaeg =_gfff (_abaeg ,_eece ,_egff .ToTextMark ());};return _abaeg ;};func (_eadd *subpath )add (_fda ..._gd .Point ){_eadd ._bdea =append (_eadd ._bdea ,_fda ...)};
func (_ggea *shapesState )moveTo (_edd ,_fgab float64 ){_ggea ._ebeg =true ;_ggea ._aeca =_ggea .devicePoint (_edd ,_fgab );if _ffde {_dc .Log .Info ("\u006d\u006fv\u0065\u0054\u006f\u003a\u0020\u0025\u002e\u0032\u0066\u002c\u0025\u002e\u0032\u0066\u0020\u0064\u0065\u0076\u0069\u0063\u0065\u003d%.\u0032\u0066",_edd ,_fgab ,_ggea ._aeca );
};};func (_affb *textTable )getDown ()paraList {_dcaec :=make (paraList ,_affb ._dffbb );for _gbef :=0;_gbef < _affb ._dffbb ;_gbef ++{_acebg :=_affb .get (_gbef ,_affb ._fcga -1)._cdedb ;if _acebg ==nil ||_acebg ._ebgdf {return nil ;};_dcaec [_gbef ]=_acebg ;
};for _aeafe :=0;_aeafe < _affb ._dffbb -1;_aeafe ++{if _dcaec [_aeafe ]._fagc !=_dcaec [_aeafe +1]{return nil ;};};return _dcaec ;};func (_afcf paraList )tables ()[]TextTable {var _afcg []TextTable ;if _cgee {_dc .Log .Info ("\u0070\u0061\u0072\u0061\u0073\u002e\u0074\u0061\u0062\u006c\u0065\u0073\u003a");
};for _ ,_ebaa :=range _afcf {_cdda :=_ebaa ._afcc ;if _cdda !=nil &&_cdda .isExportable (){_afcg =append (_afcg ,_cdda .toTextTable ());};};return _afcg ;};func (_abebf *textTable )emptyColumn (_abggc int )bool {for _aggfd :=0;_aggfd < _abebf ._fcga ;
_aggfd ++{_faced :=_abebf .get (_abggc ,_aggfd );if _faced !=nil &&_faced .text ()!=""{return false ;};};return true ;};func _ggee (_bfgb ,_gbeec float64 )bool {return _gf .Abs (_bfgb -_gbeec )<=_degbe };func (_fgea *textObject )moveText (_cefg ,_ffbb float64 ){_fgea .moveLP (_cefg ,_ffbb )};
var _bace =TextMark {Text :"\u005b\u0058\u005d",Original :"\u0020",Meta :true ,FillColor :_b .White ,StrokeColor :_b .White };func _gfff (_deea []TextMark ,_eecc *int ,_bcbg TextMark )[]TextMark {_bcbg .Offset =*_eecc ;_deea =append (_deea ,_bcbg );*_eecc +=len (_bcbg .Text );
return _deea ;};func (_bfb *wordBag )getDepthIdx (_gfa float64 )int {_dffa :=_bfb .depthIndexes ();_ffea :=_ddda (_gfa );if _ffea < _dffa [0]{return _dffa [0];};if _ffea > _dffa [len (_dffa )-1]{return _dffa [len (_dffa )-1];};return _ffea ;};