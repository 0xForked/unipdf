//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_fa "errors";_d "fmt";_a "github.com/unidoc/unipdf/v3/common";_e "github.com/unidoc/unipdf/v3/core";);func (_be *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_gg :_be ._da }};func (_aef Page )FindXObjectForms ()[]*_e .PdfObjectStream {_cgdb ,_dbc :=_aef .GetResourcesXObject ();
if !_dbc {return nil ;};_ceb :=map[*_e .PdfObjectStream ]struct{}{};var _dbb func (_gbd *_e .PdfObjectDictionary ,_bgb map[*_e .PdfObjectStream ]struct{});_dbb =func (_ee *_e .PdfObjectDictionary ,_fca map[*_e .PdfObjectStream ]struct{}){for _ ,_fga :=range _ee .Keys (){_cea ,_agcd :=_e .GetStream (_ee .Get (_fga ));
if !_agcd {continue ;};if _ ,_ddf :=_fca [_cea ];_ddf {continue ;};_cfc ,_gbb :=_e .GetName (_cea .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_gbb ||_cfc .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_fca [_cea ]=struct{}{};_bgg ,_gbb :=_e .GetDict (_cea .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_gbb {continue ;};_aca ,_gbc :=_e .GetDict (_bgg .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _gbc {_dbb (_aca ,_fca );};};};_dbb (_cgdb ,_ceb );var _fdac []*_e .PdfObjectStream ;for _fbfd :=range _ceb {_fdac =append (_fdac ,_fbfd );};return _fdac ;
};func (_fff *Catalog )SetMetadata (data []byte )error {_ddc ,_cg :=_e .MakeStream (data ,nil );if _cg !=nil {return _cg ;};_ddc .Set ("\u0054\u0079\u0070\u0065",_e .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_ddc .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_e .MakeName ("\u0058\u004d\u004c"));
_fff .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_ddc );_fff ._da .Objects =append (_fff ._da .Objects ,_ddc );return nil ;};func (_ad *Catalog )GetPages ()([]Page ,bool ){_dd ,_fe :=_e .GetDict (_ad .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_fe {return nil ,false ;};_b ,_ea :=_e .GetArray (_dd .Get ("\u004b\u0069\u0064\u0073"));if !_ea {return nil ,false ;};_fb :=make ([]Page ,_b .Len ());for _ag ,_g :=range _b .Elements (){_c ,_ff :=_e .GetDict (_g );if !_ff {continue ;};_fb [_ag ]=Page {Object :_c ,_ebe :_ag +1,_cgg :_ad ._da };
};return _fb ,true ;};func (_cec *Page )Number ()int {return _cec ._ebe };func (_efa *OutputIntents )Get (i int )(OutputIntent ,bool ){if _efa ._bb ==nil {return OutputIntent {},false ;};if i >=_efa ._bb .Len (){return OutputIntent {},false ;};_agb :=_efa ._bb .Get (i );
_abc ,_bfd :=_e .GetIndirect (_agb );if !_bfd {_bg ,_eab :=_e .GetDict (_agb );return OutputIntent {Object :_bg },_eab ;};_ffg ,_fbf :=_e .GetDict (_abc .PdfObject );return OutputIntent {Object :_ffg },_fbf ;};func (_cc *Catalog )HasMetadata ()bool {_fd :=_cc .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _fd !=nil ;};func (_ead *OutputIntents )Len ()int {return _ead ._bb .Len ()};type Image struct{Name string ;Width int ;Height int ;Colorspace _e .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_e .PdfObjectStream ;
};func (_daf *Document )AddStream (stream *_e .PdfObjectStream ){for _ ,_db :=range _daf .Objects {if _db ==stream {return ;};};_daf .Objects =append (_daf .Objects ,stream );};type Catalog struct{Object *_e .PdfObjectDictionary ;_da *Document ;};func (_ac Page )FindXObjectImages ()([]*Image ,error ){_ade ,_ccg :=_ac .GetResourcesXObject ();
if !_ccg {return nil ,nil ;};var _fgcg []*Image ;var _dcd error ;_acf :=map[*_e .PdfObjectStream ]int {};_gge :=map[*_e .PdfObjectStream ]struct{}{};var _fdb int ;for _ ,_fef :=range _ade .Keys (){_cf ,_dgf :=_e .GetStream (_ade .Get (_fef ));if !_dgf {continue ;
};if _ ,_fgea :=_acf [_cf ];_fgea {continue ;};_dec ,_ec :=_e .GetName (_cf .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_ec ||_dec .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_gd :=Image {BitsPerComponent :8,Stream :_cf ,Name :string (_fef )};
if _gd .Colorspace ,_dcd =_dga (_cf .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_dcd !=nil {_a .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_dcd );
continue ;};if _adc ,_ada :=_e .GetIntVal (_cf .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_ada {_gd .BitsPerComponent =_adc ;};if _fdfc ,_ggb :=_e .GetIntVal (_cf .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_ggb {_gd .Width =_fdfc ;};if _abf ,_egd :=_e .GetIntVal (_cf .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_egd {_gd .Height =_abf ;};if _gac ,_caa :=_e .GetStream (_cf .Get ("\u0053\u004d\u0061s\u006b"));_caa {_gd .SMask =&ImageSMask {Image :&_gd ,Stream :_gac };
_gge [_gac ]=struct{}{};};switch _gd .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_gd .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_gd .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_gd .ColorComponents =4;
default:_gd .ColorComponents =-1;};_acf [_cf ]=_fdb ;_fgcg =append (_fgcg ,&_gd );_fdb ++;};var _beg []int ;for _ ,_dcc :=range _fgcg {if _dcc .SMask !=nil {_ced ,_fea :=_acf [_dcc .SMask .Stream ];if _fea {_beg =append (_beg ,_ced );};};};_feeg :=make ([]*Image ,len (_fgcg )-len (_beg ));
_fdb =0;_abg :for _decf ,_ba :=range _fgcg {for _ ,_adgc :=range _beg {if _decf ==_adgc {continue _abg ;};};_feeg [_fdb ]=_ba ;_fdb ++;};return _fgcg ,nil ;};func (_ccac *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _dfa :=_ccac .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_dfa !=nil {for _eb ,_bf :=range _ccac ._da .Objects {if _bf ==_dfa {if outputIntents ._ffe ==_dfa {return ;};_ccac ._da .Objects =append (_ccac ._da .Objects [:_eb ],_ccac ._da .Objects [_eb +1:]...);break ;};};};_ef :=outputIntents ._ffe ;if _ef ==nil {_ef =_e .MakeIndirectObject (outputIntents ._bb );
};_ccac .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_ef );_ccac ._da .Objects =append (_ccac ._da .Objects ,_ef );};func (_afa Page )GetResources ()(*_e .PdfObjectDictionary ,bool ){return _e .GetDict (_afa .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};type OutputIntents struct{_bb *_e .PdfObjectArray ;_gg *Document ;_ffe *_e .PdfIndirectObject ;};func (_ga *Catalog )GetMarkInfo ()(*_e .PdfObjectDictionary ,bool ){_ge ,_fg :=_e .GetDict (_ga .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _ge ,_fg ;};func (_gc *Catalog )SetMarkInfo (mi _e .PdfObject ){_fge :=_e .MakeIndirectObject (mi );_gc .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_fge );_gc ._da .Objects =append (_gc ._da .Objects ,_fge );};func (_ffd *OutputIntents )Add (oi _e .PdfObject )error {_aeg ,_fc :=oi .(*_e .PdfObjectDictionary );
if !_fc {return _fa .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _ega ,_ab :=_e .GetStream (_aeg .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ab {_ffd ._gg .Objects =append (_ffd ._gg .Objects ,_ega );};_eae ,_gb :=oi .(*_e .PdfIndirectObject );if !_gb {_eae =_e .MakeIndirectObject (oi );
};if _ffd ._bb ==nil {_ffd ._bb =_e .MakeArray (_eae );}else {_ffd ._bb .Append (_eae );};_ffd ._gg .Objects =append (_ffd ._gg .Objects ,_eae );return nil ;};type Page struct{_ebe int ;Object *_e .PdfObjectDictionary ;_cgg *Document ;};func _dga (_gaf _e .PdfObject )(_e .PdfObjectName ,error ){var _ccf *_e .PdfObjectName ;
var _ddg *_e .PdfObjectArray ;if _fgg ,_eff :=_gaf .(*_e .PdfIndirectObject );_eff {if _fcd ,_ce :=_fgg .PdfObject .(*_e .PdfObjectArray );_ce {_ddg =_fcd ;}else if _fgd ,_egac :=_fgg .PdfObject .(*_e .PdfObjectName );_egac {_ccf =_fgd ;};}else if _bec ,_aea :=_gaf .(*_e .PdfObjectArray );
_aea {_ddg =_bec ;}else if _aa ,_cgd :=_gaf .(*_e .PdfObjectName );_cgd {_ccf =_aa ;};if _ccf !=nil {switch *_ccf {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_ccf ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_ccf ,nil ;};};if _ddg !=nil &&_ddg .Len ()> 0{if _dbg ,_dbf :=_ddg .Get (0).(*_e .PdfObjectName );_dbf {switch *_dbg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _ddg .Len ()==1{return *_dbg ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_dbg ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_dbg ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_dbg ,nil ;};};};return "",nil ;};type Document struct{ID [2]string ;Version _e .Version ;Objects []_e .PdfObject ;Info _e .PdfObject ;Crypt *_e .PdfCrypt ;
UseHashBasedID bool ;};func (_cgda *Content )SetData (data []byte )error {_dge ,_ggea :=_e .MakeStream (data ,_e .NewFlateEncoder ());if _ggea !=nil {return _ggea ;};_fcg ,_bd :=_e .GetArray (_cgda ._cfa .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_bd &&_cgda ._bee ==0{_cgda ._cfa .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_dge );}else {if _ggea =_fcg .Set (_cgda ._bee ,_dge );_ggea !=nil {return _ggea ;};};_cgda ._cfa ._cgg .Objects =append (_cgda ._cfa ._cgg .Objects ,_dge );
return nil ;};func (_ed *Catalog )SetVersion (){_ed .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_e .MakeName (_d .Sprintf ("\u0025\u0064\u002e%\u0064",_ed ._da .Version .Major ,_ed ._da .Version .Minor )));};func (_fee *Document )GetPages ()([]Page ,bool ){_efad ,_gbf :=_fee .FindCatalog ();
if !_gbf {return nil ,false ;};return _efad .GetPages ();};func (_aac Page )GetResourcesXObject ()(*_e .PdfObjectDictionary ,bool ){_ca ,_dc :=_aac .GetResources ();if !_dc {return nil ,false ;};return _e .GetDict (_ca .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
};func (_geg *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_eg :=_geg .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _eg ==nil {return nil ,false ;};_fdf ,_bea :=_e .GetIndirect (_eg );if !_bea {return nil ,false ;
};_ae ,_fda :=_e .GetArray (_fdf .PdfObject );if !_fda {return nil ,false ;};return &OutputIntents {_ffe :_fdf ,_bb :_ae ,_gg :_geg ._da },true ;};func (_adg *Catalog )GetMetadata ()(*_e .PdfObjectStream ,bool ){_df ,_cca :=_e .GetStream (_adg .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _df ,_cca ;};type Content struct{Stream *_e .PdfObjectStream ;_bee int ;_cfa Page ;};type ImageSMask struct{Image *Image ;Stream *_e .PdfObjectStream ;};func (_aff *Document )AddIndirectObject (indirect *_e .PdfIndirectObject ){for _ ,_bbg :=range _aff .Objects {if _bbg ==indirect {return ;
};};_aff .Objects =append (_aff .Objects ,indirect );};type OutputIntent struct{Object *_e .PdfObjectDictionary ;};func (_gcd *Document )FindCatalog ()(*Catalog ,bool ){var _beb *_e .PdfObjectDictionary ;for _ ,_age :=range _gcd .Objects {_af ,_cd :=_e .GetDict (_age );
if !_cd {continue ;};if _de ,_cge :=_e .GetName (_af .Get ("\u0054\u0079\u0070\u0065"));_cge &&*_de =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_beb =_af ;break ;};};if _beb ==nil {return nil ,false ;};return &Catalog {Object :_beb ,_da :_gcd },true ;};func (_fab Page )GetContents ()([]Content ,bool ){_agd ,_fabg :=_e .GetArray (_fab .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_fabg {_dafa ,_cged :=_e .GetStream (_fab .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_cged {return nil ,false ;};return []Content {{Stream :_dafa ,_cfa :_fab ,_bee :0}},true ;};_bff :=make ([]Content ,_agd .Len ());for _gcf ,_fdfg :=range _agd .Elements (){_efd ,_fgc :=_e .GetStream (_fdfg );
if !_fgc {continue ;};_bff [_gcf ]=Content {Stream :_efd ,_cfa :_fab ,_bee :_gcf };};return _bff ,true ;};func (_gad Content )GetData ()([]byte ,error ){_cede ,_gca :=_e .NewEncoderFromStream (_gad .Stream );if _gca !=nil {return nil ,_gca ;};_fag ,_gca :=_cede .DecodeStream (_gad .Stream );
if _gca !=nil {return nil ,_gca ;};return _fag ,nil ;};