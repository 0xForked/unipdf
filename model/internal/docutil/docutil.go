//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_b "errors";_a "fmt";_e "github.com/unidoc/unipdf/v3/common";_f "github.com/unidoc/unipdf/v3/core";);type Document struct{ID [2]string ;Version _f .Version ;Objects []_f .PdfObject ;Info _f .PdfObject ;Crypt *_f .PdfCrypt ;UseHashBasedID bool ;
};func (_baf *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_ab :_baf ._de }};func (_age *Catalog )SetMarkInfo (mi _f .PdfObject ){_ga :=_f .MakeIndirectObject (mi );_age .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_ga );
_age ._de .Objects =append (_age ._de .Objects ,_ga );};func _dbb (_dbf _f .PdfObject )(_f .PdfObjectName ,error ){var _geg *_f .PdfObjectName ;var _gdb *_f .PdfObjectArray ;if _gba ,_ec :=_dbf .(*_f .PdfIndirectObject );_ec {if _add ,_gab :=_gba .PdfObject .(*_f .PdfObjectArray );
_gab {_gdb =_add ;}else if _eae ,_bc :=_gba .PdfObject .(*_f .PdfObjectName );_bc {_geg =_eae ;};}else if _abd ,_fa :=_dbf .(*_f .PdfObjectArray );_fa {_gdb =_abd ;}else if _ecg ,_fac :=_dbf .(*_f .PdfObjectName );_fac {_geg =_ecg ;};if _geg !=nil {switch *_geg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_geg ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_geg ,nil ;};};if _gdb !=nil &&_gdb .Len ()> 0{if _bfa ,_bg :=_gdb .Get (0).(*_f .PdfObjectName );_bg {switch *_bfa {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _gdb .Len ()==1{return *_bfa ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_bfa ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_bfa ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_bfa ,nil ;};};};return "",nil ;};func (_fec *Document )AddIndirectObject (indirect *_f .PdfIndirectObject ){for _ ,_cbe :=range _fec .Objects {if _cbe ==indirect {return ;
};};_fec .Objects =append (_fec .Objects ,indirect );};func (_dba *Document )GetPages ()([]Page ,bool ){_bfd ,_geb :=_dba .FindCatalog ();if !_geb {return nil ,false ;};return _bfd .GetPages ();};func (_bba *Document )AddStream (stream *_f .PdfObjectStream ){for _ ,_ce :=range _bba .Objects {if _ce ==stream {return ;
};};_bba .Objects =append (_bba .Objects ,stream );};func (_be *Catalog )GetPages ()([]Page ,bool ){_ff ,_ba :=_f .GetDict (_be .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_ba {return nil ,false ;};_fd ,_dc :=_f .GetArray (_ff .Get ("\u004b\u0069\u0064\u0073"));
if !_dc {return nil ,false ;};_ac :=make ([]Page ,_fd .Len ());for _dd ,_dg :=range _fd .Elements (){_af ,_ef :=_f .GetDict (_dg );if !_ef {continue ;};_ac [_dd ]=Page {Object :_af ,_affa :_dd +1,_addd :_be ._de };};return _ac ,true ;};type Image struct{Name string ;
Width int ;Height int ;Colorspace _f .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_f .PdfObjectStream ;};type Catalog struct{Object *_f .PdfObjectDictionary ;_de *Document ;};type OutputIntent struct{Object *_f .PdfObjectDictionary ;
};type ImageSMask struct{Image *Image ;Stream *_f .PdfObjectStream ;};func (_dgf *Catalog )HasMetadata ()bool {_g :=_dgf .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _g !=nil ;};func (_bag Page )GetResourcesXObject ()(*_f .PdfObjectDictionary ,bool ){_fgf ,_agf :=_bag .GetResources ();
if !_agf {return nil ,false ;};return _f .GetDict (_fgf .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_bf *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _fea :=_bf .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_fea !=nil {for _fc ,_cf :=range _bf ._de .Objects {if _cf ==_fea {if outputIntents ._gb ==_fea {return ;};_bf ._de .Objects =append (_bf ._de .Objects [:_fc ],_bf ._de .Objects [_fc +1:]...);break ;};};};_bbe :=outputIntents ._gb ;if _bbe ==nil {_bbe =_f .MakeIndirectObject (outputIntents ._ffa );
};_bf .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_bbe );_bf ._de .Objects =append (_bf ._de .Objects ,_bbe );};func (_bef Content )GetData ()([]byte ,error ){_gfa ,_deag :=_f .NewEncoderFromStream (_bef .Stream );
if _deag !=nil {return nil ,_deag ;};_baac ,_deag :=_gfa .DecodeStream (_bef .Stream );if _deag !=nil {return nil ,_deag ;};return _baac ,nil ;};func (_fdge *OutputIntents )Add (oi _f .PdfObject )error {_ea ,_gd :=oi .(*_f .PdfObjectDictionary );if !_gd {return _b .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _ad ,_efe :=_f .GetStream (_ea .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_efe {_fdge ._ab .Objects =append (_fdge ._ab .Objects ,_ad );};_da ,_ffg :=oi .(*_f .PdfIndirectObject );if !_ffg {_da =_f .MakeIndirectObject (oi );
};if _fdge ._ffa ==nil {_fdge ._ffa =_f .MakeArray (_da );}else {_fdge ._ffa .Append (_da );};_fdge ._ab .Objects =append (_fdge ._ab .Objects ,_da );return nil ;};func (_dcb *Content )SetData (data []byte )error {_fcc ,_bbf :=_f .MakeStream (data ,_f .NewFlateEncoder ());
if _bbf !=nil {return _bbf ;};_fdgef ,_bcd :=_f .GetArray (_dcb ._feb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bcd &&_dcb ._bda ==0{_dcb ._feb .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_fcc );}else {if _bbf =_fdgef .Set (_dcb ._bda ,_fcc );
_bbf !=nil {return _bbf ;};};_dcb ._feb ._addd .Objects =append (_dcb ._feb ._addd .Objects ,_fcc );return nil ;};func (_fdded *Page )Number ()int {return _fdded ._affa };func (_c *Catalog )GetMetadata ()(*_f .PdfObjectStream ,bool ){_cg ,_df :=_f .GetStream (_c .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _cg ,_df ;};type OutputIntents struct{_ffa *_f .PdfObjectArray ;_ab *Document ;_gb *_f .PdfIndirectObject ;};func (_cb *Document )FindCatalog ()(*Catalog ,bool ){var _dac *_f .PdfObjectDictionary ;for _ ,_gfc :=range _cb .Objects {_abg ,_ae :=_f .GetDict (_gfc );
if !_ae {continue ;};if _dgd ,_ca :=_f .GetName (_abg .Get ("\u0054\u0079\u0070\u0065"));_ca &&*_dgd =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_dac =_abg ;break ;};};if _dac ==nil {return nil ,false ;};return &Catalog {Object :_dac ,_de :_cb },true ;};
func (_ffae *OutputIntents )Len ()int {return _ffae ._ffa .Len ()};func (_afb *Catalog )GetMarkInfo ()(*_f .PdfObjectDictionary ,bool ){_ag ,_def :=_f .GetDict (_afb .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));return _ag ,_def ;};
func (_fdde Page )GetResources ()(*_f .PdfObjectDictionary ,bool ){return _f .GetDict (_fdde .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));};func (_ddb Page )GetContents ()([]Content ,bool ){_efb ,_dace :=_f .GetArray (_ddb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_dace {_dgb ,_cge :=_f .GetStream (_ddb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_cge {return nil ,false ;};return []Content {{Stream :_dgb ,_feb :_ddb ,_bda :0}},true ;};_fdc :=make ([]Content ,_efb .Len ());for _eg ,_dfe :=range _efb .Elements (){_efd ,_gc :=_f .GetStream (_dfe );
if !_gc {continue ;};_fdc [_eg ]=Content {Stream :_efd ,_feb :_ddb ,_bda :_eg };};return _fdc ,true ;};type Content struct{Stream *_f .PdfObjectStream ;_bda int ;_feb Page ;};func (_cae Page )FindXObjectForms ()[]*_f .PdfObjectStream {_ebd ,_feab :=_cae .GetResourcesXObject ();
if !_feab {return nil ;};_cgb :=map[*_f .PdfObjectStream ]struct{}{};var _bgg func (_daa *_f .PdfObjectDictionary ,_bbd map[*_f .PdfObjectStream ]struct{});_bgg =func (_egc *_f .PdfObjectDictionary ,_gbf map[*_f .PdfObjectStream ]struct{}){for _ ,_bgbf :=range _egc .Keys (){_eeb ,_bec :=_f .GetStream (_egc .Get (_bgbf ));
if !_bec {continue ;};if _ ,_cdb :=_gbf [_eeb ];_cdb {continue ;};_aae ,_fbf :=_f .GetName (_eeb .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_fbf ||_aae .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_gbf [_eeb ]=struct{}{};_deae ,_fbf :=_f .GetDict (_eeb .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_fbf {continue ;};_acd ,_cgef :=_f .GetDict (_deae .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _cgef {_bgg (_acd ,_gbf );};};};_bgg (_ebd ,_cgb );var _bd []*_f .PdfObjectStream ;for _bab :=range _cgb {_bd =append (_bd ,_bab );};return _bd ;};
type Page struct{_affa int ;Object *_f .PdfObjectDictionary ;_addd *Document ;};func (_agc *OutputIntents )Get (i int )(OutputIntent ,bool ){if _agc ._ffa ==nil {return OutputIntent {},false ;};if i >=_agc ._ffa .Len (){return OutputIntent {},false ;};
_ge :=_agc ._ffa .Get (i );_baa ,_gf :=_f .GetIndirect (_ge );if !_gf {_fdd ,_fcb :=_f .GetDict (_ge );return OutputIntent {Object :_fdd },_fcb ;};_bff ,_ebb :=_f .GetDict (_baa .PdfObject );return OutputIntent {Object :_bff },_ebb ;};func (_fad Page )FindXObjectImages ()([]*Image ,error ){_dbe ,_gca :=_fad .GetResourcesXObject ();
if !_gca {return nil ,nil ;};var _bgb []*Image ;var _dbae error ;_bca :=map[*_f .PdfObjectStream ]int {};_cd :=map[*_f .PdfObjectStream ]struct{}{};var _gbg int ;for _ ,_gce :=range _dbe .Keys (){_ede ,_agg :=_f .GetStream (_dbe .Get (_gce ));if !_agg {continue ;
};if _ ,_gbc :=_bca [_ede ];_gbc {continue ;};_gcg ,_ffc :=_f .GetName (_ede .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_ffc ||_gcg .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_bcb :=Image {BitsPerComponent :8,Stream :_ede ,Name :string (_gce )};
if _bcb .Colorspace ,_dbae =_dbb (_ede .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_dbae !=nil {_e .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_dbae );
continue ;};if _ceb ,_gfg :=_f .GetIntVal (_ede .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_gfg {_bcb .BitsPerComponent =_ceb ;};if _egd ,_ebf :=_f .GetIntVal (_ede .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_ebf {_bcb .Width =_egd ;};if _bcae ,_dea :=_f .GetIntVal (_ede .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_dea {_bcb .Height =_bcae ;};if _fb ,_caa :=_f .GetStream (_ede .Get ("\u0053\u004d\u0061s\u006b"));_caa {_bcb .SMask =&ImageSMask {Image :&_bcb ,Stream :_fb };
_cd [_fb ]=struct{}{};};switch _bcb .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_bcb .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_bcb .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_bcb .ColorComponents =4;
default:_bcb .ColorComponents =-1;};_bca [_ede ]=_gbg ;_bgb =append (_bgb ,&_bcb );_gbg ++;};var _aca []int ;for _ ,_cag :=range _bgb {if _cag .SMask !=nil {_abb ,_edf :=_bca [_cag .SMask .Stream ];if _edf {_aca =append (_aca ,_abb );};};};_afa :=make ([]*Image ,len (_bgb )-len (_aca ));
_gbg =0;_cba :for _ffb ,_bed :=range _bgb {for _ ,_gaa :=range _aca {if _ffb ==_gaa {continue _cba ;};};_afa [_gbg ]=_bed ;_gbg ++;};return _bgb ,nil ;};func (_ee *Catalog )SetVersion (){_ee .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_f .MakeName (_a .Sprintf ("\u0025\u0064\u002e%\u0064",_ee ._de .Version .Major ,_ee ._de .Version .Minor )));
};func (_aa *Catalog )SetMetadata (data []byte )error {_bb ,_fe :=_f .MakeStream (data ,nil );if _fe !=nil {return _fe ;};_bb .Set ("\u0054\u0079\u0070\u0065",_f .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_bb .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_f .MakeName ("\u0058\u004d\u004c"));
_aa .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_bb );_aa ._de .Objects =append (_aa ._de .Objects ,_bb );return nil ;};func (_fdg *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_db :=_fdg .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _db ==nil {return nil ,false ;};_eb ,_aff :=_f .GetIndirect (_db );if !_aff {return nil ,false ;};_ed ,_fed :=_f .GetArray (_eb .PdfObject );if !_fed {return nil ,false ;};return &OutputIntents {_gb :_eb ,_ffa :_ed ,_ab :_fdg ._de },true ;};