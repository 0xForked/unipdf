//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_d "errors";_dg "fmt";_cc "github.com/unidoc/unipdf/v3/common";_c "github.com/unidoc/unipdf/v3/core";_da "github.com/unidoc/unipdf/v3/internal/xmp";);type Document struct{ID [2]string ;Version _c .Version ;Objects []_c .PdfObject ;
Info _c .PdfObject ;Crypt *_c .PdfCrypt ;UseHashBasedID bool ;};type Content struct{Object _c .PdfObject ;};func (_cg *Catalog )SetVersion (){_cg .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_c .MakeName (_dg .Sprintf ("\u0025\u0064\u002e%\u0064",_cg ._a .Version .Major ,_cg ._a .Version .Minor )));
};func (_bc *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_ec :_bc ._a }};func (_af *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_gg :=_af .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _gg ==nil {return nil ,false ;};_ff ,_ae :=_c .GetIndirect (_gg );if !_ae {return nil ,false ;};_gcd ,_eg :=_c .GetArray (_ff .PdfObject );if !_eg {return nil ,false ;};return &OutputIntents {_ege :_ff ,_eb :_gcd ,_ec :_af ._a },true ;};func (_dec Page )FindXObjectImages ()([]*Image ,error ){_ada ,_eaa :=_dec .GetResourcesXObject ();
if !_eaa {return nil ,nil ;};var _fae []*Image ;var _agc error ;_aab :=map[*_c .PdfObjectStream ]int {};_gef :=map[*_c .PdfObjectStream ]struct{}{};var _geg int ;for _ ,_gcbd :=range _ada .Keys (){_gce ,_faa :=_c .GetStream (_ada .Get (_gcbd ));if !_faa {continue ;
};if _ ,_gbf :=_aab [_gce ];_gbf {continue ;};_ee ,_agbf :=_c .GetName (_gce .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_agbf ||_ee .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_gf :=Image {BitsPerComponent :8,Stream :_gce ,Name :string (_gcbd )};
if _gf .Colorspace ,_agc =_dfe (_gce .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_agc !=nil {_cc .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_agc );
continue ;};if _eaf ,_cfe :=_c .GetIntVal (_gce .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_cfe {_gf .BitsPerComponent =_eaf ;};if _decf ,_cecb :=_c .GetIntVal (_gce .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_cecb {_gf .Width =_decf ;};if _acc ,_ded :=_c .GetIntVal (_gce .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_ded {_gf .Height =_acc ;};if _cfb ,_dgf :=_c .GetStream (_gce .Get ("\u0053\u004d\u0061s\u006b"));_dgf {_gf .SMask =&ImageSMask {Image :&_gf ,Stream :_cfb };
_gef [_cfb ]=struct{}{};};switch _gf .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_gf .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_gf .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_gf .ColorComponents =4;
default:_gf .ColorComponents =-1;};_aab [_gce ]=_geg ;_fae =append (_fae ,&_gf );_geg ++;};var _egg []int ;for _ ,_aff :=range _fae {if _aff .SMask !=nil {_daf ,_gba :=_aab [_aff .SMask .Stream ];if _gba {_egg =append (_egg ,_daf );};};};_ggc :=make ([]*Image ,len (_fae )-len (_egg ));
_geg =0;_dde :for _bga ,_ddg :=range _fae {for _ ,_gaa :=range _egg {if _bga ==_gaa {continue _dde ;};};_ggc [_geg ]=_ddg ;_geg ++;};return _fae ,nil ;};func (_gc *Catalog )HasMetadata ()bool {_ca :=_gc .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _ca !=nil ;};type OutputIntents struct{_eb *_c .PdfObjectArray ;_ec *Document ;_ege *_c .PdfIndirectObject ;};func (_fdf Page )GetResources ()(*_c .PdfObjectDictionary ,bool ){return _c .GetDict (_fdf .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_gcb *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _gea :=_gcb .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_gea !=nil {for _ea ,_bd :=range _gcb ._a .Objects {if _bd ==_gea {if outputIntents ._ege ==_gea {return ;
};_gcb ._a .Objects =append (_gcb ._a .Objects [:_ea ],_gcb ._a .Objects [_ea +1:]...);break ;};};};_df :=outputIntents ._ege ;if _df ==nil {_df =_c .MakeIndirectObject (outputIntents ._eb );};_gcb .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_df );
_gcb ._a .Objects =append (_gcb ._a .Objects ,_df );};func (_ce *Catalog )GetPages ()([]Page ,bool ){_ac ,_gd :=_c .GetDict (_ce .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_gd {return nil ,false ;};_e ,_b :=_c .GetArray (_ac .Get ("\u004b\u0069\u0064\u0073"));
if !_b {return nil ,false ;};_db :=make ([]Page ,_e .Len ());for _dgd ,_f :=range _e .Elements (){_ag ,_ge :=_c .GetDict (_f );if !_ge {continue ;};_db [_dgd ]=Page {Object :_ag ,_dege :_dgd +1,_daa :_ce ._a };};return _db ,true ;};func (_gb *Catalog )SetMetadata (meta _da .Metadata )error {_dd ,_ef :=meta .MarshalXMP ();
if _ef !=nil {return _ef ;};_cd ,_ef :=_c .MakeStream (_dd ,nil );if _ef !=nil {return _ef ;};_cd .Set ("\u0054\u0079\u0070\u0065",_c .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_cd .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_c .MakeName ("\u0058\u004d\u004c"));
_gb .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_cd );_gb ._a .Objects =append (_gb ._a .Objects ,_cd );return nil ;};func (_bcf *OutputIntents )Get (i int )(OutputIntent ,bool ){if _bcf ._eb ==nil {return OutputIntent {},false ;};
if i >=_bcf ._eb .Len (){return OutputIntent {},false ;};_de :=_bcf ._eb .Get (i );_ccd ,_fg :=_c .GetIndirect (_de );if !_fg {_gee ,_caf :=_c .GetDict (_de );return OutputIntent {Object :_gee },_caf ;};_fa ,_cb :=_c .GetDict (_ccd .PdfObject );return OutputIntent {Object :_fa },_cb ;
};func (_ffc *Page )Number ()int {return _ffc ._dege };func _dfe (_bdg _c .PdfObject )(_c .PdfObjectName ,error ){var _deg *_c .PdfObjectName ;var _geaa *_c .PdfObjectArray ;if _cdg ,_gcc :=_bdg .(*_c .PdfIndirectObject );_gcc {if _bdge ,_aea :=_cdg .PdfObject .(*_c .PdfObjectArray );
_aea {_geaa =_bdge ;}else if _bdd ,_aa :=_cdg .PdfObject .(*_c .PdfObjectName );_aa {_deg =_bdd ;};}else if _ad ,_ebe :=_bdg .(*_c .PdfObjectArray );_ebe {_geaa =_ad ;}else if _bb ,_age :=_bdg .(*_c .PdfObjectName );_age {_deg =_bb ;};if _deg !=nil {switch *_deg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_deg ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_deg ,nil ;};};if _geaa !=nil &&_geaa .Len ()> 0{if _cdgf ,_ga :=_geaa .Get (0).(*_c .PdfObjectName );_ga {switch *_cdgf {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _geaa .Len ()==1{return *_cdgf ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_cdgf ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_cdgf ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_cdgf ,nil ;};};};return "",nil ;};func (_dc *OutputIntents )Len ()int {return _dc ._eb .Len ()};type ImageSMask struct{Image *Image ;Stream *_c .PdfObjectStream ;
};func (_ggb *Document )AddIndirectObject (indirect *_c .PdfIndirectObject ){for _ ,_aebc :=range _ggb .Objects {if _aebc ==indirect {return ;};};_ggb .Objects =append (_ggb .Objects ,indirect );};func (_ccg Content )GetData ()([]byte ,error ){_gceg ,_dga :=_c .GetStream (_ccg .Object );
if !_dga {return nil ,nil ;};_eda ,_fce :=_c .NewEncoderFromStream (_gceg );if _fce !=nil {return nil ,_fce ;};_fb ,_fce :=_eda .DecodeStream (_gceg );if _fce !=nil {return nil ,_fce ;};return _fb ,nil ;};type Image struct{Name string ;Width int ;Height int ;
Colorspace _c .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_c .PdfObjectStream ;};type Page struct{_dege int ;Object *_c .PdfObjectDictionary ;_daa *Document ;};func (_cad *OutputIntents )Add (oi _c .PdfObject )error {_ecf ,_ceg :=oi .(*_c .PdfObjectDictionary );
if !_ceg {return _d .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _cga ,_ed :=_c .GetStream (_ecf .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ed {_cad ._ec .Objects =append (_cad ._ec .Objects ,_cga );};_fc ,_ddf :=oi .(*_c .PdfIndirectObject );if !_ddf {_fc =_c .MakeIndirectObject (oi );
};if _cad ._eb ==nil {_cad ._eb =_c .MakeArray (_fc );}else {_cad ._eb .Append (_fc );};_cad ._ec .Objects =append (_cad ._ec .Objects ,_fc );return nil ;};type OutputIntent struct{Object *_c .PdfObjectDictionary ;};func (_aeb *Document )GetPages ()([]Page ,bool ){_bg ,_ecb :=_aeb .FindCatalog ();
if !_ecb {return nil ,false ;};return _bg .GetPages ();};func (_dcc *Document )FindCatalog ()(*Catalog ,bool ){var _cbf *_c .PdfObjectDictionary ;for _ ,_fff :=range _dcc .Objects {_bdb ,_cbd :=_c .GetDict (_fff );if !_cbd {continue ;};if _deb ,_aee :=_c .GetName (_bdb .Get ("\u0054\u0079\u0070\u0065"));
_aee &&*_deb =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_cbf =_bdb ;break ;};};if _cbf ==nil {return nil ,false ;};return &Catalog {Object :_cbf ,_a :_dcc },true ;};func (_faf *Document )AddStream (stream *_c .PdfObjectStream ){for _ ,_fd :=range _faf .Objects {if _fd ==stream {return ;
};};_faf .Objects =append (_faf .Objects ,stream );};func (_cf Page )GetResourcesXObject ()(*_c .PdfObjectDictionary ,bool ){_fgd ,_dab :=_cf .GetResources ();if !_dab {return nil ,false ;};return _c .GetDict (_fgd .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
};func (_ab Page )GetContents ()([]Content ,bool ){_cec ,_dce :=_c .GetArray (_ab .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_dce {return nil ,false ;};_cdgg :=make ([]Content ,_cec .Len ());for _cbg ,_agb :=range _cec .Elements (){_cdgg [_cbg ]=Content {Object :_agb };
};return _cdgg ,true ;};type Catalog struct{Object *_c .PdfObjectDictionary ;_a *Document ;};