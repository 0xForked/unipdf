//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_e "errors";_ec "fmt";_a "github.com/unidoc/unipdf/v3/common";_eb "github.com/unidoc/unipdf/v3/core";);type Document struct{ID [2]string ;Version _eb .Version ;Objects []_eb .PdfObject ;Info _eb .PdfObject ;Crypt *_eb .PdfCrypt ;
UseHashBasedID bool ;};func (_bga Page )GetContents ()([]Content ,bool ){_cce ,_ffca :=_eb .GetArray (_bga .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_ffca {_ffgf ,_eag :=_eb .GetStream (_bga .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_eag {return nil ,false ;};return []Content {{Stream :_ffgf ,_egf :_bga ,_ag :0}},true ;};_cdc :=make ([]Content ,_cce .Len ());for _dga ,_cfb :=range _cce .Elements (){_gcb ,_aa :=_eb .GetStream (_cfb );if !_aa {continue ;};_cdc [_dga ]=Content {Stream :_gcb ,_egf :_bga ,_ag :_dga };
};return _cdc ,true ;};func (_c *Catalog )SetMetadata (data []byte )error {_ff ,_df :=_eb .MakeStream (data ,nil );if _df !=nil {return _df ;};_ff .Set ("\u0054\u0079\u0070\u0065",_eb .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_ff .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_eb .MakeName ("\u0058\u004d\u004c"));
_c .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_ff );_c ._ee .Objects =append (_c ._ee .Objects ,_ff );return nil ;};func (_ecb *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_fgg :=_ecb .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _fgg ==nil {return nil ,false ;};_fdd ,_bb :=_eb .GetIndirect (_fgg );if !_bb {return nil ,false ;};_acc ,_ffc :=_eb .GetArray (_fdd .PdfObject );if !_ffc {return nil ,false ;};return &OutputIntents {_cc :_fdd ,_afg :_acc ,_aff :_ecb ._ee },true ;};
func (_ab *Catalog )GetPages ()([]Page ,bool ){_g ,_fd :=_eb .GetDict (_ab .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_fd {return nil ,false ;};_gf ,_fac :=_eb .GetArray (_g .Get ("\u004b\u0069\u0064\u0073"));if !_fac {return nil ,false ;};_ac :=make ([]Page ,_gf .Len ());
for _abb ,_d :=range _gf .Elements (){_dg ,_b :=_eb .GetDict (_d );if !_b {continue ;};_ac [_abb ]=Page {Object :_dg ,_bed :_abb +1,_dfb :_ab ._ee };};return _ac ,true ;};type OutputIntent struct{Object *_eb .PdfObjectDictionary ;};func (_ebg Page )FindXObjectForms ()[]*_eb .PdfObjectStream {_aag ,_gbgc :=_ebg .GetResourcesXObject ();
if !_gbgc {return nil ;};_bgd :=map[*_eb .PdfObjectStream ]struct{}{};var _egg func (_fcb *_eb .PdfObjectDictionary ,_accb map[*_eb .PdfObjectStream ]struct{});_egg =func (_fcgg *_eb .PdfObjectDictionary ,_deg map[*_eb .PdfObjectStream ]struct{}){for _ ,_afge :=range _fcgg .Keys (){_cde ,_fgeb :=_eb .GetStream (_fcgg .Get (_afge ));
if !_fgeb {continue ;};if _ ,_afe :=_deg [_cde ];_afe {continue ;};_ebac ,_bad :=_eb .GetName (_cde .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_bad ||_ebac .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_deg [_cde ]=struct{}{};_cdg ,_bad :=_eb .GetDict (_cde .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_bad {continue ;};_gdbf ,_afbe :=_eb .GetDict (_cdg .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _afbe {_egg (_gdbf ,_deg );};};};_egg (_aag ,_bgd );var _dfee []*_eb .PdfObjectStream ;for _bgg :=range _bgd {_dfee =append (_dfee ,_bgg );};return _dfee ;
};type Image struct{Name string ;Width int ;Height int ;Colorspace _eb .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_eb .PdfObjectStream ;};type OutputIntents struct{_afg *_eb .PdfObjectArray ;_aff *Document ;_cc *_eb .PdfIndirectObject ;
};func (_da *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _cd :=_da .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_cd !=nil {for _gb ,_be :=range _da ._ee .Objects {if _be ==_cd {if outputIntents ._cc ==_cd {return ;
};_da ._ee .Objects =append (_da ._ee .Objects [:_gb ],_da ._ee .Objects [_gb +1:]...);break ;};};};_afa :=outputIntents ._cc ;if _afa ==nil {_afa =_eb .MakeIndirectObject (outputIntents ._afg );};_da .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_afa );
_da ._ee .Objects =append (_da ._ee .Objects ,_afa );};func (_fa *Catalog )SetVersion (){_fa .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_eb .MakeName (_ec .Sprintf ("\u0025\u0064\u002e%\u0064",_fa ._ee .Version .Major ,_fa ._ee .Version .Minor )));
};func (_edd *Page )Number ()int {return _edd ._bed };func (_ecfe Page )FindXObjectImages ()([]*Image ,error ){_ecba ,_fgbc :=_ecfe .GetResourcesXObject ();if !_fgbc {return nil ,nil ;};var _dgad []*Image ;var _fge error ;_efb :=map[*_eb .PdfObjectStream ]int {};
_gee :=map[*_eb .PdfObjectStream ]struct{}{};var _ced int ;for _ ,_gfc :=range _ecba .Keys (){_dc ,_cg :=_eb .GetStream (_ecba .Get (_gfc ));if !_cg {continue ;};if _ ,_bcg :=_efb [_dc ];_bcg {continue ;};_ged ,_gef :=_eb .GetName (_dc .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_gef ||_ged .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_cdb :=Image {BitsPerComponent :8,Stream :_dc ,Name :string (_gfc )};if _cdb .Colorspace ,_fge =_fdf (_dc .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));
_fge !=nil {_a .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_fge );continue ;};if _ae ,_cb :=_eb .GetIntVal (_dc .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));
_cb {_cdb .BitsPerComponent =_ae ;};if _aba ,_decc :=_eb .GetIntVal (_dc .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));_decc {_cdb .Width =_aba ;};if _cfg ,_aca :=_eb .GetIntVal (_dc .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));
_aca {_cdb .Height =_cfg ;};if _ba ,_beb :=_eb .GetStream (_dc .Get ("\u0053\u004d\u0061s\u006b"));_beb {_cdb .SMask =&ImageSMask {Image :&_cdb ,Stream :_ba };_gee [_ba ]=struct{}{};};switch _cdb .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_cdb .ColorComponents =3;
case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_cdb .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_cdb .ColorComponents =4;default:_cdb .ColorComponents =-1;};_efb [_dc ]=_ced ;_dgad =append (_dgad ,&_cdb );
_ced ++;};var _cbb []int ;for _ ,_gaae :=range _dgad {if _gaae .SMask !=nil {_caa ,_gegc :=_efb [_gaae .SMask .Stream ];if _gegc {_cbb =append (_cbb ,_caa );};};};_dda :=make ([]*Image ,len (_dgad )-len (_cbb ));_ced =0;_fce :for _ggc ,_fba :=range _dgad {for _ ,_ccc :=range _cbb {if _ggc ==_ccc {continue _fce ;
};};_dda [_ced ]=_fba ;_ced ++;};return _dgad ,nil ;};func (_dd *Document )AddIndirectObject (indirect *_eb .PdfIndirectObject ){for _ ,_efa :=range _dd .Objects {if _efa ==indirect {return ;};};_dd .Objects =append (_dd .Objects ,indirect );};func (_gacb Page )GetResources ()(*_eb .PdfObjectDictionary ,bool ){return _eb .GetDict (_gacb .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};type Catalog struct{Object *_eb .PdfObjectDictionary ;_ee *Document ;};func (_bg *Catalog )GetMetadata ()(*_eb .PdfObjectStream ,bool ){_ed ,_ga :=_eb .GetStream (_bg .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));return _ed ,_ga ;
};func (_degf *Content )SetData (data []byte )error {_faf ,_cdcf :=_eb .MakeStream (data ,_eb .NewFlateEncoder ());if _cdcf !=nil {return _cdcf ;};_edc ,_aab :=_eb .GetArray (_degf ._egf .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_aab &&_degf ._ag ==0{_degf ._egf .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_faf );}else {if _cdcf =_edc .Set (_degf ._ag ,_faf );_cdcf !=nil {return _cdcf ;};};_degf ._egf ._dfb .Objects =append (_degf ._egf ._dfb .Objects ,_faf );
return nil ;};type Page struct{_bed int ;Object *_eb .PdfObjectDictionary ;_dfb *Document ;};func (_bc *OutputIntents )Add (oi _eb .PdfObject )error {_ecf ,_gcf :=oi .(*_eb .PdfObjectDictionary );if !_gcf {return _e .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _bee ,_ca :=_eb .GetStream (_ecf .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ca {_bc ._aff .Objects =append (_bc ._aff .Objects ,_bee );};_fad ,_fc :=oi .(*_eb .PdfIndirectObject );if !_fc {_fad =_eb .MakeIndirectObject (oi );
};if _bc ._afg ==nil {_bc ._afg =_eb .MakeArray (_fad );}else {_bc ._afg .Append (_fad );};_bc ._aff .Objects =append (_bc ._aff .Objects ,_fad );return nil ;};func (_bca Page )GetResourcesXObject ()(*_eb .PdfObjectDictionary ,bool ){_dec ,_abc :=_bca .GetResources ();
if !_abc {return nil ,false ;};return _eb .GetDict (_dec .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};type ImageSMask struct{Image *Image ;Stream *_eb .PdfObjectStream ;};func (_fbd *Document )AddStream (stream *_eb .PdfObjectStream ){for _ ,_cfd :=range _fbd .Objects {if _cfd ==stream {return ;
};};_fbd .Objects =append (_fbd .Objects ,stream );};type Content struct{Stream *_eb .PdfObjectStream ;_ag int ;_egf Page ;};func (_gaa *Document )FindCatalog ()(*Catalog ,bool ){var _fb *_eb .PdfObjectDictionary ;for _ ,_ea :=range _gaa .Objects {_ffe ,_eg :=_eb .GetDict (_ea );
if !_eg {continue ;};if _cf ,_gfe :=_eb .GetName (_ffe .Get ("\u0054\u0079\u0070\u0065"));_gfe &&*_cf =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_fb =_ffe ;break ;};};if _fb ==nil {return nil ,false ;};return &Catalog {Object :_fb ,_ee :_gaa },true ;};func (_gg *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_aff :_gg ._ee }};
func (_ef *Document )GetPages ()([]Page ,bool ){_db ,_gege :=_ef .FindCatalog ();if !_gege {return nil ,false ;};return _db .GetPages ();};func _fdf (_efg _eb .PdfObject )(_eb .PdfObjectName ,error ){var _afb *_eb .PdfObjectName ;var _dfe *_eb .PdfObjectArray ;
if _def ,_bce :=_efg .(*_eb .PdfIndirectObject );_bce {if _gfd ,_fca :=_def .PdfObject .(*_eb .PdfObjectArray );_fca {_dfe =_gfd ;}else if _abd ,_bbg :=_def .PdfObject .(*_eb .PdfObjectName );_bbg {_afb =_abd ;};}else if _gd ,_ade :=_efg .(*_eb .PdfObjectArray );
_ade {_dfe =_gd ;}else if _egc ,_cae :=_efg .(*_eb .PdfObjectName );_cae {_afb =_egc ;};if _afb !=nil {switch *_afb {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_afb ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_afb ,nil ;};};if _dfe !=nil &&_dfe .Len ()> 0{if _ce ,_efc :=_dfe .Get (0).(*_eb .PdfObjectName );_efc {switch *_ce {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _dfe .Len ()==1{return *_ce ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_ce ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_ce ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_ce ,nil ;};};};return "",nil ;};func (_gfa *Catalog )GetMarkInfo ()(*_eb .PdfObjectDictionary ,bool ){_ge ,_af :=_eb .GetDict (_gfa .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _ge ,_af ;};func (_fg *Catalog )SetMarkInfo (mi _eb .PdfObject ){_deb :=_eb .MakeIndirectObject (mi );_fg .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_deb );_fg ._ee .Objects =append (_fg ._ee .Objects ,_deb );};func (_dca Content )GetData ()([]byte ,error ){_ege ,_afed :=_eb .NewEncoderFromStream (_dca .Stream );
if _afed !=nil {return nil ,_afed ;};_gbc ,_afed :=_ege .DecodeStream (_dca .Stream );if _afed !=nil {return nil ,_afed ;};return _gbc ,nil ;};func (_de *Catalog )HasMetadata ()bool {_gc :=_de .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _gc !=nil ;};func (_ffg *OutputIntents )Get (i int )(OutputIntent ,bool ){if _ffg ._afg ==nil {return OutputIntent {},false ;};if i >=_ffg ._afg .Len (){return OutputIntent {},false ;};_geg :=_ffg ._afg .Get (i );_ggb ,_fgb :=_eb .GetIndirect (_geg );
if !_fgb {_gbg ,_ecg :=_eb .GetDict (_geg );return OutputIntent {Object :_gbg },_ecg ;};_ebf ,_gac :=_eb .GetDict (_ggb .PdfObject );return OutputIntent {Object :_ebf },_gac ;};func (_fab *OutputIntents )Len ()int {return _fab ._afg .Len ()};