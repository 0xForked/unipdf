//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_a "errors";_cb "fmt";_g "github.com/unidoc/unipdf/v3/common";_cg "github.com/unidoc/unipdf/v3/core";);func (_ceg *OutputIntents )Get (i int )(OutputIntent ,bool ){if _ceg ._dc ==nil {return OutputIntent {},false ;};if i >=_ceg ._dc .Len (){return OutputIntent {},false ;
};_ag :=_ceg ._dc .Get (i );_cf ,_ffc :=_cg .GetIndirect (_ag );if !_ffc {_ef ,_acb :=_cg .GetDict (_ag );return OutputIntent {Object :_ef },_acb ;};_ffb ,_cgb :=_cg .GetDict (_cf .PdfObject );return OutputIntent {Object :_ffb },_cgb ;};func (_eg *Catalog )GetMetadata ()(*_cg .PdfObjectStream ,bool ){_ed ,_ff :=_cg .GetStream (_eg .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _ed ,_ff ;};func (_dff *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _acg :=_dff .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_acg !=nil {for _ffg ,_ade :=range _dff ._gb .Objects {if _ade ==_acg {if outputIntents ._abbd ==_acg {return ;
};_dff ._gb .Objects =append (_dff ._gb .Objects [:_ffg ],_dff ._gb .Objects [_ffg +1:]...);break ;};};};_geb :=outputIntents ._abbd ;if _geb ==nil {_geb =_cg .MakeIndirectObject (outputIntents ._dc );};_dff .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_geb );
_dff ._gb .Objects =append (_dff ._gb .Objects ,_geb );};func (_gade *Page )Number ()int {return _gade ._cbag };func (_ad *Catalog )SetVersion (){_ad .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_cg .MakeName (_cb .Sprintf ("\u0025\u0064\u002e%\u0064",_ad ._gb .Version .Major ,_ad ._gb .Version .Minor )));
};type ImageSMask struct{Image *Image ;Stream *_cg .PdfObjectStream ;};func (_ab *Catalog )SetMetadata (data []byte )error {_bf ,_ec :=_cg .MakeStream (data ,nil );if _ec !=nil {return _ec ;};_bf .Set ("\u0054\u0079\u0070\u0065",_cg .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_bf .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_cg .MakeName ("\u0058\u004d\u004c"));_ab .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_bf );_ab ._gb .Objects =append (_ab ._gb .Objects ,_bf );return nil ;};func (_ggcc Content )GetData ()([]byte ,error ){_eaed ,_dee :=_cg .NewEncoderFromStream (_ggcc .Stream );
if _dee !=nil {return nil ,_dee ;};_eeff ,_dee :=_eaed .DecodeStream (_ggcc .Stream );if _dee !=nil {return nil ,_dee ;};return _eeff ,nil ;};func (_fc *Content )SetData (data []byte )error {_effb ,_eadd :=_cg .MakeStream (data ,_cg .NewFlateEncoder ());
if _eadd !=nil {return _eadd ;};_cac ,_gbe :=_cg .GetArray (_fc ._ggc .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_gbe &&_fc ._daa ==0{_fc ._ggc .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_effb );}else {if _eadd =_cac .Set (_fc ._daa ,_effb );
_eadd !=nil {return _eadd ;};};_fc ._ggc ._edd .Objects =append (_fc ._ggc ._edd .Objects ,_effb );return nil ;};func (_fef *Document )AddStream (stream *_cg .PdfObjectStream ){for _ ,_af :=range _fef .Objects {if _af ==stream {return ;};};_fef .Objects =append (_fef .Objects ,stream );
};type OutputIntent struct{Object *_cg .PdfObjectDictionary ;};func (_dad *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_fe :=_dad .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _fe ==nil {return nil ,false ;
};_cbf ,_bb :=_cg .GetIndirect (_fe );if !_bb {return nil ,false ;};_ba ,_abb :=_cg .GetArray (_cbf .PdfObject );if !_abb {return nil ,false ;};return &OutputIntents {_abbd :_cbf ,_dc :_ba ,_dd :_dad ._gb },true ;};func (_b *Catalog )HasMetadata ()bool {_ga :=_b .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _ga !=nil ;};func (_bd Page )FindXObjectForms ()[]*_cg .PdfObjectStream {_dcb ,_be :=_bd .GetResourcesXObject ();if !_be {return nil ;};_bgea :=map[*_cg .PdfObjectStream ]struct{}{};var _age func (_fagc *_cg .PdfObjectDictionary ,_gec map[*_cg .PdfObjectStream ]struct{});
_age =func (_gdga *_cg .PdfObjectDictionary ,_ceda map[*_cg .PdfObjectStream ]struct{}){for _ ,_fea :=range _gdga .Keys (){_cfd ,_eae :=_cg .GetStream (_gdga .Get (_fea ));if !_eae {continue ;};if _ ,_agg :=_ceda [_cfd ];_agg {continue ;};_bdc ,_afe :=_cg .GetName (_cfd .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_afe ||_bdc .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_ceda [_cfd ]=struct{}{};_fae ,_afe :=_cg .GetDict (_cfd .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));if !_afe {continue ;};_fde ,_dced :=_cg .GetDict (_fae .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
if _dced {_age (_fde ,_ceda );};};};_age (_dcb ,_bgea );var _cbg []*_cg .PdfObjectStream ;for _dde :=range _bgea {_cbg =append (_cbg ,_dde );};return _cbg ;};func (_fag *Document )FindCatalog ()(*Catalog ,bool ){var _bg *_cg .PdfObjectDictionary ;for _ ,_dcg :=range _fag .Objects {_gbg ,_ced :=_cg .GetDict (_dcg );
if !_ced {continue ;};if _efd ,_bad :=_cg .GetName (_gbg .Get ("\u0054\u0079\u0070\u0065"));_bad &&*_efd =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_bg =_gbg ;break ;};};if _bg ==nil {return nil ,false ;};return &Catalog {Object :_bg ,_gb :_fag },true ;
};type Document struct{ID [2]string ;Version _cg .Version ;Objects []_cg .PdfObject ;Info _cg .PdfObject ;Crypt *_cg .PdfCrypt ;UseHashBasedID bool ;};type Page struct{_cbag int ;Object *_cg .PdfObjectDictionary ;_edd *Document ;};type Content struct{Stream *_cg .PdfObjectStream ;
_daa int ;_ggc Page ;};func (_gdg Page )GetResourcesXObject ()(*_cg .PdfObjectDictionary ,bool ){_bge ,_ee :=_gdg .GetResources ();if !_ee {return nil ,false ;};return _cg .GetDict (_bge .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_cede *Document )AddIndirectObject (indirect *_cg .PdfIndirectObject ){for _ ,_aaf :=range _cede .Objects {if _aaf ==indirect {return ;
};};_cede .Objects =append (_cede .Objects ,indirect );};type OutputIntents struct{_dc *_cg .PdfObjectArray ;_dd *Document ;_abbd *_cg .PdfIndirectObject ;};func (_bbb Page )GetContents ()([]Content ,bool ){_cfb ,_efg :=_cg .GetArray (_bbb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_efg {_fd ,_eec :=_cg .GetStream (_bbb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_eec {return nil ,false ;};return []Content {{Stream :_fd ,_ggc :_bbb ,_daa :0}},true ;};_bbf :=make ([]Content ,_cfb .Len ());for _bab ,_ebd :=range _cfb .Elements (){_dce ,_cea :=_cg .GetStream (_ebd );
if !_cea {continue ;};_bbf [_bab ]=Content {Stream :_dce ,_ggc :_bbb ,_daa :_bab };};return _bbf ,true ;};func (_dg *Catalog )SetMarkInfo (mi _cg .PdfObject ){_fa :=_cg .MakeIndirectObject (mi );_dg .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_fa );
_dg ._gb .Objects =append (_dg ._gb .Objects ,_fa );};func (_gba Page )FindXObjectImages ()([]*Image ,error ){_cae ,_abc :=_gba .GetResourcesXObject ();if !_abc {return nil ,nil ;};var _gg []*Image ;var _de error ;_fff :=map[*_cg .PdfObjectStream ]int {};
_dbb :=map[*_cg .PdfObjectStream ]struct{}{};var _bac int ;for _ ,_faga :=range _cae .Keys (){_efgc ,_gcae :=_cg .GetStream (_cae .Get (_faga ));if !_gcae {continue ;};if _ ,_gdf :=_fff [_efgc ];_gdf {continue ;};_ebc ,_fac :=_cg .GetName (_efgc .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_fac ||_ebc .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_bbe :=Image {BitsPerComponent :8,Stream :_efgc ,Name :string (_faga )};if _bbe .Colorspace ,_de =_cdd (_efgc .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));
_de !=nil {_g .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_de );continue ;};if _cdg ,_cec :=_cg .GetIntVal (_efgc .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));
_cec {_bbe .BitsPerComponent =_cdg ;};if _fdd ,_eba :=_cg .GetIntVal (_efgc .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));_eba {_bbe .Width =_fdd ;};if _edb ,_bfb :=_cg .GetIntVal (_efgc .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));
_bfb {_bbe .Height =_edb ;};if _cfbf ,_cece :=_cg .GetStream (_efgc .Get ("\u0053\u004d\u0061s\u006b"));_cece {_bbe .SMask =&ImageSMask {Image :&_bbe ,Stream :_cfbf };_dbb [_cfbf ]=struct{}{};};switch _bbe .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_bbe .ColorComponents =3;
case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_bbe .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_bbe .ColorComponents =4;default:_bbe .ColorComponents =-1;};_fff [_efgc ]=_bac ;_gg =append (_gg ,&_bbe );
_bac ++;};var _cddg []int ;for _ ,_ead :=range _gg {if _ead .SMask !=nil {_dbe ,_dcga :=_fff [_ead .SMask .Stream ];if _dcga {_cddg =append (_cddg ,_dbe );};};};_gcg :=make ([]*Image ,len (_gg )-len (_cddg ));_bac =0;_adf :for _cege ,_fdb :=range _gg {for _ ,_eef :=range _cddg {if _cege ==_eef {continue _adf ;
};};_gcg [_bac ]=_fdb ;_bac ++;};return _gg ,nil ;};func (_bfg *Document )GetPages ()([]Page ,bool ){_fad ,_baa :=_bfg .FindCatalog ();if !_baa {return nil ,false ;};return _fad .GetPages ();};func (_aba *OutputIntents )Add (oi _cg .PdfObject )error {_acc ,_fb :=oi .(*_cg .PdfObjectDictionary );
if !_fb {return _a .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _aab ,_db :=_cg .GetStream (_acc .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_db {_aba ._dd .Objects =append (_aba ._dd .Objects ,_aab );};_cc ,_dgb :=oi .(*_cg .PdfIndirectObject );if !_dgb {_cc =_cg .MakeIndirectObject (oi );
};if _aba ._dc ==nil {_aba ._dc =_cg .MakeArray (_cc );}else {_aba ._dc .Append (_cc );};_aba ._dd .Objects =append (_aba ._dd .Objects ,_cc );return nil ;};func (_aa *OutputIntents )Len ()int {return _aa ._dc .Len ()};func _cdd (_eb _cg .PdfObject )(_cg .PdfObjectName ,error ){var _dbf *_cg .PdfObjectName ;
var _ae *_cg .PdfObjectArray ;if _cga ,_fbb :=_eb .(*_cg .PdfIndirectObject );_fbb {if _dfb ,_eff :=_cga .PdfObject .(*_cg .PdfObjectArray );_eff {_ae =_dfb ;}else if _cegb ,_afd :=_cga .PdfObject .(*_cg .PdfObjectName );_afd {_dbf =_cegb ;};}else if _ea ,_gc :=_eb .(*_cg .PdfObjectArray );
_gc {_ae =_ea ;}else if _gca ,_cba :=_eb .(*_cg .PdfObjectName );_cba {_dbf =_gca ;};if _dbf !=nil {switch *_dbf {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_dbf ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_dbf ,nil ;};};if _ae !=nil &&_ae .Len ()> 0{if _gde ,_ca :=_ae .Get (0).(*_cg .PdfObjectName );_ca {switch *_gde {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _ae .Len ()==1{return *_gde ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_gde ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_gde ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_gde ,nil ;};};};return "",nil ;};func (_ce *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_dd :_ce ._gb }};func (_cgbb Page )GetResources ()(*_cg .PdfObjectDictionary ,bool ){return _cg .GetDict (_cgbb .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};type Catalog struct{Object *_cg .PdfObjectDictionary ;_gb *Document ;};func (_bc *Catalog )GetMarkInfo ()(*_cg .PdfObjectDictionary ,bool ){_ge ,_abd :=_cg .GetDict (_bc .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));return _ge ,_abd ;
};type Image struct{Name string ;Width int ;Height int ;Colorspace _cg .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_cg .PdfObjectStream ;};func (_cge *Catalog )GetPages ()([]Page ,bool ){_ac ,_f :=_cg .GetDict (_cge .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_f {return nil ,false ;};_d ,_df :=_cg .GetArray (_ac .Get ("\u004b\u0069\u0064\u0073"));if !_df {return nil ,false ;};_e :=make ([]Page ,_d .Len ());for _gd ,_cd :=range _d .Elements (){_gf ,_da :=_cg .GetDict (_cd );if !_da {continue ;};_e [_gd ]=Page {Object :_gf ,_cbag :_gd +1,_edd :_cge ._gb };
};return _e ,true ;};