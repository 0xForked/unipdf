//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_b "errors";_f "fmt";_d "github.com/unidoc/unipdf/v3/common";_fb "github.com/unidoc/unipdf/v3/core";);func (_aea *Content )SetData (data []byte )error {_eae ,_fdeg :=_fb .MakeStream (data ,_fb .NewFlateEncoder ());if _fdeg !=nil {return _fdeg ;
};_agd ,_deg :=_fb .GetArray (_aea ._ggd .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_deg &&_aea ._fbeg ==0{_aea ._ggd .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_eae );}else {if _fdeg =_agd .Set (_aea ._fbeg ,_eae );
_fdeg !=nil {return _fdeg ;};};_aea ._ggd ._fga .Objects =append (_aea ._ggd ._fga .Objects ,_eae );return nil ;};func (_aed Page )GetResourcesXObject ()(*_fb .PdfObjectDictionary ,bool ){_bdd ,_ffc :=_aed .GetResources ();if !_ffc {return nil ,false ;
};return _fb .GetDict (_bdd .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_eff *OutputIntents )Add (oi _fb .PdfObject )error {_dc ,_afg :=oi .(*_fb .PdfObjectDictionary );if !_afg {return _b .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _bc ,_ea :=_fb .GetStream (_dc .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ea {_eff ._fbf .Objects =append (_eff ._fbf .Objects ,_bc );};_baf ,_bde :=oi .(*_fb .PdfIndirectObject );if !_bde {_baf =_fb .MakeIndirectObject (oi );
};if _eff ._ed ==nil {_eff ._ed =_fb .MakeArray (_baf );}else {_eff ._ed .Append (_baf );};_eff ._fbf .Objects =append (_eff ._fbf .Objects ,_baf );return nil ;};type Page struct{_ade int ;Object *_fb .PdfObjectDictionary ;_fga *Document ;};func (_ee *Catalog )SetMarkInfo (mi _fb .PdfObject ){_fec :=_fb .MakeIndirectObject (mi );
_ee .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_fec );_ee ._ba .Objects =append (_ee ._ba .Objects ,_fec );};func (_eea *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_da :=_eea .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _da ==nil {return nil ,false ;};_cf ,_bdf :=_fb .GetIndirect (_da );if !_bdf {return nil ,false ;};_bgg ,_eef :=_fb .GetArray (_cf .PdfObject );if !_eef {return nil ,false ;};return &OutputIntents {_cg :_cf ,_ed :_bgg ,_fbf :_eea ._ba },true ;};type OutputIntent struct{Object *_fb .PdfObjectDictionary ;
};type ImageSMask struct{Image *Image ;Stream *_fb .PdfObjectStream ;};func (_gcf *Document )FindCatalog ()(*Catalog ,bool ){var _fae *_fb .PdfObjectDictionary ;for _ ,_aab :=range _gcf .Objects {_edg ,_fd :=_fb .GetDict (_aab );if !_fd {continue ;};if _gg ,_bef :=_fb .GetName (_edg .Get ("\u0054\u0079\u0070\u0065"));
_bef &&*_gg =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_fae =_edg ;break ;};};if _fae ==nil {return nil ,false ;};return &Catalog {Object :_fae ,_ba :_gcf },true ;};func (_ce Page )GetResources ()(*_fb .PdfObjectDictionary ,bool ){return _fb .GetDict (_ce .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_fbc *Catalog )SetMetadata (data []byte )error {_bg ,_bd :=_fb .MakeStream (data ,nil );if _bd !=nil {return _bd ;};_bg .Set ("\u0054\u0079\u0070\u0065",_fb .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_bg .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_fb .MakeName ("\u0058\u004d\u004c"));
_fbc .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_bg );_fbc ._ba .Objects =append (_fbc ._ba .Objects ,_bg );return nil ;};func (_fe *Catalog )GetPages ()([]Page ,bool ){_e ,_a :=_fb .GetDict (_fe .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_a {return nil ,false ;};_fc ,_ef :=_fb .GetArray (_e .Get ("\u004b\u0069\u0064\u0073"));if !_ef {return nil ,false ;};_ga :=make ([]Page ,_fc .Len ());for _fbe ,_c :=range _fc .Elements (){_af ,_ff :=_fb .GetDict (_c );if !_ff {continue ;};_ga [_fbe ]=Page {Object :_af ,_ade :_fbe +1,_fga :_fe ._ba };
};return _ga ,true ;};func (_bb *Catalog )GetMarkInfo ()(*_fb .PdfObjectDictionary ,bool ){_bfe ,_be :=_fb .GetDict (_bb .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));return _bfe ,_be ;};type Catalog struct{Object *_fb .PdfObjectDictionary ;
_ba *Document ;};func (_gc *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_fbf :_gc ._ba }};type Image struct{Name string ;Width int ;Height int ;Colorspace _fb .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;
Stream *_fb .PdfObjectStream ;};func (_dfd Content )GetData ()([]byte ,error ){_dge ,_gdb :=_fb .NewEncoderFromStream (_dfd .Stream );if _gdb !=nil {return nil ,_gdb ;};_aaa ,_gdb :=_dge .DecodeStream (_dfd .Stream );if _gdb !=nil {return nil ,_gdb ;};
return _aaa ,nil ;};func (_ae *OutputIntents )Get (i int )(OutputIntent ,bool ){if _ae ._ed ==nil {return OutputIntent {},false ;};if i >=_ae ._ed .Len (){return OutputIntent {},false ;};_dac :=_ae ._ed .Get (i );_gb ,_fa :=_fb .GetIndirect (_dac );if !_fa {_eb ,_eac :=_fb .GetDict (_dac );
return OutputIntent {Object :_eb },_eac ;};_aa ,_de :=_fb .GetDict (_gb .PdfObject );return OutputIntent {Object :_aa },_de ;};func (_bbc *Document )GetPages ()([]Page ,bool ){_cfg ,_befc :=_bbc .FindCatalog ();if !_befc {return nil ,false ;};return _cfg .GetPages ();
};func (_ceb Page )GetContents ()([]Content ,bool ){_acb ,_bcc :=_fb .GetArray (_ceb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bcc {_adf ,_dgf :=_fb .GetStream (_ceb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_dgf {return nil ,false ;};return []Content {{Stream :_adf ,_ggd :_ceb ,_fbeg :0}},true ;};_aca :=make ([]Content ,_acb .Len ());for _ffce ,_dce :=range _acb .Elements (){_bff ,_cdd :=_fb .GetStream (_dce );if !_cdd {continue ;};_aca [_ffce ]=Content {Stream :_bff ,_ggd :_ceb ,_fbeg :_ffce };
};return _aca ,true ;};func (_agb *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _fee :=_agb .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_fee !=nil {for _fg ,_fbce :=range _agb ._ba .Objects {if _fbce ==_fee {if outputIntents ._cg ==_fee {return ;
};_agb ._ba .Objects =append (_agb ._ba .Objects [:_fg ],_agb ._ba .Objects [_fg +1:]...);break ;};};};_gca :=outputIntents ._cg ;if _gca ==nil {_gca =_fb .MakeIndirectObject (outputIntents ._ed );};_agb .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_gca );
_agb ._ba .Objects =append (_agb ._ba .Objects ,_gca );};func (_df *OutputIntents )Len ()int {return _df ._ed .Len ()};func (_ad *Catalog )HasMetadata ()bool {_bf :=_ad .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _bf !=nil ;
};func (_dg *Catalog )SetVersion (){_dg .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_fb .MakeName (_f .Sprintf ("\u0025\u0064\u002e%\u0064",_dg ._ba .Version .Major ,_dg ._ba .Version .Minor )));};type Content struct{Stream *_fb .PdfObjectStream ;
_fbeg int ;_ggd Page ;};func _cd (_dd _fb .PdfObject )(_fb .PdfObjectName ,error ){var _afgd *_fb .PdfObjectName ;var _dec *_fb .PdfObjectArray ;if _bga ,_fgd :=_dd .(*_fb .PdfIndirectObject );_fgd {if _gga ,_edc :=_bga .PdfObject .(*_fb .PdfObjectArray );
_edc {_dec =_gga ;}else if _bfb ,_bgd :=_bga .PdfObject .(*_fb .PdfObjectName );_bgd {_afgd =_bfb ;};}else if _ded ,_fcf :=_dd .(*_fb .PdfObjectArray );_fcf {_dec =_ded ;}else if _cb ,_ab :=_dd .(*_fb .PdfObjectName );_ab {_afgd =_cb ;};if _afgd !=nil {switch *_afgd {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_afgd ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_afgd ,nil ;};};if _dec !=nil &&_dec .Len ()> 0{if _fgb ,_dff :=_dec .Get (0).(*_fb .PdfObjectName );_dff {switch *_fgb {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _dec .Len ()==1{return *_fgb ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_fgb ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_fgb ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_fgb ,nil ;};};};return "",nil ;};func (_bfa *Catalog )GetMetadata ()(*_fb .PdfObjectStream ,bool ){_fcc ,_ag :=_fb .GetStream (_bfa .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
return _fcc ,_ag ;};func (_cgb Page )FindXObjectImages ()([]*Image ,error ){_cc ,_bggb :=_cgb .GetResourcesXObject ();if !_bggb {return nil ,nil ;};var _bbb []*Image ;var _aac error ;_acaa :=map[*_fb .PdfObjectStream ]int {};_bad :=map[*_fb .PdfObjectStream ]struct{}{};
var _bcg int ;for _ ,_ebf :=range _cc .Keys (){_eaf ,_dcf :=_fb .GetStream (_cc .Get (_ebf ));if !_dcf {continue ;};if _ ,_fdb :=_acaa [_eaf ];_fdb {continue ;};_aedc ,_cde :=_fb .GetName (_eaf .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_cde ||_aedc .String ()!="\u0049\u006d\u0061g\u0065"{continue ;
};_ccd :=Image {BitsPerComponent :8,Stream :_eaf ,Name :string (_ebf )};if _ccd .Colorspace ,_aac =_cd (_eaf .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_aac !=nil {_d .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_aac );
continue ;};if _bdc ,_aad :=_fb .GetIntVal (_eaf .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_aad {_ccd .BitsPerComponent =_bdc ;};if _ebd ,_ec :=_fb .GetIntVal (_eaf .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_ec {_ccd .Width =_ebd ;};if _ede ,_adgc :=_fb .GetIntVal (_eaf .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_adgc {_ccd .Height =_ede ;};if _fgda ,_aec :=_fb .GetStream (_eaf .Get ("\u0053\u004d\u0061s\u006b"));_aec {_ccd .SMask =&ImageSMask {Image :&_ccd ,Stream :_fgda };
_bad [_fgda ]=struct{}{};};switch _ccd .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_ccd .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_ccd .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_ccd .ColorComponents =4;
default:_ccd .ColorComponents =-1;};_acaa [_eaf ]=_bcg ;_bbb =append (_bbb ,&_ccd );_bcg ++;};var _bab []int ;for _ ,_db :=range _bbb {if _db .SMask !=nil {_eed ,_ced :=_acaa [_db .SMask .Stream ];if _ced {_bab =append (_bab ,_eed );};};};_dbe :=make ([]*Image ,len (_bbb )-len (_bab ));
_bcg =0;_afe :for _fde ,_fgg :=range _bbb {for _ ,_acc :=range _bab {if _fde ==_acc {continue _afe ;};};_dbe [_bcg ]=_fgg ;_bcg ++;};return _bbb ,nil ;};func (_ac *Document )AddStream (stream *_fb .PdfObjectStream ){for _ ,_bdg :=range _ac .Objects {if _bdg ==stream {return ;
};};_ac .Objects =append (_ac .Objects ,stream );};func (_bgb *Document )AddIndirectObject (indirect *_fb .PdfIndirectObject ){for _ ,_adg :=range _bgb .Objects {if _adg ==indirect {return ;};};_bgb .Objects =append (_bgb .Objects ,indirect );};func (_afb *Page )Number ()int {return _afb ._ade };
type OutputIntents struct{_ed *_fb .PdfObjectArray ;_fbf *Document ;_cg *_fb .PdfIndirectObject ;};type Document struct{ID [2]string ;Version _fb .Version ;Objects []_fb .PdfObject ;Info _fb .PdfObject ;Crypt *_fb .PdfCrypt ;UseHashBasedID bool ;};func (_ccg Page )FindXObjectForms ()[]*_fb .PdfObjectStream {_aef ,_bca :=_ccg .GetResourcesXObject ();
if !_bca {return nil ;};_age :=map[*_fb .PdfObjectStream ]struct{}{};var _ddg func (_faa *_fb .PdfObjectDictionary ,_eg map[*_fb .PdfObjectStream ]struct{});_ddg =func (_bgc *_fb .PdfObjectDictionary ,_aee map[*_fb .PdfObjectStream ]struct{}){for _ ,_cgg :=range _bgc .Keys (){_ccb ,_cbf :=_fb .GetStream (_bgc .Get (_cgg ));
if !_cbf {continue ;};if _ ,_fbff :=_aee [_ccb ];_fbff {continue ;};_adb ,_acg :=_fb .GetName (_ccb .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_acg ||_adb .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_aee [_ccb ]=struct{}{};_cdf ,_acg :=_fb .GetDict (_ccb .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_acg {continue ;};_baa ,_daa :=_fb .GetDict (_cdf .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _daa {_ddg (_baa ,_aee );};};};_ddg (_aef ,_age );var _afeb []*_fb .PdfObjectStream ;for _ggae :=range _age {_afeb =append (_afeb ,_ggae );};return _afeb ;
};