//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_b "errors";_d "fmt";_gd "github.com/unidoc/unipdf/v3/common";_dc "github.com/unidoc/unipdf/v3/core";);func (_be *Catalog )SetVersion (){_be .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_dc .MakeName (_d .Sprintf ("\u0025\u0064\u002e%\u0064",_be ._e .Version .Major ,_be ._e .Version .Minor )));
};func (_ggf *Page )Number ()int {return _ggf ._ea };func (_gb *Catalog )SetMetadata (data []byte )error {_bdc ,_fe :=_dc .MakeStream (data ,nil );if _fe !=nil {return _fe ;};_bdc .Set ("\u0054\u0079\u0070\u0065",_dc .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));
_bdc .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_dc .MakeName ("\u0058\u004d\u004c"));_gb .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_bdc );_gb ._e .Objects =append (_gb ._e .Objects ,_bdc );return nil ;};func (_bdcb Page )GetResources ()(*_dc .PdfObjectDictionary ,bool ){return _dc .GetDict (_bdcb .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_ccg Content )GetData ()([]byte ,error ){_efa ,_dcca :=_dc .NewEncoderFromStream (_ccg .Stream );if _dcca !=nil {return nil ,_dcca ;};_gae ,_dcca :=_efa .DecodeStream (_ccg .Stream );if _dcca !=nil {return nil ,_dcca ;};return _gae ,nil ;};func (_efb *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_bbg :=_efb .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
if _bbg ==nil {return nil ,false ;};_fg ,_ag :=_dc .GetIndirect (_bbg );if !_ag {return nil ,false ;};_dcc ,_ge :=_dc .GetArray (_fg .PdfObject );if !_ge {return nil ,false ;};return &OutputIntents {_eeg :_fg ,_eb :_dcc ,_gf :_efb ._e },true ;};func (_aaf Page )GetResourcesXObject ()(*_dc .PdfObjectDictionary ,bool ){_aag ,_ce :=_aaf .GetResources ();
if !_ce {return nil ,false ;};return _dc .GetDict (_aag .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};type ImageSMask struct{Image *Image ;Stream *_dc .PdfObjectStream ;};func (_ac *Document )FindCatalog ()(*Catalog ,bool ){var _gdc *_dc .PdfObjectDictionary ;
for _ ,_gbg :=range _ac .Objects {_beb ,_fa :=_dc .GetDict (_gbg );if !_fa {continue ;};if _gec ,_ffd :=_dc .GetName (_beb .Get ("\u0054\u0079\u0070\u0065"));_ffd &&*_gec =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_gdc =_beb ;break ;};};if _gdc ==nil {return nil ,false ;
};return &Catalog {Object :_gdc ,_e :_ac },true ;};type Catalog struct{Object *_dc .PdfObjectDictionary ;_e *Document ;};func (_dd *Catalog )GetPages ()([]Page ,bool ){_gc ,_df :=_dc .GetDict (_dd .Object .Get ("\u0050\u0061\u0067e\u0073"));if !_df {return nil ,false ;
};_f ,_ba :=_dc .GetArray (_gc .Get ("\u004b\u0069\u0064\u0073"));if !_ba {return nil ,false ;};_ee :=make ([]Page ,_f .Len ());for _dfd ,_bb :=range _f .Elements (){_de ,_dcd :=_dc .GetDict (_bb );if !_dcd {continue ;};_ee [_dfd ]=Page {Object :_de ,_ea :_dfd +1,_fbf :_dd ._e };
};return _ee ,true ;};func (_dg *Catalog )SetMarkInfo (mi _dc .PdfObject ){_ga :=_dc .MakeIndirectObject (mi );_dg .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_ga );_dg ._e .Objects =append (_dg ._e .Objects ,_ga );};func (_fd *OutputIntents )Len ()int {return _fd ._eb .Len ()};
func (_c *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _fc :=_c .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");_fc !=nil {for _dda ,_dgf :=range _c ._e .Objects {if _dgf ==_fc {if outputIntents ._eeg ==_fc {return ;
};_c ._e .Objects =append (_c ._e .Objects [:_dda ],_c ._e .Objects [_dda +1:]...);break ;};};};_a :=outputIntents ._eeg ;if _a ==nil {_a =_dc .MakeIndirectObject (outputIntents ._eb );};_c .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_a );
_c ._e .Objects =append (_c ._e .Objects ,_a );};func (_ged *Content )SetData (data []byte )error {_afg ,_aeb :=_dc .MakeStream (data ,_dc .NewFlateEncoder ());if _aeb !=nil {return _aeb ;};_fbdf ,_gbb :=_dc .GetArray (_ged ._gdb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_gbb &&_ged ._gef ==0{_ged ._gdb .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_afg );}else {if _aeb =_fbdf .Set (_ged ._gef ,_afg );_aeb !=nil {return _aeb ;};};_ged ._gdb ._fbf .Objects =append (_ged ._gdb ._fbf .Objects ,_afg );
return nil ;};func (_decd *Document )AddIndirectObject (indirect *_dc .PdfIndirectObject ){for _ ,_fad :=range _decd .Objects {if _fad ==indirect {return ;};};_decd .Objects =append (_decd .Objects ,indirect );};type Document struct{ID [2]string ;Version _dc .Version ;
Objects []_dc .PdfObject ;Info _dc .PdfObject ;Crypt *_dc .PdfCrypt ;UseHashBasedID bool ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _dc .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_dc .PdfObjectStream ;
};func (_gdd Page )GetContents ()([]Content ,bool ){_ad ,_ege :=_dc .GetArray (_gdd .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_ege {_acc ,_gfg :=_dc .GetStream (_gdd .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_gfg {return nil ,false ;};return []Content {{Stream :_acc ,_gdb :_gdd ,_gef :0}},true ;};_eff :=make ([]Content ,_ad .Len ());for _edbb ,_add :=range _ad .Elements (){_gbc ,_ebg :=_dc .GetStream (_add );if !_ebg {continue ;};_eff [_edbb ]=Content {Stream :_gbc ,_gdb :_gdd ,_gef :_edbb };
};return _eff ,true ;};func (_fcd Page )FindXObjectForms ()[]*_dc .PdfObjectStream {_bea ,_bbgd :=_fcd .GetResourcesXObject ();if !_bbgd {return nil ;};_cf :=map[*_dc .PdfObjectStream ]struct{}{};var _dga func (_aef *_dc .PdfObjectDictionary ,_dfb map[*_dc .PdfObjectStream ]struct{});
_dga =func (_ceb *_dc .PdfObjectDictionary ,_ffe map[*_dc .PdfObjectStream ]struct{}){for _ ,_ffac :=range _ceb .Keys (){_cfc ,_ebgd :=_dc .GetStream (_ceb .Get (_ffac ));if !_ebgd {continue ;};if _ ,_gbae :=_ffe [_cfc ];_gbae {continue ;};_fgg ,_baa :=_dc .GetName (_cfc .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));
if !_baa ||_fgg .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_ffe [_cfc ]=struct{}{};_fbe ,_baa :=_dc .GetDict (_cfc .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));if !_baa {continue ;};_gbd ,_cac :=_dc .GetDict (_fbe .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));
if _cac {_dga (_gbd ,_ffe );};};};_dga (_bea ,_cf );var _dca []*_dc .PdfObjectStream ;for _eae :=range _cf {_dca =append (_dca ,_eae );};return _dca ;};type Content struct{Stream *_dc .PdfObjectStream ;_gef int ;_gdb Page ;};func (_eeb *Catalog )HasMetadata ()bool {_bd :=_eeb .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");
return _bd !=nil ;};func (_eg *OutputIntents )Add (oi _dc .PdfObject )error {_bf ,_ff :=oi .(*_dc .PdfObjectDictionary );if !_ff {return _b .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _ca ,_fba :=_dc .GetStream (_bf .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_fba {_eg ._gf .Objects =append (_eg ._gf .Objects ,_ca );};_dec ,_cg :=oi .(*_dc .PdfIndirectObject );if !_cg {_dec =_dc .MakeIndirectObject (oi );
};if _eg ._eb ==nil {_eg ._eb =_dc .MakeArray (_dec );}else {_eg ._eb .Append (_dec );};_eg ._gf .Objects =append (_eg ._gf .Objects ,_dec );return nil ;};func (_bdb Page )FindXObjectImages ()([]*Image ,error ){_ebe ,_fbd :=_bdb .GetResourcesXObject ();
if !_fbd {return nil ,nil ;};var _af []*Image ;var _dee error ;_gddg :=map[*_dc .PdfObjectStream ]int {};_befd :=map[*_dc .PdfObjectStream ]struct{}{};var _bdcbe int ;for _ ,_ebgg :=range _ebe .Keys (){_cc ,_ddd :=_dc .GetStream (_ebe .Get (_ebgg ));if !_ddd {continue ;
};if _ ,_eaf :=_gddg [_cc ];_eaf {continue ;};_gega ,_cb :=_dc .GetName (_cc .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_cb ||_gega .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_adg :=Image {BitsPerComponent :8,Stream :_cc ,Name :string (_ebgg )};
if _adg .Colorspace ,_dee =_gcg (_cc .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_dee !=nil {_gd .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_dee );
continue ;};if _eag ,_bg :=_dc .GetIntVal (_cc .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_bg {_adg .BitsPerComponent =_eag ;};if _afc ,_cec :=_dc .GetIntVal (_cc .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_cec {_adg .Width =_afc ;};if _bag ,_ebd :=_dc .GetIntVal (_cc .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_ebd {_adg .Height =_bag ;};if _gde ,_cbc :=_dc .GetStream (_cc .Get ("\u0053\u004d\u0061s\u006b"));_cbc {_adg .SMask =&ImageSMask {Image :&_adg ,Stream :_gde };
_befd [_gde ]=struct{}{};};switch _adg .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_adg .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_adg .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_adg .ColorComponents =4;
default:_adg .ColorComponents =-1;};_gddg [_cc ]=_bdcbe ;_af =append (_af ,&_adg );_bdcbe ++;};var _eef []int ;for _ ,_cde :=range _af {if _cde .SMask !=nil {_faf ,_daf :=_gddg [_cde .SMask .Stream ];if _daf {_eef =append (_eef ,_faf );};};};_fca :=make ([]*Image ,len (_af )-len (_eef ));
_bdcbe =0;_fag :for _baga ,_fff :=range _af {for _ ,_ffa :=range _eef {if _baga ==_ffa {continue _fag ;};};_fca [_bdcbe ]=_fff ;_bdcbe ++;};return _af ,nil ;};func _gcg (_bebf _dc .PdfObject )(_dc .PdfObjectName ,error ){var _geg *_dc .PdfObjectName ;var _agc *_dc .PdfObjectArray ;
if _gce ,_gee :=_bebf .(*_dc .PdfIndirectObject );_gee {if _ae ,_cad :=_gce .PdfObject .(*_dc .PdfObjectArray );_cad {_agc =_ae ;}else if _gba ,_cgf :=_gce .PdfObject .(*_dc .PdfObjectName );_cgf {_geg =_gba ;};}else if _gaa ,_gca :=_bebf .(*_dc .PdfObjectArray );
_gca {_agc =_gaa ;}else if _fdg ,_edb :=_bebf .(*_dc .PdfObjectName );_edb {_geg =_fdg ;};if _geg !=nil {switch *_geg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_geg ,nil ;
case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_geg ,nil ;};};if _agc !=nil &&_agc .Len ()> 0{if _bca ,_bdf :=_agc .Get (0).(*_dc .PdfObjectName );_bdf {switch *_bca {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _agc .Len ()==1{return *_bca ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_bca ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_bca ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_bca ,nil ;};};};return "",nil ;};type OutputIntent struct{Object *_dc .PdfObjectDictionary ;};func (_fef *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_gf :_fef ._e }};
func (_acg *Document )GetPages ()([]Page ,bool ){_edg ,_bac :=_acg .FindCatalog ();if !_bac {return nil ,false ;};return _edg .GetPages ();};func (_da *Catalog )GetMarkInfo ()(*_dc .PdfObjectDictionary ,bool ){_ed ,_fb :=_dc .GetDict (_da .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _ed ,_fb ;};type OutputIntents struct{_eb *_dc .PdfObjectArray ;_gf *Document ;_eeg *_dc .PdfIndirectObject ;};func (_db *OutputIntents )Get (i int )(OutputIntent ,bool ){if _db ._eb ==nil {return OutputIntent {},false ;};if i >=_db ._eb .Len (){return OutputIntent {},false ;
};_edf :=_db ._eb .Get (i );_egd ,_gg :=_dc .GetIndirect (_edf );if !_gg {_cd ,_bc :=_dc .GetDict (_edf );return OutputIntent {Object :_cd },_bc ;};_aa ,_ec :=_dc .GetDict (_egd .PdfObject );return OutputIntent {Object :_aa },_ec ;};type Page struct{_ea int ;
Object *_dc .PdfObjectDictionary ;_fbf *Document ;};func (_eed *Catalog )GetMetadata ()(*_dc .PdfObjectStream ,bool ){_bbe ,_ef :=_dc .GetStream (_eed .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));return _bbe ,_ef ;};func (_dcg *Document )AddStream (stream *_dc .PdfObjectStream ){for _ ,_aab :=range _dcg .Objects {if _aab ==stream {return ;
};};_dcg .Objects =append (_dcg .Objects ,stream );};