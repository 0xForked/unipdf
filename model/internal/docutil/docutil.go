//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package docutil ;import (_b "errors";_g "fmt";_ff "github.com/unidoc/unipdf/v3/common";_f "github.com/unidoc/unipdf/v3/core";);type ImageSMask struct{Image *Image ;Stream *_f .PdfObjectStream ;};func (_acf *Document )FindCatalog ()(*Catalog ,bool ){var _bc *_f .PdfObjectDictionary ;
for _ ,_beef :=range _acf .Objects {_ea ,_dfd :=_f .GetDict (_beef );if !_dfd {continue ;};if _dde ,_bcg :=_f .GetName (_ea .Get ("\u0054\u0079\u0070\u0065"));_bcg &&*_dde =="\u0043a\u0074\u0061\u006c\u006f\u0067"{_bc =_ea ;break ;};};if _bc ==nil {return nil ,false ;
};return &Catalog {Object :_bc ,_a :_acf },true ;};func (_gbf *Document )AddIndirectObject (indirect *_f .PdfIndirectObject ){for _ ,_cd :=range _gbf .Objects {if _cd ==indirect {return ;};};_gbf .Objects =append (_gbf .Objects ,indirect );};func (_fbgf Page )GetContents ()([]Content ,bool ){_bff ,_dgge :=_f .GetArray (_fbgf .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));
if !_dgge {_ab ,_bca :=_f .GetStream (_fbgf .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_bca {return nil ,false ;};return []Content {{Stream :_ab ,_aecb :_fbgf ,_beee :0}},true ;};_cdd :=make ([]Content ,_bff .Len ());for _abg ,_fge :=range _bff .Elements (){_acd ,_cge :=_f .GetStream (_fge );
if !_cge {continue ;};_cdd [_abg ]=Content {Stream :_acd ,_aecb :_fbgf ,_beee :_abg };};return _cdd ,true ;};func (_ee *Catalog )SetMarkInfo (mi _f .PdfObject ){_fad :=_f .MakeIndirectObject (mi );_ee .Object .Set ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f",_fad );
_ee ._a .Objects =append (_ee ._a .Objects ,_fad );};func (_gf *Catalog )NewOutputIntents ()*OutputIntents {return &OutputIntents {_ad :_gf ._a }};type OutputIntents struct{_gef *_f .PdfObjectArray ;_ad *Document ;_gd *_f .PdfIndirectObject ;};func (_ed Page )FindXObjectImages ()([]*Image ,error ){_cgb ,_deag :=_ed .GetResourcesXObject ();
if !_deag {return nil ,nil ;};var _ddb []*Image ;var _cfe error ;_edg :=map[*_f .PdfObjectStream ]int {};_fd :=map[*_f .PdfObjectStream ]struct{}{};var _cgdf int ;for _ ,_ddbb :=range _cgb .Keys (){_ecf ,_cdga :=_f .GetStream (_cgb .Get (_ddbb ));if !_cdga {continue ;
};if _ ,_eb :=_edg [_ecf ];_eb {continue ;};_fbc ,_bde :=_f .GetName (_ecf .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_bde ||_fbc .String ()!="\u0049\u006d\u0061g\u0065"{continue ;};_ddc :=Image {BitsPerComponent :8,Stream :_ecf ,Name :string (_ddbb )};
if _ddc .Colorspace ,_cfe =_egd (_ecf .PdfObjectDictionary .Get ("\u0043\u006f\u006c\u006f\u0072\u0053\u0070\u0061\u0063\u0065"));_cfe !=nil {_ff .Log .Error ("\u0045\u0072\u0072\u006f\u0072\u0020\u0064\u0065\u0074\u0065r\u006d\u0069\u006e\u0065\u0020\u0063\u006fl\u006f\u0072\u0020\u0073\u0070\u0061\u0063\u0065\u0020\u0025\u0073",_cfe );
continue ;};if _bce ,_dfc :=_f .GetIntVal (_ecf .PdfObjectDictionary .Get ("\u0042\u0069t\u0073\u0050\u0065r\u0043\u006f\u006d\u0070\u006f\u006e\u0065\u006e\u0074"));_dfc {_ddc .BitsPerComponent =_bce ;};if _cbb ,_acc :=_f .GetIntVal (_ecf .PdfObjectDictionary .Get ("\u0057\u0069\u0064t\u0068"));
_acc {_ddc .Width =_cbb ;};if _fce ,_ef :=_f .GetIntVal (_ecf .PdfObjectDictionary .Get ("\u0048\u0065\u0069\u0067\u0068\u0074"));_ef {_ddc .Height =_fce ;};if _ded ,_gedg :=_f .GetStream (_ecf .Get ("\u0053\u004d\u0061s\u006b"));_gedg {_ddc .SMask =&ImageSMask {Image :&_ddc ,Stream :_ded };
_fd [_ded ]=struct{}{};};switch _ddc .Colorspace {case "\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B":_ddc .ColorComponents =3;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079":_ddc .ColorComponents =1;case "\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":_ddc .ColorComponents =4;
default:_ddc .ColorComponents =-1;};_edg [_ecf ]=_cgdf ;_ddb =append (_ddb ,&_ddc );_cgdf ++;};var _deg []int ;for _ ,_abge :=range _ddb {if _abge .SMask !=nil {_cgc ,_agd :=_edg [_abge .SMask .Stream ];if _agd {_deg =append (_deg ,_cgc );};};};_cca :=make ([]*Image ,len (_ddb )-len (_deg ));
_cgdf =0;_fcc :for _dec ,_fgf :=range _ddb {for _ ,_age :=range _deg {if _dec ==_age {continue _fcc ;};};_cca [_cgdf ]=_fgf ;_cgdf ++;};return _ddb ,nil ;};func (_fb *Catalog )GetPages ()([]Page ,bool ){_af ,_d :=_f .GetDict (_fb .Object .Get ("\u0050\u0061\u0067e\u0073"));
if !_d {return nil ,false ;};_c ,_gb :=_f .GetArray (_af .Get ("\u004b\u0069\u0064\u0073"));if !_gb {return nil ,false ;};_cc :=make ([]Page ,_c .Len ());for _ge ,_bf :=range _c .Elements (){_fc ,_bfb :=_f .GetDict (_bf );if !_bfb {continue ;};_cc [_ge ]=Page {Object :_fc ,_adc :_ge +1,_egda :_fb ._a };
};return _cc ,true ;};func (_fba *Catalog )SetMetadata (data []byte )error {_bbc ,_fa :=_f .MakeStream (data ,nil );if _fa !=nil {return _fa ;};_bbc .Set ("\u0054\u0079\u0070\u0065",_f .MakeName ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));_bbc .Set ("\u0053u\u0062\u0074\u0079\u0070\u0065",_f .MakeName ("\u0058\u004d\u004c"));
_fba .Object .Set ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061",_bbc );_fba ._a .Objects =append (_fba ._a .Objects ,_bbc );return nil ;};func (_eee *Document )AddStream (stream *_f .PdfObjectStream ){for _ ,_de :=range _eee .Objects {if _de ==stream {return ;
};};_eee .Objects =append (_eee .Objects ,stream );};func (_ecg *Page )Number ()int {return _ecg ._adc };func _egd (_bbe _f .PdfObject )(_f .PdfObjectName ,error ){var _bdg *_f .PdfObjectName ;var _dbg *_f .PdfObjectArray ;if _bga ,_dbc :=_bbe .(*_f .PdfIndirectObject );
_dbc {if _aea ,_bgb :=_bga .PdfObject .(*_f .PdfObjectArray );_bgb {_dbg =_aea ;}else if _gc ,_ga :=_bga .PdfObject .(*_f .PdfObjectName );_ga {_bdg =_gc ;};}else if _cb ,_dea :=_bbe .(*_f .PdfObjectArray );_dea {_dbg =_cb ;}else if _cgd ,_cda :=_bbe .(*_f .PdfObjectName );
_cda {_bdg =_cgd ;};if _bdg !=nil {switch *_bdg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":return *_bdg ,nil ;case "\u0050a\u0074\u0074\u0065\u0072\u006e":return *_bdg ,nil ;
};};if _dbg !=nil &&_dbg .Len ()> 0{if _cdg ,_fae :=_dbg .Get (0).(*_f .PdfObjectName );_fae {switch *_cdg {case "\u0044\u0065\u0076\u0069\u0063\u0065\u0047\u0072\u0061\u0079","\u0044e\u0076\u0069\u0063\u0065\u0052\u0047B","\u0044\u0065\u0076\u0069\u0063\u0065\u0043\u004d\u0059\u004b":if _dbg .Len ()==1{return *_cdg ,nil ;
};case "\u0043a\u006c\u0047\u0072\u0061\u0079","\u0043\u0061\u006c\u0052\u0047\u0042","\u004c\u0061\u0062":return *_cdg ,nil ;case "\u0049\u0043\u0043\u0042\u0061\u0073\u0065\u0064","\u0050a\u0074\u0074\u0065\u0072\u006e","\u0049n\u0064\u0065\u0078\u0065\u0064":return *_cdg ,nil ;
case "\u0053\u0065\u0070\u0061\u0072\u0061\u0074\u0069\u006f\u006e","\u0044e\u0076\u0069\u0063\u0065\u004e":return *_cdg ,nil ;};};};return "",nil ;};func (_bb *Catalog )SetVersion (){_bb .Object .Set ("\u0056e\u0072\u0073\u0069\u006f\u006e",_f .MakeName (_g .Sprintf ("\u0025\u0064\u002e%\u0064",_bb ._a .Version .Major ,_bb ._a .Version .Minor )));
};type OutputIntent struct{Object *_f .PdfObjectDictionary ;};func (_dg *Catalog )HasMetadata ()bool {_fg :=_dg .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061");return _fg !=nil ;};func (_aebc Page )FindXObjectForms ()[]*_f .PdfObjectStream {_fgg ,_fccf :=_aebc .GetResourcesXObject ();
if !_fccf {return nil ;};_fda :=map[*_f .PdfObjectStream ]struct{}{};var _gefc func (_ggc *_f .PdfObjectDictionary ,_bed map[*_f .PdfObjectStream ]struct{});_gefc =func (_aec *_f .PdfObjectDictionary ,_beff map[*_f .PdfObjectStream ]struct{}){for _ ,_fgea :=range _aec .Keys (){_baf ,_cgbe :=_f .GetStream (_aec .Get (_fgea ));
if !_cgbe {continue ;};if _ ,_cba :=_beff [_baf ];_cba {continue ;};_adb ,_cfef :=_f .GetName (_baf .Get ("\u0053u\u0062\u0074\u0079\u0070\u0065"));if !_cfef ||_adb .String ()!="\u0046\u006f\u0072\u006d"{continue ;};_beff [_baf ]=struct{}{};_agde ,_cfef :=_f .GetDict (_baf .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
if !_cfef {continue ;};_cgcd ,_fcf :=_f .GetDict (_agde .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));if _fcf {_gefc (_cgcd ,_beff );};};};_gefc (_fgg ,_fda );var _gae []*_f .PdfObjectStream ;for _ce :=range _fda {_gae =append (_gae ,_ce );};return _gae ;
};func (_bee *Catalog )GetOutputIntents ()(*OutputIntents ,bool ){_dgg :=_bee .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");if _dgg ==nil {return nil ,false ;};_gba ,_bd :=_f .GetIndirect (_dgg );if !_bd {return nil ,false ;
};_dgc ,_dc :=_f .GetArray (_gba .PdfObject );if !_dc {return nil ,false ;};return &OutputIntents {_gd :_gba ,_gef :_dgc ,_ad :_bee ._a },true ;};type Document struct{ID [2]string ;Version _f .Version ;Objects []_f .PdfObject ;Info _f .PdfObject ;Crypt *_f .PdfCrypt ;
UseHashBasedID bool ;};func (_ddeb *Document )GetPages ()([]Page ,bool ){_gebg ,_bcc :=_ddeb .FindCatalog ();if !_bcc {return nil ,false ;};return _gebg .GetPages ();};func (_bbf Content )GetData ()([]byte ,error ){_dff ,_beg :=_f .NewEncoderFromStream (_bbf .Stream );
if _beg !=nil {return nil ,_beg ;};_aba ,_beg :=_dff .DecodeStream (_bbf .Stream );if _beg !=nil {return nil ,_beg ;};return _aba ,nil ;};func (_bgg *Content )SetData (data []byte )error {_fab ,_fbe :=_f .MakeStream (data ,_f .NewFlateEncoder ());if _fbe !=nil {return _fbe ;
};_bfc ,_aebf :=_f .GetArray (_bgg ._aecb .Object .Get ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073"));if !_aebf &&_bgg ._beee ==0{_bgg ._aecb .Object .Set ("\u0043\u006f\u006e\u0074\u0065\u006e\u0074\u0073",_fab );}else {if _fbe =_bfc .Set (_bgg ._beee ,_fab );
_fbe !=nil {return _fbe ;};};_bgg ._aecb ._egda .Objects =append (_bgg ._aecb ._egda .Objects ,_fab );return nil ;};type Catalog struct{Object *_f .PdfObjectDictionary ;_a *Document ;};func (_fbb *OutputIntents )Add (oi _f .PdfObject )error {_cae ,_gfb :=oi .(*_f .PdfObjectDictionary );
if !_gfb {return _b .New ("\u0069\u006e\u0070\u0075\u0074\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020\u0069\u006e\u0074\u0065\u006et\u0020\u0073\u0068\u006f\u0075\u006c\u0064 \u0062\u0065\u0020\u0061\u006e\u0020\u006f\u0062\u006a\u0065\u0063t\u0020\u0064\u0069\u0063\u0074\u0069\u006f\u006e\u0061\u0072\u0079");
};if _cf ,_ac :=_f .GetStream (_cae .Get ("\u0044\u0065\u0073\u0074\u004f\u0075\u0074\u0070\u0075\u0074\u0050\u0072o\u0066\u0069\u006c\u0065"));_ac {_fbb ._ad .Objects =append (_fbb ._ad .Objects ,_cf );};_gfd ,_gbd :=oi .(*_f .PdfIndirectObject );if !_gbd {_gfd =_f .MakeIndirectObject (oi );
};if _fbb ._gef ==nil {_fbb ._gef =_f .MakeArray (_gfd );}else {_fbb ._gef .Append (_gfd );};_fbb ._ad .Objects =append (_fbb ._ad .Objects ,_gfd );return nil ;};func (_be *Catalog )GetMarkInfo ()(*_f .PdfObjectDictionary ,bool ){_db ,_cg :=_f .GetDict (_be .Object .Get ("\u004d\u0061\u0072\u006b\u0049\u006e\u0066\u006f"));
return _db ,_cg ;};type Image struct{Name string ;Width int ;Height int ;Colorspace _f .PdfObjectName ;ColorComponents int ;BitsPerComponent int ;SMask *ImageSMask ;Stream *_f .PdfObjectStream ;};func (_bg *Catalog )SetOutputIntents (outputIntents *OutputIntents ){if _ec :=_bg .Object .Get ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073");
_ec !=nil {for _eg ,_ae :=range _bg ._a .Objects {if _ae ==_ec {if outputIntents ._gd ==_ec {return ;};_bg ._a .Objects =append (_bg ._a .Objects [:_eg ],_bg ._a .Objects [_eg +1:]...);break ;};};};_ca :=outputIntents ._gd ;if _ca ==nil {_ca =_f .MakeIndirectObject (outputIntents ._gef );
};_bg .Object .Set ("\u004f\u0075\u0074\u0070\u0075\u0074\u0049\u006e\u0074\u0065\u006e\u0074\u0073",_ca );_bg ._a .Objects =append (_bg ._a .Objects ,_ca );};func (_aed *OutputIntents )Len ()int {return _aed ._gef .Len ()};func (_gff Page )GetResources ()(*_f .PdfObjectDictionary ,bool ){return _f .GetDict (_gff .Object .Get ("\u0052e\u0073\u006f\u0075\u0072\u0063\u0065s"));
};func (_ada *OutputIntents )Get (i int )(OutputIntent ,bool ){if _ada ._gef ==nil {return OutputIntent {},false ;};if i >=_ada ._gef .Len (){return OutputIntent {},false ;};_caa :=_ada ._gef .Get (i );_aa ,_dd :=_f .GetIndirect (_caa );if !_dd {_geb ,_df :=_f .GetDict (_caa );
return OutputIntent {Object :_geb },_df ;};_gg ,_gdb :=_f .GetDict (_aa .PdfObject );return OutputIntent {Object :_gg },_gdb ;};func (_cff Page )GetResourcesXObject ()(*_f .PdfObjectDictionary ,bool ){_ag ,_bef :=_cff .GetResources ();if !_bef {return nil ,false ;
};return _f .GetDict (_ag .Get ("\u0058O\u0062\u006a\u0065\u0063\u0074"));};func (_da *Catalog )GetMetadata ()(*_f .PdfObjectStream ,bool ){_ged ,_daf :=_f .GetStream (_da .Object .Get ("\u004d\u0065\u0074\u0061\u0064\u0061\u0074\u0061"));return _ged ,_daf ;
};type Page struct{_adc int ;Object *_f .PdfObjectDictionary ;_egda *Document ;};type Content struct{Stream *_f .PdfObjectStream ;_beee int ;_aecb Page ;};